/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/gantt/library","sap/ui/core/Control","sap/ui/base/Object","sap/m/OverflowToolbarAssociativePopoverControls"],function(l,C,B,O){"use strict";var P=l.simple.ContainerToolbarPlaceholderType;var a=C.extend("sap.gantt.simple.ContainerToolbarPlaceholder",{metadata:{library:"sap.gantt",interfaces:["sap.m.IOverflowToolbarContent"],properties:{type:{type:"sap.gantt.simple.ContainerToolbarPlaceholderType",defaultValue:null},_show:{type:"boolean",defaultValue:false}},aggregations:{_control:{type:"sap.ui.core.Control",multiple:false}}},renderer:function(r,c){var o=c._getControl();if(!o||!c._getShow()){return;}if(c.getType()==="Spacer"){r.renderControl(o);}else{r.write("<div");r.writeControlData(c);r.writeClasses();r.write(">");r.renderControl(o);r.write("</div>");}}});a.prototype.init=function(){this._oOverflowToolbarAssociativePopoverControls=new O();this._aControlAutoCloseEvents=[];};a.prototype.getOverflowToolbarConfig=function(){var c=this._getControl(),s="sapGanttSimpleContainerToolbarPlaceholderInPopover",o=this._mapOverflowToolbarConfig();if(!c){return o;}if(B.isA(c,"sap.m.SegmentedButton")){o.onBeforeEnterOverflow=function(){c._onBeforeEnterOverflow(c);this.addStyleClass(s);}.bind(this);o.onAfterExitOverflow=function(){c._onAfterExitOverflow(c);this.removeStyleClass(s);}.bind(this);}else if(B.isA(c,"sap.m.OverflowToolbarButton")){o.onBeforeEnterOverflow=function(){this.addStyleClass(s);this._oOverflowToolbarAssociativePopoverControls._preProcessSapMButton(c);c._bInOverflow=true;}.bind(this);o.onAfterExitOverflow=function(){this.removeStyleClass(s);delete c._bInOverflow;this._oOverflowToolbarAssociativePopoverControls._postProcessSapMButton(c);}.bind(this);}if(o.autoCloseEvents){this._attachAutoCloseEvents(o.autoCloseEvents);o.autoCloseEvents=["_controlAutoCloseEvent"];}return o;};a.prototype._mapOverflowToolbarConfig=function(){var c=this._getControl(),o={canOverflow:!(this._isTypeSpacer()||this._isTypeTimeZoomControl())},b;if(!c){return o;}if(c.getMetadata().getInterfaces().indexOf("sap.m.IOverflowToolbarContent")!==-1){return c.getOverflowToolbarConfig();}b=O.getControlConfig(c);if(b){o={canOverflow:b.canOverflow,autoCloseEvents:b.listenForEvents,propsUnrelatedToSize:b.noInvalidationProps,onBeforeEnterOverflow:b.preProcess,onAfterExitOverflow:b.postProcess};}return o;};a.prototype._attachAutoCloseEvents=function(c){var o=this._getControl(),A;c.forEach(function(e){A="attach"+this._capitalize(e);if(o[A]){o[A](this._fireAutoCloseEvent.bind(this));}else{o.attachEvent(e,this._fireAutoCloseEvent.bind(this));}}.bind(this));this._aControlAutoCloseEvents=c;};a.prototype._detachAutoCloseEvents=function(){var c=this._getControl(),d;this._aControlAutoCloseEvents.forEach(function(e){d="detach"+this._capitalize(e);if(c[d]){c[d](this._fireAutoCloseEvent,this);}else{c.detachEvent(e,this._fireAutoCloseEvent,this);}},this);this._aControlAutoCloseEvents=[];};a.prototype._toSelectMode=function(){this._getControl()._toSelectMode();};a.prototype._toNormalMode=function(){this._getControl()._toNormalMode();};a.prototype.getIcon=function(){return this._getControl().getIcon();};a.prototype.getLayoutData=function(){var c=this._getControl();return c?c.getLayoutData():null;};a.prototype._getControl=function(){return this.getAggregation("_control");};a.prototype._setControl=function(c){this.setAggregation("_control",c);};a.prototype._getShow=function(){return this.getProperty("_show");};a.prototype._isTypeSpacer=function(){return this.getType()===P.Spacer;};a.prototype._isTypeTimeZoomControl=function(){return this.getType()===P.TimeZoomControl;};a.prototype._fireAutoCloseEvent=function(){this.fireEvent("_controlAutoClose");};a.prototype._capitalize=function(t){return t.substring(0,1).toUpperCase()+t.substring(1);};a.prototype.setType=function(t){var p=this.getParent();if(p&&t!==this.getType()){this._detachAutoCloseEvents();this._setControl(null);p.bShallUpdateContent=true;p.invalidate();}this.setProperty("type",t,true);};return a;});
