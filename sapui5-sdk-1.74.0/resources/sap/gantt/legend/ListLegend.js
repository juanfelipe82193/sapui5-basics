/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.gantt.legend=sap.gantt.legend||{};sap.gantt.legend.ListLegendItemCheckbox={NoShow:"noShow",Checked:"checked",Unchecked:"unchecked"};sap.ui.define(["./LegendBase","sap/m/CheckBox","sap/gantt/drawer/Legend"],function(L,C,a){"use strict";var b=L.extend("sap.gantt.legend.ListLegend",{metadata:{properties:{shapes:{type:"sap.gantt.config.Shape[]"}},events:{checkBoxChange:{parameters:{legendType:{type:"string"},value:{type:"boolean"}}}}}});b.prototype.init=function(){L.prototype.init.apply(this,arguments);this._oListLegendDrawer=new a();this._aCheckBoxes=[];};b.prototype.onAfterRendering=function(){for(var i=0;i<this._aShapeInstance.length;i++){var s=this._aShapeInstance[i];var S=d3.select("#"+this.getId()+"-svg-"+i);var c=S.selectAll("."+s.getId()).data([i]);this._oListLegendDrawer._drawPerTag(c,s);}};b.prototype.setShapes=function(s){var t=this;this.setProperty("shapes",s);function c(){var h=false;for(var i=0;i<t._aShapeInstance.length;i++){var S=t._aShapeInstance[i].mShapeConfig.getSwitchOfCheckBox();if(S==sap.gantt.legend.ListLegendItemCheckbox.Checked||S==sap.gantt.legend.ListLegendItemCheckbox.Unchecked){h=true;break;}}if(h){for(var j=0;j<t._aShapeInstance.length;j++){var o=t._aShapeInstance[j];var d=o.mShapeConfig.getSwitchOfCheckBox();var f=new C({selected:(d==sap.gantt.legend.ListLegendItemCheckbox.Checked)?true:false,enabled:(d==sap.gantt.legend.ListLegendItemCheckbox.NoShow)?false:true}).data("key",(o.mShapeConfig.getKey&&o.mShapeConfig.getKey())?o.mShapeConfig.getKey():o.getLegend()).setTooltip(o.getLegend()).attachSelect(t._onCheckBoxChange,t);t._aCheckBoxes.push(f);}}}if(s&&s.length>0){this._aCheckBoxes=[];try{t._aShapeInstance=t._instantShapeSync(s);c();}catch(e){t._instantShapeAsync(s).then(function(S){t._aShapeInstance=S;c();});}}return this;};b.prototype._onCheckBoxChange=function(e){var s=e.getSource();this.fireCheckBoxChange({legendType:s.data("key"),value:e.getParameter("selected")});};return b;},true);
