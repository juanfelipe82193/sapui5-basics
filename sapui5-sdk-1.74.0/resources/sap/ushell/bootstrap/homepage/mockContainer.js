// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/base/Object","sap/ushell/Utils","sap/ushell/EventHub","sap/ushell/services/ClientSideTargetResolution","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery"],function(O,u,H,C,a,q){"use strict";H.emit("CoreResourcesComplementLoaded");var p,c={services:{Personalization:{adapter:{module:"sap.ushell.adapters.local.PersonalizationAdapter"}},CommonDataModel:{adapter:{config:{allowSiteSourceFromURLParameter:true,ignoreSiteDataPersonalization:true,siteDataUrl:"../../cdmSiteData/CommonDataModelAdapterData.json"}}},AppState:{adapter:{module:"sap.ushell.adapters.local.AppStateAdapter"}}}},s=new u.Map(),S={getPlatform:function(){return"cdm";}},A={getSystem:function(){return S;}};function b(n,S,P,e){var o=g(n).adapter||{},f=o.module||d(S.getPlatform())+"."+n+"Adapter";function h(){return new(a.get(f||""))(S,P,{config:o.config||{}});}if(e){return new Promise(function(r,i){var m=f.replace(/\./g,"/");sap.ui.require([m],function(){try{r(h());}catch(j){i(j);}});});}sap.ui.require([f],function(){return h();});}function g(e){return(c.services&&c.services[e])||{};}function d(P){if(p&&p[P]){return p[P];}return"sap.ushell.adapters."+P;}return O.extend("sap.ushell.Container",{isMock:true,constructor:function(){},getServiceAsync:function(e,P){return Promise.resolve(this.getService(e,P,true));},getService:function(e,P,f){this._overrideCSTRResolution();var o={},m,k,h,i,j,l;function n(S){var D=new q.Deferred();if(!S){throw new Error("Missing system");}D.resolve(b(e,S,P));sap.ushell.Container.addRemoteSystem(S);return D.promise();}if(!e){throw new Error("Missing service name");}if(e.indexOf(".")>=0){throw new Error("Unsupported service name");}j=g(e);m=j.module||"sap.ushell.services."+e;k=m+"/"+(P||"");l={config:j.config||{}};function r(v,i){o.createAdapter=n;return new v(i,o,P,l);}function t(h,f){var v;if(h.hasNoAdapter){v=new h(o,P,l);}else{i=b(e,A.getSystem(),P,f);if(f){return i.then(function(w){var v=r(h,w);s.put(k,v);return v;});}v=r(h,i);}s.put(k,v);return f?Promise.resolve(v):v;}if(!s.containsKey(k)){if(f){return new Promise(function(v){sap.ui.require([m.replace(/[.]/g,"/")],function(w){v(t(w,true));});});}h=sap.ui.requireSync(m.replace(/[.]/g,"/"));return t(h);}if(f){return Promise.resolve(s.get(k));}return s.get(k);},_overrideCSTRResolution:function(){C.prototype.getEasyAccessSystems=function(){var D=new q.Deferred(),r={"U1Y_000":{"appType":{"TR":true,"WDA":true},"text":"U1Y Client 000"},"FLPINTEGRATION2015_588":{"appType":{"URL":true},"text":"Business Objects Demo"},"GOOGLE":{"appType":{"URL":true},"text":"Google Searches"}};D.resolve(r);return D.promise();};},getUser:function(){return{getLanguage:function(){return"en";}};},getRenderer:function(){return{createExtendedShellState:function(){},applyExtendedShellState:function(){}};},getLogonSystem:function(){return false;}});},true);
