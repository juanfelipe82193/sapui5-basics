// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/bootstrap/_SchedulingAgent/logger","sap/base/util/now","sap/base/util/deepClone"],function(l,n,c){"use strict";var i={module:{schedulingAgent:{id:"schedulingAgent",FatalError:"FATAL_ERROR",Idle:"IDLE",Initialized:"INITIALIZED",Initializing:"INITIALIZING",Waiting:"WAITING",WokeUp:"WOKE_UP",Working:"WORKING"},state:{id:"state",FatalError:"FATAL_ERROR",Available:"AVAILABLE"},flpScheduler:{id:"flpScheduler",Initialized:"INITIALIZED",WrongConfiguration:"WRONG_CONFIGURATION",LoadingAborted:"LOADING_ABORTED"},flpLoader:{id:"flpLoader"},logger:{id:l,Block:"BLOCK",Step:"STEP",Module:"MODULE"}},loadingStep:{Prepared:"STEP_PREPARED",WaitingForDependencies:"STEP_WAITING_FOR_DEPENDENCIES",InProgress:"STEP_IN_PROGRESS",Done:"STEP_DONE",Aborted:"STEP_ABORTED",Skipped:"STEP_SKIPPED"},loadingBlock:{Prepared:"BLOCK_PREPARED",WaitingForDependencies:"BLOCK_WAITING_FOR_DEPENDENCIES",InProgress:"BLOCK_IN_PROGRESS",TimedOut:"BLOCK_TIMEDOUT",Done:"BLOCK_DONE",Aborted:"BLOCK_ABORTED"}};var s={id:i,oState:{ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}},clear:function(){this.oState={ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}};},getIdBase:function(){return i;},setForLoadingBlock:function(a,b,p,r,d){this.oState.ofLoadingBlock[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingBlock[a].time,type:i.module.logger.Block,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingBlock:function(a){return this.oState.ofLoadingBlock[a];},setForLoadingStep:function(a,b,p,r,d){this.oState.ofLoadingStep[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingStep[a].time,type:i.module.logger.Step,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingStep:function(a){return this.oState.ofLoadingStep[a];},setForModule:function(a,b,r){this.oState.ofModule[a]={time:n(),status:b,remark:r,byModule:undefined};l.logStatus({time:this.oState.ofModule[a].time,type:i.module.logger.Module,id:a,status:b,parameter:undefined,remark:r,byModule:undefined});},getForModule:function(a){return this.oState.ofModule[a];},isBlockWaitingForDependencies:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.WaitingForDependencies);},isBlockLoading:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.InProgress);},isBlockLoaded:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Done);},isBlockLoadingAborted:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Aborted);},hasBlockLoadingTimedOut:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.TimedOut);},isStepWaitingForDependencies:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.WaitingForDependencies);},isStepLoading:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.InProgress);},isStepLoaded:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Done);},isStepLoadingAborted:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Sborted);},isStepSkipped:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Skipped);},isAgentIdle:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Idle);},isAgentWaiting:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Waiting);},agentWokeUp:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.WokeUp);},dump:function(){console.log(JSON.parse(JSON.stringify(this.oState)));var S=c(this.oState);return S;},iStartingTime:n()};s.setForModule(i.module.state.id,i.module.state.Available);return s;},false);
