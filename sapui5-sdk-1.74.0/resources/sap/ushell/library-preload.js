//@ui5-bundle sap/ushell/library-preload.js
sap.ui.predefine('sap/ushell/UIActions',function(){"use strict";var U=function(c){if(!c||!c.rootSelector||!c.containerSelector||!c.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.");}this.animationDuration=null;this.captureStart=null;this.captureMove=null;this.captureEnd=null;this.clickCallback=null;this.clickEvent=null;this.clickHandler=null;this.clone=null;this.cloneClass=null;this.container=null;this.contextMenuEvent=null;this.debug=null;this.defaultDragStartEvent=null;this.defaultMouseMoveEvent=null;this.deltaTop=0;this.disabledDraggableSelector=null;this.dragAndScrollCallback=null;this.dragAndScrollDuration=null;this.dragAndScrollTimer=null;this.draggable=null;this.placeHolderClass=null;this.draggableSelector=null;this.draggableSelectorExclude=null;this.doubleTapCallback=null;this.doubleTapDelay=null;this.element=null;this.endDragAndScrollCallback;this.endX=null;this.endY=null;this.isLayoutEngine=null;this.isTouch=null;this.isCombi=null;this.lastElement=null;this.lastTapTime=null;this.lockMode=null;this.log=null;this.mode=null;this.mouseDownEvent=null;this.mouseMoveEvent=null;this.mouseUpEvent=null;this.moveTolerance=null;this.moveX=null;this.moveY=null;this.noop=null;this.onDragStartUIHandler=null;this.onDragEndUIHandler=null;this.preventClickFlag;this.preventClickTimeoutId;this.scrollContainer=null;this.scrollContainerSelector=null;this.scrollEvent=null;this.scrollTimer=null;this.startX=null;this.startY=null;this.switchModeDelay=null;this.tapsNumber=null;this.timer=null;this.scrollHandler=null;this.touchCancelEvent=null;this.dragCallback=null;this.onBeforeCreateClone=null;this.endCallback=null;this.touchEndEvent=null;this.touchMoveEvent=null;this.startCallback=null;this.touchStartEvent=null;this.wrapper=null;this.wrapperRect=null;this.scrollCallback=null;this.draggableElement;this.offsetLeft=0;this.elementsToCapture=null;this.init=function(c){this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.noop=function(){};this.isLayoutEngine=c.isLayoutEngine||false;if(this.isLayoutEngine){this.moveDraggable=this.noop;}this.isTouch=c.isTouch?!!c.isTouch:false;this.isCombi=c.isCombi?!!c.isCombi:false;this.container=document.querySelector(c.containerSelector);this.scrollContainerSelector=c.scrollContainerSelector||c.containerSelector;this.switchModeDelay=c.switchModeDelay||1500;this.dragAndScrollDuration=c.dragAndScrollDuration||230;this.moveTolerance=c.moveTolerance===0?0:c.moveTolerance||10;this.draggableSelector=c.draggableSelector;this.draggableSelectorBlocker=c.draggableSelectorBlocker||c.rootSelector;this.draggableSelectorExclude=c.draggableSelectorExclude;this.mode='normal';this.debug=c.debug||false;this.root=document.querySelector(c.rootSelector)||document.querySelector("#canvas");this.animationDuration=c.animationDuration||330;this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.lockMode=false;this.placeHolderClass=c.placeHolderClass||"";this.cloneClass=c.cloneClass||"";this.deltaTop=c.deltaTop||0;this.wrapper=c.wrapperSelector?document.querySelector(c.wrapperSelector):this.container.parentNode;this.clickCallback=typeof c.clickCallback==='function'?c.clickCallback:this.noop;this.startCallback=typeof c.startCallback==='function'?c.startCallback:this.noop;this.doubleTapCallback=typeof c.doubleTapCallback==='function'?c.doubleTapCallback:this.noop;this.endCallback=typeof c.endCallback==='function'?c.endCallback:this.noop;this.dragCallback=typeof c.dragCallback==='function'?c.dragCallback:this.noop;this.onBeforeCreateClone=typeof c.onBeforeCreateClone==='function'?c.onBeforeCreateClone:this.noop;this.dragAndScrollCallback=typeof c.dragAndScrollCallback==='function'?c.dragAndScrollCallback:this.noop;this.endDragAndScrollCallback=typeof c.endDragAndScrollCallback==='function'?c.endDragAndScrollCallback:this.noop;this.scrollCallback=typeof c.scrollCallback==='function'?c.scrollCallback:this.noop;this.doubleTapDelay=c.doubleTapDelay||500;this.wrapperRect=this.wrapper.getBoundingClientRect();this.scrollEvent='scroll';this.touchStartEvent='touchstart';this.touchMoveEvent='touchmove';this.touchEndEvent='touchend';this.mouseDownEvent='mousedown';this.mouseMoveEvent='mousemove';this.mouseUpEvent='mouseup';this.contextMenuEvent='contextmenu';this.touchCancelEvent='touchcancel';this.defaultDragStartEvent='dragstart';this.defaultMouseMoveEvent='mousemove';this.clickEvent='click';this.isVerticalDragOnly=c.isVerticalDragOnly||false;this.draggableElement=c.draggableElement;this.offsetLeft=c.offsetLeft;this.elementsToCapture=c.elementToCapture?jQuery(c.elementToCapture):this.root;this.disabledDraggableSelector=c.disabledDraggableSelector;this.onDragStartUIHandler=typeof c.onDragStartUIHandler==='function'?c.onDragStartUIHandler:this.noop;this.onDragEndUIHandler=typeof c.onDragEndUIHandler==='function'?c.onDragEndUIHandler:this.noop;this.defaultMouseMoveHandler=c.defaultMouseMoveHandler||function(e){e.preventDefault();};};this.forEach=function(s,a){return Array.prototype.forEach.call(s,a);};this.indexOf=function(s,i){return Array.prototype.indexOf.call(s,i);};this.insertBefore=function(s,i,r){var a,b,d;d=Array.prototype.splice;a=this.indexOf(s,i);b=this.indexOf(s,r);d.call(s,b-(a<b?1:0),0,d.call(s,a,1)[0]);};this.logToConsole=function(){window.console.log.apply(console,arguments);};this.getDraggableElement=function(a){var e,i=false,I=false;this.draggable=jQuery(this.draggableSelector,this.container);while(typeof e==='undefined'&&a!==this.root&&!jQuery(a).is(this.draggableSelectorBlocker)){i=i||jQuery(a).is(this.draggableElement)||this.draggableElement===undefined;if(!(jQuery(a).not(this.draggableSelectorExclude).length>0)){I=true;}if(!I&&i&&this.indexOf(this.draggable,a)>=0){e=a;}a=a.parentNode;}return e;};this.captureStart=function(e){var a;if(e.type==='touchstart'&&e.touches.length===1){a=e.touches[0];}else if(e.type==='mousedown'){a=e;if(e.which!=1){return;}}if(a){this.element=this.getDraggableElement(a.target);this.startX=this.moveX=a.pageX;this.startY=this.moveY=a.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.lastTapTime&&this.lastElement&&this.element&&(this.lastElement===this.element)&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2;}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element;}this.log('captureStart('+this.startX+', '+this.startY+')');}};this.startHandler=function(e){this.log('startHandler');if(this.isCombi&&!(e instanceof MouseEvent)){this.isTouchEvent=true;}clearTimeout(this.timer);delete this.timer;this.captureStart(e);if(this.element){this.startCallback(e,this.element);if(this.lockMode===false){if(this.tapsNumber===2){this.mode='double-tap';return;}if(this.isTouch||this.isTouchEvent){this.timer=setTimeout(function(){if(!jQuery(this.element).hasClass(this.disabledDraggableSelector)){this.log('mode switched to drag');this.mode='drag';this.onBeforeCreateClone(e,this.element);this.createClone();this.dragCallback(e,this.element);}else{this.onDragStartUIHandler();}this.isTouchEvent=false;}.bind(this),this.switchModeDelay);}}}}.bind(this);this.captureMove=function(e){var a;if(e.type==='touchmove'&&e.touches.length===1){a=e.touches[0];}else if(e.type==='mousemove'){a=e;}if(a){this.moveX=a.pageX;this.moveY=a.pageY;this.log('captureMove('+this.moveX+', '+this.moveY+')');}};this.moveHandler=function(e){var i;this.log('moveHandler');this.captureMove(e);if(this.element&&e.type==="mousemove"&&e.buttons===0){return this.endHandler(e);}switch(this.mode){case'normal':if((Math.abs(this.startX-this.moveX)>this.moveTolerance||Math.abs(this.startY-this.moveY)>this.moveTolerance)){if(this.isTouch||this.isTouchEvent){this.log('-> normal');clearTimeout(this.timer);delete this.timer;}else if(this.element){this.onDragStartUIHandler();if(!jQuery(this.element).hasClass(this.disabledDraggableSelector)){this.log('mode switched to drag');this.mode='drag';this.onBeforeCreateClone(e,this.element);this.createClone();}else{this.preventClick();this.element=null;}}}break;case'drag':e.preventDefault();this.onDragStartUIHandler();this.log('-> drag');if(this.isVerticalDragOnly){this.mode='vertical-drag';}else{this.mode='drag-and-scroll';}window.addEventListener(this.mouseUpEvent,this.endHandler,true);this.translateClone();this.scrollContainer=document.querySelector(this.scrollContainerSelector);this.dragAndScroll();if(!this.isTouch){this.dragCallback(e,this.element);}break;case'drag-and-scroll':e.stopPropagation();e.preventDefault();this.log('-> drag-and-scroll');i=this.dragAndScroll();this.translateClone();if(!i){this.moveDraggable();}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:i,moveX:this.moveX,moveY:this.moveY});break;case'vertical-drag':e.stopPropagation();e.preventDefault();i=this.dragAndScroll();this.translateClone();if(!i){this.moveDraggableVerticalOnly(this.moveX,this.moveY);}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:i,moveX:this.moveX,moveY:this.moveY});break;default:break;}}.bind(this);this.captureEnd=function(e){var a;if((e.type==='touchend'||e.type==='touchcancel')&&(e.changedTouches.length===1)){a=e.changedTouches[0];}else if(e.type==='mouseup'){a=e;}if(a){this.endX=a.pageX;this.endY=a.pageY;this.log('captureEnd('+this.endX+', '+this.endY+')');}};this.contextMenuHandler=function(e){if(this.isTouch){e.preventDefault();}}.bind(this);this.clickHandler=function(e){if(this.preventClickFlag){this.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(this.preventClickTimeoutId);}this.clickCallback();}.bind(this);this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){this.preventClickFlag=false;}.bind(this),100);};this.endCallbackAdapter=function(e,a,o){var b=this.endCallback.apply(null,arguments);jQuery.when(b).then(function(){this.removeClone(a,o.clone);this.onDragEndUIHandler(e);}.bind(this));this.preventClick();};this.endHandler=function(e){this.log('endHandler');this.captureEnd(e);switch(this.mode){case'normal':this.onDragEndUIHandler(e);this.log('-> normal');break;case'drag':this.log('-> drag');this.endCallbackAdapter(e,this.element,{clone:this.clone});break;case'drag-and-scroll':this.log('-> drag-and-scroll');window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.endCallbackAdapter(e,this.element,{deltaX:this.moveX-this.startX,deltaY:this.moveY-this.startY,clone:this.clone});e.stopPropagation();e.preventDefault();break;case'vertical-drag':this.log('-> vertical-drag');window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.endCallbackAdapter(e,this.element,{clone:this.clone});e.stopPropagation();e.preventDefault();break;case'double-tap':this.log('-> double-tap');this.doubleTapCallback(e,this.element);break;default:break;}clearTimeout(this.timer);delete this.timer;this.lastMoveX=0;this.lastMoveY=0;this.element=null;this.clone=null;this.mode='normal';}.bind(this);this.defaultDragStartHandler=function(e){e.preventDefault();};this.scrollHandler=function(){clearTimeout(this.scrollTimer);this.lockMode=true;this.scrollTimer=setTimeout(function(){this.lockMode=false;}.bind(this),500);}.bind(this);this.createClone=function(){var s,r;this.preventClickFlag=true;if(sap.ui.getCore().byId(this.element.id)&&sap.ui.getCore().byId(this.element.id).getBoundingRects){r=sap.ui.getCore().byId(this.element.id).getBoundingRects()[0];r.top=r.offset.y;r.left=r.offset.x;r.width+=5;}else{r=this.element.getBoundingClientRect();}this.clone=this.element.cloneNode(true);this.clone.removeAttribute("id");this.clone.removeAttribute("data-sap-ui");this.clone.className+=(' '+this.cloneClass);this.element.className+=(' '+this.placeHolderClass);s=this.clone.style;s.position='fixed';s.display='block';s.top=(r.top+this.deltaTop)+'px';s.left=r.left+'px';s.width=r.width+'px';s.zIndex='100';s.webkitTransition='-webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.mozTransition='-moz-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.msTransition='-ms-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.transition='transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.webkitTransform='translate3d(0px, 0px, 0px) ';s.mozTransform='translate3d(0px, 0px, 0px) ';s.msTransform='translate3d(0px, 0px, 0px) ';s.transform='translate3d(0px, 0px, 0px) ';this.root.appendChild(this.clone);this.log('createClone');};this.removeClone=function(e,a){this.preventClick();e.className=e.className.split(' '+this.placeHolderClass).join('');a.parentElement.removeChild(a);this.log('removeClone');};this.translateClone=function(){var d,a;d=this.moveX-this.startX;a=this.moveY-this.startY;this.clone.style.webkitTransform='translate3d('+d+'px, '+a+'px, 0px)';this.clone.style.mozTransform='translate3d('+d+'px, '+a+'px, 0px)';this.clone.style.msTransform='translate('+d+'px, '+a+'px)';this.clone.style.transform='translate3d('+d+'px, '+a+'px, 0px)';this.log('translateClone ('+d+', '+a+')');};this.dragAndScroll=function(){var d,a,s,t=this;function b(){s.webkitTransition='-webkit-transform '+a+'ms linear';s.transition='transform '+a+'ms linear';s.mozTransition='-moz-transform '+a+'ms linear';s.msTransition='-ms-transform '+a+'ms linear';s.webkitTransform='translate3d(0px, '+d+'px 0px)';s.mozTransform='translate3d(0px, '+d+'px 0px)';s.msTransform='translate3d(0px, '+d+'px 0px)';s.transform='translate3d(0px, '+d+'px 0px)';}function e(){s.webkitTransition='';s.mozTransition='';s.msTransition='';s.transition='';s.webkitTransform='';s.mozTransform='';s.msTransform='';s.transform='';t.wrapper.scrollTop-=d;}function g(){var r,h;if(t.clone){r=t.clone.getBoundingClientRect();h=t.wrapperRect.top-r.top;if(h>0){return h;}h=t.wrapper.offsetTop+t.wrapper.offsetHeight-(r.top+t.clone.offsetHeight);if(h<0){return h;}}return 0;}function i(){if(t.endDragAndScrollCallback(t.moveY)){return false;}if(d<0){return t.wrapper.getBoundingClientRect().top-(t.container.getBoundingClientRect().top+t.container.offsetHeight)+t.wrapper.offsetHeight<0;}return t.container.getBoundingClientRect().top-(t.wrapper.getBoundingClientRect().top+t.container.offsetTop)<0;}function f(){b();t.dragAndScrollTimer=setTimeout(function(){e();t.dragAndScrollTimer=undefined;if((d=g())!==0&&i()){f();}t.scrollCallback();},a);}d=g();if(d!==0&&!this.dragAndScrollTimer&&i()){a=this.dragAndScrollDuration;this.scrollContainer=this.scrollContainer||document.querySelector(this.scrollContainerSelector);s=this.scrollContainer.style;f();}this.log('dragAndScroll ('+d+')');return(d!=0)&&i();};this.moveDraggableVerticalOnly=function(){var h,i,r,m=true;this.forEach(this.draggable,function(a,b){if(!h){r=a.getBoundingClientRect();i=!(r.bottom<this.moveY||r.top>this.moveY);if(i){h=a;if(r.top+r.height/2<this.moveY){m=false;}}}}.bind(this));if(h&&this.element!==h){if(m){this.insertBefore(this.draggable,this.element,h);h.parentNode.insertBefore(this.element,h);}else{this.insertBefore(this.draggable,this.element,h.nextSibling);h.parentNode.insertBefore(this.element,h.nextSibling);}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY;}this.log('moveDraggableVerticalonly');};this.moveDraggable=function(m,a){var e,h,b,i,d,r;this.forEach(this.draggable,function(f,g){if(!h){r=f.getBoundingClientRect();i=!(r.right<this.moveX||r.left>this.moveX);d=!(r.bottom<this.moveY||r.top>this.moveY);if(i&&d){h=f;b=g;}}}.bind(this));if(h&&this.element!==h){e=this.indexOf(this.draggable,this.element);if(Math.abs(this.lastMoveX-this.moveX)>=this.moveTolerance||Math.abs(this.lastMoveY-this.moveY)>=this.moveTolerance){if(b<=e){h.parentNode.insertBefore(this.element,h);this.insertBefore(this.draggable,this.element,h);}else if(b>e){h.parentNode.insertBefore(this.element,h.nextSibling);this.insertBefore(this.draggable,this.element,this.draggable[b+1]);}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY;}}this.log('moveDraggable');};this.enable=function(){this.log('enable');this.root.addEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.addEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.root.addEventListener(this.defaultDragStartEvent,this.defaultDragStartHandler,true);this.root.addEventListener(this.defaultMouseMoveEvent,this.defaultMouseMoveHandler,true);this.wrapper.addEventListener(this.scrollEvent,this.scrollHandler,false);if(this.elementsToCapture.length){var t=this;this.elementsToCapture.each(function(){this.addEventListener(t.touchStartEvent,t.startHandler,false);this.addEventListener(t.touchEndEvent,t.endHandler,false);this.addEventListener(t.touchCancelEvent,t.endHandler,false);this.addEventListener(t.mouseDownEvent,t.startHandler,false);this.addEventListener(t.mouseUpEvent,t.endHandler,false);});}else{this.elementsToCapture.addEventListener(this.touchStartEvent,this.startHandler,false);this.elementsToCapture.addEventListener(this.touchEndEvent,this.endHandler,false);this.elementsToCapture.addEventListener(this.touchCancelEvent,this.endHandler,false);this.elementsToCapture.addEventListener(this.mouseDownEvent,this.startHandler,false);this.elementsToCapture.addEventListener(this.mouseUpEvent,this.endHandler,false);}return this;};this.delete=function(){this.log('delete');this.disable();this.dragCallback=null;this.onBeforeCreateClone=null;this.endCallback=null;this.startCallback=null;this.scrollCallback=null;this.doubleTapCallback=null;this.clickCallback=null;this.dragAndScrollCallback=null;delete this;};this.disable=function(){this.log('disable');if(this.elementsToCapture.length){var t=this;this.elementsToCapture.each(function(){this.removeEventListener(t.touchStartEvent,t.startHandler,false);this.removeEventListener(t.touchEndEvent,t.endHandler,false);this.removeEventListener(t.touchCancelEvent,t.endHandler,false);this.removeEventListener(t.mouseDownEvent,t.startHandler,false);this.removeEventListener(t.mouseUpEvent,t.endHandler,false);});}else{this.elementsToCapture.removeEventListener(this.touchStartEvent,this.startHandler,false);this.elementsToCapture.removeEventListener(this.touchEndEvent,this.endHandler,false);this.elementsToCapture.removeEventListener(this.touchCancelEvent,this.endHandler,false);this.elementsToCapture.removeEventListener(this.mouseDownEvent,this.startHandler,false);this.elementsToCapture.removeEventListener(this.mouseUpEvent,this.endHandler,false);}this.root.removeEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.defaultDragStartEvent,this.defaultDragStartHandler,true);this.root.removeEventListener(this.defaultMouseMoveEvent,this.defaultMouseMoveHandler,true);this.wrapper.removeEventListener(this.scrollEvent,this.scrollHandler,false);return this;};this.init(c);this.getMove=function(){return{x:this.moveX,y:this.moveY};};};return U;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppConfiguration',["sap/ushell/services/AppConfiguration","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A,a){"use strict";
function b(){sap.ushell.services.AppConfiguration=this;A.constructor.call(this);this.setApplicationFullWidth=function(v){a.sendMessageToOuterShell("sap.ushell.services.AppConfiguration.setApplicationFullWidth",{"bValue":v});};}
return new b();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/NavTargetResolution',["sap/ushell/services/NavTargetResolution","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(N,A){"use strict";
function a(o,c,p,s){N.call(this,o,c,p,s);this.getDistinctSemanticObjects=function(){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.getDistinctSemanticObjects");};this.expandCompactHash=function(h){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.expandCompactHash",{"sHashFragment":h});};this.resolveHashFragment=function(h){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.resolveHashFragment",{"sHashFragment":h});};this.isNavigationSupported=function(i){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.isNavigationSupported",{"aIntents":i});};}
a.prototype=Object.create(N.prototype);a.hasNoAdapter=N.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/ShellNavigation',["sap/ushell/services/ShellNavigation","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(S,A){"use strict";
function a(c,p,s){S.call(this,c,p,s);this.toExternal=function(o,C,w){A.sendMessageToOuterShell("sap.ushell.services.ShellNavigation.toExternal",{"oArgs":o,"bWriteHistory":w});};this.toAppHash=function(b,w){A.sendMessageToOuterShell("sap.ushell.services.ShellNavigation.toExternal",{"sAppHash":b,"bWriteHistory":w});};}
a.prototype=Object.create(S.prototype);a.hasNoAdapter=S.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/ShellUIService',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","../../../ui5service/_ShellUIService/shelluiservice.class.factory","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(S,a,b,d,A){"use strict";var s=d({serviceRegistry:S,serviceFactory:a,service:b});var l;
var c=s.extend("sap.ushell.appRuntime.services.ShellUIService",{
setTitle:function(t){l=t;return A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setTitle",{"sTitle":t});},
getTitle:function(){return l;},
setHierarchy:function(h){return A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setHierarchy",{"aHierarchyLevels":h});},
setRelatedApps:function(r){return A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setRelatedApps",{"aRelatedApps":r});}
});
return c;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/adapters/EmptyAdapter',[],function(){"use strict";var E=function(){};return E;},true);
sap.ui.predefine('sap/ushell/bootstrap/appfinder/appFinder-dev',["../common/common.configure.ui5","../common/common.override.registermodulepath","../homepage/mockContainer","sap/ushell/renderers/fiori2/FlpMeasure"],function(c,o,M){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!");}
function L(){sap.ui.require(["sap/ui/core/ComponentContainer","sap/ushell/iconfonts"],function(C,I){var a=new C({height:"100%"}).placeAt("canvas",0);var b=sap.ui.component({name:"sap.ushell.components.appfinder",componentData:{config:{optimizeTileLoadingThreshold:200,enableEasyAccess:true,enableEasyAccessSAPMenu:true,enableEasyAccessSAPMenuSearch:true,enableEasyAccessUserMenu:true,enableEasyAccessUserMenuSearch:true,enableCatalogSearch:true,enableCatalogTagFilter:true,enableActionModeMenuButton:true,disableSortedLockedGroups:false,enableTileActionsIcon:false,enableHideGroups:true,enableTilesOpacity:false,homePageGroupDisplay:"scroll",enableHomePageSettings:true,rootIntent:"Shell-home"}}});a.setComponent(b);I.registerFiori2IconFont();});}
function f(C){C();}
c({libs:["sap.m","sap.ushell"],platform:"cdm",bootTask:f,theme:"sap_belize",onInitCallback:L});o();sap.ushell.Container=new M();});
sap.ui.predefine('sap/ushell/bootstrap/cdm/cdm-def-dev',["./cdm.constants","../common/common.configure.ui5","../common/common.configure.ushell","../common/common.override.registermodulepath","../common/common.configure.ui5.extractLibs"],function(c,C,f,o,e){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!");}var u=f({defaultUshellConfig:c.defaultConfig});C({ushellConfig:u,libs:e(u),platform:"cdm"});o();});
sap.ui.predefine('sap/ushell/bootstrap/cdm/cdm-def',["./cdm.constants","../common/common.configure.ui5","../common/common.configure.ushell","../common/common.override.registermodulepath","../common/common.load.core-min","../common/common.configure.ui5.extractLibs"],function(c,C,f,o,l,e){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!");}var u=f({defaultUshellConfig:c.defaultConfig});C({ushellConfig:u,libs:e(u),platform:"cdm"});o();l("sap.ushell.bootstrap");});
sap.ui.predefine('sap/ushell/bootstrap/common/common.boot.script',["./common.constants"],function(c){"use strict";var b=document.getElementById(c.bootScriptId);if(!b){b=document.getElementById(c.bwcBootScriptId);}return b;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5language',[],function(){"use strict";return c;
function c(u){var U=u&&u.services&&u.services.Container&&u.services.Container.adapter&&u.services.Container.adapter.config&&u.services.Container.adapter.config.userProfile;var l=U&&U.defaults&&U.defaults.languageBcp47;var s=U&&U.defaults&&U.defaults.language;if(l){sap.ui.getCore().getConfiguration().setLanguage(l,s);}}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.constants',[],function(){"use strict";return Object.create(null,{uiDebugKey:{value:"sap-ui-debug"},bootScriptId:{value:"sap-ui-bootstrap"},bwcBootScriptId:{value:"sap-ushell-bootstrap"},configMetaPrefix:{value:"sap.ushellConfig"},ushellConfigNamespace:{value:"sap-ushell-config"}});});
sap.ui.predefine('sap/ushell/bootstrap/common/common.debug.mode',["./common.constants"],function(c){"use strict";var s;var d=/[\?&]sap-ui-debug=(true|x|X)(&|$)/.test(window.location.search);if(!d){try{s=window.localStorage.getItem(c.uiDebugKey);d=!!s&&/^(true|x|X)$/.test(s);}catch(e){}}return d;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.script',[],function(){'use strict';return l;
function l(f,i,I,a){return new Promise(function(r,b){function c(e){e.target.removeEventListener("load",c);e.target.removeEventListener("error",c);if(e.type==='error'){b();}r();}var s=document.createElement("script");s.src=f;s.async=a?true:false;s.addEventListener("load",c);s.addEventListener("error",c);if(i){s.id=i;}if(I){s.defer=I;}document.head.appendChild(s);});}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.splashscreen',["./common.util"],function(u){"use strict";return l;
function l(b){var r="apple-touch-startup-image",p=u.ensureTrailingSlash(b);[{href:"320_x_460.png",media:"(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)"},{href:"640_x_920.png",media:"(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)"},{href:"640_x_1096.png",media:"(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)"},{href:"768_x_1004.png",media:"(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)"},{href:"1024_x_748.png",media:"(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)"},{href:"1536_x_2008.png",media:"(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)"},{href:"2048_x_1496.png",media:"(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)"}].forEach(function(s){var L=document.createElement("link");L.rel=r;L.href=p+s.href;L.media=s.media;document.head.appendChild(L);});}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.override.registermodulepath',["jquery.sap.global","sap/ui/thirdparty/URI"],function(q,U){"use strict";return o;
function o(){var R=q.sap.registerModulePath;q.sap.registerModulePath=function(m,u){if(typeof u==="object"){u.url=r(u.url);}else if(typeof u==="string"){u=r(u);}R(m,u);};}
function r(u){var m,s,c,a;if(typeof u!=="string"||u===""||b(u)){return u;}function b(e){var f=new U(e),p=f.path();if(f.is("absolute")){return false;}if(p&&p.charAt(0)==="/"){return false;}return true;}m=u.match(/(.*)(\/~[\w\-]+~[A-Z0-9]?)(.*)/);if(m){s=m[1];c=m[2];a=m[3];}function n(e){return new U(e).normalizePathname().toString();}function d(p){var S=new U(p).segment(),i,P=0;for(i=0;i<S.length&&P>=0;i+=1){if(S[i]===".."){P=P-1;}else{P=P+1;}}return P<0;}if(c){if(a&&d(a)){u=s+a;}}return n(u);}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.preload.module',["sap/ushell/bootstrap/common/common.load.script"],function(l){'use strict';
function p(r){l(r+"/sap/ushell/components/flp/Component-preload.js",null,null,true);}
function P(r){l(r+"/sap/fiori/flp-controls.js",null,null,true).then(function(){sap.ui.predefine("sap/fiori/flp-controls",function(){},false);});}
function f(r){P(r);p(r);}
return{fnPreloadFlpComponent:p,fnPreloadFlpControls:P,fnPreloadHomeBundle:f};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.set.launch.icons',["sap/ui/util/Mobile","./common.boot.path"],function(M,b){"use strict";return l;
function l(){M.setIcons({"phone":b+"/sap/ushell/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png","phone@2":b+"/sap/ushell/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png","tablet":b+"/sap/ushell/themes/base/img/launchicons/72_iPad_Desktop_Launch.png","tablet@2":b+"/sap/ushell/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png","favicon":b+"/sap/ushell/themes/base/img/launchpad_favicon.ico","precomposed":true});}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.util',[],function(){"use strict";return Object.create(null,{deepFreeze:{value:d},getLocationOrigin:{value:g,writable:true},ensureTrailingSlash:{value:e},mergeConfig:{value:m}});
function d(o){Object.keys(o).filter(function(p){return typeof o[p]==="object";}).forEach(function(p){o[p]=d(o[p]);});return Object.freeze(o);}
function g(){return location.protocol+"//"+location.host;}
function e(p){if((typeof p==="string")&&p.charAt(p.length-1)!=='/'){return p+'/';}else{return p;}}
function m(M,c,C){var a;if(!c){return;}a=C?JSON.parse(JSON.stringify(c)):c;Object.keys(a).forEach(function(k){if(typeof M[k]==="object"&&typeof a[k]==="object"){m(M[k],a[k],false);return;}M[k]=a[k];});}
});
sap.ui.predefine('sap/ushell/bootstrap/homepage/homepage-dev',["../common/common.configure.ui5","../common/common.override.registermodulepath","./mockContainer","sap/ushell/renderers/fiori2/FlpMeasure"],function(c,o,M){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!");}
function L(){sap.ui.require(["sap/ui/core/ComponentContainer","sap/ushell/iconfonts"],function(C,I){var a=new C({height:"100%"}).placeAt("canvas",0);var b=sap.ui.component({name:"sap.ushell.components.homepage",componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}});a.setComponent(b);I.registerFiori2IconFont();});}
function f(C){C();}
c({libs:["sap.m","sap.ushell"],platform:"cdm",bootTask:f,theme:"sap_belize",onInitCallback:L});o();sap.ushell.Container=new M();});
sap.ui.predefine('sap/ushell/components/DestroyHelper',[],function(){"use strict";
function d(t){var i;if(t&&t.content){for(i=0;i<t.content.length;i++){if(t.content[i].destroy){t.content[i].destroy();}}}}
function a(t){var i;if(t){for(i=0;i<t.length;i++){d(t[i]);}}}
function b(A){if(A){a(A.tiles);}}
function c(A){var i;if(A){for(i=0;i<A.length;i++){b(A[i]);}}}
return{destroyFLPAggregationModel:b,destroyFLPAggregationModels:c,destroyTileModel:d,destroyTileModels:a};});
sap.ui.predefine('sap/ushell/components/GroupsHelper',[],function(){'use strict';return{getIndexOfGroup:a,getModelPathOfGroup:g};
function g(G,s){var i=a(G,s);if(i<0){return null;}return"/groups/"+i;}
function a(G,s){for(var i=0;i<G.length;i++){if(G[i].groupId===s)return i;}return-1;}
});
sap.ui.predefine('sap/ushell/components/tiles/indicatorTileUtils/cache',[],function(){"use strict";var B={};var K={};var s="HANA_CLIENT";return{getCacheHanaClient:function(){return B[s];},setCacheHanaClient:function(d){B[s]=d;},getEvaluationByChipId:function(k){if(B[k]){return B[k];}return null;},getEvaluationById:function(k){return this.getEvaluationByChipId(k);},setEvaluationById:function(k,d){B[k]=d;},getFrontEndCacheDeferredObject:function(k){if(B[k]){return B[k];}return null;},setFrontEndCacheDefferedObject:function(k,d){B[k]=d;},getKpivalueById:function(k){if(K[k]){return K[k];}return null;},setKpivalueById:function(k,d){K[k]=d;}};},true);
sap.ui.predefine('sap/ushell/plugins/BaseRTAPluginStatus',function(){"use strict";return{STATUS_STARTING:"starting",STATUS_STARTED:"started",STATUS_STOPPING:"stopping",STATUS_STOPPED:"stopped"};},true);
sap.ui.predefine('sap/ushell/plugins/appwarmup/ShellUIService',['sap/ui/core/service/Service'],function(S){"use strict";return S.extend("sap.ushell.plugins.appwarmup.ShellUIService",{setTitle:function(){return;},setHierarchy:function(){return;},setBackNavigation:function(){return;},getTitle:function(){return;},setRelatedApps:function(){return;},getUxdVersion:function(){return 1;}});});
sap.ui.predefine('sap/ushell/plugins/ghostapp/Component',["sap/ui/generic/app/AppComponent"],function(A){"use strict";sap.ui.getCore().loadLibrary("sap.ui.generic.app");return A.extend("sap.ushell.plugins.ghostapp.Component",{metadata:{"manifest":"json"}});});
sap.ui.predefine('sap/ushell/ui/appfinder/PinButton',['sap/m/Button'],function(C){"use strict";
var P=C.extend("sap.ushell.ui.appfinder.PinButton",{
metadata:{properties:{selected:{type:"boolean",group:"Appearance",defaultValue:false}}},
renderer:{}
});
P.prototype.setSelected=function(s){this.setProperty("selected",s,true);this.$("inner").toggleClass("sapUshellPinSelected",s);};
P.prototype.onAfterRendering=function(){var s=this.getSelected();this.$("inner").toggleClass("sapUshellPinSelected",s);};
return P;});
sap.ui.predefine('sap/ushell/ui/launchpad/ViewPortState',function(){"use strict";},false);
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/ApplicationType',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ushell/URLTemplateProcessor","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/wdaResolution","sap/ushell/_ApplicationType/guiResolution","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/Config"],function(U,u,a,A,s,w,g,p,C){"use strict";
function b(n,B,E){var I=n.inbound;var r=I&&I.resolutionResult;if(!(!I||!r||!(r["sap.wda"]))){return w.constructFullWDAResolutionResult(n,B,E);}if(!(!I||!r)){return w.constructWDAResolutionResult(n,B,E);}}
function c(n,B,E){var q=new U(B),I=n.inbound,r=I&&I.resolutionResult,t=jQuery.extend(true,{},n.mappedIntentParamsPlusSimpleDefaults),S,v;if(t["sap-system"]){S=t["sap-system"][0];delete t["sap-system"];}if(t["sap-system-src"]){v=t["sap-system-src"][0];delete t["sap-system-src"];}return new Promise(function(R,x){s.spliceSapSystemIntoURI(q,r.systemAlias,S,v,"WCF",r.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).done(function(y){var P=A.getURLParsing().paramsToString(t),F=A.appendParametersToUrl(P,y.toString());var z={url:F,text:r.text||"",additionalInformation:r.additionalInformation||"",applicationType:"WCF",fullWidth:true};R(z);}).fail(function(y){x(y);});});}
function d(n,B,E){var I=n.inbound,q,S,r,t,R={};["applicationType","additionalInformation","applicationDependencies"].forEach(function(P){if(I.resolutionResult.hasOwnProperty(P)){R[P]=I.resolutionResult[P];}});R.url=B;if(R.applicationDependencies&&typeof R.url==="undefined"){R.url="";}if(typeof R.url==="undefined"){return Promise.reject("Cannot resolve intent: url was not specified in matched inbound");}t=jQuery.extend(true,{},n.mappedIntentParamsPlusSimpleDefaults);R.reservedParameters={};var v={"sap-ui-fl-max-layer":true,"sap-ui-fl-control-variant-id":true};Object.keys(v).forEach(function(N){var V=t[N];if(V){delete t[N];R.reservedParameters[N]=V;}});n.mappedDefaultedParamNames=n.mappedDefaultedParamNames.filter(function(D){return!v[D];});if(n.mappedDefaultedParamNames.length>0){t["sap-ushell-defaultedParameterNames"]=[JSON.stringify(n.mappedDefaultedParamNames)];}S=t["sap-system"]&&t["sap-system"][0];r=t["sap-system-src"]&&t["sap-system-src"][0];R["sap-system"]=S;if(typeof r==="string"){R["sap-system-src"]=r;}n.effectiveParameters=t;q=A.getURLParsing().paramsToString(t);if(q){R.url=R.url+((R.url.indexOf("?")<0)?"?":"&")+q;}if(typeof I.resolutionResult.ui5ComponentName!=="undefined"){R.ui5ComponentName=I.resolutionResult.ui5ComponentName;}R.text=I.title;return Promise.resolve(R);}
function e(){var H=new U().fragment();var n=H.lastIndexOf("&/");if(n>0){return H.substr(n+1);}}
function f(){var n=sap.ushell.Container.getService("UserInfo");var q=n.getUser();var r=sap.ui.getCore().getConfiguration();var t=u.getUi5Version();var v=q.getContentDensity();var T=q.getTheme();if(T.indexOf("sap_")!==0){var x=sap.ushell.User.prototype.constants.themeFormat.THEME_NAME_PLUS_URL;T=q.getTheme(x);}var L;var y;if(r){y=r.getLanguage&&r.getLanguage();L=r.getSAPLogonLanguage&&r.getSAPLogonLanguage();}var z=window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1";return{language:y,logonLanguage:L,theme:T,themeServiceRoot:z,isDebugMode:!!window["sap-ui-debug"],ui5Version:t,contentDensity:v};}
function h(n,B,E){var I=n.inbound;var t=I.templateContext;var r={innerAppRoute:e()||n.parsedIntent.appSpecificRoute,defaultParameterNames:n.mappedDefaultedParamNames,startupParameter:n.mappedIntentParamsPlusSimpleDefaults,env:f()};var q=a.expand(t.payload,t.site,r,t.siteAppSection,"startupParameter");var R={applicationType:"URL",text:I.title,appCapabilities:t.payload.capabilities,url:q};return i(q).then(function(v){R.url=v;return R;},function(){return R;});}
function i(n){return new Promise(function(r,R){var q=new U(n);var P=q.query(true);sap.ushell.Container.getService("ShellNavigation").compactParams(P,["sap-language","sap-theme","sap-ui-app-id","transaction"],undefined,true).done(function(t){if(!t.hasOwnProperty("sap-intent-param")){r(n);return;}q.query(t);var v=q.toString();r(v);}).fail(function(E){R(E);});});}
function j(n,B,E){var I=n.inbound,q=I&&I.resolutionResult,r={};var t=new U(B);var v=jQuery.extend(true,{},n.mappedIntentParamsPlusSimpleDefaults);if(n.inbound&&n.inbound.action==="launchURL"&&n.inbound.semanticObject==="Shell"){delete v["sap-external-url"];}var S=v["sap-system"]&&v["sap-system"][0];var x=v["sap-system-src"]&&v["sap-system-src"][0];r["sap-system"]=S;delete v["sap-system"];if(typeof x==="string"){r["sap-system-src"]=x;delete v["sap-system-src"];}return(new Promise(function(R,y){if(A.absoluteUrlDefinedByUser(t,q.systemAlias,q.systemAliasSemantics)){R(B);}else{s.spliceSapSystemIntoURI(t,q.systemAlias,S,x,"URL",q.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(y).done(function(z){var D=z.toString();R(D);});}})).then(function(y){var P=A.getURLParsing().paramsToString(v);var F=C.last("/core/navigation/flpURLDetectionPattern");var z=new RegExp(F);return z.test(y)?A.appendParametersToIntentURL(v,y):A.appendParametersToUrl(P,y);},Promise.reject.bind(Promise)).then(function(y){["additionalInformation","applicationDependencies"].forEach(function(P){if(I.resolutionResult.hasOwnProperty(P)){r[P]=I.resolutionResult[P];}});r.url=y;r.text=I.title;r.applicationType="URL";return Promise.resolve(r);},Promise.reject.bind(Promise));}
var o={URL:{type:"URL",defaultFullWidthSetting:true,generateResolutionResult:function(n){var q=n.inbound.hasOwnProperty("templateContext");return q?h.apply(null,arguments):j.apply(null,arguments);},easyAccessMenu:{intent:"Shell-startURL",resolver:null,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:false,systemSelectionPriority:1}},WDA:{type:"WDA",defaultFullWidthSetting:true,generateResolutionResult:b,easyAccessMenu:{intent:"Shell-startWDA",resolver:w.resolveEasyAccessMenuIntentWDA,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:2}},TR:{type:"TR",defaultFullWidthSetting:true,generateResolutionResult:g.generateTRResolutionResult,easyAccessMenu:{intent:"Shell-startGUI",resolver:g.resolveEasyAccessMenuIntentWebgui,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:3}},NWBC:{type:"NWBC",defaultFullWidthSetting:true},WCF:{type:"WCF",generateResolutionResult:c,defaultFullWidthSetting:true},SAPUI5:{type:"SAPUI5",generateResolutionResult:d,defaultFullWidthSetting:false}};
function k(){return Object.keys(o).map(function(n){return o[n];}).filter(function(n){return typeof n.easyAccessMenu==="object";});}
function l(){var E={};k().forEach(function(n){E[n.easyAccessMenu.intent]=n.easyAccessMenu.resolver;});return function(n,r){if(E[n]&&(!r||r!=="SAPUI5")){return E[n];}return null;};}
function m(n){if(!o[n]){return false;}return o[n].defaultFullWidthSetting;}
Object.defineProperty(o,"enum",{value:Object.keys(o).reduce(function(n,q){if(o[q].type){n[q]=o[q].type;}return n;},{})});var M={getEasyAccessMenuResolver:l(),getEasyAccessMenuDefinitions:k,getDefaultFullWidthSetting:m};Object.keys(M).forEach(function(n){Object.defineProperty(o,n,{value:M[n]});});return o;});
sap.ui.predefine('sap/ushell/CanvasShapesManager',["sap/ui/Device"],function(D){"use strict";var P=function(x,y){this.x=x||0;this.y=y||0;};
P.prototype.getDistance=function(p){var x=this.x-p.x,y=this.y-p.y;return Math.floor(Math.sqrt(x*x+y*y));};
P.prototype.getSegment=function(o){if(this.x<=o.x&&this.y<=o.y){return 1;}if(this.x<=o.x&&this.y>=o.y){return 2;}if(this.x>=o.x&&this.y>=o.y){return 3;}if(this.x>=o.x&&this.y<=o.y){return 4;}};
P.prototype.offset=function(o,O){this.x=this.x+o;this.y=this.y+O;};
var R=function(x,X,y,Y){this.x={min:x,max:X};this.y={min:y,max:Y};};var c=(window.innerWidth>0)?window.innerWidth:screen.width,a=(window.innerHeight>0)?window.innerHeight:screen.height,b={cpr1:new R(0,c/4,0,a/4),cpr2:new R(c/2,c,0,a/4),cpr3:new R(c/4,3*c/4,a*3/4,a)},m=function(){this.init();};m.prototype={radiusRange:{min:800,max:900},init:function(){this.Id="shell-shapes";var d={cpr1:b.cpr1,cpr2:b.cpr2,cpr3:b.cpr3},r,e,s,f,g;this.shapes=[];for(g in d){r=Math.random(this.radiusRange.max-this.radiusRange.min)+this.radiusRange.min;e=this.getRandomPoint(d[g]);s=this._getSquarePoints(r,e);f=this._calculatebezierCurves(r,s);this.shapes.push({bezierCurves:f,centerPoint:e});}for(var h in this.shapes){var v=this._generateRandomAmorphousShapeValues();this.shapes[h]=this.makeAmorphousShape(this.shapes[h],v.edge0.edgeNum,v.edge0.xOffSet,v.edge0.yOffSet,v.edge0.xStretch);this.shapes[h]=this.makeAmorphousShape(this.shapes[h],v.edge1.edgeNum,v.edge1.xOffSet,v.edge1.yOffSet,v.edge1.xStretch);}D.resize.attachHandler(this.resizeHandler,this);},_generateRandomAmorphousShapeValues:function(){var v={edge0:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0},edge1:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0}};var n=this._getRandomInt(0,3);for(var e in v){v[e].edgeNum=n;v[e].xOffSet=this._getRandomInt(200,400);v[e].yOffSet=this._getRandomInt(-200,-400);n+=this._getRandomInt(0,1)<0.5?-1:1;if(n===-1){n=3;}if(n===4){n=0;}}n=this._getRandomInt(0,1);if(n<0.5){n=n<0.25?0:1;v["edge"+n].xStretch=this._getRandomInt(0,200);}return v;},getPoint:function(x,y){return new P(x,y);},getRandomPoint:function(r){var x=Math.floor(Math.random()*(r.x.max-r.x.min)+r.x.min),y=Math.floor(Math.random()*(r.y.max-r.y.min)+r.y.min);return new P(x,y);},resizeHandler:function(){var d=jQuery("#"+this.Id)[0];if(d){d.width=window.innerWidth;d.height=window.innerHeight;this.drawShapes();}},enableAnimationDrawing:function(e){this._enableDrawing=e;},makeAmorphousShape:function(s,d,x,y){var e,f,g;switch(d){case 0:e=s.bezierCurves[0].controlPoint1;f=s.bezierCurves[3].controlPoint2;g=this._rotatePoints(x,y,e,f);s.bezierCurves[0].controlPoint1=g[0];s.bezierCurves[3].controlPoint2=g[1];break;case 1:e=s.bezierCurves[0].controlPoint2;f=s.bezierCurves[1].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[0].controlPoint2=g[0];s.bezierCurves[1].controlPoint1=g[1];break;case 2:e=s.bezierCurves[1].controlPoint2;f=s.bezierCurves[2].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[1].controlPoint2=g[0];s.bezierCurves[2].controlPoint1=g[1];break;case 3:e=s.bezierCurves[2].controlPoint2;f=s.bezierCurves[3].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[2].controlPoint2=g[0];s.bezierCurves[3].controlPoint1=g[1];break;}return s;},_rotatePoints:function(d,e,f,g){var x,y,h=[];x=f.x+d;y=f.y+e;h.push(new P(x,y));x=g.x-d;y=g.y-e;h.push(new P(x,y));return h;},_getSquarePoints:function(r,d){var s=[];s[0]=new P(d.x+r,d.y);s[1]=new P(d.x,d.y-r);s[2]=new P(d.x-r,d.y);s[3]=new P(d.x,d.y+r);return s;},_getRandomInt:function(d,e){if(d==0&&e==1){return Math.random();}return Math.floor(Math.random()*(e-d+1))+d;},_calculatebezierCurves:function(r,s){var d=[],e,f,g,h;h=s[0];g=s[1];e=new P(h.x,h.y-r/2);f=new P(h.x-r/2,h.y-r);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[1];g=s[2];e=new P(h.x-r/2,h.y);f=new P(h.x-r,h.y+r/2);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[2];g=s[3];e=new P(h.x,h.y+r/2);f=new P(h.x+r/2,h.y+r);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[3];g=s[0];e=new P(h.x+r/2,h.y);f=new P(h.x+r,h.y-r/2);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});return d;},drawShapes:function(){var d=jQuery("#"+this.Id)[0],B=sap.ui.core.theming.Parameters.get("sapUshellShellBackgroundShapesColor");if(d&&d.getContext){var e=d.getContext("2d"),s,f,g,h;e.clearRect(0,0,c*2,a*2);if(B){for(var j=0;j<this.shapes.length;j++){e.beginPath();s=this.shapes[j].bezierCurves[0].startPoint;e.moveTo(s.x,s.y);for(var i=0;i<this.shapes[j].bezierCurves.length;i++){f=this.shapes[j].bezierCurves[i].endPoint;g=this.shapes[j].bezierCurves[i].controlPoint1;h=this.shapes[j].bezierCurves[i].controlPoint2;e.bezierCurveTo(Math.floor(g.x),Math.floor(g.y),Math.floor(h.x),Math.floor(h.y),Math.floor(f.x),Math.floor(f.y));}e.closePath();e.fillStyle=B;e.fill();}}}}};var C=new m();return C;},true);
sap.ui.predefine('sap/ushell/Config',["sap/ushell/EventHub","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/_Config/utils"],function(E,C,c){"use strict";var o=C.createConfigContract(window["sap-ushell-config"]);var f=E.createChannel(o);var a=Object.keys(f).reduce(function(a,m){a[m]=function(){if(!f){f=E.createChannel(o);}return f[m].apply(f,arguments);};return a;},{_reset:function(){f=null;},registerConfiguration:function(O,b){o=b;},createModel:function(p,b){if(!f){f=E.createChannel(o);}return c.createModel(f,o,p,b);}});return a;},false);
sap.ui.predefine('sap/ushell/Fiori20Adapter',["sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/UIComponent","sap/ui/model/resource/ResourceModel","sap/m/Fiori20Adapter","sap/ui/thirdparty/hasher"],function(B,C,U,R,S,h){"use strict";var u;
U._fnOnInstanceDestroy=function(c){if(c._fioriAdapter){c._fioriAdapter.destroy();}};
var A=B.extend("AppInfo",{
constructor:function(c){B.call(this);this._oComponent=c;},
getDefaultTitle:function(){var t,r,m=this._oComponent.getMetadata();var a=m.getManifestEntry("sap.app");if(a&&a.title){t=a.title;if(this._isLocalizationKey(t)){r=(a.i18n||"i18n/i18n.properties");return this._getLocalized(t,r);}return t;}var o=m.getManifestEntry("sap.ui5");if(o&&o.config&&o.config.resourceBundle&&o.config.titleResource){t=o.config.titleResource;r=o.config.resourceBundle;return this._getLocalized(t,r);}return;},
_getLocalized:function(t,r){var m=new R({bundleUrl:jQuery.sap.getModulePath(this._oComponent.getMetadata().getComponentName())+"/"+r});return m.getResourceBundle().getText(t.replace(/^{{/,"").replace(/}}$/,""));},
_isLocalizationKey:function(t){return(t.indexOf("{{")===0)&&(t.indexOf("}}")>0);}
});
var H=B.extend("HeaderInfo",{
constructor:function(c,o,a){B.call(this);this._oConfig=o;this._oAppInfo=a;this._aHierarchy=[];this._defaultTitle=this._oAppInfo.getDefaultTitle();this._oCurrentViewInfo={oTitleInfo:{text:this._defaultTitle}};},
registerView:function(v){if(this._oConfig.bMoveTitle===true){if(!v.oTitleInfo&&v.oSubTitleInfo){v.oTitleInfo=v.oSubTitleInfo;}this._oCurrentViewInfo=v;var t=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:undefined;if(t!==u.getTitle()){u.setTitle(t);}this._updateHierarchy();}this._setBackNavigation(v.oBackButton,v.oAdaptOptions);},
_setBackNavigation:function(b,a){if(a&&a.bHideBackButton===false){return;}var f;if(b){f=b.firePress.bind(b);}u.setBackNavigation(f);},
_updateHierarchy:function(){if(this._oConfig.bHierarchy===false){return;}if(!this._oCurrentViewInfo){return;}var n=true,s="#"+h.getHash();for(var i=this._aHierarchy.length-1;i>=0;i--){var e=this._aHierarchy[i],k=(e.id===this._oCurrentViewInfo.sViewId),K=(e.intent===s);if(k||K){n=false;e=this._updateHierarchyEntry(e);this._aHierarchy[i]=e;this._aHierarchy=this._aHierarchy.slice(0,i+1);if(k){e.intent=s;}break;}}if(n){this._aHierarchy.push(this._createHierarchyEntry());}var N=[];for(var j=this._aHierarchy.length-2;j>=0;j--){N.push(this._aHierarchy[j]);}u.setHierarchy(this._deleteUndefinedProperties(N));},
_createHierarchyEntry:function(){var s="#"+h.getHash(),e={id:this._oCurrentViewInfo.sViewId,title:this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle,subtitle:this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined,intent:s};return e;},
_updateHierarchyEntry:function(e){e.id=this._oCurrentViewInfo.sViewId;e.title=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle;e.subtitle=this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined;return e;},
_deleteUndefinedProperties:function(o){o.forEach(function(O){for(var p in O){if(O.hasOwnProperty(p)&&!O[p]&&p!=="title"){delete O[p];}}});return o;}
});
var F=B.extend("sap.ushell.Fiori20Adapter",{
constructor:function(c,o){B.call(this);this._oComponent=c;this._oConfig=o;this._oHeaderInfo=new H(c,o,new A(c));if(S){S.attachViewChange(this._onViewChange,this);}},
init:function(){if(!S){return;}jQuery.sap.measure.start("Fiori20Adapter");var c=jQuery.extend({},this._oConfig);S.traverse(this._oComponent.getAggregation("rootControl"),c);jQuery.sap.measure.end("Fiori20Adapter");},
destroy:function(){if(S){S.detachViewChange(this._onViewChange,this);}},
_onViewChange:function(e){this._oHeaderInfo.registerView(e.getParameters());}
});
F.applyTo=function(c,o,a,s){var O=c instanceof U?c:C.getOwnerComponentFor(c);if(!O){O=o;}if(O&&!O._fioriAdapter){u=s;O._fioriAdapter=new F(O,a);O._fioriAdapter.init();}};
return F;});
sap.ui.predefine('sap/ushell/Fiori20AdapterTest',["sap/base/util/UriParameters","sap/ui/core/UIComponent","sap/ushell/Fiori20Adapter","sap/ui/core/library","sap/ui/core/service/ServiceFactoryRegistry"],function(U,a,F,c,S){"use strict";var b={I_DEFAULT_SEARCH_DEPTH:5,B_DEFAULT_LATE_ADAPTATION:false,S_FIORI20ADAPTER_URL_PARAM_NAME:"sap-ui-xx-fiori2Adaptation",S_FIORI20ADAPTER_METADATA_PARAM_NAME:"sapFiori2Adaptation",A_WHITELIST:["fin.*","ssuite.fin.*","fscm.*","sap.fin.*","cus.sd.*","cus.o2c.*","sap.apf.*","tl.ibp.*","ux.fnd.apf.o2c.*","fnd.apf.*","fnd.pob.o2c.*","fcg.sll.*","ux.fnd.generic-apf-application.*","hpa.cei.*","query.viewbrowser.s1.*","ssuite.vdm.viewbrowser.s1.*","ssuite.smartbusiness.kpi.s1.*","ssuite.smartbusiness.evaluation.s1.*","ssuite.smartbusiness.association.s1.*","ssuite.smartbusiness.drilldown.s1.*","ssuite.smartbusiness.tile.s1.*","ssuite.smartbusiness.tile.ce.s1.*","ssuite.smartbusiness.workspace.s1.*","ssuite.smartbusiness.runtime.s1.*","gs.fin.customersummarycn.display.*","gs.fin.financialstatement.structure.manage.*","gs.fin.financialstatement.display.*","uipsm.*","publicservices.her.*"],getConfiguration:function(C){var o=this._getURLParamConfiguration();if(!o){o=this._getMetadataConfiguration(C);}if(!o){o=this._getDefaultConfiguration(C);}o.iSearchDepth=o.iSearchDepth||b.I_DEFAULT_SEARCH_DEPTH;if((typeof o.iSearchDepth==="string")&&!isNaN(o.iSearchDepth)){o.iSearchDepth=parseInt(o.iSearchDepth,10);}return o;},_getURLParamConfiguration:function(){if(typeof sap.ui.getCore().getConfiguration().getFiori2Adaptation!=="function"){return;}if(!this._isURLParameterSpecified(b.S_FIORI20ADAPTER_URL_PARAM_NAME)){return;}var u=sap.ui.getCore().getConfiguration().getFiori2Adaptation(),d,s;if(typeof(u)==="boolean"){d=u;}else if(u&&(u.length>=1)){s=u;}if(!s&&(d===undefined)){return;}return{bStylePage:s?s.indexOf("style")>-1:d,bMoveTitle:s?s.indexOf("title")>-1:d,bHideBackButton:s?s.indexOf("back")>-1:d,bCollapseHeader:s?s.indexOf("collapse")>-1:d,bHierarchy:s?s.indexOf("hierarchy")>-1:d};},_getMetadataConfiguration:function(C){var A=C.getMetadata("config").getConfig(b.S_FIORI20ADAPTER_METADATA_PARAM_NAME),d,e;if(typeof(A)==="boolean"){d=A;}else if((typeof A==="object")&&!jQuery.isEmptyObject(A)){e=A;}if(!e&&(d===undefined)){return;}return{bStylePage:e?this._isSgnTrue(e.style):d,bMoveTitle:e?this._isSgnTrue(e.title):d,bHideBackButton:e?this._isSgnTrue(e.back):d,bCollapseHeader:e?this._isSgnTrue(e.collapse):d,bHierarchy:e?this._isSgnTrue(e.hierarchy):d,bLateAdaptation:e?this._isSgnTrue(e.lateAdaptation):b.B_DEFAULT_LATE_ADAPTATION};},_getDefaultConfiguration:function(C){var e=this._hasMinVersionSmallerThan(C,"1.42")&&this._isWhitelisted(C);return{bStylePage:e,bMoveTitle:e,bHideBackButton:e,bCollapseHeader:e,bHierarchy:e};},_isURLParameterSpecified:function(p){var u=new U(window.location.href),A=u.mParams&&u.mParams[p];return A&&(A.length>0);},_isWhitelisted:function(C){var s=C.getMetadata().getName();for(var i=0;i<b.A_WHITELIST.length;i++){var n=b.A_WHITELIST[i].substring(0,b.A_WHITELIST[i].length-2);if(this._isPrefixedString(s,n)){return true;}}return false;},_isAdaptationRequired:function(A){for(var o in A){if(A[o]===true){return true;}}return false;},_isPrefixedString:function(s,p){return s&&p&&(s.substring(0,p.length)===p);},_hasMinVersionSmallerThan:function(C,v){var i=C.getMetadata().getManifestEntry("sap.ui5"),m=true;if(i&&i.dependencies&&i.dependencies.minUI5Version){var M=new jQuery.sap.Version(i.dependencies.minUI5Version);m=M.compareTo(new jQuery.sap.Version(v))<0;}return m;},_isSgnTrue:function(v){return(v===true)||(v==="true");}};
a._fnOnInstanceInitialized=function(C){var o=C.getAggregation("rootControl");if(!o||o.getId()==="navContainerFlp"||C.getId().indexOf("application-")!==0){return;}var d=b.getConfiguration(C);if(!b._isAdaptationRequired(d)){return;}if(!c.service||!S||typeof S.get!=="function"){jQuery.sap.log.warning("Fiori20Adapter not loaded because static FactoryRegistry is not available","sap.ui.core.service.ServiceFactoryRegistry should be a function","sap.ushell.Fiori20AdapterTest");return;}var D={onBeforeRendering:function(){o.removeEventDelegate(D);var s=S.get("sap.ushell.ui5service.ShellUIService"),e=s&&s.createInstance();if(!s||!e){jQuery.sap.log.warning("Fiori20Adapter not loaded because ShellUIService is not available","sap.ushell.ui5service.ShellUIService should be declared by configuration","sap.ushell.Fiori20AdapterTest");return;}e.then(function(s){if(s&&(s.getUxdVersion()===2)){F.applyTo(o,C,d,s);}},function(E){jQuery.sap.log.warning("Fiori20Adapter not loaded as ShellUIService is not available",E,"sap.ushell.Fiori20AdapterTest");});}};o.addEventDelegate(D);};
});
sap.ui.predefine('sap/ushell/Layout',["sap/ushell/Config","sap/ui/Device","sap/ui/thirdparty/jquery"],function(C,D,q){"use strict";var a=function(s){this.init(s);};a.prototype={settings:null,tileWidth:0,tileHeight:0,tileMargin:0,curTouchMatrixCords:null,tilesInRow:null,groupsList:null,item:null,matrix:null,tiles:null,collisionLeft:false,startGroup:null,currentGroup:null,endGroup:null,init:function(s){this.curTouchMatrixCords={column:null,row:null};this.endGroup=null;this.groupSwitched=false;this.item=null;this.matrix=null;this.tiles=null;this.collisionLeft=false;this.startArea=null;this.currentArea=null;this.endArea=undefined;this.startGroup=null;this.draggedTileDomRef=null;this.sDragStartGroupModelId=undefined;this.sDragTargetGroupModelId=undefined;this.currentGroup=null;this.groupsList=null;this.allGroups=null;this.settings=this.settings||s;q.extend(this,this.settings);this.tileWidth=this.thisLayout.styleInfo.tileWidth;this.tileHeight=this.thisLayout.styleInfo.tileHeight;this.tileMargin=this.thisLayout.styleInfo.tileMarginWidth;this.aExcludedControlClass=this.aExcludedControlClass||[];this.reorderElementsCallback=this.reorderElementsCallback||function(){};this.rightToLeft=sap.ui.getCore().getConfiguration().getRTL();this.tabBarArrowCollisionRight=false;this.tabBarArrowCollisionLeft=false;this.collidedLinkAreas=[];this.intersectedLink=null;this.aLinksBoundingRects=[];this.intersectedLinkPlaceHolder=undefined;this.isLinkPersonalizationSupported=sap.ushell.Container?sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported():null;this.isLinkMarkerShown=false;this.bIsTabBarCollision=false;},isTabBarCollision:function(){return this.bIsTabBarCollision;},moveDraggable:function(m,c,t){var o=this.getCollisionObject(m,c,t),n;if(o){this._toggleAnchorItemHighlighting(false);if(o.collidedObjectType!=="TabBar"){this._toggleTabBarOverflowArrows(false);this.thisLayout.setOnTabBarElement(false);this._resetOverFlowButtonElements();this.bIsTabBarCollision=false;}else{this.bIsTabBarCollision=true;this._toggleTabBarOverflowArrows(true);this.removePlaceHolders();this._handleTabBarCollision(m,t);}if(this.isLinkPersonalizationSupported&&o.collidedObjectType==="Group-link"){n=this._handleLinkAreaIntersection(o.collidedObject,m,c);}else if(o.collidedObjectType==="Group-tile"){n=this._handleTileAreaIntersection(o.collidedObject,m,c);this._toggleTileCloneHoverOpacity(false);}if(n||this.endAreaChanged){this.handlePlaceHolder(o.collidedObject);}}else{this._removeEmptyLinkAreaMark();}},_toggleAnchorItemHighlighting:function(h){if(this.targetGroup){this.targetGroup.classList.toggle("sapUshellAnchorItemDropCollision",h);this.targetGroup.firstElementChild.classList.toggle("sapUshellAnchorInnerMarker",h);}},removePlaceHolders:function(){this._removeLinkDropMarker();this._removeEmptyLinkAreaMark();this._handleChangedGroup();},handlePlaceHolder:function(c){if(this.endArea==="tiles"){if(this.endAreaChanged){this._removeLinkDropMarker();}this.handlePlaceholderChange();}else if(this.endArea==="links"&&this.intersectedLink){this._changeLinkPlaceholder(this.intersectedLink,c);if(this.endAreaChanged){this.handlePlaceholderChange();}}},switchLinkWithClone:function(i){if(i){this.intersectedLinkPlaceHolder=i.getDomRef().cloneNode(true);this.intersectedLinkPlaceHolder.id="sapUshellIntersectedLinkPlaceHolder";q(i.getDomRef()).replaceWith(this.intersectedLinkPlaceHolder);}},_removeLinkDropMarker:function(){q("#sapUshellLinkDropMarker").remove();this.isLinkMarkerShown=false;},saveLinkBoundingRects:function(e){var l=sap.ui.getCore().byId(e.id);this.draggedLinkBoundingRects=l.getBoundingRects();},_getMarkerOffset:function(r,c){var n=q(c.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().left,d=q(c.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().top,e=this.rightToLeft?20:-1,f=this.rightToLeft?42:21,g=r[r.length-1].offset.x-n+r[r.length-1].width-e,l=r[this.rightToLeft?r.length-1:0].offset.x-n-f,t=r[this.rightToLeft?r.length-1:0].offset.y-d,h=r[this.rightToLeft?0:r.length-1].offset.y-d;if(q("body.sapUiSizeCompact").length){t-=6;h-=6;}if(this.rightToLeft){if(q(c.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().right-r[r.length-1].offset.x-r[r.length-1].width<16){g=g-8;}}else if(l<16){l=0;}return{right:g,left:l,topLeft:t,topRight:h};},_changeLinkPlaceholder:function(l,c){var o=this.aLinksBoundingRects[l.link.getId()],d=o.left,t=o.topLeft,e=o.topRight,r=o.right;if(q(c.getDomRef()).find("#sapUshellLinkDropMarker").length===0){this._removeLinkDropMarker();q(c.getDomRef()).find(".sapUshellLinksInnerContainer").prepend(this.LinkDropMarker);}q(this.LinkDropMarker).css({left:l.leftSide?d:r,top:l.leftSide?t:e});this.isLinkMarkerShown=true;},showTilePlaceholder:function(c,t,T){var d,r=this.curTouchMatrixCords.row,e=this.curTouchMatrixCords.column;this.domRef=this.item.getDomRef()?this.item.getDomRef():this.domRef;q(this.domRef).show();this.removeExcludedElementsFromMatrix(this.aExcludedControlClass);d=this.tiles||this.thisLayout.getGroupTiles(this.endGroup).slice(0);if(this.matrix[r]&&typeof this.matrix[r][e]==="object"){this.handleMatrixCollision(d,c,t,T);return;}this._handleMoveOutOfBorders(d,c);},removeTilePlaceholder:function(g,A){var c,h;this.domRef=this.item.getDomRef()?this.item.getDomRef():this.domRef;c=this.thisLayout.getGroupTiles(this.currentGroup);c=c.slice(0);if(this.startArea!=="links"&&c.indexOf(this.item)>-1){c.splice(c.indexOf(this.item),1);}if(!q(this.domRef.parentNode).hasClass("sapUshellLinksInnerContainer")){q(this.domRef).hide();}if(A){h=q(this.currentGroup.getDomRef()).find(".sapUshellTilesContainer-sortable").height()-q(this.domRef).height();this.collidedLinkAreas=[];q(this.currentGroup.getDomRef()).find(".sapUshellTilesContainer-sortable").animate({height:h},300);}},handlePlaceholderChange:function(){var c=this.currentGroup,t=(this.endGroup!==this.currentGroup),T=this.endAreaChanged&&this.endArea==="links",i=this.thisLayout.isTabBarActive()&&this.groupSwitched,A=false,m=this.matrix[this.matrix.length-1];if(this.item&&m[0]){if(!m[1]){A=true;}if(m[0].getLong&&m[0].getLong()&&m[1]&&!m[2]){A=true;}}this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);this.matrix=this.thisLayout.organizeGroup(this.tiles);if(i){this.handleTabBarSwitch(c);}if(t){this._handleChangedGroup();}else if(T){this.removeTilePlaceholder(undefined,A);}if(!T){this.showTilePlaceholder(c,t,T);}},handleMatrixCollision:function(t,c,T,d){var r,e,f,n;r=this.matrix[this.curTouchMatrixCords.row][this.curTouchMatrixCords.column];e=t.indexOf(r);f=t.indexOf(this.item);if(this.rightToLeft){this.collisionLeft=!this.collisionLeft;}if(f>-1&&f<e){r=t[e+1];}if(r===this.item){if(T||d){t.splice(t.indexOf(this.item),1);}this._handleTileReplace(t,c);return;}n=this.changeTilesOrder(this.item,r,t,this.matrix);if(n&&!this.isLinkMarkerShown){this._handleTileReplace(n,c);}},handleTabBarSwitch:function(c){this._appendTargetGroupDomRefWithDraggedTile();if(!this.item.getDomRef()){this.endGroup.getInnerContainersDomRefs()[0].appendChild(this.draggedTileDomRef);}else{this.endGroup.getInnerContainersDomRefs()[0].appendChild(this.item.getDomRef());}this.currentGroup=this.endGroup;},_handleMoveOutOfBorders:function(t,c){var m=this.findTileToPlaceAfter(this.matrix,t),r;if(t[m+1]==this.item){return;}if(t[m+1]){r=t[m+1];}else if(this.currentGroup.getShowPlaceholder()){r=t[0];}var n=this.changeTilesOrder(this.item,r,t,this.matrix);if(n){this._handleTileReplace(n,c);}},_handleChangedGroup:function(){var c=this.thisLayout.getGroupTiles(this.currentGroup),i;if(this.currentGroup===this.startGroup&&(this.startArea==="tiles"||this.intersectedLinkPlaceHolder)){c=c.slice(0);if(c.indexOf(this.item)>-1){c.splice(c.indexOf(this.item),1);}}if(this.startGroup===this.endGroup&&this.startArea==="tiles"){this.tiles.splice(this.tiles.indexOf(this.item),1);}i=this.item.getDomRef()||this.domRef;if(this.startArea==="links"&&!this.intersectedLinkPlaceHolder){this.switchLinkWithClone(this.item);}if(this.endArea==="tiles"){this.endGroup.getInnerContainersDomRefs()[0].appendChild(i);}if(!q(i.parentNode).hasClass("sapUshellLinksInnerContainer")){q(i).hide();}this.currentGroup=this.endGroup;},_handleTileReplace:function(t,c){this.reorderElementsCallback({currentGroup:c,endGroup:this.endGroup,tiles:t,item:this.item});this.reorderTilesView(t,this.endGroup);this.reorderTilesInDom();},_getIntersectedLink:function(c,m,d){var e=q(".sapUshellLinkTile")[0];if(!e){return;}var f=c.getDomRef().querySelector(".sapUshellLineModeContainer").getBoundingClientRect(),g=!q("body.sapUiSizeCompact").length,r=Math.floor((d-f.top)/(g?45:31)),h=this.collidedLinkAreas[c.getId()],i;if(this.rightToLeft){i=Math.floor((f.right-m)/20);}else{i=Math.floor((m-f.left)/20);}if(r<h.length&&h[r]&&i<h[r].length){return h[r][i];}else if(h.length){var l=h.length;if(r>=l){r=l-1;}if(!this.collidedLinkAreas[c.getId()][r]){return;}i=this.collidedLinkAreas[c.getId()][r].length;return this.collidedLinkAreas[c.getId()][r][i-1];}},_mapGroupLinks:function(c){var g=c.getId(),l,r,R=0;if(!this.collidedLinkAreas[g]||this.bElapseGroupLinksMap){this.bElapseGroupLinksMap=false;var d=c.getLinks(),e=[];this.collidedLinkAreas.push(c.getId());d.forEach(function(i){r=this._getLinkBoundingRects(i,c);r.forEach(function(o){if(o.offset.y>l){R++;}l=o.offset.y;this._addLinkToHashMap(e,c,o,R,i);}.bind(this));}.bind(this));this.collidedLinkAreas[g]=e;}},_getLinkBoundingRects:function(l,c){var r=l.getBoundingRects();if(this.item&&this.item.getId()===l.getId()){r=this.draggedLinkBoundingRects;}if(r.length){this.aLinksBoundingRects[l.getId()]=this._getMarkerOffset(r,c);}return r;},_addLinkToHashMap:function(c,d,r,e,l){if(!c[e]){c[e]=[];}for(var i=0;i<=(r.width+20)/20;i++){var f={link:l,leftSide:!this.rightToLeft};if(i>((r.width+20)/20)/2){f.leftSide=this.rightToLeft;}c[e].push(f);}},_isLinkAreaIntersection:function(c,m,d){var i=c.getInnerContainersDomRefs();if(i[1]){return this._isElementCollideByGivenCordinates(i[1],m,d);}return false;},_isLinksEquals:function(l,o){if(!l||!o){return false;}if(l.link.getId()!==o.link.getId()){return false;}if(l.link.leftSide!==o.link.leftSide){return false;}return true;},_toggleTileCloneHoverOpacity:function(v){q(".sapUshellTile-clone").toggleClass("sapUshellTileDragOpacity",v);},_handleLinkAreaIntersection:function(c,m,d){var i,e=false;if(this.isLinkPersonalizationSupported){this._toggleTileCloneHoverOpacity(true);}this._mapGroupLinks(c);this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(c));i=this._getIntersectedLink(c,m,d);if(i){e=this._isLinksEquals(this.intersectedLink,i);this.intersectedLink=i;}else{this.removeTilePlaceholder(c);}this._markEmptyLinkArea(c);return e;},_markEmptyLinkArea:function(c){if(!c.getLinks().length){q(c.getDomRef()).find(".sapUshellLineModeContainer").addClass("sapUshellEmptyLinkAreaHover");}},_removeEmptyLinkAreaMark:function(){q(".sapUshellLineModeContainer").removeClass("sapUshellEmptyLinkAreaHover");},reorderTilesInDom:function(){var j=this.item.getDomRef()?this.item.getDomRef():this.domRef,s=q(j).index(),c=q(j).closest(".sapUshellTilesContainer-sortable"),d=this.calcDestIndexInGroup(),e=q(this.endGroup.getDomRef()).find(".sapUshellTilesContainer-sortable"),f=e.find(".sapUshellTile");if(this.startArea==="tiles"){c.find(f[s]).remove();}else if(!this.intersectedLinkPlaceHolder){this.switchLinkWithClone(this.item);}if(this.endArea!=="links"){f=e.find(".sapUshellTile");if(C.last("/core/home/gridContainer")){if(e[0].firstElementChild.children.length){e[0].firstElementChild.insertBefore(j,f[d]);}else{e[0].firstElementChild.appendChild(j);}}else{e[0].insertBefore(j,f[d]);}}},isLinkIntersected:function(){return this.intersectedLink!==undefined;},calcDestIndexInGroup:function(){var l,t=0,i,j,I=false;for(i=0;i<this.matrix.length&&!I;i++){for(j=0;j<this.matrix[i].length;j++){if(this.matrix[i][j]!==undefined){if(this.item.sId!==this.matrix[i][j].sId){if(l!==this.matrix[i][j].sId){l=this.matrix[i][j].sId;t++;}}else{I=true;break;}}}}return t;},layoutStartCallback:function(e){this.init();this.item=sap.ui.getCore().byId(e.id);this.tilesInRow=this.thisLayout.getTilesInRow();this.groupsList=this.thisLayout.getGroups();this.allGroups=this.thisLayout.getAllGroups();this.startGroup=this.currentGroup=this.item.getParent();if(C.last("/core/home/gridContainer")&&this.startGroup.getParent().getId()!=="dashboardGroups"){this.startGroup=this.currentGroup=this.startGroup.getParent();}this.groupSwitched=false;this.startArea=this.isLinkPersonalizationSupported&&this.item.getMode&&this.item.getMode()==="LineMode"?"links":"tiles";this.currentArea=this.startArea;if(this.isLinkPersonalizationSupported){this.LinkDropMarker=this._getLinkDropMarkerElement();}},_getLinkDropMarkerElement:function(){var e=document.createElement("DIV"),c=document.createElement("DIV"),d=document.createElement("DIV");e.setAttribute("id","sapUshellLinkDropMarker");c.setAttribute("id","sapUshellLinkDropMarkerDot");d.setAttribute("id","sapUshellLinkDropMarkerLine");e.appendChild(c);e.appendChild(d);return e;},isAreaChanged:function(){return(this.currentArea&&this.endArea)?this.currentArea!==this.endArea:false;},isOriginalAreaChanged:function(){return(this.startArea&&this.endArea)?this.startArea!==this.endArea:false;},_getDestinationIndex:function(t){if(t==="links"){if(this.intersectedLink){var i=this.endGroup.getLinks().indexOf(this.intersectedLink.link),d=this.endGroup.getLinks().indexOf(this.item);if(this.intersectedLink.leftSide){i=this.rightToLeft?i+1:i-1;}if(d<0||d>i){i=this.rightToLeft?i:i+1;}return i;}return this.endGroup.getLinks().length;}return this._getDestinationTileIndex();},layoutEndCallback:function(){var r,s,d;this._removeLinkDropMarker();if(this.endArea!=="links"&&!this.tiles){return{tile:this.item};}s=this._getDragSourceGroup();if(!b.isTabBarActive()||!this.bIsTabBarCollision){this.targetGroup="";}d=this._getDestGroupObject(this.targetGroup);r={srcGroup:s,dstGroup:d,dstGroupData:this._getDropTargetGroup(),tile:this.item,dstTileIndex:this._getDestinationIndex(this.endArea),tileMovedFlag:true,srcArea:this.startArea,dstArea:this.bIsTabBarCollision?undefined:this.endArea};return r;},_getDestGroupObject:function($){return $?sap.ui.getCore().byId(($.getAttribute("id"))):this.endGroup;},_getDragSourceGroup:function(){var s;s=this.startGroup;if(this.thisLayout.isTabBarActive()&&(this.groupSwitched===true)){s={groupId:this.sDragStartGroupModelId};}return s;},_getDropTargetGroup:function(){var d;if(this.thisLayout.isTabBarActive()&&this.thisLayout.isOnTabBarElement()){d={groupId:this.sDragTargetGroupModelId};}else{d=this.endGroup;}return d;},_getDestinationTileIndex:function(){var d,m;if(this.thisLayout.isTabBarActive()&&this.thisLayout.isOnTabBarElement()){d=this._getDropTargetGroup().groupId;m=this._getModelGroupById(d);return m.tiles.length;}return this.tiles.indexOf(this.item);},compareArrays:function(c,d){if(c.length!==d.length){return false;}for(var i=0;i<c.length;i++){if(c[i]!==d[i]){return false;}}return true;},reorderTilesView:function(t){this.tiles=t;this.matrix=this.thisLayout.organizeGroup(t);},changeTilesOrder:function(i,r,t,m){var n=t.slice(0),d=n.indexOf(i),c,e,f;if(d>-1){n.splice(d,1);}if(r){n.splice(n.indexOf(r),0,this.item);}else{n.push(i);}if(this.currentGroup==this.endGroup){if(this.compareArrays(t,n)){return false;}c=this.thisLayout.organizeGroup(n);e=this.thisLayout.getTilePositionInMatrix(i,m);f=this.thisLayout.getTilePositionInMatrix(i,c);if((e.row==f.row)&&(e.col==f.col)){return false;}}this.tiles=n;this.currentGroup=this.endGroup;return n;},setMatrix:function(n){this.matrix=n;},findTileToPlaceAfter:function(c,t){var x=(this.thisLayout.rightToLeft)?0:this.curTouchMatrixCords.column,I=(this.thisLayout.rightToLeft)?1:-1,m=0,i,j,d,r=c[0].length;for(i=this.curTouchMatrixCords.row;i>=0;i--){for(j=x;j>=0&&j<r;j+=I){if(!c[i]||typeof c[i][j]!=="object"){continue;}d=t.indexOf(c[i][j]);m=d>m?d:m;}x=c[0].length-1;}return m||(t.length-1);},_isElementCollideByGivenCordinates:function(e,m,c){var t=e.getBoundingClientRect(),i=false,d=false;if(t.height===0&&!e.classList.contains("sapUshellNoLinksAreaPresent")){t=e.parentNode.getBoundingClientRect();}i=t.right>m&&t.left<m;d=t.bottom>c&&t.top<c;return i&&d;},_getMatrixCordinatesOfTouchedTile:function(c,m,d){var e=q.extend({},this.curTouchMatrixCords),t=c.getInnerContainersDomRefs()[0].getBoundingClientRect();this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(c));var o=this.rightToLeft?(t.right+(-1)*m):(t.left*(-1)+m),f=(t.top*(-1)+d)/(this.tileHeight+this.tileMargin),g=o/(this.tileWidth+this.tileMargin);e={row:Math.floor(f),column:Math.floor(g)};return e;},_getCollidedGroup:function(m,c){for(var i=0;i<this.groupsList.length;i++){var g=this.groupsList[i],d=g.getInnerContainersDomRefs();if(!d){continue;}for(var j=0;j<d.length;j++){if(d[j]&&this._isElementCollideByGivenCordinates(d[j],m,c)){var e=!g.groupHasTiles();for(var f=this.groupsList.length-1;f>=i;f--){if(e){break;}if(!this.groupsList[f].groupHasTiles()){var Q=this.groupsList[f].$();Q.removeClass("sapUshellEnableTransition");Q.find(".sapUshellInner").removeAttr("style");}}return g;}}}},_handleTileAreaIntersection:function(c,m,d){var e=this._getMatrixCordinatesOfTouchedTile(c,m,d);if((c===this.endGroup)&&(e.column===this.curTouchMatrixCords.column)&&(e.row===this.curTouchMatrixCords.row)){return false;}if(this.rightToLeft){this.collisionLeft=(this.curTouchMatrixCords.column-e.column)>0;}else{this.collisionLeft=(e.column-this.curTouchMatrixCords.column)>0;}if(e.column===this.curTouchMatrixCords.column){this.collisionLeft=false;}q.extend(this.curTouchMatrixCords,e);return true;},_getGroupCollisionObject:function(m,c){var d,l;d=this._getCollidedGroup(m,c);if(!d||d.getIsGroupLocked()){return undefined;}l=this._isLinkAreaIntersection(d,m,c);this.endGroup=d;if(!this.tiles){this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);}this.endArea=l?"links":"tiles";this.endAreaChanged=this.isAreaChanged();this.currentArea=this.endArea;return{"collidedObjectType":l?"Group-link":"Group-tile","collidedObject":d};},getCollisionObject:function(m,c){if(this.thisLayout.oTabBarItemClickTimer){clearTimeout(this.thisLayout.oTabBarItemClickTimer);}if(this.thisLayout.isTabBarActive()&&this._isTabBarCollision(c)){return{"collidedObjectType":"TabBar"};}return this._getGroupCollisionObject(m,c);},_isTabBarScrollArea:function(m){var A=q("#anchorNavigationBar").height(),o=q("#anchorNavigationBar").offset(),i=o.top;return((m>A+i)&&(m<A+i+30));},_cancelLongDropTimmer:function(){clearTimeout(this.thisLayout.oTabBarItemClickTimer);},_isTabBarCollision:function(m){var A=q("#anchorNavigationBar").height(),o=q("#anchorNavigationBar").offset(),i=o.top;return(m<A+i&&m>i);},_handleTabBarCollision:function(m,t){var c=this,h=this._getTabBarHoverItem(m,t),T,H,i,d,o;if(b.isTabBarActive()){this._toggleTileCloneHoverOpacity(true);}this.lastHighlitedTabItem=h;this.thisLayout.setOnTabBarElement(true);i=this._handleOverflowCollision(m);if(i){return;}if(!h){return;}this.targetGroup=h;this.sDragTargetGroupModelId=h.getAttribute("modelGroupId");T=this._getTabBarGroupIndexByModelId(this.sDragTargetGroupModelId);if(this.thisLayout.oTabBarItemClickTimer){clearTimeout(this.thisLayout.oTabBarItemClickTimer);}o=this._getModelGroupById(this._getDropTargetGroup().groupId);if(o.isGroupLocked){this._toggleTabBarOverflowArrows(false);this.thisLayout.setOnTabBarElement(false);this._resetOverFlowButtonElements();return;}this._toggleAnchorItemHighlighting(true);if(!this.sDragStartGroupModelId){this.sDragStartGroupModelId=this.startGroup.getGroupId();}this.thisLayout.oTabBarItemClickTimer=setTimeout(function(){var e=c._getSelectedTabBarItem();if(c.lastHighlitedTabItem===e){return;}c.draggedTileModelPath=c.item.getBindingContext().getPath();c._prepareDomForDragAndDrop();c.startGroup.removeAggregation("tiles",c.item,true);d=c.sDragStartGroupModelId===c.sDragTargetGroupModelId;c.item.getBindingContext().oModel.setProperty(c.draggedTileModelPath+"/draggedInTabBarToSourceGroup",d);c.groupSwitched=true;sap.ui.getCore().getEventBus().publish("launchpad","switchTabBarItem",{iGroupIndex:T});var f=c.thisLayout.getGroups();c.endGroup=f[0];c.bElapseGroupLinksMap=true;},800);if((this.tiles===null)&&(this.endGroup)){this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);}H=q(".sapUshellTabBarHoverOn");H.removeClass("sapUshellTabBarHoverOn");h.classList.add("sapUshellTabBarHoverOn");return true;},_prepareDomForDragAndDrop:function(){if(D.system.tablet){var c=this.item.$().clone();var $=this.item.$();var d=$.parent();this.origItemId=$.attr("id");this.origItemDataSapUi=$.attr("data-sap-ui");$.removeAttr("id").removeAttr("data-sap-ui");$.hide();c.hide();q("#dashboardGroups").parent().append($);d.append(c);this.draggedTileDomRef=$.get(0);}else if(!this.draggedTileDomRef){this.draggedTileDomRef=this.item.getDomRef();}},_appendTargetGroupDomRefWithDraggedTile:function(){if(!this.item.getDomRef()){if(D.system.tablet){q(this.draggedTileDomRef).attr("id",this.origItemId);q(this.draggedTileDomRef).attr("data-sap-ui",this.origItemDataSapUi);q(this.draggedTileDomRef).show();}this.endGroup.getInnerContainerDomRef().appendChild(this.draggedTileDomRef);}else{this.endGroup.getInnerContainerDomRef().appendChild(this.item.getDomRef());if(D.system.tablet){q(this.item.getDomRef()).show();}}},_getSelectedTabBarItem:function(){return q(".sapUshellAnchorItemSelected")[0];},_getTabBarGroupIndexByModelId:function(g){var i,t;for(i=0;i<this.allGroups.length;i++){t=this.allGroups[i].groupId;if(g===t){return i;}}},_getModelGroupById:function(g){var m=this.thisLayout.getAllGroups(),i,t,T;for(i=0;i<m.length;i++){t=m[i];T=t.groupId;if(T===g){return t;}}},_handleOverflowCollision:function(m){var A=sap.ui.getCore().byId("anchorNavigationBar"),o=this._calculateOverflowButtonSideCollision(m);if(o=="right"){if(!this.tabBarArrowCollisionRight){A._scrollToGroupByGroupIndex(A.anchorItems.length-1,5000);this.tabBarArrowCollisionRight=true;}return true;}else if(o=="left"){if(!this.tabBarArrowCollisionLeft){A._scrollToGroupByGroupIndex(0,5000);this.tabBarArrowCollisionLeft=true;}return true;}this._resetOverFlowButtonElements();return false;},_calculateOverflowButtonSideCollision:function(m){var c=q(".sapUshellAnchorRightOverFlowButton"),d=c.offset().left,e=q(".sapUshellAnchorItemOverFlow"),f=e.offset().left,g=q(".sapUshellAnchorLeftOverFlowButton"),h=g.offset().left,i=32,j=q("#anchorNavigationBar"),k=j.offset().left;if(m>d&&m<f){return"right";}if(m>k&&(m<h+i)){return"left";}},_resetOverFlowButtonElements:function(){var t=D.system.tablet,c=q(t?".sapUshellAnchorNavigationBarItemsScroll":".sapUshellAnchorNavigationBarItems");c.stop();this.tabBarArrowCollisionRight=false;this.tabBarArrowCollisionLeft=false;},_toggleTabBarOverflowArrows:function(s){var c=q(".sapUshellAnchorRightOverFlowButton"),d=q(".sapUshellAnchorLeftOverFlowButton");d.toggleClass("sapUshellTabBarOverflowButton",s);c.toggleClass("sapUshellTabBarOverflowButton",s);},_getTabBarHoverItem:function(m,t){var n,l,h,T,H;l=q(".sapUshellAnchorItem:not(.sapUshellShellHidden)").eq(0).offset().left;if(m-l<=0){return;}n=Math.round((m-l)/10);if(n>=t.length){n=t.length-1;}h=t[n];T=q(".sapUshellAnchorItem");H=T[h];return H;},removeExcludedElementsFromMatrix:function(e){if(!e.length){return;}if(!this.matrix){return;}var n=this.matrix.map(function(r){return r.map(function(i){var c=e.some(function(d){return i instanceof d;});return(c)?undefined:i;});});this.setMatrix(n);},setExcludedControl:function(c){if(c){this.aExcludedControlClass.push(c);}},setReorderTilesCallback:function(f){if(typeof f==="function"){this.reorderElementsCallback=f;}}};var L=function(){};L.prototype={_initDeferred:q.Deferred(),init:function(c){var t=function(){var s=this.getStyleInfo(this.container);if(s.tileWidth>0){this.isInited=true;this.reRenderGroupsLayout();this.layoutEngine=new a({thisLayout:this});this._initDeferred.resolve();return;}setTimeout(t,100);}.bind(this);this.cfg=c||this.cfg;this.minTilesinRow=2;this.container=this.cfg.container||document.getElementById("dashboardGroups");this.oTabBarItemClickTimer=new Date();this.bTabBarModeActive=false;this.bOnTabBarElement=false;t();sap.ui.getCore().getEventBus().subscribe("launchpad","tabBarChange",this._onTabBarChange,this);return this.getInitPromise();},setOnTabBarElement:function(o){this.bOnTabBarElement=o;},isOnTabBarElement:function(){return this.bOnTabBarElement;},_onTabBarChange:function(c,e,d){if(d==="tabs"){this.bTabBarModeActive=true;}else{this.bTabBarModeActive=false;}},tabBarTileDropped:function(){if(this.oTabBarItemClickTimer){clearTimeout(this.oTabBarItemClickTimer);}},getInitPromise:function(){return this._initDeferred.promise();},getLayoutEngine:function(){return this.layoutEngine;},getStyleInfo:function(c){var t=document.createElement("div"),d=c.getAttribute("id");c=d?document.getElementById(d):c;t.className="sapUshellTile";var s=C.last("/core/home/sizeBehavior");if(s==="Small"){t.classList.add("sapUshellSmall");}t.setAttribute("style","position: absolute; visibility: hidden;");c.appendChild(t);var e=window.getComputedStyle(t);var i={"tileMarginHeight":parseFloat(e.marginBottom,10)+parseFloat(e.marginTop,10),"tileMarginWidth":parseFloat(e.marginLeft,10)+parseFloat(e.marginRight,10),"tileWidth":t.offsetWidth,"tileHeight":t.offsetHeight,"containerWidth":c.offsetWidth-(c.style.marginLeft?parseFloat(c.style.marginLeft,10):0)};t.parentNode.removeChild(t);return i;},getGroups:function(){return this.cfg.getGroups();},getAllGroups:function(){return this.cfg.getAllGroups?this.cfg.getAllGroups():[];},isTabBarActive:function(){return this.cfg.isTabBarActive?this.cfg.isTabBarActive():false;},getTilesInRow:function(){return this.tilesInRow;},setTilesInRow:function(t){this.tilesInRow=t;},checkPlaceForTile:function(t,m,c,l,i){if(typeof m[c.y]==="undefined"){m.push(new Array(m[0].length));}if(typeof m[c.y+1]==="undefined"){m.push(new Array(m[0].length));}if(typeof m[c.y][c.x]!=="undefined"){return false;}var p=q.extend({},c);if(i||(t&&t.getLong&&!t.getLong())){return[p];}var d=[p];if(t&&t.getLong&&t.getLong()){if((c.x+1)>=m[0].length||(typeof m[p.y][p.x+1]!=="undefined")){return false;}d.push({y:p.y,x:p.x+1});}return d;},placeTile:function(t,m,c){for(var i=0;i<c.length;i++){m[c[i].y][c[i].x]=t;}},getTilePositionInMatrix:function(t,m){for(var r=0;r<m.length;r++){for(var c=0;c<m[0].length;c++){if(m[r][c]==t){return{row:r,col:c};}}}return false;},fillRowsInLine:function(m,t,r,i){if(!t.length){return 0;}var c;for(var j=0;j<m[0].length&&t.length;j++){c=this.checkPlaceForTile(t[0],m,{x:j,y:r},i);if(c){this.placeTile(t[0],m,c);t.shift();}}},organizeGroup:function(t,I){var c=t.slice(0);var d=[];var e=0;d.push(new Array(I?Math.floor(this.tilesInRow/2):this.tilesInRow));while(c.length){this.fillRowsInLine(d,c,e,I);e++;}if(this.rightToLeft){for(var i=0;i<d.length;i++){d[i].reverse();}}d=this.cleanRows(d);return d;},cleanRows:function(t){var d=false;for(var r=t.length-1;r>0&&!d;r--){for(var c=0;c<t[r].length&&!d;c++){if(typeof t[r][c]==="object"){d=true;}}if(!d){t.pop();}}return t;},setGroupsLayout:function(g,m){if(g.getIsGroupLocked()&&m.length>0){var p=g.getDomRef().parentElement;g.getDomRef().style.width="";p.style.width="";p.style.display="";}},calcTilesInRow:function(c,t,d){var e=Math.floor(c/(t+d));e=(e<this.minTilesinRow?this.minTilesinRow:e);return e;},getGroupTiles:function(g){var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return t;},reRenderGroupsLayout:function(g){if(!this.isInited){return;}var s=this.getStyleInfo(this.container);if(!s.tileWidth){return;}this.styleInfo=s;this.tilesInRow=this.calcTilesInRow(s.containerWidth,s.tileWidth,s.tileMarginWidth);g=g||this.getGroups();for(var i=0;i<g.length;i++){if(g[i].getDomRef&&!g[i].getDomRef()){continue;}var t=this.getGroupTiles(g[i]);var c=this.organizeGroup(t);this.setGroupsLayout(g[i],c);}},calcTranslate:function(r,c){this.styleInfo=this.getStyleInfo(this.container);var t=c*(this.styleInfo.tileWidth+this.styleInfo.tileMarginWidth);var d=r*(this.styleInfo.tileHeight+this.styleInfo.tileMarginHeight);if(this.layoutEngine.rightToLeft){t=-t;}return{x:t,y:d};}};var b=new L();return b;},true);
sap.ui.predefine('sap/ushell/SessionHandler',["sap/ushell/resources","sap/ushell/Config","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/ui/model/json/JSONModel","sap/m/VBox","sap/ui/core/library","sap/ushell/ui/launchpad/LoadingDialog","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/base/Log"],function(r,C,D,B,T,J,V,c,L,q,S,a){"use strict";var b=c.ValueState;var d=function(A){var t=this;this.init=function(o){this.config=o;this.oModel=new J();sap.ushell.Container.registerLogout(this.logout);this.putTimestampInStorage(this._getCurrentDate());this.putContinueWorkingVisibilityInStorage(null);this.registerCommHandlers();this.attachUserEvents();if(o.sessionTimeoutIntervalInMinutes>0){this.initSessionTimeout();}if(o.sessionTimeoutTileStopRefreshIntervalInMinutes>0){this.initTileRequestTimeout();}};this.initSessionTimeout=function(){q.sap.measure.start("SessionTimeoutInit","Inititialize Session Timeout","FLP_SHELL");if(this.config.enableAutomaticSignout===undefined){this.config.enableAutomaticSignout=false;}if(this.config.sessionTimeoutReminderInMinutes===undefined){this.config.sessionTimeoutReminderInMinutes=0;}this.oModel.setProperty("/SessionRemainingTimeInSeconds",this.config.sessionTimeoutReminderInMinutes*60);this.counter=0;this.oKeepAliveDialog=undefined;this.notifyServer();this.notifyUserInactivity();q.sap.measure.end("SessionTimeoutInit");};this.registerCommHandlers=function(){A.registerShellCommunicationHandler({"sap.ushell.sessionHandler":{oRequestCalls:{"logout":{isActiveOnly:false,distributionType:["URL"]},"extendSessionEvent":{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{"notifyUserActive":{executeServiceCallFn:function(){t.userActivityHandler();return new q.Deferred().resolve().promise();}}}}});};this._getTimeSinceLastActionInMinutes=function(){var e=this._getCurrentDate()-new Date(this.getTimestampFromStorage());var f=e/(1000*60);return f;};this.notifyUserInactivity=function(){var e=this._getTimeSinceLastActionInMinutes();var f=this.config.sessionTimeoutIntervalInMinutes-this.config.sessionTimeoutReminderInMinutes;if(e<f){setTimeout(this.notifyUserInactivity.bind(this),(f-e)*60*1000);}else if(this.config.sessionTimeoutReminderInMinutes>0){this.putContinueWorkingVisibilityInStorage(null);this.detachUserEvents();this.handleSessionRemainingTime(this.config.sessionTimeoutReminderInMinutes*60,true);this.oContinueWorkingDialog=this.createContinueWorkingDialog();this.oContinueWorkingDialog.open();}else{this.handleSessionOver();}};this.handleSessionOver=function(){clearTimeout(this.notifyServerTimer);sap.ui.getCore().getEventBus().publish("launchpad","sessionTimeout");if(this.config.enableAutomaticSignout===true){this.logout();}else{this.createSessionExpiredDialog().open();}};this.notifyServer=function(){var e=this._getCurrentDate()-new Date(this.getTimestampFromStorage()),f=e/(1000*60);if(f<=this.config.sessionTimeoutIntervalInMinutes){sap.ushell.Container.sessionKeepAlive();A.postMessageToIframeApp("sap.ushell.sessionHandler","extendSessionEvent",{});}else{}this.notifyServerTimer=setTimeout(this.notifyServer.bind(this),this.config.sessionTimeoutIntervalInMinutes*60*1000);};this.handleSessionRemainingTime=function(R){var s=this.getContinueWorkingVisibilityFromStorage();var e=this._getTimeSinceLastActionInMinutes();if(e<this.config.sessionTimeoutIntervalInMinutes-this.config.sessionTimeoutReminderInMinutes){s=false;}if(s!==undefined&&s===false&&this.oContinueWorkingDialog&&this.oContinueWorkingDialog.isOpen()){this.continueWorkingButtonPressHandler();}if(R===0){if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close();}this.handleSessionOver();}else{R=R-1;this.oModel.setProperty("/SessionRemainingTimeInSeconds",R);this.remainingTimer=setTimeout(t.handleSessionRemainingTime.bind(t,R,false),1000);}};this.initTileRequestTimeout=function(){q.sap.measure.start("SessionTileStopRequestInit","Initialize tile request timeout","FLP_SHELL");this.checkStopBackendRequestRemainingTime();this.bBackendRequestsActive=true;q.sap.measure.end("SessionTileStopRequestInit");};this.checkStopBackendRequestRemainingTime=function(){var s=this._getCurrentDate()-new Date(this.getTimestampFromStorage()),e=s/(1000*60),R=this.config.sessionTimeoutTileStopRefreshIntervalInMinutes,f=(R-e)*60*1000;if(e<R){setTimeout(this.checkStopBackendRequestRemainingTime.bind(this),f);}else if(R>0){this._setConnectionActive(false);}};this._setConnectionActive=function(e){if(e){setTimeout(this.checkStopBackendRequestRemainingTime.bind(this),0);}if(this.bBackendRequestsActive===e){return;}sap.ui.getCore().getEventBus().publish("launchpad","setConnectionToServer",{"active":e});if(!C.last("/core/spaces/enabled")){if(e){this._setTilesVisibleOnHomepage();}else{this._setTilesInvisibleOnHomepage();}}this.bBackendRequestsActive=e;};this._setTilesVisibleOnHomepage=function(){sap.ui.require(["sap/ushell/utils"],function(u){u.handleTilesVisibility();});};this._setTilesInvisibleOnHomepage=function(){return new Promise(function(e,f){return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(g){g.getGroups().then(function(G){var E=sap.ui.getCore().getEventBus();G.forEach(function(o){g.getGroupTiles(o).forEach(function(h){g.setTileVisible(h,false);});});E.publish("launchpad","visibleTilesChanged",[]);e();});});});};this.getLocalStorage=function(){if(this.oLocalStorage===undefined){var s=new S(this.config&&this.config.sessionType||S.Type.local);if(this._isLocalStorageSupported(s)){this.oLocalStorage=s;}else{this.oLocalStorage=false;}}return this.oLocalStorage;};this._isLocalStorageSupported=function(s){var i;try{i=s.isSupported();}catch(e){i=false;}if(!i){a.warning("SessionHandler failed to instantiate the local storage handler. Might be disabled by the browser!");}return i;};this.createContinueWorkingDialog=function(){this.oMessageVBox=new V();this.oSessionKeepAliveLabel=new T({text:{parts:["/SessionRemainingTimeInSeconds"],formatter:function(s){var i=s>60,e,f,m;e=i?r.i18n.getText("sessionTimeoutMessage_units_minutes"):r.i18n.getText("sessionTimeoutMessage_units_seconds");f=i?Math.ceil(s/60):s;if(t.config.enableAutomaticSignout){m=r.i18n.getText("sessionTimeoutMessage_kioskMode_main",[f,e]);}else{m=r.i18n.getText("sessionTimeoutMessage_main",[f,e]);}return m;}}});this.oMessageVBox.addItem(this.oSessionKeepAliveLabel);if(this.config.enableAutomaticSignout===false){this.oLostDataReminder=new T({text:r.i18n.getText("sessionTimeoutMessage_unsavedData")});this.oMessageVBox.addItem(this.oLostDataReminder);}this.oSessionKeepAliveLabel.setModel(this.oModel);this.oSessionKeepAliveDialog=new D("sapUshellKeepAliveDialog",{title:r.i18n.getText("sessionTimeoutMessage_title"),type:"Message",state:b.Warning,content:this.oMessageVBox,beginButton:this.getContinueWorkingButton(),afterClose:function(){this.oSessionKeepAliveDialog.destroy();}.bind(this)});if(this.config.enableAutomaticSignout===true){this.oSignOutButton=new B({text:r.i18n.getText("logoutBtn_title"),tooltip:r.i18n.getText("logoutBtn_tooltip"),press:this.logout.bind(this)});this.oSessionKeepAliveDialog.setEndButton(this.oSignOutButton);}return this.oSessionKeepAliveDialog;};this.getContinueWorkingButton=function(){return new B({text:r.i18n.getText("sessionTimeoutMessage_continue_button_title"),press:t.continueWorkingButtonPressHandler.bind(t)});};this.continueWorkingButtonPressHandler=function(){if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close();}clearTimeout(this.remainingTimer);this.putTimestampInStorage(this._getCurrentDate());this.notifyUserInactivity();this.attachUserEvents();this.putContinueWorkingVisibilityInStorage(false);A.postMessageToIframeApp("sap.ushell.sessionHandler","extendSessionEvent",{});};this.createSessionExpiredDialog=function(){this.oSessionExpiredDialog=new D("sapUshellSessioTimedOutDialog",{title:r.i18n.getText("sessionExpiredMessage_title"),type:"Message",state:b.Warning,content:new T({text:r.i18n.getText("sessionExpiredMessage_main")}),beginButton:this.getReloadButton(),afterClose:function(){this.oSessionExpiredDialog.destroy();}.bind(this)});return this.oSessionExpiredDialog;};this.getReloadButton=function(){return new B({text:r.i18n.getText("sessionExpiredMessage_reloadPage_button_title"),press:function(){t.oSessionExpiredDialog.close();location.reload();}});};this.attachUserEvents=function(){q(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this));sap.ushell.Container.getService("AppLifeCycle").attachAppLoaded({},this.userActivityHandler,this);};this.detachUserEvents=function(){q(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");q(document).off("keydown.sessionTimeout");q(document).off("touchstart.sessionTimeout");sap.ushell.Container.getService("AppLifeCycle").detachAppLoaded(this.userActivityHandler,this);};this.putTimestampInStorage=function(e){q.sap.measure.average("SessionTimeoutPutLocalStorage","Put timestamp in local storage Average","FLP_SHELL");var l=this.getLocalStorage();if(l){l.put("lastActivityTime",e);if(this.bBackendRequestsActive===false){this._setConnectionActive(true);}}q.sap.measure.end("SessionTimeoutPutLocalStorage");};this.putContinueWorkingVisibilityInStorage=function(v){var l=this.getLocalStorage();if(l){l.put("showContinueWorkingDialog",v);}};this.getContinueWorkingVisibilityFromStorage=function(){var l=this.getLocalStorage();if(l){return l.get("showContinueWorkingDialog");}return null;};this.getTimestampFromStorage=function(){var l=this.getLocalStorage();if(l){return l.get("lastActivityTime");}return null;};this.userActivityHandler=function(){if(this.oUserActivityTimer!==undefined){return;}this.oUserActivityTimer=setTimeout(function(){t.putTimestampInStorage(t._getCurrentDate());t.oUserActivityTimer=undefined;},1000);};this._getCurrentDate=function(){return new Date();};this.logout=function(){var l=new L({text:""});A.postMessageToIframeApp("sap.ushell.sessionHandler","logout",{},true).then(function(){t.detachUserEvents();clearTimeout(t.oUserActivityTimer);clearTimeout(t.remainingTimer);clearTimeout(t.notifyServerTimer);l.openLoadingScreen();l.showAppInfo(r.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.setDirtyFlag(false);sap.ushell.Container.defaultLogout();});};};return d;},true);
sap.ui.predefine('sap/ushell/System',[],function(){"use strict";var S=function(d){this._oData=d;};
S.prototype.getAlias=function(){return this._oData.alias;};
S.prototype.getBaseUrl=function(){return this._oData.baseUrl;};
S.prototype.getClient=function(){return this._oData.client;};
S.prototype.getClientRole=function(){return this._oData.clientRole;};
S.prototype.getName=function(){return this._oData.system;};
S.prototype.getPlatform=function(){return this._oData.platform;};
S.prototype.getProductVersion=function(){return this._oData.productVersion;};
S.prototype.isTrial=function(){return!!this._oData.isTrialSystem;};
S.prototype.adjustUrl=function(u){if(u.indexOf("/")!==0||u==="/"){throw new Error("Invalid URL: "+u);}if(this._oData.baseUrl===";o="){if(this._oData.alias){u=u+";o="+this._oData.alias;}}else if(this._oData.baseUrl){u=this._oData.baseUrl.replace(/\/$/,"")+u;}if(this._oData.client){u+=(u.indexOf("?")>=0?"&":"?")+"sap-client="+this._oData.client;}return u;};
S.prototype.toString=function(){return JSON.stringify(this._oData);};
return S;},true);
sap.ui.predefine('sap/ushell/TechnicalParameters',["sap/ushell/utils/type"],function(t){"use strict";var T={"sap-navigation-scope":{injectFrom:"inboundParameter",sticky:true,stickyName:"sap-navigation-scope-filter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A));}else{S(b(p,o));}});}},"sap-fiori-id":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.fiori/registrationIds",A));}else{S(b(p,o));}});}},"sap-ui-fl-max-layer":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-control-variant-id":{injectFrom:"startupParameter",isIntentParameter:false,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-app-id-hint":{injectFrom:"startupParameter",isIntentParameter:true,getValue:d},"sap-ach":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.app/ach",A));}else{S(b(p,o));}});}},"sap-prelaunch-operations":{injectFrom:"inboundParameter",isIntentParameter:true,getValue:d}};
function d(p){return Promise.reject(p+" is reserved for shell internal usage only");}
function g(p,A){var j=A.getComponentData().technicalParameters||{};return j[p];}
function a(p,A){var m=A.getMetadata()?A.getMetadata():undefined;var v=m.getManifestEntry(p);if(!t.isArray(v)){v=[v];}return v;}
function b(p,A){var r=A.getReservedParameters();return r&&r[p];}
function c(p,A,o,s){if(!T[p]){return Promise.reject(p+" is not a known technical parameter");}return T[p].getValue(p,A,o,s);}
function e(F){if(!F){F={};}return Object.keys(T).filter(function(o){var p=T[o];return Object.keys(F).every(function(s){var D=F[s];var H=p.hasOwnProperty(s);if(H){return p[s]===D;}return false;});}).map(function(m){return Object.keys(T[m]).reduce(function(p,P){p[P]=T[m][P];return p;},{name:m});});}
function f(){return Object.keys(T);}
function i(p){return T.hasOwnProperty(p);}
function h(p,A,o,s){if(s==="UI5"){return g(p,A);}return b(p,o);}
return{getParameterValue:c,getParameterValueSync:h,getParameters:e,getParameterNames:f,isTechnicalParameter:i};},false);
sap.ui.predefine('sap/ushell/UIActionsWin8',["sap/ui/Device","sap/ui/thirdparty/jquery"],function(D,q){"use strict";
function n(){}
var U=function(){};U.prototype={init:function(c){this.cfg=c;this.type=this.cfg.type;this.wrapper=q(c.wrapperSelector).get(0);this.container=q(c.containerSelector).get(0);this.dragAndScrollCallback=c.dragAndScrollCallback||n;this.dragAndScrollDuration=100;this.dragCallback=c.dragCallback||n;this.draggableSelector=c.draggableSelector;this.endCallback=typeof c.endCallback==="function"?c.endCallback:n;this.onBeforeCreateClone=c.onBeforeCreateClone||n;this.placeHolderClass=c.placeHolderClass||"";this.cloneClass=c.cloneClass||"";this.$root=q(c.rootSelector);this.startCallback=typeof c.startCallback==="function"?c.startCallback:n;this.onDragStartUIHandler=typeof c.onDragStartUIHandler==="function"?c.onDragStartUIHandler:n;this.onDragEndUIHandler=typeof c.onDragEndUIHandler==="function"?c.onDragEndUIHandler:n;this._publishAsync=typeof c._publishAsync==="function"?c._publishAsync:n;},enable:function(){if(this.enabled){return this;}this.enabled=true;this.$root.on("dragstart",this.draggableSelector,this,this.dragStartHandler).on("dragend",this.draggableSelector,this,this.dragEndHandler);return this;},disable:function disable(){this.enabled=false;this.$root.off("dragstart",this.draggableSelector).off("dragend",this.draggableSelector);return this;},dragLeaveHandler:function(e){var c=window.getComputedStyle(e.data.container).transform;e.data.container.style.transform=c;e.data.container.style.transition="";var t;var b=c.split(",");if(c.substr(0,8)=="matrix3d"){t=parseInt(b[13],10);}else if(c.substr(0,6)=="matrix"){t=parseInt(b[5],10);}if(isNaN(t)){return;}e.data.container.style.transform="none";e.data.wrapper.scrollTop+=~t+1;},dragEnterScrollHandler:function dragEnterScrollHandler(e){if(e.target==e.data.$bottomScroller.get(0)){e.data.startScroll("down");}if(e.target==e.data.$topScroller.get(0)){e.data.startScroll("up");}},startScroll:function(d){var l;if(d=="up"){l=this.wrapper.scrollTop;if(l<=0){return;}}else{l=this.wrapper.scrollHeight-this.wrapper.offsetHeight-this.wrapper.scrollTop;if(l<=0){return;}}var s=l*3;var t=(d=="up")?l:~l+1;this.container.style.transition="transform "+s+"ms linear";this.container.style.transform="translate(0px, "+t+"px) scale(1) translateZ(0px)";},initScrollRegions:function(){this.$topScroller=q("<div class='UiActionsTopScroller' style='position:absolute; top: 0; height: 70px; left:0; right:0;'></div>");this.$bottomScroller=q("<div class='UiActionsBottomScroller' style='position:absolute; bottom: 0; height: 70px; left:0; right:0;'></div>");q(document.body).append(this.$topScroller).append(this.$bottomScroller);this.$topScroller.add(this.$bottomScroller).on("dragenter",this,this.dragEnterScrollHandler).on("dragleave",this,this.dragLeaveHandler);},removeScrollRegions:function(){q(".UiActionsTopScroller, .UiActionsBottomScroller").remove();}};
function G(c){this.init(c);}
G.prototype=new U();q.extend(G.prototype,{dragOverTimeout:null,dragStartHandler:function(e){var _=e.data;if(D.system.phone){_.$root.find(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}else{_.$root.find(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}_.$originalElement=q(e.target).closest(".sapUshellDashboardGroupsContainerItem");_.originalIndex=_.$originalElement.index();_.$element=_.$originalElement.clone().css("display","none").addClass("sapUshellDashboardGroupsContainerItem-placeholder");_.$element.insertAfter(_.$originalElement);_.$originalElement.addClass("sapUshellDashboardGroupsContainerItem-orignal");_.$root.find(".sapUshellTileContainerAfterContent").last().addClass("sapUshellTileContainerRemoveContent");_.initScrollRegions();setTimeout(function(){_.$originalElement.css("display","none");_.$element.css("display","block");},0);_.$root.on("dragover",".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",_,_.dragOverHandler);},dragEndHandler:function(e){var _=e.data;_.removeScrollRegions();_.$root.off("dragover",".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)");_.$root.find(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");_.$root.find(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");_.$root.find(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");_.$element.replaceWith(_.$originalElement);var b=_.$originalElement.index();_.$originalElement.css("display","block").removeClass("sapUshellDashboardGroupsContainerItem-orignal");var B=sap.ui.getCore().getEventBus(),f=_.$originalElement.children().eq(0).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),o={group:g,groupChanged:false,focus:false};d.removeAggregation("groups",g,true);d.insertAggregation("groups",g,b,true);_._publishAsync("launchpad","moveGroup",{fromIndex:_.originalIndex,toIndex:b});window.setTimeout(q.proxy(B.publish,B,"launchpad","scrollToGroup",o),1);},dragOverHandler:function dragOverHandler(e){if(e.data.dragOverTimeout){return;}e.data.dragOverTimeout=setTimeout(function(){e.data.dragOverTimeout=null;var o=e.currentTarget;if(e.data.$element.get(0)===o){return;}var b=e.data.isOverAboveMiddle(o,e.originalEvent.pageY);if(o===e.data.overElement&&b===e.data.overAboveMiddle){return;}e.data.overElement=o;e.data.overAboveMiddle=b;e.data.movePlaceholder(e.data.$element,o,b);},50);},isOverAboveMiddle:function(e,p){var m=true;var r=e.getBoundingClientRect();if(r.top+r.height/2<p){m=false;}return m;},movePlaceholder:function(p,e,i){if(i){q(p).insertBefore(q(e));}else{q(p).insertAfter(q(e));}}});
function T(c){this.init(c);}
T.prototype=new U();q.extend(T.prototype,{dragOverTimeout:null,dragStartHandler:function dragStartHandler(e){var _=e.data;if(!e.target.id){e.target=q(e.target).closest(".sapUshellTile")[0];}_.element=e.target;_.$root.on("dragenter",_.draggableSelector+", .sapUshellTileContainer",_,_.dragEnterTileHandler);var i=e.target.getAttribute("id");_.oTile=sap.ui.getCore().byId(i);_.oTile.addStyleClass(_.cloneClass);if(_.oTile.getParent().getIsGroupLocked()){_.onDragStartUIHandler();e.preventDefault();var m=function m(){_.onDragEndUIHandler();document.removeEventListener("mouseup",m);};document.addEventListener("mouseup",m);return false;}_.initScrollRegions();var $=q(e.target).clone();$.addClass(_.placeHolderClass).css("z-index","-1");var c=$.get(0);_.$cloned=$;q(e.target).after($);_.getDomRefOriginal=_.oTile.getDomRef;_.oTile.getDomRef=function(){return c;};_.startCallback(e,_.element);_.onDragStartUIHandler();_.dragCallback(e,_.element);setTimeout(function(){q(e.target).css("visibility","hidden");},0);},dragEndHandler:function dragEndHandler(e){var _=e.data;_.$root.off("dragenter",_.draggableSelector+", .sapUshellTileContainer",_.dragEnterTileHandler);_.removeScrollRegions();_.oTile.getDomRef=_.getDomRefOriginal;_.oTile.removeStyleClass(_.cloneClass);q(_.element).css("visibility","visible");_.$cloned.remove();_.endCallback(e,_.element);_.onDragEndUIHandler();_.element=null;},dragEnterTileHandler:function dragEnterTileHandler(e){e.preventDefault();if(this.tileDragEnterTimeout){window.clearTimeout(this.tileDragEnterTimeout);}this.tileDragEnterTimeout=setTimeout(function(){e.data.dragOverTimeout=null;e.data.overElement=this;e.data.dragAndScrollCallback({moveX:e.originalEvent.pageX,moveY:e.originalEvent.pageY});},50);}});
function L(c){this.init(c);}
L.prototype=new U();q.extend(L.prototype,{dragOverTimeout:null,dragStartHandler:function dragStartHandler(e){var _=e.data;if(!e.target.id){e.target=q(e.target).closest(".sapUshellLinkTile")[0];}_.element=e.target;_.onBeforeCreateClone(e,_.element);_.$root.on("dragenter",".sapUshellTileContainer",_,_.dragEnterLinkHandler);var i=e.target.getAttribute("id");_.oTile=sap.ui.getCore().byId(i);if(_.oTile.getParent().getIsGroupLocked()&&_.oTile.getParent().getDefaultGroup()){e.preventDefault();_.onDragStartUIHandler();var m=function m(){_.onDragEndUIHandler();document.removeEventListener("mouseup",m);};document.addEventListener("mouseup",m);return false;}q(e.target).addClass(_.placeHolderClass);_.initScrollRegions();_.startCallback(e,_.element);_.onDragStartUIHandler();_.dragCallback(e,_.element);},dragEndHandler:function dragEndHandler(e){var _=e.data;_.$root.off("dragenter",".sapUshellTileContainer",_.dragEnterLinkHandler);_.removeScrollRegions();q(_.element).css("visibility","visible");_.endCallback(e,_.element);_.onDragEndUIHandler();_.element=null;},dragEnterLinkHandler:function dragEnterLinkHandler(e){e.preventDefault();if(this.linkDragEnterTimeout){window.clearTimeout(this.linkDragEnterTimeout);}this.linkDragEnterTimeout=setTimeout(function(){e.data.dragOverTimeout=null;e.data.overElement=this;e.data.dragAndScrollCallback({moveX:e.originalEvent.pageX,moveY:e.originalEvent.pageY});},10);}});var a={getInstance:function(c){switch(c.type){case"groups":return new G(c);case"links":return new L(c);default:return new T(c);}}};return a;},true);
sap.ui.predefine('sap/ushell/URLTemplateProcessor',["sap/ui/thirdparty/URI","sap/ui/thirdparty/URITemplate","sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/DependencyGraph","sap/ushell/_URLTemplateProcessor/TemplateParameterParser"],function(U,u,t,c,a,r,d,T){"use strict";
function l(s){jQuery.sap.log.debug(s,"sap.ushell.URLTemplateProcessor");}
function f(v){if(typeof v==="undefined"){return"<undefined>";}if(typeof v==="string"){if(v===""){return"<empty string>";}return"'"+v+"'";}if(typeof v==="number"){return"(number) "+v;}if(typeof v==="boolean"){return"(bool) "+v;}var s;if(typeof v==="object"){s=JSON.stringify(v);if(s.length>255){s=s.substr(0,255)+"...";}}else{s="{other type}";}return s;}
function m(h,i){var j=c(h);var k=c(i);return Object.keys(k).reduce(function(o,O){o[O]=k[O];return o;},j);}
function b(p,s,D){var M=p&&Array.isArray(p.mergeWith);var P=p&&p.names;if(!M){return P;}return p.mergeWith.reduce(function(o,h){var i=T.parsePath(D,h);if(i.pathType==="relative"){throw new Error("Please only specify absolute paths via mergeWith");}i.value.forEach(function(k){if(k.type!=="literal"){throw new Error("Please do not specify references in mergeWith paths");}});var j=r.resolvePath(i,{},s,{},{});return m(j,o);},P);}
function e(p){var P=Object.keys(p).filter(function(s){return typeof p[s]==="object"&&(p[s].hasOwnProperty("renameTo"));});var o=[];P.forEach(function(s){var h=p[s];if(h.hasOwnProperty("renameTo")){o.push(function(i,j){var R=j;R=j.replace(new RegExp(s+"=","g"),h.renameTo+"=");return R;});}});return o;}
function g(o,s,R,A,D){l("[TEMPLATE EXPANSION] "+o.urlTemplate);var h=b(o.parameters,s,D)||{};var i=a.removeArrayParameterNotation(R[D]||{});var j=T.parseTemplateParameterSet(h,D);var k=T.parseTemplateParameterSetAsLiterals(i);var p=m(k,j);l("- parsed template parameters: "+JSON.stringify(p,null,3));var G=d.buildDependencyGraph(p);l("- created dependency graph: "+JSON.stringify(G,null,3));var n=d.getDependencyResolutionOrder(G);l("- resolving in order: "+n.join(" > "));var q=r.resolveAllParameters(p,n,s,R,A,D);Object.keys(q).forEach(function(x){var y=q[x];l(x+" --> "+f(y));});var P=e(h||{});var v=o.urlTemplate;var w=U.expand(v,q).toString();l("- created URL: "+w);P.forEach(function(O){w=O(v,w);});if(P.length>0){l("- created URL (post expansion): "+w);}return w;}
return{expand:g};},false);
sap.ui.predefine('sap/ushell/Ui5NativeServiceFactory',["sap/ui/core/service/ServiceFactory"],function(S){"use strict";var u={_servicePromises:{},createServiceFactory:function(s){var o=this._servicePromises;var U=S.extend("sap.ushell.ui5Service."+s+"Factory",{createInstance:function(){var a=o[s];if(!a){a=new Promise(function(r,b){sap.ui.require(["sap/ushell/ui5service/"+s],function(c){var d;if(!c){b();}d=new c();r(d);});});o[s]=a;}return a;}});return new U();}};return u;});
sap.ui.predefine('sap/ushell/Ui5ServiceFactory',["sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","sap/ui/integration/services/Navigation","sap/ui/integration/services/Data"],function(S,a,N,D){"use strict";var A;
function s(i){A=i;}
function g(){return A;}
function b(m){return!!/^[^_].+/.test(m);}
function c(o){var p,P=[];for(p in o){P.push(p);}return P;}
function d(u,p,P,i){c(u).filter(b).filter(function(n){var v=u[n];p[n]=v;return typeof v==="function";}).forEach(function(F){p[F]=p[F].bind(u);if(i){f(P,p,F);}});}
function e(C){var G;if(typeof C==="undefined"){return true;}if(!jQuery.isPlainObject(C)){return false;}if(!C.scopeType){return false;}G=jQuery.sap.getObject("scopeObject.getId",undefined,C);if(typeof G!=="function"){return false;}return true;}
function f(p,P,l){var o=P[l];P[l]=function(){var i,m,A=g();if(!p||p.scopeObject.getId()!==A){jQuery.sap.log.warning("Call to "+l+" is not allowed","This may be caused by an app component other than the active '"+A+"' that tries to call the method","sap.ushell.Ui5ServiceFactory");return undefined;}m=new Array(arguments.length);for(i=0;i<m.length;++i){m[i]=arguments[i];}return o.apply(P,m);};}
function h(p,u,i){var P={};if(i){i=typeof p==="object";}d(u,P,p,i);if(i&&p.scopeType==="component"&&p.scopeObject&&p.scopeObject.getId){s(p.scopeObject.getId());}return P;}
function j(u){return new Promise(function(r,R){try{var U=sap.ushell.Container.getService(u);r(U);}catch(E){R(E);}});}
function k(u,i){var U=S.extend("sap.ushell.ui5service."+u+"Factory",{createInstance:function(p){return new Promise(function(r,R){j(u).then(function(o){var l,m,n;if(!e(p)){jQuery.sap.log.error("Invalid context for "+u+" service interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.Ui5ServiceFactory");R("Invalid Context for "+u+" service");return;}m=h(p,o,i);n=a.extend("sap.ushell.ui5service."+u,{getInterface:function(){return m;}});l=new n(p);r(l);},function(G){R(G);});});}});return new U();}
return{createServiceFactory:k};});
sap.ui.predefine('sap/ushell/User',["sap/ui/thirdparty/URI","sap/ui/base/EventProvider","sap/ui/core/LocaleData"],function(U,E,L){"use strict";
function c(o){if(o===undefined){return undefined;}return jQuery.extend(true,{},o);}
function g(u){var o;if(u.host&&typeof u.host==="function"&&u.host()){o=u.host();if(typeof u.protocol==="function"&&u.protocol()){o=u.protocol()+"://"+o;}return o;}return"";}
function i(t){return t.indexOf("sap_")===0;}
var a=function(C){var b=[],B,s,o,S,e=new E();this.getEmail=function(){return C.email;};this.getFirstName=function(){return C.firstName;};this.getFullName=function(){return C.fullName;};this.getId=function(){return C.id;};this.getLanguage=function(){return C.language;};this.getLanguageBcp47=function(){return C.languageBcp47;};this.getLanguageText=function(){var l=sap.ui.getCore().getConfiguration().getLocale(),d=new L(l),f=sap.ui.getCore().getConfiguration().getLanguageTag();f=f.replace("-","_");var h=d.getLanguages(),j=h[f]||this.getLanguage().toUpperCase();return j;};this.getLastName=function(){return C.lastName;};this.getImage=function(){return C.image;};this.setImage=function(u){C.image=u;e.fireEvent("onSetImage",u);};this.attachOnSetImage=function(f,d){e.attachEvent("onSetImage",f,d);};this.isJamActive=function(){return C.isJamActive===true;};this.isLanguagePersonalized=function(){return C.isLanguagePersonalized===true;};this.getTheme=function(t){if(t===a.prototype.constants.themeFormat.ORIGINAL_THEME){return S.originalTheme.theme;}if(t===a.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return o.theme+(o.locationPath?"@"+o.locationOrigin+o.locationPath:"");}if(t===a.prototype.constants.themeFormat.NWBC){if(i(o.theme)){return o.theme;}return this.getTheme(a.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}return o.theme;};this.getThemeRoot=function(t){if(C.ranges&&C.ranges.theme&&C.ranges.theme[t]&&C.ranges.theme[t].themeRoot){return C.ranges.theme[t].themeRoot;}return"";};this.setTheme=function(n){if(this.isSetThemePermitted()===false){var d="setTheme not permitted";jQuery.sap.log.error(d);throw new Error(d);}o=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s);if(n!==S.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},S.originalTheme.theme,n);S=o;}this.applyTheme(n);};this.applyTheme=function(n){var t=this;var T=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s),N;o=T;if(T.suppliedRoot){sap.ui.getCore().applyTheme(T.theme,T.suppliedRoot+"/UI5/");}else if(T.path){sap.ui.getCore().applyTheme(T.theme,T.path+"/UI5/");}else{sap.ui.getCore().applyTheme(T.theme);}sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(A){N=t.getTheme(a.prototype.constants.themeFormat.NWBC);A.postMessageToIframeApp("sap.ushell.appRuntime","themeChange",{"currentThemeId":N,"themeServiceRoute":window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1"});});};this.setLanguage=function(n){if(n){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},C.language,n);C.language=n;}};this.getAccessibilityMode=function(){return C.accessibility;};this.setAccessibilityMode=function(A){if(this.isSetAccessibilityPermitted()===false){var d="setAccessibilityMode not permitted";jQuery.sap.log.error(d);throw new Error(d);}C.accessibility=A;};this.isSetAccessibilityPermitted=function(){return C.setAccessibilityPermitted;};this.isSetThemePermitted=function(){return C.setThemePermitted;};this.getContentDensity=function(){return C.contentDensity;};this.setContentDensity=function(d){if(this.isSetContentDensityPermitted()===false){var f="setContentDensity not permitted";jQuery.sap.log.error(f);throw new Error(f);}this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},C.contentDensity,d);C.contentDensity=d;};this.isSetContentDensityPermitted=function(){return C.setContentDensityPermitted;};this.getChangedProperties=function(){return jQuery.extend(true,[],b);};this.setChangedProperties=function(p,d,n){b.push({propertyName:p.propertyName,name:p.name,oldValue:d,newValue:n});};this.resetChangedProperties=function(){b=[];};this.resetChangedProperty=function(p){b=b.filter(function(P){return!(p===P.propertyName);});};this.getTrackUsageAnalytics=function(){return C.trackUsageAnalytics;};this.setTrackUsageAnalytics=function(t){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},C.trackUsageAnalytics,t);C.trackUsageAnalytics=t;};this.setImageConsent=function(d){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},C.isImageConsent,d);C.isImageConsent=d;};this.getImageConsent=function(){return C.isImageConsent;};s={locationPathUi5:(new U(jQuery.sap.getModulePath(""))).absoluteTo(document.location).pathname(),locationPathCustom:C.themeRoot||"",locationOrigin:g(new U(document.location))};if(!s.locationPathUi5){jQuery.sap.log.warning("User: Could not set UI5 location path");}if(!s.locationPathCustom){jQuery.sap.log.warning("User: Could not set location path for custom themes");}if(!s.locationOrigin){jQuery.sap.log.warning("User: Could not set front-end server location origin");}B=C.bootTheme||{theme:"",root:""};o=this._amendTheme(B,s);S=o;};
a.prototype._amendTheme=function(t,s){var T={},b,r;function d(R,s){var u,o,p={};u=new U(R);o=g(u);if(o){p.locationOrigin=o;p.locationPath=u.path();}else{p.locationOrigin=s.locationOrigin;p.locationPath=R;}return p;}if(!t||!t.theme||!s){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""};}T.originalTheme=c(t);if(T.originalTheme.theme.indexOf("@")>0){b=T.originalTheme.theme.split("@",2);T.theme=b[0];T.suppliedRoot=b[1];r=d(b[1],s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.theme=T.originalTheme.theme;if(T.originalTheme.root){T.suppliedRoot=T.originalTheme.root;r=d(T.originalTheme.root,s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.suppliedRoot="";if(i(T.theme)){T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathUi5;T.path="";return T;}T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathCustom;T.path=T.locationPath;return T;};
a.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"}};return a;},true);
sap.ui.predefine('sap/ushell/UserActivityLog',["sap/ushell/utils","sap/ushell/ui/launchpad/Tile","sap/ushell/EventHub"],function(u,T,E){"use strict";var U=function(){};U.prototype={_maxLoggedMessages:30,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroupAt","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","movetile","externalSearch","addBookmarkTile"],_observedGeneralActions:["openApp"],_observedEventHubEvents:["showCatalog"],_aDoableObjects:[],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(){if(this._isActive){return;}this._isActive=true;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(b,i,c){e.subscribe("launchpad",b,t._handleAction,t);});e.subscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(b,i,c){e.subscribe(b,t._handleAction,t);});this._observedEventHubEvents.forEach(function(b,i,c){t._aDoableObjects.push(E.on(b).do(t._handleActionEventHub.bind(t)));});jQuery.sap.log.addLogListener(this);jQuery.sap.log.debug("requiring sap.ushell.ui.launchpad.Tile",new Error().stack,"sap.ushell.UserActivityLog");t._tileOntapOrigFunc=T.prototype.ontap;sap.ushell.ui.launchpad.Tile.prototype.ontap=t._tileOnTapDecorator(t._tileOntapOrigFunc);},deactivate:function(){if(!this._isActive){return;}this._isActive=false;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(b,i,c){e.unsubscribe("launchpad",b,t._handleAction,t);});e.unsubscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(b,i,c){e.unsubscribe(b,t._handleAction,t);});this._aDoableObjects.forEach(function(d){d.off();});jQuery.sap.log.removeLogListener(this);sap.ushell.ui.launchpad.Tile.prototype.ontap=this._tileOntapOrigFunc;},addMessage:function(t,m,b){if(this._isActive){this._addMessageInternal(t,m,b);}},getLog:function(){return this._getLoggingQueueFromStorage();},getMessageInfo:function(){var r={userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog(),formFactor:u.getFormFactor()};return r;},getMessageInfoAsString:function(s){return JSON.stringify(this.getMessageInfo(s));},onLogEntry:function(d){var e=(typeof d.details!=="undefined"&&(d.details!==""))?(d.message+" , "+d.details):d.message;this.addMessage(this.messageType.ERROR,e);},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(o){var t=this,n,l,b,c,d,e;return function(){var f=this.getMetadata().getName();if(f=="sap.ushell.ui.launchpad.PlusTile"){t.addMessage(t.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId());}else if(f=="sap.ushell.ui.launchpad.Tile"){n=hasher.getHash();if(n){var g=sap.ushell.Container.getService("URLParsing");var h=g.parseShellHash(n);n="#"+g.constructShellHash({target:{semanticObject:h.semanticObject,action:h.action}});}l=t._getLastNavActionFromStorage();l.time=new Date();l.navigationHash=n;l.tileDebugInfo=this.getDebugInfo();b=sap.ui.getCore().byId(this.getId());c=b.getModel();d=this.getBindingContext();e=d.getPath();l.tileTitle=d.getModel().getProperty(e).title;t._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));t.addMessage(t.messageType.ACTION,"Click on Tile: "+c.getData().title+" Tile debugInfo: "+this.getDebugInfo());}o.apply(this,arguments);};},_addMessageInternal:function(t,m,b){var l=this._getLoggingQueueFromStorage(),c={type:null},p;for(p in this.messageType){if(t==this.messageType[p]){c.type=p;break;}}if(c.type===null){return;}jQuery.extend(c,{messageID:b,messageText:m,time:new Date(),toString:function(){var d=[this.type,this.time];if(typeof this.messageID!=="undefined"){d.push(this.messageID);}d.push(this.messageText);return d.join(" :: ");}});l.push(c);if(l.length>this._maxLoggedMessages){l.shift();}this._putInSessionStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(l));},_handleActionEventHub:function(e){this._handleAction("",e.sId,e.oData);},_handleAction:function(c,e,d){var m;switch(e){case"deleteTile":m="Delete Tile "+(d.tileId||"");break;case"moveTile":m="Move Tile "+(d.sTileId||"")+" to Group "+(d.toGroupId||"");break;case"createGroupAt":m="Create Group";break;case"changeGroupTitle":m="Change Group Title of "+(d.groupId||"")+" to "+(d.newTitle||"");break;case"deleteGroup":m="Delete Group "+(d.groupId||"");break;case"addTile":var t=d.catalogTileContext.oModel.oData,s=d.catalogTileContext.sPath,b=this._findInModel(s,t),f=b.id,g=d.groupContext.getObject(),h=g.groupId;m="Add Tile "+(f||"")+" to Group "+(h||"");break;case"moveGroup":m="Move Group from index "+(d.fromIndex||"")+" to index "+(d.toIndex||"");break;case"appOpened":m="Open application "+d.action;var l=this._getLastNavActionFromStorage();l.applicationInformation={};["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(p){l.applicationInformation[p]=d[p];});if(!this._hashSegmentsEqual(l.navigationHash,d.sShellHash)){l.tileDebugInfo="";}l.navigationHash=d.sShellHash;this._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));break;case"addBookmarkTile":m="Add Bookmark "+(d.title||"")+" "+(d.subtitle||"")+" for URL: "+(d.url||"");break;case"showCatalog":m="Show Catalog";break;default:break;}this.addMessage(this.messageType.ACTION,m);},_findInModel:function(p,m){var b,c=m,i,d;try{b=p.split("/");for(i=0;i<b.length;i=i+1){if(d!==b[i]){continue;}c=c[d];}}catch(e){return undefined;}return c;},_getUserDetails:function(){var b=sap.ushell.Container.getUser();return{fullName:b.getFullName()||"",userId:b.getId()||"",eMail:b.getEmail()||"",Language:b.getLanguage()||""};},_getShellState:function(){var v=sap.ui.getCore().byId("viewPortContainer"),m,r="";if(v!==undefined){m=v.getModel();r=m.getProperty("/currentState/stateName");}return r;},_getLoggingQueueFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.loggingQueue");var q=[];if(l){try{q=JSON.parse(l);}catch(e){}}return q;},_getLastNavActionFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return(l?JSON.parse(l):{});},_hashSegmentsEqual:function(b,c){if((!b)||(!c)){return false;}return(this._getHashSegment(b)===this._getHashSegment(c));},_getHashSegment:function(b){var i=b.indexOf("~"),c;if(i>-1){return b.substring(0,i);}c=b.indexOf("?");if(c>-1){return b.substring(0,c);}return b;},_getFromSessionStorage:function(k){var r=null;try{r=sessionStorage.getItem(k);}catch(e){}return r;},_putInSessionStorage:function(k,v){try{sessionStorage.setItem(k,v);}catch(e){}}};var a=new U();return a;},true);
sap.ui.predefine('sap/ushell/_ApplicationType/guiResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ui/thirdparty/jquery"],function(U,a,S,c,p,q){"use strict";
function r(O,K){K.forEach(function(s){delete O[s];});}
function i(P,I){return I&&I.signature&&I.signature&&I.signature.parameters&&I.signature.parameters[P]&&I.signature.parameters[P].required===true;}
function g(E,I){var y=i("DYNP_OKCODE",I)||i("DYNP_NO1ST",I);var B=[];if(y){return[];}var z=b(E);function A(s){return s.toUpperCase();}var N=Object.keys(z).map(A).sort();function C(s,D){if(s.length!==D.length){return false;}return s.every(function(F,G){return s[G]==D[G];});}if(C(["DYNP_NO1ST","DYNP_OKCODE"],N)||C(["DYNP_OKCODE"],N)||C(["DYNP_NO1ST"],N)){B=Object.keys(z);}return B;}
function b(P){var B=c.filterObject(P,d);return B;}
function d(N,V){var s;if(arguments.length===1){s=N.split(/[=](.+)?/);if(s.length>1){return d.apply(null,s);}}return!(N.indexOf("sap-")===0||N.charAt(0)==="~");}
function e(M,B,E){var I=M.inbound;var R=I&&I.resolutionResult;if(!(!I||!R||!(R["sap.gui"])||!(R.applicationType==="TR"))){return l(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")===-1))){return n(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")>=0))){return m(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")===-1))){return o(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")!==-1))){return k(M,B,E);}throw new Error("Cannot generate TR resolution result");}
function f(T,s,y,E){var z,A;z="/gui/sap/its/webgui?%7etransaction="+T+"&%7enosplash=1";A=new U(z);return S.spliceSapSystemIntoURI(A,S.LOCAL_SYSTEM_ALIAS,s,y,"NATIVEWEBGUI",S.SYSTEM_ALIAS_SEMANTICS.apply,E);}
function h(Q,P,s,y){var I,z="P_OBJECT"+y,M=132;var A=a.getURLParsing().privparamsToString(P,"%25","%21");if(!A){return Q;}var B="";j("P_OBJECT",Q,s,y,function(E){var F=E.replace(z,"");B=decodeURIComponent(F);if(B.length>0){B=B+"%25";}return z;});A=B+A;var C={pObjX:"",pObject:""};A.match(new RegExp(".{1,"+M+"}","g")).map(function(E){return encodeURIComponent(E);}).forEach(function(E,G){var F="P_OBJECT";var H="pObject";if(G>0){F="P_OBJ"+G;H="pObjX";}var J=C[H].length===0?"":s;C[H]=C[H]+J+F+y+E;});I=[C.pObjX,C.pObject].filter(function(E){return E.length>0;}).join(s);var D=j("P_OBJECT",Q,s,y,function(F){return I;});if(D.found){return D.query;}return Q+(Q.length===0?"":s)+I;}
function j(T,Q,s,y,A){var F=false,P=T+y;var z=Q.split(s).map(function(B){if(B.indexOf(P)!==0){return B;}F=true;return A(B);}).filter(function(B){return typeof B!=="undefined";}).join(s);return{found:F,query:z};}
function k(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"NATIVEWEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();var F=P.split("&").map(function(Q){var G;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){G=h(Q,y,"%3b","%3d");return G;}return Q;}).join("&");W.search(F);["additionalInformation","applicationDependencies"].forEach(function(G){if(I.resolutionResult.hasOwnProperty(G)){R[G]=I.resolutionResult[G];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";C(R);});});}
function l(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,y=M.mappedIntentParamsPlusSimpleDefaults||{};var z=s.systemAlias;if(y["sap-system"]){z=y["sap-system"][0];}var A;if(y["sap-system-src"]){A=y["sap-system-src"][0];}return new Promise(function(R,C){f(I.resolutionResult["sap.gui"].transaction,z,A,E).done(function(D){p.mapParameterNamesAndRemoveObjects(M);var F=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,D);if(F&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){F["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}F["sap-system"]=z;R(F);}).fail(C);});}
function m(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();P=h(P,y,"&","=");W.search(P);["additionalInformation","applicationDependencies"].forEach(function(F){if(I.resolutionResult.hasOwnProperty(F)){R[F]=I.resolutionResult[F];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";C(R);});});}
function n(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}var C=g(y,I||{});r(y,C);return new Promise(function(D,F){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(F).done(function(W){var G=a.getURLParsing().paramsToString(y);var P=W.search();if(G){P=P+((P.indexOf("?")<0)?"?":"&")+G;}W.search(P);["additionalInformation","applicationDependencies"].forEach(function(H){if(I.resolutionResult.hasOwnProperty(H)){R[H]=I.resolutionResult[H];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";D(R);});});}
function o(M,B,E){var I=M.inbound,R=I&&I.resolutionResult,F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true,"sap-system-src":true};var W=new U(B);var s=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var y=s["sap-system"]&&s["sap-system"][0];var z=s["sap-system-src"]&&s["sap-system-src"][0];Object.keys(s).forEach(function(P){if(F[P.toLowerCase()]){delete s[P];}});return new Promise(function(A,C){S.spliceSapSystemIntoURI(W,R.systemAlias,y,z,"NATIVEWEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(C).done(function(W){var R=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,W);A(R);});});}
function t(I,M,W){var F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var R={};var E=q.extend(true,{},M);var s=E["sap-system"]&&E["sap-system"][0];var y=E["sap-system-src"]&&E["sap-system-src"][0];R["sap-system"]=s;if(typeof y==="string"){R["sap-system-src"]=y;}Object.keys(E).forEach(function(D){if(F[D.toLowerCase()]){delete E[D];}});var z=g(E,I||{});r(E,z);var A=u(E);r(E,Object.keys(A));var P=W.search();var B=P.split("&").map(function(Q){var N;if(!d(Q)){if(Q.indexOf("=")>=0){N=Q.split("=");if(!A.hasOwnProperty(N[0])){A[N[0]]=N[1];}}else{q.sap.log.error("Found no '=' separator of Webgui non-business parameter. Parameter will be skipped.","'"+Q+"'","sap.ushell.services.ClientSideTargetResolution");}return undefined;}var D;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){D=w(Q,E,"%3b","%3d");return D;}return Q;}).filter(function(D){return typeof D!=="undefined";}).join("&");var C=a.getURLParsing().paramsToString(A);B=[B,C.replace("~","%7e")].join("&");W.search(B);["additionalInformation","applicationDependencies","sap.platform.runtime"].forEach(function(D){if(I.resolutionResult.hasOwnProperty(D)){R[D]=I.resolutionResult[D];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";return R;}
function u(P){var N;N=c.filterObject(P,function(K,V){return!d(K,V);});return N;}
function v(T){var s="^(.+?)(%20|(%20)(.+))?$",y=new RegExp(s,"i"),z,P={hasParameters:null,transactionParamName:"",transactionCode:"",parameters:[]};var A=T.split("=");if(A.length>2){return{"error":"Found more than one assignment ('=') in the transaction query parameter","details":"Only one '=' sign is expected in "+T};}if(A.length<2||typeof A[1]==="undefined"||A[1].length===0){return{"error":"The transaction query parameter must specify at least the transaction name","details":"Got "+T+" instead."};}P.transactionParamName=A[0];z=A[1];var M=z.match(y);if(!M){return{"error":"Cannot parse ~transaction query parameter value.","details":z+" should match /"+s+"/"};}P.transactionCode=M[1];if(M[2]&&M[2]!=="%20"){var B=M[4]||"";B.split("%3b").forEach(function(N){var C=N.split("%3d"),D=C[0];if(D&&typeof D==="string"&&D.length>0){P.parameters.push({name:D,value:C[1]});}});}P.hasParameters=false;if(P.parameters.length>0){P.hasParameters=true;P.transactionCode=P.transactionCode.replace(/^[*]/,"");}return P;}
function w(T,P){var s=v(T);if(s.error){q.sap.log.error(s.error,s.details,"sap.ushell.services.ClientSideTargetResolution");return T;}var y=s.parameters.map(function(B){return B.name.toUpperCase()+"%3d"+B.value;});var z={};Object.keys(P).forEach(function(K){z[K.toUpperCase()]=P[K];});var A=a.getURLParsing().privparamsToString(z,"%3b","%3d");if(A){y.push(A);}var H=y.length>0;return s.transactionParamName+"="+(H?"*":"")+s.transactionCode+(H?"%20":"")+y.join("%3b");}
function x(I,M,E){return new Promise(function(R,s){var y;if(I.params["sap-system-src"]){y=I.params["sap-system-src"][0];}var z=I.params["sap-system"]?I.params["sap-system"][0]:undefined;var A=I.params["sap-ui2-tcode"]?I.params["sap-ui2-tcode"][0]:undefined;f(A,z,y,E).done(function(B){delete M.intentParamsPlusAllDefaults["sap-ui2-tcode"];p.mapParameterNamesAndRemoveObjects(M);var C=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,B);if(C&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){C["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}C["sap-system"]=z;C.text=A;R(C);}).fail(function(B){s(B);});});}
return{generateTRResolutionResult:e,resolveEasyAccessMenuIntentWebgui:x,injectEffectiveParametersIntoWebguiQueryParam:w,injectEffectiveParametersIntoWebguiPobjectParam:h,amendGuiParam:j,parseWebguiTransactionQueryParam:v,getWebguiNonBusinessParameters:u,getWebguiBusinessParameters:b,isWebguiBusinessParameter:d,buildNativeWebGuiURI:f,constructFullWebguiResolutionResult:l};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/systemAlias',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject"],function(U,u,q,i){"use strict";var S="";var O={apply:"apply",applied:"applied"};
function a(o){return(o.protocol()||"").length>0;}
function r(l,m,E){var n=typeof m==="string";var o=[l];if(n){o.unshift(m);}var K=u.generateLocalStorageKey("sap-system-data",o);var L=u.getLocalStorage();var p=L.getItem(K);var t={};if(p){try{t=JSON.parse(p);}catch(w){return new q.Deferred().reject("Cannot parse system data from local storage at key '"+K+"'. Data: "+p);}return new q.Deferred().resolve(t).promise();}else if(n){return new q.Deferred().reject("Cannot find data for system '"+l+"' in local storage using key '"+K+"'");}if(!E){return new q.Deferred().reject("fallback: the adapter does not implement resolveSystemAlias").promise();}return E(l);}
function b(l,m,o,n,E){var N=o,D=new q.Deferred();r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){var V=v(R);if(!V.isValid){h(V);D.reject("Invalid system alias definition");return D;}var p=g(R,new U(window.location.toString()).protocol()),t=R[p],Q,L,w;if(l===S&&t.host===""&&(t.port===0||t.port==="")){p="";}N.protocol(p);N.hostname(t.host);N.port(t.port);k(N,n,t.pathPrefix,E).fail(function(x){D.reject(x);}).done(function(N){Q=N.query();if(typeof R.client==="string"&&R.client!==""){Q=Q+(Q.length>0?"&":"")+"sap-client="+R.client;}if(typeof R.language==="string"&&R.language!==""){L=R.language;}else{w=sap.ushell.Container.getUser();if(!w){q.sap.log.error("Cannot retieve the User object via sap.ushell.Container while determining sap-language","will default to 'en' language","sap.ushell.services.ClientSideTargetResolution");L="en";}else{L=w.getLanguage();}}Q=Q+(Q.length>0?"&":"")+"sap-language="+L;N.query(Q);if(R.hasOwnProperty("rfc")&&n==="NATIVEWEBGUI"){var W=d(R.rfc,t.host,N);var P=N.path()+";"+W;N.path(P);o._parts.path=P;}D.resolve(N);});});return D.promise();}
function s(o,l,m,n,p,t,E){var D=new q.Deferred();if(t!==O.apply&&t!==O.applied){throw new Error("Invalid system alias semantic was provided: '"+t+"'");}if(t===O.applied&&((typeof m==="undefined"||l===m))){return D.resolve(o).promise();}if(t===O.apply&&typeof l==="undefined"&&typeof m==="undefined"){return D.resolve(o).promise();}if(p==="URL"&&t==O.applied){return c(o,l,m,n,E);}(new Promise(function(R){if(t===O.apply){R({targetUri:o,alias:m||l,sapSystemSrc:m?n:undefined});return;}e(o,l,undefined,p,E).fail(function(w){D.reject(w);}).done(function(w){R({targetUri:w,alias:m});});})).then(function(A){b(A.alias,A.sapSystemSrc,A.targetUri,p,E).fail(function(w){D.reject(w);}).done(function(I){D.resolve(I);});});return D.promise();}
function c(o,l,m,n,E){var D=new q.Deferred();if(l===S||typeof l==="undefined"){if(a(o)){return D.resolve(o);}b(m,n,o,"URL",E).fail(function(p){D.reject(p);}).done(function(p){D.resolve(p);});return D.promise();}r(l,n,E).fail(function(p){D.reject(p);}).done(function(R){var p=g(R,new U(window.location.toString()).protocol()),t=R[p],w;if((o.protocol()||"").toLowerCase()===p&&(o.hostname()||"")===t.host&&(o.path().indexOf(t.pathPrefix)===0)){o.protocol("");o.hostname("");w=o.path().replace(t.pathPrefix,"");o.path(w);j(o,["sap-language","sap-client"]);b(m,n,o,"URL",E).fail(function(x){D.reject(x);}).done(function(x){D.resolve(x);});}else{D.resolve(o);}});return D.promise();}
function d(l,m){var R,n,I,t,p;I=!!l.systemId;if(I){t=[l.systemId&&("~sysid="+l.systemId),l.loginGroup&&("~loginGroup="+l.loginGroup),l.sncNameR3&&("~messageServer="+encodeURIComponent(l.sncNameR3)),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}else{p=(l.host||"");n=p.toLowerCase()===m.toLowerCase();R=/^[/][HGMR][/].*/.test(p);if(p.length>0&&!n&&!R){q.sap.log.error("Invalid connect string provided in 'host' field of system alias","Data for rfc destination provided are: "+JSON.stringify(l,null,3),"sap.ushell.services.ClientSideTargetResolution");}t=[p&&!R&&!n&&("~rfcHostName="+p),R&&("~connectString="+encodeURIComponent(p)),l.service&&("~service="+l.service),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}return t.join(";").replace(/(%[A-F0-9]{2})/g,function(E){return E.toLowerCase();});}
function e(o,l,m,n,E){var D=new q.Deferred();if(typeof l==="undefined"){f(o,l,n,undefined,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});return D.promise();}r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){f(o,l,n,R,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});});return D.promise();}
function f(o,l,m,R,E){var n,p,t,w,D=new q.Deferred(),P=new q.Deferred();o.protocol("");o.hostname("");o.port("");j(o,["sap-client","sap-language"]);if(!i(R)||typeof l!=="string"){return D.resolve(o).promise();}p=g(R,new U(window.location.toString()).protocol());n=R[p];w=(typeof n.pathPrefix==="string")&&n.pathPrefix;if(w!==""){P.resolve(w);}else{r("",undefined,E).fail(function(x){D.reject(x);}).done(function(x){var y=x[p];P.resolve(y.pathPrefix);});}P.fail(function(x){D.reject(x);}).done(function(w){if(w&&w.length>0){t=o.path();t=t.replace(w,"");if(t.indexOf("/")!==0){t="/"+t;}o.path(t);}if(m==="NATIVEWEBGUI"&&R.hasOwnProperty("rfc")){t=o.path();t=t.split(";").filter(function(x){return x.indexOf("~sysid=")!==0&&x.indexOf("~service=")!==0&&x.indexOf("~loginGroup=")!==0&&x.indexOf("~messageServer=")!==0&&x.indexOf("~sncNameR3=")!==0&&x.indexOf("~sncQoPR3=")!==0;}).join(";");o.path(t);}D.resolve(o);});return D.promise();}
function g(o,B){if(o.hasOwnProperty("https")){return"https";}if(o.hasOwnProperty("http")){return"http";}q.sap.log.error("Cannot select which system alias to pick between http/https","make sure they are provided in the given system alias collection","sap.ushell.services.ClientSideTargetResolution");return undefined;}
function h(V){q.sap.log.error("Invalid system alias definition: "+V.debug,"ERRORS:"+V.errors.map(function(E){return"\n - "+E;}).join(""),"sap.ushell.ApplicationType");}
function v(R){function l(F){var E=[];if(typeof F.host!=="string"){E.push("host field must be a string");}if(typeof F.port!=="number"&&typeof F.port!=="string"){E.push("port field must be a number or a string");}if(typeof F.pathPrefix!=="string"){E.push("pathPrefix field must be a string");}return E;}var E=[],H=R.hasOwnProperty("https"),m=R.hasOwnProperty("http");if(!m&&!H){E.push("at least one of 'http' or 'https' fields must be defined");}if(H){l(R.https).forEach(function(n){E.push("https>"+n);});}if(m){l(R.http).forEach(function(n){E.push("http>"+n);});}if(E.length>0){return{isValid:false,errors:E,debug:JSON.stringify(R,null,3)};}return{isValid:true};}
function j(o,p){var B={},t;p.forEach(function(P){B[P]=true;});t=o.query();t=t.split("&").filter(function(P){var l=(P.split("=")[0]||"").toLowerCase();return!B.hasOwnProperty(l);}).join("&");o.query(t);}
function k(o,l,p,E){var D=new q.Deferred(),t;if(l==="URL"&&p.length===0){return D.resolve(o).promise();}function m(P){var R=P+o.path();o.path(R.replace(/\/+/g,"/"));D.resolve(o);}r("",undefined,E).fail(function(n){D.reject(n);}).done(function(R){var n=g(R,new U(window.location.toString()).protocol());var L=R[n].pathPrefix;var P=p===L;if(p.length>0&&!P){if((l==="WDA"||l==="WEBGUI")&&o.path().indexOf("~canvas")>=0){t=o.path();t="/~canvas"+t.split("~canvas")[1];o.path(t);}}if(p.length===0){m(L);}else{m(p);}});return D.promise();}
return{LOCAL_SYSTEM_ALIAS:S,SYSTEM_ALIAS_SEMANTICS:O,spliceSapSystemIntoURI:s,isAbsoluteURI:a,stripURI:e,selectSystemAliasDataName:g,constructNativeWebguiParameters:d};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/utils',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ushell/_ApplicationType/systemAlias"],function(U,u,s){"use strict";var a;
function g(){if(!a){a=sap.ushell.Container.getService("URLParsing");}return a;}
function b(o,S,e){if(!e||e===s.SYSTEM_ALIAS_SEMANTICS.applied){return s.isAbsoluteURI(o)&&!S;}if(e===s.SYSTEM_ALIAS_SEMANTICS.apply){return s.isAbsoluteURI(o);}throw new Error("Invalid system alias semantics: '"+e+"'");}
function c(p,e){var S,f;if(p){var h=e.match(/#.*/);if(h){f=h;S=e.replace(h,"");}else{S=e;f="";}e=S+((e.indexOf("?")<0)?"?":"&")+p+f;}return e;}
function d(p,e){var a=g();var f=e.match(/#.*/);var h=f&&f[0];if(!h){var P=a.paramsToString(p);return c(P,e);}var i=a.parseShellHash(h);Object.keys(p).forEach(function(m){var n=p[m];i.params[m]=[n];});var j=Object.keys(i.params).reduce(function(o,K){var v=i.params[K];var V=v.map(function(m){return encodeURIComponent(m);});o[encodeURIComponent(K)]=V;return o;},{});i.params=j;var k=e.replace(h,"");var l=a.constructShellHash(i);return k+"#"+l;}
return{getURLParsing:g,appendParametersToUrl:c,appendParametersToIntentURL:d,absoluteUrlDefinedByUser:b};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/wdaResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(U,a,s,q,O){"use strict";
function c(p,m){return new Promise(function(R,j){var E=q.extend(true,{},p);if(m.length>0){E["sap-ushell-defaultedParameterNames"]=[JSON.stringify(m)];}delete E["sap-system"];sap.ushell.Container.getService("ShellNavigation").compactParams(E,["sap-xapp-state","sap-ushell-defaultedParameterNames","sap-intent-params"],undefined,true).fail(function(k){j(k);}).done(function(o){var k=a.getURLParsing().paramsToString(o);R(k);});});}
function b(u,j){var p=u.search();if(j){p=p+((p.indexOf("?")<0)?"?":"&")+j;}return u.search(p).toString();}
function d(A,C,I,o,E){var S,j,u,k,l,m=q.extend(true,{},o);if(C){m["sap-wd-configId"]=C;}if(m["sap-system"]){S=m["sap-system"][0];delete m["sap-system"];}if(m.hasOwnProperty("sap-system-src")){j=m["sap-system-src"][0];delete m["sap-system-src"];}l=a.getURLParsing().paramsToString(m);if(I){u=e(A,l);}else{u=f(A,l);}k=new U(u);return s.spliceSapSystemIntoURI(k,s.LOCAL_SYSTEM_ALIAS,S,j,"WDA",s.SYSTEM_ALIAS_SEMANTICS.apply,E);}
function e(A,u){return"/ui2/nwbc/~canvas;window=app/wda/"+A+"/"+"?"+u;}
function f(n,u){var N=n.indexOf("/")!==0;if(N){n="sap/"+n;}return"/webdynpro/"+n+"?"+u;}
function g(I,F,S,j){var R={"sap-system":S,url:F,text:I.title,applicationType:"NWBC"};if(typeof j==="string"){R["sap-system-src"]=j;}["additionalInformation","applicationDependencies"].forEach(function(p){if(I.resolutionResult.hasOwnProperty(p)){R[p]=I.resolutionResult[p];}});return R;}
function h(m,B,E){var I=O.get("inbound.resolutionResult",m),M=m.mappedIntentParamsPlusSimpleDefaults||{};var S=I.systemAlias;if(M["sap-system"]){S=M["sap-system"][0];}var j;if(M["sap-system-src"]){j=M["sap-system-src"][0];}var o={"sap-system":[S]};if(typeof j==="string"){o["sap-system-src"]=[j];}var C=I["sap.wda"].compatibilityMode;if(C===undefined){C=true;}return new Promise(function(R,k){d(I["sap.wda"].applicationId,I["sap.wda"].configId,C,o,E).done(function(w){var M=m.mappedIntentParamsPlusSimpleDefaults;c(M,m.mappedDefaultedParamNames).then(function(u){var F=b(w,u);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];var l=g(m.inbound,F,S,j);R(l);},function(l){k(l);});}).fail(function(l){k(l);});});}
function i(m,B,E){var I=m.inbound,o=I&&I.resolutionResult,M=m.mappedIntentParamsPlusSimpleDefaults;var w=new U(B);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];return Promise.all([(new Promise(function(D,R){s.spliceSapSystemIntoURI(w,o.systemAlias,S,j,"WDA",o.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(R).done(D);})),c(M,m.mappedDefaultedParamNames)]).then(function(R){var W=R[0];var u=R[1];var F=b(W,u);var k=g(I,F,S,j);return k;},function(k){return Promise.reject(k);});}
function r(I,m,E){var C,A,o,j=true;A=I.params["sap-ui2-wd-app-id"][0];C=(O.get("params.sap-ui2-wd-conf-id",I)||[])[0];o=Object.keys(I.params).reduce(function(R,p){if(p!=="sap-ui2-wd-app-id"&&p!=="sap-ui2-wd-conf-id"){R[p]=I.params[p];}return R;},{});return new Promise(function(R,k){d(A,C,j,o,E).done(function(u){var S=I.params.hasOwnProperty("sap-system-src")&&I.params["sap-system-src"][0];var l=I.params.hasOwnProperty("sap-system")&&I.params["sap-system"][0];var n={url:u.toString(),applicationType:"NWBC",text:A,additionalInformation:"","sap-system":l};if(typeof S==="string"){n["sap-system-src"]=S;}if(m&&m.inbound&&m.inbound.resolutionResult&&m.inbound.resolutionResult["sap.platform.runtime"]){n["sap.platform.runtime"]=m.inbound.resolutionResult["sap.platform.runtime"];}R(n);}).fail(function(l){k(l);});});}
return{resolveEasyAccessMenuIntentWDA:r,constructFullWDAResolutionResult:h,constructWDAResolutionResult:i};},false);
sap.ui.predefine('sap/ushell/_Config/utils',[],function(){"use strict";
function i(p,C){var e=[];var n=[];var o=C;var f=false;var P=p.split("/");P.shift();P.forEach(function(g){if(!f&&o.hasOwnProperty(g)){o=o[g];e.push(g);return;}f=true;n.push(g);});return{contractPart:"/"+e.join("/"),nonContractPart:n};}
function a(v){return v&&v.isA&&v.isA("sap.ui.model.Context");}
function w(C,p,o,v){var D=o;p.forEach(function(P,I){if(I===p.length-1){D[P]=v;return;}if(!D.hasOwnProperty(P)){throw new Error("Cannot find "+P+" inside "+C);}D=D[P];});}
function c(p){var P=function(e){return p+e;};if(typeof p==="object"){var S="/";P=function(e){var f=e.split(S);f.shift();var F=f.shift();return p[F]+(f.length>0?S+f.join(S):"");};}return P;}
function b(p,m,P){var f=c(P);var F=f(p);if(a(m)&&p.charAt(0)!=="/"){var r=m.getPath()+"/"+p;F=f(r);}return F;}
function s(f,C,m,p){m.setData=function(P,D){throw new Error("not yet implemented");};m.setProperty=function(P,D,M){var F=b(P,M,p);var I=i(F,C);if(I.nonContractPart.length===0){f.emit(I.contractPart,D);return;}var B=f.last(I.contractPart);w(I.contractPart,I.nonContractPart,B,D);f.emit(I.contractPart,B);};return m;}
function d(f,C,p,e){var m,S,g,P;if(typeof p==="string"){var h=p;P=h;var I=f.last(h);if(Object.prototype.toString.apply(I)!=="[object Object]"){throw new Error("Cannot bind on leaf property of Configuration: '"+h+"'");}m=new e(I);g=m.setData.bind(m);f.on(h).do(function(v){g(v);});return s(f,C,m,P);}if(Object.prototype.toString.apply(p)==="[object Object]"){var D=p;var M=Object.keys(D).reduce(function(M,k){var j=D[k];M[k]=f.last(j);f.on(j).do(function(k,v){S("/"+k,v);}.bind(null,k));return M;},{});m=new e(M);S=m.setProperty.bind(m);return s(f,C,m,D);}throw new Error("Invalid parameter provided to createModel. Must be an object or a string.");}
return{createModel:d};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/DependencyGraph',["sap/ushell/utils/clone"],function(c){"use strict";
function i(n){return typeof n==="string"||n.type==="wildcard"||n.type==="literal"||n.type==="intentParameter"||n.type==="reference";}
function a(n){return n.type==="reference"&&!n.namespace;}
function b(G,p,n){if(!G.hasOwnProperty(p)){G[p]=[];}if(a(n)){G[p].push(n.value);}}
function d(p){var D={};var A=b.bind(null,D);Object.keys(p).forEach(function(P){var n=p[P];v(n,P,A);});return D;}
function e(n){var N=n.type;if(N==="expression"){return[n.value];}if(N==="function"){return(n.args||[]).concat(n.params||[]);}if(N==="pipe"||N==="path"){return n.value;}throw new Error("Unknown type encountered while building dependency graph: '"+N+"'");}
function v(n,p,A){A(p,n);if(i(n)){return;}var N=e(n);N.forEach(function(n){v(n,p,A);});}
function g(D){var o=c(D);var n,N,r=[],R={};do{var f=Object.keys(o);n=f.length;f.forEach(function(s){if(o[s].length>0){o[s]=o[s].filter(function(h){var w=!R[h];var m=o.hasOwnProperty(h);return w&&m;});}if(o[s].length===0){delete o[s];r.push(s);R[s]=true;}});N=Object.keys(o).length;}while(n!==N);if(N!==0){throw new Error("Graph of dependencies contains cyclic references");}return r;}
return{buildDependencyGraph:d,getDependencyResolutionOrder:g};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Functions',["sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils","sap/ui/thirdparty/URI"],function(t,c,u,U){"use strict";var O={url:{args:["urlPart?"],minValues:0,maxValues:0,fn:function(A){var o=new U();var k=["protocol","scheme","username","password","hostname","port","host","userinfo","authority","origin","subdomain","domain","tld","pathname","path","directory","filename","suffix","search","query","hash","fragment","resource"];var m="toString";if(A.urlPart){if(k.indexOf(A.urlPart)===-1){throw new Error("The URL part '"+A.urlPart+"' is not valid. Please use one of "+k.join(", "));}m=A.urlPart;}return o[m]();}},if:{args:["trueCondition"],minValues:1,maxValues:2,fn:function(A,v){var V=g(v);if(i(A.trueCondition)){return V.length===1?undefined:V.pop();}return V[0];}},and:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}var l=V.pop();var k=V.every(u.hasValue);return k?l:undefined;}},or:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}return V.reduce(function(P,n){if(u.hasValue(P)){return P;}return u.hasValue(n)?n:undefined;});}},join:{args:["macroSeparator?","microSeparator?"],minValues:1,fnPipe:function(A,v){var V=[v];return O.join.fn.call(this,A,V);},fn:function(A,v){var m=A.macroSeparator||"";var M=A.microSeparator||"";v=v.map(function(s){if(!t.isPlainObject(s)&&!t.isArray(s)){return s;}var T=Object.prototype.toString.apply(s);if(T==="[object Object]"){var S=u.removeArrayParameterNotation(s);return Object.keys(S).sort().map(function(k){return k+M+s[k];}).join(m);}if(T==="[object Array]"){return s.join(m);}});return v.join(m);}},match:{args:["strRegex"],minValues:1,fnPipe:function(A,v){var s=A.strRegex;var k=new RegExp(s);return Object.keys(v).reduce(function(o,n){if(k.exec(n)){o[n]=v[n];}return o;},{});},fn:function(A,v){if(v===undefined){return undefined;}var s=A.strRegex;var k=new RegExp(s);var m=v.filter(function(V){var I;if(t.isPlainObject(V)){I=Object.keys(V);}else if(t.isArray(V)){I=V;}else{I=[""+V];}return I.some(k.exec.bind(k));});return m.length===v.length?true:undefined;}},not:{args:[],minValues:1,fnPipe:function(A,v){return Object.keys(v).length>0?undefined:"";},fn:function(A,v){var E=O.and.fn(A,v);return E===undefined?"":undefined;}},encodeURIComponent:{args:[],minValues:1,maxValues:1,fnPipe:function(A,v){return Object.keys(v).reduce(function(o,k){o[k]=encodeURIComponent(v[k]);return o;},{});},fn:function(A,v){var T=v.map(function(V){return encodeURIComponent(V);});return T;}}};
function i(v){if(typeof v==="undefined"){return true;}if(typeof v==="string"){return v==="";}if(typeof v==="object"){return Object.keys(v).length===0;}if(typeof v==="number"){return v===0;}if(typeof v==="boolean"){return v===false;}throw new Error("Unexpected type for value");}
function g(v){var V;if(t.isArray(v)){V=v;}else if(t.isPlainObject(v)){V=[v];}else if(v===undefined){return[];}else{throw new Error("Unexpected type");}return V;}
function a(F,o,v){if(v!==undefined&&!t.isPlainObject(v)){throw new Error("Invalid value type passed to '"+F+"' in pipe context. An object is expected.");}}
function b(F,o,v){if(v!==undefined&&!t.isArray(v)){throw new Error("Invalid value type passed to '"+F+"' in value context. An array is expected.");}var n=t.isArray(v)?v.length:0;if(u.hasValue(o.maxValues)&&n>o.maxValues){throw new Error("Too many values were passed to '"+F+"'. Please pass maximum "+o.maxValues+" values.");}if(u.hasValue(o.minValues)&&n<o.minValues){throw new Error("Too few values were passed to '"+F+"'. Please pass minimum "+o.minValues+" values.");}}
function d(A){var E=false;A.map(e).reduce(function(R,n){if(!R&&n){E=true;}return n;},true);return E;}
function e(A){return A.charAt(A.length-1)!=="?";}
function r(A){return A.substr(0,A.length-1);}
function p(F,A){var k=c(O[F].args);if(d(k)){throw new Error("Invalid argument signature. Make sure all optional arguments appear in the end.");}var o={length:A.length};var R=k.filter(e);var m=R>A.length;if(m){throw new Error(F+" requires "+R+" arguments but "+A.length+" was specified");}A.forEach(function(v){var n=k.shift();var I=!e(n);if(I){n=r(n);}if(A.length>0){o[n]=v;}});return o;}
function f(P,F,k,I){if(!O.hasOwnProperty(F)){throw"Invalid function: "+F;}var o=p(F,k);if(P){a(F,O[F],I);}else{b(F,O[F],I);}if(P){if(!O[F].fnPipe){throw new Error("The function '"+F+"' cannot be executed in pipe context");}return O[F].fnPipe(o,I);}return O[F].fn(o,I);}
function h(s){return s.split("").map(function(k){if(k==="["){return"[\\[]";}return"["+k+"]";}).join("");}
function j(){var A=Object.keys(O);return A.map(h).join("|");}
return{getPossibleFunctionsRegExpString:j,applyFunctionInValueContext:f.bind(null,false),applyFunctionInPipeContext:f.bind(null,true),_setURIDependency:function(F){U=F;}};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Resolvers',["sap/ushell/_URLTemplateProcessor/Functions","sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils"],function(f,t,c,u){"use strict";var O={"literal":r,"expression":g,"reference":h,"function":e,"path":b,"pipe":d};
function a(s,p,k){var C=null;var P=[];var F=false;var l=p.join("/");C=s;if(typeof C==="undefined"){F=true;}p.forEach(function(m,I){if(F){return;}P.push(m);if(!C.hasOwnProperty(m)){C=undefined;F=true;return;}if(!C.hasOwnProperty(m)){throw new Error("Cannot find path '"+l+"' in given structure: '"+m+"' seems to be missing in the object.");}C=C[m];});return C;}
function r(p){return p.value;}
function b(p,R,s,A,o,D){var k=p.value.map(function(P){return i(P,R,s,A,o,D);});var I=p.pathType==="relative";var l=I?A:s;return a(l,k,R);}
function d(p,R,s,A,o,D){var P=p.value;if(P[0].type!=="wildcard"){throw new Error("Leading wildcard expected in pipe expression");}if(P[0].value!=="*"){throw new Error("Unsupported wildcard expression: "+P[0].value);}return P.slice(1).reduce(function(v,k){if(k.type!=="function"){throw new Error("Invalid operation specified in pipe expression");}return f.applyFunctionInPipeContext(k.name,k.args.map(function(l){return i(l,R,s,A,o,D);}),v);},c(o[D]||{}));}
function e(p,R,s,A,o,D){var F=p.name;var k=p.args.map(function(P){return i(P,R,s,A,o,D);});var v=p.params.map(function(P){return i(P,R,s,A,o,D);});return f.applyFunctionInValueContext(F,k,v);}
function g(p,R,s,A,o,D){var E=p.value;if(O[E.type]){return i(E,R,s,A,o,D);}throw new Error("unknown expression type: "+E.type);}
function h(p,R,s,A,o,D){var v=p.value;if(!p.hasOwnProperty("namespace")){return R[v];}var n=p.namespace;var E="The template attemps to take the value '"+v+"' from '"+n+"' namespace.";if(!o.hasOwnProperty(n)){throw new Error(E+" However this value was not defined at runtime. The template should reference only defined values.");}var N=o[n];var k=v===".";if(k){return N;}if(typeof N!=="object"){throw new Error(E+" However the runtime did not define the namespace as an object. The template cannot access the desired value using the object notation in this case.");}return N[v];}
function i(p,R,s,A,o,D){var P=p.type;if(O[P]){return O[P](p,R,s,A,o,D);}throw new Error("Cannot resolve unknown parameter type: '"+P+"'");}
function j(p,R,s,o,A,D){var k={};R.forEach(function(P){var l=p[P];var m=i(l,k,s,A,o,D);k[P]=m;});return k;}
return{resolveLiteral:r,resolveExpression:g,resolveReference:h,resolveFunction:e,resolvePath:b,resolvePipe:d,resolveParameterValue:i,resolveAllParameters:j};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/TemplateParameterParser',["sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/Functions"],function(c,f){"use strict";
function p(D,E){var s=m();var v=s.exec(E);if(v===null){throw new Error("Cannot parse expression: '"+E+"'");}var S=r(E);if(S.indexOf("*")===0){return a(D,S);}var A="^("+f.getPossibleFunctionsRegExpString()+")[^a-z]";var w=new RegExp(A);if(w.exec(S)){return i(D,S);}return e(D,S);}
function a(D,P){var s=j(D,P,"|");var w=s.shift();return{type:"pipe",value:[{type:"wildcard",value:w}].concat(s.map(i.bind(null,D)))};}
function b(R){var s=R.substr(1);var N;if(s.indexOf(":")>=0){var v=s.split(":");N=v[0];s=v[1];}var w={type:"reference",value:s};if(N){w.namespace=N;}return w;}
function d(D,P){var s=P.split("/");var v="relative";if(s[0]===""){v="absolute";s.shift();}if(s[0]==="."){s.shift();}return{type:"path",pathType:v,value:s.map(g.bind(null,D))};}
function e(D,L){if(L.charAt(0)==="{"&&L.charAt(L.length-1)==="}"){return e(D,r(L));}if(L.indexOf(".")===0||L.indexOf("/")===0){return d(D,L);}if(L.charAt(0)==="'"&&L.charAt(L.length-1)==="'"){return h(r(L));}if(L.charAt(0)==="&"){return b(L);}return{type:"reference",value:L,namespace:D};}
function g(D,P){if(P.charAt(0)==="{"&&P.charAt(P.length-1)==="}"){return e(D,r(P));}return{type:"literal",value:P};}
function h(L){return{type:"literal",value:L};}
function i(D,F){var v=F.split(/[(\s]/)[0];var R=o(F,v);R=R.replace(/^\s+/,"");var w="";if(R.charAt(0)==="("){var x=R.search(/([)]\s)|([)]$)/);if(x===-1){throw new Error("Cannot find termination of function '"+R+"' in '"+F+"'");}w=R.substr(1,x-1);R=o(R,"("+w+")");R=R.replace(/^\s+/,"");}var y=R;return{type:"function",name:v,args:j(D,w,",").map(function(s){return s.charAt(0)==="{"?r(s):"'"+s+"'";}).map(e.bind(null,D)),params:j(D,y,",").map(e.bind(null,D))};}
function j(D,L,s){if(!L){return[];}var S=L.split(s).reduce(function(A,N,I){if(I===0){A.push(N);return A;}var v=A.length-1;var P=A[v];var M=P.length>0&&P.charAt(P.length-1)==="\\";var w="";if(M){w=A.pop();w=w.substr(0,w.length-1)+s;}A.push(w+N);return A;},[]);return S;}
function k(D,P){var s=P;var R=null;if(Object.prototype.toString.apply(P)==="[object Object]"){s=P.value;R=P.renameTo;}var I=q(s);if(I){return h(s);}var T="expression";var v=p(D,s);var w={type:T,value:v};if(R){v.renameTo=R;}return w;}
function l(s){var E=s.indexOf("{")===0;var v=m();var G=v.exec(s);if(!G){if(E){throw new Error("Expression was expected. But "+s+" does not look like a valid expression");}return null;}return G[1];}
function m(){var O="[a-zA-Z0-9]+?:";var v="((&("+O+")?)?[.a-zA-Z0-9_-]+?)";var Q="('(.*?)')";var U="([^' ]*?)";var V="{("+v+")}";var P="("+"[.]?([/]("+v+"|"+V+"))+"+")";var L="("+P+"|"+Q+"|"+v+"|"+V+")";var s="("+L+"(,"+L+")*)";var F="("+U+"|"+V+")";var w="("+F+"(,"+F+")*)";var x="("+"[(]"+w+"[)]"+")?";var A=f.getPossibleFunctionsRegExpString();var y="("+"("+A+")"+"("+x+")"+")";var W="([*]([|]"+y+")*)";var E="^{("+W+"|"+"(("+y+")([ ]("+s+"))?)"+"|"+"("+L+")"+")}$";var z=new RegExp(E);return z;}
function n(s){return l(s)!==null;}
function r(s){var C=s.split("");C.shift();C.pop();return C.join("");}
function o(T,P){if(T.indexOf(P)===0){return T.substr(P.length);}throw new Error("Given string does not start with prefix '"+P+"'");}
function q(s){return typeof s==="string"&&!n(s);}
function t(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=k(D,v);return s;},{});}
function u(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=h(v);return s;},{});}
return{parseTemplateParameterSet:t,parseTemplateParameterSetAsLiterals:u,parsePath:d,_isExpression:n,_parseList:j,_parseParameterValue:k};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/utils',["sap/ushell/utils/type"],function(t){"use strict";
function h(v){return v!==null&&typeof v!=="undefined";}
function r(p){return Object.keys(p).reduce(function(o,P){var v=p[P];if(Object.prototype.toString.apply(v)==="[object Array]"){o[P]=v[0];}else if(typeof v==="string"){o[P]=v;}else{throw new Error("Parameters should be passed as strings or array of strings");}return o;},{});}
return{hasValue:h,removeArrayParameterNotation:r};},false);
sap.ui.predefine('sap/ushell/adapters/AppVariantPersonalizationAdapter',["sap/ushell/services/_Personalization/constants","sap/ui/fl/apply/api/UI2PersonalizationApplyAPI","sap/base/Log"],function(c,U,L){"use strict";
function r(C){var s="sap.ushell.personalization#";if(C.substring(0,s.length)!==s){L.error("Unexpected ContainerKey "+C);return C;}return C.substring(s.length,s.length+40);}
A.prototype._determineCategory=function(s){if(!s){return"U";}if(s.keyCategory&&s.keyCategory===c.keyCategory.FIXED_KEY&&s.writeFrequency&&s.writeFrequency===c.writeFrequency.LOW&&s.clientStorageAllowed&&s.clientStorageAllowed===true){return"P";}return"U";};
A.prototype.getMap=function(){return{category:this._category,service:this._oService,changedKeys:this._oChangedKeys,component:this._oComponent,deletedKeys:this._oDeletedKeys,container:this._aJSONContainer,scope:this._oScope,appName:this._sAppName,appVarId:this._sAppVarId,appVersion:this._sAppVersion,containerKey:this._sContainerKey};};
function A(C,s,S,b){this._oService=s;this._oScope=S;this._sAppVarId=S.appVarId;this._sAppVersion=S.appVersion;this._oComponent=S.component;this._sContainerKey=r(C);this._sAppName=b||"";this._category=this._determineCategory(S);this._aJSONContainer=[];this._oChangedKeys={};this._oDeletedKeys={};}
A.prototype._reset=function(){this._aJSONContainer=[];};
A.prototype.load=function(){return U.load({selector:{appId:this._sAppVarId,appVersion:this._sAppVersion},containerKey:this._sContainerKey}).then(function(C){this._aJSONContainer=C||[];return C;}.bind(this)).catch(function(e){L.warning(e);this._reset();return Promise.reject(e);}.bind(this));};
A.prototype.save=function(){return new Promise(function(b,d){sap.ui.require(["sap/ui/fl/write/api/UI2PersonalizationWriteAPI"],function(e){var p=[];Object.keys(this._oChangedKeys).forEach(function(i){var I=this._oChangedKeys[i];var P=Object.assign({selector:{appId:I.reference}},I);p.push(e.create(P));},this);Object.keys(this._oDeletedKeys).forEach(function(i){p.push(e.deletePersonalization({selector:{appId:this._sAppVarId},containerKey:this._sContainerKey,itemName:i}));},this);Promise.all(p).then(function(R){this._oChangedKeys={};this._oDeletedKeys={};b();}.bind(this),function(E){d(E);});}.bind(this));}.bind(this));};
A.prototype.del=function(){return new Promise(function(b,d){sap.ui.require(["sap/ui/fl/write/api/UI2PersonalizationWriteAPI"],function(e){this.load().then(function(){var p=[];this._aJSONContainer.forEach(function(i){p.push(e.deletePersonalization({selector:{appId:this._sAppVarId},containerKey:this._sContainerKey,itemName:i.itemName}));},this);Promise.all(p).then(function(R){b();},function(E){d(E);});}.bind(this));}.bind(this));}.bind(this));};
A.prototype.getItemKeys=function(){var b=[];this._aJSONContainer.forEach(function(m){if(m.category==="V"){b.push("VARIANTSET#"+m.itemName);}else if(m.category==="I"){b.push("ITEM#"+m.itemName);}});return b;};
A.prototype.containsItem=function(i){return this.getItemKeys().indexOf(i)>=0;};
A.prototype._findItemIndex=function(I,C){var i;for(i=0;i<this._aJSONContainer.length;i=i+1){if(this._aJSONContainer[i].itemName===I&&this._aJSONContainer[i].category===C){return i;}}return undefined;};
A.prototype._locateItem=function(i){var b={index:-1};if(i.indexOf("ITEM#")===0){b.trueItemKey=i.substring("ITEM#".length,"ITEM#".length+40);b.category="I";}else if(i.indexOf("VARIANTSET#")===0){b.trueItemKey=i.substring("VARIANTSET#".length,"VARIANTSET#".length+40);b.category="V";}else if(i.indexOf("ADMIN#")!==0){L.error("Unknown itemkey prefix"+i);}b.index=this._findItemIndex(b.trueItemKey,b.category);return b;};
A.prototype.getItemValue=function(i){var I="",o,b=this._locateItem(i);if(b.index>=0){I=this._aJSONContainer[b.index].content;o=I;}return o;};
A.prototype.setItemValue=function(i,I){var o=this._locateItem(i);var b;if(o.index>=0){b=this._aJSONContainer[o.index];b.content=I;}else{b={"reference":this._sAppVarId,"content":I,"itemName":o.trueItemKey,"category":o.category,"containerKey":this._sContainerKey,"containerCategory":this._category};this._aJSONContainer.push(b);}this._oChangedKeys[o.trueItemKey]=b;delete this._oDeletedKeys[o.trueItemKey];};
A.prototype.delItem=function(i){var I=this._locateItem(i);if(I.index>=0){this._aJSONContainer.splice(I.index,1);this._oDeletedKeys[I.trueItemKey]=true;return;}};
var a=function(){};
a.prototype.getAdapterContainer=function(C,s,b){return new A(C,this,s,b);};
a.prototype.delAdapterContainer=function(C,s){return this.getAdapterContainer(C,s).del();};
return a;});
sap.ui.predefine('sap/ushell/adapters/cdm/ClientSideTargetResolutionAdapter',["sap/base/util/Version","sap/ui/thirdparty/jquery"],function(V,q){"use strict";var C=function(s,p,a){this._oAdapterConfig=a&&a.config;this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",client:"",language:""};this.getInbounds=function(){var t=this;if(!this._getInboundsDeferred){this._getInboundsDeferred=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(S){return S.getSite();}).then(function(S){var u=(S._version&&V(S._version).getMajor()===3)?"sap/ushell/adapters/cdm/v3/utilsCdm":"sap/ushell/utils/utilsCdm";sap.ui.require([u],function(U){var i=U.formatSite(S)||[];t._getInboundsDeferred.resolve(i);});},function(e){t._getInboundsDeferred.reject(e);});}return this._getInboundsDeferred.promise();};this._createSIDMap=function(A){return Object.keys(A).sort().reduce(function(S,i){var c=A[i];var b="SID("+c.systemId+"."+c.client+")";if(!S.hasOwnProperty(b)&&c.hasOwnProperty("systemId")&&c.hasOwnProperty("client")){S[b]=i;}return S;},{});};this._getSystemAliases=function(){var t=this;if(!this.Deferred){this.Deferred=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(S){return S.getSite();}).then(function(S){var o=q.extend(true,{},S.systemAliases||{});Object.keys(o).forEach(function(i){o[i].id=i;});t.Deferred.resolve(o);},function(e){t.Deferred.reject(e);});}return this.Deferred.promise();};this.resolveSystemAlias=function(S){var d=new q.Deferred(),t=this;this._getSystemAliases().done(function(o){var m;if(o.hasOwnProperty(S)){d.resolve(o[S]);return;}if(S===""){d.resolve(t._oLocalSystemAlias);return;}S=S.toUpperCase(S);if(!t._oSIDMap){t._oSIDMap=t._createSIDMap(o);}if(t._oSIDMap.hasOwnProperty(S)){var M=o[t._oSIDMap[S]];d.resolve(M);return;}m="Cannot resolve system alias "+S;q.sap.log.warning(m,"The system alias cannot be found in the site response","sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter");d.reject(m);}).fail(function(e){d.reject(e);});return d.promise();};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/CommonDataModelAdapter',["sap/ui/thirdparty/URI","sap/base/Log","sap/base/util/Version","sap/base/util/UriParameters","sap/ui/thirdparty/jquery"],function(U,L,V,a,q){"use strict";var C=function(u,p,A){this.oAdapterConfiguration=A;if(A&&A.config&&A.config.siteData){this.oCdmSiteDataRequestPromise=new q.Deferred().resolve(A.config.siteData);}else if(A&&A.config&&A.config.siteDataPromise){this.oCdmSiteDataRequestPromise=A.config.siteDataPromise;}else{var s=this._identifySiteUrlFromConfig(A);var b=this._normalizeUrl(s,location.href);this.oCdmSiteDataRequestPromise=this._requestSiteData(b);}};
C.prototype._requestSiteData=function(u){var s=new q.Deferred();if(!u){return s.reject("Cannot load site: configuration property 'siteDataUrl' is missing for CommonDataModelAdapter.");}q.ajax({type:"GET",dataType:"json",url:u}).done(function(r){s.resolve(r);}).fail(function(e){q.sap.log.error(e.responseText);s.reject("CDM Site was requested but could not be loaded.");});return s.promise();};
C.prototype._normalizeUrl=function(u,c){if(typeof u!=="string"){return u;}if(u.indexOf("http")===0){return u;}var b=document.getElementsByTagName("base")[0];return(new U(u,b).absoluteTo(c)).toString();};
C.prototype.getSite=function(){var d=new q.Deferred();this.oCdmSiteDataRequestPromise.done(function(s){var S=q.extend({},s);delete S.personalization;d.resolve(S);}).fail(function(m){d.reject(m);});return d.promise();};
C.prototype.getPersonalization=function(){var d=new q.Deferred(),t=this;this.oCdmSiteDataRequestPromise.done(function(s){var S=q.extend({},s),b=S._version,p;if(t.oAdapterConfiguration&&t.oAdapterConfiguration.config&&t.oAdapterConfiguration.config.ignoreSiteDataPersonalization){delete S.personalization;}if(S.personalization){p=S.personalization._version;if(Object.keys(S.personalization).length>0&&!t._isPersonalizationVersionValid(b,p)){L.error("Personalization version is not compatible to the site version and will not be loaded. Please proceed to personalize the homepage again if needed. Personalization version: "+p+"; Site version: "+b);d.resolve();return;}d.resolve(S.personalization);}else{t._readPersonalizationDataFromStorage().done(function(P){p=P._version;if(Object.keys(P).length>0&&!t._isPersonalizationVersionValid(b,p)){L.error("Personalization version is not compatible to the site version and will not be loaded. Please proceed to personalize the homepage again if needed. Personalization version: "+p+"; Site version: "+b);d.resolve();return;}d.resolve(P);}).fail(function(m){d.reject(m);});}}).fail(function(m){d.reject(m);});return d.promise();};
C.prototype._isPersonalizationVersionValid=function(s,p){if(!s){return false;}var S=new V(s).getMajor(),P=new V(p);if(S>=3){return P.getMajor()===S;}return P.getMajor()<3;};
C.prototype.setPersonalization=function(p){var P=new q.Deferred(),o=sap.ushell.Container.getService("Personalization"),c,s={keyCategory:o.constants.keyCategory.FIXED_KEY,writeFrequency:o.constants.writeFrequency.LOW,clientStorageAllowed:true},b={container:"sap.ushell.cdm.personalization",item:"data"},d=o.getPersonalizer(b,s,c);d.setPersData(p).done(function(){q.sap.log.info("Personalization data has been stored successfully.");P.resolve();}).fail(function(){P.reject("Writing personalization data failed.");});return P.promise();};
C.prototype._readPersonalizationDataFromStorage=function(){var p=new q.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(P){var s={keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.LOW,clientStorageAllowed:true};var o={container:"sap.ushell.cdm.personalization",item:"data"};P.getPersonalizer(o,s).getPersData().done(function(b){p.resolve(b||{});}).fail(function(){p.reject("Fetching personalization data failed.");});});return p.promise();};
C.prototype._identifySiteUrlFromConfig=function(A){var p=new a(window.location.href);var s=p.get("sap-ushell-cdm-site-url");var c=A&&A.config;if((c&&!c.allowSiteSourceFromURLParameter)&&s){s=null;}if(c&&!s){s=c.siteDataUrl||c.cdmSiteUrl;}this.sCdmSiteUrl=s;return s;};
return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/ConfigurationDefaultsAdapter',["sap/ushell/bootstrap/cdm/cdm.constants","sap/base/util/deepClone"],function(c,d){"use strict";return function(){this.getDefaultConfig=function(){return Promise.resolve(d(c.defaultConfig));};};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/ContainerAdapter',["sap/ushell/utils","sap/ushell/User","sap/ushell/System","sap/ui/thirdparty/URI","sap/base/Log","sap/ui/thirdparty/jquery"],function(u,U,S,a,L,q){"use strict";var l=L.getLogger("sap/ushell/adapters/cdm/ContainerAdapter",L.Level.INFO);var C=function(i,p,P){var b="/sap/public/bc/icf/logoff",s=g(P.config,b),o=e(P.config),c=f(i,P.config),d=k(P.config);function g(m,D){if(m.systemProperties&&m.systemProperties.logoutUrl){return m.systemProperties.logoutUrl;}return D;}function e(m){var n,r=m.userProfile;if(r){n=h(r.defaults,m.userProfilePersonalization,r.metadata);}return new U(n||j());}function f(O,m){var n=m.systemProperties,A=O.getAlias(),r=O.getPlatform(),B=O.getBaseUrl(),t,v;if(n){A=n.alias||A;r=n.platform||r;t=n.SID;v=n.client;}return new S({alias:A,platform:r,baseUrl:B,system:t,client:v});}function h(D,m,n){var r=q.extend(j(),D,m);r.bootTheme=r.bootTheme||{theme:r.theme,root:""};delete r.theme;if(n){if(n.editablePropterties){r.setThemePermitted=n.editablePropterties.indexOf("theme")>-1;r.setAccessibilityPermitted=n.editablePropterties.indexOf("accessibility")>-1;r.setContentDensityPermitted=n.editablePropterties.indexOf("contentDensity")>-1;}if(n.ranges){r.ranges=n.ranges;}}return r;}function j(){return{setThemePermitted:false,setAccessibilityPermitted:false,setContentDensityPermitted:false};}function k(A){var m=A&&A.systemProperties&&A.systemProperties.sessionKeepAlive;if(!m){return null;}if(!m.url){l.error("Mandatory parameter 'url' missing in 'sessionKeepAlive' configuration.");return null;}if(m.method!=="HEAD"&&m.method!=="GET"){m.method="HEAD";}return m;}this._getLogoutUrl=function(){return s;};this._setDocumentLocation=function(m){document.location=m;};this.getSystem=function(){return c;};this.getUser=function(){return o;};this.load=function(){return q.when();};this.getCurrentUrl=function(){return window.location.href;};this.logout=function(m){var F;if(!m){throw new Error("Not implemented");}if(u.hasNativeLogoutCapability()){F=(new a(this._getLogoutUrl())).absoluteTo(this.getCurrentUrl()).search("").toString();u.getPrivateEpcm().doLogOff(F);}else{this.logoutRedirect();}return q.when();};this.logoutRedirect=function(){var m=c.adjustUrl(this._getLogoutUrl());this._setDocumentLocation(m);};this.sessionKeepAlive=function(){if(!d){return;}var x=new XMLHttpRequest();x.open(d.method,d.url,true);x.onreadystatechange=function(){if(this.readyState===4){l.debug("Server session was extended");}};x.send();};this._getSessionKeepAliveConfig=function(){return d;};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/LaunchPageAdapter',["sap/ushell/adapters/cdm/_LaunchPage/readHome","sap/ushell/adapters/cdm/_LaunchPage/modifyHome","sap/ushell/adapters/cdm/_LaunchPage/readCatalogs","sap/m/GenericTile","sap/m/library","sap/ui/core/ComponentContainer","sap/ushell/adapters/cdm/_LaunchPage/uri.transform","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/navigationMode","sap/ushell/resources","sap/ushell/utils","sap/ushell/utils/utilsCdm","sap/ushell/components/tiles/utilsRT","sap/base/util/Version","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/Log"],function(r,m,R,G,M,C,u,a,E,n,o,U,b,c,V,J,q,i,d,O,L){"use strict";var l=L.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter"),f=L.Level;var g=M.GenericTileMode;
function h(j,p,A){var _,s="sap.ushell.components.tiles.cdm.applauncher",D="sap.ushell.components.tiles.cdm.applauncherdynamic";this._mResolvedTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};this._mContentProviders={};this.getCdmVersionsSupported=function(){return{"min":V("0"),"max":V("2.0.0")};};this.isSiteSupported=function(S){if(!!S._version&&V(S._version).compareTo(this.getCdmVersionsSupported().max)>0){L.fatal("Invalid CDM site version: Only sites up to version 2.0.0 are supported");return false;}return true;};this.TileType={Tile:"tile",Link:"link"};this.getGroups=function(){var e=new q.Deferred();this._assureLoaded().done(function(I){U.setPerformanceMark("FLP - homepage groups processed");e.resolve(I);}).fail(function(){e.resolve([]);});return e.promise();};this._getTileFromHashInContextOfSite=function(e,I,K){var N=new q.Deferred(),P=I[K];if(!P){P=e(K);I[K]=P;}P.done(function(T){var Q={tileIntent:K,tileResolutionResult:T};N.resolve(Q);}).fail(function(Q){N.reject("Hash '"+K+"' could not be resolved to a tile. "+Q);});return N.promise();};this._getTileFromHash=function(I){var e=sap.ushell.Container.getService("ClientSideTargetResolution");var K=e.resolveTileIntent.bind(e);return this._getTileFromHashInContextOfSite(K,this._mCatalogTilePromises,I);};this._getTileFromHashFromSite=function(S,I){var e=sap.ushell.Container.getService("ClientSideTargetResolution");var K=b.formatSite(S);var N=e.resolveTileIntentInContext.bind(e,K);var P={};return this._getTileFromHashInContextOfSite(N,P,I);};this._getTileForUrl=function(T){var e=T.indicatorDataSource?"#Shell-dynamicTile":"#Shell-staticTile";return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:e,isCustomTile:false}};};this._assureGroupItemsResolved=function(e,S){var P=[],I,K;if(e.payload&&e.payload.tiles){I=this._assureGroupTilesResolved(e.payload.tiles,S);Array.prototype.push.apply(P,I);}if(e.payload&&e.payload.links){K=this._assureGroupLinksResolved(e.payload.links,S);Array.prototype.push.apply(P,K);}return P;};this._assureGroupTilesResolved=function(e,S){return(e||[]).map(function(T,I){return this._resolveGroupTile(T,S).then(function(K){K.isLink=false;return K;});},this);};this._assureGroupLinksResolved=function(e,S){return(e||[]).map(function(I){return this._resolveGroupTile(I,S).then(function(K){K.isLink=true;return K;});},this);};this._resolveGroupTile=function(T,S){var e=this._mResolvedTiles;var I=this._mFailedResolvedTiles;var K;function N(Q){e[T.id]=Q;if(I[T.id]){delete I[T.id];}return Q;}function P(T){var Q=T.target;return Q&&Q.semanticObject==="Shell"&&Q.action==="launchURL";}if(e[T.id]){return(new q.Deferred()).resolve(e[T.id]).promise();}if(T.target&&T.target.url){K=q.when(this._getTileForUrl(T));}else if(T.isBookmark){K=this._resolveTileByIntent(T,S);}else if(P(T)){K=this._resolveTileByIntent(T,S);}else{K=this._resolveTileByAppId(T,S);}K.done(function(Q){N(Q);}).fail(function(Q){I[T.id]=Q;});return K;};this._resolveTileByAppId=function(T,S){var e,I,K,N,P;function Q(a1,b1){return new q.Deferred().reject({logLevel:a1,message:b1}).promise();}if(!i(T)){return Q(f.ERROR,"Cannot resolve tile: oTile must be an object");}if(!i(S)){return Q(f.ERROR,"Cannot resolve tile: oSite must be an object");}e=T.appId||T.appIDHint;if(!e){return Q(f.ERROR,["Cannot resolve tile '",T.id,"': either appId or appIDHint must be specified"].join(""));}I=S.applications&&S.applications[e];if(!I){return Q(f.INFO,["Tile '",T.id,"' filtered from result: no app found for appId '",e,"' (dangling app reference)"].join(""));}K=this._getFirstInbound(I);if(!K){return Q(f.ERROR,["Cannot resolve tile '",T.id,"': app '",e,"' has no navigation inbound"].join(""));}var W=b.mapOne(K.key,K.inbound,I),X=W.resolutionResult.applicationType,Y=W.resolutionResult.additionalInformation,Z=a.last("/core/navigation/enableInPlaceForClassicUIs"),$=Z?Z[X]:false;N=W.tileResolutionResult;N.navigationMode=n.computeNavigationModeForHomepageTiles(X,Y,$);N.isLink=false;if(!this._isFormFactorSupported(N)){return Q(f.INFO,["Tile '",T.id,"' filtered from result: form factor not supported"].join(""));}P=this._toHashFromInbound(K.inbound);return q.when({tileResolutionResult:N,tileIntent:P});};this._isFormFactorSupported=function(e){var I=U.getFormFactor();return r.supportsFormFactor(e,I);};this._getFirstInbound=function(e){var I=Object.keys(e["sap.app"].crossNavigation.inbounds).shift(),K=e["sap.app"].crossNavigation.inbounds[I];return{key:I,inbound:K};};this._resolveTileByIntent=function(T,S){var e=this._prepareTileHash(T);return this._getTileFromHash(e);};this._prepareTileHash=function(T){var e=sap.ushell.Container.getService("URLParsing"),P={},I,K;if(this._isCatalogTile(T)){return T.tileIntent;}if(this._isGroupTile(T)){K=T.target.parameters||[];K.forEach(function(N){if(N.name&&N.value){P[N.name]=[N.value];}});I={target:{semanticObject:T.target.semanticObject,action:T.target.action},params:P,appSpecificRoute:T.target.appSpecificRoute};return"#"+e.constructShellHash(I);}return undefined;};this._allPromisesDone=function(P){var e=new q.Deferred(),I;if(P.length===0){e.resolve([]);}else{var N=P.map(function(K){I=new q.Deferred();K.always(I.resolve.bind(I));return I.promise();});q.when.apply(this,N).done(function(){var K=Array.prototype.slice.call(arguments);e.resolve(K);});}return e.promise();};this._assureLoaded=function(){var e=this,I=sap.ushell.Container.getService("CommonDataModel"),K;if(this._assureLoadedDeferred){return this._assureLoadedDeferred.promise();}K=new q.Deferred();this._assureLoadedDeferred=K;I.getSite().done(function(S){if(!e.isSiteSupported(S)){throw new Error("Invalid CDM site version: Check configuration of launchpage adapter and version of FLP site");}var N=[];var P=r.getGroupsArrayFromSite(S);var Q=r.getDefaultGroup(P);if(!Q){Q=m.createDefaultGroup(U.generateUniqueId(r.getGroupIdsFromSite(S)));S=m.addGroupToSite(S,Q,0);P=r.getGroupsArrayFromSite(S);}_=Q;P.forEach(function(T){N=e._assureGroupItemsResolved(T,S).concat(N);});e._allPromisesDone(N).done(function(){e._assureLoadedDeferred.resolve(P);delete e._assureLoadedDeferred;e._logTileResolutionFailures(e._mFailedResolvedTiles);});}).fail(function(N){L.error("Delivering hompage groups failed - "+N);e._assureLoadedDeferred.resolve([]);delete e._assureLoadedDeferred;});return K.promise();};this._logTileResolutionFailures=function(e){var I={};if(!e){return;}Object.keys(f).filter(function(K){var N=f[K];return N>=f.FATAL&&N<=f.ALL;}).forEach(function(K){I[f[K]]="";});Object.keys(e).forEach(function(K){var N=e[K];if(N.logLevel){I[N.logLevel]=I[N.logLevel].concat(N.message).concat("\n");}});if(I[f.FATAL]){l.fatal(I[f.FATAL]);}if(I[f.ERROR]){l.error(I[f.ERROR]);}if(I[f.WARNING]){l.warning(I[f.WARNING]);}if(I[f.INFO]){l.info(I[f.INFO]);}if(I[f.DEBUG]){l.debug(I[f.DEBUG]);}if(I[f.TRACE]){l.trace(I[f.TRACE]);}};this.getDefaultGroup=function(){var e=new q.Deferred(),I;if(!_){I=this._assureLoaded();}if(I){I.done(function(){e.resolve(_);}).fail(function(K){e.reject("Failed to access default group. "+K);});}else{e.resolve(_);}return e.promise();};this._isValidTitle=function(T){if(typeof T!=="string"||!T){return false;}return true;};this._isGroupPreset=function(e){return r.isGroupPreset(e);};this._isGroupLocked=function(e){return r.isGroupLocked(e);};this.addGroup=function(T){var e=new q.Deferred(),I=sap.ushell.Container.getService("CommonDataModel"),K,N,P=this;if(!this._isValidTitle(T)){return e.reject("No valid group title").promise();}N="Failed to add the group with title '"+T+"' to the homepage. ";I.getSite().done(function(S){K=U.generateUniqueId(r.getGroupIdsFromSite(S));m.addGroupToSite(S,m.createEmptyGroup(K,T));I.save().done(function(){delete P._assureLoadedDeferred;e.resolve(S.groups[K],K);}).fail(function(Q){e.reject(Q);});}).fail(function(Q){e.reject(N+Q);});return e.promise();};this.getGroupTitle=function(e){return r.getGroupTitle(e);};this.setGroupTitle=function(e,N){var I=this,K=new q.Deferred(),P=sap.ushell.Container.getService("CommonDataModel"),Q,S;if(typeof e!=="object"||!r.getGroupId(e)){return K.reject("Unexpected group value").promise();}if(!I._isValidTitle(N)){return K.reject("Unexpected oGroup title value").promise();}S="Failed to set new title for group with id '"+r.getGroupId(e)+"'. ";Q=r.getGroupTitle(e);P.getSite().done(function(T){if(e){m.setGroupTitle(e,N);}P.save().done(function(){K.resolve();}).fail(function(W){L.error(W);K.reject(Q);});}).fail(function(T){K.reject(Q,S+T);});return K.promise();};this.getGroupId=function(e){return r.getGroupId(e);};this.hideGroups=function(e){var I=new q.Deferred(),K=sap.ushell.Container.getService("CommonDataModel"),N;if(e&&Array.isArray(e)){N="Failed to hide group. ";K.getSite().done(function(S){r.getGroupsArrayFromSite(S).forEach(function(P){m.setGroupVisibility(P,e&&Array.prototype.indexOf.call(e,r.getGroupId(P))===-1);});K.save().done(function(){I.resolve();}).fail(function(P){I.reject("Hiding of groups did not work as expected - "+P);});}).fail(function(P){I.reject(N+P);});}else{I.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.");}return I.promise();};this.isGroupVisible=function(e){return r.isGroupVisible(e);};this.moveGroup=function(e,I){var K=new q.Deferred(),N=sap.ushell.Container.getService("CommonDataModel"),P,Q;if(!e||!r.getGroupId(e)||I<0){return K.reject("Unable to move groups - invalid parameters").promise();}Q="Failed to move group with id '"+e.identification.id+"'. ";N.getSite().done(function(S){var T=r.getGroupIdsFromSite(S),W=r.getGroupId(e);if(!T){return K.reject("groupsOrder not found - abort operation of adding a group.");}else if(T.indexOf(W)===I){return K.resolve();}P=U.moveElementInsideOfArray(T,T.indexOf(W),I);if(!P){return K.reject("invalid move group operation - abort.");}m.setGroupsOrder(S,P);N.save().done(function(){K.resolve();}).fail(function(X){K.reject(X);});return undefined;}).fail(function(S){K.reject(Q+S);});return K.promise();};this.removeGroup=function(e){var I=new q.Deferred(),K=sap.ushell.Container.getService("CommonDataModel"),N,P;if(typeof e!=="object"){return I.reject("invalid group parameter").promise();}P=r.getGroupId(e);if(!P){return I.reject("group without id given").promise();}N="Failed to remove group with id '"+P+"'. ";K.getSite().done(function(S){m.removeGroupFromSite(S,e);K.save().done(function(){I.resolve();}).fail(function(Q){I.reject(Q);});}).fail(function(Q){I.reject(N+Q);});return I.promise();};this.resetGroup=function(e){var I=new q.Deferred(),K=sap.ushell.Container.getService("CommonDataModel"),S=[],N=this,P,Q;if(typeof e==="object"&&r.getGroupId(e)){Q=r.getGroupId(e);P="Failed to reset group with id '"+Q+"'. ";K.getSite().done(function(T){q.extend(true,S,r.getGroupsArrayFromSite(T));if(N.isGroupRemovable(e)===false){K.getGroupFromOriginalSite(Q).done(function(W){if(typeof T==="object"&&r.getGroupFromSite(T,Q)){m.overwriteGroup(T,W,Q);}K.save().done(function(){I.resolve(W);}).fail(function(X){I.reject("Group could not be reset - "+X,S);});}).fail(function(W){I.reject("Group could not be reset - "+W,S);});}else{I.reject("Group could not be reset as it was created by the user",S);}}).fail(function(T){I.reject(P+T,[]);});}return I.promise();};this.getTileTitle=function(T){return r.getTileTitle(this._mResolvedTiles,T);};this.getTileSubtitle=function(T){return r.getTileSubtitle(this._mResolvedTiles,T);};this.getTileIcon=function(T){return r.getTileIcon(this._mResolvedTiles,T);};this.getTileInfo=function(T){return r.getTileInfo(this._mResolvedTiles,T);};this.getTileIndicatorDataSource=function(T){var e=this._mResolvedTiles[T.id],I={},K;if(T.indicatorDataSource){I.indicatorDataSource=U.clone(T.indicatorDataSource);if(T.dataSource){I.dataSource=U.clone(T.dataSource);}return I;}if(!e){return I;}K=e.tileResolutionResult;if(K.indicatorDataSource){I.indicatorDataSource=U.clone(K.indicatorDataSource);if(K.indicatorDataSource.hasOwnProperty("dataSource")){var N=K.indicatorDataSource.dataSource,P=K.dataSources;if(P&&P.hasOwnProperty(N)){I.dataSource=U.clone(P[N]);}else{L.warning("datasource referenced but not found for tile: "+e.tileIntent);}}if(U.getMember(K,"runtimeInformation.componentProperties.url")){var Q=U.getMember(I,"indicatorDataSource.path");var S=U.getMember(I,"dataSource.uri");var W=U.getMember(K,"runtimeInformation.componentProperties.url");var X=u(Q,S,W,this.getWindowLocationHref());if(!X.error){if(Q){I.indicatorDataSource.path=X.uri;}if(S){I.dataSource.uri=X.uriParent;}}}}return I;};this.getWindowLocationHref=function(){return window.location.href;};this.isGroupRemovable=function(e){return!this._isGroupPreset(e);};this.isGroupLocked=function(e){return this._isGroupLocked(e);};this.getGroupTiles=function(e){return r.getGroupTiles(e).concat(r.getGroupLinks(e));};this.getLinkTiles=function(e){return r.getGroupLinks(e);};this.getTileType=function(T){if(r.isLink(this._mResolvedTiles,T)){return this.TileType.Link;}return this.TileType.Tile;};this.getTileId=function(T){return r.getTileId(T);};this.getTileSize=function(T){return r.getTileSize(this._mResolvedTiles,T)||"1x1";};this.getTileTarget=function(T){var e,I=r.getTileId(T),K=this._mResolvedTiles[I],N;if(T.target&&T.target.url){return T.target.url;}if(K&&K.tileResolutionResult){e=K.tileResolutionResult;if(e.isCustomTile!==true){return K.tileIntent;}if(e&&typeof e.targetOutbound==="object"){N=this._toHashFromOutbound(e.targetOutbound);if(N){return N;}}}L.warning("Could not find a target for Tile with id '"+I+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return"";};this.isLinkPersonalizationSupported=function(T){return true;};this.isTileIntentSupported=function(T){return(this._mFailedResolvedTiles[T.id]===undefined);};this._notifyTileAboutRefresh=function(T){if(typeof T.tileRefresh==="function"){T.tileRefresh();}};this.refreshTile=function(T){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutRefresh(e.tileComponent);}}};this._notifyTileAboutVisibility=function(T,N,e){if(typeof T.tileSetVisible==="function"&&e!==N){T.tileSetVisible(N);}};this.setTileVisible=function(T,N){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutVisibility(e.tileComponent,N,e.visibility);}e.visibility=N;}};this.getTileView=function(e){var I=this;return new q.Deferred(function(K){return I._getTileView(e,false).then(function(T){K.resolve(T);},function(N){var P="Tile with ID '"+e.id+"' could not be initialized"+(N?":\n"+N:".");L.error(P,null,e.tileType);K.reject(P);});}).promise();};this._getTileUiComponentContainerSync=function(T,e,I){var K=this,N,P,Q,S,W={};if(I===true){P=K._createTileComponentData(T,true,e);}else{P=K._createTileComponentData(T,false,e);}N=e.tileResolutionResult;if(e.isLink){Q=N.navigationMode;return K._createLinkInstance(T,I,Q,G,o);}if(typeof N.tileComponentLoadInfo==="string"){if(P.properties.indicatorDataSource&&P.properties.indicatorDataSource.path){W.name="sap.ushell.components.tiles.cdm.applauncherdynamic";}else{W.name="sap.ushell.components.tiles.cdm.applauncher";}}else if(typeof N.tileComponentLoadInfo==="object"&&N.tileComponentLoadInfo!==null){W=N.tileComponentLoadInfo.componentProperties||{};W.name=N.tileComponentLoadInfo.componentName;}W.componentData=P;if(W.manifest){W.componentData.properties=W.componentData.properties||{};W.componentData.properties.manifest=W.manifest;}if(W.name){W.async=false;var X;try{S=sap.ui.component(W);}catch(Y){L.error(Y.message+"\n-- An error occurred while instantiating "+"the tile component for "+W.name,Y.stack?Y.stack:"","sap.ushell.adapters.cdm.LaunchPageAdapter");return null;}X=new C({component:S,height:"100%"});if(!I){K._mResolvedTiles[T.id].tileComponent=S;}return X;}return null;};this._getTileUiComponentContainer=function(T,e,I){var K=this,N,P,Q,S,W,X,Y=new q.Deferred();var Z=sap.ushell.Container.getService("Ui5ComponentLoader");if(I===true){P=K._createTileComponentData(T,true,e);}else{P=K._createTileComponentData(T,false,e);}N=e.tileResolutionResult;if(e.isLink){Q=N.navigationMode;Y.resolve(K._createLinkInstance(T,I,Q,G,o));return Y.promise();}var $=this._createTileComponentProperties(P,N.tileComponentLoadInfo);if(!$.name){return Y.reject("Cannot find name of tile component for tile with id: '"+T.id+"'").promise();}if($.manifest){P.properties=P.properties||{};P.properties.manifest=$.manifest;}X=this.isCustomTile($.name);var a1=function(e1){var e;S=e1.componentHandle.getInstance();W=new C({component:S,height:"100%"});if(!I){e=K._mResolvedTiles[T.id];e.tileComponent=S;if(typeof e.visibility==="boolean"){K._notifyTileAboutVisibility(S,e.visibility);}}return W;};var b1=function(){return Z.createComponent({loadCoreExt:X,loadDefaultDependencies:false,componentData:P,url:$.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:$,ui5ComponentName:$.name},{},[]).then(a1);};var c1=function(){var e1={componentData:P,url:$.url,name:$.name,async:false};S=sap.ui.component(e1);var f1={componentHandle:{getInstance:function(){return S;}}};return a1(f1);};if(X){E.once("CoreResourcesComplementLoaded").do(function(){b1().then(function(W){Y.resolve(W);}).fail(function(e1){Y.reject(e1);});});}else{var d1=c1();Y.resolve(d1);}return Y.promise();};this._createTileComponentProperties=function(T,e){var I={};if(typeof e==="string"){if(T.properties.indicatorDataSource&&T.properties.indicatorDataSource.path){I.name=D;}else{I.name=s;}return I;}if(typeof e==="object"&&e!==null){I=e.componentProperties||{};I.name=e.componentName;}return I;};this._getTileView=function(e){var I,K,N=new q.Deferred();if(typeof e!=="object"||!e.id){K="Invalid input parameter passed to _getTileView: "+e;L.error(K);return N.reject(K).promise();}I=this._mResolvedTiles[e.id];if(I){return this._getTileUiComponentContainer(e,I,false);}K="No resolved tile found for tile ID: "+e.id;L.error(K);return N.reject(K).promise();};this._getCatalogTileView=function(e){if(typeof e!=="object"){throw new Error(e);}return this._getTileUiComponentContainerSync(e,e,true);};this._getCatalogTileViewControl=function(e){var I=new q.Deferred();if(typeof e!=="object"){var K="Invalid input parameter passed to _getCatalogTileView: "+e;L.error(K);return I.reject(K).promise();}return this._getTileUiComponentContainer(e,e,true);};this._createTileComponentData=function(T,I,e){var K=I?this.getCatalogTileTitle(T):this.getTileTitle(T),S=I?this.getCatalogTilePreviewSubtitle(T):this.getTileSubtitle(T),N=I?this.getCatalogTilePreviewIcon(T):this.getTileIcon(T),P=I?this.getCatalogTilePreviewInfo(T):this.getTileInfo(T),Q=I?this.getCatalogTileTargetURL(T):this.getTileTarget(T),W=this.getTileIndicatorDataSource(T),X={properties:{},startupParameters:{}};if(e.tileResolutionResult.isCustomTile===true&&e.tileResolutionResult.startupParameters){X.startupParameters=e.tileResolutionResult.startupParameters;}if(K){X.properties.title=K;}if(P){X.properties.info=P;}if(S){X.properties.subtitle=S;}if(N){X.properties.icon=N;}if(Q){X.properties.targetURL=Q;}if(W.indicatorDataSource){X.properties.indicatorDataSource=W.indicatorDataSource;if(W.dataSource){X.properties.dataSource=W.dataSource;}}if(e.tileResolutionResult){X.properties.navigationMode=e.tileResolutionResult.navigationMode;}return X;};this._createLinkInstance=function(T,I,N,e,o){var K,P,Q,S=this.getTileSubtitle(T);var G=e;if(I===true){K=this.getCatalogTileTitle(T);}else{K=this.getTileTitle(T);}P=new G({mode:g.LineMode,subheader:S,header:K,press:function(W){this._genericTilePressHandler(T,W);}.bind(this)});if(N){Q=o.i18n.getText(N+"NavigationMode");P.setAriaLabel(Q+" "+K+" "+S);}this._mResolvedTiles[T.id].linkTileControl=P;return P;};this._genericTilePressHandler=function(T,e){var I;if(e.getSource().getScope&&e.getSource().getScope()==="Display"){I=this.getTileTarget(T);if(I){if(I[0]==="#"){hasher.setHash(I);}else{window.open(I,"_blank");}}}};this._addTileToSite=function(P,e,N,I){var K=this,Q=new q.Deferred(),S=sap.ushell.Container.getService("URLParsing").parseShellHash(N.properties.targetURL),T={"id":K.getTileId(N),"target":{"semanticObject":S.semanticObject,"action":S.action,"parameters":H(S.params)}};P.groups[e.identification.id].payload.tiles.push(T);I.save().done(function(){Q.resolve(T);}).fail(function(W){Q.reject(W);});return Q.promise();};this.addTile=function(e,I){var K=new q.Deferred(),N,P=sap.ushell.Container.getService("CommonDataModel"),Q;if(!I){I=_;}if(e.contentProviderId){if(e.externalUrl){return this.addBookmark(this._getBookmarkDataForExtensionCatalogTile(e),I);}return K.reject("Extension Tile without URL").promise();}Q=v();Q.appId=e.tileResolutionResult.appId;this._mResolvedTiles[Q.id]={tileIntent:e.tileIntent,tileResolutionResult:e.tileResolutionResult,isLink:false};P.getSite().done(function(S){S.groups[I.identification.id].payload.tiles.push(Q);P.save().done(function(){K.resolve(Q);}).fail(function(T){K.reject(T);});}).fail(function(S){N="Failed to add tile with id '"+Q.id+"' to group with id '"+I.identification.id+"'. ";K.reject(N+S);});return K.promise();};this._getBookmarkDataForExtensionCatalogTile=function(e){var I={title:e.tileResolutionResult.title,subtitle:e.tileResolutionResult.subTitle,icon:e.tileResolutionResult.icon,info:e.tileResolutionResult.info,url:e.externalUrl};if(e.tileResolutionResult.indicatorDataSource&&e.tileResolutionResult.indicatorDataSource.path){I.serviceUrl=e.tileResolutionResult.indicatorDataSource.path;I.serviceRefreshInterval=e.tileResolutionResult.indicatorDataSource.refresh;}return I;};this.removeTile=function(I,T,K){var N,P,Q=new q.Deferred(),S=this;if(!I||typeof I!=="object"||!I.identification||!I.identification.id||!T||typeof T!=="object"||!T.id){return Q.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise();}P="Failed to remove tile with id '"+T.id+"' from group with id '"+I.identification.id+"'. ";N=sap.ushell.Container.getService("CommonDataModel");N.getSite().done(function(W){var X,Y;K=+K;try{X=W.groups[I.identification.id].payload;}catch(e){Q.reject(W.groups[I.identification.id],P);}Y=S.getTileType(T)===S.TileType.Link?"links":"tiles";if(S.getTileType(T)===S.TileType.Link){K-=X.tiles.length;}if(K>=0){X[Y].splice(K,1);}else{X[Y]=X[Y].filter(function(Z){return Z.id!==T.id;});}N.save().done(function(){Q.resolve();}).fail(function(Z){L.error(Z);Q.reject(W.groups[I.identification.id],Z);});}).fail(function(e){Q.reject({},P+e);});return Q.promise();};this.moveTile=function(T,S,e,I,K,N){var P=new q.Deferred(),Q=sap.ushell.Container.getService("CommonDataModel"),W=this,X;if(!T||d(T)||S===undefined||S<0||e===undefined||e<0||!I||!I.identification||!I.identification.id||!K||!K.identification||!K.identification.id){return P.reject("Invalid input parameters").promise();}X="Failed to move tile with id '"+T.id+"'. ";Q.getSite().done(function(Y){var Z,$,a1=W.getTileType(T)===W.TileType.Link?"links":"tiles";if(!N){N=W._mResolvedTiles[T.id].isLink?"link":"tile";}Z=N==="link"?"links":"tiles";if(a1!==Z&&W._mResolvedTiles[T.id]){W._mResolvedTiles[T.id].isLink=N==="link";}if(Z==="links"){e-=Y.groups[K.identification.id].payload.tiles.length;}if(a1==="links"){S-=Y.groups[I.identification.id].payload.tiles.length;}if(I.identification.id===K.identification.id){if(S!==e||a1!==Z){$=Y.groups[K.identification.id].payload;$[a1].splice(S,1);$[Z].splice(e,0,T);}else{return P.resolve(T).promise();}}else{Y.groups[I.identification.id].payload[a1].splice(S,1);Y.groups[K.identification.id].payload[Z].splice(e,0,T);}Q.save().done(function(){P.resolve(T);}).fail(function(b1){L.error(X+b1);P.reject(X+b1);});return undefined;}).fail(function(Y){L.error(X+Y);P.reject(X+Y);});return P.promise();};this._compareCatalogs=function(e,I){if(e.identification.id>I.identification.id){return 1;}return-1;};this.getCatalogs=function(){var e=this,I=new q.Deferred(),K=[],N=sap.ushell.Container.getService("CommonDataModel");function P(Q,S,K,T,W,X){var Y=Q.catalogs[S];if(W&&X){Y.contentProviderId=W;X.catalogsMap[S]=Y;}K.push(Y);T.notify(Y);}window.setTimeout(function(){N.getSite().done(function(S){Object.keys(S.catalogs).forEach(function(Q){P(S,Q,K,I);});N.getExtensionSites().progress(function(Q){var T=Q.providerId;var W=Q.site;var X=Promise.resolve(W);var Y={sitePromise:X,site:W,catalogsMap:{}};Object.keys(W.catalogs).forEach(function(Z){e._mContentProviders[T]=Y;P(W,Z,K,I,T,Y);});}).done(function(Q){Q.filter(function(T){return!T.success;}).forEach(function(T,W){K.push({identification:{id:T.providerId},contentProviderId:T.providerId,error:"The following content providers could not provide catalogs: "+T.providerId+(T.error?" -> "+T.error:"")});});I.resolve(K.sort(e._compareCatalogs));});});},0);return I.promise();};this._isStartableInbound=function(I){var N=["Shell-plugin","Shell-bootConfig"],e;if(!I.semanticObject||!I.action){return false;}if(N.indexOf(I.semanticObject+"-"+I.action)>-1){return false;}if(!O.get("signature.parameters",I)){return true;}e=Object.keys(I.signature.parameters).every(function(p){return!I.signature.parameters[p].filter||(!!I.signature.parameters[p].launcherValue||p==="sap-external-url");});return e;};this._isHiddenInbound=function(I){return!!I.hideLauncher;};this._toHashFromInbound=function(I){var e=b.toHashFromInbound(I);if(!e){return undefined;}return"#"+e;};this._getExternalUrlFromInbound=function(I){return O.get("signature.parameters.sap-external-url.launcherValue.value",I)||null;};this._toHashFromOutbound=function(e){var I=b.toHashFromOutbound(e);if(!I){return undefined;}return"#"+I;};this._isCustomTile=function(e){if(U.getMember(e,"sap|flp.type")==="tile"){return true;}return false;};this.getCatalogTiles=function(e){var I=this,K=new q.Deferred();if(typeof e!=="object"||e===null){return K.reject("Invalid input parameter '"+e+"' passed to getCatalogTiles.").promise();}if(e.contentProviderId&&this._mContentProviders[e.contentProviderId]){this._mContentProviders[e.contentProviderId].sitePromise.then(function(S){k.call(I,e,S).done(K.resolve).fail(K.reject);},function(N){K.reject("Failed to get site: "+N);});}else{sap.ushell.Container.getService("CommonDataModel").getSite().done(function(S){k.call(I,e,S).done(K.resolve).fail(K.reject);}).fail(function(N){K.reject("Failed to get site: "+N);});}return K.promise();};this.isCustomTile=function(e){return!(e===s||e===D);};function k(e,S){var I=this,K=new q.Deferred();setTimeout(function(){var N=((e.payload&&e.payload.appDescriptors)||[]).reduce(function(P,Q){var T=S.applications[Q.id],W,X,Y,Z,$,a1,b1,c1,d1,e1,f1,g1;if(!T){return P;}W=I._getMember(T,"sap|app.crossNavigation.inbounds");if(!W||Object.keys(W).length===0){return P;}Y=Object.keys(W)[0];Z=W[Y];if(I._isStartableInbound(Z)&&!I._isHiddenInbound(Z)){$=b.mapOne(Y,Z,T);if(!$||!$.tileResolutionResult){return P;}d1=$.resolutionResult.applicationType;g1=a.last("/core/navigation/enableInPlaceForClassicUIs");f1=g1?g1[d1]:false;e1=$.resolutionResult.additionalInformation;$.tileResolutionResult.navigationMode=n.computeNavigationModeForHomepageTiles(d1,e1,f1);a1=$.tileResolutionResult;X=I._toHashFromInbound(Z);if(e.contentProviderId){c1=I._getMember(T,"sap|app.crossNavigation.inbounds.Shell-launchURL.signature.parameters.sap-external-url.launcherValue.value");}b1={id:c1||X,tileIntent:c1||X,tileResolutionResult:a1,isCatalogTile:true};if(e.contentProviderId&&c1){b1.contentProviderId=e.contentProviderId;b1.externalUrl=c1;}P.push(b1);}return P;},[]);K.resolve(N);},0);return K.promise();}this.getCatalogError=function(e){if(e.error){return e.error;}return undefined;};this.getCatalogId=function(e){return R.getCatalogId(e);};this.getCatalogTitle=function(e){return R.getCatalogTitle(e);};this._isGroupTile=function(T){return r.isGroupTile(T);};this._isCatalogTile=function(T){return!!(T&&T.isCatalogTile);};this._isFailedGroupTile=function(T){return!!(T&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[r.getTileId(T)]);};this._isFailedCatalogTile=function(T){return!!(T&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[r.getTileId(T)]);};this.getCatalogTileId=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return undefined;}if(e.isBookmark&&O.get("target.url",e)){return e.target.url;}return(this._mResolvedTiles[r.getTileId(e)]||{}).tileIntent;}if(this._isCatalogTile(e)){return e.id;}return undefined;};this.getCatalogTileTitle=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return"";}return this._mResolvedTiles[e.id].tileResolutionResult.title;}if(this._isCatalogTile(e)){if(this._isFailedCatalogTile(e)){return undefined;}return e.tileResolutionResult.title;}return undefined;};this.getCatalogTileSize=function(e){return this.getTileSize(e);};this.getCatalogTileView=function(e){return this._getCatalogTileView(e);};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewControl(e);};this.getCatalogTileTargetURL=function(e){if(!e){throw new Error("The given tile is falsy");}if(this._isCatalogTile(e)){if(e.tileResolutionResult&&e.tileResolutionResult.isCustomTile){if(!e.tileResolutionResult.targetOutbound){return"";}return this._toHashFromOutbound(e.tileResolutionResult.targetOutbound);}return e.tileIntent||"";}return this.getTileTarget(e);};this.getCatalogTilePreviewTitle=function(e){if(this._isGroupTile(e)){return this.getTileTitle(e);}return(e.tileResolutionResult&&e.tileResolutionResult.title)||"";};this.getCatalogTilePreviewSubtitle=function(e){if(this._isGroupTile(e)){return this.getTileSubtitle(e);}return(e.tileResolutionResult&&e.tileResolutionResult.subTitle)||"";};this.getCatalogTilePreviewIcon=function(e){if(this._isGroupTile(e)){return this.getTileIcon(e);}return(e.tileResolutionResult&&e.tileResolutionResult.icon)||"";};this.getCatalogTilePreviewInfo=function(e){if(this._isGroupTile(e)){return this.getTileInfo(e);}return(e.tileResolutionResult&&e.tileResolutionResult.info)||"";};this.getCatalogTileKeywords=function(e){var K=[],I=e;if(!I){L.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return K;}if(this._mResolvedTiles&&this._mResolvedTiles[e.id]){I=this._mResolvedTiles[e.id];}if(I&&I.tileResolutionResult&&I.tileResolutionResult.title){K.push(I.tileResolutionResult.title);}if(I&&I.tileResolutionResult&&I.tileResolutionResult.subTitle){K.push(I.tileResolutionResult.subTitle);}return K;};this._visitBookmarks=function(e,I){var K=sap.ushell.Container;var N=K.getService("URLParsing");var P=K.getService("CommonDataModel");var Q;var S=N.parseShellHash(e);if(S){Q=F(S);}else{Q=B(e);}return P.getSite().then(function(T){var W=T.groups;var X=Object.keys(W).filter(function(Y){return!W[Y].payload.locked;}).map(function(Y){return W[Y].payload.tiles.filter(function(Z){return Z.isBookmark&&x(Q,Z.target);});}).reduce(function(Y,Z){Array.prototype.push.apply(Y,Z);return Y;},[]);if(!I){return X.length;}return q.when(X.map(I)).then(function(){return X.length;});});};this.addBookmark=function(P,e){var T=this;return new q.Deferred(function(I){var K=sap.ushell.Container;var N=K.getService("URLParsing");var Q=K.getService("CommonDataModel");q.when(e||T.getDefaultGroup(),Q.getSite()).done(function(e,S){var W,X,Y=N.parseShellHash(P.url),Z,$=false;if(!Y){X=B(P.url);$=true;}else{X=F(Y);}W=t(P,X);if($){Z=new q.Deferred();Z.resolve(T._getTileForUrl(W));}else{Z=T._getTileFromHash(P.url);}Z.done(function(a1){a1.isLink=false;T._mResolvedTiles[W.id]=a1;S.groups[e.identification.id].payload.tiles.push(W);Q.save().done(function(){I.resolve(W);}).fail(function(b1){I.reject(b1);});}).fail(function(a1){I.reject("Bookmark creation failed because: "+a1);});}).fail(function(S){I.reject(S);});}).promise();};this.countBookmarks=function(e){return this._visitBookmarks(e);};this.updateBookmarks=function(e,P){var I=sap.ushell.Container;var K=I.getService("URLParsing");var N=I.getService("CommonDataModel");var Q=this._mResolvedTiles;function S(T){return new q.Deferred(function(W){var X,Y;var Z;var $=false;var a1={};if(P.url||P.url===""){X=K.parseShellHash(P.url);if(!X){Y=B(P.url);}else{Y=F(X);}}if(T.icon!==P.icon){a1.icon=P.icon;$=true;}if(T.title!==P.title){a1.title=P.title;$=true;}if(T.subTitle!==P.subtitle){a1.subtitle=P.subtitle;$=true;}if(P.url&&e!==P.url){a1.targetURL=P.url;$=true;}if(T.info!==P.info){a1.info=P.info;$=true;}w(T,P,Y);if($&&Q[T.id]){Z=Q[T.id].tileComponent;if(Z){Z.tileSetVisualProperties(a1);}}W.resolve(T);}).promise();}return this._visitBookmarks(e,S).then(function(T){return N.save().then(function(){return T;});});};this.deleteBookmarks=function(e){var I=sap.ushell.Container;var K=I.getService("URLParsing");var N=I.getService("CommonDataModel");var P=K.parseShellHash(e);var Q;if(P){Q=F(P);}else{Q=B(e);}return N.getSite().then(function(S){var T=S.groups;var W=Object.keys(T).map(function(X){var Y=T[X].payload;var Z=0;Y.tiles=Y.tiles.filter(function($){if($.isBookmark&&x(Q,$.target)){++Z;return false;}return true;});return Z;}).reduce(function(X,Y){X+=Y;return X;},0);return N.save().then(function(){return W;});});};this.onCatalogTileAdded=function(T){};this._onTileSettingsSave=function(T,S){var e=new q.Deferred(),I,K,N,P,Q,W,X,Y;if(T&&T.id&&S){N=S.oTitleInput.getValue();Q=S.oSubTitleInput.getValue();P=S.oInfoInput.getValue();W=this.getTileTitle(T);X=this.getTileInfo(T);Y=this.getTileSubtitle(T);if(W===N&&Y===Q&&X===P){return undefined;}I=sap.ushell.Container.getService("CommonDataModel");var Z=this;I.getSite().done(function($){if(!$.modifiedTiles){$.modifiedTiles={};}if(!$.modifiedTiles[T.id]){$.modifiedTiles[T.id]={id:T.id};}K={};if(W!==N){K.title=N;$.modifiedTiles[T.id].title=N;T.title=N;}if(Y!==Q){K.subtitle=Q;$.modifiedTiles[T.id].subTitle=Q;T.subTitle=Q;}if(X!==P){K.info=P;$.modifiedTiles[T.id].info=P;T.info=P;}if(Z._mResolvedTiles[T.id].tileComponent){Z._mResolvedTiles[T.id].tileComponent.tileSetVisualProperties(K);}else if(Z._mResolvedTiles[T.id].linkTileControl){if(K.title){Z._mResolvedTiles[T.id].linkTileControl.setHeader(K.title);}if(K.subtitle){Z._mResolvedTiles[T.id].linkTileControl.setSubheader(K.subtitle);}if((K.title)||(K.subtitle)){Z._mResolvedTiles[T.id].linkTileControl.rerender();}}I.save().fail(function(a1){L.error(a1);e.reject("Could not save personalization changes: "+a1);}).done(function(){e.resolve();});}).fail(function($){L.error($);e.reject("Cannot get site: "+$);});}return e.promise();};this.getTileActions=function(T){var e=[],I,K;if(this._isGroupTile(T)&&!this._isFailedGroupTile(T)){K=new J({config:{"display_title_text":this.getTileTitle(T),"display_subtitle_text":this.getTileSubtitle(T),"display_info_text":this.getTileInfo(T)}});I=c.getTileSettingsAction(K,this._onTileSettingsSave.bind(this,T),this.getTileType(T));e.push(I);}return e;};function t(P,T){var e=v(P,T);e.isBookmark=true;return e;}function v(P,T){var e={id:U.generateUniqueId([])};w(e,P,T);return e;}function w(T,P,e){P=q.extend(true,{},P);if(e){T.target=e;}if(P.title||P.title===""){T.title=P.title;}if(P.icon||P.icon===""){T.icon=P.icon;}if(P.subtitle||P.subtitle===""){T.subTitle=P.subtitle;}if(P.info||P.info===""){T.info=P.info;}if(P.dataSource){T.dataSource={};q.extend(true,T.dataSource,P.dataSource);delete P.serviceUrl;}else if(P.dataSource===null){delete T.dataSource;delete T.indicatorDataSource;delete P.serviceUrl;}if((P.dataSource||T.dataSource)&&P.serviceUrlPath){T.indicatorDataSource={path:P.serviceUrlPath};}if(P.serviceUrl||P.serviceUrl===""){if(T.dataSource){L.warning("`serviceUrl` is marked for deprecation in the future."+"It is not the preferred means for defining a dynamic "+"tile's data source. Please use `oParameter.dataSource`");delete T.dataSource;}T.indicatorDataSource={path:P.serviceUrl};}else if(P.serviceUrl===null&&!T.dataSource){delete T.indicatorDataSource;}if(P.serviceRefreshInterval||P.serviceRefreshInterval===0){T.indicatorDataSource.refresh=P.serviceRefreshInterval;}}function x(T,e){if(T&&e){if(T.url){return T.url===e.url;}return T.semanticObject===e.semanticObject&&T.action===e.action&&y(T.parameters,e.parameters);}return T===e;}function y(P,e){var I,K;P=P||[];e=e||[];if(P.length===e.length){I=z(P);K=z(e);return I===K;}return false;}function z(e){return e.map(function(P){return P.name+P.value;}).sort().join();}function B(e){return{url:e};}function F(I){var T={semanticObject:I.semanticObject,action:I.action,parameters:H(I.params)};if(I.appSpecificRoute){T.appSpecificRoute=I.appSpecificRoute;}return T;}function H(I){return Object.keys(I).map(function(K){var e=I[K]&&I[K][0];return{name:K,value:e||""};});}}
h.prototype._getMember=function(e,A){return U.getMember(e,A);};
return h;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/MenuAdapter',[],function(){"use strict";var M=function(){};
M.prototype.isMenuEnabled=function(){return Promise.resolve(false);};
M.prototype.getMenuEntries=function(){return Promise.resolve([]);};
return M;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/PagesCommonDataModelAdapter',["sap/base/Log","sap/base/util/ObjectPath"],function(L,O){"use strict";var P=function(){this._oCDMPagesRequests={};this._sComponent="sap/ushell/adapters/cdm/PagesCommonDataModelAdapter";};
P.prototype.getSite=function(){var d=new jQuery.Deferred();sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getMenuEntries();}).then(function(m){if(!O.get("target.parameters",m[0])){var e="PagesCommonDataModelAdapter: Couldn't determine the default page from the first menu entry";L.error(e,null,this._sComponent);return Promise.reject(e);}var p=m[0].target.parameters.find(function(o){return o.name==="pageId";});return this._getPage(p&&p.value);}.bind(this)).then(d.resolve).catch(d.reject);return d.promise();};
P.prototype._getPage=function(p){if(!p){var e="PagesCommonDataModelAdapter: _getPage was called without a pageId";L.fatal(e,null,this._sComponent);return Promise.reject(e);}if(this._oCDMPagesRequests[p]){return this._oCDMPagesRequests[p];}this._oCDMPagesRequests[p]=Promise.all([sap.ushell.Container.getServiceAsync("NavigationDataProvider"),sap.ushell.Container.getServiceAsync("VisualizationDataProvider"),sap.ushell.Container.getServiceAsync("PagePersistence")]).then(function(s){return Promise.all([s[2].getPage(p),s[1].getVisualizationData(),s[0].getNavigationData(),sap.ushell.Container.getServiceAsync("PageReferencing")]);}).then(function(r){var o=r[0].content;var v=r[1];var n=r[2];var a=r[3];var c=a.dereferencePage(o,v,n);return c;}).catch(function(E){L.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",E,this._sComponent);return Promise.reject(E);}.bind(this));return this._oCDMPagesRequests[p];};
P.prototype.getPersonalization=function(){return new jQuery.Deferred().resolve({}).promise();};
P.prototype.setPersonalization=function(p){return new jQuery.Deferred().resolve().promise();};
return P;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/PersonalizationAdapter',["sap/ushell/adapters/cdm/_Personalization/internals","sap/ushell/utils/XHttpClient"],function(a,h){"use strict";return a.PersonalizationAdapter.bind(null,h,null);},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/modifyHome',["sap/ushell/adapters/cdm/_LaunchPage/readHome","sap/ui/thirdparty/jquery"],function(r,q){"use strict";
function c(u){return a(u,"Home",true);}
function a(u,t,D){var g={"identification":{"id":u,"namespace":"","title":t},"payload":{"isPreset":false,"locked":false,"tiles":[],"links":[],"groups":[]}};if(D){g.payload.isDefaultGroup=true;}return g;}
function b(S,g,i){var G=r.getGroupId(g);S.groups[G]=g;if(i!==undefined){S.site.payload.groupsOrder.splice(i,0,G);}else{S.site.payload.groupsOrder.push(G);}return S;}
function o(S,g,G){if(S&&S.groups&&S.groups[G]){S.groups[G]=g;}return S;}
function d(S,g){if(S&&S.groups&&S.groups[g.identification.id]){delete S.groups[g.identification.id];}if(S&&S.site&&S.site.payload&&S.site.payload.groupsOrder){S.site.payload.groupsOrder=q.grep(S.site.payload.groupsOrder,function(G){return G!==g.identification.id;});}return S;}
function s(S,n){S.site.payload.groupsOrder=n;return S;}
function e(g,n){g.identification.title=n;}
function f(g,n){if(n){delete g.identification.isVisible;}else{g.identification.isVisible=false;}}
return{createDefaultGroup:c,createEmptyGroup:a,addGroupToSite:b,overwriteGroup:o,removeGroupFromSite:d,setGroupsOrder:s,setGroupTitle:e,setGroupVisibility:f};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/readCatalogs',[],function(){"use strict";
function g(c){return c.identification.id;}
function a(c){return c.identification.title;}
return{getCatalogId:g,getCatalogTitle:a};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/readHome',["sap/ushell/utils/type"],function(t){"use strict";
function g(S){var L=[];S.site.payload.groupsOrder.forEach(function(G,I){var x=S.groups[G];if(x){x.payload=x.payload||{};L.push(x);}});return L;}
function a(S){return S.groups;}
function b(S){return S.site.payload.groupsOrder;}
function c(S,G){return S.groups[G];}
function d(G){var D=G.filter(function(x){return x.payload.hasOwnProperty("isDefaultGroup");});if(D.length>0){return D[0];}return undefined;}
function e(G){return G.identification&&G.identification.id;}
function f(G){return G.identification.title;}
function i(G){if(!G.payload.hasOwnProperty("isPreset")){return true;}return!!G.payload.isPreset;}
function h(G){return!!G.payload.locked;}
function j(G){return!!(G.identification.isVisible===undefined||G.identification.isVisible===true);}
function k(G){if(G.payload.tiles&&t.isArray(G.payload.tiles)&&G.payload.tiles.length>0){return G.payload.tiles;}else{return[];}}
function l(G){if(G.payload.links&&t.isArray(G.payload.links)&&G.payload.links.length>0){return G.payload.links;}else{return[];}}
function m(T){return T.id;}
function n(R,T){var x;if(T&&T.isBookmark){return T.title;}x=R[T.id];if(x){return T.title||x.tileResolutionResult.title;}else{return undefined;}}
function o(R,T){var x;if(T.isBookmark){return T.subTitle;}x=R[T.id];if(x){return T.subTitle||x.tileResolutionResult.subTitle;}else{return undefined;}}
function p(R,T){var x;if(T.isBookmark){return T.info;}x=R[T.id];return T.info||x.tileResolutionResult.info;}
function q(R,T){var x;if(T.isBookmark){return T.icon;}x=R[T.id];if(x){return T.icon||x.tileResolutionResult.icon;}else{return undefined;}}
function r(R,T){var x;if(T.isBookmark){return T.icon;}x=R[T.id];if(x){return T.icon||x.tileResolutionResult.icon;}else{return undefined;}}
function s(R,T){var x=R[T.id];if(x&&x.tileResolutionResult&&x.tileResolutionResult.size){return x.tileResolutionResult.size;}}
function u(R,T){var x=R[T.id];if(x){return!!x.isLink;}return false;}
function v(T){return!!(T&&T.id&&T.target);}
function w(A,F){return A.deviceTypes&&A.deviceTypes[F];}
return{getGroupsArrayFromSite:g,getGroupsMapFromSite:a,getGroupIdsFromSite:b,getGroupFromSite:c,getDefaultGroup:d,getGroupId:e,getGroupTitle:f,isGroupPreset:i,isGroupLocked:h,isGroupVisible:j,getGroupTiles:k,getGroupLinks:l,getTileId:m,getTileTitle:n,getTileSubtitle:o,getTileInfo:p,getTileIcon:q,getTileIndicatorDataSource:r,getTileSize:s,isLink:u,isGroupTile:v,supportsFormFactor:w};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/uri.transform',["sap/ui/thirdparty/URI"],function(U){"use strict";
function t(u,s,f,g){var o=(e(u))?new U(u):null;if(!o){return{error:'Error: Parameter sUri is empty or not a string, use case not supported.'};}if(!b(o)){return r(u,null,null,null,u);}var h=(e(s))?new U(s):null;if(h&&!b(h)){return r(u,s,null,null,o.absoluteTo(h));}var i=new U().search("");if(i.toString()==""){i=new U('https://x.y.z:8443/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/shells/cdm/fioriCDM.html?params');}var k=(e(f))?new U(m(f)):i;if(!b(k)&&!g){return r(u,s,U.joinPaths(h,o),c(k),U.joinPaths(h,o).absoluteTo(k));}var l=(e(g))?new U(g):i;if(!k||!l.toString()){return{error:'Error: Parameter sUriNewBase is empty or not a string, use case not supported.'};}if(b(l)){return{error:'Error: Parameter sUriNewBase is a relative uri, but must be absolute.'};}if(b(k)&&!b(l)){k=k.absoluteTo(l);}if(!b(k)&&!b(l)){if(k.host()&&l.host()&&k.host()!=l.host()){return{error:'Error: Hosts of the parameters sUriBase and sUriNewBase are given but do not match.'};}var n=d(k).relativeTo(d(l));var p;if(e(s)){p=o.absoluteTo(h.absoluteTo(n.absoluteTo(l)));var q=j(n,h);var v=j(q,o);return r(o,q,v,c(l),p);}else{p=o.absoluteTo(n.absoluteTo(l));var w=j(n,o);w.query(o.query());return r(w,null,w,c(l),p);}}return{error:'Error: Parameter combination not supported.'};}
function r(u,o,f,g,h){var r={};if(u){r.uri=u.toString();}if(o){r.uriParent=o.toString();}if(f){r.uriRelative=f.toString();}if(g){r.uriBase=g.toString();}if(h){r.uriAbsolute=h.toString();}return r;}
function a(u){if(!u.is("relative")){return false;}return u.toString()[0]=='/';}
function b(u){return!u.is("absolute")&&!a(u);}
function c(u){return u.filename("").search("").fragment("");}
function j(){var l=new U("/1/2/3/4/5/6/7/8/9/");var r=l;for(var i=0;i<arguments.length;i++){r=U.joinPaths(r,arguments[i]);}return r.relativeTo(l);}
function d(u){return U.joinPaths(u.directory(),'/');}
function m(u){var s=u;if(u){var o=new U(u);if(o.filename()&&o.filename().indexOf(".")==-1&&o.filename().slice(-1)!='/'){s+='/';}}return s;}
function e(f){return(f&&typeof f==='string');}
return t;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_Personalization/internals',["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery"],function(s,i,q){"use strict";return Object.create(null,{PersonalizationAdapter:{value:P},getStorageResourceRoot:{value:g},getContainerPath:{value:c},delAdapterContainer:{value:e},createContainerData:{value:f},getAdapterContainer:{value:A},getContainerCategory:{value:h},isCategoryPContainer:{value:k},trimContainerKey:{value:t},save:{value:l},load:{value:m},del:{value:n},clearContainerData:{value:o},getItemKeys:{value:u},containsItem:{value:v},setItemValue:{value:w},getItemValue:{value:x},delItem:{value:y},addPrefixToItemKey:{value:p},stripPrefixFromItemKey:{value:r},getHttpHeaderValue:{value:z}});
function P(H,C,S,B,D){var E,F;var G={cache:{},headers:{"sap-client":S.getClient()}};D=D&&D.config;if(!D){throw new Error("PersonalizationAdapter: missing configuration.");}if(!C){C=Object.create(null);}E=g(D);F=H(E,G);return Object.create(null,{getAdapterContainer:{value:A.bind(null,D,C,F)},delAdapterContainer:{value:e.bind(null,D,C,F)}});}
function g(C){var I=!C||!C.storageResourceRoot;if(I){throw new Error("Configuration error: storage resource root is not defined.");}return C.storageResourceRoot;}
function a(C){var I=!C||!C.relativeUrlReadOptimized;if(I){throw new Error("Configuration error: relative URL for read optimization is not defined.");}return C.relativeUrlReadOptimized;}
function b(C){var I=!C||!C.relativeUrlWriteOptimized;if(I){throw new Error("Configuration error: relative URL for write optimization is not defined.");}return C.relativeUrlWriteOptimized;}
function c(C,S,B){return j(C,S)+"/"+encodeURIComponent(t(B))+".json";}
function t(C){var B=i.S_CONTAINER_PREFIX,D,R;if(q.type(C)!=="string"||C.length===0){throw new Error("Personalization container key must be a non-empty string");}if(C.substring(0,B.length)===B){D=C.substring(B.length);}else{q.sap.log.error("Unexpected personalization container key: "+C,"should always be prefixed with "+B,"sap.ushell.adapters.cdm.PersonalizationAdapter");D=C;}if(D.length<=40){R=D;}else{R=D.substring(0,40);q.sap.log.error("Invalid personalization container key: '"+D+"'"+" exceeds maximum key length (40 characters) and is shortened to '"+R+"'",undefined,"sap.ushell.adapters.cdm.PersonalizationAdapter");}return R;}
function d(){return{validity:Infinity,keyCategory:s.keyCategory.GENERATED_KEY,writeFrequency:s.writeFrequency.HIGH,clientStorageAllowed:false};}
function e(C,B,H,D,S){var E=c(C,S,D);var F=B&&B[E];if(F){delete B[E];}return n(H,E);}
function f(S,B){var C;if((!B&&B!=="")||B.constructor!==String){q.sap.log.warning("Personalization container has an invalid app name; must be a non-empty string",null,"sap.ushell.adapters.cdm.PersonalizationAdapter");}if(!S){S=d();}C=Object.create(null,{items:{value:Object.create(null),enumerable:true},__metadata:{value:Object.create(null,{appName:{value:B,enumerable:true},expiry:{value:Date.now()+S.validity*60*1000,enumerable:true},validity:{value:S.validity,enumerable:true},category:{value:h(S),enumerable:true}}),enumerable:true,writable:true}});return C;}
function A(C,B,H,D,S,E){var F,G,I=c(C,S,D);if(B&&B[I]){return B[I];}G=f(S,E);F=G.items;return Object.create(null,{save:{value:l.bind(null,H,G,I)},load:{value:m.bind(null,H,G,I)},del:{value:n.bind(null,H,G,I)},setItemValue:{value:w.bind(null,F)},getItemValue:{value:x.bind(null,F)},getItemKeys:{value:u.bind(null,F)},containsItem:{value:v.bind(null,F)},delItem:{value:y.bind(null,F)}});}
function h(S){return k(S)?"p":"u";}
function j(C,S){return k(S)?a(C):b(C);}
function k(S){return S&&S.keyCategory===s.keyCategory.FIXED_KEY&&S.writeFrequency===s.writeFrequency.LOW&&S.clientStorageAllowed;}
function l(H,C,B){return new q.Deferred(function(D){H.put(B,{data:C}).then(function(R){D.resolve();}).catch(function(R){q.sap.log.error("Failed to save personalization container; response: "+(typeof R==="object"?JSON.stringify(R):R),R.stack?R.stack:null,"sap.ushell.adapters.cdm.PersonalizationAdapter");D.reject(R);});}).promise();}
function m(H,C,B){function D(C){o(C.items);}return new q.Deferred(function(E){H.get(B).then(function(R){var F,G;if(R.status===200&&z(R.responseHeaders,"content-length")==="0"&&z(R.responseHeaders,"content-type").indexOf("text/plain")===0){D(C);}else{F=JSON.parse(R.responseText);if(F.data){F.items=F.data;delete F.data;F.__metadata=C.__metadata;}G=F.items;o(C.items);Object.keys(G).forEach(function(I){C.items[I]=G[I];});C.__metadata=F.__metadata;}E.resolve();}).catch(function(R){if(R.status===404){D(C);E.resolve();}else{o(C.items);E.reject(R);}});}).promise();}
function n(H,B){return new q.Deferred(function(D){H.delete(B).then(function(){D.resolve();}).catch(function(R){D.reject(R);});}).promise();}
function o(C){Object.keys(C).forEach(function(K){delete C[K];});}
function p(K){if(K==="__metadata"){return undefined;}else if(K.indexOf(i.S_VARIANT_PREFIX)===0||K.indexOf(i.S_ADMIN_PREFIX)===0){return K;}return i.S_ITEM_PREFIX+K;}
function r(K){if(K.indexOf(i.S_ITEM_PREFIX)===0){return K.substring(i.S_ITEM_PREFIX.length);}else if(K.indexOf(i.S_VARIANT_PREFIX)===0||K.indexOf(i.S_ADMIN_PREFIX)===0){return K;}throw new Error("Illegal item key for personalization container: '"+K+"'; must be prefixed with one of the following: ["+i.S_ITEM_PREFIX+", "+i.S_VARIANT_PREFIX+", "+i.S_ADMIN_PREFIX+"] ");}
function u(C){return Object.keys(C).map(p).filter(function(K){return!!K;});}
function v(C,K){return C.hasOwnProperty(r(K));}
function w(C,K,V){C[r(K)]=V;}
function x(C,K){return C[r(K)];}
function y(C,K){delete C[r(K)];}
function z(H,N){var M=H&&H.filter(function(B){return B.name.toLowerCase()===N;});return M&&M[0]&&M[0].value;}
});
sap.ui.predefine('sap/ushell/adapters/cdm/v3/AdapterBase',["sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/m/GenericTile","sap/ui/core/ComponentContainer","sap/ushell/adapters/cdm/_LaunchPage/uri.transform","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/navigationMode","sap/ushell/resources","sap/ushell/utils","sap/ushell/adapters/cdm/v3/utilsCdm","sap/base/util/Version","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/base/util/ObjectPath"],function(r,R,G,C,u,a,e,n,o,U,b,V,q,i,c,O){"use strict";var l=q.sap.log.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter");var L=q.sap.log.Level;var S="sap.ushell.components.tiles.cdm.applauncher";var D="sap.ushell.components.tiles.cdm.applauncherdynamic";
function A(d,p,f){this.oAdapterConfiguration=f;this._mResolvedTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};this._mContentProviders={};this.TileType={Tile:"tile",Link:"link",Card:"card"};}
A.prototype.getGroups=function(){var d=new q.Deferred();this._ensureLoaded().done(function(g){U.setPerformanceMark("FLP - homepage groups processed");d.resolve(g);}).fail(function(){d.resolve([]);});return d.promise();};
A.prototype._ensureLoaded=function(){var t=this,d;if(this._ensureLoadedDeferred){return this._ensureLoadedDeferred.promise();}d=new q.Deferred();this._ensureLoadedDeferred=d;this._getSiteData().done(function(s){if(!t.isSiteSupported(s)){throw new Error("Invalid CDM site version: Check the configuration of the launchpage adapter and the version of the FLP site");}var I=[];var g=r.getGroupsArrayFromSite(s);g=t._addDefaultGroup(g,s);g.forEach(function(f){I=t._ensureGroupItemsResolved(f,s).concat(I);});t._allPromisesDone(I).done(function(){t._ensureLoadedDeferred.resolve(g);delete t._ensureLoadedDeferred;t._logTileResolutionFailures(t._mFailedResolvedTiles);});}).fail(function(E){l.error("Delivering hompage groups failed - "+E);t._ensureLoadedDeferred.resolve([]);delete t._ensureLoadedDeferred;});return d.promise();};
A.prototype._ensureGroupItemsResolved=function(g,s){var p=[],d,f;if(g.payload&&g.payload.tiles){d=this._ensureGroupTilesResolved(g.payload.tiles,s);Array.prototype.push.apply(p,d);}if(g.payload&&g.payload.links){f=this._ensureGroupLinksResolved(g.payload.links,s);Array.prototype.push.apply(p,f);}return p;};
A.prototype._ensureGroupTilesResolved=function(g,s){return(g||[]).map(function(t,I){return this._resolveGroupTile(t,s).then(function(d){d.isLink=false;return d;});},this);};
A.prototype._ensureGroupLinksResolved=function(g,s){return(g||[]).map(function(d){return this._resolveGroupTile(d,s).then(function(f){f.isLink=true;return f;});},this);};
A.prototype._resolveGroupTile=function(t,s){var m=this._mResolvedTiles;var f=this._mFailedResolvedTiles;var d;function g(j){m[t.id]=j;if(f[t.id]){delete f[t.id];}return j;}function h(t){var T=t.target;return T&&T.semanticObject==="Shell"&&T.action==="launchURL";}if(m[t.id]){return(new q.Deferred()).resolve(m[t.id]).promise();}if(t.target&&t.target.url){d=q.when(this._getTileForUrl(t));}else if(t.isBookmark){d=this._resolveTileByIntent(t,s);}else if(h(t)){d=this._resolveTileByIntent(t,s);}else{d=this._resolveTileByVizId(t,s);}d.done(function(j){g(j);}).fail(function(F){f[t.id]=F;});return d;};
A.prototype._resolveTileByVizId=function(t,s){var v,d,f,g,h,j,I,m,N,k,H,p,E;function w(J,M){return new q.Deferred().reject({logLevel:J,message:M}).promise();}if(!i(s)){return w(L.ERROR,"Cannot resolve tile: oSite must be an object");}if(!i(t)){return w(L.ERROR,"Cannot resolve tile: oTile must be an object");}d=t.vizId;if(!d){return w(L.ERROR,"Cannot resolve tile '"+t.id+"': vizId must be specified");}v=R.get(s,d);if(!v){return w(L.ERROR,"Cannot resolve tile '"+t.id+"': no visualization found for vizId '"+d+"'");}g=R.getTypeId(v);f=R.getType(s,g);if(!f){return w(L.ERROR,"Cannot resolve tile '"+t.id+"': no visualization type found for vizTypeId '"+g+"'");}h=R.getAppId(v);if(h){j=R.getAppDescriptor(s,h);if(!j){return w(L.INFO,"Tile '"+t.id+"' filtered from result: no app descriptor found for appId '"+h+"' (dangling app reference)");}I=r.getInbound(j,R.getTarget(v).inboundId);if(!I){return w(L.ERROR,"Cannot resolve tile '"+t.id+"': app '"+h+"' has no navigation inbound");}m=b.mapOne(I.key,I.inbound,j,v,f,s);var x=m.resolutionResult.applicationType,y=m.resolutionResult.additionalInformation,z=a.last("/core/navigation/enableInPlaceForClassicUIs"),B=z?z[x]:false;N=n.computeNavigationModeForHomepageTiles(x,y,B);p=R.getOutbound(v,I.inbound);H=this._toHashFromOutbound(p);}else{var F=R.getConfig(v);if(!F){return w(L.INFO,"Tile '"+t.id+"' filtered from result: Neither target app nor configuration given in visualization '"+d+"'");}m=b.mapOne(undefined,undefined,undefined,v,f,s);if(R.startsExternalUrl(v)){E=U.getMember(F,"sap|flp.target.url");}}k=m.tileResolutionResult;k.navigationMode=N;k.isLink=false;if(!this._isFormFactorSupported(k)){return w(L.INFO,"Tile '"+t.id+"' filtered from result: form factor not supported");}return q.when({tileResolutionResult:k,tileIntent:E||H});};
A.prototype._isFormFactorSupported=function(d){var s=U.getFormFactor();return r.supportsFormFactor(d,s);};
A.prototype._getFirstInbound=function(d){var f=Object.keys(d["sap.app"].crossNavigation.inbounds).shift(),I=d["sap.app"].crossNavigation.inbounds[f];return{key:f,inbound:I};};
A.prototype._resolveTileByIntent=function(t){var h=this._prepareTileHash(t);return this._getTileFromHash(h);};
A.prototype._allPromisesDone=function(p){var d=new q.Deferred(),f;if(p.length===0){d.resolve([]);}else{var N=p.map(function(P){f=new q.Deferred();P.always(f.resolve.bind(f));return f.promise();});q.when.apply(this,N).done(function(){var g=Array.prototype.slice.call(arguments);d.resolve(g);});}return d.promise();};
A.prototype._logTileResolutionFailures=function(f){var m={};if(!f){return;}Object.keys(L).filter(function(s){var d=L[s];return d>=L.FATAL&&d<=L.ALL;}).forEach(function(s){m[L[s]]="";});Object.keys(f).forEach(function(F){var d=f[F];if(d.logLevel){m[d.logLevel]=m[d.logLevel].concat(d.message).concat("\n");}});if(m[L.FATAL]){l.fatal(m[L.FATAL]);}if(m[L.ERROR]){l.error(m[L.ERROR]);}if(m[L.WARNING]){l.warning(m[L.WARNING]);}if(m[L.INFO]){l.info(m[L.INFO]);}if(m[L.DEBUG]){l.debug(m[L.DEBUG]);}if(m[L.TRACE]){l.trace(m[L.TRACE]);}};
A.prototype._isValidTitle=function(t){return typeof t==="string"&&t;};
A.prototype._isGroupPreset=function(g){return r.isGroupPreset(g);};
A.prototype._isGroupLocked=function(g){return r.isGroupLocked(g);};
A.prototype.getGroupTitle=function(g){return r.getGroupTitle(g);};
A.prototype.getGroupId=function(g){return r.getGroupId(g);};
A.prototype.isGroupVisible=function(g){return r.isGroupVisible(g);};
A.prototype.getTileTitle=function(t){return r.getTileTitle(this._mResolvedTiles,t);};
A.prototype.getTileSubtitle=function(t){return r.getTileSubtitle(this._mResolvedTiles,t);};
A.prototype.getTileIcon=function(t){return r.getTileIcon(this._mResolvedTiles,t);};
A.prototype.getTileInfo=function(t){return r.getTileInfo(this._mResolvedTiles,t);};
A.prototype.getTileIndicatorDataSource=function(t){var d=this._mResolvedTiles[t.id],f={},g;if(t.indicatorDataSource){f.indicatorDataSource=U.clone(t.indicatorDataSource);if(t.dataSource){f.dataSource=U.clone(t.dataSource);}return f;}if(!d){return f;}g=d.tileResolutionResult;if(g.indicatorDataSource){f.indicatorDataSource=U.clone(g.indicatorDataSource);if(g.indicatorDataSource.hasOwnProperty("dataSource")){var s=g.indicatorDataSource.dataSource,h=g.dataSources;if(h&&h.hasOwnProperty(s)){f.dataSource=U.clone(h[s]);}else{q.sap.log.warning("datasource referenced but not found for tile: "+d.tileIntent);}}if(U.getMember(g,"runtimeInformation.componentProperties.url")){var p=U.getMember(f,"indicatorDataSource.path");var j=U.getMember(f,"dataSource.uri");var k=U.getMember(g,"runtimeInformation.componentProperties.url");var T=u(p,j,k,this.getWindowLocationHref());if(!T.error){if(p){f.indicatorDataSource.path=T.uri;}if(j){f.dataSource.uri=T.uriParent;}}}}return f;};
A.prototype.getWindowLocationHref=function(){return window.location.href;};
A.prototype.isGroupRemovable=function(g){return!this._isGroupPreset(g);};
A.prototype.isGroupLocked=function(g){return this._isGroupLocked(g);};
A.prototype.getGroupTiles=function(g){return r.getGroupTiles(g).concat(r.getGroupLinks(g));};
A.prototype.getTileType=function(I){if(r.isLink(this._mResolvedTiles,I)){return this.TileType.Link;}if(r.isCard(this._mResolvedTiles,I)){return this.TileType.Card;}return this.TileType.Tile;};
A.prototype.getTileId=function(t){return r.getTileId(t);};
A.prototype.getTileSize=function(t){return r.getTileSize(this._mResolvedTiles,t)||"1x1";};
A.prototype.getTileTarget=function(t){var T=r.getTileId(t),d=this._mResolvedTiles[T];if(t.target&&t.target.url){return t.target.url;}if(d){return d.tileIntent;}q.sap.log.warning("Could not find a target for Tile with id '"+T+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return"";};
A.prototype.isTileIntentSupported=function(t){return(this._mFailedResolvedTiles[t.id]===undefined);};
A.prototype.setTileVisible=function(t,N){var d=this._mResolvedTiles[t.id];if(d){if(d.tileComponent){this._notifyTileAboutVisibility(d.tileComponent,N,d.visibility);}d.visibility=N;}};
A.prototype.getCardManifest=function(g){var d,f=this._mResolvedTiles[g.id];d=f.tileResolutionResult;return d.tileComponentLoadInfo;};
A.prototype._getTileUiComponentContainerSync=function(t,d,I){var f=this,g,T,N,h,j={};if(I===true){T=f._createTileComponentData(t,true,d);}else{T=f._createTileComponentData(t,false,d);}g=d.tileResolutionResult;if(d.isLink){N=g.navigationMode;return f._createLinkInstance(t,I,N,G,o);}if(typeof g.tileComponentLoadInfo==="object"&&g.tileComponentLoadInfo!==null){j=g.tileComponentLoadInfo.componentProperties||{};j.name=g.tileComponentLoadInfo.componentName;}j.componentData=T;if(j.manifest){j.componentData.properties=j.componentData.properties||{};j.componentData.properties.manifest=j.manifest;}if(j.name){j.async=false;var k;try{h=sap.ui.component(j);}catch(E){q.sap.log.error(E.message+"\n-- An error occurred while instantiating "+"the tile component for "+j.name,E.stack?E.stack:"","sap.ushell.adapters.cdm.LaunchPageAdapter");return null;}k=new sap.ui.core.ComponentContainer({component:h,height:"100%"});if(!I){f._mResolvedTiles[t.id].tileComponent=h;}return k;}return null;};
A.prototype._getTileUiComponentContainer=function(t,d,I){var f=this,g,T,N,h,j,k,m=new q.Deferred();if(d.tileResolutionResult.isPlatformVisualization){sap.ushell.Container.getService("VisualizationDataProvider").getVisualizationView(t.vizId).then(function(w){m.resolve(w);},function(w){m.reject(w);});return m.promise();}var p=sap.ushell.Container.getService("Ui5ComponentLoader");if(I===true){T=f._createTileComponentData(t,true,d);}else{T=f._createTileComponentData(t,false,d);}g=d.tileResolutionResult;if(d.isLink){N=g.navigationMode;m.resolve(f._createLinkInstance(t,I,N,G,o));return m.promise();}var s=this._createTileComponentProperties(T,g.tileComponentLoadInfo);if(!s.name){return m.reject("Cannot find name of tile component for tile with id: '"+t.id+"'").promise();}if(s.manifest){T.properties=T.properties||{};T.properties.manifest=s.manifest;}k=this._isCustomTileComponent(s.name);var v=function(w){var d;h=w.componentHandle.getInstance();j=new C({component:h,height:"100%"});if(!I){d=f._mResolvedTiles[t.id];d.tileComponent=h;if(typeof d.visibility==="boolean"){f._notifyTileAboutVisibility(h,d.visibility);}}return j;};var _=function(){return p.createComponent({loadCoreExt:k,loadDefaultDependencies:false,componentData:T,url:s.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:s,ui5ComponentName:s.name},{},[]).then(v);};if(k){e.once("CoreResourcesComplementLoaded").do(function(){_().then(function(j){m.resolve(j);}).fail(function(E){m.reject(E);});});}else{_().then(function(j){m.resolve(j);}).fail(function(E){m.reject(E);});}return m.promise();};
A.prototype._createTileComponentProperties=function(t,T){var d={};if(!T){return d;}if(c(T)){if(t.properties.indicatorDataSource&&t.properties.indicatorDataSource.path){d.name=D;}else{d.name=S;}}else{d=T.componentProperties||{};d.name=T.componentName;}return d;};
A.prototype.getTileView=function(g){var t=this;return new q.Deferred(function(d){return t._getTileView(g,false).then(function(T){d.resolve(T);},function(s){var E="Tile with ID '"+g.id+"' could not be initialized"+(s?":\n"+s:".");q.sap.log.error(E,null,g.tileType);d.reject(E);});}).promise();};
A.prototype._getTileView=function(g){var d,E,f=new q.Deferred();if(typeof g!=="object"||!g.id){E="Invalid input parameter passed to _getTileView: "+g;q.sap.log.error(E);return f.reject(E).promise();}d=this._mResolvedTiles[g.id];if(!d){E="No resolved tile found for tile ID: "+g.id;q.sap.log.error(E);return f.reject(E).promise();}return this._getTileUiComponentContainer(g,d,false);};
A.prototype._createTileComponentData=function(t,I,d){var T=I?this.getCatalogTileTitle(t):this.getTileTitle(t),s=I?this.getCatalogTilePreviewSubtitle(t):this.getTileSubtitle(t),f=I?this.getCatalogTilePreviewIcon(t):this.getTileIcon(t),g=I?this.getCatalogTilePreviewInfo(t):this.getTileInfo(t),h=I?this.getCatalogTileTargetURL(t):this.getTileTarget(t),j=this.getTileIndicatorDataSource(t),k={properties:{},startupParameters:{}};if(d.tileResolutionResult.isCustomTile===true&&d.tileResolutionResult.startupParameters){k.startupParameters=d.tileResolutionResult.startupParameters;}if(T){k.properties.title=T;}if(g){k.properties.info=g;}if(s){k.properties.subtitle=s;}if(f){k.properties.icon=f;}if(h){k.properties.targetURL=h;}if(j.indicatorDataSource){k.properties.indicatorDataSource=j.indicatorDataSource;if(j.dataSource){k.properties.dataSource=j.dataSource;}}if(d.tileResolutionResult){k.properties.navigationMode=d.tileResolutionResult.navigationMode;}return k;};
A.prototype._isGroupTile=function(t){return r.isGroupTile(t);};
A.prototype._isCatalogTile=function(t){return!!(t&&t.isCatalogTile);};
A.prototype._isFailedGroupTile=function(t){return!!(t&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[r.getTileId(t)]);};
A.prototype.getCatalogTileId=function(g){if(this._isGroupTile(g)){if(this._isFailedGroupTile(g)){return undefined;}if(g.isBookmark&&O.get("target.url",g)){return g.target.url;}return g.vizId||(g.target&&g.target.url);}if(this._isCatalogTile(g)){return g.id;}return undefined;};
A.prototype.getCatalogTilePreviewTitle=function(g){if(this._isGroupTile(g)){return this.getTileTitle(g);}return(g.tileResolutionResult&&g.tileResolutionResult.title)||"";};
A.prototype.getCatalogTileTargetURL=function(g){if(!g){throw new Error("The given tile is falsy");}if(this._isCatalogTile(g)){if(g.tileResolutionResult&&g.tileResolutionResult.isCustomTile){if(!g.tileResolutionResult.targetOutbound){return"";}return this._toHashFromOutbound(g.tileResolutionResult.targetOutbound);}return g.tileIntent||"";}return this.getTileTarget(g);};
A.prototype.isGroupFeatured=function(g){return!!g.isFeatured;};
A.prototype._getMember=function(d,s){return U.getMember(d,s);};
A.prototype.getCdmVersionsSupported=function(){return{"min":V("3.0.0"),"max":V("3.0.0")};};
A.prototype.isSiteSupported=function(s){if(!s._version||V(s._version).compareTo(this.getCdmVersionsSupported().min)<0||V(s._version).compareTo(this.getCdmVersionsSupported().max)>0){q.sap.log.fatal("Invalid CDM site version: Only version 3.0.0 is supported");return false;}return true;};
A.prototype._isCustomTileComponent=function(s){return!(s===S||s===D);};
return A;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/LaunchPageAdapter',["sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/_LaunchPage/modifyHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readCatalogs","sap/m/library","sap/ushell/utils","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/components/tiles/utilsRT","sap/ushell/adapters/cdm/v3/AdapterBase","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/navigationMode","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/util/ObjectPath"],function(r,m,R,M,u,U,o,A,a,n,C,J,q,i,O){"use strict";var g=M.GenericTileMode;var S="sap.ushell.components.tiles.cdm.applauncher";var D="sap.ushell.components.tiles.cdm.applauncherdynamic";
function L(b,p,c){A.call(this,b,p,c);this._getTileFromHashInContextOfSite=function(e,x,I){var y=new q.Deferred(),z=x[I];if(!z){z=e(I);x[I]=z;}z.done(function(T){var B={tileIntent:I,tileResolutionResult:T};y.resolve(B);}).fail(function(E){y.reject("Hash '"+I+"' could not be resolved to a tile. "+E);});return y.promise();};this._getTileFromHash=function(I){var e=sap.ushell.Container.getService("ClientSideTargetResolution");var x=e.resolveTileIntent.bind(e);return this._getTileFromHashInContextOfSite(x,this._mCatalogTilePromises,I);};this._getTileFromHashFromSite=function(e,I){var x=sap.ushell.Container.getService("ClientSideTargetResolution");var y=U.formatSite(e);var z=x.resolveTileIntentInContext.bind(x,y);var B={};return this._getTileFromHashInContextOfSite(z,B,I);};this._getTileForUrl=function(T){var e={componentName:T.indicatorDataSource?D:S};return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:e,isCustomTile:false}};};this._prepareTileHash=function(T){var e=sap.ushell.Container.getService("URLParsing"),P={},x,y;if(this._isCatalogTile(T)){return T.tileIntent;}if(this._isGroupTile(T)&&T.target){y=T.target.parameters||[];y.forEach(function(z){if(z.name&&z.value){P[z.name]=[z.value];}});x={target:{semanticObject:T.target.semanticObject,action:T.target.action},params:P,appSpecificRoute:T.target.appSpecificRoute};return"#"+e.constructShellHash(x);}return undefined;};this.getDefaultGroup=function(){var e=new q.Deferred(),x;var y=this;if(!this._oDefaultGroup){x=this._ensureLoaded();}if(x){x.done(function(){e.resolve(y._oDefaultGroup);}).fail(function(z){e.reject("Failed to access default group. "+z);});}else{e.resolve(y._oDefaultGroup);}return e.promise();};this.addGroup=function(T){var e=new q.Deferred(),x=sap.ushell.Container.getService("CommonDataModel"),G,y,z=this;if(!this._isValidTitle(T)){return e.reject("No valid group title").promise();}y="Failed to add the group with title '"+T+"' to the homepage. ";x.getSite().done(function(B){G=u.generateUniqueId(r.getGroupIdsFromSite(B));m.addGroupToSite(B,m.createEmptyGroup(G,T));x.save().done(function(){delete z._ensureLoadedDeferred;e.resolve(B.groups[G],G);}).fail(function(E){e.reject(E);});}).fail(function(E){e.reject(y+E);});return e.promise();};this.setGroupTitle=function(G,N){var e=this,x=new q.Deferred(),y=sap.ushell.Container.getService("CommonDataModel"),z,B;if(typeof G!=="object"||!r.getGroupId(G)){return x.reject("Unexpected group value").promise();}if(!e._isValidTitle(N)){return x.reject("Unexpected oGroup title value").promise();}B="Failed to set new title for group with id '"+r.getGroupId(G)+"'. ";z=r.getGroupTitle(G);y.getSite().done(function(E){if(G){m.setGroupTitle(G,N);}y.save().done(function(){x.resolve();}).fail(function(F){q.sap.log.error(F);x.reject(z);});}).fail(function(E){x.reject(z,B+E);});return x.promise();};this.hideGroups=function(H){var e=new q.Deferred(),x=sap.ushell.Container.getService("CommonDataModel"),G;if(H&&Array.isArray(H)){G="Failed to hide group. ";x.getSite().done(function(y){r.getGroupsArrayFromSite(y).forEach(function(z){var I=Array.prototype.indexOf.call(H,r.getGroupId(z))===-1;m.setGroupVisibility(z,I);});x.save().done(function(){e.resolve();}).fail(function(E){e.reject("Hiding of groups did not work as expected - "+E);});}).fail(function(E){e.reject(G+E);});}else{e.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.");}return e.promise();};this.moveGroup=function(G,e){var x=new q.Deferred(),y=sap.ushell.Container.getService("CommonDataModel"),z,B;if(!G||!r.getGroupId(G)||e<0){return x.reject("Unable to move groups - invalid parameters").promise();}B="Failed to move group with id '"+G.identification.id+"'. ";y.getSite().done(function(E){var F=r.getGroupIdsFromSite(E),H=r.getGroupId(G);if(!F){return x.reject("groupsOrder not found - abort operation of adding a group.");}else if(F.indexOf(H)===e){return x.resolve();}z=u.moveElementInsideOfArray(F,F.indexOf(H),e);if(!z){return x.reject("invalid move group operation - abort.");}m.setGroupsOrder(E,z);y.save().done(function(){x.resolve();}).fail(function(I){x.reject(I);});return undefined;}).fail(function(E){x.reject(B+E);});return x.promise();};this.removeGroup=function(G){var e=new q.Deferred(),x=sap.ushell.Container.getService("CommonDataModel"),y,z;if(typeof G!=="object"){return e.reject("invalid group parameter").promise();}z=r.getGroupId(G);if(!z){return e.reject("group without id given").promise();}y="Failed to remove group with id '"+z+"'. ";x.getSite().done(function(B){m.removeGroupFromSite(B,G);x.save().done(function(){e.resolve();}).fail(function(E){e.reject(E);});}).fail(function(E){e.reject(y+E);});return e.promise();};this.resetGroup=function(G){var e=new q.Deferred(),x=sap.ushell.Container.getService("CommonDataModel"),y=[],z=this,B,E;if(typeof G==="object"&&r.getGroupId(G)){E=r.getGroupId(G);B="Failed to reset group with id '"+E+"'. ";x.getSite().done(function(F){q.extend(true,y,r.getGroupsArrayFromSite(F));if(z.isGroupRemovable(G)===false){x.getGroupFromOriginalSite(E).done(function(H){if(typeof F==="object"&&r.getGroupFromSite(F,E)){m.overwriteGroup(F,H,E);}x.save().done(function(){e.resolve(H);}).fail(function(I){e.reject("Group could not be reset - "+I,y);});}).fail(function(H){e.reject("Group could not be reset - "+H,y);});}else{e.reject("Group could not be reset as it was created by the user",y);}}).fail(function(F){e.reject(B+F,[]);});}return e.promise();};this.getLinkTiles=function(G){return r.getGroupLinks(G);};this.isLinkPersonalizationSupported=function(){return true;};this._notifyTileAboutRefresh=function(T){if(typeof T.tileRefresh==="function"){T.tileRefresh();}};this.refreshTile=function(T){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutRefresh(e.tileComponent);}}};this._notifyTileAboutVisibility=function(T,N,e){if(typeof T.tileSetVisible==="function"&&e!==N){T.tileSetVisible(N);}};this.getTileView=function(G){var e=this;return new q.Deferred(function(x){return e._getTileView(G,false).then(function(T){x.resolve(T);},function(y){var E="Tile with ID '"+G.id+"' could not be initialized"+(y?":\n"+y:".");q.sap.log.error(E,null,G.tileType);x.reject(E);});}).promise();};this._getCatalogTileView=function(e){if(typeof e!=="object"){throw new Error(e);}var x;if(typeof e.tileResolutionResult!=="object"){x=this._mResolvedTiles[e.id];}else{x=e;}return this._getTileUiComponentContainerSync(e,x,true);};this._getCatalogTileViewControl=function(e){var x=new q.Deferred();if(typeof e!=="object"){var E="Invalid input parameter passed to _getCatalogTileView: "+e;q.sap.log.error(E);return x.reject(E).promise();}return this._getTileUiComponentContainer(e,e,true);};this._createLinkInstance=function(T,I,N,G,e){var x,y,z,B=this.getTileSubtitle(T);var E=G;if(I===true){x=this.getCatalogTileTitle(T);}else{x=this.getTileTitle(T);}y=new E({mode:g.LineMode,subheader:B,header:x,press:function(F){this._genericTilePressHandler(T,F);}.bind(this)});if(N){z=e.i18n.getText(N+"NavigationMode");y.setAriaLabel(z+" "+x+" "+B);}this._mResolvedTiles[T.id].linkTileControl=y;return y;};this._genericTilePressHandler=function(T,e){var x;if(e.getSource().getScope&&e.getSource().getScope()==="Display"){x=this.getTileTarget(T);if(x){if(x[0]==="#"){hasher.setHash(x);}else{window.open(x,"_blank");}}}};this._addTileToSite=function(P,G,N,e){var x=this,y=new q.Deferred(),I=sap.ushell.Container.getService("URLParsing").parseShellHash(N.properties.targetURL),T={"id":x.getTileId(N),"target":{"semanticObject":I.semanticObject,"action":I.action,"parameters":w(I.params)}};P.groups[G.identification.id].payload.tiles.push(T);e.save().done(function(){y.resolve(T);}).fail(function(z){y.reject(z);});return y.promise();};this.addTile=function(e,G){var x=new q.Deferred(),y,z=sap.ushell.Container.getService("CommonDataModel"),B;if(!G){G=this._oDefaultGroup;}if(e.contentProviderId){if(e.externalUrl){return this.addBookmark(this._getBookmarkDataForExtensionCatalogTile(e),G);}return x.reject("Extension Tile without URL").promise();}B=h();B.vizId=e.vizId;this._mResolvedTiles[B.id]={tileIntent:e.tileIntent,tileResolutionResult:e.tileResolutionResult,isLink:false};z.getSite().done(function(E){E.groups[G.identification.id].payload.tiles.push(B);z.save().done(function(){x.resolve(B);}).fail(function(F){x.reject(F);});}).fail(function(E){y="Failed to add tile with id '"+B.id+"' to group with id '"+G.identification.id+"'. ";x.reject(y+E);});return x.promise();};this._getBookmarkDataForExtensionCatalogTile=function(e){var B={title:e.tileResolutionResult.title,subtitle:e.tileResolutionResult.subTitle,icon:e.tileResolutionResult.icon,info:e.tileResolutionResult.info,url:e.externalUrl};if(e.tileResolutionResult.indicatorDataSource&&e.tileResolutionResult.indicatorDataSource.path){B.serviceUrl=e.tileResolutionResult.indicatorDataSource.path;B.serviceRefreshInterval=e.tileResolutionResult.indicatorDataSource.refresh;}return B;};this.removeTile=function(G,T,I){var x,y,z=new q.Deferred(),B=this;if(!G||typeof G!=="object"||!G.identification||!G.identification.id||!T||typeof T!=="object"||!T.id){return z.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise();}y="Failed to remove tile with id '"+T.id+"' from group with id '"+G.identification.id+"'. ";x=sap.ushell.Container.getService("CommonDataModel");x.getSite().done(function(E){var P,F;I=+I;try{P=E.groups[G.identification.id].payload;}catch(e){z.reject(E.groups[G.identification.id],y);}F=B.getTileType(T)===B.TileType.Link?"links":"tiles";if(B.getTileType(T)===B.TileType.Link){I-=P.tiles.length;}if(I>=0){P[F].splice(I,1);}else{P[F]=P[F].filter(function(H){return H.id!==T.id;});}x.save().done(function(){z.resolve();}).fail(function(H){q.sap.log.error(H);z.reject(E.groups[G.identification.id],H);});}).fail(function(e){z.reject({},y+e);});return z.promise();};this.moveTile=function(T,e,x,y,z,B){var E=new q.Deferred(),F=sap.ushell.Container.getService("CommonDataModel"),G=this,H;if(!T||i(T)||e===undefined||e<0||x===undefined||x<0||!y||!y.identification||!y.identification.id||!z||!z.identification||!z.identification.id){return E.reject("Invalid input parameters").promise();}H="Failed to move tile with id '"+T.id+"'. ";F.getSite().done(function(I){var K,N,P=G.getTileType(T)===G.TileType.Link?"links":"tiles";if(!B){B=G._mResolvedTiles[T.id].isLink?"link":"tile";}K=B==="link"?"links":"tiles";if(P!==K&&G._mResolvedTiles[T.id]){G._mResolvedTiles[T.id].isLink=B==="link";}if(K==="links"){x-=I.groups[z.identification.id].payload.tiles.length;}if(P==="links"){e-=I.groups[y.identification.id].payload.tiles.length;}if(y.identification.id===z.identification.id){if(e!==x||P!==K){N=I.groups[z.identification.id].payload;N[P].splice(e,1);N[K].splice(x,0,T);}else{return E.resolve(T).promise();}}else{I.groups[y.identification.id].payload[P].splice(e,1);I.groups[z.identification.id].payload[K].splice(x,0,T);}F.save().done(function(){E.resolve(T);}).fail(function(Q){q.sap.log.error(H+Q);E.reject(H+Q);});return undefined;}).fail(function(I){q.sap.log.error(H+I);E.reject(H+I);});return E.promise();};this._compareCatalogs=function(e,B){if(e.identification.id>B.identification.id){return 1;}return-1;};this.getCatalogs=function(){var e=this,x=new q.Deferred(),y=[],z=sap.ushell.Container.getService("CommonDataModel");function B(E,F,y,G,P,H){var I=E.catalogs[F];if(P&&H){I.contentProviderId=P;H.catalogsMap[F]=I;}y.push(I);G.notify(I);}window.setTimeout(function(){z.getSite().done(function(E){Object.keys(E.catalogs).forEach(function(F){B(E,F,y,x);});z.getExtensionSites().progress(function(F){var P=F.providerId;var G=F.site;var H=Promise.resolve(G);var I={sitePromise:H,site:G,catalogsMap:{}};Object.keys(G.catalogs).forEach(function(K){e._mContentProviders[P]=I;B(G,K,y,x,P,I);});}).done(function(F){F.filter(function(G){return!G.success;}).forEach(function(G){y.push({identification:{id:G.providerId},contentProviderId:G.providerId,error:"The following content providers could not provide catalogs: "+G.providerId+(G.error?" -> "+G.error:"")});});x.resolve(y.sort(e._compareCatalogs));});});},0);return x.promise();};this._isStartableInbound=function(I){var N=["Shell-plugin","Shell-bootConfig"],e;if(!I.semanticObject||!I.action){return false;}if(N.indexOf(I.semanticObject+"-"+I.action)>-1){return false;}if(!O.get("signature.parameters",I)){return true;}e=Object.keys(I.signature.parameters).every(function(p){return!I.signature.parameters[p].filter||(!!I.signature.parameters[p].launcherValue||p==="sap-external-url");});return e;};this._isHiddenInbound=function(I){return!!I.hideLauncher;};this._toHashFromInbound=function(I){var e=U.toHashFromInbound(I);if(!e){return undefined;}return"#"+e;};this._getExternalUrlFromInbound=function(I){return O.get("signature.parameters.sap-external-url.launcherValue.value",I)||null;};this._toHashFromOutbound=function(e){var x=U.toHashFromOutbound(e);if(!x){return undefined;}return"#"+x;};this.getCatalogTiles=function(e){var x=this,y=new q.Deferred();if(typeof e!=="object"||e===null){return y.reject("Invalid input parameter '"+e+"' passed to getCatalogTiles.").promise();}if(e.contentProviderId&&this._mContentProviders[e.contentProviderId]){this._mContentProviders[e.contentProviderId].sitePromise.then(function(z){d.call(x,e,z).done(y.resolve).fail(y.reject);},function(E){y.reject("Failed to get site: "+E);});}else{sap.ushell.Container.getService("CommonDataModel").getSite().done(function(z){d.call(x,e,z).done(y.resolve).fail(y.reject);}).fail(function(E){y.reject("Failed to get site: "+E);});}return y.promise();};function d(e,x){var y=this,z=new q.Deferred();setTimeout(function(){var B=((e.payload&&e.payload.viz)||[]).reduce(function(E,V){var F,G,H,I,K,N,P,Q,T,W,X,Y,Z,$,_,a1,b1;if(!V){return E;}G=a.get(x,V);if(!G){return E;}H=a.getTypeId(G);I=a.getType(x,H);F=a.getAppId(G);if(F){K=a.getAppDescriptor(x,F);if(!K){return E;}N=r.getInbound(K,a.getTarget(G).inboundId);if(!N){return E;}if(!y._isStartableInbound(N.inbound)||y._isHiddenInbound(N.inbound)){return E;}Q=U.mapOne(N.key,N.inbound,K,G,I,x);if(!Q||!Q.tileResolutionResult){return E;}$=Q.resolutionResult.applicationType;_=Q.resolutionResult.additionalInformation;b1=C.last("/core/navigation/enableInPlaceForClassicUIs");a1=b1?b1[$]:false;T=n.computeNavigationModeForHomepageTiles($,_,a1);W=a.getOutbound(G,N.inbound);P=y._toHashFromOutbound(W);}else{var c1=a.getConfig(G);if(c1===undefined){return E;}Q=U.mapOne(undefined,undefined,undefined,G,I,x);if(u.getMember(c1,"sap|flp.target.type")==="URL"){Z=u.getMember(c1,"sap|flp.target.url");}}X=Q.tileResolutionResult;X.navigationMode=T;if(e.contentProviderId){Z=y._getMember(K,"sap|app.crossNavigation.inbounds.Shell-launchURL.signature.parameters.sap-external-url.launcherValue.value");}Y={id:V,vizId:V,tileIntent:Z||P,tileResolutionResult:X,isCatalogTile:true};if(e.contentProviderId&&Z){Y.contentProviderId=e.contentProviderId;Y.externalUrl=Z;}E.push(Y);return E;},[]);z.resolve(B);},0);return z.promise();}this.getCatalogError=function(e){if(e.error){return e.error;}return undefined;};this.getCatalogId=function(e){return R.getId(e);};this.getCatalogTitle=function(e){return R.getTitle(e);};this._isFailedCatalogTile=function(T){return!!(T&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[r.getTileId(T)]);};this.getCatalogTileTitle=function(G){if(this._isGroupTile(G)){if(this._isFailedGroupTile(G)){return"";}return this._mResolvedTiles[G.id].tileResolutionResult.title;}if(this._isCatalogTile(G)){if(this._isFailedCatalogTile(G)){return undefined;}return G.tileResolutionResult.title;}return undefined;};this.getCatalogTileSize=function(e){return this.getTileSize(e);};this.getCatalogTileView=function(e){return this._getCatalogTileView(e);};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewControl(e);};this.getCatalogTilePreviewSubtitle=function(G){if(this._isGroupTile(G)){return this.getTileSubtitle(G);}return(G.tileResolutionResult&&G.tileResolutionResult.subTitle)||"";};this.getCatalogTilePreviewIcon=function(G){if(this._isGroupTile(G)){return this.getTileIcon(G);}return(G.tileResolutionResult&&G.tileResolutionResult.icon)||"";};this.getCatalogTilePreviewInfo=function(G){if(this._isGroupTile(G)){return this.getTileInfo(G);}return(G.tileResolutionResult&&G.tileResolutionResult.info)||"";};this.getCatalogTilePreviewIndicatorDataSource=function(G){return G.tileResolutionResult&&G.tileResolutionResult.indicatorDataSource;};this.getCatalogTileKeywords=function(G){var K=[],e=G;if(!e){q.sap.log.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return K;}if(this._mResolvedTiles&&this._mResolvedTiles[G.id]){e=this._mResolvedTiles[G.id];}if(e&&e.tileResolutionResult&&e.tileResolutionResult.title){K.push(e.tileResolutionResult.title);}if(e&&e.tileResolutionResult&&e.tileResolutionResult.subTitle){K.push(e.tileResolutionResult.subTitle);}return K;};this._visitBookmarks=function(e,V){var x=sap.ushell.Container;var y=x.getService("URLParsing");var z=x.getService("CommonDataModel");var B;var I=y.parseShellHash(e);if(I){B=v(I);}else{B=s(e);}return z.getSite().then(function(E){var G=E.groups;var T=Object.keys(G).filter(function(K){return!G[K].payload.locked;}).map(function(K){return G[K].payload.tiles.filter(function(F){return F.isBookmark&&k(B,F.target);});}).reduce(function(F,H){Array.prototype.push.apply(F,H);return F;},[]);if(!V){return T.length;}return q.when(T.map(V)).then(function(){return T.length;});});};this.addBookmark=function(P,G){var e=this;return new q.Deferred(function(x){var y=sap.ushell.Container;var z=y.getService("URLParsing");var B=y.getService("CommonDataModel");q.when(G||e.getDefaultGroup(),B.getSite()).done(function(G,E){var T,F,I=z.parseShellHash(P.url),H,K=false;if(!I){F=s(P.url);K=true;}else{F=v(I);}T=f(P,F);if(K){H=new q.Deferred();H.resolve(e._getTileForUrl(T));}else{H=e._getTileFromHash(P.url);}H.done(function(N){N.isLink=false;e._mResolvedTiles[T.id]=N;E.groups[G.identification.id].payload.tiles.push(T);B.save().done(function(){x.resolve(T);}).fail(function(Q){x.reject(Q);});}).fail(function(N){x.reject("Bookmark creation failed because: "+N);});}).fail(function(E){x.reject(E);});}).promise();};this.countBookmarks=function(e){return this._visitBookmarks(e);};this.updateBookmarks=function(e,P){var x=sap.ushell.Container;var y=x.getService("URLParsing");var z=x.getService("CommonDataModel");var B=this._mResolvedTiles;function E(T){return new q.Deferred(function(F){var I,N;var G;var H=false;var K={};if(P.url||P.url===""){I=y.parseShellHash(P.url);if(!I){N=s(P.url);}else{N=v(I);}}if(T.icon!==P.icon){K.icon=P.icon;H=true;}if(T.title!==P.title){K.title=P.title;H=true;}if(T.subTitle!==P.subtitle){K.subtitle=P.subtitle;H=true;}if(P.url&&e!==P.url){K.targetURL=P.url;H=true;}if(T.info!==P.info){K.info=P.info;H=true;}j(T,P,N);if(H&&B[T.id]){G=B[T.id].tileComponent;if(G){G.tileSetVisualProperties(K);}}F.resolve(T);}).promise();}return this._visitBookmarks(e,E).then(function(F){return z.save().then(function(){return F;});});};this.deleteBookmarks=function(e){var x=sap.ushell.Container;var y=x.getService("URLParsing");var z=x.getService("CommonDataModel");var I=y.parseShellHash(e);var B;if(I){B=v(I);}else{B=s(e);}return z.getSite().then(function(E){var G=E.groups;var F=Object.keys(G).map(function(K){var P=G[K].payload;var H=0;P.tiles=P.tiles.filter(function(T){if(T.isBookmark&&k(B,T.target)){++H;return false;}return true;});return H;}).reduce(function(H,K){H+=K;return H;},0);return z.save().then(function(){return F;});});};this.onCatalogTileAdded=function(T){};this._onTileSettingsSave=function(T,e){var x=new q.Deferred(),y,z,N,B,E,F,G,H;if(T&&T.id&&e){N=e.oTitleInput.getValue();E=e.oSubTitleInput.getValue();B=e.oInfoInput.getValue();F=this.getTileTitle(T);G=this.getTileInfo(T);H=this.getTileSubtitle(T);if(F===N&&H===E&&G===B){return undefined;}y=sap.ushell.Container.getService("CommonDataModel");var I=this;y.getSite().done(function(K){if(!K.modifiedTiles){K.modifiedTiles={};}if(!K.modifiedTiles[T.id]){K.modifiedTiles[T.id]={id:T.id};}z={};if(F!==N){z.title=N;K.modifiedTiles[T.id].title=N;T.title=N;}if(H!==E){z.subtitle=E;K.modifiedTiles[T.id].subTitle=E;T.subTitle=E;}if(G!==B){z.info=B;K.modifiedTiles[T.id].info=B;T.info=B;}if(I._mResolvedTiles[T.id].tileComponent){I._mResolvedTiles[T.id].tileComponent.tileSetVisualProperties(z);}else if(I._mResolvedTiles[T.id].linkTileControl){if(z.title){I._mResolvedTiles[T.id].linkTileControl.setHeader(z.title);}if(z.subtitle){I._mResolvedTiles[T.id].linkTileControl.setSubheader(z.subtitle);}if((z.title)||(z.subtitle)){I._mResolvedTiles[T.id].linkTileControl.rerender();}}y.save().fail(function(P){q.sap.log.error(P);x.reject("Could not save personalization changes: "+P);}).done(function(){x.resolve();});}).fail(function(K){q.sap.log.error(K);x.reject("Cannot get site: "+K);});}return x.promise();};this.getTileActions=function(T){var e=[],x,y;if(this._isGroupTile(T)&&!this._isFailedGroupTile(T)){y=new J({config:{"display_title_text":this.getTileTitle(T),"display_subtitle_text":this.getTileSubtitle(T),"display_info_text":this.getTileInfo(T)}});x=o.getTileSettingsAction(y,this._onTileSettingsSave.bind(this,T),this.getTileType(T));e.push(x);}return e;};function f(P,T){var e=h(P,T);e.isBookmark=true;return e;}function h(P,T){var e={id:u.generateUniqueId([])};j(e,P,T);return e;}function j(T,P,e){P=q.extend(true,{},P);if(e){T.target=e;}if(P.title||P.title===""){T.title=P.title;}if(P.icon||P.icon===""){T.icon=P.icon;}if(P.subtitle||P.subtitle===""){T.subTitle=P.subtitle;}if(P.info||P.info===""){T.info=P.info;}if(P.dataSource){T.dataSource={};q.extend(true,T.dataSource,P.dataSource);delete P.serviceUrl;}else if(P.dataSource===null){delete T.dataSource;delete T.indicatorDataSource;delete P.serviceUrl;}if((P.dataSource||T.dataSource)&&P.serviceUrlPath){T.indicatorDataSource={path:P.serviceUrlPath};}if(P.serviceUrl||P.serviceUrl===""){if(T.dataSource){q.sap.log.warning("`serviceUrl` is marked for deprecation in the future."+"It is not the preferred means for defining a dynamic "+"tile's data source. Please use `oParameter.dataSource`");delete T.dataSource;}T.indicatorDataSource={path:P.serviceUrl};}else if(P.serviceUrl===null&&!T.dataSource){delete T.indicatorDataSource;}if(P.serviceRefreshInterval||P.serviceRefreshInterval===0){T.indicatorDataSource.refresh=P.serviceRefreshInterval;}}function k(T,e){if(T&&e){if(T.url){return T.url===e.url;}return T.semanticObject===e.semanticObject&&T.action===e.action&&l(T.parameters,e.parameters);}return T===e;}function l(P,e){var F,x;P=P||[];e=e||[];if(P.length===e.length){F=t(P);x=t(e);return F===x;}return false;}function t(e){return e.map(function(P){return P.name+P.value;}).sort().join();}function s(e){return{url:e};}function v(I){var T={semanticObject:I.semanticObject,action:I.action,parameters:w(I.params)};if(I.appSpecificRoute){T.appSpecificRoute=I.appSpecificRoute;}return T;}function w(I){return Object.keys(I).map(function(K){var V=I[K]&&I[K][0];return{name:K,value:V||""};});}this._getSiteData=function(){return sap.ushell.Container.getService("CommonDataModel").getSite();};this._addDefaultGroup=function(G,e){var x=r.getDefaultGroup(G);if(!x){x=m.createDefaultGroup(u.generateUniqueId(r.getGroupIdsFromSite(e)));e=m.addGroupToSite(e,x,0);G=r.getGroupsArrayFromSite(e);}this._oDefaultGroup=x;return G;};}
L.prototype=Object.create(A.prototype);return L;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/StaticGroupsAdapter',["sap/ushell/adapters/cdm/v3/AdapterBase","sap/ui/thirdparty/jquery"],function(A,q){"use strict";
function S(s,p,a){A.call(this,s,p,a);}
S.prototype=Object.create(A.prototype);
S.prototype._addDefaultGroup=function(g,s){return g;};
S.prototype._getSiteData=function(){var d=new q.Deferred();return d.resolve(this.oAdapterConfiguration.config);};
return S;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readCatalogs',[],function(){"use strict";
function g(c){return c.identification.id;}
function a(c){return c.identification.title;}
return{getId:g,getTitle:a};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readHome',["sap/ushell/utils/type","sap/base/util/ObjectPath"],function(t,O){"use strict";var r={};
r.getGroupsArrayFromSite=function(s){var l=[];s.site.payload.groupsOrder.forEach(function(g,i){var G=s.groups[g];if(G){G.payload=G.payload||{};l.push(G);}});return l;};
r.getGroupsMapFromSite=function(s){return s.groups;};
r.getGroupIdsFromSite=function(s){return s.site.payload.groupsOrder;};
r.getGroupFromSite=function(s,g){return s.groups[g];};
r.getDefaultGroup=function(g){var d=g.filter(function(G){return G.payload.hasOwnProperty("isDefaultGroup");});if(d.length>0){return d[0];}return undefined;};
r.getGroupId=function(g){return g.identification&&g.identification.id;};
r.getGroupTitle=function(g){return g.identification.title;};
r.isGroupPreset=function(g){if(!g.payload.hasOwnProperty("isPreset")){return true;}return!!g.payload.isPreset;};
r.isGroupLocked=function(g){return!!g.payload.locked;};
r.isGroupVisible=function(g){return!!(g.identification.isVisible===undefined||g.identification.isVisible===true);};
r.getGroupTiles=function(g){if(g.payload.tiles&&t.isArray(g.payload.tiles)&&g.payload.tiles.length>0){return g.payload.tiles;}return[];};
r.getGroupLinks=function(g){if(g.payload.links&&t.isArray(g.payload.links)&&g.payload.links.length>0){return g.payload.links;}return[];};
r.getTileId=function(T){return T.id;};
r.getTileVizId=function(T){return T.vizId;};
r.getTileTitle=function(R,T){var o;if(T&&T.isBookmark){return T.title;}o=R[T.id];if(o){return T.title||o.tileResolutionResult.title;}return undefined;};
r.getTileSubtitle=function(R,T){var o;if(T.isBookmark){return T.subTitle;}o=R[T.id];if(o){return T.subTitle||o.tileResolutionResult.subTitle;}return undefined;};
r.getTileInfo=function(R,T){var o;if(T.isBookmark){return T.info;}o=R[T.id];return T.info||o.tileResolutionResult.info;};
r.getTileIcon=function(R,T){var o;if(T.isBookmark){return T.icon;}o=R[T.id];if(o){return T.icon||o.tileResolutionResult.icon;}return undefined;};
r.getTileIndicatorDataSource=function(R,T){var o;if(T.isBookmark){return T.icon;}o=R[T.id];if(o){return T.icon||o.tileResolutionResult.icon;}return undefined;};
r.getTileSize=function(R,T){var o=R[T.id];if(o&&o.tileResolutionResult&&o.tileResolutionResult.size){return o.tileResolutionResult.size;}};
r.isLink=function(R,T){var o=R[T.id];if(o){return!!o.isLink;}return false;};
r.isCard=function(R,i){var o=R[i.id];if(o){return!!o.tileResolutionResult.isCard;}return false;};
r.isGroupTile=function(T){return!!(T&&T.id&&!T.isCatalogTile);};
r.supportsFormFactor=function(a,f){return a.deviceTypes&&a.deviceTypes[f];};
r.getInbound=function(a,i){var I=O.get(["sap.app","crossNavigation","inbounds",i],a);return I&&{key:i,inbound:I};};
return r;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations',["sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readHome"],function(u,r){"use strict";var a={};
a.getMap=function(s){return s.visualizations;};
a.get=function(s,i){return s.visualizations[i];};
a.getTypeMap=function(s){return s.vizTypes;};
a.getType=function(s,i){return s.vizTypes[i];};
a.getTypeId=function(v){return v.vizType;};
a.getConfig=function(v){return v.vizConfig;};
a.getTarget=function(v){var V=this.getConfig(v);return V&&V["sap.flp"]&&V["sap.flp"].target;};
a.getAppId=function(v){var t=this.getTarget(v);return t&&t.appId;};
a.getInboundId=function(v){var t=this.getTarget(v);return t&&t.inboundId;};
a.getOutbound=function(v,i){var o;o={semanticObject:i.semanticObject,action:i.action,parameters:this.getTarget(v).parameters||{}};o.parameters["sap-ui-app-id-hint"]={value:{format:"plain",value:this.getAppId(v)}};return o;};
a.startsExternalUrl=function(v){var t=this.getTarget(v);return t&&t.type==="URL";};
a.getAppDescriptor=function(s,i){return s.applications&&s.applications[i];};
a.getKeywords=function(c){var C=u.clone(c);C.splice(2,1);C.splice(0,1);return u.getNestedObjectProperty(C,["sap|app.tags.keywords","sap|app.tags.keywords"]);};
a.getTitle=function(c){return u.getNestedObjectProperty(c,["title","sap|app.title","title","sap|app.title"]);};
a.getSubTitle=function(c){return u.getNestedObjectProperty(c,["subTitle","sap|app.subTitle","subTitle","sap|app.subTitle"]);};
a.getIcon=function(c){return u.getNestedObjectProperty(c,["icon","sap|ui.icons.icon","icon","sap|ui.icons.icon"]);};
a.getInfo=function(c){return u.getNestedObjectProperty(c,["info","sap|app.info","info","sap|app.info"]);};
a.getShortTitle=function(c){var C=u.clone(c);C.splice(0,1);return u.getNestedObjectProperty(C,["sap|app.shortTitle","shortTitle","sap|app.shortTitle"]);};
a.getCdmParts=function(s,t){var v=this.get(s,r.getTileVizId(t))||{};var V=this.getConfig(v);var A=this.getAppDescriptor(s,this.getAppId(v));var i=r.getInbound(A,this.getInboundId(v));if(i){i=i.inbound;}return[t,V,i,A];};
return a;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/utilsCdm',["sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/util/ObjectPath"],function(u,R,q,i,O){"use strict";
function g(o,A){return u.getMember(o,A);}
function a(o,A,D){return u.getNestedObjectProperty(o,A,D);}
function m(k,s,A,v,V,S){var I=false,e=false;s=u.clone(s);A=u.clone(A);v=v||{};V=V||{};var o={};o.semanticObject=g(s,"semanticObject");o.action=g(s,"action");var h=R.getConfig(v);o.title=R.getTitle([undefined,h,s,A]);o.info=R.getInfo([undefined,h,s,A]);o.icon=R.getIcon([undefined,h,s,A]);o.subTitle=R.getSubTitle([undefined,h,s,A]);o.shortTitle=R.getShortTitle([undefined,h,s,A]);o.deviceTypes=g(A,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(g(s,"deviceTypes")||{},M)){o.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(o.deviceTypes,M)){o.deviceTypes[M]=true;}o.deviceTypes[M]=!!o.deviceTypes[M];});o.signature=g(s,"signature")||{};o.signature.parameters=g(o,"signature.parameters")||{};o.signature.additionalParameters=g(s,"signature.additionalParameters")||"allowed";var j=g(A,"sap|platform|runtime");o.resolutionResult=q.extend(true,{},j);if(j){o.resolutionResult["sap.platform.runtime"]=q.extend(true,{},j);}if(g(A,"sap|ui.technology")==="GUI"){o.resolutionResult["sap.gui"]=g(A,"sap|gui");}if(g(A,"sap|ui.technology")==="WDA"){o.resolutionResult["sap.wda"]=g(A,"sap|wda");}if(g(A,"sap|ui.technology")==="URL"){if(A["sap.url"]){o.resolutionResult["sap.platform.runtime"]=o.resolutionResult["sap.platform.runtime"]||{};o.resolutionResult.url=A["sap.url"].uri;o.resolutionResult["sap.platform.runtime"].url=A["sap.url"].uri;}else if(j&&j.uri){o.resolutionResult["sap.platform.runtime"].url=j.uri;o.resolutionResult.url=j.uri;}}if(!o.resolutionResult["sap.ui"]){o.resolutionResult["sap.ui"]={};}o.resolutionResult["sap.ui"].technology=g(A,"sap|ui.technology");o.resolutionResult.applicationType=this._formatApplicationType(o.resolutionResult,A);o.resolutionResult.systemAlias=o.resolutionResult.systemAlias||g(s,"systemAlias");o.resolutionResult.systemAliasSemantics="apply";o.resolutionResult.text=o.title;o.resolutionResult.appId=g(A,"sap|app.id");var T,l;var n=g(v,"vizConfig.sap|flp.indicatorDataSource");var p={};if(!i(V)){var r=g(V,"sap|app.type");if(r==="card"){I=true;p=q.extend(true,{},V,v.vizConfig);}else if(r==="platformVisualization"){e=true;}else{p.componentName=g(V,"sap|ui5.componentName");var C=g(V,"sap|platform|runtime.componentProperties");if(C){p.componentProperties=C;}if(g(V,"sap|platform|runtime.includeManifest")){p.componentProperties=p.componentProperties||{};p.componentProperties.manifest=q.extend(true,{},V);delete p.componentProperties.manifest["sap.platform.runtime"];}}}if(g(A,"sap|app.type")==="plugin"||g(A,"sap|flp.type")==="plugin"){return undefined;}var w=a([h,A,V],"sap|flp.tileSize");var x=a([h,A,V],"sap|app.description");if(g(A,"sap|ui.technology")==="GUI"&&g(A,"sap|gui.transaction")){T=g(A,"sap|gui.transaction");}if(g(A,"sap|ui.technology")==="WDA"&&g(A,"sap|wda.applicationId")){T=g(A,"sap|wda.applicationId");}var D=a([h,A,V],"sap|app.dataSources");if(g(A,"sap|app.id")){l=g(A,"sap|app.id");}o.tileResolutionResult={appId:l,title:o.title,subTitle:o.subTitle,icon:o.icon,size:w,info:o.info,tileComponentLoadInfo:p,indicatorDataSource:n,dataSources:D,description:x,runtimeInformation:j,technicalInformation:T,deviceTypes:o.deviceTypes,isCard:I,isPlatformVisualization:e};var y=g(A,"sap|integration.urlTemplateId");var z=b(y,S);if(z){o.templateContext={payload:z,site:S,siteAppSection:A};}return o;}
function b(T,s){if(!s||typeof T!=="string"){return null;}var e=T.replace(/[.]/g,"|");return g(s.urlTemplates,e+".payload");}
function f(r,A){var s=r.applicationType;if(s){return s;}var C=g(A,"sap|platform|runtime.componentProperties.self.name")||g(A,"sap|ui5.componentName");if(g(A,"sap|flp.appType")==="UI5"||g(A,"sap|ui.technology")==="UI5"){r.applicationType="SAPUI5";r.additionalInformation="SAPUI5.Component="+C;r.url=g(A,"sap|platform|runtime.componentProperties.url");r.applicationDependencies=g(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(g(A,"sap|ui.technology")==="GUI"){r.applicationType="TR";r["sap.gui"]=g(A,"sap|gui");r.systemAlias=g(A,"sap|app.destination.name");return"TR";}if(g(A,"sap|ui.technology")==="WDA"){r.applicationType="WDA";r["sap.wda"]=g(A,"sap|wda");r.systemAlias=g(A,"sap|app.destination.name");return"WDA";}if(g(A,"sap|ui.technology")==="URL"){r.applicationType="URL";r.systemAlias=g(A,"sap|app.destination.name");}return"URL";}
function c(s){var e=this;if(!s){return[];}var I=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var o=s.applications[A];var h=g(o,"sap|app.crossNavigation.inbounds");if(h){var l=Object.keys(h).sort();l.forEach(function(k){var n=h[k];var r=e.mapOne(k,n,o,undefined,undefined,s);if(r){I.push(r);}});}}catch(j){q.sap.log.error("Error in application "+A+": "+j,j.stack);}});}catch(E){q.sap.log.error(E);q.sap.log.error(E.stack);return[];}return I;}
function t(I){var s,p,C;s={target:{semanticObject:I.semanticObject,action:I.action},params:{}};p=O.get("signature.parameters",I)||{};Object.keys(p).forEach(function(k){if(p[k].filter&&Object.prototype.hasOwnProperty.call(p[k].filter,"value")&&(p[k].filter.format===undefined||p[k].filter.format==="plain")){s.params[k]=[p[k].filter.value];}if(p[k].launcherValue&&Object.prototype.hasOwnProperty.call(p[k].launcherValue,"value")&&(p[k].launcherValue.format===undefined||p[k].launcherValue.format==="plain")){s.params[k]=[p[k].launcherValue.value];}});C=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!C){return undefined;}return C;}
function d(o){var s,p,C;s={target:{semanticObject:o.semanticObject,action:o.action},params:{}};p=o.parameters||{};Object.keys(p).forEach(function(k){if(p.hasOwnProperty(k)&&typeof p[k].value==="object"){s.params[k]=[p[k].value.value];}});C=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!C){return undefined;}return C;}
return{formatSite:c,toHashFromInbound:t,toHashFromOutbound:d,mapOne:m,_formatApplicationType:f};},true);
sap.ui.predefine('sap/ushell/adapters/local/AppStateAdapter',["sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ui/thirdparty/jquery","sap/base/Log"],function(A,q,L){"use strict";var a=function(s,p,c){this._oConfig=c&&c.config;};
a.prototype._getPersonalizationService=function(){return sap.ushell.Container.getService("Personalization");};
a.prototype.saveAppState=function(k,s,v,b,c,p,P){var o=this._getPersonalizationService(),d=new q.Deferred();o.createEmptyContainer(k,{keyCategory:o.constants.keyCategory.GENERATED_KEY,writeFrequency:o.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(C){C.setItemValue("appStateData",v);C.setItemValue("persistencyMethod",p);C.setItemValue("persistencySettings",P);C.setItemValue("createdBy",sap.ushell.Container&&sap.ushell.Container.getUser&&sap.ushell.Container.getUser().getId());C.save().done(function(){d.resolve();}).fail(function(m){d.reject(m);L.error(m);});}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};
a.prototype.loadAppState=function(k){var p=this._getPersonalizationService(),d=new q.Deferred(),t=this;p.getContainer(k,{keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(c){var v=c.getItemValue("appStateData"),P=c.getItemValue("persistencyMethod"),o=c.getItemValue("persistencySettings"),C=c.getItemValue("createdBy");if(P===undefined){d.resolve(k,v);}else if(P===A.PersonalState){if(t.getCurrentUserForTesting()===""||t.getCurrentUserForTesting()===C){d.resolve(k,v,P,o);}else{d.reject("Unauthorized User ID");}}}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};
a.prototype.deleteAppState=function(k){var p=this._getPersonalizationService(),d=new q.Deferred();p.delContainer(k).done(function(){d.resolve();}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};
a.prototype.getCurrentUserForTesting=function(){return"";};
a.prototype.getSupportedPersistencyMethods=function(){return[];};
return a;},true);
sap.ui.predefine('sap/ushell/adapters/local/ClientSideTargetResolutionAdapter',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";var C=function(s,p,c){this._oConfig=c&&c.config;this._aInbounds=[];if(!this._oConfig){this._oSystemAliases={};L.warning("No configuration supplied!","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");}else{if(this._oConfig.inbounds){this._aInbounds=this._transformInboundsObjectToInboundsArray(this._oConfig.inbounds);}if(this._oConfig.applications){Array.prototype.push.apply(this._aInbounds,this._transformApplicationsToInbounds(this._oConfig.applications));}if(this._aInbounds.length===0){L.warning("Adapter got no inbounds via configuration!","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");}this._oSystemAliases=this._oConfig.systemAliases||{};L.debug("Adapter got no system aliases via configuration","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");}};
C.prototype.getInbounds=function(){var d=new q.Deferred(),t=this;setTimeout(function(){d.resolve(t._aInbounds);},0);return d.promise();};
C.prototype.resolveSystemAlias=function(s){var d=new q.Deferred(),t=this;setTimeout(function(){var r={};if(t._oSystemAliases.hasOwnProperty(s)){r=t._oSystemAliases[s];d.resolve(r);}else{d.reject("No system alias value available");}},0);return d.promise();};
C.prototype._transformApplicationsToInbounds=function(a){var i,I=[],A,o,b;function c(s,u){if(s==="NWBC"&&u){if(u.indexOf("/~canvas;window=app/wda")>=0){return"WDA";}return"TR";}return s;}for(i in a){if(a.hasOwnProperty(i)&&i.indexOf("_")!==0){o={};if(i.indexOf("-")>-1){b=i.split("-",2);o.semanticObject=b[0];o.action=b[1];}else if(i===""){o.semanticObject="";o.action="";}else{L.warning("Excluded syntactically incorrect intent '"+i+"' from inbounds array","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");continue;}A=a[i];o.title=A.description||"";o.signature={parameters:{}};o.signature.additionalParameters="allowed";o.resolutionResult={};o.resolutionResult.applicationType=c(A.applicationType,A.url);o.resolutionResult.additionalInformation=A.additionalInformation||"";if(o.resolutionResult.additionalInformation&&o.resolutionResult.additionalInformation.indexOf("SAPUI5.Component=")!==-1){o.resolutionResult.applicationType="SAPUI5";o.resolutionResult.ui5ComponentName=o.resolutionResult.additionalInformation.split("SAPUI5.Component=",2)[1];if(A.applicationDependencies){o.resolutionResult.applicationDependencies=A.applicationDependencies;}else{o.resolutionResult.applicationDependencies={self:{name:o.resolutionResult.ui5ComponentName},asyncHints:{libs:[{name:"sap.ui.core"},{name:"sap.ui.unified"}]}};}}o.resolutionResult.url=A.url;I.push(o);}}return I;};
C.prototype._transformInboundsObjectToInboundsArray=function(i){var I,a=[],o;for(I in i){if(i.hasOwnProperty(I)){o=i[I];if(o.resolutionResult.additionalInformation&&o.resolutionResult.additionalInformation.indexOf("SAPUI5.Component=")!==-1){o.resolutionResult.ui5ComponentName=o.resolutionResult.additionalInformation.split("SAPUI5.Component=",2)[1];if(!o.resolutionResult.hasOwnProperty("applicationDependencies")){o.resolutionResult.applicationDependencies={self:{name:o.resolutionResult.ui5ComponentName},asyncHints:{libs:[{name:"sap.ui.core"},{name:"sap.ui.unified"}]}};}}a.push(i[I]);}}return a;};
return C;},true);
sap.ui.predefine('sap/ushell/adapters/local/ContainerAdapter',["sap/ushell/User","sap/ushell/utils","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery"],function(U,u,O,q){"use strict";var C=function(s,p,a){var A,o,b,k;A=O.create("config",a);o={id:"DEFAULT_USER",firstName:"Default",lastName:"User",fullName:"Default User",accessibility:false,isJamActive:false,language:sap.ui.getCore().getConfiguration().getLanguage()||"en",bootTheme:{theme:"sap_fiori_3",root:""},themeRoot:"/sap/public/bc/themes/",setAccessibilityPermitted:true,setThemePermitted:true,isLanguagePersonalized:false,setContentDensityPermitted:true,trackUsageAnalytics:null};for(k in A){if(A.hasOwnProperty(k)){o[k]=A[k];}}this.getSystem=function(){return s;};this.getUser=function(){return b;};this.sessionKeepAlive=function(){console.warn("Demo container adapter sessionKeepAlive called");};this.load=function(){var c,d,e,D,f=new q.Deferred();if(A&&typeof A.setUserCallback==="string"){D=new q.Deferred();c=A.setUserCallback.split(".");d=c.pop();if(c.length===0){e=window;}else{e=O.get(c.join("."));}if(e&&typeof e[d]==="function"){e[d](D);}else{throw new u.Error("ContainerAdapter local platform: Cannot execute setUserCallback - "+A.setUserCallback);}D.done(function(g){["id","firstName","lastName","fullName"].forEach(function(v){if(g[v]&&typeof A.setUserCallback!=="function"){o[v]=g[v];}});b=new U(o);f.resolve();});}else{b=new U(o);f.resolve();}return f.promise();};this.logout=function(l){q.sap.log.info("Demo system logged out: "+s.getAlias(),null,"sap.ushell.adapters.local.ContainerAdapter");u.reload();return(new q.Deferred()).resolve().promise();};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/local/EndUserFeedbackAdapter',["sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/base/Log","sap/base/util/ObjectPath"],function(q,S,L,O){"use strict";var e;var E=function(s,p,a){var b="com.sap.ushell.adapters.local.EndUserFeedback";this.sendFeedback=function(f){var d,o,n;n=333;d=new q.Deferred();setTimeout(function(){o=new S(S.Type.session,b);if(o.put(n,JSON.stringify(f))===true){L.info("User Feedback "+JSON.stringify(f)+" has been sent.");d.resolve(n);}else{d.reject("Failed to save end user feedback");}},0);return d.promise();};this.getLegalText=function(){var d,l;l="This is the legal text \n in the users language.\n with multiple line breaks.";d=new q.Deferred();setTimeout(function(){L.info("Legal text "+l+" for user feedback dialog has been sent.");d.resolve(l);},0);return d.promise();};this.isEnabled=function(){var d=new q.Deferred();setTimeout(function(){if(e){d.resolve();}else{d.reject();}},0);return d.promise();};e=O.get("config.enabled",a);if(e===undefined){e=true;}};return E;},true);
sap.ui.predefine('sap/ushell/adapters/local/LaunchPageAdapter',["sap/ushell/resources","sap/ui/model/resource/ResourceModel","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/m/NumericContent","sap/m/library","sap/ui/core/ComponentContainer","sap/ui/thirdparty/datajs","sap/ui/core/library","sap/ui/thirdparty/jquery","sap/ushell/Config","sap/ushell/services/AppType","sap/base/Log"],function(r,R,G,I,T,N,m,C,O,c,q,a,A,L){"use strict";var V=c.mvc.ViewType;var b=m.GenericTileMode;
function _(t){var p={};p[t.namespace.replace(/\./g,"/")]=t.path||".";sap.ui.loader.config({paths:p});}
var d=function(u,p,o){var f=q.extend(true,[],o.config.groups),g=o.config.catalogs||[],F=0,h=10,M=10,j=10,k,l,s,t;var v={};for(s=0;s<f.length;s++){if(f[s].isDefaultGroup===true){t=f[s];break;}}if(!t&&f.length>0){t=f[0];t.isDefaultGroup=true;}this.translationBundle=r.i18n;this.TileType={Tile:"tile",Link:"link",Card:"card"};if(!k&&o.config.pathToLocalizedContentResources){k=new R({bundleUrl:o.config.pathToLocalizedContentResources,bundleLocale:sap.ui.getCore().getConfiguration().getLanguage()});l=k.getResourceBundle();}function w(K){if(l){return l.getText(K);}return K;}q.each(g,function(i,e){if(l){e.title=w(e.title);}q.each(e.tiles,function(i,n){n.getTitle=function(){return n.title;};});});q.each(f,function(i,e){if(l){e.title=w(e.title);}q.each(e.tiles,function(i,n){H(n,true);});});function x(){return(100*Math.random())<F;}function y(){return(100*Math.random())<h;}function z(){return M+j*Math.random();}function B(e,i){var n;for(n=0;n<e.tiles.length;n=n+1){if(i.id===e.tiles[n].id){return n;}}return-1;}function D(e,i){var n;for(n=0;n<e.length;n=n+1){if(i.id===e[n].id){return n;}}return-1;}function E(e){var i=q.Deferred();window.setTimeout(function(){i.resolve(e);},z());return i.promise();}function H(e,n){if(e.tileType!=="sap.ushell.ui.tile.DynamicTile"||!e.properties||!e.properties.serviceUrl){return;}if(e.intervalTimer){window.clearInterval(e.intervalTimer);e.intervalTimer=undefined;}if(n){var i=e.serviceRefreshInterval;if(i){i=i*1000;}else{i=10000;}e.intervalTimer=window.setInterval(function(){O.read(e.properties.serviceUrl+"?id="+e.id+"&t="+new Date().getTime(),function(){L.debug("Dynamic tile service call succeed for tile "+e.id);},function(J){L.debug("Dynamic tile service call failed for tile "+e.id+", error message:"+J);});},i);}}this.getGroups=function(){var e=q.Deferred();window.setTimeout(function(){e.resolve(f.slice(0));},z());return e.promise();};this.getDefaultGroup=function(){var e=new q.Deferred();e.resolve(t);return e.promise();};this.addGroup=function(e){var i=q.Deferred(),n=x(),J=this;window.setTimeout(function(){if(!n){var K={id:"group_"+f.length,title:e,tiles:[]};f.push(K);i.resolve(K);}else{J.getGroups().done(function(P){i.reject(P);}).fail(function(){i.reject();});}},z());return i.promise();};this.getGroupTitle=function(e){return e.title;};this.setGroupTitle=function(e,n){var i=q.Deferred(),J=x();window.setTimeout(function(){if(!J){e.title=n;i.resolve();}else{E(e).done(function(K){i.reject(K.title);}).fail(function(){i.reject();});}},z());return i.promise();};this.getGroupId=function(e){return e.id;};this.hideGroups=function(e){if(e&&f){for(var i=0;i<f.length;i++){if(e.indexOf(f[i].id)!==-1){f[i].isVisible=false;}else{f[i].isVisible=true;}}}return q.Deferred().resolve();};this.isGroupVisible=function(e){return e&&(e.isVisible===undefined?true:e.isVisible);};this.moveGroup=function(e,n){var i=q.Deferred(),J=x(),K=this;window.setTimeout(function(){if(!J){f.splice(n,0,f.splice(D(f,e),1)[0]);i.resolve();}else{K.getGroups().done(function(P){i.reject(P);}).fail(function(){i.reject();});}},z());return i.promise();};this.removeGroup=function(e){var i=q.Deferred(),n=x(),J=this;window.setTimeout(function(){if(!n){f.splice(D(f,e),1);q.each(e.tiles,function(K,P){H(P,false);});i.resolve();}else{J.getGroups().done(function(K){i.reject(K);}).fail(function(){i.reject();});}},z());return i.promise();};this.resetGroup=function(e){var i=q.Deferred(),n=x(),J=this;window.setTimeout(function(){if(!n){q.each(e.tiles,function(K,P){H(P,false);});e=q.extend(true,{},o.config.groups[D(o.config.groups,e)]);f.splice(D(f,e),1,e);q.each(e.tiles,function(K,P){H(P,true);});i.resolve(e);}else{J.getGroups().done(function(K){i.reject(K);}).fail(function(){i.reject();});}},z());return i.promise();};this.isGroupRemovable=function(e){return e&&!e.isPreset;};this.isGroupLocked=function(e){return e.isGroupLocked;};this.isGroupFeatured=function(e){return e.isFeatured;};this.getGroupTiles=function(e){return e.tiles;};this.getLinkTiles=function(e){return e.links;};this.getTileTitle=function(e){return e.title;};this.getTileType=function(e){if(e.isLink){return this.TileType.Link;}if(e.isCard){return this.TileType.Card;}return this.TileType.Tile;};this.getTileId=function(e){return e.id;};this.getTileSize=function(e){return e.size;};this.getTileTarget=function(e){var U;if(e.properties){U=e.properties.href||e.properties.targetURL;}return e.target_url||U||"";};this.isTileIntentSupported=function(e){if(e&&e.formFactor){var i=e.formFactor;var S=sap.ui.Device.system;var n;if(S.desktop){n="Desktop";}else if(S.tablet){n="Tablet";}else if(S.phone){n="Phone";}if(i.indexOf(n)===-1){return false;}}return true;};this.isLinkPersonalizationSupported=function(e){if(e){return e.isLinkPersonalizationSupported;}return true;};this.getTileView=function(e){var i=q.Deferred(),n=x(),J=this;if(y()){window.setTimeout(function(){if(!n){J._getTileView(e).done(function(K){i.resolve(K);});}else{i.reject();}},z());}else if(!n){J._getTileView(e).done(function(K){i.resolve(K);});}else{i.reject();}return i.promise();};this._getTileView=function(i){var n="unknown error",J,K,P=this.getTileType(i)==="link",Q=q.Deferred(),S=this;this._translateTileProperties(i);if(i.namespace&&i.path&&i.moduleType){_(i);if(i.moduleType==="UIComponent"){J=new C({component:sap.ui.getCore().createComponent({componentData:{properties:i.properties},name:i.moduleName}),height:"100%",width:"100%"});}else{J=sap.ui.view({viewName:i.moduleName,type:V[i.moduleType],viewData:{properties:i.properties},height:"100%"});}Q.resolve(J);return Q.promise();}else if(i.tileType){K=P?"Link":i.tileType;if(K){var U=i.properties.targetURL||i.properties.href;try{if(U){delete i.properties.targetURL;this._createTileInstance(i,K).done(function(W){J=W;if(typeof(J.setTargetURL)==="function"){J.setTargetURL(U);}i.properties.targetURL=U;S._handleTilePress(J);S._applyDynamicTileIfoState(J);Q.resolve(J);});return Q.promise();}this._createTileInstance(i,K).done(function(W){J=W;S._handleTilePress(J);S._applyDynamicTileIfoState(J);Q.resolve(J);});return Q.promise();}catch(e){Q.resolve(new G({header:e&&(e.name+": "+e.message)||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(i.size)}));return Q.promise();}}else{n="TileType: "+i.tileType+" not found!";}}else{n="No TileType defined!";}Q.resolve(new G({header:n,frameType:this._parseTileSizeToGenericTileFormat(i.size)}));return Q.promise();};this._getCatalogTileViewAsync=function(i){var n=new q.Deferred(),J=this,K,P="unknown error",Q,S,U=this.getTileType(i)==="link";this._translateTileProperties(i);if(i.namespace&&i.path&&i.moduleType){_(i);if(i.moduleType==="UIComponent"){Q=new C({component:sap.ui.getCore().createComponent({componentData:{properties:i.properties},name:i.moduleName}),height:"100%",width:"100%"});}else{Q=sap.ui.view({viewName:i.moduleName,type:V[i.moduleType],viewData:{properties:i.properties},height:"100%"});}n.resolve(Q);return n.promise();}else if(i.tileType){S=U?"Link":i.tileType;if(S){var W=i.properties.targetURL||i.properties.href;try{if(W){delete i.properties.targetURL;K=this._createCatalogTileInstanceAsync(i,S);K.done(function(X){if(typeof(X.setTargetURL)==="function"){Q.setTargetURL(W);}i.properties.targetURL=W;J._handleTilePress(X);J._applyDynamicTileIfoState(X);n.resolve(X);});}else{K=this._createCatalogTileInstanceAsync(i,S);K.done(function(X){J._handleTilePress(X);J._applyDynamicTileIfoState(X);n.resolve(X);});}}catch(e){n.resolve(new G({header:e&&(e.name+": "+e.message)||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(i.size)}));}}else{P="TileType: "+i.tileType+" not found!";}return n.promise();}P="No TileType defined!";n.resolve(new G({header:P,frameType:this._parseTileSizeToGenericTileFormat(i.size)}));return n.promise();};this._getCatalogTileView=function(i){var n="unknown error",J,K,P=this.getTileType(i)==="link";this._translateTileProperties(i);if(i.namespace&&i.path&&i.moduleType){_(i);if(i.moduleType==="UIComponent"){J=new C({component:sap.ui.getCore().createComponent({componentData:{properties:i.properties},name:i.moduleName}),height:"100%",width:"100%"});}else{J=sap.ui.view({viewName:i.moduleName,type:V[i.moduleType],viewData:{properties:i.properties},height:"100%"});}return J;}else if(i.tileType){K=P?"Link":i.tileType;if(K){var Q=i.properties.targetURL||i.properties.href;try{if(Q){delete i.properties.targetURL;J=this._createCatalogTileInstance(i,K);if(typeof(J.setTargetURL)==="function"){J.setTargetURL(Q);}i.properties.targetURL=Q;}else{J=this._createCatalogTileInstance(i,K);}this._handleTilePress(J);this._applyDynamicTileIfoState(J);return J;}catch(e){return new G({header:e&&(e.name+": "+e.message)||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(i.size)});}}else{n="TileType: "+i.tileType+" not found!";}}else{n="No TileType defined!";}return new G({header:n,frameType:this._parseTileSizeToGenericTileFormat(i.size)});};this._createTileInstance=function(e,i){var n,J=q.Deferred(),K=this._getImageContent({src:e.properties.icon});K.addStyleClass("sapUshellFullWidth");switch(i){case"sap.ushell.ui.tile.DynamicTile":n=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new N({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:this._genericTilePressHandler.bind(this,e)});v[e.id]=n;J.resolve(n);break;case"sap.ushell.ui.tile.StaticTile":n=new G({mode:e.mode||(e.properties.icon?b.ContentMode:b.HeaderMode),header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:K}),press:this._genericTilePressHandler.bind(this,e)});v[e.id]=n;J.resolve(n);break;case"Link":n=new G({mode:b.LineMode,subheader:e.properties.subtitle,header:e.properties.title,press:function(Q){this._genericTilePressHandler(e,Q);}.bind(this)});v[e.id]=n;J.resolve(n);break;default:var P=e.tileType.replace(/\./g,"/");sap.ui.require([P],function(){var Q=q.sap.getObject(e.tileType);n=new Q(e.properties||{});v[e.id]=n;J.resolve(n);});}return J.promise();};this.getCardManifest=function(e){var i=JSON.parse(JSON.stringify(e.manifest));return i;};this._createCatalogTileInstanceAsync=function(e,i){var n=new q.Deferred(),J,K=this._getImageContent({src:e.properties.icon});K.addStyleClass("sapUshellFullWidth");switch(i){case"sap.ushell.ui.tile.DynamicTile":J=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new N({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:function(P){this._genericTilePressHandler(e,P);}.bind(this)});break;case"sap.ushell.ui.tile.StaticTile":J=new G({mode:e.mode||(e.properties.icon?b.ContentMode:b.HeaderMode),header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:K}),press:function(P){this._genericTilePressHandler(e,P);}.bind(this)});break;case"Link":J=new G({mode:b.LineMode,subheader:e.properties.subtitle,header:e.properties.title,press:function(P){this._genericTilePressHandler(e,P);}.bind(this)});break;default:i=e.tileType&&e.tileType.replace(/\./g,"/");sap.ui.require([i],function(P){J=new P(e.properties||{});n.resolve(J);});}n.resolve(J);return n.promise();};this._createCatalogTileInstance=function(e,i){var n,J,K,P=this._getImageContent({src:e.properties.icon});P.addStyleClass("sapUshellFullWidth");switch(i){case"sap.ushell.ui.tile.DynamicTile":n=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new N({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:function(Q){this._genericTilePressHandler(e,Q);}.bind(this)});break;case"sap.ushell.ui.tile.StaticTile":n=new G({mode:e.mode||(e.properties.icon?b.ContentMode:b.HeaderMode),header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:P}),press:function(Q){this._genericTilePressHandler(e,Q);}.bind(this)});break;case"Link":n=new G({mode:b.LineMode,subheader:e.properties.subtitle,header:e.properties.title,press:function(Q){this._genericTilePressHandler(e,Q);}.bind(this)});break;default:J=e.tileType.replace(/\./g,"/");K=sap.ui.require(J);if(!K){if(!q.sap.getObject(e.tileType)){q.sap.require(e.tileType);}K=q.sap.getObject(e.tileType);}n=new K(e.properties||{});}return n;};this._genericTilePressHandler=function(e,i){if(i.getSource().getScope&&i.getSource().getScope()==="Display"){if(e.properties.targetURL){if(e.properties.targetURL[0]==="#"){hasher.setHash(e.properties.targetURL);}else{var n=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(n){var J={title:e.properties.title,appType:A.URL,url:e.properties.targetURL,appId:e.properties.targetURL};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(J);}window.open(e.properties.targetURL,"_blank");}}}};this._parseTileSizeToGenericTileFormat=function(e){return e==="1x2"?"TwoByOne":"OneByOne";};this._parseTileValueColor=function(e){var i=e;switch(e){case"Positive":i="Good";break;case"Negative":i="Critical";break;}return i;};this._applyDynamicTileIfoState=function(e){var i=e.onAfterRendering;e.onAfterRendering=function(){if(i){i.apply(this,arguments);}var n=this.getModel(),J,K,P;if(!n){return;}J=n.getProperty("/data/display_info_state");K=this.getDomRef();P=K.getElementsByClassName("sapMTileCntFtrTxt")[0];switch(J){case"Negative":P.classList.add("sapUshellTileFooterInfoNegative");break;case"Neutral":P.classList.add("sapUshellTileFooterInfoNeutral");break;case"Positive":P.classList.add("sapUshellTileFooterInfoPositive");break;case"Critical":P.classList.add("sapUshellTileFooterInfoCritical");break;default:return;}};};this._handleTilePress=function(e){if(typeof e.attachPress==="function"){e.attachPress(function(){if(typeof e.getTargetURL==="function"){var i=e.getTargetURL();if(i){if(i[0]==="#"){hasher.setHash(i);}else{window.open(i,"_blank");}}}});}};this._translateTileProperties=function(e){if(this.translationBundle&&l&&!e._isTranslated){var i=e.properties,n=e.keywords;i.title=w(i.title);i.subtitle=w(i.subtitle);i.info=w(i.info);if(n){for(var J=0;J<n.length;J++){n[J]=w(n[J]);}}e._isTranslated=true;}};this.refreshTile=function(){};this.setTileVisible=function(e,n){H(e,n);};this.addTile=function(e,i){if(!i){i=t;}var n=q.Deferred(),J=x(),K=this;window.setTimeout(function(){if(!J){var P=q.extend(true,{title:"A new tile was added",size:"1x1"},e,{id:"tile_0"+e.chipId});i.tiles.push(P);H(P,true);n.resolve(P);}else{K.getGroups().done(function(Q){n.reject(Q);}).fail(function(){n.reject();});}},z());return n.promise();};this.removeTile=function(e,i){var n=q.Deferred(),J=x(),K=this;window.setTimeout(function(){if(!J){e.tiles.splice(B(e,i),1);H(i,false);n.resolve();}else{K.getGroups().done(function(P){n.reject(P);}).fail(function(){n.reject();});}},z());return n.promise();};this.moveTile=function(e,i,n,S,J,K){var P=q.Deferred(),Q=x(),U=this;window.setTimeout(function(){if(!Q){if(J===undefined){J=S;}e.isLink=K?(K===U.TileType.Link):e.isLink;S.tiles.splice(i,1);J.tiles.splice(n,0,e);P.resolve(e);}else{U.getGroups().done(function(W){P.reject(W);}).fail(function(){P.reject();});}},z());return P.promise();};this.getTile=function(){var e=q.Deferred();return e.promise();};this.getCatalogs=function(){var e=q.Deferred();g.forEach(function(i){window.setTimeout(function(){e.notify(i);},300);});window.setTimeout(function(){e.resolve(g);},1500);return e.promise();};this.isCatalogsValid=function(){return true;};this.getCatalogError=function(){return;};this.getCatalogId=function(e){return e.id;};this.getCatalogTitle=function(e){return e.title;};this.getCatalogTiles=function(e){var i=q.Deferred();window.setTimeout(function(){i.resolve(e.tiles);},z());return i.promise();};this.getCatalogTileId=function(e){if(e.chipId){return e.chipId;}return"UnknownCatalogTileId";};this.getCatalogTileTitle=function(e){return e.title;};this.getCatalogTileSize=function(e){return e.size;};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewAsync(e);};this.getCatalogTileView=function(e){return this._getCatalogTileView(e);};this.getCatalogTileTargetURL=function(e){return(e.properties&&e.properties.targetURL)||null;};this.getCatalogTilePreviewTitle=function(e){return(e.properties&&e.properties.title)||null;};this.getCatalogTilePreviewInfo=function(e){return(e.properties&&e.properties.info)||null;};this.getCatalogTilePreviewIndicatorDataSource=function(e){var i;if(e.properties&&e.properties.serviceUrl){i={path:e.properties.serviceUrl,refresh:e.properties.serviceRefreshInterval};}return i;};this.getCatalogTilePreviewSubtitle=function(e){return(e.properties&&e.properties.subtitle)||null;};this.getCatalogTilePreviewIcon=function(e){return(e.properties&&e.properties.icon)||null;};this.getCatalogTileKeywords=function(e){return q.merge([],q.grep(q.merge([e.title,e.properties&&e.properties.subtitle,e.properties&&e.properties.info],(e&&e.keywords)||[]),function(n){return n!==""&&n;}));};this.getCatalogTileTags=function(e){return(e&&e.tags)||[];};this.addBookmark=function(P,e){var i=e||t,n=q.Deferred(),J=x(),K=this,Q=P.title,S=P.subtitle,U=P.info,W=P.url,X=this.isLinkPersonalizationSupported();window.setTimeout(function(){if(!J){var Y={title:Q,size:"1x1",chipId:"tile_0"+i.tiles.length,tileType:"sap.ushell.ui.tile.StaticTile",id:"tile_0"+i.tiles.length,isLinkPersonalizationSupported:X,keywords:[],properties:{icon:"sap-icon://time-entry-request",info:U,subtitle:S,title:Q,targetURL:W}};i.tiles.push(Y);H(Y,true);n.resolve(Y);}else{K.getGroups().done(function(Z){n.reject(Z);}).fail(function(){n.reject();});}},z());return n.promise();};this.updateBookmarks=function(U,P){var e=new q.Deferred(),i=0,n=this.getGroups();n.done(function(J){J.forEach(function(K){K.tiles.forEach(function(Q){if(Q.properties&&Q.properties.targetURL===U){for(var S in P){if(P.hasOwnProperty(S)){Q.properties[S]=P[S];}}var W=v[Q.id];if(W!==undefined){W.setHeader(Q.properties.title);W.setSubheader(Q.properties.subtitle);}i++;}});});e.resolve(i);});n.fail(function(){e.reject();});return e.promise();};this.deleteBookmarks=function(U){var e=q.Deferred();var i=0;var n,J,K,P;for(K=0;K<f.length;K++){n=f[K];for(P=n.tiles.length-1;P>=0;P--){J=n.tiles[P];if(J.properties.targetURL===U){n.tiles.splice(P,1);i++;}}}e.resolve(i);return e.promise();};this.countBookmarks=function(U){var e=q.Deferred();var i=0;var n,J,K,P;for(K=0;K<f.length;K++){n=f[K];for(P=0;P<n.tiles.length;P++){J=n.tiles[P];if(J.properties.targetURL===U){i++;}}}e.resolve(i);return e.promise();};this._getImageContent=function(e){return new I(e);};this.onCatalogTileAdded=function(){};this.getTileActions=function(e){return(e&&e.actions)||null;};};return d;},true);
sap.ui.predefine('sap/ushell/adapters/local/MenuAdapter',["sap/base/util/ObjectPath","sap/base/Log"],function(O,L){"use strict";var M=function(s,p,a){this._oAdapterConfig=O.get("config",a);};
M.prototype.isMenuEnabled=function(){return Promise.resolve(!!this._oAdapterConfig.enabled);};
M.prototype.getMenuEntries=function(){var m=this._oAdapterConfig.menuDataUrl;return new Promise(function(r,a){if(!m){L.error("No menuDataUrl specified in the adapter configuration.",null,"sap.ushell.adapters.local.MenuAdapter");a("No menuDataUrl specified in the adapter configuration.");return;}jQuery.ajax({type:"GET",dataType:"json",url:m}).done(function(R){r(R);}).fail(function(e){L.error(e.responseText);a("Menu entries were requested but could not be loaded from JSON file: "+m);});});};
return M;},true);
sap.ui.predefine('sap/ushell/adapters/local/NavTargetResolutionAdapter',["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils"],function(v,O,q,L,u){"use strict";var N=function(U,p,a){var A=O.create("config.applications",a);var V=v.getInbounds();b(V,A);function b(V,A){V.forEach(function(i){var I=i.semanticObject+"-"+i.action;A[I]=i.resolutionResult;});}this.resolveHashFragment=function(h){var d=new q.Deferred(),i,r,R,P;if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected","sap.ushell.renderers.minimal.Shell");}h=h.substring(1);if(!h&&!A[h]){d.resolve(undefined);}else{L.info("Hash Fragment: "+h);i=h.indexOf("?");if(i>=0){P=h.slice(i+1);h=h.slice(0,i);}r=A[h];if(r){R={additionalInformation:r.additionalInformation,applicationType:r.applicationType,url:r.url,text:r.text,fullWidth:r.fullWidth};if(P){R.url+=(R.url.indexOf("?")<0)?"?":"&";R.url+=P;}if(r.navigationMode!==undefined){R.navigationMode=r.navigationMode;}d.resolve(R);}else{d.reject("Could not resolve link '"+h+"'");}}return d.promise();};this.getSemanticObjectLinks=function(s,P){var I,r=[],i=0,d=new q.Deferred(),c;if(!s){setTimeout(function(){d.resolve([]);},0);}else{c=sap.ushell.Container.getService("URLParsing").paramsToString(P);L.info("getSemanticObjectLinks: "+s);for(I in A){if(A.hasOwnProperty(I)&&I.substring(0,I.indexOf("-"))===s){r[i]=A[I];r[i].id=I;r[i].text=r[i].text||r[i].description||"no text";r[i].intent="#"+I;if(c!==""){if(r[i].intent.indexOf("?")!==-1){r[i].intent+="&"+c;}else{r[i].intent+="?"+c;}}i+=1;}}if(r){setTimeout(function(){d.resolve(r);},0);}else{setTimeout(function(){d.reject("Could not get links for  '"+s+"'");},0);}}return d.promise();};this.isIntentSupported=function(I){var d=new q.Deferred(),s={},D=[],t=this;function c(i,S){s[i]={supported:S};}I.forEach(function(e,i){var o=new q.Deferred();D.push(o.promise());t.resolveHashFragment(e).fail(function(E){c(e,false);o.resolve();}).done(function(f){c(e,true);o.resolve();});});if(I.length>0){q.when.apply(q,D).always(function(){d.resolve(s);});}else{d.resolve(s);}return d.promise();};};return N;},true);
sap.ui.predefine('sap/ushell/adapters/local/PagePersistenceAdapter',["sap/ushell/utils","sap/ui/util/Storage","sap/base/util/ObjectPath"],function(u,S,O){"use strict";var P=function(s,p,a){var b=O.get("config.storageType",a)||S.Type.local;if(b!==S.Type.local&&b!==S.Type.session){throw new u.Error("PagePersistence Adapter Local Platform: unsupported storage type: '"+b+"'");}this._oStorage=new S(b,"com.sap.ushell.adapters.local.PagePersistence");};
P.prototype.getPage=function(i){var t=this;return new Promise(function(r,a){var p=t._oStorage.get("pages")||[];p.forEach(function(b){if(b.content.id===i){r(b);}});a({error:"No page with id '"+i+"' was found."});});};
return P;},true);
sap.ui.predefine('sap/ushell/adapters/local/PersonalizationAdapter',["sap/ushell/utils","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery"],function(u,O,q){"use strict";var m;var P=function(U,a,A){this._sStorageType=O.get("config.storageType",A)||P.prototype.constants.storage.LOCAL_STORAGE;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:break;case P.prototype.constants.storage.MEMORY:m=O.get("config.personalizationData",A)||{};break;default:throw new u.Error("Personalization Adapter Local Platform: unsupported storage type '"+this._sStorageType+"'");}};P.prototype.constants={"storage":{"MEMORY":"MEMORY","LOCAL_STORAGE":"LOCAL_STORAGE"}};
P.prototype.getAdapterContainer=function(C){return new sap.ushell.adapters.local.AdapterContainer(C,this._sStorageType);};
P.prototype.delAdapterContainer=function(C){return this.getAdapterContainer(C).del();};
sap.ushell.adapters.local.AdapterContainer=function(C,S){this._sContainerKey=C;this._sStorageType=S;this._oItemMap=new u.Map();};
function g(){var S=sap.ui.requireSync("sap/ui/util/Storage");return new S(S.Type.local,"com.sap.ushell.adapters.sandbox.Personalization");}
function p(j){try{return JSON.parse(j);}catch(e){return undefined;}}
function s(j){return JSON.stringify(j);}
function c(j){if(j===undefined){return undefined;}try{return JSON.parse(JSON.stringify(j));}catch(e){return undefined;}}
sap.ushell.adapters.local.AdapterContainer.prototype.load=function(){var d=new q.Deferred(),l,i,t=this;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){i=l.get(t._sContainerKey);t._oItemMap.entries=p(i)||{};d.resolve(t);},0);break;case P.prototype.constants.storage.MEMORY:setTimeout(function(){t._oItemMap.entries=c(m[t._sContainerKey])||{};d.resolve(t);},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};
sap.ushell.adapters.local.AdapterContainer.prototype.save=function(){var d=new q.Deferred(),l,i,t=this;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){i=s(t._oItemMap.entries);l.put(t._sContainerKey,i);d.resolve();},0);break;case P.prototype.constants.storage.MEMORY:setTimeout(function(){m[t._sContainerKey]=c(t._oItemMap.entries);d.resolve();},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};
sap.ushell.adapters.local.AdapterContainer.prototype.del=function(){var d=new q.Deferred(),l,t=this;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){l.remove(t._sContainerKey);t._oItemMap.entries={};d.resolve();},0);break;case P.prototype.constants.storage.MEMORY:setTimeout(function(){if(m&&m[t._sContainerKey]){delete m[t._sContainerKey];}t._oItemMap.entries={};d.resolve();},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};
sap.ushell.adapters.local.AdapterContainer.prototype.getItemKeys=function(){return this._oItemMap.keys();};
sap.ushell.adapters.local.AdapterContainer.prototype.containsItem=function(i){return this._oItemMap.containsKey(i);};
sap.ushell.adapters.local.AdapterContainer.prototype.getItemValue=function(i){return this._oItemMap.get(i);};
sap.ushell.adapters.local.AdapterContainer.prototype.setItemValue=function(i,I){this._oItemMap.put(i,I);};
sap.ushell.adapters.local.AdapterContainer.prototype.delItem=function(i){this._oItemMap.remove(i);};
return P;},true);
sap.ui.predefine('sap/ushell/adapters/local/SearchAdapter',["sap/ui/thirdparty/jquery"],function(q,s){"use strict";var S=function(o,p,a){this.isSearchAvailable=function(){var d=q.Deferred();d.resolve(true);return d.promise();};this.getSina=function(){return{};};};return S;},true);
sap.ui.predefine('sap/ushell/adapters/local/SupportTicketAdapter',["sap/ui/thirdparty/jquery"],function(q){"use strict";var S=function(s,p,a){this.createTicket=function(o){var d=new q.Deferred(),t="1234567";d.resolve(t);return d.promise();};};return S;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserDefaultParameterPersistenceAdapter',["sap/ui/thirdparty/jquery"],function(q){"use strict";var U=function(s,p,c){this._oConfig=c&&c.config;};
U.prototype._getPersonalizationService=function(){return sap.ushell.Container.getService("Personalization");};
U.prototype.saveParameterValue=function(p,v){var d=new q.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){q.sap.log.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer().done(function(c){c.setItemValue(p,v);c.saveDeferred(50).done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){q.sap.log.error(m);d.reject(m);});return d.promise();};
U.prototype.deleteParameter=function(p,v){var d=new q.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){q.sap.log.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer().done(function(c){c.delItem(p);c.save().done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){q.sap.log.error(m);d.reject(m);});return d.promise();};
U.prototype.loadParameterValue=function(p){var d=new q.Deferred();this._getUDContainer().done(function(c){var v=c.getItemValue(p);if(v){d.resolve(v);}else{d.reject("no value ");}}).fail(function(m){q.sap.log.error(m);d.reject(m);});return d.promise();};
U.prototype.getStoredParameterNames=function(){var d=new q.Deferred();this._getUDContainer().done(function(c){var v=c.getItemKeys();d.resolve(v);}).fail(function(m){q.sap.log.error(m);d.reject(m);});return d.promise();};
U.prototype._getUDContainer=function(){var p=this._getPersonalizationService();if(this._oPromise){return this._oPromise;}this._oPromise=p.getContainer("sap.ushell.UserDefaultParameter",{keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true});return this._oPromise;};
return U;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserInfoAdapter',["sap/ui/thirdparty/jquery","sap/ushell/services/Container","sap/ushell/services/Personalization","sap/base/util/ObjectPath"],function(q,C,P,O){"use strict";var U=function(u,p,a){var o;function g(A){var d=[{id:"sap_belize",name:"SAP Belize"}],e=O.get("config.themes",A);return e===undefined?d:e;}this.updateUserPreferences=function(b){var d=new q.Deferred();function l(e){var E="Failed to update user preferences: "+(e&&e.message?e.message:e);q.sap.log.error(E,e&&e.stack,"com.sap.ushell.adapters.local.UserInfo");}sap.ushell.Container.getServiceAsync("Personalization").then(function(c){var s={keyCategory:c.constants.keyCategory.FIXED_KEY,writeFrequency:c.constants.writeFrequency.LOW,clientStorageAllowed:true};function e(f,b){var h=b.getChangedProperties()||[];h.forEach(function(i){f.setItemValue(i.propertyName,i.newValue);});}c.getContainer("sap.ushell.UserProfile",s,undefined).done(function(f){e(f,b);f.save().fail(function(E){l(E);d.reject(E);}).done(function(){d.resolve();});}).fail(function(E){l(E);d.reject(E);});});return d.promise();};this.getThemeList=function(){var d=new q.Deferred();if(o===undefined){o=g(a);}if(o.length===0){d.reject("no themes were configured");}else{d.resolve({options:o});}return d.promise();};this.getLanguageList=function(){var d=new q.Deferred();d.resolve([{"text":"Browser Language","key":"default"},{"text":"American English","key":"en-US"},{"text":"British English","key":"en-GB"},{"text":"English","key":"en"},{"text":"German","key":"de"},{"text":"Hebrew","key":"he"},{"text":"Russian","key":"ru"}]);return d.promise();};};return U;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppCommunicationMgr',["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/Log","sap/ui/thirdparty/URI"],function(A,q,O,L,U){"use strict";var C="sap.ushell.appRuntime.ui5.AppCommunicationMgr";var s,t={},T={},a=0,b=[],p=0;
function c(){this.init=function(){var d=this;s=A.getHandlers();A.registerCommunicationHandler("sap.ushell.PostMessage",{oInboundActions:{"callTunnelFunction":{executeServiceCallFn:function(S){var e=S.oMessageData.body.content,f=d.restoreArray(e.arguments);t[e.UUID].fnCallback.apply(this,Object.values(f));return new q.Deferred().resolve().promise();}}}});d.handleMessageEvent=c.prototype._handleMessageEvent.bind(d,d);addEventListener("message",d.handleMessageEvent);};this.restoreArray=function(o){var d=[],i=0;while(o[i]){d.push(o[i]);i++;}return d;};this.destroy=function(){removeEventListener("message",this.handleMessageEvent);};this._handleMessageResponse=function(m){if(m.request_id&&b[m.request_id]){var r=b[m.request_id];if(m.status==="success"){r.resolve(m.body.result);}else{r.reject();}}};this._handleMessageRequest=function(o,m,M){var d=this,P=O.create("sap-ushell-config.services.PostMessage.config"),S=M&&M.service,e,f,g,h,i;L.debug("App Runtime received post message request from origin '"+m.origin+"': "+JSON.stringify(M),null,C);if(!S){return;}if(P&&P.enabled===false){L.warning("App Runtime received message for "+f+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,C);this.sendResponseMessage(m,M,"error",{message:"feature disabled"});return;}if(!this._isTrustedPostMessageSource(o,m)){L.warning("App Runtime received message from untrusted origin '"+m.origin+"': "+JSON.stringify(m.data),null,C);this.sendResponseMessage(m,M,"error",{message:"Invalid request"});return;}if(S.indexOf(".")>0){e=S.split(".");g=e[e.length-1];f=S.substr(0,S.length-g.length-1);}else{this.sendResponseMessage(m,M,"error",{message:"Invalid service name: '"+S+"'"});return;}var j={oMessage:m,oMessageData:M,oContainer:o};try{h=s[f];i=h&&h.oInboundActions[g];if(i&&i.executeServiceCallFn){i.executeServiceCallFn(j).done(function(r){d.sendResponseMessage(m,M,"success",{result:r});}).fail(function(k){d.sendResponseMessage(m,M,"error",{message:k});});}else{this.sendResponseMessage(m,M,"error",{message:"Unknown service name: '"+M.service+"'"});}}catch(E){this.sendResponseMessage(m,M,"error",{message:E.message});}};this._getCFLPWindow=function(){return window.parent;};this._isTrustedPostMessageSource=function(o,m){var d=false,P=o._getCFLPWindow();if(P){d=(m.source===P);}return d;};this.sendResponseMessage=function(m,M,S,B){var r=this.stringify({type:"response",service:M.service,request_id:M.request_id,status:S,body:B});L.debug("Sending post message response to origin ' "+m.origin+"': "+r,null,C);if(typeof m.source!=="object"||m.source===null){L.debug("Cannot send response message to origin ' "+m.origin,"`source` member of request message is not an object",C);return;}m.source.postMessage(r,m.origin);};this._getTargetWindow=function(){return window.parent;};this.postMessage=function(m){var d,e=this._getTargetWindow();if(m){try{if(m.type==="request"&&!m.request_id){m.request_id=this.getId();}d=this.stringify(m);e.postMessage(d,"*");}catch(f){L.error("Message '"+m+"' cannot be posted: "+f,"sap.ui5Isolation.AppCommunicationMgr");}}};this.sendMessageToOuterShell=function(m,P,r){var d=new q.Deferred(),M={"type":"request","service":m,"body":(P||{}),"request_id":r};this.postMessage(M);b[M.request_id]=d;return d.promise();};this.getId=function(){return"SAPUI5_APPRUNTIME_MSGID_"+(++p);};}
c.prototype._handleMessageEvent=function(o,m){if(m===undefined){return;}var M=m.data;if(typeof M==="string"){try{M=this.parse(m.data,this);}catch(e){L.debug("Message received from origin '"+m.origin+"' cannot be parsed: "+e,M,C);return;}}if(M.type==="request"){return o._handleMessageRequest(o,m,M);}else if(M.type==="response"){return o._handleMessageResponse(M);}};
c.prototype.stringify=function(d){var e=function(g){if(t[g]){return{type:"tunnel",UUID:t[g]};}a++;t[a]={fnCallback:g};t[g]=a;return{type:"tunnel",UUID:a};},f=[],r=JSON.stringify(d,function(k,v){if(v!==null){if(typeof v==='object'||typeof v==="function"){if(f.indexOf(v)!==-1){return;}f.push(v);}}if(typeof v==="function"){var n=T[v];if(n){return{type:"reversetunnel",UUID:n};}return e(v);}return v;});return r;};
c.prototype.parse=function(d,o){return JSON.parse(d,function(k,v){if(v&&v.type==="tunnel"){var e=function(){return o.sendMessageToOuterShell("sap.ushell.PostMessage.callTunnelFunction",{"content":{UUID:v.UUID,arguments:arguments}});};T[e]=v.UUID;return e;}else if(v&&v.type==="reversetunnel"){return t[v.UUID].fnCallback;}return v;});};
return new c();},false);
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntime',["sap/base/util/LoaderExtensions","sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppCommunicationMgr","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/URI","sap/ushell/appRuntime/ui5/SessionHandlerAgent","sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent","sap/ushell/appRuntime/ui5/services/ShellUIService","sap/ushell/ui5service/UserStatus","sap/ushell/appRuntime/ui5/services/AppConfiguration","sap/ui/core/Popup","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log","sap/ui/core/ComponentContainer","sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions"],function(L,A,a,b,U,S,c,d,e,f,P,q,i,g,C){"use strict";var p=new U().search(true),o,s,D="sap/ushell/appRuntime/ui5/AppRuntimeDefaultConfiguration.json",E=false;
function h(){this.main=function(){var t=this;a.init();Promise.all([t.getPageConfig(),c.getURLParameters(t._getURI())]).then(function(v){var u=v[1],k=u["sap-ui-app-id"];t.setModulePaths();t.init();Promise.all([t.initServicesContainer(),t.getAppInfo(k)]).then(function(v){var l=v[1];S.init();t.createApplication(k,u,l).then(function(r){t.renderApplication(r);});});});};this._getURI=function(){return new U().query(true);};this.init=function(){A.registerCommHandlers({"sap.ushell.appRuntime":{oInboundActions:{"hashChange":{executeServiceCallFn:function(k){var H=k.oMessageData.body.sHash;if(H&&H.length>0){window.hasher.replaceHash(H);}return new q.Deferred().resolve().promise();}},"setDirtyFlag":{executeServiceCallFn:function(k){var I=k.oMessageData.body.bIsDirty;if(I!==sap.ushell.Container.getDirtyFlag()){sap.ushell.Container.setDirtyFlag(I);}return new q.Deferred().resolve().promise();}},"themeChange":{executeServiceCallFn:function(k){var l=k.oMessageData.body.currentThemeId;sap.ushell.Container.getUser().setTheme(l);return new q.Deferred().resolve().promise();}},"buttonClick":{executeServiceCallFn:function(k){sap.ushell.renderers.fiori2.Renderer.handleHeaderButtonClick(k.oMessageData.body.buttonId);return new q.Deferred().resolve().promise();}},"uiDensityChange":{executeServiceCallFn:function(k){var l=k.oMessageData.body.isTouch;q("body").toggleClass("sapUiSizeCompact",(l==="0")).toggleClass("sapUiSizeCozy",(l==="1"));return new q.Deferred().resolve().promise();}}}}});};this.getPageConfig=function(){var m,k;return new Promise(function(r){L.loadResource(D,{async:true}).then(function(l){m=q("meta[name='sap.ushellConfig.ui5appruntime']")[0];k=JSON.parse(m.content);window["sap-ushell-config"]=q.extend(true,{},l,k);r();});});};this.setModulePaths=function(){if(window["sap-ushell-config"].modulePaths){var k=Object.keys(window["sap-ushell-config"].modulePaths);for(var l in k){(function(){var m={};m[k[l].replace(/\./g,"/")]=window["sap-ushell-config"].modulePaths[k[l]];sap.ui.loader.config({paths:m});}());}}};this.initServicesContainer=function(){return new Promise(function(r){sap.ui.require(["sap/ushell/appRuntime/ui5/services/Container"],function(k){k.bootstrap("apprt",{apprt:"sap.ushell.appRuntime.ui5.services.adapters"}).then(function(){r();});});});};this._getURIParams=function(){return p;};this.getAppInfo=function(k){var l=window["sap-ushell-config"].ui5appruntime.config.appIndex.data,m=window["sap-ushell-config"].ui5appruntime.config.appIndex.module,t=this;return new Promise(function(r){if(l&&!i(l)){c.getAppInfo(m,t.createApplication.bind(t),t.renderApplication.bind(t));r(l);}else{sap.ui.require([m.replace(/\./g,"/")],function(n){c.init(n,t.createApplication.bind(t),t.renderApplication.bind(t));n.getAppInfo(k).then(function(u){r(u);});});}});};this.setApplicationParameters=function(k,u){var l,m,n,r=new q.Deferred();function t(v,I){var w="";if(v&&v.length>0){w=(v.startsWith("?")?"":"?")+v;}if(I&&I.length>0){w+=(w.length>0?"&":"?")+I;}return w;}if(u.hasOwnProperty("sap-startup-params")){l=(new U("?"+u["sap-startup-params"])).query(true);if(l.hasOwnProperty("sap-intent-param")){m=l["sap-intent-param"];delete l["sap-intent-param"];}n=(new U("?")).query(l).toString();if(m){b.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{"sAppStateKey":m}).then(function(M){k.url+=t(n,M);r.resolve();},function(v){k.url+=t(n);r.resolve();});}else{k.url+=t(n);r.resolve();}}else{r.resolve();}return r.promise();};this.setHashChangedCallback=function(){function t(n){if(n&&typeof n==="string"&&n.length>0){b.sendMessageToOuterShell("sap.ushell.appRuntime.hashChange",{"newHash":n});}}window.hasher.changed.add(t.bind(this),this);};this.createApplication=function(k,u,l){var t=this,m=function(n){b.sendMessageToOuterShell("sap.ushell.services.ShellUIService.showShellUIBlocker",{"bShow":n.getParameters().visible});};return new Promise(function(r){o=new C({id:k+"-content",width:"100%",height:"100%"});var n="0";if(p.hasOwnProperty("sap-touch")){n=p["sap-touch"];if(n!=="0"&&n!=="1"){n="0";}}q("body").toggleClass("sapUiSizeCompact",(n==="0")).toggleClass("sapUiSizeCozy",(n==="1"));if(!s){sap.ushell.renderers.fiori2.utils.init();s=sap.ushell.Container.getService("ShellNavigation");s.init(function(){});s.registerNavigationFilter(function(){if(sap.ushell.Container.getDirtyFlag()){return s.NavigationFilterStatus.Abandon;}return s.NavigationFilterStatus.Continue;});}c.setComponent(o);new d({scopeObject:o,scopeType:"component"});new e({scopeObject:o,scopeType:"component"});if(P.attachBlockLayerStateChange){P.attachBlockLayerStateChange(m);}t.setApplicationParameters(l,u).done(function(){t.setHashChangedCallback();sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(v){v.createComponent({ui5ComponentName:k,applicationDependencies:l,url:l.url},"todo-replaceDummyShellHash",false).then(function(R){t.overrideSendAsEmailFn();r(R);});});});});};this.overrideSendAsEmailFn=function(){if(E===true){return;}E=true;var t;if(sap.m&&sap.m.URLHelper&&sap.m.URLHelper.triggerEmail){t=sap.m.URLHelper.triggerEmail;sap.m.URLHelper.triggerEmail=function(T,k,B,l,m){if((k&&k.includes(document.URL))||(B&&B.includes(document.URL))){sap.ushell.Container.getFLPUrl(true).then(function(u){if(B&&B.includes(document.URL)){B=B.replace(document.URL,u);}if(k&&k.includes(document.URL)){k=k.replace(document.URL,u);}t.call(sap.m.URLHelper,T,k,B,l,m);},function(n){g.error("Could not retrieve FLP URL",n,"sap.ushell.appRuntime.ui5.appRuntime");});}else{t.call(sap.m.URLHelper,T,k,B,l,m);}};}};this.renderApplication=function(r){o.setComponent(r.componentHandle.getInstance()).placeAt("content");};}
var j=new h();j.main();return j;});
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimePostMessage',["sap/ui/thirdparty/jquery"],function(q){"use strict";var a={};
function A(){this.getHandlers=function(){return a;};this.registerCommHandlers=function(c){var i=[];Object.keys(c).forEach(function(k){var C=c[k];if(C.oInboundActions){Object.keys(C.oInboundActions).forEach(function(b){i.push({action:b,service:k});});}});q.extend(a,c);return i;};this.registerCommunicationHandler=function(k,c){var C=a[k],i=[];if(!C){C=a[k]={oInboundActions:{}};}if(c.oInboundActions){Object.keys(c.oInboundActions).forEach(function(b){C.oInboundActions[b]=c.oInboundActions[b];i.push({action:b,service:k});});}return i;};this._getPostMesageInterface=function(s,i){var c=a[s],I;if(c&&c.oRequestCalls&&c.oRequestCalls[i]){I=c.oRequestCalls[i];}return I;};}
return new A();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI',["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A,a){"use strict";
function b(){this.getHandlers=function(){return A.getHandlers();};this.registerCommHandlers=function(c){var i=A.registerCommHandlers(c);a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.subscribe",i);};this.registerCommunicationHandler=function(k,c){var i=A.registerCommunicationHandler(k,c);a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.subscribe",i);};this._getPostMesageInterface=function(s,i){return A._getPostMesageInterface(s,i);};}
return new b();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimeService',["sap/ushell/appRuntime/ui5/AppCommunicationMgr"],function(A){"use strict";
function a(){this.sendMessageToOuterShell=function(m,p,r){return A.sendMessageToOuterShell(m,p,r);};}
return new a();},false);
sap.ui.predefine('sap/ushell/appRuntime/ui5/SessionHandlerAgent',["sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/jquery"],function(A,a,q){"use strict";
function S(){this.init=function(){var t=this;A.registerCommunicationHandler("sap.ushell.sessionHandler",{oInboundActions:{"logout":{executeServiceCallFn:function(m){return t.handleLogoutEvent(m);}},"extendSessionEvent":{executeServiceCallFn:function(m){return t.handleExtendSessionEvent(m);}}}});this.attachUserEvents();this.userActivityHandler();};this.handleLogoutEvent=function(){var d=new q.Deferred();this.detachUserEvents();sap.ushell.Container.logout().then(function(){return d.resolve().promise();});return d.promise();};this.handleExtendSessionEvent=function(){sap.ushell.Container.sessionKeepAlive();return new q.Deferred().resolve().promise();};this.attachUserEvents=function(){q(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this));};this.detachUserEvents=function(){q(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");q(document).off("keydown.sessionTimeout");q(document).off("touchstart.sessionTimeout");};this.userActivityHandler=function(e){if(this.oUserActivityTimer!==undefined){return;}var t=this;this.oUserActivityTimer=setTimeout(function(){a.sendMessageToOuterShell("sap.ushell.sessionHandler.notifyUserActive",{});t.oUserActivityTimer=undefined;},1000);};}
var s=new S();return s;});
sap.ui.predefine('sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer',["sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/Log"],function(A,L){"use strict";var b=[];
function R(){var t=this;sap.ushell=(sap.ushell||{});sap.ushell.renderers=(sap.ushell.renderers||{});sap.ushell.renderers.fiori2=(sap.ushell.renderers.fiori2||{});sap.ushell.renderers.fiori2.Renderer=this;["init","createContent","createExtendedShellState","applyExtendedShellState","showLeftPaneContent","showHeaderItem","showRightFloatingContainerItem","showRightFloatingContainer","showToolAreaItem","showActionButton","showFloatingActionButton","showHeaderEndItem","setHeaderVisibility","showSubHeader","showSignOutItem","showSettingsItem","setFooter","setShellFooter","setFooterControl","hideHeaderItem","removeToolAreaItem","removeRightFloatingContainerItem","hideActionButton","hideLeftPaneContent","hideFloatingActionButton","hideSubHeader","removeFooter","getCurrentViewportState","addShellSubHeader","addSubHeader","addUserAction","addActionButton","addFloatingButton","addFloatingActionButton","addSidePaneContent","addLeftPaneContent","addHeaderItem","addRightFloatingContainerItem","addToolAreaItem","getModelConfiguration","addEndUserFeedbackCustomUI","addUserPreferencesEntry","setHeaderTitle","setLeftPaneVisibility","showToolArea","setHeaderHiding","setFloatingContainerContent","setFloatingContainerVisibility","getFloatingContainerVisiblity","getRightFloatingContainerVisibility","setFloatingContainerDragSelector","makeEndUserFeedbackAnonymousByDefault","showEndUserFeedbackLegalAgreement","createTriggers","convertButtonsToActions","createItem","addEntryInShellStates","removeCustomItems","addCustomItems","addRightViewPort","addLeftViewPort","getShellController","getViewPortContainerCurrentState","ViewPortContainerNavTo","switchViewPortStateByControl","setMeAreaSelected","getMeAreaSelected","setNotificationsSelected","getNotificationsSelected","addShellDanglingControl","getShellConfig","getEndUserFeedbackConfiguration","reorderUserPrefEntries","addUserProfilingEntry","logRecentActivity","setCurrentCoreView","getCurrentCoreView"].forEach(function(m){t[m]=function(){L.error("'Renderer' api '"+m+"' is not supported when UI5 application is running inside an iframe (sap.ushell.appRuntime.ui5.renderers.fiori2.Renderer)");};});this.LaunchpadState={App:"app",Home:"home"};this._addButtonHandler=function(i,h){b[i]=h;};this.handleHeaderButtonClick=function(B){if(b[B]!==undefined){b[B]();}};this.addHeaderItem=function(c,C,i,a,s){this._addHeaderItem("sap.ushell.services.Renderer.addHeaderItem",C,i,a,s);};this.addHeaderEndItem=function(c,C,i,a,s){this._addHeaderItem("sap.ushell.services.Renderer.addHeaderEndItem",C,i,a,s);};this.showHeaderItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.showHeaderItem",{"aIds":i,"bCurrentState":true,"aStates":""});};this.showHeaderEndItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.showHeaderEndItem",{"aIds":i,"bCurrentState":true,"aStates":""});};this.hideHeaderItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.hideHeaderItem",{"aIds":i,"bCurrentState":true,"aStates":""});};this.hideHeaderEndItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.hideHeaderEndItem",{"aIds":i,"bCurrentState":true,"aStates":""});};this._addHeaderItem=function(a,c,i){if(c.click!==undefined){b[c.id]=c.click;}A.sendMessageToOuterShell(a,{sId:c.id,sTooltip:c.tooltip,sIcon:c.icon,bVisible:i,bCurrentState:true});};this.setHeaderTitle=function(T){A.sendMessageToOuterShell("sap.ushell.services.Renderer.setHeaderTitle",{"sTitle":T});};this.setHeaderVisibility=function(v,c,s){A.sendMessageToOuterShell("sap.ushell.services.Renderer.setHeaderVisibility",{"bVisible":v,"bCurrentState":c,"aStates":s});};}
return new R();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions',['sap/ushell/EventHub','sap/base/util/ObjectPath'],function(E,O){"use strict";
function _(C){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"});},0);E.emit("RendererLoaded",{rendererName:"fiori2"});}
function a(x,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",x,D);},0);}
function b(I,L,x){}
function c(I,L,x){}
function d(I,L,x){}
function e(I,L,x){}
function f(B,L,x){}
function g(B,L,x){}
function h(C,L,x){}
function i(L,x){}
function j(I,L,x){}
function k(I,L,x){}
function l(I,L,x){}
function m(I,L,x){}
function n(){return{};}
function o(I,L,T,x){}
function p(C,S){}
function q(x){}
function r(T){}
function s(L,V){}
function t(H){}
function u(F){}
function v(){}
function R(){this.addHeaderItem=d;this.setHeaderItemVisibility=o;this.addSubHeader=b;this.removeSubHeader=c;this.addHeaderEndItem=l;this.removeHeaderItem=e;this.removeHeaderEndItem=m;this.addEndUserFeedbackCustomUI=p;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=g;this.setFooter=u;this.removeFooter=v;this.addUserPreferencesEntry=q;this.setHeaderTitle=r;this.setHeaderHiding=t;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=j;this.removeFloatingActionButton=k;this.setLeftPaneContent=h;this.removeLeftPaneContent=i;this.setLeftPaneVisibility=s;this.getConfiguration=n;}
var w=new R();var U={publishExternalEvent:a,init:_};O.set("sap.ushell.renderers.fiori2.utils",U);O.set("sap.ushell.renderers.fiori2.RendererExtensions",w);return w;},false);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppDelegationBootstrap',["sap/ushell/appRuntime/ui5/services/TunnelsAgent"],function(t){"use strict";
function A(){this.init=function(){};this.bootstrap=function(){t.reflectEvents({"addlistener":{iInterface:document,sFuncName:"addEventListener",fnProxy:function(e,c,u){var C={};if(c.getPairedInterface){C={pairedInterface:c.getPairedInterface()};}else{C=c;}return[e,C,u];},fnSpy:function(e){return e==="click"||e==="keypress";}},"removelistener":{iInterface:document,sFuncName:"removeEventListener",fnProxy:function(e,c,u){var C={};if(c.getPairedInterface){C={pairedInterface:c.getPairedInterface()};}else{C=c;}return[e,C,u];},fnSpy:function(e){return e==="click"||e==="keypress";}},"appOpening":{iInterface:sap.ui.getCore().getEventBus(),sFuncName:"subscribe",fnSpy:function(p,e){return p==="launchpad"&&e==="appOpening";}}});};}
return new A();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent',["sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/util/UriParameters","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/ushell/appRuntime/ui5/services/TunnelsAgent","sap/ushell/appRuntime/ui5/services/AppDelegationBootstrap"],function(A,a,U,b,q,t,d){"use strict";
function c(C){var e=this,f,g,o={},r,R,h={};this.getAppInfo=function(m,i,j){sap.ui.require([m.replace(/\./g,"/")],function(f){e.init(f,i,j);});};this.init=function(i,j,k){f=i;g=j;R=k;A.registerCommHandlers({"sap.ushell.services.appLifeCycle":{"oInboundActions":{"create":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data),s=new U(M.body.sUrl).get("sap-ui-app-id");window.hasher.replaceHash(M.body.sHash);e.create(s,M.body.sUrl);return new q.Deferred().resolve().promise();}},"destroy":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data);e.destroy(M.body.sCacheId);return new q.Deferred().resolve().promise();}},"store":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data);e.store(M.body.sCacheId);return new q.Deferred().resolve().promise();}},"restore":{executeServiceCallFn:function(m){var M=JSON.parse(m.oMessage.data);window.hasher.replaceHash(M.body.sHash);e.restore(M.body.sCacheId);return new q.Deferred().resolve().promise();}}}},"sap.ushell.eventDelegation":{"oInboundActions":{"registerEventHandler":{executeServiceCallFn:function(s){var E=JSON.parse(s.oMessageData.body.sEventObject),l=E.eventKey,m=E.eventData;if(h.hasOwnProperty(l)){var n=h[l];for(var p=0;p<n.length;p++){n[p](m);}}return new q.Deferred().resolve().promise();}}}}});this.initialSetup();};this.initialSetup=function(){d.bootstrap();a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.setup",{isStateful:true,isKeepAlive:true,lifecycle:{bActive:true,bSwitch:true,bStorageIdentifier:true},settings:{bTheme:true,bLocal:true},session:{bSignOffSupport:true,bExtendSessionSupport:true}});};this.restore=function(s){var i=o[s],j=i.getComponentInstance();i.setVisible(true);if(j){if(j.restore){j.restore();}if(j.getRouter&&j.getRouter()&&j.getRouter().initialize){j.getRouter().initialize();}r=i;}};this.store=function(s){var i=r,j;o[s]=i;j=i.getComponentInstance();i.setVisible(false);if(j){if(j.suspend){j.suspend();}if(j.getRouter&&j.getRouter()){j.getRouter().stop();}}};this.getURLParameters=function(u){return new Promise(function(i,j){if(u.hasOwnProperty("sap-intent-param")){var s=u["sap-intent-param"];a.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{"sAppStateKey":s}).then(function(p){delete u["sap-intent-param"];var k=q.extend({},u,(new b("?"+p)).query(true),true);i(k);},function(E){i(u);});}else{i(u);}});};this.create=function(i,u){var j=new Promise(function(k){f.getAppInfo(i).then(function(l){k(l);});}).then(function(k){e.getURLParameters(new b(u).query(true)).then(function(l){g(i,l,k).then(function(m){R(m);});});});return j;};this.setComponent=function(i){r=i;};this.destroy=function(s){if(s){if(o[s]===r){r=undefined;}o[s].destroy();delete o[s];}else if(r){r.destroy();r=undefined;}};this.jsonStringifyFn=function(j){var s=JSON.stringify(j,function(k,v){return(typeof v==="function")?v.toString():v;});return s;};}
return new c();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppState',["sap/ushell/services/AppState","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/services/_AppState/AppState","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(A,a,b,u,q){"use strict";
function c(o,C,p,d){A.call(this,o,C,p,d);this.getAppState=function(k){var D=new q.Deferred();a.sendMessageToOuterShell("sap.ushell.services.AppState.getAppState",{"sKey":k}).done(function(s){var e=new b(sap.ushell.Container.getService("AppState"),s._sKey,s._bModifiable,s._sData,s._sAppName,s._sACHComponent,s._bTransient,s._iPersistencyMethod,s._oPersistencySettings);D.resolve(e);});return D.promise();};this._saveAppState=function(k,D,s,e,t,P,f){return a.sendMessageToOuterShell("sap.ushell.services.AppState._saveAppState",{"sKey":k,"sData":D,"sAppName":s,"sComponent":e,"bTransient":t,"iPersistencyMethod":P,"oPersistencySettings":f});};this._loadAppState=function(k){return a.sendMessageToOuterShell("sap.ushell.services.AppState._loadAppState",{"sKey":k});};this.getAppStateData=function(k){return a.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{"sAppStateKey":k});};this.createNewInAppState=function(D){return a.sendMessageToOuterShell("sap.ushell.services.AppState.createNewInAppState",{"sData":D});};this.updateInAppStateData=function(D){return a.sendMessageToOuterShell("sap.ushell.services.AppState.updateInAppState",{"sData":D});};this.getInAppStateData=function(){return a.sendMessageToOuterShell("sap.ushell.services.AppState.getInAppStateData");};this.makeStatePersistent=function(k,P,e){return a.sendMessageToOuterShell("sap.ushell.services.AppState.makeStatePersistent",{"sKey":k,"iPersistencyMethod":P,"oPersistencySettings":e});};}
c.prototype=Object.create(A.prototype);c.hasNoAdapter=A.hasNoAdapter;c.WindowAdapter=A.WindowAdapter;return c;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/Bookmark',["sap/ushell/services/Bookmark","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(B,A){"use strict";
function a(c,p,s){B.call(this,c,p,s);this.addBookmark=function(P,g){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addBookmarkUI5",{"oParameters":P,"oGroup":g});};this.getShellGroupIDs=function(){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.getShellGroupIDs");};this.addBookmarkByGroupId=function(P,g){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addBookmark",{"oParameters":P,"groupId":g});};this.addCatalogTileToGroup=function(C,g,o){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addCatalogTileToGroup",{"sCatalogTileId":C,"sGroupId":g,"oCatalogData":o});};this.countBookmarks=function(u){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.countBookmarks",{"sUrl":u});};this.deleteBookmarks=function(u){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.deleteBookmarks",{"sUrl":u});};this.updateBookmarks=function(u,P){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.updateBookmarks",{"sUrl":u,"oParameters":P});};}
a.prototype=Object.create(B.prototype);a.hasNoAdapter=B.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/Container',["sap/ushell/services/Container","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer"],function(c,A,R){"use strict";
function C(){var o;this.bootstrap=function(p,a){return sap.ushell.bootstrap(p,a).then(function(b){o=sap.ushell.Container.setDirtyFlag;sap.ushell.Container.runningInIframe=function(){try{return window.self!==window.top;}catch(e){return true;}};sap.ushell.Container.setDirtyFlag=function(i){o(i);A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setDirtyFlag",{"bIsDirty":i});};sap.ushell.Container.getFLPUrl=function(i){return A.sendMessageToOuterShell("sap.ushell.services.Container.getFLPUrl",{"bIncludeHash":i});};sap.ushell.Container.getRenderer=function(){return R;};});};}
return new C();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/CrossApplicationNavigation',["sap/ushell/services/CrossApplicationNavigation","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/services/_AppState/AppState","sap/ui/thirdparty/jquery"],function(C,A,a,q){"use strict";
function b(c,p,s){C.call(this,c,p,s);this.backToPreviousApp=function(){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.backToPreviousApp");};this.expandCompactHash=function(h){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.expandCompactHash",{"sHashFragment":h});};this.getDistinctSemanticObjects=function(){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getDistinctSemanticObjects");};this.getLinks=function(v){if(Array.isArray(v)){v.forEach(function(e){if(e[0]){delete e[0].ui5Component;}});}else{delete v.ui5Component;}return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getLinks",v);};this.getPrimaryIntent=function(S,P){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getPrimaryIntent",{"sSemanticObject":S,"mParameters":P});};this.getSemanticObjectLinks=function(S,P,i,o,d,e){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks",{"sSemanticObject":S,"mParameters":P,"bIgnoreFormFactor":i,"sAppStateKey":d,"bCompactIntents":e});};this.historyBack=function(S){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.historyBack",{"iSteps":S});};this.isIntentSupported=function(i,o){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isIntentSupported",{"aIntents":i});};this.isNavigationSupported=function(i,o){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isNavigationSupported",{"aIntents":i});};this.toExternal=function(o,d){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.toExternal",{"oArgs":o});};this.getAppState=function(o,d){var D=new q.Deferred();A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppState",{"sAppStateKey":d}).done(function(S){var e=new a(sap.ushell.Container.getService("AppState"),S._sKey,S._bModifiable,S._sData,S._sAppName,S._sACHComponent,S._bTransient);D.resolve(e);});return D.promise();};}
b.prototype=Object.create(C.prototype);b.hasNoAdapter=C.hasNoAdapter;return b;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/LaunchPage',["sap/ushell/services/LaunchPage","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(L,A){"use strict";
function a(c,p,s){L.call(this,c,p,s);this.getGroupsForBookmarks=function(){return A.sendMessageToOuterShell("sap.ushell.services.LaunchPage.getGroupsForBookmarks");};}
a.prototype=Object.create(L.prototype);a.hasNoAdapter=L.hasNoAdapter;return a;},false);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/TunnelsAgent',["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A){"use strict";
function T(){var t={},a=this;this.reflectEvents=function(s){for(var S in s){if(s.hasOwnProperty(S)){this.reflectEventEntry(S,s[S]);}}};this.reflectEventEntry=function(s,S){var i=S.iInterface,f=S.sFuncName,b=s,c=S.fnSpy,p=S.fnProxy,e="",C=function(){var o=arguments,d=c.apply(undefined,arguments);if(p){o=p.apply(undefined,arguments);}if(d){a.callTunnel({tunnelName:b,oData:o});}};if(!S.iInterface){e+="strategy "+s+" is missing mandatory property 'iInterface'.\n";}if(!S.sFuncName){e+="strategy "+s+" is missing mandatory property 'sFuncName'.\n";}if(e){throw e;}this.replace({iInterface:i,sFuncName:f,fnCallback:C,sWrap:"after"});};this.getCallTunnelFunction=function(){var t={},a=this;return function(p){var f=p.tunnelName,o=p.oData;if(!t[f]){a.getTunnel(f).done(function(r){t[f]=r.endPoint;t[f].apply(undefined,o);});}else{t[f].apply(undefined,o);}};};this.callTunnel=function(p){var f=p.tunnelName,o=p.oData;return new Promise(function(r){if(!t[f]){a.getTunnel(f).done(function(R){t[f]=R.endPoint;t[f].apply(undefined,o).done(function(d){r(d);});});}else{t[f].apply(undefined,o).done(function(d){r(d);});}});};this.replace=function(p){var o=p.iInterface[p.sFuncName],w=p.sWrap;p.iInterface[p.sFuncName]=function(){if(w==="before"){o.apply(this,arguments);}p.fnCallback.apply(undefined,arguments);if(w==="after"){o.apply(this,arguments);}};return{getOriginal:function(){return o;}};};this.useInterface=function(d){var i=d.name,c=d.callback,p=d.params;var C="sap.ushell.tunnelRegistry."+i;A.sendMessageToOuterShell(C,p).done(c);};this.getTunnel=function(s){var c="sap.ushell.tunnelRegistry."+s;return A.sendMessageToOuterShell(c,{});};this.usePairedInterface=function(c){var s=c.sService,m=c.sMethodName,p=c.fnPackArgs,C=s+"."+m;var b=function(){var P=p.apply(undefined,arguments);return A.sendMessageToOuterShell(C,P);};b.getPairedInterface=function(){return[s,m].join('.');};return b;};}
return new T();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/UserInfo',["sap/ushell/services/UserInfo","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/Log"],function(U,A,L){"use strict";
function a(o,c){U.call(this,o,c);this.getUser=function(){L.warning("'UserInfo.getUser' is private API and should not be called");};this.getThemeList=function(){L.warning("'UserInfo.getThemeList' is private API and should not be called");};this.updateUserPreferences=function(){L.warning("'UserInfo.updateUserPreferences' is private API and should not be called");};this.getLanguageList=function(){L.warning("'UserInfo.getLanguageList' is private API and should not be called");};}
a.prototype=Object.create(U.prototype);a.hasNoAdapter=U.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/adapters/ContainerAdapter',["sap/ushell/User","sap/ui/thirdparty/jquery"],function(U,q){"use strict";var C=function(s,p,a){var u;this.load=function(){u=new U({});return new q.Deferred().resolve().promise();};this.getSystem=function(){return s;};this.getUser=function(){return u;};this.logout=function(){return new q.Deferred().resolve().promise();};};return C;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/ui/UIProxy',["sap/m/Button"],function(B){"use strict";
function U(){sap.ushell=sap.ushell||{};sap.ushell.ui=sap.ushell.ui||{};sap.ushell.ui.footerbar={JamDiscussButton:function(){return new B();},JamShareButton:function(){return new B();},AddBookmarkButton:function(){return new B();}};}
return new U();});
sap.ui.predefine('sap/ushell/applications/PageComposer/Component',["sap/ui/core/UIComponent","./controller/ErrorDialog","sap/ui/model/json/JSONModel","./util/PagePersistence"],function(U,E,J,P){"use strict";return U.extend("sap.ushell.applications.PageComposer.Component",{metadata:{"manifest":"json"},_role:null,_oTransportPromise:null,init:function(){U.prototype.init.apply(this,arguments);this.getRouter().initialize();var c=this.getComponentData();var s=c&&c.startupParameters;this._handleStartupParams(s||{});this.getModel("PageRepository").setHeaders({"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()});this.setMetaModelData();this.setModel(sap.ui.getCore().getMessageManager().getMessageModel(),"message");},getPageRepository:function(){if(!this.oPagePersistenceInstance){this.oPagePersistenceInstance=new P(this.getModel("PageRepository"),this.getModel("i18n").getResourceBundle(),this.getModel("message"));}return this.oPagePersistenceInstance;},isTransportSupported:function(){var m=this.getManifestEntry("sap.ui5");return!!m.componentUsages&&!!m.componentUsages.transportInformation&&!!m.componentUsages.transportInformation.componentData&&m.componentUsages.transportInformation.componentData.supported;},_saveRole:function(r){this._sRole=r;},getRole:function(){return this._sRole;},_handleStartupParams:function(s){var p=s.pageId&&s.pageId[0];var r=s.roleId&&s.roleId[0];var m=s.mode&&s.mode[0];this._saveRole(r);if(p){m=["edit","view"].indexOf(m)>-1?m:"view";this.getRouter().navTo(m,{pageId:encodeURIComponent(p)},true);}},showErrorDialog:function(e){E.open(e,this.getModel("i18n"));},createTransportComponent:function(p){if(this.isTransportSupported()){if(!this._oTransportPromise){this._oTransportPromise=this.createComponent({async:true,usage:"transportInformation"});}return this._oTransportPromise.then(function(t){t.reset({"package":p});return t;});}return Promise.reject();},setMetaModelData:function(){this.getModel("PageRepository").getMetaModel().loaded().then(function(){var m=this.getModel("PageRepository").getMetaModel();var M={copySupported:!!m.getODataFunctionImport("copyPage"),deleteSupported:!!m.getODataFunctionImport("deletePage"),createSupported:this.getMetadata().getConfig().enableCreate,previewSupported:this.getMetadata().getConfig().enablePreview};this.setModel(new J(M),"SupportedOperationModel");}.bind(this));}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/App.controller',["./BaseController"],function(B){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.App",{});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/BaseController',["sap/ui/core/mvc/Controller","sap/ui/core/UIComponent","../util/Transport","sap/m/MessageBox","sap/base/Log"],function(C,U,T,M,L){"use strict";return C.extend("sap.ushell.applications.PageComposer.controller.BaseController",{getPageRepository:function(){return this.getOwnerComponent().getPageRepository();},getRouter:function(){return U.getRouterFor(this);},getModel:function(n){return this.getView().getModel(n);},setModel:function(m,n){return this.getView().setModel(m,n);},getRootView:function(){return this.getOwnerComponent().getRootControl();},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle();},getTransportHelper:function(){if(!this.oTransportHelper){this.oTransportHelper=new T();}return this.oTransportHelper;},_createEditDialog:function(o,a){return new Promise(function(r){sap.ui.require(["sap/ushell/applications/PageComposer/controller/EditDialog.controller"],function(E){if(!this.oEditPageDialogController){this.oEditPageDialogController=new E(this.getRootView(),this.getResourceBundle());}this.oEditPageDialogController.attachCancel(a);this.oEditPageDialogController.attachConfirm(o);this.oEditPageDialogController.load().then(function(){r(this.oEditPageDialogController);}.bind(this));}.bind(this));}.bind(this));},showCreateDialog:function(o,a){return new Promise(function(r,b){sap.ui.require(["sap/ushell/applications/PageComposer/controller/CreatePageDialog.controller"],function(c){if(!this.oCreatePageDialogController){this.oCreatePageDialogController=new c(this.getRootView(),this.getResourceBundle());}this.oCreatePageDialogController.attachConfirm(o);this.oCreatePageDialogController.attachCancel(a);this.oCreatePageDialogController.load().then(function(){if(this.getOwnerComponent().isTransportSupported()){return this.getOwnerComponent().createTransportComponent().then(function(t){return this.getTransportHelper().enhanceDialogWithTransport(this.oCreatePageDialogController,t,o);}.bind(this));}return this.oCreatePageDialogController;}.bind(this)).then(function(e){if(e){e.open();}r();}).catch(function(e){this.oCreatePageDialogController.destroy();this.handleBackendError(e);b();}.bind(this));}.bind(this));}.bind(this));},_createDeleteDialog:function(o,a){return new Promise(function(r){sap.ui.require(["sap/ushell/applications/PageComposer/controller/DeleteDialog.controller"],function(D){if(!this.oDeletePageDialogController){this.oDeletePageDialogController=new D(this.getRootView(),this.getResourceBundle());}this.oDeletePageDialogController.attachCancel(a);this.oDeletePageDialogController.attachConfirm(o);this.oDeletePageDialogController.load().then(function(){r(this.oDeletePageDialogController);}.bind(this));}.bind(this));}.bind(this));},checkShowEditDialog:function(p,o,a){var e=this.handleBackendError.bind(this);if(!this.getOwnerComponent().isTransportSupported()){return Promise.resolve();}return this.getOwnerComponent().createTransportComponent(p.metadata.devclass).then(function(t){return Promise.all([t.showTransport(p),t.showLockedMessage(p)]).then(function(r){var s=r[0];var l=r[1];if(l){this.showMessageBoxError(this.getResourceBundle().getText("EditDialog.LockedText",[l.foreignOwner]),true);}else if(s){this._createEditDialog(o,a).then(function(d){d.getModel().setProperty("/message",this.getResourceBundle().getText("EditDialog.TransportRequired"));var E=this.getTransportHelper().enhanceDialogWithTransport(d,t,o);E.open();}.bind(this)).catch(e);}}.bind(this)).catch(e);}.bind(this)).catch(e);},checkShowDeleteDialog:function(p,o,a){var r=this.getResourceBundle();var e=this.handleBackendError.bind(this);if(!this.getOwnerComponent().isTransportSupported()){return this._createDeleteDialog(o,a).then(function(d){d.getModel().setProperty("/message",r.getText("DeleteDialog.Text"));d.open();});}return this.getOwnerComponent().createTransportComponent(p.metadata.devclass).then(function(t){return Promise.all([t.showTransport(p),t.showLockedMessage(p)]).then(function(R){var s=R[0];var l=R[1];if(l){this.showMessageBoxError(r.getText("DeleteDialog.LockedText",[l.foreignOwner]),true);}else{this._createDeleteDialog(o,a).then(function(d){d.getModel().setProperty("/message",r.getText("DeleteDialog.Text"));if(s){d.getModel().setProperty("/message",r.getText("DeleteDialog.TransportRequired"));d=this.getTransportHelper().enhanceDialogWithTransport(d,t,o);}d.open();}.bind(this)).catch(e);}}.bind(this)).catch(e);}.bind(this)).catch(e);},showCopyDialog:function(p,o,a){return new Promise(function(r,b){sap.ui.require(["sap/ushell/applications/PageComposer/controller/CopyPageDialog.controller"],function(c){if(!this.oCopyPageDialogController){this.oCopyPageDialogController=new c(this.getRootView(),this.getResourceBundle());}this.oCopyPageDialogController.attachConfirm(o);this.oCopyPageDialogController.attachCancel(a);return this.oCopyPageDialogController.load().then(function(){if(this.getOwnerComponent().isTransportSupported()){return this.getOwnerComponent().createTransportComponent().then(function(t){return this.getTransportHelper().enhanceDialogWithTransport(this.oCopyPageDialogController,t,o);}.bind(this));}return this.oCopyPageDialogController;}.bind(this)).then(function(e){if(e){e.open();e.getModel().setProperty("/sourceId",p.content.id);e.getModel().setProperty("/sourceTitle",p.content.title);}r();}).catch(function(e){this.oCopyPageDialogController.destroy();this.handleBackendError(e);b(e);}.bind(this));}.bind(this));}.bind(this));},showMessageBoxError:function(e,n){if(n){M.error(e,{onClose:function(){this.navigateToPageOverview();}.bind(this)});}else{M.error(e);}},showMessageBoxWarning:function(w,n){if(n){M.warning(w,{onClose:function(){this.navigateToPageOverview();}.bind(this)});}else{M.warning(w);}},navigateToPageOverview:function(){this.getRouter().navTo("overview");},navigateToErrorPage:function(p){this.getRouter().navTo("error",{pageId:encodeURIComponent(p)},null,true);},preview:function(e){var s=e.getSource();var p=this.getRootView().getId();sap.ui.require(["sap/ushell/applications/PageComposer/controller/PagePreviewDialog.controller"],function(P){P.open(s,p);});},checkMasterLanguageMismatch:function(p){var c=this.getOwnerComponent().getMetadata().getConfig().checkLanguageMismatch;var u=sap.ui.getCore().getConfiguration().getSAPLogonLanguage().toUpperCase();var P=p.content.masterLanguage.toUpperCase();if(c&&u!==P){this.showMessageBoxError(this.getResourceBundle().getText("EditDialog.LanguageMismatch",[P,u]),true);return true;}return false;},handleBackendError:function(e){if(e.responseText){this.getOwnerComponent().showErrorDialog(e);}else{L.error(e);}},onRouteLeave:function(){this.getPageRepository().abortPendingBackendRequests();},fetchCatalogInfo:function(p,r){return Promise.all(this.getPageRepository().getCatalogs(p,r)).then(function(c){var a=[],v=[],V={},b=[],d=[],o={},e={};c.forEach(function(f){a.push.apply(a,f);});for(var j=0;j<a.length;j++){o=a[j];v=o.visualizations.results||[];d.push(v);b.push(o.title);for(var i=0;i<v.length;i++){e=v[i];delete e.__metadata;V[v[i].vizId]=v[i];}}return{catalogTiles:d,catalogTitles:b,catalogTilesData:V};}).catch(function(e){this.handleBackendError(e);return{catalogTiles:[],catalogTitles:[],catalogTilesData:{}};}.bind(this));},fetchRoles:function(p){return this.getPageRepository().getRoles(p).then(function(r){return r||[];}).catch(function(e){this.handleBackendError(e);return[];}.bind(this));},onfilterErrorMessages:function(p){function f(a,q){return a.filter(function(o){return o.target.toLowerCase().indexOf(q.toLowerCase())!==-1;});}var m=this.getModel("message").getData();var e=f(m,"/pageSet('"+p+"')");return e;}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/BaseDialog.controller',["sap/ui/core/library","sap/base/util/merge","./BaseController","sap/ui/core/Fragment"],function(c,m,B,F){"use strict";var V=c.ValueState;return B.extend("sap.ushell.applications.PageComposer.controller.BaseDialog.controller",{destroy:function(){if(this._oView.byId(this.sViewId)){this._oView.byId(this.sViewId).destroy();}},onCancel:function(){this._oView.byId(this.sViewId).close();if(this._fnCancel){this._fnCancel();}},attachConfirm:function(a){this._fnConfirm=a;},onConfirm:function(e){if(this._fnConfirm){this._fnConfirm(e);}},getModel:function(){return this._oModel;},validate:function(v){for(var i in v){if(!v[i]){return false;}}return true;},attachCancel:function(a){this._fnCancel=a;},transportExtensionPoint:function(a){this._oView.byId("transportContainer").setComponent(a);},load:function(){var f={id:this._oView.getId(),name:this.sId,controller:this};return F.load(f).then(function(a){a.setModel(this._oModel);}.bind(this));},open:function(){var d=this._oView.byId(this.sViewId);this._oView.addDependent(d);d.open();},handlePackageNamespaceChange:function(p,f){var t=this._oView.byId("transportContainer").getComponentInstance(),P=t&&t.getRootControl().byId("packageInput");if(P&&!P.getValue().length){var s=p.split("/");s.pop();s=s.join("/");if(s){if(f){P.fireLiveChange({value:s});}else{P.setValue(s);P.fireChange({value:s});}}}},onDescriptionLiveChange:function(e){var i=e.getSource(),M=this.getModel(),I=i.getValue(),b=!!I,v=m({},M.getProperty("/validation"),{description:b}),s=b?V.None:V.Error;M.setProperty("/validation",v);i.setValueState(s);},onTitleLiveChange:function(e){var i=e.getSource(),M=this.getModel(),I=i.getValue(),b=this.isValidTitle(I),v=m({},M.getProperty("/validation"),{title:b}),s=b?V.None:V.Error;M.setProperty("/validation",v);i.setValueState(s);},onPageIDLiveChange:function(e){var i=e.getSource(),M=this.getModel(),I=i.getValue(),b=this.isValidID(I),v=m({},M.getProperty("/validation"),{id:b}),s=b?V.None:V.Error;M.setProperty("/validation",v);i.setValueState(s);if(I.length>0){i.setValueStateText(this._oResourceBundle.getText("Message.InvalidPageID"));}else{i.setValueStateText(this._oResourceBundle.getText("Message.EmptyPageID"));}this.handlePackageNamespaceChange(I,true);},onPageIDChange:function(e){var n=e.getParameters().value;this.handlePackageNamespaceChange(n,false);},isValidID:function(i){return/^[A-Z_/]{1}[A-Z0-9_/]{0,34}$/g.test(i);},isValidTitle:function(t){return/^.{1,100}$/g.test(t);}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/ConfirmChangesDialog.controller',["sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/m/MessageToast","./BaseDialog.controller"],function(F,J,M,B){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.ConfirmChangesDialog.controller",{constructor:function(v,r){this._oView=v;this._oResourceBundle=r;this.sViewId="confirmChangesDialog";this.sId="sap.ushell.applications.PageComposer.view.ConfirmChangesDialog";},onAfterClose:function(e){e.getSource().destroy();},onCancel:function(e){e.getSource().getParent().close();},onDismissChanges:function(e){var c=this._oView.getController();e.getSource().getParent().close();c._setDirtyFlag(false);c.getRouter().navTo("overview",null,null,true);},onOverwriteChanges:function(e){return new Promise(function(r,a){var c=this._oView.getController();var R=c.getPageRepository();var p=this._oView.getModel().getProperty("/page");var s=this._oView.getModel().getProperty("/simpleError");var S=s.statusCode;var t=this;e.getSource().getParent().close();if(S==="412"){R.getPage(p.content.id).then(function(n){p.content.modifiedOn=n.content.modifiedOn;R.updatePage(p).then(function(){t._successfulSave(t._oResourceBundle);r();}).catch(function(){c.showMessageBoxError(t._oResourceBundle.getText("Message.UpdatePageError"),false);r();});}).catch(function(){c.showMessageBoxError(t._oResourceBundle.getText("Message.LoadPageError"),false);r();});}else if(S==="400"){R.createPage(p).then(function(){t._successfulSave(t._oResourceBundle);r();}).catch(function(){c.showMessageBoxError(t._oResourceBundle.getText("Message.CreatePageError"),false);r();});}else{a();}}.bind(this));},_successfulSave:function(r){var c=this._oView.getController();M.show(r.getText("Message.SavedChanges"),{closeOnBrowserNavigation:false});c._setDirtyFlag(false);}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/ContextSelector.controller',["sap/ui/model/json/JSONModel","./BaseDialog.controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(J,B,F,a){"use strict";var l,r;return B.extend("sap.ushell.applications.PageComposer.controller.ContextSelector",{constructor:function(v,R){this._oView=v;this.sViewId="contextSelector";this.sId="sap.ushell.applications.PageComposer.view.ContextSelector";r=R;},onSearch:function(e){var b=l.getBinding("items");var s=e.getSource().getValue()||"";b.filter([new F([new F("name",a.Contains,s),new F("title",a.Contains,s)],false)]);if(b.getLength()===0){if(s){l.setNoDataText(r.getText("Message.NoRolesFound"));}else{l.setNoDataText(r.getText("Message.NoRoles"));}}},onSelectionChange:function(){var s=l.getSelectedContexts(true);this._oModel.setProperty("/validRoleSelection",s&&!!s.length);},onConfirm:function(){this._writeSelectionToModel();this._oView.byId(this.sViewId).close();var s=this._oModel.getProperty("/selectedRoles");var A=this._oModel.getProperty("/availableRoles");var b=this._oModel.getProperty("/availableVisualizations");var R={selected:s,allSelected:s.length===A.length,availableVisualizations:b};if(this._fnConfirm){this._fnConfirm(R);}},onBeforeOpen:function(){l=this._oView.byId("contextSelectorList");this._setPreSelection();var f=this._oView.byId("contextSelector");sap.ui.getCore().getMessageManager().registerObject(f,true);},_writeSelectionToModel:function(){var s=[];var A=[];var S=l.getSelectedContexts(true);S.forEach(function(c){s.push(c.getObject().name);c.getObject().catalogs.results.forEach(function(b){b.visualizations.results.forEach(function(v){A.push(v.vizId);});});});this._oModel.setProperty("/selectedRoles",s);this._oModel.setProperty("/availableVisualizations",A);},_setPreSelection:function(){var s=this._oModel.getProperty("/selectedRoles");if(!s.length){l.selectAll();}else{l.getItems().forEach(function(i){s.forEach(function(b){if(i.getTitle()===b){i.setSelected(true);}});});}this._oModel.setProperty("/validRoleSelection",!!l.getSelectedItems().length);},initRoles:function(R,s){this._oModel=new J({availableRoles:R,selectedRoles:s||[],availableVisualizations:[],validRoleSelection:true,rolesAvailable:!!R.length});}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/CopyPageDialog.controller',["sap/ui/model/json/JSONModel","./BaseDialog.controller","sap/base/util/merge"],function(J,B,m){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.CopyPageDialog",{constructor:function(v,r){this._oView=v;this._oModel=new J({validation:{id:false}});this.sViewId="copyPageDialog";this.sId="sap.ushell.applications.PageComposer.view.CopyPageDialog";this._oResourceBundle=r;},onConfirm:function(){var M=this.getModel(),r={content:{targetId:M.getProperty("/targetId"),sourceId:M.getProperty("/sourceId"),title:M.getProperty("/title"),description:M.getProperty("/description")},metadata:{}};if(this._fnConfirm){this._fnConfirm(r);}},_resetModel:function(M){M.setProperty("/targetId","");M.setProperty("/sourceId","");M.setProperty("/title","");M.setProperty("/description","");var v=m({},M.getProperty("/validation"),{id:false});M.setProperty("/validation",v);},onBeforeOpen:function(){var f=this._oView.byId("copyPageDialog");sap.ui.getCore().getMessageManager().registerObject(f,true);this._resetModel(f.getModel());}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/CreatePageDialog.controller',["sap/ui/model/json/JSONModel","./BaseDialog.controller","sap/base/util/merge"],function(J,B,m){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.CreatePageDialog",{constructor:function(v,r){this._oView=v;this._oModel=new J({validation:{id:false,title:false,description:false}});this._oResourceBundle=r;this.sViewId="createPageDialog";this.sId="sap.ushell.applications.PageComposer.view.CreatePageDialog";},onConfirm:function(){var M=this.getModel(),r={content:{id:M.getProperty("/id"),title:M.getProperty("/title"),description:M.getProperty("/description")},metadata:{}};if(this._fnConfirm){this._fnConfirm(r);}},_resetModel:function(M){M.setProperty("/id","");M.setProperty("/title","");M.setProperty("/description","");var v=m({},M.getProperty("/validation"),{id:false,title:false});M.setProperty("/validation",v);},onBeforeOpen:function(){var f=this._oView.byId("createPageDialog");sap.ui.getCore().getMessageManager().registerObject(f,true);this._resetModel(f.getModel());}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/CustomString',["sap/ui/model/SimpleType"],function(S){"use strict";return S.extend("sap.ushell.applications.PageComposer.controller.CustomString",{parseValue:function(v){return v.toUpperCase();},validateValue:function(v){return undefined;},formatValue:function(v){return v;}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/DeleteDialog.controller',["sap/base/strings/formatMessage","./BaseDialog.controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(f,B,F,J){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.DeleteDialog.controller",{constructor:function(v){this._oView=v;this._createOrResetModel();this.sViewId="deletePageDialog";this.sId="sap.ushell.applications.PageComposer.view.DeleteDialog";},_createOrResetModel:function(){if(!this._oModel){this._oModel=new J();}this._oModel.setData({title:"",message:"",validation:{}});},destroy:function(){this._createOrResetModel();B.prototype.destroy.apply(this,arguments);}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/EditDialog.controller',["sap/base/strings/formatMessage","./BaseDialog.controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(f,B,F,J){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.EditDialog.controller",{constructor:function(v){this._oView=v;this._oModel=new J({title:"",message:"",validation:{}});this.sViewId="editDialog";this.sId="sap.ushell.applications.PageComposer.view.EditDialog";},onConfirm:function(){this._oView.byId("editDialog").close();B.prototype.onConfirm.apply(this,arguments);}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/EditPageHeaderDialog.controller',["sap/ui/model/json/JSONModel","./BaseDialog.controller","sap/base/util/merge"],function(J,B,m){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.EditPageHeaderDialog",{constructor:function(v){this._oView=v;this._oModel=new J({id:"",title:"",description:"",validation:{title:false}});this.sViewId="editPageHeaderDialog";this.sId="sap.ushell.applications.PageComposer.view.EditPageHeaderDialog";},onConfirm:function(){var M=this.getModel(),r={id:M.getProperty("/id"),title:M.getProperty("/title"),description:M.getProperty("/description")};if(this._fnConfirm){this._fnConfirm(r);this._oView.byId("editPageHeaderDialog").close();}},_resetModel:function(M){M.setProperty("/id","");M.setProperty("/title","");M.setProperty("/description","");var v=m({},M.getProperty("/validation"),{title:false});M.setProperty("/validation",v);},initialTitleValidation:function(){var i=this.isValidTitle(this._oModel.getProperty("/title")),v=m({},this._oModel.getProperty("/validation"),{title:i});this._oModel.setProperty("/validation",v);},onBeforeOpen:function(){var f=this._oView.byId("editPageHeaderDialog");sap.ui.getCore().getMessageManager().registerObject(f,true);this._resetModel(f.getModel());}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/ErrorDialog',["sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(F,J,M){"use strict";var c={onAfterClose:function(e){e.getSource().destroy();},onShowDetails:function(e){e.getSource().getModel().setProperty("/showDetails",true);},onConfirm:function(e){e.getSource().getParent().close();},onCopy:function(e){var t=document.createElement("textarea");try{t.contentEditable=true;t.readonly=false;t.textContent=e.getSource().getModel().getProperty("/description");document.documentElement.appendChild(t);if(navigator.userAgent.match(/ipad|iphone/i)){var r=document.createRange();r.selectNodeContents(t);window.getSelection().removeAllRanges();window.getSelection().addRange(r);t.setSelectionRange(0,999999);}else{jQuery(t).select();}document.execCommand("copy");M.show(e.getSource().getModel("i18n").getResourceBundle().getText("Message.ClipboardCopySuccess"),{closeOnBrowserNavigation:false});}catch(E){M.show(e.getSource().getModel("i18n").getResourceBundle().getText("Message.ClipboardCopyFail"),{closeOnBrowserNavigation:false});}finally{jQuery(t).remove();}}};
function o(e,i){var r=JSON.parse(e.responseText);var m=new J({message:r.error.message.value,description:JSON.stringify(r,null,3).replace(/\{|\}/g,""),statusCode:e.statusCode,statusText:e.statusText,showDetails:false});F.load({name:"sap.ushell.applications.PageComposer.view.ErrorDialog",controller:c}).then(function(d){d.setModel(m);d.setModel(i,"i18n");d.open();});}
return{open:o};});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/ErrorPage.controller',["./BaseController"],function(B){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.ErrorPage",{onLinkPress:function(){this.getRouter().navTo("overview",null,null,true);}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/Page',["sap/m/library","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/utils/clone"],function(m,J,C,c){"use strict";var L=m.LoadState;var M,p,r={};var v=new J({sizeBehavior:C.last("/core/home/sizeBehavior")});var _=C.on("/core/home/sizeBehavior").do(function(s){v.setProperty("/sizeBehavior",s);});
function a(V){var P=V.getBindingContext().getPath().split("/"),i=P.pop();P.pop();return{visualizationIndex:i,sectionIndex:P.pop()};}
function b(V){var o=V.getBindingContext(),i=o.getProperty(o.getPath()).inboundPermanentKey,t=V.getTarget();return i||!t||t[0]!=="#";}
function d(t){var T=c(t);if(T.subTitle){T.subtitle=T.subTitle;delete T.subTitle;}if(T.iconUrl){T.icon=T.iconUrl;delete T.iconUrl;}if(T.tileType!=="STATIC"&&T.tileType!=="DYNAMIC"&&!T.info){T.info="["+r.i18n.getText("Title.CustomTile")+"]";}return T;}
function e(f){var R=M.getModel("roles");var A=R&&R.getData().availableVisualizations;return!A||A.indexOf(f.getVisualizationId())>-1;}
return{init:function(o){M=o;p=o.getView().byId("page");p.setModel(o.getModel());p.setModel(v,"viewSettings");r.i18n=o.getResourceBundle();var E=o.getModel().getProperty("/edit");p.toggleStyleClass("sapUshellPageComposing",!!E);},exit:function(){_.off();},visualizationFactory:function(i,B){if(!M.oVisualizationLoadingService){throw new Error("Visualization Service was not loaded yet!");}var t=B.getProperty(),V=M.oVisualizationLoadingService.instantiateVisualization({vizId:t.vizId,previewMode:true,localLoad:true,tileType:(t.tileType==="DYNAMIC"?"sap.ushell.ui.tile.DynamicTile":"sap.ushell.ui.tile.StaticTile"),properties:d(t)}),G={Press:"Press",Remove:"Remove"};V._getInnerControlPromise().then(function(){var I=V.getInnerControl().getContent?V.getInnerControl().getContent()[0]:V.getInnerControl();I.attachPress(function(E){switch(E.getParameter("action")){case G.Remove:var o=a(V);M.deleteVisualizationInSection(o.visualizationIndex,o.sectionIndex);break;case G.Press:default:V.fireEvent("press");break;}});I.bindProperty("sizeBehavior","viewSettings>/sizeBehavior");I.setScope(M.getModel().getProperty("/edit")?"Actions":"Display");if(V.getState()!==L.Loading&&!b(V)&&I.setState){I.setState(L.Failed);}});V.attachPress(function(E){var o=E.getSource(),B=o.getBindingContext();if(p.getProperty("edit")){M._openTileInfo(o,B);}});return V;},collectMessages:function(){var E=[],w=[];p.getSections().forEach(function(s,S){var o=s.byId("title-edit");if(s.getTitle()===""){o.setValueState("Warning");o.setValueStateText(r.i18n.getText("Message.InvalidSectionTitle"));w.push({type:"Warning",title:r.i18n.getText("Title.NoSectionTitle",S+1),description:r.i18n.getText("Message.NoSectionTitle",S+1)});}else{o.setValueState("None");}s.getVisualizations().forEach(function(V,i){if(V.getState()===L.Failed){E.push({type:"Error",title:r.i18n.getText("Title.UnsufficientRoles"),subtitle:r.i18n.getText("Title.VisualizationIsNotVisible"),description:r.i18n.getText("Message.LoadTileError",[(i+1)+".",s.getTitle()])});}else if(V.getState()!==L.Loading&&!b(V)){w.push({type:"Warning",title:r.i18n.getText("Message.NavigationTargetError"),subtitle:r.i18n.getText("Title.VisualizationNotNavigateable"),description:r.i18n.getText("Message.NavTargetResolutionError",V.getTitle()||V.getCatalogTile().getTitle())});}else if(!e(V)){w.push({type:"Warning",title:r.i18n.getText("Message.VisualizationNotAvailableInContext"),subtitle:r.i18n.getText("Message.VisualizationNotAvailableInContext"),description:r.i18n.getText("Message.VisualizationOutOfContextError",V.getTitle()||V.getCatalogTile().getTitle())});}});});return{errors:E,warnings:w};},addSection:function(E){var s=E?E.getParameter("index"):0;M.addSectionAt(s);},deleteSection:function(E){var s=E.getSource(),t=s.getTitle(),f=t?r.i18n.getText("Message.Section.Delete",t):r.i18n.getText("Message.Section.DeleteNoTitle");sap.ui.require(["sap/m/MessageBox"],function(g){function h(A){if(A===g.Action.DELETE){M.deleteSection(p.indexOfSection(s));}}sap.ushell.Container.getService("Message").confirm(f,h,r.i18n.getText("Button.Delete"),[g.Action.DELETE,g.Action.CANCEL]);});},moveSection:function(i){var D=i.getParameter("draggedControl"),o=i.getParameter("droppedControl"),I=i.getParameter("dropPosition"),f=p.indexOfSection(D),g=p.indexOfSection(o);if(I==="After"){if(g<f){g++;}}else if(g>f){g--;}M.moveSection(f,g);},moveVisualization:function(D){var o=D.getParameter("draggedControl"),f=D.getParameter("droppedControl"),i=D.getParameter("dropPosition");if(f.isA("sap.ushell.ui.launchpad.Section")){var g=a(o),s=p.indexOfSection(f),B=o.getBindingContext();M.addVisualisationToSection(B.getModel().getProperty(B.getPath()),[s],0);M.deleteVisualizationInSection(g.visualizationIndex,g.sectionIndex);return;}var h=a(f),j=h.visualizationIndex,k=h.sectionIndex;if(o.isA("sap.m.CustomTreeItem")){var l=D.getParameter("dragSession").getComplexData("callback");if(i==="After"){j++;}l(j,k);return;}var n=a(o),q=n.visualizationIndex,t=n.sectionIndex;if(t===k){if(i==="After"){if(j<q){j++;}}else if(j>q){j--;}}else if(i==="After"){j++;}M.moveVisualizationInSection(q,j,t,k);},addVisualization:function(D){var o=D.getParameter("draggedControl"),f=D.getParameter("droppedControl"),i=f.getVisualizations().length,g=p.indexOfSection(f);if(o.isA("sap.m.CustomTreeItem")){D.getParameter("dragSession").getComplexData("callback")(i,g);return;}var h=a(o),j=h.visualizationIndex,k=h.sectionIndex;M.moveVisualizationInSection(j,i,k,g);}};});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/PageDetail.controller',["./BaseController","./Page","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/base/Log","sap/base/strings/formatMessage"],function(B,P,J,M,L,f){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.PageDetail",{onInit:function(){var r=this.getRouter();r.getRoute("view").attachPatternMatched(this._onPageMatched,this);this.setModel(new J({page:{},editMode:false,transportSupported:this.getOwnerComponent().isTransportSupported()}));this.getView().addEventDelegate({onBeforeHide:this.onRouteLeave.bind(this)});this.Page.init(this);},onExit:function(){this.Page.exit();},Page:P,formatMessage:f,_onPageMatched:function(e){var a=e.getParameter("arguments");var p=a.pageId;var r=this.getOwnerComponent().getRole();this.getModel().setProperty("/page",{});this.getView().setBusy(true);L.info("The page with id "+p+" was opened in view mode scoped by the following role",r);this._loadPage(decodeURIComponent(p)).then(function(o){this.getModel().setProperty("/page",o);this.Page.init(this);}.bind(this)).catch(function(){this.navigateToErrorPage(p);}.bind(this)).finally(function(){this.getView().setBusy(false);}.bind(this));},_loadPage:function(p){return Promise.all([sap.ushell.Container.getServiceAsync("VisualizationLoading"),this.getPageRepository().getPage(p)]).then(function(a){this.oVisualizationLoadingService=a[0];this.oVisualizationLoadingService.loadVisualizationData().then(function(){this.getModel().updateBindings(true);}.bind(this));return a[1];}.bind(this));},_navigateToEdit:function(p){this.getRouter().navTo("edit",{pageId:encodeURIComponent(p)});},_deletePage:function(e){var d=e.getSource().getParent();var t=e.metadata&&e.metadata.transportId||"";var p=this.getModel().getProperty("/page/content/id");var s=this.getResourceBundle().getText("Message.SuccessDeletePage");return this.getPageRepository().deletePage(p,t).then(function(){this.navigateToPageOverview();M.show(s,{closeOnBrowserNavigation:false});d.close();}.bind(this)).catch(this.handleBackendError.bind(this));},onEdit:function(){this._navigateToEdit(this.getModel().getProperty("/page/content/id"));},onDelete:function(){var p=this.getModel().getProperty("/page");this.checkShowDeleteDialog(p,this._deletePage.bind(this));},onCopy:function(){var p=this.getModel().getProperty("/page");this.showCopyDialog(p,function(a){sap.ushell.Container.getServiceAsync("PageReferencing").then(function(b){return b.createReferencePage(a,[]);}).then(function(r){return this.getPageRepository().copyPage(r);}.bind(this)).then(function(){this._navigateToEdit(a.content.targetId);M.show(this.getResourceBundle().getText("Message.PageCreated"),{closeOnBrowserNavigation:false});}.bind(this)).catch(this.handleBackendError.bind(this));}.bind(this));},onErrorMessageClicked:function(){var p=this.getModel().getProperty("/page");var F=this.onfilterErrorMessages(p.content.id);this.showMessageBoxWarning(F[0].message,false);}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/PageDetailEdit.controller',["sap/m/MessagePopover","sap/m/MessageItem","./BaseController","./Page","./TileSelector","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/m/MessageBox","sap/ui/core/library","sap/m/MessageToast","sap/base/Log","./ConfirmChangesDialog.controller"],function(M,a,B,P,T,F,J,b,c,d,L,C){"use strict";
function _(f){f.setData({page:{},edit:false,dirtyPage:false,errors:[],warnings:[],messages:[],headerExpanded:true,catalogsExpanded:true});}
var m=new J();
var e=B.extend("sap.ushell.applications.PageComposer.controller.PageDetailEdit",{
_setDirtyFlag:function(v){sap.ushell.Container.setDirtyFlag(v);m.setProperty("/dirtyPage",v);},
onInit:function(){var l=this.getView().byId("layoutContent"),t=this.getView().byId("toggleCatalogsButton"),r=this.getRouter();r.getRoute("edit").attachPatternMatched(this._onPageMatched,this);this.initModel();this.Page.init(this);this.TileSelector.init(this);this.TileSelector.setAddTileHandler(this.addVisualisationToSection.bind(this));this.getView().addEventDelegate({onBeforeHide:this.onRouteLeave.bind(this)});l.attachBreakpointChanged(function(E){t.setVisible(E.getParameters().currentBreakpoint!=="S");});},
initModel:function(){m.setProperty=this.setModelProperty.bind(this);this.setModel(m);},
setModelProperty:function(p,v,f){var r=f?f.getPath():p;if(r.indexOf("/page")===0&&!jQuery.isEmptyObject(m.getProperty("/page"))){this._setDirtyFlag(true);}J.prototype.setProperty.apply(m,arguments);},
onExit:function(){this.Page.exit();},
Page:P,
TileSelector:new T(),
oTileInfoPopover:undefined,
oMessagePopover:new M("layoutMessagePopover",{items:{path:"/messages",template:new a({type:"{type}",title:"{title}",activeTitle:"{active}",description:"{description}",subtitle:"{subTitle}",counter:"{counter}"})},beforeOpen:function(){this.addStyleClass("sapUshellMessagePopoverNoResize");}}).setModel(m),
handleMessagePopoverPress:function(E){this.oMessagePopover.toggle(E.getSource());},
onUpdateSideContentVisibility:function(){m.setProperty("/catalogsExpanded",!m.getProperty("/catalogsExpanded"));},
onTitleChange:function(E){var i=E.getSource();i.setValueStateText(this.getResourceBundle().getText("Message.EmptyTitle"));if(!i.getValue()){i.setValueState(c.ValueState.Error);}else{i.setValueState(c.ValueState.None);}},
onSave:function(){var r=this.getResourceBundle();var s=function(g){if(g===b.Action.OK){this._setDirtyFlag(false);this.getView().setBusy(true);this._savePage(m.getProperty("/page")).then(function(){d.show(r.getText("Message.SavedChanges"),{closeOnBrowserNavigation:false});}).catch(function(S){if(S.statusCode==="412"||S.statusCode==="400"){this._showConfirmChangesDialog(S);}else{this.showMessageBoxError(S.message,false);}this._setDirtyFlag(true);}.bind(this)).finally(function(){this.getView().setBusy(false);}.bind(this));}}.bind(this);if(!m.getProperty("/page/content/title")){this.showMessageBoxError(r.getText("Message.EmptyTitle"));m.setProperty("/headerExpanded",true);return;}if(!window.navigator.onLine){this.showMessageBoxError(r.getText("Message.NoInternetConnection"));return;}if(m.getProperty("/errors").length>0){var t=r.getText("Title.TilesHaveErrors"),f=r.getText("Message.TilesHaveErrors");sap.ushell.Container.getService("Message").confirm(f,s,t);return;}s(b.Action.OK);},
_showConfirmChangesDialog:function(s){if(!this.byId("confirmChangesDialog")){F.load({name:"sap.ushell.applications.PageComposer.view.ConfirmChangesDialog",controller:new C(this.getView(),this.getResourceBundle())}).then(function(D){if(s.statusCode==="412"){var o=sap.ui.getCore().byId("confirmChangesModifiedByText");o.setVisible(true);}this.getModel().setProperty("/simpleError",{message:s.message,statusCode:s.statusCode,modifiedBy:this.getModel().getProperty("/page").content.modifiedByFullname});this.getView().addDependent(D);D.open();}.bind(this));}else{this.byId("confirmChangesDialog").open();}},
onCancel:function(){this.navigateToPageOverview();},
onOpenTileInfo:function(E){var o=E.getSource(),f=o.getBindingContext();this._openTileInfo(o,f);},
showContextSelector:function(o){return new Promise(function(r,f){sap.ui.require(["sap/ushell/applications/PageComposer/controller/ContextSelector.controller"],function(g){var p=this.getModel().getProperty("/page/content/id");this.fetchRoles(p).then(function(h){if(!this.oContextSelectorController){this.oContextSelectorController=new g(this.getRootView(),this.getResourceBundle());}this.oContextSelectorController.initRoles(h,this.getModel("roles").getData().activeRoleContext);this.oContextSelectorController.attachConfirm(o);return this.oContextSelectorController.load().then(function(){return this.oContextSelectorController;}.bind(this)).then(function(i){if(i){i.open();}r();}).catch(function(i){this.oContextSelectorController.destroy();this.handleBackendError(i);f(i);}.bind(this));}.bind(this)).catch(function(E){this.showMessageBoxError(E,false);}.bind(this));}.bind(this));}.bind(this));},
onOpenContextSelector:function(){this.showContextSelector(function(s){this._resetRolesModel(s);this.TileSelector.setRoleContext(s.selected,s.allSelected);var p=this.getModel().getProperty("/page/content/id");this.fetchCatalogInfo(p,s.selected).then(this.TileSelector.initTiles).catch(function(E){this.showMessageBoxError(E,true);});this.getModel("roles").setProperty("availableVisualizations",s.availableVisualizations);this.collectPageMessages();}.bind(this));},
_resetRolesModel:function(s){if(s){this.setModel(new J(s),"roles");}else{this.setModel(new J({}),"roles");}this.getModel("roles").setProperty("/activeRoleContextInfo","("+this.getResourceBundle().getText("Message.AllRolesSelected")+")");},
_openTileInfo:function(o,f,s){if(!this.oTileInfoPopover){F.load({name:"sap.ushell.applications.PageComposer.view.TileInfoPopover",controller:this}).then(function(t){this.oTileInfoPopover=t;this.getView().addDependent(this.oTileInfoPopover);this._openTileInfo(o,f,s);}.bind(this));}else{this.oTileInfoPopover.setModel(f.getModel(s));this.oTileInfoPopover.setBindingContext(f);this.oTileInfoPopover.openBy(o);}},
_formatTileType:function(v){var i=this.getResourceBundle();switch(v){case"STATIC":return i.getText("Title.StaticTile");case"DYNAMIC":return i.getText("Title.DynamicTile");case"CUSTOM":default:return i.getText("Title.CustomTile");}},
_formatLength:function(o){return(o?o.length:undefined);},
_updatePageWithMetadata:function(f){if(f&&f.metadata&&f.metadata.transportId){m.setProperty("/page/metadata/transportId",f.metadata.transportId);}},
_onPageMatched:function(f){var A=f.getParameter("arguments");var p=decodeURIComponent(A.pageId);var r=this.getOwnerComponent().getRole();this.getView().setBusy(true);L.info("The page with id "+p+" was opened in edit mode in the context of the following role",r);_(m);this._resetRolesModel();this._loadPage(p).then(function(o){this._pageEditAllowed(o).then(function(g){if(!g){return;}m.setProperty("/page",o);m.setProperty("/edit",true);this.checkShowEditDialog(o,this._updatePageWithMetadata.bind(this),this.navigateToPageOverview.bind(this));this.Page.init(this);if(!m.getProperty("/page/content/sections").length){this.Page.addSection();}else{this.collectPageMessages();this._setDirtyFlag(false);}}.bind(this));}.bind(this)).catch(function(){this.navigateToErrorPage(p);}.bind(this)).finally(function(){this.getView().setBusy(false);}.bind(this));this.fetchCatalogInfo(p,[r]).then(this.TileSelector.initTiles).catch(function(E){this.showMessageBoxError(E,true);}.bind(this));},
_pageEditAllowed:function(p){var E=!this.checkMasterLanguageMismatch(p)&&!this._checkPageHasErrors(p);return Promise.resolve(E);},
_loadPage:function(p){return Promise.all([sap.ushell.Container.getServiceAsync("VisualizationLoading"),this.getPageRepository().getPage(p)]).then(function(f){this.oVisualizationLoadingService=f[0];this.oVisualizationLoadingService.loadVisualizationData().then(function(){m.updateBindings(true);this.collectPageMessages();}.bind(this));return f[1];}.bind(this));},
_savePage:function(p){return this.getPageRepository().updatePage(p);},
collectPageMessages:function(){var o=this.Page.collectMessages(),E=o.errors,w=o.warnings,f=E.concat(w);m.setProperty("/errors",E);m.setProperty("/warnings",w);m.setProperty("/messages",f);},
addSectionAt:function(s){var S=this.getModel().getProperty("/page/content/sections");if(!S){L.warning("The Model is not ready yet.");return;}if(!s&&s!==0){s=S.length;}S.splice(s,0,{title:"",visualizations:[]});this.getModel().setProperty("/page/content/sections",S);},
deleteSection:function(s){if(!s&&s!==0){return;}var S=m.getProperty("/page/content/sections");S.splice(s,1);m.setProperty("/page/content/sections",S);this.collectPageMessages();},
moveSection:function(o,n){if(!o&&o!==0||!n&&n!==0){return;}var s=m.getProperty("/page/content/sections"),S=s.splice(o,1)[0];s.splice(n,0,S);m.setProperty("/page/content/sections",s);this.collectPageMessages();},
addVisualisationToSection:function(v,s,f){if(!v||!s.length){return;}s.forEach(function(S){var V=m.getProperty("/page/content/sections/"+S+"/visualizations");if(!V){L.warning("The Model is not ready yet.");return;}if(!f&&f!==0){f=V.length;}V.splice(f,0,v);m.setProperty("/page/content/sections/"+S+"/visualizations",V);this.collectPageMessages();}.bind(this));},
deleteVisualizationInSection:function(v,s){var p="/page/content/sections/"+s+"/visualizations",V=m.getProperty(p);V.splice(v,1);m.setProperty(p,V);this.collectPageMessages();},
moveVisualizationInSection:function(o,n,f,g){if(!o&&o!==0||!n&&n!==0||!f&&f!==0||!g&&g!==0){return;}var O="/page/content/sections/"+f+"/visualizations",N="/page/content/sections/"+g+"/visualizations",h=m.getProperty(O),i=m.getProperty(N),j=h.splice(o,1);i.splice(n,0,j[0]);m.setProperty(O,h);m.setProperty(N,i);this.collectPageMessages();},
openEditPageHeaderDialog:function(){sap.ui.require(["sap/ushell/applications/PageComposer/controller/EditPageHeaderDialog.controller"],function(E){if(!this.oEditPageHeaderDialogController){this.oEditPageHeaderDialogController=new E(this.getRootView());}this.oEditPageHeaderDialogController.attachConfirm(this.editPageHeaderConfirm.bind(this));this.oEditPageHeaderDialogController.load().then(function(){this.oEditPageHeaderDialogController.open();this.oEditPageHeaderDialogController.getModel().setProperty("/id",m.getProperty("/page/content/id"));this.oEditPageHeaderDialogController.getModel().setProperty("/title",m.getProperty("/page/content/title"));this.oEditPageHeaderDialogController.getModel().setProperty("/description",m.getProperty("/page/content/description"));this.oEditPageHeaderDialogController.initialTitleValidation();}.bind(this));}.bind(this));},
editPageHeaderConfirm:function(r){if(m.getProperty("/page/content/title")!==r.title){m.setProperty("/page/content/title",r.title);}if(m.getProperty("/page/content/description")!==r.description){m.setProperty("/page/content/description",r.description||"");}},
_checkPageHasErrors:function(p){var f=this.onfilterErrorMessages(p.content.id);if(f.length){this.showMessageBoxWarning(f[0].message,true);return true;}return false;}
});
return e;});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/PageOverview.controller',["./BaseController","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(B,M,J,F,a){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.Main",{aPropertiesToFilter:["id","title","description","createdByFullname","modifiedByFullname","BusinessRoleId","BusinessRole"],oDialogFactory:null,onInit:function(){this.setModel(new J({busy:false,pages:[],transportSupported:this.getOwnerComponent().isTransportSupported()}));this.getRouter().getRoute("overview").attachPatternMatched(this._onPageOverviewMatched,this);this.setModel(this._createInitialButtonStateModel(),"buttonStates");},onItemPress:function(e){var p=e.getParameter("listItem").getBindingContext().getObject();this._navigateToDetail(p.content.id);},_onPageOverviewMatched:function(){this._refreshModel();},_navigateToEdit:function(p){this.getRouter().navTo("edit",{pageId:encodeURIComponent(p)});},_navigateToDetail:function(p){this.getRouter().navTo("view",{pageId:encodeURIComponent(p)});},onSelectionChange:function(e){this._setDeleteAndCopyButtonEnabled(true);},onEdit:function(e){var p=e.getSource().getBindingContext().getObject();this._navigateToEdit(p.content.id);},onAdd:function(){var r=this.getResourceBundle();this.showCreateDialog(function(p){sap.ushell.Container.getServiceAsync("PageReferencing").then(function(P){return P.createReferencePage(p,[]);}).then(function(R){return this.getPageRepository().createPage(R);}.bind(this)).then(function(){this._navigateToDetail(p.content.id);M.show(r.getText("Message.PageCreated"),{closeOnBrowserNavigation:false});}.bind(this)).catch(this.handleBackendError.bind(this));}.bind(this));},_deletePage:function(e){var r=this.getResourceBundle();var d=e.getSource().getParent();var t=e.metadata&&e.metadata.transportId||"";var T=this.byId("table");var i=T.getSelectedItems().map(function(b){return b.getBindingContext().getObject();});var s=r.getText("Message.SuccessDeletePage");var D=i.map(function(I){return this.getPageRepository().deletePage(I.content.id,t);}.bind(this));return Promise.all(D).then(function(){return this._refreshModel();}.bind(this)).then(function(){T.removeSelections();this._setDeleteAndCopyButtonEnabled(false);T.fireSelectionChange();M.show(s,{closeOnBrowserNavigation:false});d.close();}.bind(this)).catch(this.handleBackendError.bind(this));},onDelete:function(){var t=this.byId("table");var s=t.getSelectedItem();if(!s){return;}this.checkShowDeleteDialog(s.getBindingContext().getObject(),this._deletePage.bind(this));},onCopy:function(){var t=this.byId("table");var s=t.getSelectedItem();var r=this.getResourceBundle();if(!s){return;}var p=s.getBindingContext().getObject();this.showCopyDialog(p,function(b){this.pageInfo=b;sap.ushell.Container.getServiceAsync("PageReferencing").then(function(P){return P.createReferencePage(b,[]);}).then(function(R){return this.getPageRepository().copyPage(R);}.bind(this)).then(function(){return this._refreshModel();}.bind(this)).then(function(){this._navigateToDetail(this.pageInfo.content.targetId);M.show(r.getText("Message.PageCreated"),{closeOnBrowserNavigation:false});}.bind(this)).catch(this.handleBackendError.bind(this));}.bind(this));},onSearch:function(e){var t=this.byId("table");var b=t.getBinding("items");var r=this.getResourceBundle();var s=e.getSource().getValue();var f=this.aPropertiesToFilter.map(function(p){return new F({path:"content/"+p,operator:a.Contains,value1:s});});this.oSearchFilter=new F({filters:f,and:false});this._applyCombinedFilters();if(b.getLength()===0){if(s){t.setNoDataText(r.getText("Message.NoPagesFound"));}else{t.setNoDataText(r.getText("Message.NoPages"));}}},_refreshModel:function(){this.getModel().setProperty("/busy",true);return this._loadAvailablePages().then(function(p){this.getModel().setSizeLimit(p.pages.length);this.getModel().setProperty("/pages",p.pages);this.getModel().setProperty("/busy",false);}.bind(this),function(e){this.getModel().setProperty("/busy",false);this.showMessageBoxError(e);}.bind(this));},onTableUpdate:function(){var t=this.byId("table");if(t.getSelectedItems().length===0){t.removeSelections(true);this._setDeleteAndCopyButtonEnabled(false);}},_loadAvailablePages:function(){return this.getPageRepository().getPages().then(function(p){return{pages:p};});},_createInitialButtonStateModel:function(){return new J({isDeleteAndCopyEnabled:false});},_setDeleteAndCopyButtonEnabled:function(e){this.getView().getModel("buttonStates").setProperty("/isDeleteAndCopyEnabled",e);},onErrorMessageClicked:function(e){var s=e.getSource().getBindingContext().getObject();var f=this.onfilterErrorMessages(s.content.id);if(f.length){this.showMessageBoxWarning("Page "+s.content.id+" : "+f[0].message,false);}},_removeDuplicates:function(p,P,m){var k={},K=[];p.forEach(function(o){var O=m?o.metadata:o.content,n=O[P];if(!k[n]){k[n]=true;K.push({key:n});}});return K;},showViewSettingsDialog:function(n){if(this._oViewSettingsDialog){this._oViewSettingsDialog.open(n);return;}sap.ui.require(["sap/ui/core/Fragment","sap/ui/Device","sap/ushell/applications/PageComposer/controller/ViewSettingsDialog.controller"],function(b,D,V){b.load({name:"sap.ushell.applications.PageComposer.view.ViewSettingsDialog",type:"XML",controller:new V(this)}).then(function(f){this._oViewSettingsDialog=f;if(D.system.desktop){f.addStyleClass("sapUiSizeCompact");}var p=this.getModel().getProperty("/pages");f.setModel(new J({editAllowed:this._removeDuplicates(p,"editAllowed"),devclass:this._removeDuplicates(p,"devclass",true),transportId:this._removeDuplicates(p,"transportId",true),createdByFullname:this._removeDuplicates(p,"createdByFullname"),modifiedByFullname:this._removeDuplicates(p,"modifiedByFullname")}),"uniqueValues");this.getView().addDependent(f);f.open(n);}.bind(this));}.bind(this));},_applyCombinedFilters:function(){var f=this.aViewSettingsFilters||[],t=this.byId("table"),b=t.getBinding("items");if(this.oSearchFilter){f=f.concat(this.oSearchFilter);}b.filter(new F({filters:f,and:true}));}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/PagePreviewDialog.controller',["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ushell/Config"],function(C,F,J,a,b){"use strict";var r={};var _;
function c(t){var T=Object.assign(Object.create(null),t);if(T.subTitle){T.subtitle=T.subTitle;delete T.subTitle;}if(T.iconUrl){T.icon=T.iconUrl;delete T.iconUrl;}if(T.tileType!=="STATIC"&&T.tileType!=="DYNAMIC"&&!T.info){T.info="["+r.i18n.getText("Title.CustomTile")+"]";}return T;}
function d(v){var o=v.getBindingContext(),i=o.getProperty(o.getPath()).inboundPermanentKey,t=v.getTarget();return i||!t||t[0]!=="#";}
function e(){var A;var R;var f=new a({path:"vizId",caseSensitive:true,test:function(v){return!A||A.indexOf(v)>=0;}});var p=_&&_.getContent()[0];if(p){R=p.getModel("roles");if(R){A=R.getProperty("/availableVisualizations");}p.getSections().forEach(function(s){s.getBinding("visualizations").filter(f);});}}
var P=C.extend("sap.ushell.applications.PageComposer.controller.PagePreviewDialog.controller",{
load:function(p){return _?Promise.resolve(_):F.load({id:p,name:"sap.ushell.applications.PageComposer.view.PagePreviewDialog",controller:this});},
open:function(s,p){this.load(p).then(function(D){_=D;r.i18n=s.getModel("i18n").getResourceBundle();s.addDependent(D);D.setModel(new J({sizeBehavior:b.last("/core/home/sizeBehavior")}),"viewSettings");e();D.open();});},
close:function(){if(_){_.close();}},
visualizationFactory:function(i,B){if(!this.oVisualizationLoadingService){this.oVisualizationLoadingService=sap.ushell.Container.getService("VisualizationLoading");}var t=B.getProperty(),v=this.oVisualizationLoadingService.instantiateVisualization({vizId:t.vizId,previewMode:true,localLoad:true,tileType:(t.tileType==="DYNAMIC"?"sap.ushell.ui.tile.DynamicTile":"sap.ushell.ui.tile.StaticTile"),properties:c(t)});v._getInnerControlPromise().then(function(){var I=v.getInnerControl().getContent?v.getInnerControl().getContent()[0]:v.getInnerControl();I.attachPress(function(E){v.fireEvent("press");});I.bindProperty("sizeBehavior","viewSettings>/sizeBehavior");I.setScope("Display");if(v.getState()!=="Loading"&&!d(v)&&I.setState){I.setState("Failed");}});return v;}
});
return new P();});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/TileSelector',["sap/m/library","sap/m/Button","sap/m/List","sap/m/StandardListItem","sap/m/ResponsivePopover","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter","sap/ushell/services/Container"],function(m,B,L,S,R,J,F,c,d){"use strict";var e=m.ButtonType;var P=m.PlacementType;var f=m.ListMode;var g=m.ListSeparators;return function(){var p,t,T,A,o,s,h,j,k,r={};this.init=function(C){p=C.getView();t=p.byId("tileSelectorList");T=p.byId("tileSelectorToolbar");A=p.byId("tileSelectorAddButton");r.i18n=C.getResourceBundle();t.setBusy(true);s=new L({mode:f.MultiSelect,showSeparators:g.None,includeItemInSelection:true,selectionChange:function(){h.getBeginButton().setEnabled(!!s.getSelectedItem());},items:{path:"/page/content/sections",template:new S({title:"{title}"})},noDataText:r.i18n.getText("Message.NoSections")}).setModel(p.getModel());A.setEnabled(false);t.attachSelectionChange(this._onSelectionChange);};this.initTiles=function(C){if(C.aTreeOverride){_(C.aTreeOverride);return;}var D=C.catalogTiles.reduce(function(E,G,i){if(G.length){E.push({catalogTitle:C.catalogTitles[i],tiles:G.map(function(a){return C.catalogTilesData[a.vizId];}).sort(function(a,b){if(a.title>b.title){return 1;}if(a.title<b.title){return-1;}return 0;})});}return E;},[]);_(D);};this.setRoleContext=function(a,b){var M=p.getModel("roles");var i=b?"("+r.i18n.getText("Message.AllRolesSelected")+")":"("+a.length.toString()+")";M.setProperty("/activeRoleContext",a);M.setProperty("/activeRoleContextInfo",i);M.setProperty("/showRoleContextInfo",!b);};this.onSearchTiles=function(){l();};this.onAddTiles=function(E){var a=s.getItems(),b=E.getSource().getBindingContext();if(b){var i=b.getPath();o=t.getItems().filter(function(C){return(C.getBindingContextPath()===i);})[0];}else{o=undefined;}if(a.length===1){a[0].setSelected(true);z();}else{w(E);}};this.onSortCatalogsToggle=function(){n();};this.onCollapseAllCatalogs=function(){q(true);};this.onExpandAllCatalogs=function(){q(false);};this.onCatalogItemPress=function(E){u(E.getParameters().listItem);};this._onSelectionChange=function(E){if(h&&h.isOpen()){h.getBeginButton().setEnabled(false);h.close();}if(E){E.getParameters().listItems.forEach(function(i){if(i.getBindingContext().getProperty().tiles){i.setSelected(false);u(i);}});}A.setEnabled(!!v().length);};this.setAddTileHandler=function(a){j=a;};this.onDragStart=function(E){var i=E.getParameter("target").getBindingContext().getProperty();if(!i.vizId){E.preventDefault();return;}E.getParameter("dragSession").setComplexData("callback",function callback(a,b){j(i,[b],a);});};function _(C){A.setEnabled(false);var M=new J({catalogs:C});M.setSizeLimit(Infinity);t.setModel(M);k=true;n();t.expandToLevel(1);t.setBusy(false);}function l(){var a=p.getModel().getProperty("/searchText")||"";t.getBinding("items").filter([new F([new F("title",c.Contains,a),new F("subTitle",c.Contains,a)],false)]);}function n(){k=!k;var i=t.getBinding("items"),a=new d("catalogTitle",k);i.sort(a);}function q(C){if(C){t.collapseAll();}else{t.expandToLevel(1);}}function u(a){var i=t.indexOfItem(a);if(a.getExpanded()){t.collapse(i);}else{t.expand(i);}}function v(){return t.getSelectedContextPaths().map(function(a){return t.getModel().getContext(a).getProperty();});}function w(E){if(!h||h.bIsDestroyed){y();}s.removeSelections(true);h.getBeginButton().setEnabled(false);h.getEndButton().setEnabled(true);if(!o&&x(A)){h.openBy(T.getAggregation("_overflowButton"));}else{h.openBy(E.getSource());}}function x(C){return(C.hasStyleClass("sapMOTAPButtonNoIcon")||C.hasStyleClass("sapMOTAPButtonWithIcon"));}function y(){h=new R({placement:P.Auto,title:r.i18n.getText("Tooltip.AddToSections"),beginButton:new B({type:e.Emphasized,text:r.i18n.getText("Button.Add"),press:function(){this.setEnabled(false);h.close();z();}}),endButton:new B({text:r.i18n.getText("Button.Cancel"),press:function(){this.setEnabled(false);h.close();}}),content:s,initialFocus:s});p.addDependent(h);}var z=function(){if(typeof j!=="function"){return;}var a=s.getSelectedItems().map(function(i){return s.indexOfItem(i);});var b;if(o){b=[o.getBindingContext().getProperty()];}else{b=v();}b.forEach(function(i){j(i,a);});if(!o){t.removeSelections(true);this._onSelectionChange();}else if(o.getSelected()){o.setSelected(false);this._onSelectionChange();}}.bind(this);};});
sap.ui.predefine('sap/ushell/applications/PageComposer/controller/ViewSettingsDialog.controller',["sap/ui/core/format/DateFormat","sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter"],function(D,C,F,a,S){"use strict";return C.extend("sap.ushell.applications.PageComposer.controller.ViewSettingsDialog",{constructor:function(P){this.PageOverviewController=P;},handleDialogConfirm:function(e){var p=e.getParameters(),t=this.PageOverviewController.byId("table"),b=t.getBinding("items"),s=this.getSorters(p),f=this.getFilters(p);b.sort(s);this.PageOverviewController.aViewSettingsFilters=f;this.PageOverviewController._applyCombinedFilters();this.PageOverviewController.byId("infoFilterBar").setVisible(f.length>0);this.PageOverviewController.byId("infoFilterLabel").setText(p.filterString);},getSorters:function(p){var s=[],g=p.groupItem,r=this.PageOverviewController.getResourceBundle();if(g){var G=g.getKey(),f;switch(G){case"content/editAllowed":f=function(c){var n=c.getProperty(G);return{key:n,text:n?r.getText("Message.StatusAssigned"):r.getText("Message.NotAssigned")};};break;case"content/createdOn":case"content/modifiedOn":f=function(c){var o=D.getInstance({style:"medium"});var d=c.getProperty(G),b=o.format(d);return{key:b,text:b};};break;default:f=function(c){var n=c.getProperty(G);return{key:n,text:n};};}s.push(new S(G,p.groupDescending,f));}if(p.sortItem){s.push(new S(p.sortItem.getKey(),p.sortDescending));}else{s.push(new S("content/modifiedOn",true));}return s;},getFilters:function(p){var f=[];p.filterItems.forEach(function(i){var P,o,v,V;if(i.getKey()==="content/createdOn"||i.getKey()==="content/modifiedOn"){var d=i.getCustomControl();P=i.getKey();o=a.BT;v=d.getDateValue();V=d.getSecondDateValue();if(P==="content/createdOn"){this._createdOnFromFilter=v;this._createdOnToFilter=V;}else{this._changedOnFromFilter=v;this._changedOnToFilter=V;}}else{var s=i.getKey().split("___");P=s[0];o=s[1];v=s[2];V=s[3];if(P==="content/editAllowed"){if(v==="true"){v=true;}else{v=false;}}}f.push(new F(P,o,v,V));}.bind(this));return f;},handleDateRangeSelectionChanged:function(e){var p=e.getParameters(),v=p.id==="CreatedOnDateRangeSelection"?sap.ui.getCore().byId("CreatedOnFilter"):sap.ui.getCore().byId("ChangedOnFilter");if(p.from){v.setFilterCount(1);v.setSelected(true);}else{v.setFilterCount(0);v.setSelected(false);}},handleCancel:function(){var c=sap.ui.getCore().byId("CreatedOnFilter"),o=sap.ui.getCore().byId("CreatedOnDateRangeSelection"),b=sap.ui.getCore().byId("ChangedOnFilter"),d=sap.ui.getCore().byId("ChangedOnDateRangeSelection");if(this._createdOnFromFilter){c.setFilterCount(1);c.setSelected(true);}else{c.setFilterCount(0);c.setSelected(false);}if(this._changedOnFromFilter){b.setFilterCount(1);b.setSelected(true);}else{b.setFilterCount(0);b.setSelected(false);}o.setDateValue(this._createdOnFromFilter);o.setSecondDateValue(this._createdOnToFilter);d.setDateValue(this._changedOnFromFilter);d.setSecondDateValue(this._changedOnToFilter);},handleResetFilters:function(){var c=sap.ui.getCore().byId("CreatedOnDateRangeSelection"),o=sap.ui.getCore().byId("ChangedOnDateRangeSelection"),b=sap.ui.getCore().byId("CreatedOnFilter"),d=sap.ui.getCore().byId("ChangedOnFilter");c.setDateValue();c.setSecondDateValue();o.setDateValue();o.setSecondDateValue();b.setFilterCount(0);b.setSelected(false);d.setFilterCount(0);d.setSelected(false);}});});
sap.ui.predefine('sap/ushell/applications/PageComposer/localService/mockserver',["sap/ui/core/util/MockServer"],function(M){"use strict";return{init:function(r,m,c){r=r||"/";var o=new M({rootUri:r});M.config({autoRespond:true,autoRespondAfter:0});o.simulate(m,c);o.start();}};});
sap.ui.predefine('sap/ushell/applications/PageComposer/test/initMockServer',["../localService/mockserver","sap/m/Shell","sap/ushell/bootstrap/common/common.boot.task","sap/ui/model/json/JSONModel","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/Config"],function(m,S,b,J,C,a){"use strict";m.init("/sap/opu/odata/UI2/FDM_PAGE_REPOSITORY_SRV/","../localService/pages/metadata.xml",{sMockdataBaseUrl:"../localService/pages/mockData"});m.init("/sap/opu/odata/UI2/FDM_VALUE_HELP_SRV/","../localService/transport/metadata.xml",{sMockdataBaseUrl:"../localService/transport/mockData"});
function _(){a._reset();a.registerConfiguration(null,C.createConfigContract());}
function c(p){return new Promise(function(r){var M=new J(p);M.attachRequestCompleted(function(){r(M.getData());});});}
function d(){return c("cdm/configuration.json");}
d().then(function(o){window["sap-ushell-config"]=o;b("cdm",function(){_();var e=new sap.ui.core.ComponentContainer({async:true,height:"100%",name:"sap.ushell.applications.PageComposer",manifest:"../manifest.json"});var s=new S({app:e,appWidthLimited:false});s.placeAt("content");});});});
sap.ui.predefine('sap/ushell/applications/PageComposer/util/PagePersistence',[],function(){"use strict";var P=function(d,r,m){this._oODataModel=d;this._oResourceBundle=r;this._oEtags={};this._oMessageModel=m;};
P.prototype.getPages=function(){return this._readPages().then(function(p){for(var i=0;i<p.results.length;i++){this._storeETag(p.results[i]);}return p;}.bind(this)).then(this._convertODataToPageList.bind(this)).catch(this._rejectWithErrorMessage.bind(this));};
P.prototype.getPage=function(p){return this._readPage(p).then(function(a){this._storeETag(a);return a;}.bind(this)).then(this._convertODataToReferencePage.bind(this)).catch(this._rejectWithErrorMessage.bind(this));};
P.prototype.createPage=function(p){var a=this._convertReferencePageToOData(p);return this._createPage(a).then(this._storeETag.bind(this));};
P.prototype.updatePage=function(u){var U=this._convertReferencePageToOData(u);U.modifiedOn=this._oEtags[u.content.id].modifiedOn;return this._createPage(U).then(this._storeETag.bind(this)).catch(this._rejectWithErrorMessage.bind(this));};
P.prototype.deletePage=function(p,t){return new Promise(function(r,a){this._oODataModel.callFunction("/deletePage",{method:"POST",urlParameters:{pageId:p,transportId:t,modifiedOn:this._oEtags[p].modifiedOn},success:r,error:a});}.bind(this));};
P.prototype.copyPage=function(p){return new Promise(function(r,a){this._oODataModel.callFunction("/copyPage",{method:"POST",urlParameters:{targetId:p.content.targetId.toUpperCase(),sourceId:p.content.sourceId,title:p.content.title,description:p.content.description,devclass:p.metadata.devclass,transportId:p.metadata.transportId},success:r,error:a});}.bind(this));};
P.prototype.getCatalogs=function(p,r){return!r||r.length===1&&!r[0]?[this._getCatalogsByPage(p)]:this._getCatalogsByRole(r);};
P.prototype._readPages=function(){return new Promise(function(r,a){this._oODataModel.read("/pageSet",{success:r,error:a});}.bind(this));};
P.prototype._readPage=function(p){return new Promise(function(r,a){this._oODataModel.read("/pageSet('"+encodeURIComponent(p)+"')",{urlParameters:{"$expand":"sections/tiles"},success:r,error:a});}.bind(this));};
P.prototype._createPage=function(n){return new Promise(function(r,a){this._oODataModel.create("/pageSet",n,{success:r,error:a});}.bind(this));};
P.prototype._convertODataToPageList=function(p){return p.results.map(function(o){return{content:{id:o.id,title:o.title,description:o.description,createdBy:o.createdBy,createdByFullname:o.createdByFullname,createdOn:o.createdOn,modifiedBy:o.modifiedBy,modifiedByFullname:o.modifiedByFullname,modifiedOn:o.modifiedOn,masterLanguage:o.masterLanguage,editAllowed:this.checkErrorMessage(o.id)},metadata:{devclass:o.devclass,transportId:o.transportId}};}.bind(this));};
P.prototype._convertODataToReferencePage=function(p){return{content:{id:p.id,title:p.title,description:p.description,createdBy:p.createdBy,createdByFullname:p.createdByFullname,createdOn:p.createdOn,modifiedBy:p.modifiedBy,modifiedByFullname:p.modifiedByFullname,modifiedOn:p.modifiedOn,masterLanguage:p.masterLanguage,editAllowed:this.checkErrorMessage(p.id),sections:p.sections.results.map(function(s){return{id:s.id,title:s.title,visualizations:s.tiles.results.map(function(t){return{id:t.id,vizId:t.catalogTile,inboundPermanentKey:t.targetMapping,title:t.title,subTitle:t.subTitle,iconUrl:t.iconUrl,tileType:t.tileType};})};})},metadata:{transportId:p.transportId,devclass:p.devclass}};};
P.prototype._convertReferencePageToOData=function(p){var r=p.content,m=p.metadata;var o={id:r.id,title:r.title,description:r.description,devclass:m.devclass,transportId:m.transportId,sections:(r.sections||[]).map(function(s){return{id:s.id,title:s.title,tiles:(s.visualizations||[]).map(function(t){return{id:t.id,catalogTile:t.vizId,targetMapping:t.inboundPermanentKey};})};})};return o;};
P.prototype._storeETag=function(p){this._oEtags[p.id]={modifiedOn:p.modifiedOn,etag:p.__metadata.etag};};
P.prototype.abortPendingBackendRequests=function(){if(this._oODataModel.hasPendingRequests()){for(var i=0;i<this._oODataModel.aPendingRequestHandles.length;i++){this._oODataModel.aPendingRequestHandles[i].abort();}}};
P.prototype._rejectWithErrorMessage=function(e){var E,s={};if(e.statusCode==="412"){E=this._oResourceBundle.getText("Message.OverwriteChanges");}else if(e.statusCode==="400"){E=this._oResourceBundle.getText("Message.OverwriteRemovedPage");}else{try{E=JSON.parse(e.responseText).error.message.value||e.message;}catch(a){E=e.message;}}s.message=E;s.statusCode=e.statusCode;s.statusText=e.statusText;return Promise.reject(s);};
P.prototype.checkErrorMessage=function(p){function f(a,q){return a.filter(function(o){return o.target.toLowerCase().indexOf(q.toLowerCase())!==-1;});}var m=this._oMessageModel.getData();return!(f(m,"/pageSet('"+p+"')").length>0);};
P.prototype._getCatalogsByRole=function(r){var p=[];r.forEach(function(R){p.push(new Promise(function(a,b){this._oODataModel.read("/roleSet('"+encodeURIComponent(R)+"')",{urlParameters:{"$expand":"catalogs/visualizations"},success:function(o){a(o.catalogs.results);},error:b});}.bind(this)));}.bind(this));return p;};
P.prototype._getCatalogsByPage=function(p){return new Promise(function(r,a){this._oODataModel.read("/pageSet('"+encodeURIComponent(p)+"')",{urlParameters:{"$expand":"roles/catalogs/visualizations"},success:function(o){var R=o.roles.results;var c=R.reduce(function(b,d){return b.concat(d.catalogs.results);},[]);r(c);},error:a});}.bind(this));};
P.prototype.getRoles=function(p){return new Promise(function(r,a){this._oODataModel.read("/pageSet('"+encodeURIComponent(p)+"')",{urlParameters:{"$expand":"roles/catalogs/visualizations"},success:function(o){var R=o.roles.results;r(R);},error:a});}.bind(this));};
return P;},true);
sap.ui.predefine('sap/ushell/applications/PageComposer/util/Transport',[],function(){"use strict";var T=function(){};
T.prototype._changeHandler=function(d){return function(v){var m=d.getModel();var V=jQuery.extend({},m.getProperty("/validation"),{transport:v});m.setProperty("/validation",V);};};
T.prototype.enhanceDialogWithTransport=function(d,t,o){var c=this._changeHandler(d);c(false);var C=function(p){var P=t.decorateResultWithTransportInformation(p);o(P);};t.attachChangeEventHandler(c);d.attachConfirm(C);d.transportExtensionPoint(t);return d;};
return T;});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/Component',["sap/ui/core/UIComponent","./controller/ErrorDialog","sap/ui/model/json/JSONModel","./util/SpacePersistence"],function(U,E,J,S){"use strict";return U.extend("sap.ushell.applications.SpaceDesigner.Component",{metadata:{"manifest":"json"},_role:null,_oTransportPromise:null,init:function(){U.prototype.init.apply(this,arguments);this.getRouter().initialize();var c=this.getComponentData();var s=c&&c.startupParameters;this._handleStartupParams(s||{});this.getModel("SpaceRepository").setHeaders({"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()});this.setMetaModelData();},getSpaceRepository:function(){if(!this.oSpacePersistenceInstance){this.oSpacePersistenceInstance=new S(this.getModel("SpaceRepository"),this.getModel("i18n").getResourceBundle());}return this.oSpacePersistenceInstance;},isTransportSupported:function(){var m=this.getManifestEntry("sap.ui5");return!!m.componentUsages&&!!m.componentUsages.transportInformation&&!!m.componentUsages.transportInformation.componentData&&m.componentUsages.transportInformation.componentData.supported;},_saveRole:function(r){this._sRole=r;},getRole:function(){return this._sRole;},_handleStartupParams:function(s){var a=s.spaceId&&s.spaceId[0];var r=s.roleId&&s.roleId[0];var m=s.mode&&s.mode[0];this._saveRole(r);if(a){m=["edit","view"].indexOf(m)>-1?m:"view";this.getRouter().navTo(m,{spaceId:encodeURIComponent(a)},true);}},showErrorDialog:function(e){E.open(e,this.getModel("i18n"));},createTransportComponent:function(s){if(this.isTransportSupported()){if(!this._oTransportPromise){this._oTransportPromise=this.createComponent({async:true,usage:"transportInformation"});}return this._oTransportPromise.then(function(t){t.reset({"package":s});return t;});}return Promise.reject();},setMetaModelData:function(){this.getModel("SpaceRepository").getMetaModel().loaded().then(function(){var m=this.getModel("SpaceRepository").getMetaModel();var M={copySupported:!!m.getODataFunctionImport("copySpace"),deleteSupported:!!m.getODataFunctionImport("deleteSpace"),createSupported:this.getMetadata().getConfig().enableCreate,previewSupported:this.getMetadata().getConfig().enablePreview};this.setModel(new J(M),"SupportedOperationModel");}.bind(this));}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/App.controller',["./BaseController"],function(B){"use strict";return B.extend("sap.ushell.applications.SpaceDesigner.controller.App",{});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/BaseController',["sap/ui/core/mvc/Controller","sap/ui/core/UIComponent","../util/Transport","sap/m/MessageBox","sap/m/library","sap/base/Log"],function(C,U,T,M,s,L){"use strict";return C.extend("sap.ushell.applications.SpaceDesigner.controller.BaseController",{getSpaceRepository:function(){return this.getOwnerComponent().getSpaceRepository();},getRouter:function(){return U.getRouterFor(this);},getModel:function(n){return this.getView().getModel(n);},setModel:function(m,n){return this.getView().setModel(m,n);},getRootView:function(){return this.getOwnerComponent().getRootControl();},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle();},getTransportHelper:function(){if(!this.oTransportHelper){this.oTransportHelper=new T();}return this.oTransportHelper;},_createEditDialog:function(o,a){return new Promise(function(r){sap.ui.require(["sap/ushell/applications/SpaceDesigner/controller/EditDialog.controller"],function(E){if(!this.oEditSpaceDialogController){this.oEditSpaceDialogController=new E(this.getRootView(),this.getResourceBundle());}this.oEditSpaceDialogController.attachCancel(a);this.oEditSpaceDialogController.attachConfirm(o);this.oEditSpaceDialogController.load().then(function(){r(this.oEditSpaceDialogController);}.bind(this));}.bind(this));}.bind(this));},showCreateDialog:function(o,a){return new Promise(function(r,b){sap.ui.require(["sap/ushell/applications/SpaceDesigner/controller/CreateSpaceDialog.controller"],function(c){if(!this.oCreateSpaceDialogController){this.oCreateSpaceDialogController=new c(this.getRootView(),this.getResourceBundle());}this.oCreateSpaceDialogController.attachConfirm(o);this.oCreateSpaceDialogController.attachCancel(a);this.oCreateSpaceDialogController.load().then(function(){if(this.getOwnerComponent().isTransportSupported()){return this.getOwnerComponent().createTransportComponent().then(function(t){return this.getTransportHelper().enhanceDialogWithTransport(this.oCreateSpaceDialogController,t,o);}.bind(this));}return this.oCreateSpaceDialogController;}.bind(this)).then(function(e){if(e){e.open();}r();}).catch(function(e){this.oCreateSpaceDialogController.destroy();this.handleBackendError(e);b();}.bind(this));}.bind(this));}.bind(this));},_createDeleteDialog:function(o,a){return new Promise(function(r){sap.ui.require(["sap/ushell/applications/SpaceDesigner/controller/DeleteDialog.controller"],function(D){if(!this.oDeleteSpaceDialogController){this.oDeleteSpaceDialogController=new D(this.getRootView(),this.getResourceBundle());}this.oDeleteSpaceDialogController.attachCancel(a);this.oDeleteSpaceDialogController.attachConfirm(o);this.oDeleteSpaceDialogController.load().then(function(){r(this.oDeleteSpaceDialogController);}.bind(this));}.bind(this));}.bind(this));},checkShowEditDialog:function(a,o,b){var e=this.handleBackendError.bind(this);if(!this.getOwnerComponent().isTransportSupported()){return Promise.resolve();}return this.getOwnerComponent().createTransportComponent(a.metadata.devclass).then(function(t){return Promise.all([t.showTransport(a),t.showLockedMessage(a)]).then(function(r){var S=r[0];var l=r[1];if(l){this.showMessageBoxError(this.getResourceBundle().getText("EditDialog.LockedText",[l.foreignOwner]),true);}else if(S){this._createEditDialog(o,b).then(function(d){d.getModel().setProperty("/message",this.getResourceBundle().getText("EditDialog.TransportRequired"));var E=this.getTransportHelper().enhanceDialogWithTransport(d,t,o);E.open();}.bind(this)).catch(e);}}.bind(this)).catch(e);}.bind(this)).catch(e);},checkShowDeleteDialog:function(a,o,b){var r=this.getResourceBundle();var e=this.handleBackendError.bind(this);if(!this.getOwnerComponent().isTransportSupported()){return this._createDeleteDialog(o,b).then(function(d){d.getModel().setProperty("/message",r.getText("DeleteDialog.Text"));d.open();});}return this.getOwnerComponent().createTransportComponent(a.metadata.devclass).then(function(t){return Promise.all([t.showTransport(a),t.showLockedMessage(a)]).then(function(R){var S=R[0];var l=R[1];if(l){this.showMessageBoxError(r.getText("DeleteDialog.LockedText",[l.foreignOwner]),true);}else{this._createDeleteDialog(o,b).then(function(d){d.getModel().setProperty("/message",r.getText("DeleteDialog.Text"));if(S){d.getModel().setProperty("/message",r.getText("DeleteDialog.TransportRequired"));d=this.getTransportHelper().enhanceDialogWithTransport(d,t,o);}d.open();}.bind(this)).catch(e);}}.bind(this)).catch(e);}.bind(this)).catch(e);},showCopyDialog:function(S,o,a){return new Promise(function(r,b){sap.ui.require(["sap/ushell/applications/SpaceDesigner/controller/CopySpaceDialog.controller"],function(c){if(!this.oCopySpaceDialogController){this.oCopySpaceDialogController=new c(this.getRootView(),this.getResourceBundle());}this.oCopySpaceDialogController.attachConfirm(o);this.oCopySpaceDialogController.attachCancel(a);return this.oCopySpaceDialogController.load().then(function(){if(this.getOwnerComponent().isTransportSupported()){return this.getOwnerComponent().createTransportComponent().then(function(t){return this.getTransportHelper().enhanceDialogWithTransport(this.oCopySpaceDialogController,t,o);}.bind(this));}return this.oCopySpaceDialogController;}.bind(this)).then(function(e){if(e){e.open();e.getModel().setProperty("/sourceId",S.content.id);e.getModel().setProperty("/sourceTitle",S.content.title);}r();}).catch(function(e){this.oCopySpaceDialogController.destroy();this.handleBackendError(e);b(e);}.bind(this));}.bind(this));}.bind(this));},showMessageBoxError:function(e,n){if(n){M.error(e,{onClose:function(){this.navigateToSpaceOverview();}.bind(this)});}else{M.error(e);}},navigateToSpaceOverview:function(){this.getRouter().navTo("overview");},navigateToErrorPage:function(S){this.getRouter().navTo("error",{spaceId:encodeURIComponent(S)},null,true);},checkMasterLanguageMismatch:function(a){var c=this.getOwnerComponent().getMetadata().getConfig().checkLanguageMismatch;var u=sap.ui.getCore().getConfiguration().getSAPLogonLanguage().toUpperCase();var S=a.content.masterLanguage.toUpperCase();if(c&&u!==S){this.showMessageBoxError(this.getResourceBundle().getText("EditDialog.LanguageMismatch",[S,u]),true);return true;}return false;},handleBackendError:function(e){if(e.responseText){this.getOwnerComponent().showErrorDialog(e);}else{L.error(e);}},onRouteLeave:function(){this.getSpaceRepository().abortPendingBackendRequests();}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/BaseDialog.controller',["sap/ui/core/library","sap/base/util/merge","./BaseController","sap/ui/core/Fragment"],function(c,m,B,F){"use strict";var V=c.ValueState;return B.extend("sap.ushell.applications.SpaceComposer.controller.BaseDialog.controller",{destroy:function(){if(this._oView.byId(this.sViewId)){this._oView.byId(this.sViewId).destroy();}},onCancel:function(){this._oView.byId(this.sViewId).close();if(this._fnCancel){this._fnCancel();}},attachConfirm:function(a){this._fnConfirm=a;},onConfirm:function(e){if(this._fnConfirm){this._fnConfirm(e);}},getModel:function(){return this._oModel;},validate:function(v){for(var i in v){if(!v[i]){return false;}}return true;},attachCancel:function(a){this._fnCancel=a;},transportExtensionPoint:function(a){this._oView.byId("transportContainer").setComponent(a);},load:function(){var f={id:this._oView.getId(),name:this.sId,controller:this};return F.load(f).then(function(a){a.setModel(this._oModel);}.bind(this));},open:function(){var d=this._oView.byId(this.sViewId);this._oView.addDependent(d);d.open();},handlePackageNamespaceChange:function(s,f){var t=this._oView.byId("transportContainer").getComponentInstance(),p=t&&t.getRootControl().byId("packageInput");if(p&&!p.getValue().length){var P=s.split("/");P.pop();P=P.join("/");if(P){if(f){p.fireLiveChange({value:P});}else{p.setValue(P);p.fireChange({value:P});}}}},onTitleLiveChange:function(e){var i=e.getSource(),M=this.getModel(),I=i.getValue(),b=this.isValidTitle(I),v=m({},M.getProperty("/validation"),{title:b}),s=b?V.None:V.Error;M.setProperty("/validation",v);i.setValueState(s);},onSpaceIDLiveChange:function(e){var i=e.getSource(),M=this.getModel(),I=i.getValue(),b=this.isValidID(I),v=m({},M.getProperty("/validation"),{id:b}),s=b?V.None:V.Error;M.setProperty("/validation",v);i.setValueState(s);if(I.length>0){i.setValueStateText(this._oResourceBundle.getText("Message.InvalidSpaceID"));}else{i.setValueStateText(this._oResourceBundle.getText("Message.EmptySpaceID"));}this.handlePackageNamespaceChange(I,true);},onSpaceIDChange:function(e){var n=e.getParameters().value;this.handlePackageNamespaceChange(n,false);},isValidID:function(i){return/^[A-Z_/]{1}[A-Z0-9_/]{0,34}$/g.test(i);},isValidTitle:function(t){return/^.{1,100}$/g.test(t);}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/CopySpaceDialog.controller',["sap/ui/model/json/JSONModel","./BaseDialog.controller","sap/base/util/merge"],function(J,B,m){"use strict";return B.extend("sap.ushell.applications.SpaceDesigner.controller.CopySpaceDialog",{constructor:function(v,r){this._oView=v;this._oModel=new J({validation:{id:false}});this.sViewId="copyDialog";this.sId="sap.ushell.applications.SpaceDesigner.view.CopySpaceDialog";this._oResourceBundle=r;},onConfirm:function(){var M=this.getModel(),r={content:{targetId:M.getProperty("/targetId"),sourceId:M.getProperty("/sourceId"),title:M.getProperty("/title")},metadata:{}};if(this._fnConfirm){this._fnConfirm(r);}},_resetModel:function(M){M.setProperty("/targetId","");M.setProperty("/sourceId","");M.setProperty("/title","");var v=m({},M.getProperty("/validation"),{id:false});M.setProperty("/validation",v);},onBeforeOpen:function(){var f=this._oView.byId("copyDialog");sap.ui.getCore().getMessageManager().registerObject(f,true);this._resetModel(f.getModel());}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/CreateSpaceDialog.controller',["sap/ui/model/json/JSONModel","./BaseDialog.controller","sap/base/util/merge"],function(J,B,m){"use strict";return B.extend("sap.ushell.applications.SpaceDesigner.controller.CreatePageDialog",{constructor:function(v,r){this._oView=v;this._oModel=new J({validation:{id:false,title:false}});this._oResourceBundle=r;this.sViewId="createSpaceDialog";this.sId="sap.ushell.applications.SpaceDesigner.view.CreateSpaceDialog";},onConfirm:function(){var M=this.getModel(),r={content:{id:M.getProperty("/id"),title:M.getProperty("/title")},metadata:{}};if(this._fnConfirm){this._fnConfirm(r);}},_resetModel:function(M){M.setProperty("/id","");M.setProperty("/title","");var v=m({},M.getProperty("/validation"),{id:false,title:false});M.setProperty("/validation",v);},onBeforeOpen:function(){var f=this._oView.byId("createSpaceDialog");sap.ui.getCore().getMessageManager().registerObject(f,true);this._resetModel(f.getModel());}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/CustomString',["sap/ui/model/SimpleType"],function(S){"use strict";return S.extend("sap.ushell.applications.SpaceDesigner.controller.CustomString",{formatValue:function(v){return v;},parseValue:function(v){return v.toUpperCase();},validateValue:function(v){}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/DeleteDialog.controller',["sap/base/strings/formatMessage","./BaseDialog.controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(f,B,F,J){"use strict";return B.extend("sap.ushell.applications.SpaceDesigner.controller.DeleteDialog.controller",{constructor:function(v){this._oView=v;this._createOrResetModel();this.sViewId="deleteDialog";this.sId="sap.ushell.applications.SpaceDesigner.view.DeleteDialog";},_createOrResetModel:function(){if(!this._oModel){this._oModel=new J();}this._oModel.setData({title:"",message:"",validation:{}});},destroy:function(){this._createOrResetModel();B.prototype.destroy.apply(this,arguments);}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/EditDialog.controller',["sap/base/strings/formatMessage","./BaseDialog.controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(f,B,F,J){"use strict";return B.extend("sap.ushell.applications.SpaceDesigner.controller.EditDialog.controller",{constructor:function(v){this._oView=v;this._oModel=new J({title:"",message:"",validation:{}});this.sViewId="editDialog";this.sId="sap.ushell.applications.SpaceDesigner.view.EditDialog";},onConfirm:function(){this._oView.byId("editDialog").close();B.prototype.onConfirm.apply(this,arguments);}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/ErrorDialog',["sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(F,J,M){"use strict";var c={onAfterClose:function(e){e.getSource().destroy();},onShowDetails:function(e){e.getSource().getModel().setProperty("/showDetails",true);},onConfirm:function(e){e.getSource().getParent().close();},onCopy:function(e){var t=document.createElement("textarea");try{t.contentEditable=true;t.readonly=false;t.textContent=e.getSource().getModel().getProperty("/description");document.documentElement.appendChild(t);if(navigator.userAgent.match(/ipad|iphone/i)){var r=document.createRange();r.selectNodeContents(t);window.getSelection().removeAllRanges();window.getSelection().addRange(r);t.setSelectionRange(0,999999);}else{jQuery(t).select();}document.execCommand("copy");M.show(e.getSource().getModel("i18n").getResourceBundle().getText("Message.ClipboardCopySuccess"),{closeOnBrowserNavigation:false});}catch(E){M.show(e.getSource().getModel("i18n").getResourceBundle().getText("Message.ClipboardCopyFail"),{closeOnBrowserNavigation:false});}finally{jQuery(t).remove();}}};
function o(e,i){var r=JSON.parse(e.responseText);var m=new J({message:r.error.message.value,description:JSON.stringify(r,null,3).replace(/\{|\}/g,""),statusCode:e.statusCode,statusText:e.statusText,showDetails:false});F.load({name:"sap.ushell.applications.SpaceDesigner.view.ErrorDialog",controller:c}).then(function(d){d.setModel(m);d.setModel(i,"i18n");d.open();});}
return{open:o};});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/ErrorPage.controller',["./BaseController"],function(B){"use strict";return B.extend("sap.ushell.applications.SpaceDesigner.controller.ErrorPage",{onLinkPress:function(){this.getRouter().navTo("overview",null,null,true);}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/SpaceDetail.controller',["./BaseController","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/base/Log","sap/base/strings/formatMessage"],function(B,J,M,L,f){"use strict";return B.extend("sap.ushell.applications.SpaceDesigner.controller.SpaceDetail",{onInit:function(){var r=this.getRouter();r.getRoute("view").attachPatternMatched(this._onPageMatched,this);this.setModel(new J({space:{},editMode:false,transportSupported:this.getOwnerComponent().isTransportSupported()}));this.getView().addEventDelegate({onBeforeHide:this.onRouteLeave.bind(this)});},onExit:function(){this.space.exit();},formatMessage:f,_onPageMatched:function(e){var a=e.getParameter("arguments");var s=a.spaceId;var r=this.getOwnerComponent().getRole();this.getModel().setProperty("/space",{});this.getView().setBusy(true);L.info("The space with id "+s+" was opened in view mode scoped by the following role",r);this._loadSpace(decodeURIComponent(s)).then(function(S){this.getModel().setProperty("/space",S);}.bind(this)).catch(function(){this.navigateToErrorPage(s);}.bind(this)).finally(function(){this.getView().setBusy(false);}.bind(this));},_loadSpace:function(s){return Promise.all([this.getSpaceRepository().getSpace(s)]).then(function(p){this.getModel().updateBindings(true);return p[1];}.bind(this));},_navigateToEdit:function(s){},_deleteSpace:function(e){var d=e.getSource().getParent();var t=e.metadata&&e.metadata.transportId||"";var s=this.getModel().getProperty("/space/content/id");var S=this.getResourceBundle().getText("Message.SuccessDeletePage");return this.getSpaceRepository().deleteSpace(s,t).then(function(){this.navigateToPageOverview();M.show(S,{closeOnBrowserNavigation:false});d.close();}.bind(this)).catch(this.handleBackendError.bind(this));},onEdit:function(){this._navigateToEdit(this.getModel().getProperty("/page/content/id"));},onDelete:function(){var s=this.getModel().getProperty("/space");this.checkShowDeleteDialog(s,this._deleteSpace.bind(this));},onCopy:function(){var p=this.getModel().getProperty("/page");this.showCopyDialog(p,function(a){sap.ushell.Container.getServiceAsync("PageReferencing").then(function(P){return P.createReferencePage(a,[]);}).then(function(r){return this.getPageRepository().copyPage(r);}.bind(this)).then(function(){this._navigateToEdit(a.content.targetId);M.show(this.getResourceBundle().getText("Message.PageCreated"),{closeOnBrowserNavigation:false});}.bind(this)).catch(this.handleBackendError.bind(this));}.bind(this));}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/controller/SpaceOverview.controller',["./BaseController","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(B,M,J,F,a){"use strict";return B.extend("sap.ushell.applications.SpaceDesigner.controller.Main",{aPropertiesToFilter:["id","title","description","createdByFullname","modifiedByFullname","BusinessRoleId","BusinessRole"],oDialogFactory:null,onInit:function(){this.setModel(new J({busy:false,pages:[],transportSupported:this.getOwnerComponent().isTransportSupported()}));this.getRouter().getRoute("overview").attachPatternMatched(this._onSpaceOverviewMatched,this);this.setModel(this._createInitialButtonStateModel(),"buttonStates");},onItemPress:function(e){var s=e.getParameter("listItem").getBindingContext().getObject();this._navigateToDetail(s.content.id);},_onSpaceOverviewMatched:function(){this._refreshModel();},_navigateToEdit:function(p){this.getRouter().navTo("edit",{pageId:encodeURIComponent(p)});},_navigateToDetail:function(s){this.getRouter().navTo("view",{spaceId:encodeURIComponent(s)});},onSelectionChange:function(e){this._setDeleteAndCopyButtonEnabled(true);},onEdit:function(e){var p=e.getSource().getBindingContext().getObject();this._navigateToEdit(p.content.id);},onAdd:function(){var r=this.getResourceBundle();this.showCreateDialog(function(p){sap.ushell.Container.getServiceAsync("PageReferencing").then(function(P){return P.createReferencePage(p,[]);}).then(function(R){return this.getPageRepository().createPage(R);}.bind(this)).then(function(){this._navigateToEdit(p.content.id);M.show(r.getText("Message.PageCreated"),{closeOnBrowserNavigation:false});}.bind(this)).catch(this.handleBackendError.bind(this));}.bind(this));},_deletePage:function(e){var r=this.getResourceBundle();var d=e.getSource().getParent();var t=e.metadata&&e.metadata.transportId||"";var T=this.byId("table");var i=T.getSelectedItems().map(function(b){return b.getBindingContext().getObject();});var s=r.getText("Message.SuccessDeletePage");var D=i.map(function(I){return this.getPageRepository().deletePage(I.content.id,t);}.bind(this));return Promise.all(D).then(function(){return this._refreshModel();}.bind(this)).then(function(){T.removeSelections();this._setDeleteAndCopyButtonEnabled(false);T.fireSelectionChange();M.show(s,{closeOnBrowserNavigation:false});d.close();}.bind(this)).catch(this.handleBackendError.bind(this));},onDelete:function(){var t=this.byId("table");var s=t.getSelectedItem();if(!s){return;}this.checkShowDeleteDialog(s.getBindingContext().getObject(),this._deletePage.bind(this));},onCopy:function(){var t=this.byId("table");var s=t.getSelectedItem();var r=this.getResourceBundle();if(!s){return;}var p=s.getBindingContext().getObject();this.showCopyDialog(p,function(b){this.pageInfo=b;sap.ushell.Container.getServiceAsync("PageReferencing").then(function(P){return P.createReferencePage(b,[]);}).then(function(R){return this.getPageRepository().copyPage(R);}.bind(this)).then(function(){return this._refreshModel();}.bind(this)).then(function(){this._navigateToDetail(this.pageInfo.content.targetId);M.show(r.getText("Message.PageCreated"),{closeOnBrowserNavigation:false});}.bind(this)).catch(this.handleBackendError.bind(this));}.bind(this));},onSearch:function(e){var t=this.byId("table");var b=t.getBinding("items");var r=this.getResourceBundle();var s=e.getSource().getValue();var f=this.aPropertiesToFilter.map(function(p){return new F({path:"content/"+p,operator:a.Contains,value1:s});});var o=new F({filters:f,and:false});b.filter([o]);if(b.getLength()===0){if(s){t.setNoDataText(r.getText("Message.NoPagesFound"));}else{t.setNoDataText(r.getText("Message.NoPages"));}}},_refreshModel:function(){this.getModel().setProperty("/busy",true);return this._loadAvailableSpaces().then(function(s){this.getModel().setSizeLimit(s.spaces.length);this.getModel().setProperty("/spaces",s.spaces);this.getModel().setProperty("/busy",false);}.bind(this),function(e){this.getModel().setProperty("/busy",false);this.showMessageBoxError(e);}.bind(this));},onTableUpdate:function(){var t=this.byId("table");if(t.getSelectedItems().length===0){t.removeSelections(true);this._setDeleteAndCopyButtonEnabled(false);}},_loadAvailableSpaces:function(){return this.getSpaceRepository().getSpaces().then(function(s){return{spaces:s};});},_createInitialButtonStateModel:function(){return new J({isDeleteAndCopyEnabled:false});},_setDeleteAndCopyButtonEnabled:function(e){this.getView().getModel("buttonStates").setProperty("/isDeleteAndCopyEnabled",e);}});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/localService/mockserver',["sap/ui/core/util/MockServer"],function(M){"use strict";return{init:function(r,m,c){r=r||"/";var o=new M({rootUri:r});M.config({autoRespond:true,autoRespondAfter:0});o.simulate(m,c);o.start();}};});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/test/initMockServer',["../localService/mockserver","sap/m/Shell","sap/ushell/bootstrap/common/common.boot.task","sap/ui/model/json/JSONModel","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/Config"],function(m,S,b,J,C,a){"use strict";m.init("/sap/opu/odata/UI2/FDM_SPACE_REPOSITORY_SRV/","../localService/space/metadata.xml",{sMockdataBaseUrl:"../localService/space/mockData"});m.init("/sap/opu/odata/UI2/FDM_VALUE_HELP_SRV/","../localService/transport/metadata.xml",{sMockdataBaseUrl:"../localService/transport/mockData"});
function _(){a._reset();a.registerConfiguration(null,C.createConfigContract());}
function c(p){return new Promise(function(r){var M=new J(p);M.attachRequestCompleted(function(){r(M.getData());});});}
function d(){return c("cdm/configuration.json");}
d().then(function(o){window["sap-ushell-config"]=o;b("cdm",function(){_();var e=new sap.ui.core.ComponentContainer({async:true,height:"100%",name:"sap.ushell.applications.SpaceDesigner",manifest:"../manifest.json"});var s=new S({app:e,appWidthLimited:false});s.placeAt("content");});});});
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/util/SpacePersistence',[],function(){"use strict";var S=function(d,r){this._oODataModel=d;this._oResourceBundle=r;this._oEtags={};};
S.prototype.getSpaces=function(){return this._readSpaces().then(function(s){for(var i=0;i<s.results.length;i++){this._storeETag(s.results[i]);}return s;}.bind(this)).then(this._convertODataToSpaceList).catch(this._rejectWithErrorMessage.bind(this));};
S.prototype.getSpace=function(s){return this._readSpace(s).then(function(a){this._storeETag(a);return a;}.bind(this)).then(this._convertODataToReferenceSpace).catch(this._rejectWithErrorMessage.bind(this));};
S.prototype.createSpace=function(s){var a=this._convertReferenceSpaceToOData(s);return this._createSpace(a).then(this._storeETag.bind(this));};
S.prototype.updateSpace=function(u){var U=this._convertReferenceSpaceToOData(u);U.modifiedOn=this._oEtags[u.content.id].modifiedOn;return this._createSpace(U).then(this._storeETag.bind(this)).catch(this._rejectWithErrorMessage.bind(this));};
S.prototype.deleteSpace=function(s,t){return new Promise(function(r,a){this._oODataModel.callFunction("/deleteSpace",{method:"POST",urlParameters:{spaceId:s,transportId:t,modifiedOn:this._oEtags[s].modifiedOn},success:r,error:a});}.bind(this));};
S.prototype.copySpace=function(s){return new Promise(function(r,a){this._oODataModel.callFunction("/copySpace",{method:"POST",urlParameters:{targetId:s.content.targetId.toUpperCase(),sourceId:s.content.sourceId,title:s.content.title,devclass:s.metadata.devclass,transportId:s.metadata.transportId},success:r,error:a});}.bind(this));};
S.prototype._readSpaces=function(){return new Promise(function(r,a){this._oODataModel.read("/spaceSet",{success:r,error:a});}.bind(this));};
S.prototype._readSpace=function(s){return new Promise(function(r,a){this._oODataModel.read("/spaceSet('"+encodeURIComponent(s)+"')",{urlParameters:{"$expand":"pages"},success:r,error:a});}.bind(this));};
S.prototype._createSpace=function(n){return new Promise(function(r,a){this._oODataModel.create("/spaceSet",n,{success:r,error:a});}.bind(this));};
S.prototype._convertODataToSpaceList=function(s){return s.results.map(function(o){return{content:{id:o.id,title:o.title,description:o.description,createdBy:o.createdBy,createdByFullname:o.createdByFullname,createdOn:o.createdOn,modifiedBy:o.modifiedBy,modifiedByFullname:o.modifiedByFullname,modifiedOn:o.modifiedOn,masterLanguage:o.masterLanguage},metadata:{devclass:o.devclass,transportId:o.transportId}};});};
S.prototype._convertODataToReferenceSpace=function(s){return{content:{id:s.id,title:s.title,description:s.description,createdBy:s.createdBy,createdByFullname:s.createdByFullname,createdOn:s.createdOn,modifiedBy:s.modifiedBy,modifiedByFullname:s.modifiedByFullname,modifiedOn:s.modifiedOn,masterLanguage:s.masterLanguage,pages:s.pages.results.map(function(p){return{id:p.id,title:p.title};})},metadata:{transportId:s.transportId,devclass:s.devclass}};};
S.prototype._convertReferenceSpaceToOData=function(s){var r=s.content,m=s.metadata;var o={id:r.id,title:r.title,description:r.description,devclass:m.devclass,transportId:m.transportId,pages:(r.pages||[]).map(function(p){return{id:p.id,title:p.title};})};return o;};
S.prototype._storeETag=function(s){this._oEtags[s.id]={modifiedOn:s.modifiedOn,etag:s.__metadata.etag};};
S.prototype.abortPendingBackendRequests=function(){if(this._oODataModel.hasPendingRequests()){for(var i=0;i<this._oODataModel.aPendingRequestHandles.length;i++){this._oODataModel.aPendingRequestHandles[i].abort();}}};
S.prototype._rejectWithErrorMessage=function(e){var E;if(e.statusCode==="412"){E=this._oResourceBundle.getText("Message.SpaceIsOutdated");}else{try{E=JSON.parse(e.responseText).error.message.value||e.message;}catch(a){E=e.message;}}return Promise.reject(E);};
return S;},true);
sap.ui.predefine('sap/ushell/applications/SpaceDesigner/util/Transport',[],function(){"use strict";var T=function(){};
T.prototype._changeHandler=function(d){return function(v){var m=d.getModel();var V=jQuery.extend({},m.getProperty("/validation"),{transport:v});m.setProperty("/validation",V);};};
T.prototype.enhanceDialogWithTransport=function(d,t,o){var c=this._changeHandler(d);c(false);var C=function(s){var S=t.decorateResultWithTransportInformation(s);o(S);};t.attachChangeEventHandler(c);d.attachConfirm(C);d.transportExtensionPoint(t);return d;};
return T;});
sap.ui.predefine('sap/ushell/bootstrap/SchedulingAgent',["sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler","sap/ushell/bootstrap/_SchedulingAgent/EventProcessor","sap/ushell/bootstrap/_SchedulingAgent/FLPLoader","sap/ushell/bootstrap/_SchedulingAgent/logger","sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(F,E,a,l,s,b){"use strict";var L={CONTINUE_ON_EVENT:"continueOnEvent",BY_EVENT:"byEvent",BY_COMPONENT_CREATE:"byComponentCreate",BY_REQUIRE:"byRequire",WAIT_IN_MS:"waitInMs"};var S={WAIT:"wait",ERROR:"error",DONE:"done",STEP:"step",BLOCKDONE:"blockDone",SKIPPED:"skip"};var c={oComponentsLoading:{},oPathsLoading:{},_initialize:function(){s.clear();l.clearHistory();s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Initializing,"Scheduling Agent starting");var d=F.initializeSchedule();d.then(function(e){if(!e){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,"Configuration error!");return;}E.initializeStepDoneListener(this);s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Initialized,"Scheduling Agent ready");this.eventReceived();}.bind(this));},_processStepConfiguration:function(d){var o={sStepType:"",oData:{},sStepName:"",bConfigOk:false};if(d.oConfig.loadingMode===L.CONTINUE_ON_EVENT){o.sStepType=L.CONTINUE_ON_EVENT;o.sStepName=d.oContent.LoadingStep;o.oData.eventName=d.oConfig.continueOnEvent&&d.oConfig.continueOnEvent.eventName;o.oData.stepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.eventName&&o.oData.stepName);}else if(d.oConfig.loadingMode===L.BY_EVENT){o.sStepType=L.BY_EVENT;o.sStepName=d.oContent.LoadingStep;o.oData.eventName=d.oConfig.byEvent&&d.oConfig.byEvent.eventName;o.oData.eventData={};o.oData.eventData.data=d.oConfig.byEvent.eventData;o.oData.eventData.stepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.eventName);}else if(d.oConfig.loadingMode===L.BY_COMPONENT_CREATE){o.sStepType=L.BY_COMPONENT_CREATE;o.sStepName=d.oContent.LoadingStep;o.oData=d.oConfig.byComponentCreate&&d.oConfig.byComponentCreate.ui5ComponentOptions||{};o.bConfigOk=!!o.oData;}else if(d.oConfig.loadingMode===L.BY_REQUIRE){o.sStepType=L.BY_REQUIRE;o.sStepName=d.oContent.LoadingStep;o.oData={};o.oData.sPath=d.oConfig.byRequire.path;o.oData.sStepName=d.oContent.LoadingStep;o.bConfigOk=!!o.oData.sPath;}else if(d.oConfig.loadingMode===L.WAIT_IN_MS){o.sStepType=L.WAIT_IN_MS;o.sStepName=d.oContent.LoadingStep;o.oData.iWaitingTime=d.oConfig.waitInMs&&d.oConfig.waitInMs.waitingTime;o.oData.sStepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.iWaitingTime&&o.oData.sStepName);}return o;},dumpState:function(){s.dump();},dumpHistory:function(){l.dumpHistory();},dumpSchedule:function(){F.dumpSchedule();},dumpAll:function(){l.dumpHistory();F.dumpSchedule();s.dump();},eventReceived:function(){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Working,"Agent is active");var n;do{n=F.getNextLoadingStep();if(n.sStatus===S.ERROR){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,"Fatal loading error. Loading aborted.");E.unregisterStepDoneListener();b.emit("FLPLoadingDone");return;}if(n.sStatus===S.DONE){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Done,"Loading finished");E.unregisterStepDoneListener();b.emit("FLPLoadingDone");return;}if(n.sStatus===S.BLOCKDONE){}if(n.sStatus===S.SKIPPED){}if(n.sStatus===S.STEP){var o=this._processStepConfiguration(n);if(!o.bConfigOk){s.setForLoadingStep(o.sStepName,s.id.loadingStep.Abort,"","Step configuration error");s.setForLoadingStep(o.sStepName,s.id.loadingStep.Skipped,"","Step configuration error");s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,o,"Step configuration error!");}else if(o.sStepType===L.CONTINUE_ON_EVENT){E.listenToEvent(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.eventName,"continueOnEvent step sent to Event Processor");}else if(o.sStepType===L.BY_EVENT){a.loadComponentByEvent(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData,"byEvent step sent to FLP Loader");}else if(o.sStepType===L.WAIT_IN_MS){a.waitInMs(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.iWaitingTime+"ms","WaitInMs step sent to FLP Loader");}else if(o.sStepType===L.BY_REQUIRE){var p=a.loadComponentByRequire(o.oData.sPath);this.oPathsLoading[o.sStepName]=p;s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.sPath,"byRequire step sent to FLP Loader");var d=o.sStepName;p.then(function(){s.setForLoadingStep(d,s.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oPathsLoading[d];b.emit("StepDone",d);}.bind(this),function(){s.setForLoadingStep(d,s.id.loadingStep.FatalError,"","Step's promise failed");delete this.oPathsLoading[d];b.emit("StepFailed",d);}.bind(this));}else if(o.sStepType===L.BY_COMPONENT_CREATE){var P=a.loadComponentByComponentCreate(o.oData);this.oComponentsLoading[o.sStepName]=P;s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData,"byComponentCreate step sent to FLP Loader");P.then(function(){s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oComponentsLoading[o.sStepName];b.emit("StepDone",o.sStepName);}.bind(this),function(){s.setForLoadingStep(o.sStepName,s.id.loadingStep.FatalError,"","Step's promise failed");delete this.oComponentsLoading[o.sStepName];b.emit("StepFailed",o.sStepName);}.bind(this));}}}while(n.sStatus!==S.WAIT);s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Waiting,"Agent waits");}};return c;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/EventProcessor',["sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(I,E){"use strict";var a={SchedulingAgent:{},aDoableObjects:[],initializeStepDoneListener:function(b){this.SchedulingAgent=b;this.aDoableObjects=[E.on("StepDone").do(function(s){I.setForLoadingStep(s,I.id.loadingStep.Done,"","Step event received");this.SchedulingAgent.eventReceived();}.bind(this)),E.on("StepFailed").do(function(s){I.setForLoadingStep(s,I.id.loadingStep.Skipped,"","Step event received");this.SchedulingAgent.eventReceived();}.bind(this))];},listenToEvent:function(e){E.once(e.eventName).do(function(){I.setForLoadingStep(e.stepName,I.id.loadingStep.Done,e.eventName,"Event received");this.SchedulingAgent.eventReceived();}.bind(this));},unregisterStepDoneListener:function(){this.aDoableObjects.forEach(function(d){d.off();});},setTimeOut:function(){}};return a;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/FLPLoader',["sap/ushell/EventHub","sap/ui/core/Component"],function(E,C){"use strict";var F={loadComponentByEvent:function(c){E.emit(c.eventName,c.eventData);},loadComponentByComponentCreate:function(c){return C.create(c);},loadComponentByRequire:function(p){return new Promise(function(r,R){sap.ui.require([p],function(d){r(d);});});},waitInMs:function(w){setTimeout(function(){E.emit("StepDone",w.sStepName);},w.iWaitingTime);},directLoading:function(){}};return F;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler',["sap/ushell/bootstrap/_SchedulingAgent/state","sap/base/util/LoaderExtensions","sap/base/Log","sap/ushell/Config"],function(s,L,a,C){"use strict";var S={Loaded:"loaded",Wait:"wait",Step:"step",Error:"error",BlockDone:"blockDone",Start:"start",Done:"done",Skipped:"skipped"};var b="sap/ushell/bootstrap/_SchedulingAgent/LoadingConfiguration.json";var c="sap/ushell/bootstrap/_SchedulingAgent/StepConfiguration.json";
function g(){return C.last("/core/shell/model/currentState/stateName");}
var F={oSchedule:{iBlockIndex:0,aBlocksLoading:[]},initializeSchedule:function(){var p=L.loadResource(c,{async:true});var d=L.loadResource(b,{async:true});var P=Promise.all([p,d]).then(function(v){var o=v[0];var l=v[1];var e=this._validateConfig(l,o);if(e){this.oSchedule.oBlocks=l.LoadingBlocks;this.oSchedule.oSteps=o;this.oSchedule.aBlockOrder=l.OrderOfLoadingBlocks;this.oSchedule.iBlockIndex=0;s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.Initialized,"Schedule validated");}else{s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.WrongConfiguration,"Configuration error");}return e;}.bind(this));return P;},getNextLoadingStep:function(){var o={sStatus:S.Start,oContent:{}};if(this.oSchedule.aBlocksLoading.length===0){var l=this._startLoadingBlock();if(l){o.sStatus=S.Done;return o;}}var d=this.oSchedule.aBlocksLoading[this.oSchedule.aBlocksLoading.length-1];var e=this.oSchedule.aBlockOrder.indexOf(d);var n=this.oSchedule.aBlockOrder[e+1];if(this.oSchedule.oBlocks[d].bCanBeLoadedConcurrently&&n){this._startLoadingBlock();}var A=true;var f=false;var h,j,k,m,p,q,I,r,t;for(var i=0;i<this.oSchedule.aBlocksLoading.length;i++){h=this.oSchedule.aBlocksLoading[i];j=this.oSchedule.oBlocks[h];k=j.iStepIndex;m=j.LoadingSteps[k];p=k===j.LoadingSteps.length-1;q=this._checkAndUpdateAsyncQueue(j);t=s.isStepLoaded(m.LoadingStep)||s.isStepSkipped(m.LoadingStep);r=s.isStepLoading(m.LoadingStep);A=q.bAllStepsDone&&t;f=q.bAStepIsLoading||r;if((r&&!m.canBeLoadedAsync)||(f&&p)){o.sStatus=S.Wait;continue;}if(!p||!t&&!r){if(t||(m.canBeLoadedAsync&&r)){k+=1;}o=this._prepareStepForLoading(j,h,k);}if(A&&p){I=this.oSchedule.aBlocksLoading.indexOf(h);this.oSchedule.aBlocksLoading.splice(I,1);o.sStatus=S.BlockDone;s.setForLoadingBlock(h,s.id.loadingBlock.Done,"","Block removed from loading queue");}if(o.sStatus!==S.wait){break;}}return o;},dumpSchedule:function(){a.debug(JSON.stringify(this.oSchedule));},_loadingIsEnabled:function(d){var e;if(Array.isArray(d.oConfig.excludedFLPStates)){if(d.oConfig.excludedFLPStates.indexOf(g())>-1){return false;}}if(Array.isArray(d.oConfig.mandatoryFLPStates)&&d.oConfig.mandatoryFLPStates.length!==0){if(d.oConfig.mandatoryFLPStates.indexOf(g())===-1){return false;}}function f(o){return o.path&&C.last(o.path)!==o.assertionValue;}if(d.oConfig.configSwitch){e=[].concat(d.oConfig.configSwitch);if(e.some(f)){return false;}}return true;},_checkAndUpdateAsyncQueue:function(d){var t=[];var e,f,h;var A=true;var j=false;for(var i=0;i<d.aAsyncStepsLoading.length;i++){h=d.aAsyncStepsLoading[i];e=s.isStepLoaded(h)||s.isStepSkipped(h);f=s.isStepLoading(h);if(f){t.push(h);}A=A&&e;j=j||f;}d.aAsyncStepsLoading=t;return{bAllStepsDone:A,bAStepIsLoading:j};},_startLoadingBlock:function(){var l=false;if(this.oSchedule.iBlockIndex<this.oSchedule.aBlockOrder.length){var n=this.oSchedule.aBlockOrder[this.oSchedule.iBlockIndex];this.oSchedule.aBlocksLoading.push(n);this.oSchedule.oBlocks[n].iStepIndex=0;this.oSchedule.oBlocks[n].aAsyncStepsLoading=[];this.oSchedule.iBlockIndex+=1;s.setForLoadingBlock(n,s.id.loadingBlock.Prepared,"","Block added to the loading queue.");}else{l=true;}return l;},_prepareStepForLoading:function(d,e,f){var h;var o={sStatus:S.Step,oContent:d.LoadingSteps[f],oConfig:this.oSchedule.oSteps[d.LoadingSteps[f].LoadingStep]};if(!this._loadingIsEnabled(o)){o.sStatus=S.Skipped;d.iStepIndex=f;s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Skipped,"","Step set to skipped");return o;}var D=this._checkDependencies(o,e);if(D.bMissing){o.sStatus=S.Error;}else if(D.bAllLoaded){s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Prepared,"","Step prepared for control unit");h=o.oContent.canBeLoadedAsync;d.iStepIndex=f;if(h){s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Prepared,"","Step set on the async loading queue");d.aAsyncStepsLoading.push(o.oContent.LoadingStep);}}else{o.sStatus=S.Wait;s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.WaitingForDependencies,"","Step missing dependencies");}return o;},_checkDependencies:function(d,e){var D={bAllLoaded:true,bMissing:false};if(d.oConfig.Dependencies){for(var i=0;i<d.oConfig.Dependencies.length;i++){D.bAllLoaded=D.bAllLoaded&&s.isStepLoaded(d.oConfig.Dependencies[i]);if(!s.isStepLoaded(d.oConfig.Dependencies[i])&&!s.isStepLoading(d.oConfig.Dependencies[i])){s.setForLoadingStep(d.oContent.LoadingStep,s.id.loadingStep.Aborted,d.oConfig.Dependencies[i],"Missing a dependency");s.setForLoadingBlock(e,s.id.loadingBlock.Aborted,d.oConfig.Dependencies[i],"A step is missing a dependency");s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.LoadingAborted,"Dependencies can not be resolved: a dependency isn't loading before it is required.");D.bMissing=true;D.bAllLoaded=false;break;}}}return D;},_validateConfig:function(l,d){var e=l&&l.OrderOfLoadingBlocks&&l.LoadingBlocks&&l.OrderOfLoadingBlocks.length&&d;if(!e){return false;}var B=l.OrderOfLoadingBlocks.reduce(function(f,h){f=f&&l.LoadingBlocks[h];if(f){var o=l.LoadingBlocks[h];var i=true;if(o.LoadingSteps){var k;for(var j=0;j<o.LoadingSteps.length;j++){k=o.LoadingSteps[j].LoadingStep;i=i&&d[k];}}f=f&&i;}return!!f;},true);return B;}};return F;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/logger',["sap/base/Log"],function(B){"use strict";var h=[];var v=true;var C="FLPScheduler";return{getHistory:function(){return h;},verboseOn:function(){v=true;return(v===true);},verboseOff:function(){v=false;return(v===false);},isVerboseOn:function(){return(v===true);},clearHistory:function(){h.length=0;},dumpHistory:function(i){var _;if(i){_=h.filter(function(e){return e.id===i;});console.table(_);}else{console.table(h);}return _||h;},logError:function(e){B.error(this.stateToString(e),undefined,C);h.push(e);return true;},logWarning:function(w){if(v){B.warning(this.stateToString(w),C);h.push(w);}return v;},logStatus:function(s){if(v){B.info(this.stateToString(s),C);h.push(s);}return v;},stateToString:function(s){return"FLP Bootstrap Scheduling Agent :: "+s.type+" '"+s.id+"' /"+s.status+((s.remark)?"/ : "+s.remark:"/");}};},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/state',["sap/ushell/bootstrap/_SchedulingAgent/logger","sap/base/util/now","sap/base/util/deepClone"],function(l,n,c){"use strict";var i={module:{schedulingAgent:{id:"schedulingAgent",FatalError:"FATAL_ERROR",Idle:"IDLE",Initialized:"INITIALIZED",Initializing:"INITIALIZING",Waiting:"WAITING",WokeUp:"WOKE_UP",Working:"WORKING"},state:{id:"state",FatalError:"FATAL_ERROR",Available:"AVAILABLE"},flpScheduler:{id:"flpScheduler",Initialized:"INITIALIZED",WrongConfiguration:"WRONG_CONFIGURATION",LoadingAborted:"LOADING_ABORTED"},flpLoader:{id:"flpLoader"},logger:{id:l,Block:"BLOCK",Step:"STEP",Module:"MODULE"}},loadingStep:{Prepared:"STEP_PREPARED",WaitingForDependencies:"STEP_WAITING_FOR_DEPENDENCIES",InProgress:"STEP_IN_PROGRESS",Done:"STEP_DONE",Aborted:"STEP_ABORTED",Skipped:"STEP_SKIPPED"},loadingBlock:{Prepared:"BLOCK_PREPARED",WaitingForDependencies:"BLOCK_WAITING_FOR_DEPENDENCIES",InProgress:"BLOCK_IN_PROGRESS",TimedOut:"BLOCK_TIMEDOUT",Done:"BLOCK_DONE",Aborted:"BLOCK_ABORTED"}};var s={id:i,oState:{ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}},clear:function(){this.oState={ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}};},getIdBase:function(){return i;},setForLoadingBlock:function(a,b,p,r,d){this.oState.ofLoadingBlock[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingBlock[a].time,type:i.module.logger.Block,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingBlock:function(a){return this.oState.ofLoadingBlock[a];},setForLoadingStep:function(a,b,p,r,d){this.oState.ofLoadingStep[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingStep[a].time,type:i.module.logger.Step,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingStep:function(a){return this.oState.ofLoadingStep[a];},setForModule:function(a,b,r){this.oState.ofModule[a]={time:n(),status:b,remark:r,byModule:undefined};l.logStatus({time:this.oState.ofModule[a].time,type:i.module.logger.Module,id:a,status:b,parameter:undefined,remark:r,byModule:undefined});},getForModule:function(a){return this.oState.ofModule[a];},isBlockWaitingForDependencies:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.WaitingForDependencies);},isBlockLoading:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.InProgress);},isBlockLoaded:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Done);},isBlockLoadingAborted:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Aborted);},hasBlockLoadingTimedOut:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.TimedOut);},isStepWaitingForDependencies:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.WaitingForDependencies);},isStepLoading:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.InProgress);},isStepLoaded:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Done);},isStepLoadingAborted:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Sborted);},isStepSkipped:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Skipped);},isAgentIdle:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Idle);},isAgentWaiting:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Waiting);},agentWokeUp:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.WokeUp);},dump:function(){console.log(JSON.parse(JSON.stringify(this.oState)));var S=c(this.oState);return S;},iStartingTime:n()};s.setForModule(i.module.state.id,i.module.state.Available);return s;},false);
sap.ui.predefine('sap/ushell/bootstrap/cdm/cdm.constants',["../common/common.util"],function(c){"use strict";return c.deepFreeze({defaultConfig:{"defaultRenderer":"fiori2","ushell":{"home":{"tilesWrappingType":"Hyphenated"}},"renderers":{"fiori2":{"componentData":{"config":{"sessionTimeoutReminderInMinutes":5,"sessionTimeoutIntervalInMinutes":-1,"sessionTimeoutTileStopRefreshIntervalInMinutes":15,"enableAutomaticSignout":true,"enableHideGroups":true,"enablePersonalization":true,"enableTagFiltering":false,"enableSearch":false,"enableTilesOpacity":false,"enableSetTheme":true,"enableAccessibility":true,"enableHelp":false,"enableUserDefaultParameters":true,"enableRecentActivity":true,"enableRecentActivityLogging":true,"preloadLibrariesForRootIntent":false,"applications":{"Shell-home":{"enableEasyAccess":false,"enableTileActionsIcon":false,"enableHideGroups":false,"enableTilesOpacity":false}},"rootIntent":"Shell-home"}}}},"services":{"Container":{"adapter":{"config":{"userProfile":{"metadata":{"ranges":{"theme":{"sap_belize":{"displayName":"SAP Belize","themeRoot":""},"sap_belize_plus":{"displayName":"SAP Belize Plus","themeRoot":""},"sap_fiori_3_hcb":{"displayName":"SAP Belize HCB","themeRoot":""},"sap_fiori_3_hcw":{"displayName":"SAP Belize HCW","themeRoot":""}}}},"defaults":{"theme":"sap_belize"}}}}},"Personalization":{"adapter":{"module":"sap.ushell.adapters.local.PersonalizationAdapter"}},"AppState":{"adapter":{"module":"sap.ushell.adapters.local.AppStateAdapter"},"config":{"transient":true}},"NavTargetResolution":{"config":{"runStandaloneAppFolderWhitelist":{},"allowTestUrlComponentConfig":false,"enableClientSideTargetResolution":true},"adapter":{"module":"sap.ushell.adapters.local.NavTargetResolutionAdapter"}},"SupportTicket":{"config":{"enabled":false},"adapter":{"module":"sap.ushell.adapters.local.SupportTicketAdapter"}},"EndUserFeedback":{"config":{"enabled":false},"adapter":{"module":"sap.ushell.adapters.local.EndUserFeedbackAdapter"}},"UserInfo":{"adapter":{"module":"sap.ushell.adapters.local.UserInfoAdapter"}},"UserDefaultParameterPersistence":{"adapter":{"module":"sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter"}},"NavigationDataProvider":{"adapter":{"module":"sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter"}},"VisualizationDataProvider":{"adapter":{"module":"sap.ushell.adapters.cdm.v3.LaunchPageAdapter"}}},"ui5":{"libs":{"sap.ui.core":true,"sap.m":true,"sap.ushell":true}}}});});
sap.ui.predefine('sap/ushell/bootstrap/common/common.boot.path',[],function(){"use strict";return sap.ui.require.toUrl("");});
sap.ui.predefine('sap/ushell/bootstrap/common/common.boot.task',["jquery.sap.global","./common.constants","../common/common.configure.ui5language","../common/common.configure.ui5theme","../common/common.configure.ui5datetimeformat","../common/common.configure.xhrlogon","../common/common.load.ui5theme","../common/common.load.xhrlogon","sap/base/util/UriParameters","sap/base/util/ObjectPath","sap/ushell/services/Container"],function(q,c,C,f,a,o,l,x,U,O){"use strict";
function b(u,d){var e,g=window[c.ushellConfigNamespace];C(g);f(g);a(g);if(new U(window.location.href).get("sap-ushell-cdm-loadFioriTheme")===true){e=O.get("services.Container.adapter.config.userProfile.defaults.bootTheme",g);l(e);}window.sap.ushell.bootstrap(u).then(function(){o.start(sap.ushell.Container,x);}).then(d);}
return b;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5.extractLibs',["jquery.sap.global","sap/base/util/isPlainObject"],function(L,i){"use strict";return function readRequiredLibsFromConfig(u){if(!u||!u.ui5||!u.ui5.libs){return[];}if(!i(u.ui5.libs)){jQuery.sap.log.error("Invalid ushell configuration: /ui5/libs must be an object");return[];}return Object.keys(u.ui5.libs).filter(function(k){return this[k];},u.ui5.libs);};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5',["jquery.sap.global","./common.boot.task","./common.load.launchpad","./common.read.ui5theme.from.config"],function(q,b,l,g){"use strict";return c;
function c(s){if(!s||!s.libs||!Array.isArray(s.libs)){q.sap.log.error("Mandatory settings object not provided",null,"sap/ushell/bootstap/common/common.configure.ui5");return{};}var S=window["sap-ui-config"]||{},u=s&&s.platform,U=s.theme?s.theme:g(s.ushellConfig).theme;S.bindingsyntax="complex";S.preload="async";S.compatversion="1.16";S.libs=s.libs.join();S.theme=U;S["xx-boottask"]=s.bootTask||b.bind(null,u);S.oninit=s.onInitCallback||l;return S;}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5datetimeformat',[],function(){"use strict";return c;
function c(u){var U=u&&u.services&&u.services.Container&&u.services.Container.adapter&&u.services.Container.adapter.config&&u.services.Container.adapter.config.userProfile;var m="Date Format is incorrectly set for the User";var M="Time Format is incorrectly set for the User";try{var s=U&&U.defaults&&U.defaults.sapDateFormat;sap.ui.getCore().getConfiguration().getFormatSettings().setLegacyDateFormat(s);}catch(e){jQuery.sap.log.error(m,e.stack,"sap/ushell/bootstrap/common/common.configure.ui5datetimeformat");}try{var S=U&&U.defaults&&U.defaults.sapTimeFormat;sap.ui.getCore().getConfiguration().getFormatSettings().setLegacyTimeFormat(S);}catch(e){jQuery.sap.log.error(M,e.stack,"sap/ushell/bootstrap/common/common.configure.ui5datetimeformat");}}
},true);
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5theme',["./common.read.ui5theme.from.config","sap/base/util/ObjectPath","sap/base/Log"],function(g,O,L){"use strict";
function s(u){var t=O.get("services.Container.adapter.config.userProfile.metadata.ranges.theme",u);if(!t){return;}O.create("services.UserInfo.adapter.config.themes",u);u.services.UserInfo.adapter.config.themes=Object.keys(t).map(function(k){return{"id":k,"name":t[k].displayName,"root":t[k].themeRoot};});}
function c(u){var C=O.get("services.Container.adapter.config",u),v=g(u);s(u);if(v.theme){C.userProfile.defaults.bootTheme=v;}else{var d=O.get("userProfile.defaults.theme",C),p=O.get("userProfilePersonalization.theme",C);L.error("No valid boot theme could be determined: personalizedTheme = '"+p+"' default theme = '"+d+"'",null,"common.configure.ui5theme");}}
return c;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ushell',["sap/ui/thirdparty/jquery","./common.constants","./common.debug.mode","./common.read.metatags","./common.util","./common.read.ushell.config.from.url","sap/base/util/ObjectPath","sap/base/Log"],function(q,c,d,m,u,C,O,L){"use strict";var S="sap/ushell/bootstrap/common/common.boot.script";
function f(U,s){var p;if(!U||!s){return;}p=O.get(s,U);if(p&&p.items){q.extend(p,p.items);delete p.items;delete p.__metadata;}}
function a(M,D,e,s){var g=c.ushellConfigNamespace,h=M,U,o;s=s||[];if(!window[g]){window[g]={};}U=window[g];if(D){h=[D].concat(M);}h.forEach(function(i){u.mergeConfig(U,i,true);});s.forEach(function(i){u.mergeConfig(U,i,true);});o=C.getConfig();if(o){u.mergeConfig(U,o,true);}U["sap-ui-debug"]=e;L.info("finally applied sap-ushell-config",JSON.stringify(U),S);}
function b(s){var U;var D=s&&s.defaultUshellConfig;var M=m.readMetaTags(c.configMetaPrefix);a(M,D,d,null);U=window[c.ushellConfigNamespace];f(U,"services.Container.adapter.config.userProfilePersonalization");return U;}
return b;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.xhrlogon',["sap/ui/thirdparty/jquery","sap/ushell/bootstrap/common/common.util"],function(q,u){"use strict";var m={start:s,initXhrLogonIgnoreList:i,createUi5ConnectedXhrLogger:c};return m;
function c(){return["error","warning","info","debug"].reduce(function(x,l){x[l]=function(M){return q.sap.log[l](M);};return x;},{});}
function i(x){var o=u.getLocationOrigin(),U=q.sap.getModulePath("");if(U&&U.indexOf(o+"/")===-1){x.ignore.add(U);}}
function s(S,x){x.start();m.initXhrLogonIgnoreList(x.XHRLogonManager.getInstance());XMLHttpRequest.logger=c();S.oFrameLogonManager=x.FrameLogonManager.getInstance();}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.create.configcontract.core',["sap/ui/thirdparty/URI"],function(U){"use strict";var d={};
function c(m){var G={};function a(M,p){var P=p.split("/");var s=P.slice(0,P.length-1).join("/");var l=P.pop();if(M.hasOwnProperty(s)){return M[s][l];}var D=P.reduce(function(o,f){if(!o||!o.hasOwnProperty(f)){return{};}return o[f];},m);M[s]=D;return D[l];}function b(p,D){var s=a(G,p);d[p]=D;return s!==undefined?s:D;}function e(p,o){var E=b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined);var P=b("renderers/fiori2/componentData/config/applications/Shell-home/"+p,undefined);var O=b("renderers/fiori2/componentData/config/applications/Shell-home/"+o,undefined);P=(E===false)?false:P;P=(P!==undefined)?P:E;if(E===undefined||E){if(P===false){return false;}return(O!==undefined)?O:P;}return false;}var C={core:{extension:{enableHelp:b("renderers/fiori2/componentData/config/enableHelp",false),EndUserFeedback:b("services/EndUserFeedback/config/enabled",true),SupportTicket:b("services/SupportTicket/config/enabled",false)},navigation:{enableInPlaceForClassicUIs:{GUI:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/GUI",false),WDA:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WDA",false),WCF:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WCF",true)},enableWebguiLocalResolution:true,enableWdaLocalResolution:true,flpURLDetectionPattern:b("services/ClientSideTargetResolution/config/flpURLDetectionPattern","[/]FioriLaunchpad.html[^#]+#[^-]+?-[^-]+")},spaces:{enabled:b("ushell/spaces/enabled",false),configurable:b("ushell/spaces/configurable",false)},darkMode:{enabled:b("ushell/darkMode/enabled",false),supportedThemes:b("ushell/darkMode/supportedThemes",[{dark:"sap_fiori_3_dark",light:"sap_fiori_3"}])},productSwitch:{enabled:!!b("ushell/productSwitch/url",""),url:b("ushell/productSwitch/url","")},shellHeader:{application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:b("renderers/fiori2/componentData/config/rootIntent",""),title:""},shell:{cacheConfiguration:b("renderers/fiori2/componentData/config/cacheConfiguration",{}),enablePersonalization:b("renderers/fiori2/componentData/config/enablePersonalization",b("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true)),enableRecentActivity:b("renderers/fiori2/componentData/config/enableRecentActivity",true),enableRecentActivityLogging:b("renderers/fiori2/componentData/config/enableRecentActivityLogging",true),enableFiori3:true,model:{enableSAPCopilotWindowDocking:undefined,enableBackGroundShapes:true,personalization:undefined,contentDensity:undefined,setTheme:undefined,userDefaultParameters:undefined,disableHomeAppCache:undefined,enableHelp:undefined,enableTrackingActivity:undefined,searchAvailable:false,searchFiltering:true,showEndUserFeedback:false,searchTerm:"",isPhoneWidth:false,enableNotifications:b("services/Notifications/config/enabled",false),enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",migrationConfig:undefined,allMyAppsMasterLevel:undefined,options:[],userStatus:undefined,userStatusUserEnabled:true,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},userPreferences:{dialogTitle:"Settings",isDetailedEntryMode:false,activeEntryPath:null,entries:[],profiling:[]},userImage:{personPlaceHolder:"sap-icon://person-placeholder",account:"sap-icon://account"},currentState:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:false,showRecentActivity:true,search:"",paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]}}},home:{animationRendered:false,disableSortedLockedGroups:b("renderers/fiori2/componentData/config/applications/Shell-home/disableSortedLockedGroups",false),draggedTileLinkPersonalizationSupported:true,editTitle:false,enableHomePageSettings:b("renderers/fiori2/componentData/config/applications/Shell-home/enableHomePageSettings",true),enableRenameLockedGroup:b("renderers/fiori2/componentData/config/applications/Shell-home/enableRenameLockedGroup",false),enableTileActionsIcon:b("renderers/fiori2/componentData/config/enableTileActionsIcon",b("renderers/fiori2/componentData/config/applications/Shell-home/enableTileActionsIcon",false)),enableTilesOpacity:b("services/ClientSideTargetResolution/config/enableTilesOpacity",b("renderers/fiori2/componentData/config/applications/Shell-home/enableTilesOpacity",true)),enableTransientMode:b("ushell/home/enableTransientMode",false),featuredGroup:{enable:b("ushell/home/featuredGroup/enable",false),frequentCard:b("ushell/home/featuredGroup/frequentCard",true)&&b("ushell/home/featuredGroup/enable",false),recentCard:b("ushell/home/featuredGroup/recentCard",true)&&b("ushell/home/featuredGroup/enable",false)},gridContainer:b("ushell/home/gridContainer",false),homePageGroupDisplay:b("renderers/fiori2/componentData/config/applications/Shell-home/homePageGroupDisplay","scroll"),isInDrag:false,optimizeTileLoadingThreshold:b("renderers/fiori2/componentData/config/applications/Shell-home/optimizeTileLoadingThreshold",100),sizeBehavior:b("renderers/fiori2/componentData/config/sizeBehavior","Responsive"),sizeBehaviorConfigurable:b("renderers/fiori2/componentData/config/sizeBehaviorConfigurable",false),wrappingType:b("ushell/home/tilesWrappingType","Normal"),segments:b("renderers/fiori2/componentData/config/applications/Shell-home/segments",undefined),tileActionModeActive:false},catalog:{appFinderDisplayMode:b("renderers/fiori2/componentData/config/applications/Shell-home/appFinderDisplayMode",undefined),easyAccessNumbersOfLevels:b("renderers/fiori2/componentData/config/applications/Shell-home/easyAccessNumbersOfLevels",undefined),enableCatalogSearch:b("renderers/fiori2/componentData/config/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSearch",true))),enableCatalogSelection:b("renderers/fiori2/componentData/config/enableCatalogSelection",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSelection",true)),enableCatalogTagFilter:b("renderers/fiori2/componentData/config/enableTagFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogTagFilter",true)),enableEasyAccess:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined),enableEasyAccessSAPMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessSAPMenuSearch:e("enableEasyAccessSAPMenu","enableEasyAccessSAPMenuSearch"),enableEasyAccessUserMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessUserMenuSearch:e("enableEasyAccessUserMenu","enableEasyAccessUserMenuSearch"),enableHideGroups:b("renderers/fiori2/componentData/config/enableHideGroups",b("renderers/fiori2/componentData/config/applications/Shell-home/enableHideGroups",true)),sapMenuServiceUrl:undefined,userMenuServiceUrl:b("renderers/fiori2/componentData/config/applications/Shell-home/userMenuServiceUrl",undefined)}}};return C;}
function g(){return d;}
return{createConfigContract:c,getDefaultConfiguration:g};},false);
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.appruntime-min',["./common.debug.mode","./common.load.script"],function(d,l){"use strict";
function a(p){var u=sap.ui.require.toUrl((p).replace(/\./g,"/")),i;if(d){sap.ui.require(["sap/ui/core/Core"],function(c){c.boot();});}else{for(i=0;i<4;i++){l(u+"/appruntime-min-"+i+".js");}}}
return a;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.core-min',["./common.debug.mode","./common.load.script"],function(d,l){"use strict";
function a(p){var u=sap.ui.require.toUrl((p).replace(/\./g,"/")),i;if(d){sap.ui.require(["sap/ui/core/Core"],function(c){c.boot();});}else{for(i=0;i<4;i++){l(u+"/core-min-"+i+".js");}}}
return a;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.launchpad',[],function(){"use strict";return l;
function l(d){sap.ui.require(["sap/ushell/iconfonts","sap/ushell/services/AppConfiguration"],function(I,C){window.sap.ushell.Container.createRenderer(null,true).then(function(c){c.placeAt(d||"canvas","only");});I.registerFiori2IconFont();});}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.model',["sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ui/Device"],function(C,J,q,D){"use strict";var _;
function a(){var s=C.last("/core"),i={groups:[],rtl:sap.ui.getCore().getConfiguration().getRTL(),personalization:s.shell.enablePersonalization,tagList:[],selectedTags:[],userPreferences:{entries:[]},enableHelp:s.extension.enableHelp,enableTileActionsIcon:D.system.desktop?s.home.enableTileActionsIcon:false};i=q.extend({},s.catalog,s.home,i);_=new J(i);_.setSizeLimit(10000);}
function b(m){_.setProperty("/isPhoneWidth",!m.matches);}
function c(){var m=window.matchMedia("(min-width: 800px)");if(m.addListener){m.addListener(b);b(m);}}
return{getModel:function(){if(!_){a();c();}return _;}};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.ui5theme',["sap/ushell/bootstrap/common/common.boot.path","sap/ui/thirdparty/jquery"],function(b,q){"use strict";
function a(B){if(!B||!B.theme){q.sap.log.error("No boot theme could be applied",null,"common.load.ui5theme");return;}var S=window["sap-ui-config"]||{},A=c(B.root),t=B.theme,h=S.theme!==t;i(t,A||(b+"/"));if(A||h){var C=sap.ui.getCore();var e=[t,A].filter(function(s){return s;});C.applyTheme.apply(C,e);}q.sap.log.debug("Boot theme applied: theme = '"+B.theme+"' theme root = '"+B.root+"'",null,"common.load.ui5theme");}
function c(t){if(t){return t+"/UI5/";}return undefined;}
function i(t,T){var l=sap.ui.getCore().getConfiguration().getLanguage(),s=T+"sap/fiori/themes/"+t,I=d(l),f=I?"library-RTL.css":"library.css";q.sap.includeStyleSheet(s+"/"+f,"sap-ui-theme-sap.fiori");}
function d(l){var A=["ar","fa","he","iw"];l=l.toLowerCase().substring(0,2);return A.indexOf(l)>=0;}
return a;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.read.metatags',["sap/base/Log"],function(L){"use strict";
function r(m,p){var s="meta[name^='"+m+"']:not([name=''])";var M=document.querySelectorAll(s);var S="sap/ushell/bootstrap/common/common.read.metatags";var i=[];p=p||JSON.parse;Array.prototype.forEach.call(M,function(o){try{i.push(p(o.content));}catch(e){L.error(e.message,e.stack,S);}});return i;}
return{readMetaTags:r};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.read.ui5theme.from.config',["sap/base/util/ObjectPath"],function(O){"use strict";return g;
function e(u){var c=O.get("services.Container.adapter.config",u);return{sDefaultTheme:O.get("userProfile.defaults.theme",c),sPersonalizedTheme:O.get("userProfilePersonalization.theme",c),oRangeTheme:O.get("userProfile.metadata.ranges.theme",c)};}
function g(u){var t=e(u),p=t.sPersonalizedTheme,r=t.oRangeTheme,d=t.sDefaultTheme;if(t.oRangeTheme){if(Object.keys(r).indexOf(p)>-1){var P=r[p]||{};return{theme:p,root:P.themeRoot};}var D=r[d]||{};return{theme:d,root:D.themeRoot};}var a=p||d;return{theme:a,root:""};}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.read.ushell.config.from.url',["sap/base/util/ObjectPath"],function(O){"use strict";var b={"renderers/fiori2/componentData/config/enablePersonalization":[true],"renderers/fiori2/componentData/config/sessionTimeoutReminderInMinutes":[],"renderers/fiori2/componentData/config/sessionTimeoutIntervalInMinutes":[],"renderers/fiori2/componentData/config/sessionTimeoutTileStopRefreshIntervalInMinutes":[],"renderers/fiori2/componentData/config/enableAutomaticSignout":[false],"services/Container/adapter/config/id":[],"services/Container/adapter/config/firstName":[],"services/Container/adapter/config/lastName":[],"services/Container/adapter/config/fullName":[],"services/Container/adapter/config/userProfile/defaults/id":[],"services/Container/adapter/config/userProfile/defaults/firstName":[],"services/Container/adapter/config/userProfile/defaults/lastName":[],"services/Container/adapter/config/userProfile/defaults/fullName":[]};
function a(c,e){var f="",B,i;if(e.namespace){f=e.namespace+"/";}f+=e.propertyName;B=c[f];if(!B){return false;}if(Array.isArray(B)){if(B.length===0){return true;}for(i=0;i<B.length;i+=1){if(B[i]===e.value){return true;}}return false;}throw new Error("Black list entry '"+f+"'has an unknown type");}
function p(v){var n;if(v==="false"){return false;}if(v==="true"){return true;}n=Number.parseFloat(v);if(!Number.isNaN(n)){return n;}return v;}
function g(w){var P,o,c=[],f={},s=w.search.replace("+"," ");P=/[?&]sap-ushell-xx-overwrite-config=([^&$]*)(&|$)/.exec(s);if(P===null){return{};}o=P[1].split(",");o.forEach(function(C){var d=decodeURIComponent(C).split(":");var n=/^\/?(.*)\/([^/]*)$/.exec(d[0]);var e;if(n===null){return;}e={namespace:n[1],propertyName:n[2],value:p(decodeURIComponent(d[1]))};if(a(b,e)){return;}c.push(e);});c.forEach(function(d){var v=d.value;var n=d.namespace.replace(/\//g,".");var N=O.get(n,f);if(N===undefined){O.set(n,{},f);N=O.get(n,f);}N[d.propertyName]=v;});return f;}
return{getConfig:g.bind(null,window.location),_getConfigFromWindowLocation:g,_isBlacklisted:a};});
sap.ui.predefine('sap/ushell/bootstrap/homepage/mockContainer',["sap/ui/base/Object","sap/ushell/Utils","sap/ushell/EventHub","sap/ushell/services/ClientSideTargetResolution","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery"],function(O,u,H,C,a,q){"use strict";H.emit("CoreResourcesComplementLoaded");var p,c={services:{Personalization:{adapter:{module:"sap.ushell.adapters.local.PersonalizationAdapter"}},CommonDataModel:{adapter:{config:{allowSiteSourceFromURLParameter:true,ignoreSiteDataPersonalization:true,siteDataUrl:"../../cdmSiteData/CommonDataModelAdapterData.json"}}},AppState:{adapter:{module:"sap.ushell.adapters.local.AppStateAdapter"}}}},s=new u.Map(),S={getPlatform:function(){return"cdm";}},A={getSystem:function(){return S;}};
function b(n,S,P,e){var o=g(n).adapter||{},f=o.module||d(S.getPlatform())+"."+n+"Adapter";function h(){return new(a.get(f||""))(S,P,{config:o.config||{}});}if(e){return new Promise(function(r,i){var m=f.replace(/\./g,"/");sap.ui.require([m],function(){try{r(h());}catch(j){i(j);}});});}sap.ui.require([f],function(){return h();});}
function g(e){return(c.services&&c.services[e])||{};}
function d(P){if(p&&p[P]){return p[P];}return"sap.ushell.adapters."+P;}
return O.extend("sap.ushell.Container",{isMock:true,constructor:function(){},getServiceAsync:function(e,P){return Promise.resolve(this.getService(e,P,true));},getService:function(e,P,f){this._overrideCSTRResolution();var o={},m,k,h,i,j,l;function n(S){var D=new q.Deferred();if(!S){throw new Error("Missing system");}D.resolve(b(e,S,P));sap.ushell.Container.addRemoteSystem(S);return D.promise();}if(!e){throw new Error("Missing service name");}if(e.indexOf(".")>=0){throw new Error("Unsupported service name");}j=g(e);m=j.module||"sap.ushell.services."+e;k=m+"/"+(P||"");l={config:j.config||{}};function r(v,i){o.createAdapter=n;return new v(i,o,P,l);}function t(h,f){var v;if(h.hasNoAdapter){v=new h(o,P,l);}else{i=b(e,A.getSystem(),P,f);if(f){return i.then(function(w){var v=r(h,w);s.put(k,v);return v;});}v=r(h,i);}s.put(k,v);return f?Promise.resolve(v):v;}if(!s.containsKey(k)){if(f){return new Promise(function(v){sap.ui.require([m.replace(/[.]/g,"/")],function(w){v(t(w,true));});});}h=sap.ui.requireSync(m.replace(/[.]/g,"/"));return t(h);}if(f){return Promise.resolve(s.get(k));}return s.get(k);},_overrideCSTRResolution:function(){C.prototype.getEasyAccessSystems=function(){var D=new q.Deferred(),r={"U1Y_000":{"appType":{"TR":true,"WDA":true},"text":"U1Y Client 000"},"FLPINTEGRATION2015_588":{"appType":{"URL":true},"text":"Business Objects Demo"},"GOOGLE":{"appType":{"URL":true},"text":"Google Searches"}};D.resolve(r);return D.promise();};},getUser:function(){return{getLanguage:function(){return"en";}};},getRenderer:function(){return{createExtendedShellState:function(){},applyExtendedShellState:function(){}};},getLogonSystem:function(){return false;}});},true);
sap.ui.predefine('sap/ushell/components/CatalogsManager',["sap/ui/base/Object","sap/ushell/ui/launchpad/TileState","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/ushell/components/HomepageManager","sap/ushell/resources","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/Log"],function(B,T,e,u,d,g,m,H,r,q,M,L){"use strict";
var C=B.extend("sap.ushell.components.CatalogsManager",{
metadata:{publicMethods:["createGroup","createGroupAndSaveTile","createTile","deleteCatalogTileFromGroup","notifyOnActionFailure","resetAssociationOnFailure"]},
analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},
_aDoableObjects:[],
constructor:function(i,s){this.oLaunchPageService=sap.ushell.Container.getService("LaunchPage");this.aPendingCatalogQueue=[];this.oTileCatalogToGroupsMap={};this.skippedProcessCatalogs=0;this.tagsPool=[];this.oModel=s.model;var h={model:this.oModel};if(typeof sap.ushell.components.getHomepageManager==="function"){this.oHomepageManager=sap.ushell.components.getHomepageManager();}else{this.oHomepageManager=new H("dashboardMgr",h);}sap.ushell.components.getCatalogsManager=(function(v){return function(){return v;};}(this.getInterface()));this.registerEvents();},
registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects=[e.on("showCatalog").do(this.updateTilesAssociation.bind(this)),e.on("updateGroups").do(this.updateTilesAssociation.bind(this))];},
unregisterEvents:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects.forEach(function(D){D.off();});},
getModel:function(){return this.oModel;},
loadAllCatalogs:function(){var G=new q.Deferred(),t=this,s;G.resolve();s=function(){G.done(function(){var a=t.getModel().getProperty("/groups");if(a&&a.length!==0){t.updateTilesAssociation();}});};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){G=this.oHomepageManager.loadPersonalizedGroups();}d.destroyFLPAggregationModels(this.oModel.getProperty("/catalogs"));d.destroyTileModels(this.oModel.getProperty("/catalogTiles"));this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];M.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");M.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");M.pause("FLP:DashboardManager.getCatalogTiles");M.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");M.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");this.oLaunchPageService.getCatalogs().done(function(c){M.end("FLP:DashboardManager.GetCatalogsRequest");M.end("FLP:DashboardManager.getCatalogTiles");q.when.apply(q,this.aPromises).then(function(){t.onDoneLoadingCatalogs(c);});s();}.bind(this)).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_msg")).progress(this.addCatalogToModel.bind(this));}else{s();}},
updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();},
mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups"),i,o,t,a,b,c,f,h=this;for(i=0;i<G.length;i++){o=G[i];["tiles","links"].forEach(function(A){a=o[A];if(a){for(t=0;t<a.length;++t){b=encodeURIComponent(h.oLaunchPageService.getCatalogTileId(a[t].object));c=h.oTileCatalogToGroupsMap[b]||[];f=h.oLaunchPageService.getGroupId(o.object);if(c.indexOf(f)===-1&&(typeof(o.isGroupVisible)==="undefined"||o.isGroupVisible)&&!o.isGroupLocked){c.push(f);}h.oTileCatalogToGroupsMap[b]=c;}}});}},
updateCatalogTilesToGroupsMap:function(){var c=this.getModel().getProperty("/catalogs"),i,t,a,G,b,f,h,j,A,o;if(c){for(i=0;i<c.length;i++){f=c[i].appBoxes;if(f){for(j=0;j<f.length;j++){A=f[j];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(A.src));G=this.oTileCatalogToGroupsMap[t];a=(G||[]);A.associatedGroups=a;}}b=c[i].customTiles;if(b){for(h=0;h<b.length;h++){o=b[h];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o.src));G=this.oTileCatalogToGroupsMap[t];a=(G||[]);o.associatedGroups=a;}}}}this.getModel().setProperty("/catalogs",c);},
addCatalogToModel:function(c){var o={title:this.oLaunchPageService.getCatalogTitle(c),id:this.oLaunchPageService.getCatalogId(c),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]},p;M.resume("FLP:DashboardManager.getCatalogTiles");p=this.oLaunchPageService.getCatalogTiles(c);this.aPromises.push(p);p.done(function(a){M.pause("FLP:DashboardManager.getCatalogTiles");if(!a.length){return;}this.aPendingCatalogQueue.push({oCatalogEntry:a,oCatalogModel:o});if(this.skippedProcessCatalogs<10){clearTimeout(this.oprocessCatalogsTimer);this.skippedProcessCatalogs++;this.oprocessCatalogsTimer=setTimeout(function(){this.processPendingCatalogs();if(this.oModel.getProperty("/enableCatalogTagFilter")===true){this.getTagList();}}.bind(this),20);}}.bind(this)).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));},
getTagList:function(c){var i={},f=0,t=[],h,o,s;if(this.oModel.getProperty("/tagList")&&this.oModel.getProperty("/tagList").length>0){this.tagsPool.concat(this.oModel.getProperty("/tagList"));}for(f=0;f<this.tagsPool.length;f++){o=this.tagsPool[f];if(i[o]){i[o]++;}else{i[o]=1;}}for(h in i){t.push({tag:h,occ:i[h]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(c){this.oModel.setProperty("/tagList",s.slice(0,c));}else{this.oModel.setProperty("/tagList",s);}},
processPendingCatalogs:function(){var c=this.oModel.getProperty("/catalogs"),p,o,a,E,i,b,f,h=sap.ui.getCore().getEventBus(),A,j=this.oModel.getProperty("/masterCatalogs")||[{title:m.getLocalizedText("all")}];M.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");this.skippedProcessCatalogs=0;while(this.aPendingCatalogQueue.length>0){p=this.aPendingCatalogQueue.shift();o=p.oCatalogEntry;a=p.oCatalogModel;E=this.searchModelCatalogByTitle(a.title);if(E.result){b=this.oModel.getProperty("/catalogs")[E.indexOfPreviousInstanceInModel];i=false;}else{i=true;b=a;}o.forEach(function(o,k){if(this._getIsIntentSupported(o)){if(this._getIsAppBox(o)){A=this.createCatalogAppBoxes(o,true);b.appBoxes.push(A);}else{f=this.createCatalogTiles(o);b.customTiles.push(f);if(!this.aFnToGetTileView){this.aFnToGetTileView=[];}}}}.bind(this));if(b.appBoxes.length>0||b.customTiles.length>0){if(i){c.push(a);j.push({title:a.title});}}}this.oModel.setProperty("/masterCatalogs",j);this.oModel.setProperty("/catalogs",c);h.publish("launchpad","afterCatalogSegment");setTimeout(function(){u.setPerformanceMark("FLP-TTI-AppFinder",{bUseUniqueMark:true});},0);M.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");},
loadCustomTilesKeyWords:function(){var f;if(this.aFnToGetTileView){while(this.aFnToGetTileView.length>0){f=this.aFnToGetTileView.pop();f();}}},
searchModelCatalogByTitle:function(c){var a=this.oModel.getProperty("/catalogs"),b=false,i,n=0,G=false;q.each(a,function(f,t){if(t.title===r.i18n.getText("catalogsLoading")){G=true;}else if(c===t.title){i=f;n=t.numberOfTiles;b=true;return false;}});return{result:b,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},
createCatalogAppBoxes:function(c,G){var a=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(c)),b=this.oTileCatalogToGroupsMap[a]||[],t=this.oLaunchPageService.getCatalogTileTags(c)||[];if(t.length>0){this.tagsPool=this.tagsPool.concat(t);}var n;if(c.tileResolutionResult){n=c.tileResolutionResult.navigationMode;}return{id:a,associatedGroups:b,src:c,title:this.oLaunchPageService.getCatalogTilePreviewTitle(c),subtitle:this.oLaunchPageService.getCatalogTilePreviewSubtitle(c),icon:this.oLaunchPageService.getCatalogTilePreviewIcon(c),keywords:G?(this.oLaunchPageService.getCatalogTileKeywords(c)||[]).join(","):[],tags:t,navigationMode:n,url:this.oLaunchPageService.getCatalogTileTargetURL(c)};},
onDoneLoadingCatalogs:function(c){var i,a=[],t=this;for(i=0;i<c.length;i++){a.push(this.oLaunchPageService.getCatalogTiles(c[i]));}Promise.all(a).then(function(R){var I,n=true;for(I=0;I<R.length;I++){if(R[I].length!==0){n=false;break;}}if(n||!c.length){t.oModel.setProperty("/catalogsNoDataText",r.i18n.getText("noCatalogs"));}});var E=sap.ui.getCore().getEventBus();E.publish("launchpad","catalogContentLoaded");var l=c.filter(function(o){var s=t.oLaunchPageService.getCatalogError(o);if(s){L.error("A catalog could not be loaded",s,"sap.ushell.components.CatalogsManager");}return!s;});if(l.length!==c.length){m.showLocalizedError("partialCatalogFail");}u.handleTilesVisibility();},
createCatalogTiles:function(c){var t,a,b=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(c)),f=this.oTileCatalogToGroupsMap[b]||[],h=this.oLaunchPageService.getCatalogTileTags(c)||[];if(h.length>0){this.tagsPool=this.tagsPool.concat(h);}t=new T({state:"Loading"});this.oLaunchPageService.getCatalogTileView(c);a=this.oLaunchPageService.getCatalogTilePreviewTitle(c);if(!a){a=this.oLaunchPageService.getCatalogTileTitle(c);}return{associatedGroups:f,src:c,catalog:c.title,catalogId:c.id,title:a,tags:h,keywords:(this.oLaunchPageService.getCatalogTileKeywords(c)||[]).join(","),id:b,size:this.oLaunchPageService.getCatalogTileSize(c),content:[t],isTileIntentSupported:this.oLaunchPageService.isTileIntentSupported(c),tileType:c.tileType};},
createGroupAndSaveTile:function(D){var t=this,c=D.catalogTileContext,n=D.newGroupName,a=q.Deferred(),R={};if(u.validHash(n)&&c){this.createGroup(n).then(function(o){var p=t.createTile({catalogTileContext:c,groupContext:o});p.done(function(b){R={group:b.group,status:1,action:"addTileToNewGroup"};a.resolve(R);}).fail(function(b){R={group:b.group,status:0,action:"addTileToNewGroup"};a.resolve(R);});});}return a.promise();},
createGroup:function(t){var a=this,D=q.Deferred();if(!u.validHash(t)){return D.reject({status:0,action:"createNewGroup"});}var R=this.oLaunchPageService.addGroup(t);R.done(function(G){var o=a.oHomepageManager.addGroupToModel(G);D.resolve(o);});R.fail(function(){m.showLocalizedError("fail_to_create_group_msg");var o={status:0,action:"createNewGroup"};D.resolve(o);});return D.promise();},
createTile:function(D){var t=this,c=D.catalogTileContext,o=D.groupContext,G=this.oModel.getProperty(o.getPath()),s=G.groupId,R,a=q.Deferred(),b={},E;E=sap.ui.getCore().getEventBus();E.publish("launchpad","addTile",{catalogTileContext:c,groupContext:o});if(!c){L.warning("CatalogsManager: Did not receive catalog tile object. Abort.",this);b={group:G,status:0,action:"add"};return Promise.resolve(b);}R=this.oLaunchPageService.addTile(c.getProperty("src"),o.getProperty("object"));R.done(function(f){var h=t.oModel.getProperty("/groups"),i=g.getModelPathOfGroup(h,s),j=t.oLaunchPageService.getTileTitle(f);t.oHomepageManager.addTileToGroup(i,f);b={group:G,status:1,action:"add"};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[G.title,j]);a.resolve(b);}).fail(function(){m.showLocalizedError("fail_to_add_tile_msg");b={group:G,status:0,action:"add"};a.resolve(b);});return a.promise();},
deleteCatalogTileFromGroup:function(D){var t=this,s=decodeURIComponent(D.tileId),G=D.groupIndex,o=this.oModel.getProperty("/groups/"+G),a=q.Deferred(),b=[],R=[],p,c;["tiles","links"].forEach(function(A){o[A].forEach(function(f){var h=t.oLaunchPageService.getCatalogTileId(f.object);if(h===s){p=q.Deferred();c=t.oLaunchPageService.removeTile(o.object,f.object);c.done((function(a){return function(){R.push(f.uuid);a.resolve({status:true});};})(p));c.fail((function(a){return function(){a.resolve({status:false});};})(p));b.push(p);}});});q.when.apply(q,b).done(function(f){var S=b.length===R.length;t.oHomepageManager.deleteTilesFromGroup(o.groupId,R);t.updateTilesAssociation();a.resolve({group:o,status:S,action:"remove"});});return a.promise();},
calculateCatalogTileIndex:function(c,n,t){var a=parseInt(c*100000,10);a+=(n!==undefined?n:0)+t;return a;},
notifyOnActionFailure:function(s,p){m.showLocalizedError(s,p);},
resetAssociationOnFailure:function(s,p){this.notifyOnActionFailure(s,p);this.updateTilesAssociation();},
_getIsIntentSupported:function(c){return!!(this.oLaunchPageService.isTileIntentSupported(c));},
_getIsAppBox:function(c){var a,i;if(!sap.ushell.Container){return false;}a=this.oModel.getProperty("/appFinderDisplayMode");if(a==="tiles"){i=false;}else{i=!!(this.oLaunchPageService.getCatalogTileTargetURL(c)&&(this.oLaunchPageService.getCatalogTilePreviewTitle(c)||this.oLaunchPageService.getCatalogTilePreviewSubtitle(c)));}return i;},
destroy:function(){this.unregisterEvents();}
});
return C;});
sap.ui.predefine('sap/ushell/components/ComponentKeysHandler',["sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/base/Log"],function(C,A,K,q,L){"use strict";var a=function(){};a.prototype={keyCodes:K,tileFocusCustomData:new A({key:"tabindex",value:"0",writeToDom:true}),goToTileContainer:function(){if(this.oModel.getProperty("/tileActionModeActive")){this.goToFirstVisibleTileContainer();}else{this.goToLastVisitedTile();}},goToFirstVisibleTileContainer:function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");if(j.length){var b=q(j.get(t));if(b.length){this._setTileContainerSelectiveFocus(b);}}},goToLastVisitedTile:function(j,l){var b,d,e=q(".sapUshellTile, .sapMGTLineMode, .sapFCard");if(l){var f=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");var g=j||q(f.get(t));var h=g.find(".sapUshellTile, .sapMGTLineMode, .sapFCard");b=h.filter(":visible").eq(0);d=h.filter("[tabindex=0]:visible").eq(0);if(!b.length){b=e.filter(":visible").eq(0);}}else{b=e.filter(":visible").eq(0);d=e.filter("[tabindex=0]:visible").eq(0);}if(d.length){this._moveScrollDashboard(d);}else if(b.length){b.attr("tabindex","0");this._moveScrollDashboard(b);}else{sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell();}},_goToFirstTileOfNextGroup:function(d,e){this._preventDefault(e);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(d,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n);}}},_goToTileOfGroup:function(p,g){if(g){var b=g.getTiles();if(this.oModel.getProperty("/tileActionModeActive")){b.push(g.oPlusTile);}b=b.concat(g.getLinks());p=p==="first"?0:p;p=p==="last"?b.length-1:p;var t=b[p];if(t&&t.getDomRef()){var j=q(t.getDomRef());if(j.length===1){this._moveScrollDashboard(j);return true;}}}return false;},_moveTile:function(d){var i=this._getGroupAndTilesInfo(),D=this._getNextTile(d,true,i);if(D){var o=D.getParent();if(C.last("/core/home/gridContainer")&&o.getParent().getId()!=="dashboardGroups"){o=o.getParent();}var s=D.getMode?D.getMode():"ContentMode",b=i.oCurTile.getMode?i.oCurTile.getMode():"ContentMode",e=s==="LineMode"?o.getLinks():o.getTiles(),n=0;if(i.oGroup===o){n=e.indexOf(D);if(b==="LineMode"&&s==="ContentMode"&&d==="left"){n=e.length;}}else if(d==="left"||d==="up"){n=e.length;}var E,f,t=this;if(b===s){var g=q(".sapUshellDashboardView").control(0);E="movetile";f={sTileId:g.getController()._getTileUuid(i.oCurTile),toGroupId:o.getGroupId?o.getGroupId():o.groupId,toIndex:n,sToItems:b==="LineMode"?"links":"tiles",sFromItems:b==="LineMode"?"links":"tiles",sTileType:b==="LineMode"?"link":"tile"};if(s==="LineMode"){f.callBack=function(){setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t._moveScrollDashboard(e[n].$());},10);};}else{setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t._moveScrollDashboard(e[n].$());},10);}}else{E="convertTile";f={toGroupId:o.getGroupId?o.getGroupId():o.groupId,srcGroupId:i.oGroup.getGroupId?i.oGroup.getGroupId():i.oGroup.groupId,toIndex:n,callBack:function(){setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t._moveScrollDashboard(e[n].$());},10);},tile:i.oCurTile,longDrop:false};}sap.ui.getCore().getEventBus().publish("launchpad",E,f);}},callbackSetFocus:function(t){var b=this;setTimeout(function(){if(t.oParent&&t.oParent instanceof sap.ushell.ui.launchpad.Tile){b._moveScrollDashboard(q(t.oParent.getDomRef()));}else{b._moveScrollDashboard(t.$());}});},_getTileCenter:function(d,t,T){if(!(T instanceof HTMLElement)){var j=T.$().find(".sapMGTLineStyleHelper");if(T.isLink&&j&&j.length>1){if(d==="down"){return t.right;}return t.left;}}return t.right-((t.right-t.left)/2);},_getTileRect:function(d,t){if(t instanceof HTMLElement){return t.getBoundingClientRect();}var j=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&j&&j.length){if(d==="down"){return j.get(j.length-1).getBoundingClientRect();}return j.get(0).getBoundingClientRect();}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect();}},_findClosestTile:function(d,t,o){var b=this._getTileRect(d,o),n=this._getTileCenter(d,b,o);var e,f=Infinity,g=d==="down"?1:-1,h=t.indexOf(o)+g,i;for(;;h+=g){var T=t[h];if(!T){return e;}if(!e){if(d==="down"&&h===t.length-1){return T;}if(d==="up"&&h===0){return T;}}var j=this._getTileRect(d,T);if(!j){return e;}if(d==="down"&&b.bottom+5>=j.bottom){continue;}if(d==="up"&&b.top-5<=j.top){continue;}if(e&&i!==j.top){return e;}i=j.top;var k=Math.min(Math.abs(j.left-n),Math.abs(j.right-n));if(f>k){f=k;e=T;}else{return e;}}},_getNextTile:function(d,m,g){var i=g||this._getGroupAndTilesInfo(),l=true;var n;var N;var G;var b;if(!i||(m&&i.oGroup.getProperty("isGroupLocked"))){return null;}if(m){var t=i.oCurTile.getBindingContext().getObject().object;l=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported(t);}if(d==="right"||d==="left"){var f=i.oCurTile.isLink?i.aLinks:i.aTiles,e=f.indexOf(i.oCurTile),h=d==="right"?e+1:e-1;if(f[h]&&f[h].getDomRef()){if(m&&f[h]===i.oGroup.oPlusTile){}else{return f[h];}}if(d==="right"&&!i.oCurTile.isLink&&i.aLinks.length&&l){return i.aLinks[0];}if(d==="left"&&i.oCurTile.isLink&&i.aTiles.length){return i.oGroup.getShowPlaceholder()?i.oGroup.oPlusTile:i.aTiles[i.aTiles.length-1];}}var o=this._getNextGroup(d,i.oGroup,m,l);if(o){n=o.getTiles();N=o.getLinks();if(d==="right"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(n.length===0){return N[0];}return n[0];}if(d==="left"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(N.length===0){return n[n.length-1];}return N[N.length-1];}}if(d==="down"||d==="up"){G=l?i.aTiles.concat(i.aLinks):i.aTiles;b=[];if(o){var j=o.getTiles(),k=o.getLinks();b=l?j.concat(k):j;if(b.length===0){b.push(o.oPlusTile);}}var J=(d==="down")?G.concat(b):b.concat(G);return this._findClosestTile(d,J,i.oCurTile);}},_getNextGroup:function(d,o,m,l){var n,g=o.getParent().getGroups(),b=g.indexOf(o),e=b;if(d==="down"||d==="right"){n=1;}else{n=-1;}e+=n;while(g[e]){var N=g[e],f=N.getTiles(),h=N.getLinks();var i=l?f.concat(h):f;var I=N.getVisible()&&!(N.getIsGroupLocked()&&m)&&!(N.getIsGroupLocked()&&i.length===0)&&!(i.length===0&&!(m||this.oModel.getProperty("/tileActionModeActive")));if(I){return N;}e+=n;}},_getGroupAndTilesInfo:function(){var j=this._getFocusOnTile(q(document.activeElement));if(!j||!j.length){return null;}var o=j.control(0);o.isLink=j.hasClass("sapUshellLinkTile")||j.hasClass("sapMGTLineMode");var g=j.closest(".sapUshellTileContainer").control(0);if(!g){return null;}var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return{oCurTile:o,oGroup:g,aTiles:t,aLinks:g.getLinks()};},_goToSiblingElementInTileContainer:function(d,j){var b=j.closest(".sapUshellTileContainer"),e,f,g;e=j.closest(".sapUshellTileContainerBeforeContent");if(e.length){if(d==="up"||d==="left"){this._goToNextTileContainer(e,d);}else{g=b.find(".sapUshellTileContainerHeader").eq(0);this._setTabIndexOnTileContainerHeader(g);g.focus();}return;}e=j.closest(".sapUshellTileContainerHeader");if(e.length){if(d==="up"){this._setTabIndexOnTileContainerHeader(g);if(!this._goToTileContainerBeforeContent(b)){this._goToNextTileContainer(e,d);}}else if(d==="down"){f=b.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(f.length){this._moveScrollDashboard(f);}else{this._goToNextTileContainer(e,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(b)){this._goToNextTileContainer(e,"left");}}else{g=j.closest(".sapUshellTileContainerHeader");g.focus();}}else if(d==="right"){var h=j.hasClass("sapMInputBaseInner");if(!h){f=b.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(f.length){this._moveScrollDashboard(f);}else{this._goToNextTileContainer(e,"down");}}}return;}e=this._getFocusOnTile(j);if(e){this._goFromFocusedTile(d,e,true);return;}e=j.closest(".sapUshellTileContainerAfterContent");if(e.length){if(d==="up"||d==="left"){this._goToTileOfGroup("first",e.control(0));}else{this._goToNextTileContainer(e,d);}}},_goToNextTileContainer:function(j,d){var b=j.closest(".sapUshellTileContainer");if(b.length===1){var e=q(".sapUshellTileContainer").filter(":visible"),n=(d==="down")?1:-1,f=q(e[e.index(b)+n]);if(f.length===1){var g=f.find(".sapUshellTileContainerHeader");if(d==="down"){if(!this._goToTileContainerBeforeContent(f)){this._setTabIndexOnTileContainerHeader(g);this._setTileContainerSelectiveFocus(f);}}else if(!this._goToTileContainerAfterContent(f)){if(d==="up"||d==="left"){var s=d==="up"?"first":"last";if(!this._goToTileOfGroup(s,f.control(0))){this._setTabIndexOnTileContainerHeader(g);g.focus();}}}}}},_goToTileContainerBeforeContent:function(j){var b=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),d=b.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(d.length){d.focus();return true;}return false;},_goToTileContainerAfterContent:function(j){var b=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),d=b.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(d.length){d.focus();return true;}return false;},_goFromFocusedTile:function(d,$,i){var n=this._getNextTile(d);if(n){var N=n.$(),b=$.closest(".sapUshellTileContainer"),e=N.closest(".sapUshellTileContainer");if(i&&(b.get(0).id!==e.get(0).id)){if(d==="down"||d==="right"){if(!this._goToTileContainerAfterContent(b)){this._setTabIndexOnTileContainerHeader(e.find(".sapUshellTileContainerHeader"));this._setTileContainerSelectiveFocus(e);}}else if(d==="up"||d==="left"){var f=b.find(".sapUshellTileContainerHeader");this._setTabIndexOnTileContainerHeader(f);f.focus();}}else{this._moveScrollDashboard(N);}}},_setTabIndexOnTileContainerHeader:function(j){q(".sapUshellTileContainerHeader").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var b=j.find(".sapUshellContainerTitle").eq(0),d=j.find(".sapUshellContainerHeaderActions").eq(0);j.attr("tabindex",0);b.attr("tabindex",0);d.find("button").attr("tabindex",0);}},_setTileContainerSelectiveFocus:function(j){var b=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),d=j.find(".sapUshellTileContainerBeforeContent button"),e=j.find(".sapUshellTileContainerHeader").eq(0),B=d.length&&d.is(":visible");if(B){d.focus();}else if(j.get(0)===b.get(0)){this.goToLastVisitedTile();}else if(e.length){this._setTabIndexOnTileContainerHeader(e);e.focus();}},setTileFocus:function(j){if(!j.hasClass("sapUshellPlusTile")){if(j.parents("#catalogView").length>0){this.setFocusOnCatalogTile(j.find("[tabindex]").eq(0));}}var b=q(".sapUshellTile, .sapMGTLineMode, .sapUshellLinkTile, .sapMGT, .sapFCard").filter("[tabindex=0]").get();for(var i=0;i<b.length;i++){b[i].setAttribute("tabindex","-1");}if(j.length>0){j.attr("tabindex",0);if(j.prop("tagName")==="DIV"&&q(j).hasClass("sapUshellLinkTile")&&j.getMode===undefined){j=j.find("a").length?j.find("a")[0]:j;}j.focus();if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var d=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(d){d.removeAggregation("customData",this.tileFocusCustomData,true);}if(t&&sap.ui.getCore().byId(t.getId())&&this.tileFocusCustomData&&sap.ui.getCore().byId(this.tileFocusCustomData.getId())){t.addAggregation("customData",this.tileFocusCustomData,true);}}}},setFocusOnCatalogTile:function(j){var p=q(".sapUshellTile[tabindex=0]"),b,v;if(p.length){q(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(h){q(h).attr("tabindex",-1);});b=p.find("[tabindex], a").andSelf().filter("[tabindex], a");b.attr("tabindex",-1);}if(!j){v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(v.length){j=q(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},_moveScrollDashboard:function(t){if(!t.length){return;}var f=t[0].parentElement.firstChild;var d=document.getElementById("dashboardGroups");var y=f.getBoundingClientRect().top-d.getBoundingClientRect().top;q("#sapUshellDashboardPage section").stop().animate({scrollTop:y},0,function(){this.setTileFocus(t);}.bind(this));},_moveGroupFromDashboard:function(d,j){var b,t=q(".sapUshellDashboardGroupsContainerItem"),i,e;b=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(b);e=d==="up"||d==="left"?i-1:i+1;this._moveGroup(i,e);},_moveGroup:function(f,t){if(t<0||t>=q(".sapUshellDashboardGroupsContainerItem").length||t<q(".sapUshellDisableDragAndDrop").length){return;}sap.ui.getCore().getEventBus().publish("launchpad","moveGroup",{fromIndex:f,toIndex:t});var b=this;setTimeout(function(){var d=q(".sapUshellTileContainerHeader")[t];b._setTabIndexOnTileContainerHeader(q(d));q(d).focus();},100);},_getFocusOnTile:function(j){var b;[".sapUshellTile",".sapUshellLinkTile",".sapFCard"].forEach(function(s){var d=j.closest(s);if(d.length){b=d;}});return b;},_renameGroup:function(j){if(j.closest(".sapUshellTileContainerHeader").length===1){j=j[0].tagName==="H2"?j:j.find("h2");j.click();}},_arrowsButtonsHandler:function(d,e,j){var i=this.oModel.getProperty("/tileActionModeActive");if((i&&j.hasClass("sapMInputBaseInner"))||j.hasClass("sapMITBFilter")){return;}this._preventDefault(e);if(j.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(d,j);return;}var b=this._getFocusOnTile(j);if(e.ctrlKey===true&&this.oModel.getProperty("/personalization")){var f=j.closest(".sapUshellTileContainerHeader");if(b){this._moveTile(d,b);}else if(f.length){var g=f.closest(".sapUshellTileContainerContent");if(!g.hasClass("sapUshellTileContainerDefault")||!g.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,f);}}}else if(i){this._goToSiblingElementInTileContainer(d,j);}else if(b){this._goFromFocusedTile(d,b,i);}else{this.goToLastVisitedTile();}},_handleAnchorNavigationItemsArrowKeys:function(d,j){var b=q(".sapUshellAnchorItem").filter(":visible"),n=b.index(j),N=j;if(d==="left"||d==="up"){if(n>0){N=b.get(n-1);}}else if(d==="right"||d==="down"){if(n<b.length-1){N=b.get(n+1);}}this._setAnchorItemFocus(q(N));},_setAnchorItemFocus:function(j){q(".sapUshellAnchorItem").get().forEach(function(h){q(h).attr("tabindex",-1);});j.attr("tabindex",0);j.focus();},_appFinderHomeEndButtonsHandler:function(d,e,j){var v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible"),b;if(v.length){if(d==="home"){b=q(v.get(0));}if(d==="end"){b=q(v.get(v.length-1));}}if(b){this._preventDefault(e);this._appFinderFocusAppBox(j,b);}},_homeEndButtonsHandler:function(s,e,j){if(j.hasClass("sapUshellAnchorItem")){this._preventDefault(e);this._setAnchorItemFocus(q(".sapUshellAnchorItem").filter(":visible:"+s));}else if(e.ctrlKey===true){this._preventDefault(e);var b=q(".sapUshellTile, .sapFCard").filter(":visible")[s]();this._moveScrollDashboard(b);}else{var d=j.closest(".sapUshellTileContainer");if(d){var g=d.control(0);if(g){this._preventDefault(e);this._goToTileOfGroup(s,g);}}}},_deleteButtonHandler:function(j){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var b=this._getFocusOnTile(j);if(b&&!b.hasClass("sapUshellLockedTile")&&!b.hasClass("sapUshellPlusTile")){var i=this._getGroupAndTilesInfo();if(i){var d=q(".sapUshellDashboardView").control(0),t=d.getController()._getTileUuid(i.oCurTile),e=this;setTimeout(function(){if(i.oCurTile.getDomRef()){e._moveScrollDashboard(i.oCurTile.$());}else{e._moveScrollDashboard(i.oGroup.oPlusTile.$());}},100);sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",{tileId:t},this);}}}},_ctrlPlusArrowKeyButtonsHandler:function(d){var j=q(document.activeElement),b=j.closest(".sapUshellTileContainerHeader");if(this._getFocusOnTile(j)){this._moveTile(d);}else if(b.length){var e=b.closest(".sapUshellTileContainerContent");if(!e.hasClass("sapUshellTileContainerDefault")||!e.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,b);}}},_spaceButtonHandler:function(e,j){var b=this._getFocusOnTile(j);if(!b||!b.length){j.click();return;}e.preventDefault();if(b.hasClass("sapFCard")){b.control(0).getCardHeader().firePress();return;}b.control(0).firePress();},_enterButtonHandler:function(e,j){if(j.hasClass("sapMInputBaseInner")){var b=j.closest(".sapUshellTileContainerHeader"),t=this;if(b.length===1){setTimeout(function(){b=q("#"+b[0].id);t._setTabIndexOnTileContainerHeader(b);b.focus();},10);}}this._spaceButtonHandler(e,j);},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(q(".sapUshellAnchorItemSelected"));return q(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(e,f){var r=sap.ushell.Container.getRenderer("fiori2"),h=c;if(r){var s=r.getCurrentCoreView();if(s==="home"&&!C.last("/core/spaces/enabled")){if(f){if(e.shiftKey){var d=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(d){d.focus();}else{h.goToLastVisitedTile();}}else if(!h.goToSelectedAnchorNavigationItem()){h.goToLastVisitedTile();}}else{h._dashboardKeydownHandler(e);}}if(s==="appFinder"){if(f){if(e.shiftKey){h.setFocusOnCatalogTile();}else{var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o&&o.getVisible()){o.focus();}else{h.appFinderFocusMenuButtons(e);}}}else{h._appFinderKeydownHandler(e);}}}},_groupHeaderNavigation:function(j){var b;if(j.hasClass("sapUshellTileContainerHeader")){b=j.find(".sapUshellContainerTitle");b.focus();}else if(j.closest(".sapUshellTileContainerHeader")){b=j.closest(".sapUshellTileContainerHeader");b.focus();}},_appFinderFocusAppBox:function(j,b){if(j&&b){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");b.attr("tabindex","0").focus();b.find(".sapUshellPinButton").attr("tabindex","0");}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();},_getNextCatalog:function(d,j){var b;if(d==="down"||d==="right"){b=j.next();}else if(d==="up"||d==="left"){b=j.prev();}else{L.error("Direction is unkown",d,"sap.ushell.components.ComponentKeysHandler");return null;}if(b.length>0){var n=b.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(n>0){return b;}return this._getNextCatalog(d,b);}},_getNextCatalogItem:function(d,j,p){var b=q(j.parents()[2]),e=b.find("li.sapUshellAppBox, li.sapUshellTile").get();if(d==="right"||d==="left"){var n=e.indexOf(j.get(0)),f=d==="right"?n+1:n-1;if(e[f]){return e[f];}}var g=this._getNextCatalog(d,b),N=g?g.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(N.length>0&&d==="right"){return N[0];}if(N.length>0&&d==="left"){return N[N.length-1];}if(d==="down"||d==="up"){if(N.length>0&&p){return N[0];}var J=(d==="down")?e.concat(N):N.concat(e);return this._findClosestTile(d,J,j.get(0));}},_appFinderKeysHandler:function(d,e,j,p){if(j.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(e);var b=q(this._getNextCatalogItem(d,j,p));if(b){this._appFinderFocusAppBox(j,b);}}},appFinderFocusMenuButtons:function(e){var b=q("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(b.length){b.eq(0).focus();this._preventDefault(e);return true;}return false;},_appFinderKeydownHandler:function(e){var j=q(document.activeElement);if(e.srcElement.id!=="appFinderSearch-I"){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL();if(i&&p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(i&&p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}switch(p){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",e,j,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",e,j,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",e,j);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;default:return;}}},_dashboardKeydownHandler:function(e){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL(),j=q(document.activeElement);if(i){if(p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}}switch(p){case this.keyCodes.F2:this._renameGroup(j);break;case this.keyCodes.F7:this._groupHeaderNavigation(j);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(j);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",e);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",e);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",e,j);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;case this.keyCodes.ENTER:this._enterButtonHandler(e,j);break;default:break;}return true;},init:function(m){this.oModel=m;}};var c=new a();return c;},true);
sap.ui.predefine('sap/ushell/components/HeaderManager',["sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/utils/clone","sap/ushell/components/StateHelper","sap/ushell/components/_HeaderManager/PropertyStrategiesFactory","sap/base/util/ObjectPath","sap/ui/Device"],function(C,E,u,c,S,g,O,D){"use strict";var h={application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:"",title:""};var H;var a;var o="endItemsOverflowBtn";var s;var B={"blank":{},"blank-home":{},"home":{"headItems":[]},"app":{"headItems":["backBtn","homeBtn"]},"minimal":{"headItems":["homeBtn"]},"standalone":{"headItems":["backBtn"]},"embedded":{"headItems":["backBtn","homeBtn"]},"embedded-home":{"headItems":[]},"headerless":{"headItems":["backBtn","homeBtn"],"headerVisible":false},"merged":{"headItems":["backBtn","homeBtn"]},"headerless-home":{"headerVisible":false},"merged-home":{},"lean":{"headItems":[]},"lean-home":{}};var d=[];
function i(I,J){var K=I&&I.appState?I.appState:"home";H=w(I);a=J;s=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;v();_();p(K);q();}
function b(){e();}
function _(){var I=E.on("setHeaderCentralAreaElement").do(function(P){m({propertyName:"centralAreaElement",value:P.id,aStates:S.getPassStates(P.states),bCurrentState:!!P.currentState,bDoNotPropagate:!!P.bDoNotPropagate});});d.push(I);d.push(E.on("updateHeaderOverflowState").do(f));D.media.attachHandler(f,this,D.media.RANGESETS.SAP_STANDARD);d.push(C.on("/core/shellHeader/headEndItems").do(j));}
function e(){if(d){d.forEach(function(I){I.off();});}D.media.detachHandler(f,this,D.media.RANGESETS.SAP_STANDARD);}
function f(P){if(P&&P.name){s=P.name;}v();j();}
function v(I){var J=C.last("/core/shell/model/currentState/stateName"),K=J==='merged'||J==='headerless',L=C.last("/core/shell/model/currentViewPortState")==="LeftCenter",M=true;if((I||s)==="Phone"&&!L||K){M=false;}m({propertyName:"showLogo",value:M,aStates:["home","app","blank","blank-home","minimal","lean"],bCurrentState:false,bDoNotPropagate:true});}
function j(P){var I=C.last("/core/shellHeader/headEndItems"),J=I.indexOf(o)>-1,K=P&&P.name||s,L;if(K==="Phone"&&!J&&I.length>2){k([o],false,["home","app"]);}else if(K!=="Phone"&&J){L=sap.ui.getCore().byId('headEndItemsOverflow');if(L){L.destroy();}r([o],false,["home","app"]);}}
function k(I,J,K,L){m({propertyName:"headEndItems",value:I,aStates:K,bCurrentState:!!J,bDoNotPropagate:!!L});}
function r(I,J,K){m({propertyName:"headEndItems",value:I,aStates:K,bCurrentState:!!J,action:"remove",bDoNotPropagate:false});}
function l(I,J){var K={};Object.keys(I).forEach(function(L){var M=I[L];K[L]=Object.keys(M).reduce(function(T,N){T[N]=M[N];return T;},c(J));});return K;}
function m(P){var I=P.propertyName,J=!P.bCurrentState?S.getAllStateToUpdate(P.aStates,P.bDoNotPropagate):[],K=C.last("/core/shellHeader"),L=C.last("/core/shell/model/currentState/stateName"),M=P.value,N;if(I.charAt(0)==="/"){I=I.substring(1);}N=g(I,P.action);if(!N){return;}if(!P.bCurrentState){H=x(H,I,N,J,M);}if(J.indexOf(L)>-1||P.bCurrentState){var Q=O.get(I.split("/"),K),R=N.execute(Q,M);if(Q!==R){O.set(I.split("/"),R,K);z(I,K);}}if(P.bCurrentState){y(I,N,M);}}
function n(I){var J;for(J in I){if(I.hasOwnProperty(J)){u.updateProperties(H[J],I[J]);}}}
function p(N){var I=H[N];if(!I){throw new Error("the state ("+N+") does not exist");}C.emit("/core/shellHeader",c(I));}
function q(I){var J=C.last("/core/shellHeader"),K,L;if(a&&a.customShellState){K=a.customShellState.currentState;}if(I&&a.extendedShellStates[I]){L=a.extendedShellStates[I].customState.currentState;}C.emit("/core/shellHeader",t(J,K,L));}
function t(I,J,K){var R={};Object.keys(I).forEach(function(P){var L=g(P),M;if(!L){R[P]=c(I[P]);return;}M=c(I[P]);if(K){M=L.execute(M,K[P]);}if(J){M=L.execute(M,J[P]);}R[P]=M;});R.ShellAppTitleState=C.last("/core/shellHeader/ShellAppTitleState");return R;}
function w(I){if(I){h.rootIntent="#"+I.rootIntent;}var J=l(B,h);function K(M,J){var N,P;for(N in J){if(N==="blank"||N==="blank-home"){continue;}if(M==="ActionModeBtn"&&N!=="home"){continue;}if((M==="openCatalogBtn"||M==="userSettingsBtn")&&(N==="lean"||N==="lean-home")){continue;}if(M==="ContactSupportBtn"||M==="EndUserFeedbackBtn"){if(["home","app","minimal","standalone","embedded","embedded-home","lean"].indexOf(N)===-1){continue;}}P=J[N].headEndItems.indexOf(M);if(P===-1){J[N].headEndItems.push(M);}}}function L(T,J){var M;for(M in J){J[M].title=T;}}if(I){if(I.moveEditHomePageActionToShellHeader){K("ActionModeBtn",J);}if(I.moveContactSupportActionToShellHeader){K("ContactSupportBtn",J);}if(I.moveGiveFeedbackActionToShellHeader){K("EndUserFeedbackBtn",J);}if(I.moveAppFinderActionToShellHeader){K("openCatalogBtn",J);}if(I.moveUserSettingsActionToShellHeader){K("userSettingsBtn",J);}if(I.title){L(I.title,J);}}if(C.last("/core/productSwitch/enabled")){K("productSwitchBtn",J);}return J;}
function x(I,P,J,K,L){if(K.length===0){return I;}var N=c(I);K.forEach(function(M){var Q=N[M],R;if(Q){R=J.execute(O.get(P.split("/"),Q),L);O.set(P.split("/"),R,Q);}});return N;}
function y(P,I,J){var K,N;if(!a){return;}K=a.customShellState.currentState;N=I.execute(O.get(P.split("/"),K),J);O.set(P.split("/"),N,K);}
function z(P,I){var R=P.split("/").shift();C.emit("/core/shellHeader/"+R,I[R]);}
function A(I){var J;try{J=H[I];}catch(K){J=undefined;}return J;}
function F(I,P){var J;try{J=A(I)[P];}catch(K){J=undefined;}return J;}
function G(T){H=T;}
return{init:i,destroy:b,switchState:p,updateStates:m,recalculateState:q,extendStates:n,validateShowLogo:v,handleEndItemsOverflow:j,_resetBaseStates:G,_generateBaseHeaderState:l,_createInitialState:w,_getBaseState:A,_getBaseStateMember:F};},false);
sap.ui.predefine('sap/ushell/components/HomepageManager',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/Device","sap/ui/model/Filter","sap/ushell/ui/launchpad/TileState","sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/components/_HomepageManager/DashboardLoadingManager","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/SelectDialog","sap/m/StandardListItem","sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter","sap/ushell/components/_HomepageManager/TransientPageOperationAdapter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/model/Context","sap/m/MessageToast","sap/base/Log","sap/ui/performance/Measurement"],function(Q,B,D,F,T,P,a,e,s,u,r,d,g,m,G,S,b,c,f,h,l,C,M,L,n){"use strict";var o=l.GenericTileScope;var p={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};var _=[];var t=false;
function v(R){_.push(R);if(!t){t=true;_.shift()();}}
function w(){if(_.length===0){t=false;}else{_.shift()();}}
function x(){_=[];t=false;}
var y=[];return B.extend("sap.ushell.components.HomepageManager",{metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","resetGroupsOnFailure","addGroupToModel","addTileToGroup","deleteTilesFromGroup"]},analyticsConstants:p,constructor:function(i,j){if(sap.ushell.components.getHomepageManager){var H=sap.ushell.components.getHomepageManager();if(!H.view){H.setDashboardView(j.view);}return H;}sap.ui.getCore().attachThemeChanged(u.handleTilesVisibility);sap.ushell.components.getHomepageManager=(function(q){return function(){return q;};}(this));this.oPageOperationAdapter=c.getInstance();this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oModel=j.model;this.oRouter=j.router;this.oDashboardView=j.view;this.oSortableDeferred=new Q.Deferred();this.oSortableDeferred.resolve();this.registerEvents();this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.tileUuid=null;this.bIsGroupsModelLoading=false;this.segmentsStore=[];this.bIsFirstSegment=true;this.bIsFirstSegmentViewLoaded=false;this.aGroupsFrame=null;this.iMinNumOfTilesForBlindLoading=this.oModel.getProperty("/optimizeTileLoadingThreshold")||100;this.bIsScrollModeAccordingKPI=false;this.oGroupNotLockedFilter=new F("isGroupLocked",h.EQ,false);this.bLinkPersonalizationSupported=this.oPageOperationAdapter.isLinkPersonalizationSupported();this.oDashboardLoadingManager=new a("loadingManager",{oDashboardManager:this});if(this.oRouter){var k=this.oRouter.getTarget("home");k.attachDisplay(function(q){this.oDashboardView=q.getParameter("view");}.bind(this));}var E=s.last("/core/home/enableTransientMode");y.push(s.on("/core/home/enableTransientMode").do(function(N){if(E===N){return;}E=N;this._changeMode(N);}.bind(this)));this.oModel.bindProperty("/tileActionModeActive").attachChange(this._changeLinksScope.bind(this));return undefined;},isBlindLoading:function(){var i=s.last("/core/home/homePageGroupDisplay");if((i===undefined||i==="scroll")&&this.bIsScrollModeAccordingKPI){L.info("isBlindLoading reason IsScrollModeAccordingKPI and IsScrollMode: true");return true;}if(this.oModel.getProperty("/tileActionModeActive")){L.info("isBlindLoading reason TileActionModeActive : true");return true;}return false;},createMoveActionDialog:function(i){var j=this.oGroupNotLockedFilter,k=new S(i,{title:r.i18n.getText("moveTileDialog_title"),rememberSelections:false,search:function(E){var V=E.getParameter("value"),q=new F("title",h.Contains,V),z=E.getSource().getBinding("items");z.filter([q,j]);},contentWidth:"400px",contentHeight:"auto",confirm:function(E){var q=E.getParameter("selectedContexts");this.publishMoveActionEvents(q,i);}.bind(this),cancel:function(){var q=Q(".sapUshellTile[tabindex=\"0\"]")[0];if(q){q.focus();}},items:{path:"/groups",filters:[j],template:new b({title:"{title}"})}});return k;},publishMoveActionEvents:function(i,j){var E=sap.ui.getCore().getEventBus();if(i.length){var k=this.tileType==="link"?"links":"tiles",q=i[0].getObject().groupId,z={sTileId:this.tileUuid,sToItems:k,sFromItems:k,sTileType:k,toGroupId:i[0].getObject().groupId,toIndex:i[0].getObject()[this.tileType==="link"?"links":"tiles"].length,source:j};if(D.system.desktop){z.callBack=sap.ushell.components.ComponentKeysHandler.callbackSetFocus.bind(sap.ushell.components.ComponentKeysHandler);}E.publish("launchpad","scrollToGroup",{groupId:q});E.publish("launchpad","movetile",z);}},_changeLinksScope:function(E){var i=this;if(this.bLinkPersonalizationSupported){var I=E.getSource().getValue();this.oModel.getProperty("/groups").forEach(function(j,k){if(!j.isGroupLocked){i._changeGroupLinksScope(j,I?"Actions":"Display");}});}},_changeGroupLinksScope:function(i,j){var k=this;i.links.forEach(function(q,z){k._changeLinkScope(q.content[0],j);});},_changeLinkScope:function(i,j){var k=i.getScope?i:i.getContent()[0];if(this.bLinkPersonalizationSupported&&k.setScope){k.setScope(j);}},registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.subscribe("launchpad","tabSelected",this.getSegmentTabContentViews,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);E.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);E.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.subscribe("launchpad","createGroupAt",this._createGroupAt,this);E.subscribe("launchpad","deleteGroup",this._deleteGroup,this);E.subscribe("launchpad","resetGroup",this._resetGroup,this);E.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.subscribe("launchpad","moveGroup",this._moveGroup,this);E.subscribe("launchpad","deleteTile",this._deleteTile,this);E.subscribe("launchpad","movetile",this._moveTile,this);E.subscribe("launchpad","sortableStart",this._sortableStart,this);E.subscribe("launchpad","sortableStop",this._sortableStop,this);E.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);E.subscribe("launchpad","convertTile",this._convertTile,this);this.oPageBuilderService.registerTileActionsProvider(this._addFLPActionsToTile.bind(this));},_changeMode:function(i){var j=this.getModel().getProperty("/groups");if(i){this.oPageOperationAdapter=f.getInstance();var k=this.oPageOperationAdapter.transformGroupModel(j);this.getModel().setProperty("/groups",k);}else{this.oPageOperationAdapter=c.getInstance();d.destroyFLPAggregationModels(j);this.getModel().setProperty("/groups",[]);this.loadPersonalizedGroups();}},_addFLPActionsToTile:function(i){var j=this.bLinkPersonalizationSupported&&this.oPageOperationAdapter.isLinkPersonalizationSupported(i),A=[];A.push(this._getMoveTileAction(i));if(j){A.push(this._getConvertTileAction(i));}return A;},_getConvertTileAction:function(i){var E=sap.ui.getCore().getEventBus(),j=this,k=j.oPageOperationAdapter.getTileType(i);return{text:k==="link"?r.i18n.getText("ConvertToTile"):r.i18n.getText("ConvertToLink"),press:function(q){var z={tile:q};if(D.system.desktop){z.callBack=sap.ushell.components.ComponentKeysHandler.callbackSetFocus.bind(sap.ushell.components.ComponentKeysHandler);}E.publish("launchpad","convertTile",z);}};},_getMoveTileAction:function(i){var j=this;return{text:r.i18n.getText("moveTileDialog_action"),press:function(){j.tileType=j.oPageOperationAdapter.getTileType(i);j.tileUuid=j.getModelTileById(j.oPageOperationAdapter.getTileId(i),j.tileType==="link"?"links":"tiles").uuid;var k=j.tileType==="tile"?j.moveTileDialog:j.moveLinkDialog;if(j.tileType==="tile"||j.tileType==="link"){if(!k){k=j.createMoveActionDialog("move"+j.tileType+"Dialog");k.setModel(j.oModel);if(j.tileType==="tile"){j.moveTileDialog=k;}else{j.moveLinkDialog=k;}}else{k.getBinding("items").filter([j.oGroupNotLockedFilter]);}k.open();}}};},_handleTileAppearanceAnimation:function(j){if(!j){return;}var k=["webkit",""];function q(z,A){for(var i=0;i<k.length;i++){A=A.toLowerCase();j.attachBrowserEvent(k[i]+A,function(E){if(E.originalEvent&&E.originalEvent.animationName==="sapUshellTileEntranceAnimation"){j.removeStyleClass("sapUshellTileEntrance");}},false);}}q(j,"AnimationEnd");j.addStyleClass("sapUshellTileEntrance");},destroy:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);E.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);E.unsubscribe("launchpad","resetGroup",this._resetGroup,this);E.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.unsubscribe("launchpad","moveGroup",this._moveGroup,this);E.unsubscribe("launchpad","deleteTile",this._deleteTile,this);E.unsubscribe("launchpad","movetile",this._moveTile,this);E.unsubscribe("launchpad","sortableStart",this._sortableStart,this);E.unsubscribe("launchpad","sortableStop",this._sortableStop,this);E.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);sap.ui.getCore().detachThemeChanged(u.handleTilesVisibility);y.forEach(function(i){i.off();});c.destroy();f.destroy();sap.ushell.components.getHomepageManager=undefined;B.prototype.destroy.apply(this,arguments);},_sortableStart:function(){this.oSortableDeferred=new Q.Deferred();},_createBookmark:function(i,E,j){var k=j.group?j.group.object:"";delete j.group;function q(){sap.ushell.Container.getServiceAsync("Bookmark").then(function(z){z.addBookmark(j,k).always(w).done(function(){m.showLocalizedMessage("tile_created_msg");}).fail(function(A){L.error("Failed to add bookmark",A,"sap.ushell.ui.footerbar.AddBookmarkButton");m.showLocalizedError("fail_to_add_tile_msg");});});}v(q);},_addBookmarkToModel:function(i,E,j){var k=j.tile,q,z=j.group,A,H,I,N,J;if(!j||!k){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate();}return;}if(!z){q=this.getModel().getProperty("/groups");for(J=0;J<q.length;J++){if(q[J].isDefaultGroup===true){z=q[J].object;break;}}}H=this._getIndexOfGroupByObject(z);I=this.oModel.getProperty("/groups/"+H);A=this.oPageOperationAdapter.getPreparedTileModel(k,I.isGroupLocked);this.getTileView(A);I.tiles.push(A);I.visibilityModes=u.calcVisibilityModes(I,true);N=I.tiles.length;this._updateModelWithTileView(H,N);this.oModel.setProperty("/groups/"+H,I);},_refreshGroupInModel:function(i,E,j){var k=this;this.oPageOperationAdapter.refreshGroup(j).then(function(q){if(!q){return;}var z=k._getIndexOfGroupByObject(q.object);q.visibilityModes=u.calcVisibilityModes(q.object,true);k.oModel.setProperty("/groups/"+z,q);if(q.tiles){q.tiles.forEach(function(A){k.getTileView(A);});}});},_sortableStop:function(){this.oSortableDeferred.resolve();},_handleAfterSortable:function(i){return function(){var j=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){i.apply(null,j);});}.bind(this);},_createGroupAt:function(j,E,k){var q=parseInt(k.location,10),z=this.oModel.getProperty("/groups"),A=this.oPageOperationAdapter.getPreparedGroupModel(null,false,q===z.length,k),H=this.oModel,i;A.index=q;z.splice(q,0,A);for(i=0;i<z.length-1;i++){z[i].isLastGroup=false;}for(i=q+1;i<z.length;i++){z[i].index++;}H.setProperty("/groups",z);},_getIndexOfGroupByObject:function(i){var j=this.oModel.getProperty("/groups");return this.oPageOperationAdapter.getIndexOfGroup(j,i);},getTileActions:function(i){return this.oPageOperationAdapter.getTileActions(i);},addTileToGroup:function(i,j){var k=i+"/tiles",q=this.oModel.getProperty(i),N=this.oModel.getProperty(k).length;var z=this.oModel.getProperty(i+"/isGroupLocked"),A=this.oModel.getProperty("/personalization");q.tiles[N]=this.oPageOperationAdapter.getPreparedTileModel(j,z);this.getTileView(q.tiles[N]);q.visibilityModes=u.calcVisibilityModes(q,A);this._updateModelWithTileView(q.index,N);this.oModel.setProperty(i,q);},addTilesToGroupByCatalogTileId:function(j,k){var q=j.getBindingContext();for(var i=0;i<k.length;i++){this.addTileToGroupByCatalogTileId(q.sPath,k[i]);}},addTileToGroupByCatalogTileId:function(i,j){var N,k,q;if(!s.last("/core/home/enableTransientMode")){return;}q=this.oPageOperationAdapter.getTileModelByCatalogTileId(j);if(!q){return;}this.oDashboardLoadingManager.setTileResolved(q);N=this.oModel.getProperty(i+"/tiles").length;k=this.oModel.getProperty(i);k.tiles[N]=q;this.oModel.setProperty(i,k);},_getPathOfTile:function(i){var j=this.oModel.getProperty("/groups"),k=null,q=null,z,E=function(A,H){if(H.uuid===i){q=A;return false;}return undefined;};Q.each(j,function(A,H){Q.each(H.tiles,E);if(q!==null){k=A;z="tiles";return false;}Q.each(H.links,E);if(q!==null){k=A;z="links";return false;}return undefined;});return k!==null?"/groups/"+k+"/"+z+"/"+q:null;},_moveInArray:function(A,i,j){if(j>=A.length){var k=j-A.length;while((k--)+1){A.push(undefined);}}A.splice(j,0,A.splice(i,1)[0]);},_updateGroupIndices:function(A){var k;for(k=0;k<A.length;k++){A[k].index=k;}},_deleteGroup:function(i,E,j){var k=this,q=this.oModel,z=j.groupId,A=q.getProperty("/groups"),H=g.getIndexOfGroup(A,z),I=A.length-1===H,J=null,K,N;K=I?H-1:H;d.destroyFLPAggregationModel(q.getProperty("/groups/"+H));J=A.splice(H,1)[0];if(I){q.setProperty("/groups/"+K+"/isLastGroup",I);}q.setProperty("/groups",A);this._updateGroupIndices(A);if(K>=0){N=sap.ui.getCore().getEventBus();window.setTimeout(Q.proxy(N.publish,N,"launchpad","scrollToGroup",{groupId:q.getProperty("/groups")[K].groupId}),200);}function O(){k.oPageOperationAdapter.deleteGroup(J).then(function(){m.showLocalizedMessage("group_deleted_msg",[J.title]);w();},function(){k._resetGroupsOnFailure("fail_to_delete_group_msg");});}v(O);},_resetGroup:function(i,E,j){var k=this,q=j.groupId,z=this.oModel,A=z.getProperty("/groups"),H=g.getIndexOfGroup(A,q),I=k.oModel.getProperty("/groups/indexOfDefaultGroup")===H,J=z.getProperty("/groups/"+H),K,N;z.setProperty("/groups/"+H+"/sortable",false);function O(){k.oPageOperationAdapter.resetGroup(J,I).then(function(R){k._handleAfterSortable(function(q,U,V){var A=k.oModel.getProperty("/groups"),H=g.getIndexOfGroup(A,q);k._loadGroup(H,V||U);m.showLocalizedMessage("group_reset_msg",[U.title]);k.oModel.setProperty("/groups/"+H+"/sortable",true);K=sap.ui.getCore().byId("dashboardGroups").getGroupControlByGroupId(q);N=K.getBindingContext().getObject().links;if(N&&N.length&&!K.getIsGroupLocked()){k._changeGroupLinksScope(K.getBindingContext().getObject(),k.oModel.getProperty("/tileActionModeActive")?o.Actions:o.Display);}if(K){K.rerender();e.emit("updateGroups",Date.now());u.handleTilesVisibility();}})(q,J,R);w();},function(){k._resetGroupsOnFailure("fail_to_reset_group_msg");});}v(O);},_moveGroup:function(j,E,k){var q=k.fromIndex,z=k.toIndex,A=this.oModel,H=A.getProperty("/groups"),I=A.getProperty("/tileActionModeActive"),J,K,N=this,i,O;if(!I){q=this._adjustFromGroupIndex(q,H);}J=H[q];K=J.groupId;if(!I){z=this._adjustToGroupIndex(z,H,K);}O=H[z];this._moveInArray(H,q,z);this._updateGroupIndices(H);for(i=0;i<H.length-1;i++){H[i].isLastGroup=false;}H[H.length-1].isLastGroup=true;A.setProperty("/groups",H);function R(){H=A.getProperty("/groups");var J=A.getProperty(g.getModelPathOfGroup(H,K));if(!J.object){return;}N.oPageOperationAdapter.getOriginalGroupIndex(O,H).then(function(U){var V={iFromIndex:q,iToIndex:z};return N.oPageOperationAdapter.moveGroup(J,U,V);}).then(w,function(){N._resetGroupsOnFailure("fail_to_move_group_msg");});}v(R);},_adjustToGroupIndex:function(j,k,q){var z=0,I=false,i=0;for(i=0;i<k.length&&z<j;i++){if(k[i].isGroupVisible){if(k[i].groupId===q){I=true;}else{z++;}}}if(I){return i-1;}return i;},_adjustFromGroupIndex:function(j,k){var q=0,i;for(i=0;i<k.length;i++){if(k[i].isGroupVisible){q++;}if(q===j+1){return i;}}return j;},_changeGroupTitle:function(i,E,j){var k=this,N=j.newTitle,q=this.oModel.getProperty("/groups"),z=j.groupId,A=g.getIndexOfGroup(q,z),H=k.oModel.getProperty("/groups/indexOfDefaultGroup")===A,I=this.oModel.getProperty("/groups/"+A),O=I.title;this.oModel.setProperty("/groups/"+A+"/title",N);function J(){var R;if(I.isLastGroup){R=k.oPageOperationAdapter.addGroupAt(I,undefined,H);}else{var U=k.oModel.getProperty("/groups")[A+1];R=k.oPageOperationAdapter.getOriginalGroupIndex(U,q).then(function(V){return k.oPageOperationAdapter.addGroupAt(I,V,H);});}R.then(function(V){k._handleAfterSortable(function(W,X){var Y=k.oModel.getProperty("/groups"),Z=g.getIndexOfGroup(Y,W);k._loadGroup(Z,X);})(z,V);w();},function(){k._resetGroupsOnFailure("fail_to_create_group_msg");});}function K(){this.oPageOperationAdapter.renameGroup(I,N,O).then(function(){w();},function(){k._resetGroupsOnFailure("fail_to_rename_group_msg");});}if(!I.object){w.call(this);v(J.bind(this));}else{v(K.bind(this));}},addGroupToModel:function(i){var j=this.oPageOperationAdapter.getPreparedGroupModel(i,false,true,{isRendered:true}),k=this.oModel.getProperty("/groups"),q=k.length,z;if(q>0){k[q-1].isLastGroup=false;}j.index=q;k.push(j);this.oModel.setProperty("/groups/",k);z=new C(this.oModel,"/groups/"+q);return z;},_deleteTile:function(i,E,j){var k=this,q=j.tileId,z=this.oModel.getProperty("/groups"),I=j.items||"tiles";Q.each(z,function(A,H){var J=false;Q.each(H[I],function(K,N){if(N.uuid!==q){return true;}d.destroyTileModel(k.oModel.getProperty("/groups/"+A+"/"+I+"/"+K));var O=H[I].splice(K,1)[0],R=k.oModel.getProperty("/personalization");H.visibilityModes=u.calcVisibilityModes(H,R);k.oModel.setProperty("/groups/"+A,H);function U(){k.oPageOperationAdapter.removeTile(H,O).then(function(){w();},function(){k._resetGroupsOnFailure("fail_to_remove_tile_msg");});}v(U);u.handleTilesVisibility();J=true;return false;});return!J;});},deleteTilesFromGroup:function(i,R){var j=this.oModel.getProperty("/groups"),k=g.getIndexOfGroup(j,i),q=this.oModel.getProperty("/groups/"+k),z=[];["tiles","links"].forEach(function(A){z=q[A].filter(function(E){if(R.indexOf(E.uuid)<0){return true;}return false;});q[A]=z;});q.visibilityModes=u.calcVisibilityModes(q,true);this.oModel.setProperty("/groups/"+k,q);},_getGroupIndex:function(i){var j=this.oModel.getProperty("/groups"),k=this._getNewGroupInfo(j,i);if(k){return k.newGroupIndex;}return undefined;},_convertTile:function(i,E,j){var k=j.tile?j.tile:j,q=j.srcGroupId?this._getGroupIndex(j.srcGroupId):undefined,z=j.srcGroupId?this.oModel.getProperty("/groups/"+q):k.getParent().getBindingContext().getObject(),A=k.getBindingContext().sPath.split("/"),H=k.getBindingContext().getObject(),O=A[A.length-2],I=H.uuid,J=parseInt(A[A.length-1],10),K=j.toIndex!==undefined?j.toIndex:undefined,N=this.oModel.getProperty("/tileActionModeActive"),R=j.toGroupId?this._getGroupIndex(j.toGroupId):z.index,U=j.toGroupId?this.oModel.getProperty("/groups/"+R):z,V=this;var W=this._getIndexForConvert(O,J,K,z,U),X={"tileIndex":J,"groupIndex":q,"group":z};function Y(){H.tileIsBeingMoved=true;var Z=this.oPageOperationAdapter.moveTile(H,W,z,U,O==="links"?"tile":"link");Z.then(function($){V._showMoveTileMessage(H,z,U);V._handleAfterSortable(function(I,$){var a1=V._getPathOfTile(I),b1=$.content;if(a1){if(O==="tiles"){V._attachLinkPressHandlers(b1);V._addDraggableAttribute(b1);V._changeLinkScope(b1,N?"Actions":"Display");}var c1={"tileIndex":K,"groupIndex":R,"group":U},d1={"tile":H,"view":b1,"type":O,"tileObj":$.object};H.tileIsBeingMoved=true;V.replaceTileViewAfterConvert(X,c1,d1);e.emit("updateGroups",Date.now());u.handleTilesVisibility();if(j.callBack){j.callBack(b1);}}})(I,$);w();},function(){V._handleAfterSortable(V._resetGroupsOnFailure.bind(V))("fail_to_move_tile_msg");});}v(Y.bind(this));},replaceTileViewAfterConvert:function(i,j,k){var q=k.tile,z=q.content;q.tileIsBeingMoved=false;q.content=[k.view];q.object=k.tileObj;q.originalTileId=this.oPageOperationAdapter.getTileId(k.tileObj);i.group[k.type].splice(i.tileIndex,1);if(j.tileIndex!==undefined){j.group[k.type==="tiles"?"links":"tiles"].splice(j.tileIndex,0,q);}else{j.group[k.type==="tiles"?"links":"tiles"].push(q);}this.oModel.setProperty("/groups/"+j.groupIndex,j.group);this.oModel.setProperty("/groups/"+i.groupIndex,i.group);if(k.type==="links"){this._handleTileAppearanceAnimation(q.content[0].getParent());}else{this._handleTileAppearanceAnimation(q.content[0]);}if(z&&z[0]){z[0].destroy();}},_getIndexForConvert:function(i,j,k,q,z){var A;if(i==="tiles"){if(k!==undefined){A=z[i].length+k;}else{A=z[i].length+z.links.length;}if(q.groupId===z.groupId){A--;}}else{A=k||q.tiles.length;j+=q.tiles.length;}return{"tileIndex":j,"newTileIndex":A};},_getIndexForMove:function(i,j,k,q,z){var A;if(i==="tiles"){A=k!==undefined?k:q[i].length;}else{if(k!==undefined){A=q.tiles.length+k;}else{A=q.tiles.length+q.links.length;}j+=z.tiles.length;}return{"tileIndex":j,"newTileIndex":A};},_getTileInfo:function(i,j,I){var k;Q.each(i,function(q,z){var A=false;Q.each(z[I],function(E,H){if(H.uuid===j){k={"oTile":H,"tileIndex":E,"oGroup":z,"groupIndex":q};A=true;return false;}return undefined;});return!A;});return k;},_getNewGroupInfo:function(i,N){var j;Q.each(i,function(k,q){if(q.groupId===N){j={"oNewGroup":q,"newGroupIndex":k};}});return j;},_moveTile:function(i,E,j){var k=j.toIndex,N=j.toGroupId,q=j.sTileId,z=j.source,A=j.sTileType==="tiles"||j.sTileType==="tile"?"tile":"link",H=j.sToItems,I=j.sFromItems,J=this.oModel.getProperty("/tileActionModeActive"),K=this.oModel.getProperty("/groups"),O,R,U,V,W,X={},Y=this;V=this._getTileInfo(K,q,I);W=this._getNewGroupInfo(K,N);if(V.oGroup.groupId===W.oNewGroup.groupId&&(z==="movetileDialog"||k===null||z==="movelinkDialog")){if(j.callBack&&V.oTile&&V.oTile.content&&V.oTile.content.length){j.callBack(V.oTile.content[0]);}return;}if(A==="link"){V.oTile.content[0].addStyleClass("sapUshellZeroOpacity");}if(A==="tile"&&H==="tiles"){if(k&&k>W.oNewGroup[H].length){k=W.oNewGroup[H].length;}}if(V.oGroup.groupId===N&&H===I){if(k===null||k===undefined){V.oGroup[H].splice(V.tileIndex,1);k=V.oGroup[H].length;V.oGroup[H].push(V.oTile);}else{k=this._adjustTileIndex(k,V.oTile,V.oGroup,H);this._moveInArray(V.oGroup[H],V.tileIndex,k);}this.oModel.setProperty("/groups/"+V.groupIndex+"/"+H,V.oGroup[H]);}else{U=this.oModel.getProperty("/personalization");V.oGroup[I].splice(V.tileIndex,1);V.oGroup.visibilityModes=u.calcVisibilityModes(V.oGroup,U);this.oModel.setProperty("/groups/"+V.groupIndex+"/"+I,V.oGroup[I]);if(k===null||k===undefined){k=W.oNewGroup[H].length;W.oNewGroup[H].push(V.oTile);}else{k=this._adjustTileIndex(k,V.oTile,W.oNewGroup,H);W.oNewGroup[H].splice(k,0,V.oTile);}W.oNewGroup.visibilityModes=u.calcVisibilityModes(W.oNewGroup,U);this.oModel.setProperty("/groups/"+W.newGroupIndex+"/"+H,W.oNewGroup[H]);}e.emit("updateGroups",Date.now());u.handleTilesVisibility();O=this.oModel.getProperty("/groups/"+V.groupIndex);R=this.oModel.getProperty("/groups/"+W.newGroupIndex);X=this._getIndexForMove(I,V.tileIndex,k,W.oNewGroup,O);function Z(){V.oTile.tileIsBeingMoved=true;this.oPageOperationAdapter.moveTile(V.oTile,X,O,R,A).then(function($){var a1=Y._getPathOfTile(q);Y._showMoveTileMessage(V.oTile,O,R);if(a1){Y.oModel.setProperty(a1+"/object",$.object);Y.oModel.setProperty(a1+"/originalTileId",$.originalTileId);var b1=Y.oModel.getProperty(a1+"/content"),c1=$.content;if(H==="links"){Y._changeLinkScope(c1,J?"Actions":"Display");Y._attachLinkPressHandlers(c1);Y._addDraggableAttribute(c1);Y._handleTileAppearanceAnimation(c1);V.oTile.content=[c1];Y.oModel.setProperty(a1,Q.extend({},V.oTile));Y.oModel.setProperty("/groups/"+W.newGroupIndex+"/"+H,Y.oModel.getProperty("/groups/"+W.newGroupIndex+"/"+H));}else{Y.oModel.setProperty(a1+"/content",[c1]);}if(b1&&b1[0]){var d1=c1.onAfterRendering;c1.onAfterRendering=function(){d1.apply(this);b1[0].destroy();c1.onAfterRendering=d1;};}Y.oModel.setProperty(a1+"/tileIsBeingMoved",false);if(j.callBack){j.callBack(c1);}}w();},function(){Y._resetGroupsOnFailure("fail_to_move_tile_msg");});}v(Z.bind(this));},_showMoveTileMessage:function(i,j,k){var q=this.oPageOperationAdapter.getTileTitle(i),z=k.title,A=r.i18n.getText("added_tile_to_group"),E=q+" "+A+" "+z;if(j.groupId!==k.groupId){M.show(E);}},_adjustTileIndex:function(j,k,q,I){var z=0,A=false,i=0;for(i=0;i<q[I].length&&z<j;i++){if(q[I][i].isTileIntentSupported){if(q[I][i]===k){A=true;}else{z++;}}}if(A){return i-1;}return i;},getModel:function(){return this.oModel;},getDashboardView:function(){return this.oDashboardView;},setDashboardView:function(i){this.oDashboardView=i;return this;},setTileVisible:function(i,V){this.oPageOperationAdapter.setTileVisible(i.object,V);},refreshTile:function(i){this.oPageOperationAdapter.refreshTile(i.object);},updateSettings:function(i){this.oModel=i.model||this.oModel;this.oConfig=i.config||this.oConfig;this.oRouter=i.router||this.oRouter;this.oDashboardView=i.view||this.oDashboardView;},_resetGroupsOnFailure:function(i,j){x();m.showLocalizedError(i,j);this.bStartLoadRemainSegment=false;this.loadPersonalizedGroups();this.oModel.updateBindings(true);},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments);},_bindSegment:function(i,j){var k,q,z,A;for(k=0;k<j.length;k++){z=j[k];A=z.index;q=i[A];if(q){q.isRendered=true;q.tiles=q.tiles.concat(z.tiles);q.links=q.links.concat(z.links);}}return i;},createGroupsModelFrame:function(i,j){var k,q=[],O,z;z=function(A){var E=Q.extend({},A);E.tiles=[];E.pendingLinks=[];E.links=[];return E;};for(k=0;k<i.length;k++){O=i[k];q[k]=z(O);q[k].isRendered=false;q[k].visibilityModes=u.calcVisibilityModes(O,j);}return q;},_splitGroups:function(i,j){var k,q=[],z=0,I=this.oModel.getProperty("/homePageGroupDisplay")==="tabs",A=0,E;var H=500;for(k=0;k<i.length;k++){E=i[k];q.push(E);if(!this.segmentsStore.length){z+=this.PagingManager.getGroupHeight(E,j===k);}else{A+=E.tiles.length+E.links.length;}if(I&&!this.segmentsStore.length&&z>0){q.loadTilesView=true;this.segmentsStore.push(q);q=[];z=0;}if(z>=1||A>=H){this.segmentsStore.push(q);q=[];z=0;A=0;}}if(q.length){this.segmentsStore.push(q);}},_processSegment:function(i){var j=this.segmentsStore.shift();if(!j){return i;}if(this.isBlindLoading()===false){if(this.oModel.getProperty("/homePageGroupDisplay")!=="tabs"||j.loadTilesView){this.getSegmentContentViews(j);}}i=this._bindSegment(i,j);return i;},getSegmentContentViews:function(i){var j,k,q,z;for(j=0;j<i.length;j++){q=i[j];for(k=0;k<q.tiles.length;k++){z=q.tiles[k];if(z.isTileIntentSupported){this.getTileView(z);}}for(k=0;k<q.links.length;k++){z=q.links[k];if(z.isTileIntentSupported){this.getTileView(z,q.index);}}}this.bIsFirstSegmentViewLoaded=true;},getSegmentTabContentViews:function(i,E,j){var k,q,z=j.iSelectedGroup,A;A=this.oModel.getProperty("/groups/"+z);for(k=0;k<A.tiles.length;k++){q=A.tiles[k];if(q.isTileIntentSupported){this.getTileView(q);}}for(k=0;k<A.links.length;k++){q=A.links[k];if(q.isTileIntentSupported){this.getTileView(q,z);}}},_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups();},_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate();}},handleFirstSegmentLoaded:function(){var i=this.oModel.getProperty("/groups");if(this.aGroupsFrame){Array.prototype.push.apply(i,this.aGroupsFrame);this.aGroupsFrame=null;}this._initializeAnchorNavigationBar();if(!this.bStartLoadRemainSegment){this._processRemainingSegments();}},_initializeAnchorNavigationBar:function(){var A,i=sap.ushell.components.getHomepageManager().getDashboardView();A=i.getAnchorItemTemplate();this.oDashboardView.oAnchorNavigationBar.bindAggregation("groups",{path:"/groups",template:A});},_processRemainingSegments:function(){var U;if(this.segmentsStore.length>0){window.setTimeout(function(){U=this._processSegment(this.oModel.getProperty("/groups"));this.oModel.setProperty("/groups",U);this.bIsFirstSegment=false;this._processRemainingSegments();}.bind(this),0);}else{this.bIsGroupsModelLoading=false;this._updateModelWithTileView(0,0);u.handleTilesVisibility();sap.ui.getCore().getEventBus().publish("launchpad","dashboardModelContentLoaded");e.emit("updateGroups",Date.now());}},_setGroupModel:function(j){if(this.bIsGroupsModelLoading){L.info("Skip set the group model, because the group model is still loading");return;}var i=0,k,q=0,z=0,A=0,E,H,I=null,J,K,N=[];this.bIsGroupsModelLoading=true;try{q=this.oModel.getProperty("/groups").length;}catch(O){}for(i=j.length;i<q;++i){d.destroyFLPAggregationModel(this.oModel.getProperty("/groups/"+i));}if(!this.PagingManager){var R=Q("#dashboardGroups").width();if(!R){R=window.innerWidth;}var U=Q("#sapUshellDashboardPage-cont").height();if(U<100){U=window.innerHeight;}this.PagingManager=new P("dashboardPaging",{supportedElements:{tile:{className:"sapUshellTile"},link:{className:"sapUshellLinkTile"}},containerHeight:U,containerWidth:R});}j.forEach(function(V){if(V.isGroupVisible){z+=V.tiles.length;}});this.bIsScrollModeAccordingKPI=z>this.iMinNumOfTilesForBlindLoading;this.aGroupsFrame=this.createGroupsModelFrame(j,this.oModel.getProperty("/personalization"));for(i=0;i<this.aGroupsFrame.length;i++){if(this.aGroupsFrame[i].isGroupVisible&&this.aGroupsFrame[i].visibilityModes[0]){if(I===null){I=i;this.aGroupsFrame[i].isGroupSelected=true;this.oModel.setProperty("/iSelectedGroup",i);}A++;if(A>1){this.aGroupsFrame[I].showGroupHeader=false;break;}}}this._splitGroups(j,I);H=this.segmentsStore[0]?this.segmentsStore[0].length:0;E=this.aGroupsFrame.splice(0,H);n.start("FLP:DashboardManager._processSegment","_processSegment","FLP");N=this._processSegment(E);j.every(function(V,W){if(V.isDefaultGroup){k=W;return false;}return true;});N.indexOfDefaultGroup=k;if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){J=this.getDashboardView();if(J){K=J.oDashboardGroupsBox;K.getBinding("groups").filter([J.oFilterSelectedGroup]);}}n.end("FLP:DashboardManager._processSegment");this.oModel.setProperty("/groups",N);this.aGroupModel=N;if(this.oDashboardView){e.once("firstSegmentCompleteLoaded").do(function(){u.setPerformanceMark("FLP-TTI-Homepage",{bUseUniqueMark:true});}).do(this.handleFirstSegmentLoaded.bind(this));}else{setTimeout(function(){Array.prototype.push.apply(this.aGroupModel,this.aGroupsFrame);this.aGroupsFrame=null;this.bStartLoadRemainSegment=true;this._processRemainingSegments();}.bind(this),0);}if(this.bIsFirstSegmentViewLoaded){e.emit("firstSegmentCompleteLoaded",true);}n.end("FLP:DashboardManager.loadGroupsFromArray");Q.sap.flpmeasure.end(0,"Process & render the first segment/tiles");},getPreparedGroupModel:function(){return this.aGroupModel;},_loadGroup:function(i,N){var j=this,k="/groups/"+i,O=j.oModel.getProperty(k),I=O.isLastGroup,q=O.groupId;d.destroyFLPAggregationModel(O);if(q){N.groupId=q;}N.isLastGroup=I;N.index=i;N.isRendered=true;this.oModel.setProperty(k,N);},_hasPendingLinks:function(j){for(var i=0;i<j.length;i++){if(j[i].content[0]===undefined){return true;}}return false;},_addModelToTileViewUpdateQueue:function(i,j){this.tileViewUpdateQueue.push({uuid:i,view:j});},_updateModelWithTileView:function(i,j){var k=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=window.setTimeout(function(){k.tileViewUpdateTimeoutID=undefined;k.oSortableDeferred.done(function(){k._updateModelWithTilesViews(i,j);});},50);},_updateGroupModelWithTilesViews:function(i,k,z,A){var E,U,H,I,J=k||0;for(var j=J;j<i.length;j=j+1){E=i[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){U=this.tileViewUpdateQueue[q];if(E.uuid===U.uuid){z.push(q);if(U.view){if(A){E.content=[U.view];}else{E.content[0].destroy();E.content=[U.view];}this.oDashboardLoadingManager.setTileResolved(E);H=this.oPageOperationAdapter.getTileSize(E.object);I=((H!==null)&&(H==="1x2"))||false;if(E.long!==I){E.long=I;}}else{E.content[0].setState("Failed");}break;}}}},_updateModelWithTilesViews:function(j,k){var q=this.oModel.getProperty("/groups"),z=j||0,A=[];if(!q||this.tileViewUpdateQueue.length===0){return;}for(var i=z;i<q.length;i=i+1){this._updateGroupModelWithTilesViews(q[i].tiles,k,A);if(q[i].links){this._updateGroupModelWithTilesViews(q[i].links,k,A,true);if(q[i].pendingLinks.length>0){if(!q[i].links){q[i].links=[];}q[i].links=q[i].links.concat(q[i].pendingLinks);q[i].pendingLinks=[];}}}var E=[],H;for(H=0;H<this.tileViewUpdateQueue.length;H++){if(A.indexOf(H)===-1){E.push(this.tileViewUpdateQueue[H]);}}this.tileViewUpdateQueue=E;this.oModel.setProperty("/groups",q);},getModelTileById:function(i,I){var j=this.oModel.getProperty("/groups"),k,q=false;j.every(function(z){z[I].every(function(A){if(A.uuid===i||A.originalTileId===i){k=A;q=true;}return!q;});return!q;});return k;},_addDraggableAttribute:function(V){if(this.isIeHtml5DnD()){V.addEventDelegate({onAfterRendering:function(){this.$().attr("draggable","true");}.bind(V)});}},_attachLinkPressHandlers:function(V){var E=sap.ui.getCore().getEventBus(),i=V.attachPress?V:V.getContent()[0];i.attachPress(function(j){var k=V.getBindingContext().getObject().tileIsBeingMoved;if(!k&&this.getScope&&this.getScope()==="Actions"){switch(j.getParameters().action){case"Press":var q=V.getState?V.getState():"";if(q!=="Failed"){sap.ushell.components.homepage.ActionMode._openActionsMenu(j,V);}break;case"Remove":var z=V.getBindingContext().getObject().uuid;E.publish("launchpad","deleteTile",{tileId:z,items:"links"});break;default:break;}}else{E.publish("launchpad","dashboardTileLinkClick");}});},handleDisplayModeChange:function(N){this.oModel.setProperty("/homePageGroupDisplay",N);switch(N){case"scroll":this._handleDisplayModeChangeToScroll();break;case"tabs":this._handleDisplayModeChangeToTabs();break;}},_handleDisplayModeChangeToTabs:function(){var j=this.oModel.getProperty("/iSelectedGroup"),k=this.oModel.getProperty("/groups");if(k.length>0){for(var i=0;i<k.length;i++){this.oModel.setProperty("/groups/"+i+"/isGroupSelected",false);}this.oModel.setProperty("/groups/"+j+"/isGroupSelected",true);}},_handleDisplayModeChangeToScroll:function(){if(this.isBlindLoading()){return;}var k=this.oModel.getProperty("/groups"),q,z,A,E=[],i,j;for(i=0;i<k.length;i++){q=k[i];z=q.tiles||[];for(j=0;j<z.length;j++){A=z[j];if(A.content.length===0){this.getTileView(A,i);}}E=q.links||[];for(j=0;j<E.length;j++){this.getTileView(E[j],i);}}this.oModel.refresh(false);var H=this.oModel.getProperty("/iSelectedGroup");if(H){setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","scrollToGroup",{groupId:k[H].groupId});},100);}},getTileViewsFromArray:function(R){var i=this;if(R.length===0){return;}R.forEach(function(j){i.getTileView(j.oTile,j.iGroup);});this.oModel.refresh(false);if(this.bIsFirstSegmentViewLoaded===false){this.bIsFirstSegmentViewLoaded=true;e.emit("firstSegmentCompleteLoaded",true);}},getTileView:function(i,j){var k=this.oPageOperationAdapter.getTileType(i.object);if(this.oDashboardLoadingManager.isTileViewRequestIssued(i)){return;}this.oDashboardLoadingManager.setTileInProgress(i);this.oPageOperationAdapter.setTileVisible(i.object,false);if(k==="card"){this._loadCardData(i);}else{this._loadTileData(i,j,k);}},_loadCardData:function(i){var j=sap.ui.getCore().byId(i.controlId),k=Q.sap.flpmeasure.startFunc(0,"Loading of data and rendering for all cards",5,"loadCardData",i.object);if(j&&j.setManifest&&this.isBlindLoading()){j.setManifest(i.manifest);}i.content=[i.manifest];this.oDashboardLoadingManager.setTileResolved(i);Q.sap.flpmeasure.endFunc(0,"Loading of data and rendering for all cards",k);},getCurrentHiddenGroupIds:function(i){return this.oPageOperationAdapter.getCurrentHiddenGroupIds(i);},_loadTileData:function(i,j,k){var q=this,z=this.oPageOperationAdapter.getTileView(i),A,E,H,U=this._addModelToTileViewUpdateQueue,I,N=false,J=i.uuid,K=false,O=Q.sap.flpmeasure.startFunc(0,"Service + model binding and rendering for all tile-Views",5,"getTileView",i.object);if(z.state()==="resolved"){K=true;}z.done(function(V){if(V.oController&&V.oController.navigationTargetUrl&&!i.isCustomTile){i.target=V.oController.navigationTargetUrl;}I=V;if(I.getComponentInstance){n.average("FLP:getComponentInstance","get info for navMode","FLP1");var R=I.getComponentInstance().getComponentData();if(R&&R.properties){i.navigationMode=R.properties.navigationMode;}n.end("FLP:getComponentInstance");}q.oDashboardLoadingManager.setTileResolved(i);A=V.getMode?V.getMode():"ContentMode";if(q.bLinkPersonalizationSupported&&A==="LineMode"){q._attachLinkPressHandlers(I);q._addDraggableAttribute(I);if(j>=0){E=q.oModel.getProperty("/groups");if(E[j]){i.content=[I];H=q.oModel.getProperty("/groups/"+j+"/links");q.oModel.setProperty("/groups/"+j+"/links",[]);q.oModel.setProperty("/groups/"+j+"/links",H);}}}else if(q.isBlindLoading()){if(i.content&&i.content.length>0){i.content[0].destroy();}i.content=[I];if(j>=0&&!K){q.oModel.refresh(false);}}if(q.isBlindLoading()){var W=q.oPageOperationAdapter.getTileSize(i.object);var X=W==="1x2";if(i.long!==X){i.long=X;}}else if(A==="LineMode"){i.content=[I];if(N){H=q.oModel.getProperty("/groups/"+j+"/links");q.oModel.setProperty("/groups/"+j+"/links",[]);q.oModel.setProperty("/groups/"+j+"/links",H);}}else if(i.content.length===0){i.content=[I];}else{U.apply(q,[J,I]);q._updateModelWithTileView(0,0);}Q.sap.flpmeasure.endFunc(0,"Service + model binding and rendering for all tile-Views",O);});z.fail(function(){if(q.oPageOperationAdapter.getTileType(i.object)==="link"&&q.bLinkPersonalizationSupported){I=q.oPageOperationAdapter.getFailedLinkView(i);q._attachLinkPressHandlers(I);}else{I=new T({state:"Failed"});}i.content=[I];});if(!I){if(q.oPageOperationAdapter.getTileType(i.object)==="link"){N=true;I=new G({mode:"LineMode"});}else{I=new T();}i.content=[I];}},isIeHtml5DnD:function(){return(D.browser.msie||D.browser.edge)&&(D.system.combi||D.system.tablet);},loadPersonalizedGroups:function(){var i=this;var j=new Q.Deferred();this.oPageOperationAdapter.getPage().then(function(k){i._setGroupModel(k);j.resolve();},function(){m.showLocalizedError("fail_to_load_groups_msg");});Q.sap.flpmeasure.start(0,"Service: Get Data for Dashboard",4);n.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return j.promise();}});});
sap.ui.predefine('sap/ushell/components/MessagingHelper',["sap/ushell/services/Message","sap/ushell/resources"],function(M,r){"use strict";return{getLocalizedText:g,showLocalizedError:a,showLocalizedErrorHelper:b,showLocalizedMessage:s};
function g(m,p){return r.i18n.getText(m,p);}
function s(m,p,t){if(sap.ushell.Container){sap.ushell.Container.getService("Message").show(t||M.Type.INFO,g(m,p),p);}}
function a(m,p){s(m,p,M.Type.ERROR);}
function b(m,p){return function(){a(m,p);};}
});
sap.ui.predefine('sap/ushell/components/SharedComponentUtils',["sap/ui/Device","sap/ushell/Config","sap/ushell/UserActivityLog","sap/ushell/bootstrap/common/common.load.model","sap/base/Log","sap/ui/core/Component","sap/ui/thirdparty/jquery"],function(D,C,U,m,L,a,q){"use strict";var s={PERS_KEY:"flp.settings.FlpSettings",bFlpSettingsAdded:false,toggleUserActivityLog:function(){C.on("/core/extension/SupportTicket").do(function(c){if(c){U.activate();}else{U.deactivate();}});},initializeAccessKeys:function(){if(D.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(b,A){b.init(m.getModel());A.registerAppKeysHandler(b.handleFocusOnMe);});}},getEffectiveHomepageSetting:function(c,b){var p,d=new q.Deferred(),e=C.last(b)!==false,i=c.split("/").reverse()[0];if(e){p=this._getPersonalization(i);}else{p=q.Deferred().resolve();}p.done(function(v){v=v||C.last(c);if(v!==undefined){C.emit(c,v);}d.resolve(v);});p.fail(function(){var v=C.last(c);d.resolve(v);});return d;},_getPersonalization:function(i){var p=s.getPersonalizer(i,sap.ushell.Container.getRenderer("fiori2"));var P=p.getPersData();P.fail(function(e){L.error("Failed to load "+i+" from the personalization",e,"sap.ushell.components.flp.settings.FlpSettings");});return P;},getPersonalizer:function(i,c){var p=sap.ushell.Container.getService("Personalization");var o=a.getOwnerComponentFor(c);var S={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:this.PERS_KEY,item:i};return p.getPersonalizer(P,S,o);}};return s;});
sap.ui.predefine('sap/ushell/components/StateHelper',[],function(){"use strict";
function g(s){var p=[],i;s=s||[];for(i=0;i<s.length;i++){if(s[i]!==undefined){if(s[i]!=="home"&&s[i]!=="app"){throw new Error("sLaunchpadState value is invalid");}p.push(s[i]);}}if(!p.length){p=["app","home"];}return p;}
function a(s,d){var m=[];if(s==="app"&&!d){var A=["app","minimal","standalone","embedded","headerless","merged","blank","lean"];m=m.concat(A);}else if(s==="home"&&!d){var h=["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"];m=m.concat(h);}else{m.push(s);}return m;}
function b(s,d){var p=d?s:g(s);return p.reduce(function(r,S){var m=a(S,d);if(m){r=r.concat(m);}return r;},[]);}
return{getAllStateToUpdate:b,getModelStates:a,getPassStates:g};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/AddHeadEndItemsStrategy',["sap/base/Log"],function(L){"use strict";
function v(E,i){var a=0,b,I;if(!E||!i){return false;}var n=i.some(function(I){var N=!sap.ui.getCore().byId(I);if(N){L.warning("Failed to find control with id '{id}'".replace("{id}",I));}return N;});if(n){return false;}if(i.length===1&&i[0]==="endItemsOverflowBtn"){return true;}for(b=0;b<E.length;b++){I=E[b];if(I!=="endItemsOverflowBtn"){a++;}if(a+i.length>10){L.warning("maximum of six items has reached, cannot add more items.");return false;}if(i.indexOf(I)>-1){return false;}}return true;}
function A(c,i){var n=c.concat(i);var s={"sf":-2,"copilotBtn":-1,"NotificationsCountButton":1,"endItemsOverflowBtn":2,"meAreaHeaderButton":3,"productSwitchBtn":4};n.sort(function(a,b){var d=s[a]||0,B=s[b]||0;if(d===B){return a.localeCompare(b);}return d-B;});return n;}
function e(c,V){var r=c;if(v(c,V)){r=A(c,V);}return r;}
return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/AddHeadItemsStrategy',[],function(){"use strict";
function a(E,i){return E.indexOf(i)===-1?E.concat(i):E;}
function A(E,i){return i.reduce(a,E);}
function f(r){return function(i){return r.indexOf(i)===-1;};}
function v(E,i){return A(E,i.filter(f(['backBtn','homeBtn']))).length<=3;}
function b(c,I){var n=[],C=c.concat(I);if(c.indexOf("backBtn")>-1||I.indexOf("backBtn")>-1){n.push("backBtn");}if(c.indexOf("homeBtn")>-1||I.indexOf("homeBtn")>-1){n.push("homeBtn");}if(n.length<3){for(var i=0;i<C.length;i++){var s=C[i];if(n.indexOf(s)===-1){n.push(s);}if(n.length>=3){break;}}}return n;}
function e(c,V){var r=c;if(v(c,V)){r=b(c,V);}return r;}
return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ControlManager',["sap/ui/core/CustomData","sap/ui/core/IconPool","sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/ui/footerbar/EndUserFeedback","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/shell/ShellHeadItem","sap/ushell/ui/shell/ShellNavigationMenu"],function(C,I,D,a,E,r,b,c,A,S,d){"use strict";var e=[];var f=[];var g={SHELL_NAV_MENU_ONLY:0,ALL_MY_APPS_ONLY:1,SHELL_NAV_MENU:2,ALL_MY_APPS:3};
function i(w,H,x){e.push(k(w));e.push(m(H));e.push(q(H,x));e.push(n(x));if(a.last("/core/shell/model/enableNotifications")){e.push(p(x));}if(w.moveEditHomePageActionToShellHeader){e.push(l());}if(w.moveAppFinderActionToShellHeader){e.push(s(w,H));}if(w.moveUserSettingsActionToShellHeader){e.push(j(H));}if(w.moveContactSupportActionToShellHeader){e.push(t());}if(w.moveGiveFeedbackActionToShellHeader){e.push(u());}if(a.last("/core/productSwitch/enabled")){e.push(v());}f.push(E.once("CoreResourcesComplementLoaded").do(function(){_(w,x,H);}));}
function h(){e.forEach(function(w){var x=sap.ui.getCore().byId(w);if(x){if(x.destroyContent){x.destroyContent();}x.destroy();}});f.forEach(function(w){w.off();});e=[];f=[];}
function _(w,x,y){sap.ui.require(["sap/m/StandardListItem","sap/ushell/ui/shell/NavigationMiniTile"],function(z,N){var M="shellNavigationMenu";var H=function(J,K){var L=K.getProperty("icon")||"sap-icon://circle-task-2",T=K.getProperty("title"),O=K.getProperty("subtitle"),P=K.getProperty("intent");var Q=(new z({type:"Active",title:T,description:O,icon:L,customData:[new C({key:"intent",value:P})],press:[y.handleNavigationMenuItemPress,y]})).addStyleClass("sapUshellNavigationMenuListItems");return Q;};var R=function(J,K){var L=K.getProperty("icon"),T=K.getProperty("title"),O=K.getProperty("subtitle"),P=K.getProperty("intent");return new N({title:T,subtitle:O,icon:L,intent:P,press:function(){var Q=this.getIntent();if(Q&&Q[0]==="#"){y.navigateFromShellApplicationNavigationMenu(Q);}}});};var B=new d(M,{title:"{/application/title}",icon:"{/application/icon}",showTitle:{path:"/application/showNavMenuTitle"},showRelatedApps:w.appState!=="lean",items:{path:"/application/hierarchy",factory:H.bind(this)},miniTiles:{path:"/application/relatedApps",factory:R.bind(this)},visible:{path:"/ShellAppTitleState",formatter:function(J){return J===g.SHELL_NAV_MENU;}}});var F=sap.ui.getCore().byId("shell-header");B.setModel(F.getModel());var G=sap.ui.getCore().byId("shellAppTitle");if(G){G.setNavigationMenu(B);}e.push(M);return M;}.bind(this));}
function j(w){var U=new S({id:"userSettingsBtn",icon:"sap-icon://action-settings",tooltip:r.i18n.getText("userSettings"),text:r.i18n.getText("userSettings"),press:w.handleUserSettingsPress});return U.getId();}
function k(w){var H=new S({id:"homeBtn",tooltip:r.i18n.getText("homeBtn_tooltip"),ariaLabel:r.i18n.getText("homeBtn_tooltip"),icon:I.getIconURI("home"),target:w.rootIntent?"#"+w.rootIntent:"#"});if(a.last("/core/extension/enableHelp")){H.addStyleClass("help-id-homeBtn",true);}H.addCustomData(new A({key:"aria-disabled",value:"false",writeToDom:true}));if(D.system.desktop){H.addEventDelegate({onsapskipback:function(x){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){x.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}},onsapskipforward:function(x){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){x.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});}return H.getId();}
function l(){var T=new S({id:"ActionModeBtn",icon:"sap-icon://edit"});if(a.last("/core/extension/enableHelp")){T.addStyleClass("help-id-ActionModeBtn");}return T.getId();}
function m(w){var B=sap.ui.getCore().getConfiguration().getRTL()?"feeder-arrow":"nav-back";var x=new S({id:"backBtn",tooltip:r.i18n.getText("backBtn_tooltip"),ariaLabel:r.i18n.getText("backBtn_tooltip"),icon:I.getIconURI(B),press:w.pressNavBackButton.bind(w)});return x.getId();}
function n(w){var x="meAreaHeaderButton";var M=new S({id:x,icon:"{/userImage/personPlaceHolder}",ariaLabel:r.i18n.getText("MeAreaToggleButtonAria"),tooltip:sap.ushell.Container.getUser().getFullName(),press:function(){E.emit("showMeArea",Date.now());}});if(D.system.desktop){M.addEventDelegate({onsapskipforward:function(y){sap.ushell.renderers.fiori2.AccessKeysHandler.bForwardNavigation=true;y.preventDefault();window.document.getElementById("sapUshellHeaderAccessibilityHelper").focus();}});}M.setModel(w);return x;}
function o(B){B.applySettings({floatingNumber:{parts:["/notificationsCount"],formatter:function(w){var x=this.getDomRef(),y="";if(x){if(w>0){y=r.i18n.getText("NotificationToggleButtonCollapsed",w);}else{y=r.i18n.getText("NotificationToggleButtonCollapsedNoNotifications");}x.setAttribute("aria-label",y);}return w;}}},true,true);}
function p(w){var x="NotificationsCountButton";var y="bell";var N=new S({id:x,icon:I.getIconURI(y),text:r.i18n.getText("notificationsBtn_title"),enabled:false,press:function(){E.emit("showNotifications",Date.now());}});N.setModel(w);N.setModel(r.i18nModel,"i18n");o(N);return x;}
function q(w,x){var y=new S({id:"endItemsOverflowBtn",tooltip:r.i18n.getText("shellHeaderOverflowBtn_tooltip"),ariaLabel:r.i18n.getText("shellHeaderOverflowBtn_tooltip"),icon:"sap-icon://overflow",press:[w.pressEndItemsOverflow,w]});o(y);y.setModel(x);return y.getId();}
function s(w,x){var O=new S({id:"openCatalogBtn",text:r.i18n.getText("open_appFinderBtn"),tooltip:r.i18n.getText("open_appFinderBtn"),icon:"sap-icon://sys-find",visible:!w.disableAppFinder,press:x.handleAppFinderPress});if(a.last("/core/extension/enableHelp")){O.addStyleClass("help-id-openCatalogActionItem");}return O.getId();}
function t(){var B="ContactSupportBtn",w=sap.ui.getCore().byId(B);if(!w){var T=new b("tempContactSupportBtn",{visible:true});var x=T.getIcon();var y=T.getText();w=new S({id:B,icon:x,tooltip:y,text:y,press:function(){T.firePress();}});}return B;}
function u(){var B="EndUserFeedbackBtn",F=sap.ui.getCore().byId(B);if(!F){var T=new c("EndUserFeedbackHandlerBtn",{});var w=T.getIcon();var x=T.getText();F=new S({id:B,icon:w,tooltip:x,addAriaHiddenFalse:true,ariaLabel:x,text:x,visible:false});}return F.getId();}
function v(){var P=new S({id:"productSwitchBtn",icon:"sap-icon://grid",visible:false,tooltip:r.i18n.getText("productSwitch_tooltip"),text:r.i18n.getText("productSwitch"),press:function(){E.emit("showProductSwitch",Date.now());}});return P.getId();}
return{init:i,destroy:h,_createOverflowButton:q};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ExtendApplicationPropertyStrategy',["sap/ui/thirdparty/jquery"],function(q){"use strict";
function e(c,v){if(!v){v={};}return q.extend(true,{},c,v);}
return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/PropertyStrategiesFactory',["./AddHeadItemsStrategy","./AddHeadEndItemsStrategy","./ExtendApplicationPropertyStrategy","./RemoveItemsStrategy","./SetHeadPropertyStrategy"],function(A,a,E,R,S){"use strict";return function(p,s){var o;switch(p){case"headItems":if(s==="remove"){o=R;}else{o=A;}break;case"headEndItems":if(s==="remove"){o=R;}else{o=a;}break;case"showLogo":case"headerVisible":case"centralAreaElement":case"title":o=S;break;case"application":o=E;break;case"application/hierarchy":case"application/icon":case"application/relatedApps":case"application/showNavMenuTitle":case"application/title":o=S;break;default:o=null;break;}return o;};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/RemoveItemsStrategy',[],function(){"use strict";
function v(E,i){return i.some(function(I){return(E.indexOf(I)>=0);});}
function r(c,i){return c.filter(function(I){return(i.indexOf(I)===-1);});}
function e(c,V){var R=c;if(v(c,V)){R=r(c,V);}else{jQuery.sap.log.warning("You cannot remove item: "+V+", the item does not exists.");}return R;}
return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/SetHeadPropertyStrategy',[],function(){"use strict";
function v(n){return n!==undefined;}
function e(c,V){if(v(V)){return V;}return c;}
return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ShellHeader.controller',["sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/ui/shell/OverflowListItem","sap/ushell/Config","sap/m/library","sap/ui/performance/Measurement"],function(C,D,J,E,A,O,a,l,M){"use strict";var L=l.ListType;return C.extend("sap.ushell.components._HeaderManager.ShellHeader",{shellUpdateAggItem:function(i,c){return sap.ui.getCore().byId(c.getObject());},pressNavBackButton:function(){E.emit("showMeArea",false);A.service().navigateBack();},pressEndItemsOverflow:function(e){var p=sap.ui.getCore().byId("headEndItemsOverflow"),m;if(!p){p=sap.ui.xmlfragment("sap.ushell.renderers.fiori2.HeadEndItemsOverflowPopover",this);m=new J({headEndItems:a.last("/core/shellHeader/headEndItems")});p.setModel(m);}if(p.isOpen()){p.close();}else{if(sap.ui.getCore().byId("shellNotificationsPopover")){E.emit("showNotifications",false);}p.openBy(e.getSource());}},headEndItemsOverflowItemFactory:function(i,c){var h=sap.ui.getCore().byId(c.getObject()),f=h.getBindingInfo("floatingNumber");var o=new O({id:i+"-"+h.getId(),icon:h.getIcon(),iconInset:true,title:h.getText(),type:L.Active,press:function(){if(h){h.firePress();}var p=sap.ui.getCore().byId("headEndItemsOverflow");if(p.isOpen()){p.close();}}});if(f){var m=h.getModel();o.setModel(m);o.bindProperty("floatingNumber",f);}return o;},destroyHeadEndItemsOverflow:function(e){e.getSource().destroy();},isHeadEndItemInOverflow:function(b){return b!=="ENDITEMSOVERFLOWBTN"&&!this.isHeadEndItemNotInOverflow(b);},isHeadEndItemNotInOverflow:function(b){var o=this.isHeadEndItemOverflow();var s=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;if(b==="ENDITEMSOVERFLOWBTN"){return o;}if(!o){return true;}if(["MEAREAHEADERBUTTON","BACKBTN"].indexOf(b)>-1){return true;}if(s==="Phone"){return false;}if(["SF","FLOATINGCONTAINERBUTTON"].indexOf(b)>-1){return true;}if(s==="Desktop"&&b==="COPILOTBTN"){return true;}return false;},isHeadEndItemOverflow:function(){var n=0,e,b=a.last("/core/shellHeader/headEndItems");if(b.indexOf("endItemsOverflowBtn")===-1){return false;}var c=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;var d=3;if(c==="Phone"){d=1;}for(var i=0;i<b.length;i++){e=sap.ui.getCore().byId(b[i]);if(e&&e.getVisible()){n++;}}if(sap.ui.getCore().byId("endItemsOverflowBtn").getVisible()){return n>d+1;}return n>d;},handleNavigationMenuItemPress:function(e){var d=e.getSource().getCustomData();if(d&&d.length>0){for(var i=0;i<d.length;i++){if(d[i].getKey()==="intent"){var s=d[i].getValue();if(s&&s[0]==="#"){this.navigateFromShellApplicationNavigationMenu(s);return;}}}}},navigateFromShellApplicationNavigationMenu:function(i){if(window.hasher.getHash()!==i.substr(1)){E.emit("centerViewPort",Date.now());window.hasher.setHash(i);}var s=sap.ui.getCore().byId("shellAppTitle");if(s){s.close();}},handleUserSettingsPress:function(){E.emit("openUserSettings",Date.now());},handleAppFinderPress:function(){M.start("FLP:AppFinderLoadingStartToEnd","AppFinderLoadingStartToEnd","FLP");sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(c){c.toExternal({target:{semanticObject:"Shell",action:"appfinder"}});});}});});
sap.ui.predefine('sap/ushell/components/_HomepageManager/DashboardLoadingManager',["sap/ui/base/Object","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery"],function(B,M,q){"use strict";
var D=B.extend("sap.ushell.components._HomepageManager.DashboardLoadingManager",{
metadata:{},
constructor:function(i,s){var e=sap.ui.getCore().getEventBus();this.currentVisibleTiles=[];this.aRefreshTiles=[];this.oBusyIndicatorTiles={};this.oActiveDynamicTiles={};this.oResolvedTiles={};this.oInProgressTiles={};this.oDashboardManager=s.oDashboardManager;e.subscribe("launchpad","visibleTilesChanged",this._onVisibilityChanged,this);e.subscribe("launchpad","dashboardTileClick",this._addTileToRefreshArray,this);e.subscribe("launchpad","refreshTiles",this._refreshTiles,this);e.subscribe("launchpad","setTilesNoVisibility",this._setTilesNoVisibility,this);e.subscribe("launchpad","onHiddenTab",this._setTilesNoVisibility,this);},
_onVisibilityChanged:function(c,e,v){this.currentVisibleTiles=v;if(this.oDashboardManager.isBlindLoading()){this.manageTilesView();}this.manageBusyIndicatorTiles();this.manageDynamicTiles();},
manageDynamicTiles:function(){var v;M.average("DashboardLoadingManagerActiveDynamicTile","Manage Active Dynamic Tiles","FLP_SHELL");var k,V,t,a,n={},c=q.extend(true,{},{},this.oActiveDynamicTiles);for(var i=0;i<this.currentVisibleTiles.length;i++){var o=this.currentVisibleTiles[i];if(!o.bIsExtanded){delete c[o.oTile.uuid];}}for(k in c){t=this.oActiveDynamicTiles[k];a=t.object;this.oDashboardManager.setTileVisible(t,false);}for(V=0;V<this.currentVisibleTiles.length;V++){v=this.currentVisibleTiles[V];if(!v.bIsExtanded){t=v.oTile;a=t.object;if(this.oActiveDynamicTiles[t.uuid]===undefined&&a){this.oDashboardManager.setTileVisible(t,true);}n[t.uuid]=t;}}this.oActiveDynamicTiles=n;M.end("DashboardLoadingManagerActiveDynamicTile");},
isTileViewRequestIssued:function(t){if(this.oInProgressTiles[t.uuid]===undefined&&this.oResolvedTiles[t.uuid]===undefined){return false;}return true;},
manageBusyIndicatorTiles:function(){M.average("DashboardLoadingManagerBusyIndicators","Manage Busy Indicators on Tiles","FLP_SHELL");var v,c,C,I,r=[],b,a=[];for(c in this.oBusyIndicatorTiles){b=true;I=this.oBusyIndicatorTiles[c];if(this.oResolvedTiles[c]===undefined){for(var i=0;i<this.currentVisibleTiles.length;i++){if(this.currentVisibleTiles[i].oTile.uuid===I.oTile.uuid){b=false;break;}}if(b){r.push(I);}}}for(v=0;v<this.currentVisibleTiles.length;v++){C=this.currentVisibleTiles[v];if(this.oBusyIndicatorTiles[C.oTile.uuid]===undefined&&this.oResolvedTiles[C.oTile.uuid]===undefined){a.push(C);}}for(v=0;v<r.length;v++){C=r[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState();}}else{C.oTile.content[0].setState();}}delete this.oBusyIndicatorTiles[C.oTile.uuid];}for(v=0;v<a.length;v++){C=a[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState("Loading");}}else{C.oTile.content[0].setState("Loading");}}this.oBusyIndicatorTiles[C.oTile.uuid]=C;}M.end("DashboardLoadingManagerBusyIndicators");},
setTileInProgress:function(t){this.oInProgressTiles[t.uuid]=t;},
setTileResolved:function(t){delete this.oInProgressTiles[t.uuid];this.oResolvedTiles[t.uuid]=t;},
_addTileToRefreshArray:function(c,e,d){this.aRefreshTiles.push(d.uuid);},
_refreshTiles:function(){for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){for(var r=0;r<this.aRefreshTiles.length;r++){if(t.uuid===this.aRefreshTiles[r]){this.aRefreshTiles.splice(r,1);this.oDashboardManager.setTileVisible(t,true);this.oDashboardManager.refreshTile(t);break;}}}}},
_setTilesNoVisibility:function(){if(!sap.ushell.Container){return;}for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){this.oDashboardManager.setTileVisible(t,false);}delete this.oActiveDynamicTiles[t.uuid];}},
manageTilesView:function(){var v,c,r=[];for(v=0;v<this.currentVisibleTiles.length;v++){c=this.currentVisibleTiles[v];if(this.oInProgressTiles[c.oTile.uuid]===undefined&&this.oResolvedTiles[c.oTile.uuid]===undefined){r.push(c);}}this.oDashboardManager.getTileViewsFromArray(r);}
});
return D;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PagingManager',["sap/ui/base/Object","sap/ui/Device","sap/ushell/Config"],function(B,D,C){"use strict";var T=7;
var P=B.extend("sap.ushell.components._HomepageManager.PagingManager",{
metadata:{publicMethods:["setElementClass","GetGroupHeight","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},
constructor:function(i,s){sap.ushell.components._HomepageManager.getPagingManager=(function(v){return function(){return v;};}(this.getInterface()));this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.supportedElements=s.supportedElements||"";this.tileHeight=0;this.tileSize={"sapUshellTile":{width:100,height:100},"sapUshellLinkTile":{width:40,height:20},"default":{width:40,height:20}};},
getTileHeight:function(){return this.tileHeight;},
setElementClass:function(c){this.supportedElements=c;},
_getTileHeight:function(i){return i?148:176;},
_getTileWidth:function(i,I){if(i){return I?304:360;}return I?148:176;},
getGroupHeight:function(g,f){if(!g||g.isGroupVisible===false){return 0;}var t=g.tiles,l=g.links,I=D.system.phone||C.last("/core/home/sizeBehavior")==="Small",w=this._getTileWidth(false,I),W=this._getTileWidth(true,I),a=48,b=8,A=this.containerWidth-b;var r=0,R=1,c,d,i;var s=t.some(function(c){return!!c&&c.isTileIntentSupported!==false;});if(!s){if(g.isGroupLocked||g.isDefaultGroup){return 0;}return(a+b)/this.containerHeight;}var h=b;if(!f){h+=a;}if(l&&l.length){h+=44;}for(i=0;i<t.length;i++){if(h>this.containerHeight){break;}c=t[i];if(!c||c.isTileIntentSupported===false){continue;}d=c.long?W:w;if(r>0){r+=T;}r+=d;if(r>A){R+=1;r=d;}}h+=(this._getTileHeight(I)+T)*R;return h/this.containerHeight;},
setContainerSize:function(n,a){var t=this.getNumberOfAllocatedElements();this.containerHeight=n;this.containerWidth=a;this._changePageSize(t);},
getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex;},
_changePageSize:function(t){this.currentPageIndex=Math.ceil(t/this._calcElementsPerPage());},
moveToNextPage:function(){this.currentPageIndex++;},
resetCurrentPageIndex:function(){this.currentPageIndex=0;},
getSizeofSupportedElementInUnits:function(t){return this.supportedElements[t].sizeInBaseUnits;},
_calcElementMatrix:function(c){var e=jQuery("<div>").addClass(c);jQuery("body").append(e);var a=e.height();var b=e.width();var r;if(a<20||b<40){r=this.tileSize[c]||this.tileSize.default;}else{r={width:b,height:a};}this.tileHeight=a;e.remove();return r;},
_calcElementsPerPage:function(){var s,b,a,m,c,e,d;for(s in this.supportedElements){a=this.supportedElements[s];m=this._calcElementMatrix(a.className);a.matrix=m;if(b){b.width=b.width>m.width?m.width:b.width;b.height=b.height>m.height?m.height:b.height;}else{b={width:m.width,height:m.height};}}for(s in this.supportedElements){a=this.supportedElements[s];c=a.matrix;a.sizeInBaseUnits=Math.round(c.width/b.width*c.height/b.height);}e=Math.round(this.containerWidth/b.width);d=Math.round(this.containerHeight/b.height);if(!d||!e||e===Infinity||d===Infinity||e===0||d===0){return 10;}return d*e;}
});
return P;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/base/util/uid","sap/base/Log","sap/ui/performance/Measurement","sap/m/library"],function(q,B,C,r,m,G,g,L,M,a){"use strict";var b=a.GenericTileMode;var c=a.LoadState;var d={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};
function _(E,p){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(u){u.logCustomEvent(d.PERSONALIZATION,E,p);});}
var P=B.extend("sap.ushell.components._HomepageManager.PersistentPageOperationAdapter",{
constructor:function(){B.call(this);this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");},
_getIsAppBox:function(o){if(!sap.ushell.Container){return false;}var s=this.oPageBuilderService,i=!!(s.getCatalogTileTargetURL(o)&&(s.getCatalogTilePreviewTitle(o)||s.getCatalogTilePreviewSubtitle(o)));return i;},
getCurrentHiddenGroupIds:function(o){var f=o.getProperty("/groups"),h=[],s,i,j;for(i=0;i<f.length;i++){j=f[i]?f[i].isGroupVisible:true;if(f[i].object){s=this.oPageBuilderService.getGroupId(f[i].object);}if(!j&&s!==undefined){h.push(s);}}return h;},
getPreparedTileModel:function(t,i,T){var s=this.oPageBuilderService,f=g(),o,S=s.getTileSize(t),l=[],h;T=T||s.getTileType(t);if(T==="link"){l=[new G({mode:sap.m.GenericTileMode.LineMode})];}o={"isCustomTile":!this._getIsAppBox(t),"object":t,"originalTileId":s.getTileId(t),"uuid":f,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":l,"long":S==="1x2","target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":C.last("/core/home/enableTileActionsIcon"),"isLinkPersonalizationSupported":s.isLinkPersonalizationSupported(t),"navigationMode":undefined};if(T==="card"){h=s.getCardManifest(t);o.isCard=true;if(h){o.manifest=h;}}return o;},
getPreparedGroupModel:function(o,D,l,f){var s=this.oPageBuilderService,h=(o&&s.getGroupTiles(o))||[],j=[],k=[],i,n=C.last("/core/shell/model/personalization");var I=!!(o&&s.isGroupLocked(o)),p=!!(o&&s.isGroupFeatured(o));for(i=0;i<h.length;++i){var t=h[i],T=s.getTileType(t).toLowerCase();if(T==="tile"||T==="card"){j.push(this.getPreparedTileModel(h[i],I,T));}else if(T==="link"){k.push(this.getPreparedTileModel(h[i],I,T));}else{L.error("Unknown tile type: '"+T+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(D&&m.getLocalizedText("my_group"))||(o&&s.getGroupTitle(o))||(f&&f.title)||"",object:o,groupId:g(),links:k,pendingLinks:[],tiles:j,isDefaultGroup:!!D,editMode:!o,isGroupLocked:I,isFeatured:p,visibilityModes:[true,true],removable:!o||s.isGroupRemovable(o),sortable:n,isGroupVisible:!o||s.isGroupVisible(o),isEnabled:!D,isLastGroup:l||false,isRendered:!!(f&&f.isRendered),isGroupSelected:false};},
getPage:function(){q.sap.flpmeasure.start(0,"Service: Get Data for Dashboard",4);M.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return this._getGroupsFromServer().then(this.loadGroupsFromArray.bind(this));},
_getGroupsFromServer:function(){var t=this;return new Promise(function(f,h){t.oPageBuilderService.getGroups().done(function(i){M.end("FLP:DashboardManager.loadPersonalizedGroups");f(i);}).fail(h);});},
loadGroupsFromArray:function(f){var t=this;q.sap.flpmeasure.end(0,"Service: Get Data for Dashboard");q.sap.flpmeasure.start(0,"Process & render the first segment/tiles",4);M.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");M.start("FLP:DashboardManager.getDefaultGroup","getDefaultGroup","FLP");return new Promise(function(h,j){t.oPageBuilderService.getDefaultGroup().done(function(D){M.end("FLP:DashboardManager.getDefaultGroup");if(f.length===0&&D===undefined){h([]);return;}var i=0,n,N=[],k,l;f=t._sortGroups(D,f);l=f.indexOf(D);k=f.length;M.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(i=0;i<k;++i){n=t.getPreparedGroupModel(f[i],i===l,i===k-1);n.index=i;N.push(n);}M.end("FLP:DashboardManager._getGroupModel");M.end("FLP:DashboardManager.loadGroupsFromArray");q.sap.flpmeasure.end(0,"Process & render the first segment/tiles");h(N);}).fail(j);});},
_sortGroups:function(D,f){var i=0,t=this,h=f.indexOf(D),l=[],j,o,k;f.splice(h,1);while(i<f.length){o=f[i];k=this.oPageBuilderService.isGroupLocked(o);if(k){l.push(o);f.splice(i,1);}else{i++;}}if(!C.last("/core/home/disableSortedLockedGroups")){l.sort(function(x,y){var n=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),p=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return n<p?-1:1;});}l.sort(function(x,y){var I=t.oPageBuilderService.isGroupFeatured(x),n=t.oPageBuilderService.isGroupFeatured(y);if(I===n){return 0;}else if(I>n){return-1;}return 1;});j=l;j.push(D);j.push.apply(j,f);return j;},
addGroupAt:function(o,i,I){var t=this;return new Promise(function(f,h){try{if(i===undefined){t.oPageBuilderService.addGroup(o.title).done(function(n){var s=t.oPageBuilderService.getGroupId(n);_(d.RENAME_GROUP,[null,o.title,s]);f(t.getPreparedGroupModel(n,I,o.isLastGroup,undefined));}).fail(h);}else{t.oPageBuilderService.addGroupAt(o.title,i).done(function(n){var s=t.oPageBuilderService.getGroupId(n);_(d.RENAME_GROUP,[null,o.title,s]);f(t.getPreparedGroupModel(n,I,o.isLastGroup,undefined));}).fail(h);}}catch(j){h();}});},
renameGroup:function(o,n,O){var t=this;return new Promise(function(f,h){try{t.oPageBuilderService.setGroupTitle(o.object,n).done(function(){var s=t.oPageBuilderService.getGroupId(o.object);_(d.RENAME_GROUP,[O,n,s]);f();}).fail(h);}catch(E){h();}});},
deleteGroup:function(o){var t=this,s=o.object,f=this.oPageBuilderService.getGroupId(s),h=this.oPageBuilderService.getGroupTitle(s);return new Promise(function(i,j){try{t.oPageBuilderService.removeGroup(s).done(function(){_(d.DELETE_GROUP,[h,f]);i();}).fail(j);}catch(k){j();}});},
moveGroup:function(o,t,i){var f=this;return new Promise(function(h,j){try{f.oPageBuilderService.moveGroup(o.object,t).done(function(){var s=f.oPageBuilderService.getGroupId(o.object);_(d.MOVE_GROUP,[o.title,i.iFromIndex,i.iToIndex,s]);h();}).fail(j);}catch(k){j();}});},
resetGroup:function(o,i){var t=this,s=o.object,f=this.oPageBuilderService.getGroupId(s),h=this.oPageBuilderService.getGroupTitle(s);return new Promise(function(j,k){try{t.oPageBuilderService.resetGroup(s).done(function(R){_(d.RESET_GROUP,[h,f]);j(t.getPreparedGroupModel(R,i,o.isLastGroup,undefined));}).fail(k);}catch(l){k();}});},
refreshGroup:function(s){var t=this,E="Failed to refresh group with id:"+s+" in the model";return new Promise(function(f){t.oPageBuilderService.getGroups().fail(function(){L.error(E,null,"sap.ushell.components.HomepageManager");f(null);}).done(function(h){var S=null;for(var i=0;i<h.length;i++){if(t.oPageBuilderService.getGroupId(h[i])===s){S=h[i];break;}}if(S){t.oPageBuilderService.getDefaultGroup().done(function(D){var I=s===D.getId(),o=t.getPreparedGroupModel(S,I,false,{isRendered:true});f(o);});}else{f(null);}});});},
getIndexOfGroup:function(f,s){var n=-1,t=this,h=this.oPageBuilderService.getGroupId(s);f.every(function(o,i){var j=t.oPageBuilderService.getGroupId(o.object);if(j===h){n=i;return false;}return true;});return n;},
getOriginalGroupIndex:function(o){var s=this.oPageBuilderService,S=o.object,f=this.oPageBuilderService.getGroups();return new Promise(function(h,j){f.done(function(k){var n;for(var i=0;i<k.length;i++){if(s.getGroupId(k[i])===s.getGroupId(S)){n=i;break;}}h(n);}).fail(j);});},
moveTile:function(t,i,s,T,f){var h=this,S,p=new Promise(function(j,k){try{var R=h.oPageBuilderService.moveTile(t.object,i.tileIndex,i.newTileIndex,s.object,T.object,f);R.done(function(o){var u=[h.oPageBuilderService.getTileTitle(t.object),h.oPageBuilderService.getGroupTitle(s.object),h.oPageBuilderService.getGroupTitle(T.object),t.uuid];_(d.MOVE_TILE,u);S=o;j(o);});R.fail(k);}catch(l){k();}});return p.then(this._getTileViewAsPromise.bind(this)).then(function(v){return Promise.resolve({content:v,originalTileId:h.oPageBuilderService.getTileId(S),object:S});});},
removeTile:function(o,t){var f=this,s=t.object,T=f.oPageBuilderService.getTileTitle(s),h=f.oPageBuilderService.getCatalogTileId(s),i=f.oPageBuilderService.getCatalogTileTitle(s),j=f.oPageBuilderService.getTileId(s),p;p=new Promise(function(k,l){try{f.oPageBuilderService.removeTile(o.object,s).done(function(){m.showLocalizedMessage("tile_deleted_msg",[T,o.title]);_(d.DELETE_TILE,[T||j,h,i,o.title]);k();}).fail(l);}catch(n){l();}});return p;},
_getTileViewAsPromise:function(t){var f=this,p=new Promise(function(h,i){var j=f.oPageBuilderService.getTileView(t);j.done(h);j.fail(i);});return p;},
refreshTile:function(s){this.oPageBuilderService.refreshTile(s);},
setTileVisible:function(s,v){this.oPageBuilderService.setTileVisible(s,v);},
getTileType:function(s){return this.oPageBuilderService.getTileType(s);},
getTileSize:function(s){return this.oPageBuilderService.getTileSize(s);},
getTileTitle:function(t){return this.oPageBuilderService.getTileTitle(t.object);},
getTileId:function(s){return this.oPageBuilderService.getTileId(s);},
isLinkPersonalizationSupported:function(s){return this.oPageBuilderService.isLinkPersonalizationSupported(s);},
getTileTarget:function(t){return this.oPageBuilderService.getTileTarget(t.object);},
getTileView:function(t){return this.oPageBuilderService.getTileView(t.object);},
getTileActions:function(t){return this.oPageBuilderService.getTileActions(t);},
getFailedLinkView:function(t){var s=this.oPageBuilderService.getCatalogTilePreviewSubtitle(t.object);var h=this.oPageBuilderService.getCatalogTilePreviewTitle(t.object);if(!h&&!s){h=r.i18n.getText("cannotLoadLinkInformation");}return new G({mode:b.LineMode,state:c.Failed,header:h,subheader:s});},
getTileModelByCatalogTileId:function(s){L.error("Cannot get tile with id "+s+": Method is not supported");},
transformGroupModel:function(){return;}
});
var e=null;return{getInstance:function(){if(!e){e=new P();}return e;},destroy:function(){e=null;}};});
sap.ui.predefine('sap/ushell/components/_HomepageManager/TransientPageOperationAdapter',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/base/util/uid","sap/base/Log","sap/m/library"],function(q,B,C,r,m,G,I,T,u,L,a){"use strict";var b=a.GenericTileMode;var c=a.LoadState;
var d=B.extend("sap.ushell.components._HomepageManager.TransientPageOperationAdapter.js",{
constructor:function(){B.call(this);this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this._createCatalogMap();},
_createCatalogMap:function(){if(this.mCatalogTiles){return;}var s=this.oPageBuilderService,t=this;this.mCatalogTiles={};this._getAllCatalogTiles().then(function(f){for(var i=0;i<f.length;i++){for(var j=0;j<f[i].length;j++){t.mCatalogTiles[s.getCatalogTileId(f[i][j])]=f[i][j];}}});},
getCurrentHiddenGroupIds:function(){return[];},
getTileActions:function(t){t.isStub=function(){return true;};var R=this.oPageBuilderService.getTileActions(t);delete t.isStub;return R;},
getPreparedTileModel:function(t,i,s){var f=u(),o,l=[];s=s||t.type;if(s==="link"){l=[new G({mode:b.LineMode})];}o={"isCustomTile":false,"object":t,"originalTileId":f,"uuid":f,"tileCatalogId":"","content":l,"long":false,"target":"","debugInfo":null,"isTileIntentSupported":true,"rgba":"","isLocked":i,"showActionsIcon":C.last("/core/home/enableTileActionsIcon"),"isLinkPersonalizationSupported":true,"navigationMode":undefined};if(s==="card"){o.isCard=true;o.manifest={};}return o;},
getPreparedGroupModel:function(g,D,l,o){var f=u(),h=(g&&g.tiles)||[],M=[],j=[],i;for(i=0;i<h.length;++i){var t=h[i],s=t.type.toLowerCase();if(s==="tile"||s==="card"){M.push(this.getPreparedTileModel(h[i],false,s));}else if(s==="link"){j.push(this.getPreparedTileModel(h[i],false,s));}else{L.error("Unknown tile type: '"+s+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(D&&m.getLocalizedText("my_group"))||(g&&g.title)||(o&&o.title)||"",object:g,groupId:f,links:j,pendingLinks:[],tiles:M,isDefaultGroup:!!D,editMode:!g,isGroupLocked:false,isFeatured:false,visibilityModes:[true,true],removable:true,sortable:true,isGroupVisible:true,isEnabled:!D,isLastGroup:l||false,isRendered:!!(o&&o.isRendered),isGroupSelected:false};},
getPage:function(){return Promise.resolve([this.getPreparedGroupModel(null,false,true)]);},
addGroupAt:function(g,i,D){var f={title:g.title};return Promise.resolve(this.getPreparedGroupModel({},D,g.isLastGroup,f));},
renameGroup:function(){return Promise.resolve();},
deleteGroup:function(){return Promise.resolve();},
moveGroup:function(){return Promise.resolve();},
resetGroup:function(){return Promise.reject("Reset group not supported in transient mode");},
refreshGroup:function(){return Promise.reject("Refresh group not supported in transient mode");},
getIndexOfGroup:function(){return Promise.resolve(-1);},
getOriginalGroupIndex:function(g,f){var h;for(var i=0;i<f.length;i++){if(f[i].groupId===g.groupId){h=i;break;}}return Promise.resolve(h);},
moveTile:function(t,i,s,o,f){var g=this._findCatalogTile(t.tileCatalogId);return Promise.resolve({content:this._getTileView(g,f),originalTileId:t.uuid,object:{id:t.uuid,type:f,title:this.oPageBuilderService.getCatalogTileTitle(g)}});},
removeTile:function(){return Promise.resolve();},
_getTileView:function(o,t){if(t==="link"){return new G({mode:b.LineMode,header:this.oPageBuilderService.getCatalogTileTitle(o),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(o)});}return new G({header:this.oPageBuilderService.getCatalogTileTitle(o),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(o),tileContent:new T({content:new I({src:this.oPageBuilderService.getCatalogTilePreviewIcon(o)})})});},
refreshTile:function(){return;},
setTileVisible:function(){return;},
getTileType:function(s){return s.type;},
getTileSize:function(){return"1x1";},
getTileId:function(s){return s.id;},
isLinkPersonalizationSupported:function(){return true;},
getTileTarget:function(t){var o=this._findCatalogTile(t.tileCatalogId);return this.oPageBuilderService.getCatalogTileTargetURL(o);},
getTileTitle:function(t){return t.object.title;},
_getAllCatalogTiles:function(){var s=this.oPageBuilderService;function g(f){f.map(function(o){var h=s.getCatalogId(o)||"";return s.getCatalogTitle(o)||h.split(":").slice(1).join(":");});return Promise.all(f.map(function(o){return s.getCatalogTiles(o);}));}return Promise.resolve(s.getCatalogs()).then(g);},
_findCatalogTile:function(s){return this.mCatalogTiles[s];},
getTileView:function(t){var o=this._findCatalogTile(t.tileCatalogId),v=this._getTileView(o,t.object.type),D=new q.Deferred();D.resolve(v);return D.promise();},
getFailedLinkView:function(t){var h=t.object.title||r.i18n.getText("cannotLoadLinkInformation"),s="";return new G({mode:b.LineMode,state:c.Failed,header:h,subheader:s});},
getTileModelByCatalogTileId:function(s,t){var o=this._findCatalogTile(s),f;t=t||"tile";f=this.getPreparedTileModel({},false,t);f.tileCatalogId=s;f.object={id:f.uuid,type:t,title:this.oPageBuilderService.getCatalogTileTitle(o)};var v=this._getTileView(o,t);f.content=[v];return f;},
transformGroupModel:function(g){var t=this,o;for(var i=0;i<g.length;i++){o=g[i];o.object={};o.tiles.forEach(function(f){var s=f.object;f.tileCatalogId=t.oPageBuilderService.getCatalogTileId(s);f.object={id:f.uuid,type:"tile",title:t.oPageBuilderService.getTileTitle(s)};});o.links.forEach(function(l){var s=l.object;l.tileCatalogId=t.oPageBuilderService.getCatalogTileId(s);l.object={id:l.uuid,type:"link",title:t.oPageBuilderService.getTileTitle(s)};});}return g;}
});
var e;return{getInstance:function(){if(!e){e=new d();}return e;},destroy:function(){e=null;}};});
sap.ui.predefine('sap/ushell/components/appfinder/AppFinder.controller',["sap/ui/core/mvc/Controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui5service/ShellUIService","sap/ushell/EventHub","sap/ushell/components/CatalogsManager","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/jquery","sap/ui/core/library","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/resources"],function(C,A,S,E,a,H,q,c,D,J,r){"use strict";var V=c.mvc.ViewType;return C.extend("sap.ushell.components.appfinder.AppFinder",{onInit:function(){sap.ushell.Container.getRenderer("fiori2").createExtendedShellState("appFinderExtendedShellState",function(){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true);sap.ushell.Container.getRenderer("fiori2").showHeaderItem("homeBtn",true);});var v=this.getView(),m=v.getModel(),s=v.showEasyAccessMenu;var o={model:m};this.oCatalogsManager=new a("catalogsMgr",o);this.getView().setModel(this._getSubHeaderModel(),"subHeaderModel");this.oConfig=v.parentComponent.getComponentData().config;this.catalogView=sap.ui.view("catalogView",{type:V.JS,viewName:"sap.ushell.components.appfinder.Catalog",height:"100%",viewData:{parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel()}});this.catalogView.addStyleClass("sapUiGlobalBackgroundColor sapUiGlobalBackgroundColorForce");this._addViewCustomData(this.catalogView,"appFinderCatalogTitle");this.oRouter=this.getView().parentComponent.getRouter();this.oRouter.attachRouteMatched(this._handleAppFinderNavigation.bind(this));v.createSubHeader();if(!s){v.oPage.addContent(this.catalogView);setTimeout(function(){q("#catalogSelect").focus();},0);}D.resize.attachHandler(this._resizeHandler.bind(this));this.oRouter.oHashChanger=H.getInstance();},_resizeHandler:function(){var s=this._showOpenCloseSplitAppButton();var b=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible");if(s!==b){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",s);if(s){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}}this._toggleViewWithToggleButtonClass(s);},_handleAppFinderNavigation:function(e){var v=this.getView();this._preloadAppHandler();this._getPathAndHandleGroupContext(e);this._toggleViewWithToggleButtonClass(this._showOpenCloseSplitAppButton());if(v.showEasyAccessMenu){this.onShow(e);}else if(v._showSearch("catalog")){v.updateSubHeader("catalog",false);this._toggleViewWithSearchAndTagsClasses("catalog");}sap.ui.getCore().getEventBus().publish("showCatalog");E.emit("CenterViewPointContentRendered","appFinder");E.emit("showCatalog",{sId:"showCatalog",oData:Date.now()});sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");},_showOpenCloseSplitAppButton:function(){return!D.orientation.landscape||D.system.phone;},_resetSubHeaderModel:function(){this.oSubHeaderModel.setProperty("/activeMenu",null);this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:null});this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",this._showOpenCloseSplitAppButton());this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);},_getSubHeaderModel:function(){if(this.oSubHeaderModel){return this.oSubHeaderModel;}this.oSubHeaderModel=new J();this._resetSubHeaderModel();return this.oSubHeaderModel;},onTagsFilter:function(e){var t=e.getSource(),s=t.getModel("subHeaderModel"),b=e.getSource().getSelectedItems(),T=b.length>0,o={tagMode:T,selectedTags:[]};b.forEach(function(d){o.selectedTags.push(d.getText());});s.setProperty("/activeMenu",this.getCurrentMenuName());s.setProperty("/tag",o);sap.ui.getCore().byId("catalogView").getController().onTag(o);},searchHandler:function(e){var o=sap.ushell.components.getCatalogsManager();o.loadCustomTilesKeyWords();var s=e.getSource().getValue(),b=false;if(s===null){return;}var d=this.oSubHeaderModel.getProperty("/search");var f=this.oSubHeaderModel.getProperty("/activeMenu");if(this.getCurrentMenuName()!==f){f=this.getCurrentMenuName();}if(!d.searchMode&&!e.getParameter("clearButtonPressed")){d.searchMode=true;}if(d.searchMode&&D.system.phone){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}if(s!==d.searchTerm){if(this.containsOnlyWhiteSpac(s)){s="*";}d.searchTerm=s;b=true;}this.oSubHeaderModel.setProperty("/search",d);this.oSubHeaderModel.setProperty("/activeMenu",f);this.oSubHeaderModel.refresh(true);if(b){sap.ui.getCore().byId("catalogView").getController().onSearch(d);}},_preloadAppHandler:function(){setTimeout(function(){if(sap.ushell.Container){sap.ushell.Container.getRenderer("fiori2").applyExtendedShellState("appFinderExtendedShellState");}this._updateShellHeader(this.oView.oPage.getTitle());}.bind(this),0);},getCurrentMenuName:function(){return this.currentMenu;},_navigateTo:function(n){var g=this.oView.getModel().getProperty("/groupContext");var G=g?g.path:null;if(G){this.oRouter.navTo(n,{filters:JSON.stringify({targetGroup:encodeURIComponent(G)})},true);}else{this.oRouter.navTo(n,{},true);}},getSystemsModels:function(){var t=this;if(this.getSystemsPromise){return this.getSystemsPromise;}var g=new q.Deferred();this.getSystemsPromise=g.promise();var m=["userMenu","sapMenu"].map(function(b){var s=new J();s.setProperty("/systemSelected",null);s.setProperty("/systemsList",[]);return t.getSystems(b).then(function(R){s.setProperty("/systemsList",R);return s;});});q.when.apply(q,m).then(function(u,s){g.resolve(u,s);});return this.getSystemsPromise;},onSegmentButtonClick:function(e){this.oSubHeaderModel.setProperty("/search/searchMode",false);this.oSubHeaderModel.setProperty("/search/searchTerm","");switch(e.getParameters().id){case"catalog":this._navigateTo("catalog");break;case"userMenu":this._navigateTo("userMenu");break;case"sapMenu":this._navigateTo("sapMenu");break;}},onShow:function(e){var p=e.getParameter("name");if(p===this.getCurrentMenuName()){return;}var v=this.getView();v._updateSearchWithPlaceHolder(p);this._updateCurrentMenuName(p);this.getSystemsModels().then(function(u,s){var b=s.getProperty("/systemsList");var d=u.getProperty("/systemsList");v.oPage.removeAllContent();var f=(this.currentMenu==="sapMenu"?b:d);if(f&&f.length){v.updateSubHeader(this.currentMenu,true);}else if(v._showSearch(this.currentMenu)){v.updateSubHeader(this.currentMenu,false);}if(this.currentMenu==="catalog"){v.oPage.addContent(this.catalogView);}else if(this.currentMenu==="userMenu"){if(!this.userMenuView){this.userMenuView=new sap.ui.view("userMenuView",{type:V.JS,viewName:"sap.ushell.components.appfinder.EasyAccess",height:"100%",viewData:{menuName:"USER_MENU",easyAccessSystemsModel:u,parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("userMenu")}});this._addViewCustomData(this.userMenuView,"appFinderUserMenuTitle");}v.oPage.addContent(this.userMenuView);}else if(this.currentMenu==="sapMenu"){if(!this.sapMenuView){this.sapMenuView=new sap.ui.view("sapMenuView",{type:V.JS,viewName:"sap.ushell.components.appfinder.EasyAccess",height:"100%",viewData:{menuName:"SAP_MENU",easyAccessSystemsModel:s,parentComponent:v.parentComponent,subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("sapMenu")}});this._addViewCustomData(this.sapMenuView,"appFinderSapMenuTitle");}v.oPage.addContent(this.sapMenuView);}this._setFocusToSegmentedButton(f);this.oSubHeaderModel.setProperty("/activeMenu",this.currentMenu);if(this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible")){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}this.oSubHeaderModel.refresh(true);}.bind(this));},_updateCurrentMenuName:function(m){var v=this.getView();if(!v.showEasyAccessMenu||(m==="sapMenu"&&!v.enableEasyAccessSAPMenu)||(m==="userMenu"&&!v.enableEasyAccessUserMenu)){this.currentMenu="catalog";}else{this.currentMenu=m;}this._toggleViewWithSearchAndTagsClasses(m);},_toggleViewWithSearchAndTagsClasses:function(m){var v=this.getView();if(v._showSearch(m)){v.oPage.addStyleClass("sapUshellAppFinderSearch");}else{v.oPage.removeStyleClass("sapUshellAppFinderSearch");}if(v._showSearchTag(m)){v.oPage.addStyleClass("sapUshellAppFinderTags");}else{v.oPage.removeStyleClass("sapUshellAppFinderTags");}},_toggleViewWithToggleButtonClass:function(b){var v=this.getView();if(b){v.oPage.addStyleClass("sapUshellAppFinderToggleButton");}else{v.oPage.removeStyleClass("sapUshellAppFinderToggleButton");}},_setFocusToSegmentedButton:function(s){var v=this.getView();if(s&&s.length){var b=v.segmentedButton.getSelectedButton();setTimeout(function(){q("#"+b).focus();},0);}else{setTimeout(function(){q("#catalogSelect").focus();},0);}},_getPathAndHandleGroupContext:function(o){var p=o.getParameter("arguments");var d=p.filters;var b;try{b=JSON.parse(d);}catch(e){b=d;}var P=(b&&decodeURIComponent(b.targetGroup))||"";P=P==="undefined"?undefined:P;this._updateModelWithGroupContext(P);},_updateModelWithGroupContext:function(p){var l=sap.ushell.Container.getService("LaunchPage"),m=this.oView.getModel(),g,G={path:p,id:"",title:""};if(p&&p!==""){var t=function(){var M=m.getProperty("/groups");if(M.length){g=m.getProperty(p);G.id=l.getGroupId(g.object);G.title=g.title||l.getGroupTitle(g.object);return;}setTimeout(t,100);};t();}m.setProperty("/groupContext",G);},getSystems:function(m){var d=new q.Deferred();var b=sap.ushell.Container.getService("ClientSideTargetResolution");if(!b){d.reject("cannot get ClientSideTargetResolution service");}else{b.getEasyAccessSystems(m).done(function(s){var e=[];var f=Object.keys(s);for(var i=0;i<f.length;i++){var g=f[i];e[i]={"systemName":s[g].text,"systemId":g};}d.resolve(e);}).fail(function(e){d.reject("An error occurred while retrieving the systems: "+e);});}return d.promise();},_addViewCustomData:function(v,t){var R=r.i18n;v.addCustomData(new A({key:"role",value:"region",writeToDom:true}));v.addCustomData(new A({key:"aria-label",value:R.getText(t),writeToDom:true}));},_initializeShellUIService:function(){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});},_updateShellHeader:function(t){if(!this.oShellUIService){this._initializeShellUIService();}this.oShellUIService.setTitle(t);this.oShellUIService.setHierarchy();},containsOnlyWhiteSpac:function(t){if(!t||t===""){return false;}var T=t;return(!T.replace(/\s/g,"").length);}});});
sap.ui.predefine('sap/ushell/components/appfinder/AppFinder.view',["sap/ui/thirdparty/jquery","sap/ui/core/ListItem","sap/ui/model/Sorter","sap/m/MultiComboBox","sap/ui/model/BindingMode","sap/m/SearchField","sap/m/FlexBox","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/ToggleButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/Toolbar","sap/m/Page","sap/ushell/resources","sap/ui/Device","sap/ui/core/Component"],function(q,L,S,M,B,a,F,b,c,T,A,d,P,r,D,C){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.AppFinder",{createContent:function(){this.oController=this.getController();this.parentComponent=C.getOwnerComponentFor(this);this.setModel(this.parentComponent.getModel());this.enableEasyAccessSAPMenu=this.getModel().getProperty("/enableEasyAccessSAPMenu");this.enableEasyAccessUserMenu=this.getModel().getProperty("/enableEasyAccessUserMenu");if((!this.enableEasyAccessSAPMenu&&!this.enableEasyAccessUserMenu)||(D.system.phone||D.system.tablet&&(!D.system.combi))){this.showEasyAccessMenu=false;}else{this.showEasyAccessMenu=true;}var R=r.i18n;this.oPage=new P("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?R.getText("appFinderTitle"):R.getText("appFinder_group_context_title",t);}}});return this.oPage;},_showSearch:function(m){var s="enableCatalogSearch";if(m==="userMenu"){s="enableEasyAccessUserMenuSearch";}else if(m==="sapMenu"){s="enableEasyAccessSAPMenuSearch";}return this.getModel().getProperty("/"+s);},_showSearchTag:function(m){if(m==="userMenu"||m==="sapMenu"){return false;}return this.getModel().getProperty("/enableCatalogTagFilter");},createSubHeader:function(){this.oToolbar=new d("appFinderSubHeader",{});if(D.system.desktop){this.oToolbar.addEventDelegate({onsapskipback:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);},onsapskipforward:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){e.preventDefault();sap.ushell.components.ComponentKeysHandler.setFocusOnCatalogTile();}},onAfterRendering:function(){q("#catalog-button").attr("accesskey","a");}});}this.oToolbar.addCustomData(new A({key:"role",value:"heading",writeToDom:true}));this.oToolbar.addCustomData(new A({key:"aria-level",value:"2",writeToDom:true}));this.oToolbar.addStyleClass("sapUshellAppFinderHeader");this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new T("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(e){this.getController().oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",e.getSource().getPressed());this.openCloseSplitAppButton.setTooltip(e.getParameter("pressed")?r.i18n.getText("ToggleButtonHide"):r.i18n.getText("ToggleButtonShow"));}.bind(this),tooltip:r.i18n.getText("ToggleButtonShow")});if(D.system.desktop){this.openCloseSplitAppButton.addEventDelegate({onsaptabprevious:function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(e);}});}this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton);}},updateSubHeader:function(m,e){var s,f;this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(e){s=this.createSegmentedButtons(m);this.oPage.addStyleClass("sapUshellAppFinderWithEasyAccess");this.oToolbar.addContent(s);}if(this._showSearch(m)){f=this.createSearchControl(m);this.oToolbar.addContent(f);}this.getController()._updateCurrentMenuName(m);},createSegmentedButtons:function(m){var o,R,s,e,f,i;if(this.segmentedButton){this.segmentedButton.setSelectedButton(m);return this.segmentedButton;}o=this.getController();R=r.i18n;s=[];s.push(new c("catalog",{text:R.getText("appFinderCatalogTitle"),press:function(E){o.onSegmentButtonClick(E);}}));if(this.enableEasyAccessUserMenu){s.push(new c("userMenu",{text:R.getText("appFinderUserMenuTitle"),press:function(E){o.onSegmentButtonClick(E);}}));}if(this.enableEasyAccessSAPMenu){s.push(new c("sapMenu",{text:R.getText("appFinderSapMenuTitle"),press:function(E){o.onSegmentButtonClick(E);}}));}this.segmentedButton=new b("appFinderSegmentedButtons",{items:s});if(D.system.desktop){this.segmentedButton.addEventDelegate({onsaptabprevious:function(E){var g=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(!g.getVisible()){E.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(E);}}});}this.segmentedButton.setSelectedButton(m);e=this.segmentedButton.getItems();for(i=0;i<e.length;i++){f=e[i];f.addCustomData(new A({key:"aria-controls",value:f.getId()+"View",writeToDom:true}));}return this.segmentedButton;},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);q("#appFinderSearch input").select();},createSearchControl:function(m){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new F("appFinderSearchContainer");}this.oAppFinderSearchContainer.removeAllItems();if(m==="catalog"&&this._showSearchTag("catalog")){this.createTagControl();this.oAppFinderSearchContainer.addItem(this.oAppFinderTagFilter);}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new a("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:"subHeaderModel>/search/searchTerm",mode:B.OneWay}}).addStyleClass("help-id-catalogSearch");this.oAppFinderSearchControl.addCustomData(new A({key:"aria-controls",value:"",writeToDom:true}));if(D.system.desktop){this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(e){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.ComponentKeysHandler.setFocusOnCatalogTile();}}});}}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(m);return this.oAppFinderSearchContainer;},_updateSearchWithPlaceHolder:function(m){var s="";if(m==="catalog"){s="EasyAccessMenu_SearchPlaceHolder_Catalog";}else if(m==="userMenu"){s="EasyAccessMenu_SearchPlaceHolder_UserMenu";}else if(m==="sapMenu"){s="EasyAccessMenu_SearchPlaceHolder_SAPMenu";}if(s&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(r.i18n.getText(s));this.oAppFinderSearchControl.setTooltip(r.i18n.getText(s));}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter;}this.oAppFinderTagFilter=new M("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",visible:{path:"/tagList",formatter:function(t){return t.length>0;}},items:{path:"/tagList",sorter:new S("tag",false,false),template:new L({text:"{tag}",key:"{tag}"})},selectionChange:[this.oController.onTagsFilter,this.oController]}).addStyleClass("help-id-catalogTagFilter");return this.oAppFinderTagFilter;},getControllerName:function(){return"sap.ushell.components.appfinder.AppFinder";}});});
sap.ui.predefine('sap/ushell/components/appfinder/Catalog.controller',["sap/ushell/components/_HomepageManager/PagingManager","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/Device","sap/ui/core/library","sap/ui/model/Context","sap/m/MessageToast","sap/ushell/Config","sap/ushell/services/AppType"],function(P,q,r,F,a,m,D,c,C,M,b,A){"use strict";var V=c.mvc.ViewType;var S=m.SplitAppMode;sap.ui.controller("sap.ushell.components.appfinder.Catalog",{oPopover:null,onInit:function(){this.categoryFilter="";this.preCategoryFilter="";this.oMainModel=this.oView.getModel();this.oSubHeaderModel=this.oView.getModel("subHeaderModel");this.resetPage=false;this.bIsInProcess=false;var t=this;sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this);var R=this.getView().parentComponent.getRouter();R.attachRouteMatched(function(e){t.onShow(e);});this.timeoutId=0;document.subHeaderModel=this.oSubHeaderModel;document.mainModel=this.oMainModel;var T=this.oSubHeaderModel.bindProperty("/openCloseSplitAppButtonToggled");T.attachChange(t.handleToggleButtonModelChanged.bind(this));this.oView.oCatalogsContainer.setHandleSearchCallback(t.handleSearchModelChanged.bind(this));},onBeforeRendering:function(){sap.ui.getCore().getEventBus().publish("renderCatalog");},onAfterRendering:function(){this.wasRendered=true;if(!this.PagingManager){this._setPagingManager();}if(this.PagingManager.currentPageIndex===0){this.allocateNextPage();}q(window).resize(function(){var w=q(window).width(),d=q(window).height();this.PagingManager.setContainerSize(w,d);}.bind(this));this._handleAppFinderWithDocking();sap.ui.getCore().getEventBus().subscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this);},_setPagingManager:function(){this.lastCatalogId=0;this.PagingManager=new P("catalogPaging",{supportedElements:{tile:{className:"sapUshellTile"}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});this.getView().getCatalogContainer().setPagingManager(this.PagingManager);},_decodeUrlFilteringParameters:function(u){var U;try{U=JSON.parse(u);}catch(e){U=u;}var h=(U&&U.tagFilter&&U.tagFilter)||[];if(h){try{this.tagFilter=JSON.parse(h);}catch(e){this.tagFilter=[];}}else{this.tagFilter=[];}this.categoryFilter=(U&&U.catalogSelector&&U.catalogSelector)||this.categoryFilter;if(this.categoryFilter){this.categoryFilter=window.decodeURIComponent(this.categoryFilter);}this.searchFilter=(U&&U.tileFilter&&U.tileFilter)||null;if(this.searchFilter){this.searchFilter=window.decodeURIComponent(this.searchFilter);}},_applyFilters:function(w){var s=false;if(this.categoryFilter){this.categoryFilter=r.i18n.getText("all")===this.categoryFilter?"":this.categoryFilter;if(this.categoryFilter!==this.preCategoryFilter){s=true;}this.oView.setCategoryFilterSelection(this.categoryFilter,s);}else{s=true;this.oView.setCategoryFilterSelection("",s);}this.preCategoryFilter=this.categoryFilter;if(this.searchFilter&&this.searchFilter.length){this.searchFilter=this.searchFilter.replace(/\*/g,"");this.searchFilter=this.searchFilter.trim();this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:this.searchFilter});}else if(w){this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:""});this.resetPage=true;}if(this.tagFilter&&this.tagFilter.length){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:this.tagFilter});}else if(w){this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.resetPage=true;}this.handleSearchModelChanged();},_handleAppFinderAfterNavigate:function(){this.clearFilters();},clearFilters:function(){var s=false;if(this.categoryFilter!==this.preCategoryFilter){s=true;}var d=this.oSubHeaderModel.getProperty("/search/searchMode"),t=this.oSubHeaderModel.getProperty("/tag/tagMode");if(d){this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:""});}if(t){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:[]});}if(this.categoryFilter&&this.categoryFilter!==""){this.selectedCategoryId=undefined;this.categoryFilter=undefined;this.getView().getModel().setProperty("/categoryFilter","");this.oView.setCategoryFilterSelection("",s);}this.preCategoryFilter=this.categoryFilter;this.handleSearchModelChanged();},onShow:function(e){var u=e.getParameter("arguments").filters;q.extend(this.getView().getViewData(),e);this._decodeUrlFilteringParameters(u);if(this.wasRendered&&!u){this.clearFilters();}else{this._applyFilters(this.wasRendered);}},allocateNextPage:function(){var o=this.getView().getCatalogContainer();if(!o.nAllocatedUnits||o.nAllocatedUnits===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();o.applyPagingCategoryFilters(this.allocateTiles,this.categoryFilter);}},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect"),i=q.grep(s.getItems(),q.proxy(function(I){return I.getBindingContext().getObject().title===this.categoryFilter;},this));if(!i.length&&s.getItems()[0]){i.push(s.getItems()[0]);}},setTagsFilter:function(f){var p={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:(this.searchFilter&&this.searchFilter.length)?encodeURIComponent(this.searchFilter):"",tagFilter:f.length?JSON.stringify(f):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},setCategoryFilter:function(f){var p={catalogSelector:f,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},setSearchFilter:function(f){var p={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:f?encodeURIComponent(f):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},onSearch:function(s){var d=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(d)!==-1){var e=s.searchTerm?s.searchTerm:"";this.setSearchFilter(e);}else{this._restoreSelectedMasterItem();}},onTag:function(t){var s=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(s)!==-1){var d=t.selectedTags?t.selectedTags:[];this.setTagsFilter(d);}else{this._restoreSelectedMasterItem();}},getGroupContext:function(){var o=this.getView().getModel(),g=o.getProperty("/groupContext/path");return g||"";},_isTagFilteringChanged:function(s){var d=s.length===this.tagFilter.length,i=d;if(!i){return true;}s.some(function(t){i=this.tagFilter&&Array.prototype.indexOf.call(this.tagFilter,t)!==-1;return!i;}.bind(this));return i;},_setUrlWithTagsAndSearchTerm:function(s,d){var u={tileFilter:s&&s.length?encodeURIComponent(s):"",tagFilter:d.length?JSON.stringify(d):[],targetGroup:encodeURIComponent(this.getGroupContext())};this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(u)});},handleSearchModelChanged:function(){var s=this.oSubHeaderModel.getProperty("/search/searchMode"),t=this.oSubHeaderModel.getProperty("/tag/tagMode"),p,d=this.oSubHeaderModel.getProperty("/search/searchTerm"),e=this.oSubHeaderModel.getProperty("/tag/selectedTags"),o,f,g,h=[],i;if(!this.PagingManager){this._setPagingManager();}this.PagingManager.resetCurrentPageIndex();this.nAllocatedTiles=0;this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oView.oCatalogsContainer.updateAllocatedUnits(this.allocateTiles);this.oView.oCatalogsContainer.resetCatalogPagination();var j=sap.ui.getCore().byId("catalogTilesDetailedPage");if(j){j.scrollTo(0,0);}if(s||t||this.resetPage){if(e&&e.length>0){o=new F("tags","EQ","v");o.fnTest=function(T){var x,y;if(e.length===0){return true;}for(x=0;x<e.length;x++){y=e[x];if(T.indexOf(y)===-1){return false;}}return true;};f=new F([o],true);}d=d?d.replace(/\*/g,""):d;if(d){var k=d.split(/[\s,]+/);var l=new F(q.map(k,function(x){return(x&&new F("keywords",a.Contains,x));}),true);var n=new F(q.map(k,function(x){return(x&&new F("title",a.Contains,x));}),true);var u=new F(q.map(k,function(x){return(x&&new F("subtitle",a.Contains,x));}),true);h.push(l);h.push(n);h.push(u);g=new F(h,false);}var v=this.oView.oCatalogsContainer.getCatalogs();this.oSearchResultsTotal=[];var w=this;if(f&&f.aFilters.length>0&&g){i=new F([g].concat([f]),true);}else if(f&&f.aFilters.length>0){i=new F([f],true);}else if(g&&g.aFilters.length>0){i=new F([g],true);}v.forEach(function(x){x.getBinding("customTilesContainer").filter(i);x.getBinding("appBoxesContainer").filter(i);});this.oView.oCatalogsContainer.bSearchResults=false;this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);this.bSearchResults=this.oView.oCatalogsContainer.bSearchResults;this.oView.splitApp.toDetail(w.getView()._calculateDetailPageId());this.resetPage=false;}else{this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);}p=this.getView()._calculateDetailPageId();this.oView.splitApp.toDetail(p);},_handleAppFinderWithDocking:function(){if(q(".sapUshellContainerDocked").length>0){if(q("#mainShell").width()<710){if(window.innerWidth<1024){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(S.ShowHideMode);}else{this.oView.splitApp.setMode(S.HideMode);this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",true);}}else{this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(S.ShowHideMode);}}},_restoreSelectedMasterItem:function(){var o=this.oView.splitApp.getMasterPage("catalogSelect"),O=sap.ui.getCore().byId(this.selectedCategoryId);if(O){this.categoryFilter=O.getTitle();}o.setSelectedItem(O);},handleToggleButtonModelChanged:function(){var B=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible"),d=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonToggled");if((d!==this.bCurrentButtonToggled)&&B){if(!D.system.phone){if(d&&!this.oView.splitApp.isMasterShown()){this.oView.splitApp.showMaster();}else if(this.oView.splitApp.isMasterShown()){this.oView.splitApp.hideMaster();}}else if(this.oView.splitApp.isMasterShown()){var o=sap.ui.getCore().byId(this.getView()._calculateDetailPageId());this.oView.splitApp.toDetail(o);}else if(d){var e=sap.ui.getCore().byId("catalogSelect");this.oView.splitApp.toMaster(e,"show");}}this.bCurrentButtonToggled=d;},_handleCatalogListItemPress:function(e){this.onCategoryFilter(e);if(this.oSubHeaderModel.getProperty("/search/searchTerm")!==""){this.oSubHeaderModel.setProperty("/search/searchMode",true);}if(D.system.phone||D.system.tablet){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",!this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled"));}},onCategoryFilter:function(e){var o=e.getSource(),s=o.getSelectedItem(),d=s.getBindingContext(),f=d.getModel();if(f.getProperty("static",d)){f.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategoryId=undefined;this.categoryFilter=undefined;}else{f.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(window.encodeURIComponent(s.getBindingContext().getObject().title));this.categoryFilter=s.getTitle();this.selectedCategoryId=s.getId();}},onTileAfterRendering:function(e){var j=q(e.oSource.getDomRef()),d=j.find(".sapMGT");d.attr("tabindex","-1");},catalogTilePress:function(){sap.ui.getCore().getEventBus().publish("launchpad","catalogTileClick");},onAppBoxPressed:function(e){var o=e.getSource(),t=o.getBindingContext().getObject(),p;if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}p=sap.ushell.Container.getService("LaunchPage").getAppBoxPressHandler(t);if(p){p(t);}else{var u=o.getProperty("url");if(u&&u.indexOf("#")===0){hasher.setHash(u);}else{var l=b.last("/core/shell/enableRecentActivity")&&b.last("/core/shell/enableRecentActivityLogging");if(l){var R={title:o.getProperty("title"),appType:A.URL,url:u,appId:u};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(R);}window.open(u,"_blank");}}},onTilePinButtonClick:function(e){var l=sap.ushell.Container.getService("LaunchPage");var d=l.getDefaultGroup();d.done(function(o){var f=e.getSource(),s=f.getBindingContext(),g=this.getView().getModel(),G=g.getProperty("/groupContext/path");if(G){this._handleTileFooterClickInGroupContext(s,G);}else{var h=g.getProperty("/groups");var l=sap.ushell.Container.getService("LaunchPage");var i=this.getCatalogTileDataFromModel(s);var t=i.tileData.associatedGroups;var j=[];var k=h.map(function(v){var w,x,T;w=l.getGroupId(v.object);x=!((t&&Array.prototype.indexOf.call(t,w)===-1));T={id:w,title:this._getGroupTitle(o,v.object),selected:x};j.push(T);return{selected:x,initiallySelected:x,oGroup:v};}.bind(this));var p=sap.ui.getCore().byId("sapUshellGroupsPopover");var n;if(!p){n=l.getCatalogTilePreviewTitle(g.getProperty(s.sPath).src);if(!n){n=l.getCatalogTileTitle(g.getProperty(s.sPath).src);}var u=new sap.ui.view("sapUshellGroupsPopover",{type:V.JS,viewName:"sap.ushell.components.appfinder.GroupListPopover",viewData:{groupData:k,title:n,enableHideGroups:g.getProperty("/enableHideGroups"),enableHelp:g.getProperty("/enableHelp"),sourceContext:s,catalogModel:this.getView().getModel(),catalogController:this}});u.getController().setSelectedStart(j);u.open(f).then(this._handlePopoverResponse.bind(this,s,i));}}}.bind(this));},_getGroupTitle:function(d,g){var l=sap.ushell.Container.getService("LaunchPage"),t;if(d&&(l.getGroupId(d)===l.getGroupId(g))){t=r.i18n.getText("my_group");}else{t=l.getGroupTitle(g);}return t;},_handlePopoverResponse:function(s,d,e){if(!e.addToGroups.length&&!e.newGroups.length&&!e.removeFromGroups.length){return;}var o=this.getView().getModel();var g=o.getProperty("/groups");var p=[];e.addToGroups.forEach(function(f){var i=g.indexOf(f);var G=new C(o,"/groups/"+i);var h=this._addTile(s,G);p.push(h);}.bind(this));e.removeFromGroups.forEach(function(f){var t=s.getModel().getProperty(s.getPath()).id;var i=g.indexOf(f);var h=this._removeTile(t,i);p.push(h);}.bind(this));e.newGroups.forEach(function(f){var n=(f.length>0)?f:r.i18n.getText("new_group_name");var h=this._createGroupAndSaveTile(s,n);p.push(h);}.bind(this));q.when.apply(q,p).then(function(){var f=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(d,e,f);}.bind(this));},_handlePopoverGroupsActionPromises:function(d,p,e){var f=e.filter(function(k){return!k.status;});if(f.length){var E=this.prepareErrorMessage(f,d.tileData.title);var g=sap.ushell.components.getCatalogsManager();g.resetAssociationOnFailure(E.messageId,E.parameters);return;}var t=[];var l=sap.ushell.Container.getService("LaunchPage");p.allGroups.forEach(function(k){if(k.selected){var u=l.getGroupId(k.oGroup.object);t.push(u);}});var o=this.getView().getModel();if(p.newGroups.length){var h=o.getProperty("/groups");var n=h.slice(h.length-p.newGroups.length);n.forEach(function(k){var u=l.getGroupId(k.object);t.push(u);});}o.setProperty(d.bindingContextPath+"/associatedGroups",t);var i=(p.addToGroups[0])?p.addToGroups[0].title:"";if(!i.length&&p.newGroups.length){i=p.newGroups[0];}var j=(p.removeFromGroups[0])?p.removeFromGroups[0].title:"";var s=this.prepareDetailedMessage(d.tileData.title,p.addToGroups.length+p.newGroups.length,p.removeFromGroups.length,i,j);M.show(s,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_getCatalogTileIndexInModel:function(s){var t=s.sPath,d=t.split("/"),e=d[d.length-1];return e;},_handleTileFooterClickInGroupContext:function(s,g){var l=sap.ushell.Container.getService("LaunchPage"),o=this.getView().getModel(),d=this.getCatalogTileDataFromModel(s),e=d.tileData.associatedGroups,G=o.getProperty(g),f=l.getGroupId(G.object),i=e?Array.prototype.indexOf.call(e,f):-1,t=d.bindingContextPath,h,j,R,T,k,n=this;if(d.isBeingProcessed){return;}o.setProperty(t+"/isBeingProcessed",true);if(i===-1){h=new C(s.getModel(),g);j=this._addTile(s,h);j.done(function(p){if(p.status==1){n._groupContextOperationSucceeded(s,d,G,true);}else{n._groupContextOperationFailed(d,G,true);}});j.always(function(){o.setProperty(t+"/isBeingProcessed",false);});}else{T=s.getModel().getProperty(s.getPath()).id;k=g.split("/")[2];R=this._removeTile(T,k);R.done(function(p){if(p.status==1){n._groupContextOperationSucceeded(s,d,G,false);}else{n._groupContextOperationFailed(d,G,false);}});R.always(function(){o.setProperty(t+"/isBeingProcessed",false);});}},_groupContextOperationSucceeded:function(s,o,g,t){var l=sap.ushell.Container.getService("LaunchPage"),G=l.getGroupId(g.object),d=o.tileData.associatedGroups,e,i;if(t){d.push(G);s.getModel().setProperty(o.bindingContextPath+"/associatedGroups",d);e=this.prepareDetailedMessage(o.tileData.title,1,0,g.title,"");}else{for(i in d){if(d[i]===G){d.splice(i,1);break;}}s.getModel().setProperty(o.bindingContextPath+"/associatedGroups",d);e=this.prepareDetailedMessage(o.tileData.title,0,1,"",g.title);}M.show(e,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_groupContextOperationFailed:function(o,g,t){var d=sap.ushell.components.getCatalogsManager(),e;if(t){e=r.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[o.tileData.title,g.title]});}else{e=r.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[o.tileData.title,g.title]});}d.notifyOnActionFailure(e.messageId,e.parameters);},prepareErrorMessage:function(e,t){var g,s,f,d,n=0,N=0,h=false,i;for(var j in e){g=e[j].group;s=e[j].action;if(s==="add"){n++;if(n===1){f=g.title;}}else if(s==="remove"){N++;if(N===1){d=g.title;}}else if(s==="addTileToNewGroup"){n++;if(n===1){f=g.title;}}else{h=true;}}if(h){if(e.length===1){i=r.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{i=r.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length===1){if(n){i=r.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]});}else{i=r.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,d]});}}else if(N===0){i=r.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]});}else if(n===0){i=r.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]});}else{i=r.i18n.getText({messageId:"fail_tile_operation_some_actions"});}return i;},prepareDetailedMessage:function(t,n,d,f,e){var g;if(n===0){if(d===1){g=r.i18n.getText("tileRemovedFromSingleGroup",[t,e]);}else if(d>1){g=r.i18n.getText("tileRemovedFromSeveralGroups",[t,d]);}}else if(n===1){if(d===0){g=r.i18n.getText("tileAddedToSingleGroup",[t,f]);}else if(d===1){g=r.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,e]);}else if(d>1){g=r.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,d]);}}else if(n>1){if(d===0){g=r.i18n.getText("tileAddedToSeveralGroups",[t,n]);}else if(d===1){g=r.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,e]);}else if(d>1){g=r.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,d]);}}return g;},getCatalogTileDataFromModel:function(s){var B=s.getPath(),o=s.getModel(),t=o.getProperty(B);return{tileData:t,bindingContextPath:B,isBeingProcessed:t.isBeingProcessed};},_addTile:function(t,g){var o=sap.ushell.components.getCatalogsManager(),d=q.Deferred(),p=o.createTile({catalogTileContext:t,groupContext:g});p.done(function(e){d.resolve(e);});return d;},_removeTile:function(t,i){var o=sap.ushell.components.getCatalogsManager(),d=q.Deferred(),p=o.deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(e){d.resolve(e);});return d;},_createGroupAndSaveTile:function(t,n){var o=sap.ushell.components.getCatalogsManager(),d=q.Deferred(),p=o.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(e){d.resolve(e);});return d;},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this);}});});
sap.ui.predefine('sap/ushell/components/appfinder/Catalog.view',["sap/ui/core/HTML","sap/ushell/ui/appfinder/AppBox","sap/ushell/ui/appfinder/PinButton","sap/ushell/ui/launchpad/CatalogEntryContainer","sap/ushell/ui/launchpad/CatalogsContainer","sap/ushell/ui/launchpad/Panel","sap/ushell/ui/launchpad/Tile","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/List","sap/m/StandardListItem","sap/ui/Device","sap/m/MessagePage","sap/m/Page","sap/m/BusyIndicator","sap/m/SplitApp","sap/ushell/Config"],function(H,A,P,C,a,b,T,q,M,r,c,L,S,D,d,f,B,g,h){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.Catalog",{oController:null,createContent:function(o){var t=this;this.oViewData=this.getViewData();this.parentComponent=this.oViewData.parentComponent;var m=this.parentComponent.getModel();this.setModel(m);this.setModel(this.oViewData.subHeaderModel,"subHeaderModel");this.oController=o;function i(e){return((e!==null)&&(e==="1x2"||e==="2x2"))||false;}function j(v){return parseInt(v,10)||0;}function k(e,v,I,J,K,N){var O;if(J){var R=r.i18n,Q=I?Array.prototype.indexOf.call(I,K):-1;O=R.getText(Q!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup",N);}else{O=I&&I.length?v:e;}return O;}var l=new P({icon:"sap-icon://pushpin-off",selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(e,v,I,J){if(I){var K=e?Array.prototype.indexOf.call(e,J):-1;return K!==-1;}return!!v;}},tooltip:{parts:["i18n>EasyAccessMenu_PinButton_UnToggled_Tooltip","i18n>EasyAccessMenu_PinButton_Toggled_Tooltip","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(e,v,I,J,K,N,O){return k(e,v,I,K,N,O);}},press:[o.onTilePinButtonClick,o]});var n=new P({icon:"sap-icon://pushpin-off",selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:function(e,v,I,J){if(I){var K=e?Array.prototype.indexOf.call(e,J):-1;return K!==-1;}return!!v;}},tooltip:{parts:["i18n>EasyAccessMenu_PinButton_UnToggled_Tooltip","i18n>EasyAccessMenu_PinButton_Toggled_Tooltip","associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(e,v,I,J,K,N,O){return k(e,v,I,K,N,O);}},press:[o.onTilePinButtonClick,o]});this.oAppBoxesTemplate=new A({title:"{title}",icon:"{icon}",subtitle:"{subtitle}",url:"{url}",navigationMode:"{navigationMode}",pinButton:n,press:[o.onAppBoxPressed,o]});var E=h.last("/core/shell/enablePersonalization");n.setVisible(E);n.addCustomData(new c({key:"tabindex",value:"-1",writeToDom:true}));n.addStyleClass("sapUshellPinButton");l.setVisible(E);l.addCustomData(new c({key:"tabindex",value:"-1",writeToDom:true}));l.addStyleClass("sapUshellPinButton");this.oTileTemplate=new T({tileViews:{path:"content",factory:function(I,e){return e.getObject();}},"long":{path:"size",formatter:i},index:{path:"id",formatter:j},tileCatalogId:"{id}",pinButton:l,press:[o.catalogTilePress,o],afterRendering:o.onTileAfterRendering});this.oCatalogSelect=new L("catalogSelect",{visible:"{/enableCatalogSelection}",name:"Browse",rememberSelections:true,mode:"SingleSelectMaster",items:{path:"/masterCatalogs",template:new S({type:"Active",title:"{title}",tooltip:"{title}"})},showNoData:false,itemPress:[o._handleCatalogListItemPress,o],selectionChange:[o._handleCatalogListItemPress,o]});this.getCatalogSelect=function(){return this.oCatalogSelect;};var p=this.oCatalogSelect.onAfterRendering;if(D.system.desktop){this.oCatalogSelect.addEventDelegate({onsaptabnext:function(v){try{v.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.ComponentKeysHandler.setFocusOnCatalogTile();}catch(e){}},onsapskipforward:function(v){try{v.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.ComponentKeysHandler.setFocusOnCatalogTile();}catch(e){}},onsapskipback:function(v){try{v.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var I=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(I.getVisible()){I.focus();}else{sap.ushell.components.ComponentKeysHandler.appFinderFocusMenuButtons(v);}}catch(e){}}});}if(m.getProperty("/enableHelp")){this.oCatalogSelect.addStyleClass("help-id-catalogCategorySelect");}this.setCategoryFilterSelection=function(e,v){var I=t.getCatalogSelect(),J=I.getItems(),K=e,N=0;if(!K||K===""){K=r.i18n.getText("all");}J.forEach(function(O,Q){if(O.getTitle()===K){N=Q;I.setSelectedItem(O);}});if(J.length!==0&&v){J[N].focus();}};this.oCatalogSelect.onAfterRendering=function(){var e=t.oController.categoryFilter||r.i18n.getText("all");t.setCategoryFilterSelection(e);if(p){p.apply(this,arguments);}if(!this.getSelectedItem()){this.setSelectedItem(this.getItems()[0]);}setTimeout(function(){var v=q("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(v.length){v.eq(0).focus();}else{q("#catalog-button").focus();}},0);};var s=this.oCatalogSelect._onAfterRenderingPopover;this.oCatalogSelect._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false);}if(s){s.apply(this,arguments);}};var u=sap.ui.getCore().getEventBus(),w,U=function(){this.splitApp.toMaster("catalogSelect","show");if(!D.system.phone){w=this._calculateDetailPageId();if(w!==this.splitApp.getCurrentDetailPage().getId()){this.splitApp.toDetail(w);}}};u.subscribe("launchpad","catalogContentLoaded",function(){setTimeout(U.bind(this),500);},this);u.subscribe("launchpad","afterCatalogSegment",U,this);var x=new H("sapUshellCatalogAccessibilityTileText",{content:"<div style='height: 0px; width: 0px; overflow: hidden; float: left;'>"+r.i18n.getText("tile")+"</div>"});var y=new C({header:"{title}",customTilesContainer:{path:"customTiles",template:this.oTileTemplate,templateShareable:true},appBoxesContainer:{path:"appBoxes",template:this.oAppBoxesTemplate,templateShareable:true}});this.oMessagePage=new d({visible:true,showHeader:false,text:r.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""});this.oCatalogsContainer=new a("catalogTiles",{categoryFilter:"{/categoryFilter}",catalogs:{path:"/catalogs",templateShareable:true,template:y},busy:true});this.oCatalogsContainer.addStyleClass("sapUshellCatalogTileContainer");this.oCatalogsContainer.addEventDelegate({onsaptabprevious:function(e){var v=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader"),I=q(e.srcControl.getDomRef());if(v.getVisible()&&!v.getPressed()&&!I.hasClass("sapUshellPinButton")){e.preventDefault();var J=sap.ui.getCore().byId("appFinderSearch");J.focus();}},onsapskipback:function(e){var v=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(v.getVisible()&&!v.getPressed()){e.preventDefault();v.focus();}}});this.oCatalogsContainer.onAfterRendering=function(){var e=sap.ui.getCore().byId("catalogTilesDetailedPage");if(!this.getBusy()){e.setBusy(false);M.end("FLP:AppFinderLoadingStartToEnd");}else{e.setBusy(true);}q("#catalogTilesDetailedPage-cont").scroll(function(){var v=sap.ui.getCore().byId("catalogTilesDetailedPage"),I=v.getScrollDelegate(),J=I.getScrollTop(),K=I.getMaxScrollTop();if(K-J<=30+3*t.oController.PagingManager.getTileHeight()&&t.oController.bIsInProcess===false){t.oController.bIsInProcess=true;t.oController.allocateNextPage();setTimeout(function(){t.oController.bIsInProcess=false;},0);}});};this.wrapCatalogsContainerInDetailPage=function(e,I){var v=new f(I,{showHeader:false,showFooter:false,showNavButton:false,content:[new b({translucent:true,content:e}).addStyleClass("sapUshellCatalogPage")]});return v;};this.getCatalogContainer=function(){return this.oCatalogsContainer;};new f({showHeader:false,showFooter:false,showNavButton:false,content:[new b({translucent:true,content:[x,this.getCatalogContainer()]}).addStyleClass("sapUshellCatalogPage")]});var z=this.wrapCatalogsContainerInDetailPage([x,this.getCatalogContainer()],"catalogTilesDetailedPage"),F=new f("catalogMessagePage",{showHeader:false,showFooter:false,showNavButton:false,content:[this.oMessagePage]});var G=new B("catalogSelectBusyIndicator",{size:"1rem"});this.splitApp=new g("catalogViewMasterDetail",{masterPages:[G,this.oCatalogSelect],detailPages:[z,F]});document.toSearch=function(){this.splitApp.toDetail("catalogTilesSearchPage");}.bind(this);document.toDetail=function(){this.splitApp.toDetail("catalogTilesDetailedPage");}.bind(this);document.toMessage=function(){this.splitApp.toDetail("catalogMessagePage");}.bind(this);return this.splitApp;},_calculateDetailPageId:function(){var s=this.getModel("subHeaderModel");var e=s.getProperty("/search/searchMode");var t=s.getProperty("/tag/tagMode");var n=!!this.getModel().getProperty("/catalogsNoDataText");var i;if(e||t){i=this.getController().bSearchResults?"catalogTilesDetailedPage":"catalogMessagePage";}else if(n){i="catalogMessagePage";}else{i="catalogTilesDetailedPage";}return i;},getControllerName:function(){return"sap.ushell.components.appfinder.Catalog";}});});
sap.ui.predefine('sap/ushell/components/appfinder/Component',["sap/ushell/components/CatalogsManager","sap/ushell/resources","sap/ui/core/UIComponent","sap/m/routing/Router","sap/ushell/Config","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/SharedComponentUtils","sap/base/util/UriParameters"],function(C,r,U,R,a,m,s,b){"use strict";return U.extend("sap.ushell.components.appfinder.Component",{metadata:{manifest:"json"},parseOldCatalogParams:function(u){var p=new b(u).mParams,v,k;for(k in p){if(p.hasOwnProperty(k)){v=p[k][0];p[k]=v.indexOf("/")!==-1?encodeURIComponent(v):v;}}return p;},handleNavigationFilter:function(n){var S=sap.ushell.Container.getService("URLParsing").parseShellHash(n),p;if(S&&S.semanticObject==="shell"&&S.action==="catalog"){p=this.parseOldCatalogParams(n);setTimeout(function(){this.getRouter().navTo("catalog",{filters:JSON.stringify(p)});}.bind(this),0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}return this.oShellNavigation.NavigationFilterStatus.Continue;},createContent:function(){this.oRouter=this.getRouter();this.oModel=m.getModel();this.setModel(this.oModel);var h,S,p,c,P=a.last("/core/shell/enablePersonalization"),d=a.last("/core/spaces/enabled");if(P&&!d||d&&!P){this.oRouter.addRoute({name:"userMenu",pattern:"userMenu/:filters:"});this.oRouter.addRoute({name:"sapMenu",pattern:"sapMenu/:filters:"});this.oRouter.addRoute({name:"catalog",pattern:["catalog/:filters:","",":filters:"]});s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");}var o={model:this.oModel,router:this.oRouter};this.oCatalogsManager=new C("dashboardMgr",o);this.setModel(r.i18nModel,"i18n");s.toggleUserActivityLog();this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");h=hasher.getHash();S=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(S&&S.semanticObject==="shell"&&S.action==="catalog"){p=this.parseOldCatalogParams(h);c=this.getMetadata().getConfig();this.oShellNavigation.toExternal({target:{semanticObject:c.semanticObject,action:c.action}});this.getRouter().navTo("catalog",{filters:JSON.stringify(p)});}var A=sap.ui.view({id:"appFinderView",viewName:"sap.ushell.components.appfinder.AppFinder",type:"JS",async:true});return A;},exit:function(){this.oCatalogsManager.destroy();}});});
sap.ui.predefine('sap/ushell/components/appfinder/EasyAccess.controller',["sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/datajs","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/ushell/ui/launchpad/AccessibilityCustomData"],function(O,a,q,r,J,c,A){"use strict";var V=c.mvc.ViewType;sap.ui.controller("sap.ushell.components.appfinder.EasyAccess",{DEFAULT_URL:"/sap/opu/odata/UI2",DEFAULT_NUMBER_OF_LEVELS:3,SEARCH_RESULTS_PER_REQUEST:100,onInit:function(){var t=this;this.translationBundle=r.i18n;this.oView=this.getView();var e=this.oView.getModel("easyAccessSystemsModel");var s=e.bindProperty("/systemSelected");s.attachChange(t.adjustUiOnSystemChange.bind(this));this.menuName=this.oView.getViewData().menuName;this.systemId=null;this.easyAccessCache={};this.easyAccessModel=new J();this.oView.hierarchyFolders.setModel(this.easyAccessModel,"easyAccess");this.oView.hierarchyApps.setModel(this.easyAccessModel,"easyAccess");var S=this.oView.getModel("subHeaderModel");var T=S.bindProperty("/openCloseSplitAppButtonToggled");T.attachChange(t.handleToggleButtonModelChanged.bind(this));if(this.oView.getViewData().enableSearch){var o=S.bindProperty("/search");o.attachChange(t.handleSearchModelChanged.bind(this));}this.checkIfSystemSelectedAndLoadData();},onAfterRendering:function(){setTimeout(function(){this.oView.hierarchyApps.getController()._updateAppBoxedWithPinStatuses();}.bind(this),0);},checkIfSystemSelectedAndLoadData:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;this.loadMenuItemsFirstTime(this.oView.getViewData().menuName,s);}},navigateHierarchy:function(p,f){this.oView.hierarchyFolders.setBusy(false);var e=this.easyAccessModel.getProperty(p||"/");if(typeof e.folders!=="undefined"){this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);return;}this.oView.hierarchyFolders.setBusy(true);this.getMenuItems(this.menuName,this.systemId,e.id,e.level).then(function(p,b){this.easyAccessModel.setProperty(p+"/folders",b.folders);this.easyAccessModel.setProperty(p+"/apps",b.apps);this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);this.oView.hierarchyFolders.setBusy(false);}.bind(this,p),function(b){this.handleGetMenuItemsError(b);}.bind(this));},handleSearch:function(s){var i=!this.hierarchyAppsSearchResults;if(i){this.hierarchyAppsSearchResults=new sap.ui.view(this.getView().getId()+"hierarchyAppsSearchResults",{type:V.JS,viewName:"sap.ushell.components.appfinder.HierarchyApps",height:"100%",viewData:{easyAccessSystemsModel:this.oView.getModel("easyAccessSystemsModel"),getMoreSearchResults:this.getMoreSearchResults.bind(this)}});this.easyAccessSearchResultsModel=new J();this.easyAccessSearchResultsModel.setSizeLimit(10000);this.hierarchyAppsSearchResults.setModel(this.easyAccessSearchResultsModel,"easyAccess");this.hierarchyAppsSearchResults.setBusyIndicatorDelay(this.getView().BUSY_INDICATOR_DELAY);this.hierarchyAppsSearchResults.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyAppsSearchResults.addCustomData(new A({key:"role",value:"region",writeToDom:true}));this.hierarchyAppsSearchResults.addCustomData(new A({key:"aria-label",value:this.oView.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));}this.searchResultFrom=0;this.oView.splitApp.getCurrentDetailPage().setBusy(true);this.easyAccessSearchResultsModel.setProperty("/apps",[]);this.easyAccessSearchResultsModel.setProperty("/total",0);this._getSearchResults(s,this.searchResultFrom).then(function(b){b.results.forEach(function(e){var d=sap.ushell.Container.getService("Bookmark");d.countBookmarks(e.url).then(function(f){e.bookmarkCount=f;});});this.easyAccessSearchResultsModel.setProperty("/apps",b.results);this.easyAccessSearchResultsModel.setProperty("/total",b.count);this.searchResultFrom=b.results.length;if(i){this.oView.splitApp.addDetailPage(this.hierarchyAppsSearchResults);}this.hierarchyAppsSearchResults.updateResultSetMessage(parseInt(b.count,10),true);this.oView.splitApp.getCurrentDetailPage().setBusy(false);if(this.oView.splitApp.getCurrentDetailPage()!==this.hierarchyAppsSearchResults){this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyAppsSearchResults");}}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.splitApp.getCurrentDetailPage().setBusy(false);}.bind(this));},getMoreSearchResults:function(){if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true);}var s=this.oView.getModel("subHeaderModel");var S=s.getProperty("/search/searchTerm");this._getSearchResults(S,this.searchResultFrom).then(function(b){var C=this.easyAccessSearchResultsModel.getProperty("/apps");var n=C.slice();Array.prototype.push.apply(n,b.results);this.easyAccessSearchResultsModel.setProperty("/apps",n);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(false);}this.searchResultFrom=n.length;}.bind(this),function(e){this.handleGetMenuItemsError(e);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true);}}.bind(this));},_getSearchResults:function(s,f){var d=new q.Deferred();var S=this._getODataRequestForSearchUrl(this.menuName,this.systemId,s,f);var R={requestUri:S};var C=this._callODataService(R,this.handleSuccessOnReadFilterResults);C.done(function(b){d.resolve(b);});C.fail(function(e){d.reject(e);});return d.promise();},getSystemNameOrId:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){return s.name||s.id;}},adjustUiOnSystemChange:function(){var C=this.easyAccessModel.getData();if(this.systemId&&C&&C.id){this.easyAccessCache[this.systemId]=C;}var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;var n=this.easyAccessCache[this.systemId];if(n){this.easyAccessModel.setData(n);this.navigateHierarchy("",false);}else{this.oView.hierarchyFolders.setBusy(true);this.oView.hierarchyApps.setBusy(true);this.loadMenuItemsFirstTime(this.menuName,s);}}},handleToggleButtonModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var b=s.getProperty("/openCloseSplitAppButtonVisible");var B=s.getProperty("/openCloseSplitAppButtonToggled");var S=this.getView().splitApp;if(b){if(B&&!S.isMasterShown()){S.showMaster();}else if(S.isMasterShown()){S.hideMaster();}}},handleSearchModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var b=s.getProperty("/activeMenu");if(this.getView().getId().indexOf(b)===-1){return;}var S=s.getProperty("/search/searchTerm");var d=s.getProperty("/search/searchMode");if(d){sap.ui.getCore().byId("appFinderSearch").getCustomData()[0].setValue(this.getView().getId()+"hierarchyAppsSearchResults");if(S){this.handleSearch(S);}}else{sap.ui.getCore().byId("appFinderSearch").getCustomData()[0].setValue("");this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyApps");}},loadMenuItemsFirstTime:function(m,s){return this.getMenuItems(m,s.systemId,"",0).then(function(b){b.text=s.systemName||s.systemId;this.easyAccessModel.setData(b);this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);this.navigateHierarchy("",false);}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.hierarchyFolders.updatePageBindings("/",false);this.oView.hierarchyApps.getController().updatePageBindings("/");}.bind(this));},handleGetMenuItemsError:function(e){var E=this.getErrorMessage(e);sap.ui.require(["sap/m/MessageBox"],function(M){M.error(E);});this.easyAccessModel.setData("");this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);},getErrorMessage:function(e){var m="";if(this.menuName==="SAP_MENU"){m=this.translationBundle.getText("easyAccessSapMenuNameParameter");}else if(this.menuName==="USER_MENU"){m=this.translationBundle.getText("easyAccessUserMenuNameParameter");}if(e){if(e.message){return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e.message]);}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e]);}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgNoReason",m);},getMenuItems:function(m,s,e,b,n){var d=new q.Deferred();if(m!=="SAP_MENU"&&m!=="USER_MENU"){d.reject("Invalid menuType parameter");return d.promise();}if(typeof s!=="string"||s===""){d.reject("Invalid systemId parameter");return d.promise();}if(typeof e!=="string"){d.reject("Invalid entityId parameter");return d.promise();}if(typeof b!=="number"){d.reject("Invalid entityLevel parameter");return d.promise();}if(n&&typeof n!=="number"){d.reject("Invalid numberOfNextLevels parameter");return d.promise();}if(e===""){b=0;}var N;var M=this.getView().getModel();var C=M.getProperty("/easyAccessNumbersOfLevels");if(C){N=C;}else if(n){N=n;}else{N=this.DEFAULT_NUMBER_OF_LEVELS;}var l=b+N+1;var S=this._getODataRequestUrl(m,s,e,l);var R={requestUri:S};var o=this._callODataService(R,this.handleSuccessOnReadMenuItems,{systemId:s,entityId:e,iLevelFilter:l});o.done(function(f){d.resolve(f);});o.fail(function(f){d.reject(f);});return d.promise();},_callODataService:function(R,s,S){var l,i;var t=this;var d=new q.Deferred();if(!S){S={};}if(sap.ushell.Container){l=sap.ushell.Container&&sap.ushell.Container.getUser().getLanguage();if((l)&&(R.requestUri.indexOf("sap-language=")===-1)){R.requestUri=R.requestUri+(R.requestUri.indexOf("?")>=0?"&":"?")+"sap-language="+l;}i=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";}sap.ui.require(["sap/ui/thirdparty/datajs"],function(){a.read({requestUri:R.requestUri,headers:{"Cache-Control":"no-cache, no-store, must-revalidate","Pragma":"no-cache","Expires":"0","Accept-Language":(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||"","sap-client":(i||""),"sap-language":(l||"")}},function(o,b){if(o&&o.results&&b&&b.statusCode===200){var e=s.bind(t,o,S)();d.resolve(e);}},function(m){d.reject(m);});});return d.promise();},handleSuccessOnReadMenuItems:function(R,p){var o=this._oDataResultFormatter(R.results,p.systemId,p.entityId,p.iLevelFilter);return o;},handleSuccessOnReadFilterResults:function(R){var u;R.results.forEach(function(o,i){u=this._appendSystemToUrl(o,this.systemId);o.url=u;}.bind(this));return{results:R.results,count:R.__count};},_appendSystemToUrl:function(d,s){if(d.url){return d.url+(d.url.indexOf("?")>0?"&":"?")+"sap-system="+s;}},_oDataResultFormatter:function(R,s,e,l){var f={};var o={};if(e===""){o={id:"root",text:"root",level:0,folders:[],apps:[]};f.root=o;}else{o={id:e,folders:[],apps:[]};f[e]=o;}var b;for(var i=0;i<R.length;i++){b=R[i];var p;if(b.level==="01"){p=f.root;}else{p=f[b.parentId];}var m={id:b.Id,text:b.text,subtitle:b.subtitle,icon:b.icon,level:parseInt(b.level,10)};if(b.type==="FL"){m.folders=[];m.apps=[];if(b.level==l-1){m.folders=undefined;m.apps=undefined;}if(p&&p.folders){p.folders.push(m);}f[b.Id]=m;}else{m.url=this._appendSystemToUrl(b,s);if(p&&p.apps){p.apps.push(m);}}}return o;},_getODataRequestUrl:function(m,s,e,l){var S=this._getServiceUrl(m);var L;if(l<10){L="0"+l;}else{L=l.toString();}var b="";if(e){if(decodeURIComponent(e)===e){e=encodeURIComponent(e);}b="('"+e+"')/AllChildren";}S=S+";o="+s+"/MenuItems"+b+"?$filter=level lt '"+L+"'&$orderby=level,text";return S;},_getODataRequestForSearchUrl:function(m,s,t,f){var S=this._getServiceUrl(m);var n=this.SEARCH_RESULTS_PER_REQUEST;t=this._removeWildCards(t);f=!f?0:f;t=O.formatValue(t,"Edm.String");S=S+";o="+s+"/MenuItems?$filter=type ne 'FL' and substringof("+t+", text) or substringof("+t+", subtitle) or substringof("+t+", url)&$orderby=text,subtitle,url&$inlinecount=allpages&$skip="+f+"&$top="+n;return S;},_getServiceUrl:function(m){var s;var M=this.getView().getModel();if(m==="SAP_MENU"){var S=M.getProperty("/sapMenuServiceUrl");if(S){s=S;}else{s=this.DEFAULT_URL+"/EASY_ACCESS_MENU";}}else if(m==="USER_MENU"){var u=M.getProperty("/userMenuServiceUrl");if(u){s=u;}else{s=this.DEFAULT_URL+"/USER_MENU";}}return s;},_removeWildCards:function(t){return t.replace(/\*/g,"");}});});
sap.ui.predefine('sap/ushell/components/appfinder/EasyAccess.view',["sap/m/SplitApp","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/core/library","sap/ushell/resources"],function(S,A,c,r){"use strict";var V=c.mvc.ViewType;sap.ui.jsview("sap.ushell.components.appfinder.EasyAccess",{BUSY_INDICATOR_DELAY:1000,createContent:function(C){this.oResourceBundle=r.i18n;this.setModel(this.getViewData().easyAccessSystemsModel,"easyAccessSystemsModel");this.setModel(this.getViewData().subHeaderModel,"subHeaderModel");this.setModel(this.getViewData().parentComponent.getModel());this.hierarchyFolders=sap.ui.view({type:V.JS,viewName:"sap.ushell.components.appfinder.HierarchyFolders",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(C),easyAccessSystemsModel:this.getModel("easyAccessSystemsModel"),subHeaderModel:this.getModel("subHeaderModel")}});this.hierarchyFolders.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyFolders.addStyleClass("sapUshellHierarchyFolders");this.hierarchyFolders.addCustomData(new A({key:"role",value:"navigation",writeToDom:true}));this.hierarchyFolders.addCustomData(new A({key:"aria-label",value:this.oResourceBundle.getText("easyAccessListNavigationContainer"),writeToDom:true}));this.hierarchyApps=new sap.ui.view(this.getId()+"hierarchyApps",{type:V.JS,viewName:"sap.ushell.components.appfinder.HierarchyApps",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(C)}});this.hierarchyApps.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyApps.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyApps.addCustomData(new A({key:"role",value:"region",writeToDom:true}));this.hierarchyApps.addCustomData(new A({key:"aria-label",value:this.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));this.splitApp=new S({masterPages:this.hierarchyFolders,detailPages:this.hierarchyApps});this.splitApp.setInitialMaster(this.hierarchyFolders);this.splitApp.setInitialDetail(this.hierarchyApps);return this.splitApp;},getControllerName:function(){return"sap.ushell.components.appfinder.EasyAccess";}});});
sap.ui.predefine('sap/ushell/components/appfinder/GroupListPopover.controller',["sap/ui/thirdparty/jquery","sap/m/MessageToast","sap/ushell/resources","sap/ui/Device","sap/ui/model/Context","sap/ui/model/json/JSONModel"],function(q,M,r,D,C,J){"use strict";sap.ui.controller("sap.ushell.components.appfinder.GroupListPopover",{onInit:function(){var v=this.getView(),g=v.getViewData().groupData;this.oPopoverModel=new J({userGroupList:g});this.oPopoverModel.setSizeLimit(9999);v.oPopover.setModel(this.oPopoverModel);},okButtonHandler:function(e){e.preventDefault();e._bIsStopHandlers=true;var v=this.getView(),u=this.oPopoverModel.getProperty("/userGroupList"),a={addToGroups:[],removeFromGroups:[],newGroups:[],allGroups:u};u.forEach(function(g){if(g.selected===g.initiallySelected){return;}if(g.selected){a.addToGroups.push(g.oGroup);}else{a.removeFromGroups.push(g.oGroup);}});if(v.newGroupInput&&v.newGroupInput.getValue().length){a.newGroups.push(v.newGroupInput.getValue());}v.oPopover.close();v.deferred.resolve(a);},_closeButtonHandler:function(e){e._bIsStopHandlers=true;var v=this.getView();v.oPopover.close();v.deferred.reject();},_createGroupAndSaveTile:function(t,n){var c=sap.ushell.components.getCatalogsManager(),d=q.Deferred(),p=c.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(a){d.resolve(a);});return d;},groupListItemClickHandler:function(o){o.oSource.setSelected(!o.oSource.getSelected());var i=o.oSource.getBindingContextPath(),p=o.oSource.getModel(),s=!!o.oSource.getSelected();this.addRemoveTileFromGroup(i,p,s);},getGroupsBeforeChanges:function(p){var m=this.getView().getViewData().sourceContext.oModel;return m.getProperty(p+"/associatedGroups");},getGroupsAfterChanges:function(){var g=sap.ui.getCore().byId("groupsPopover");return g.getModel().getProperty("/userGroupList");},checkboxClickHandler:function(o){var v=this.getView(),p=v.getViewData().sourceContext.sPath,g=this.getGroupsBeforeChanges(p),G=this.getGroupsAfterChanges(),l=sap.ushell.Container.getService("LaunchPage"),P=o.oSource.getModel(),s=o.getParameter("selected"),a=0,i=0,d=false,b;while(l.isGroupLocked(G[i].oGroup.object)===true){i++;}for(i;i<G.length;i++){var e=false;if(d===true){break;}for(a=0;a<g.length;a++){if(l.getGroupId(G[i].oGroup.object)===g[a]){e=true;if(G[i].selected===false){d=true;b=("/userGroupList/"+i);this.addRemoveTileFromGroup(b,P,s);break;}}}if(G[i].selected===true&&e===false){b=("/userGroupList/"+i);this.addRemoveTileFromGroup(b,P,s);break;}}},addRemoveTileFromGroup:function(i,p,t){var v=this.getView(),c=this.getView().getViewData().catalogController,a=this.getView().getViewData().catalogModel,T=this.getView().getViewData().sourceContext,g=a.getProperty("/groups"),b=g.indexOf(p.getProperty(i).oGroup),G=new C(a,"/groups/"+b),l=sap.ushell.Container.getService("LaunchPage"),s=l.getGroupId(a.getProperty("/groups/"+b).object);if(t){var A=c._addTile(T,G);A.done(function(e){var f=v.getViewData().sourceContext,h=a.getProperty(f+"/associatedGroups");h.push(s);a.setProperty(f+"/associatedGroups",h);});}else{var d=T.getModel().getProperty(T.getPath()).id,R=c._removeTile(d,b);R.done(function(e){var f=v.getViewData().sourceContext,h=a.getProperty(f+"/associatedGroups"),j=h?Array.prototype.indexOf.call(h,s):-1;if(j>=0){h.splice(j,1);}a.setProperty(f+"/associatedGroups",h);});}},_switchGroupsPopoverButtonPress:function(){var g="groupsPopover-popover";if(D.system.phone){g="groupsPopover-dialog";}if(sap.ui.getCore().byId(g).getContent()[0].getId()==="newGroupNameInput"){var u=this.oPopoverModel.getProperty("/userGroupList"),a={addToGroups:[],removeFromGroups:[],newGroups:[],allGroups:u};if(this.getView().newGroupInput.getValue().length){a.newGroups.push(this.getView().newGroupInput.getValue());}this.getView().oPopover.close();this.getView().deferred.resolve(a);}else{this._closeButtonHandler(this);}},_navigateToCreateNewGroupPane:function(){var v=this.getView();if(!v.headBarForNewGroup){v.headBarForNewGroup=v._createHeadBarForNewGroup();}if(!v.newGroupInput){v.newGroupInput=v._createNewGroupInput();}v.oPopover.removeAllContent();v.oPopover.addContent(v.newGroupInput);v.oPopover.setCustomHeader(v.headBarForNewGroup);v.oPopover.setContentHeight("");setTimeout(function(){v.oPopover.getBeginButton().setText(r.i18n.getText("okDialogBtn"));},0);if(v.oPopover.getEndButton()){v.oPopover.getEndButton().setVisible(true);}if(sap.ui.getCore().byId("groupsPopover-popover")&&(sap.ui.getCore().byId("groupsPopover-popover").getContent()[0].getId()==="newGroupNameInput")&&!v.oPopover.getEndButton()){v.oPopover.setEndButton(v._createCancelButton());}setTimeout(function(){v.oPopover.getEndButton().setText(r.i18n.getText("cancelBtn"));},0);if(v.getViewData().singleGroupSelection){this._setFooterVisibility(true);}setTimeout(function(){v.newGroupInput.focus();},0);},setSelectedStart:function(s){this.start=s;},_afterCloseHandler:function(){var v=this.getView(),c=this.getView().getViewData().catalogModel;if(c){var s=c.getProperty(this.getView().getViewData().sourceContext+"/associatedGroups");this.showToastMessage(s,this.start);}v.oGroupsContainer.destroy();if(v.headBarForNewGroup){v.headBarForNewGroup.destroy();}if(v.newGroupInput){v.newGroupInput.destroy();}v.oPopover.destroy();v.destroy();},showToastMessage:function(e,s){var a=0,b=0,f,c,d={};e.forEach(function(g){d[g]=g;});s.forEach(function(g){if(d[g.id]){if(g.selected===false){a++;f=g.title;}}else if(g.selected===true){b++;c=g.title;}});var m=this.getView().getViewData().catalogController.prepareDetailedMessage(this.getView().getViewData().title,a,b,f,c);if(m){M.show(m,{duration:6000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}},_backButtonHandler:function(){var v=this.getView();v.oPopover.removeAllContent();if(v.getViewData().singleGroupSelection){this._setFooterVisibility(false);}if(!D.system.phone){v.oPopover.setContentHeight(v.iPopoverDataSectionHeight+"px");}else{v.oPopover.setContentHeight("100%");}v.oPopover.setVerticalScrolling(true);v.oPopover.setHorizontalScrolling(false);v.oPopover.addContent(v.oGroupsContainer);v.oPopover.setTitle(r.i18n.getText("addTileToGroups_popoverTitle"));v.oPopover.setCustomHeader();v.newGroupInput.setValue("");if(sap.ui.getCore().byId("groupsPopover-popover")&&(sap.ui.getCore().byId("groupsPopover-popover").getContent()[0].getId()!="newGroupNameInput")){v.oPopover.getEndButton().setVisible(false);}setTimeout(function(){v.oPopover.getBeginButton().setText(r.i18n.getText("close"));},0);},_setFooterVisibility:function(v){var f=sap.ui.getCore().byId("groupsPopover-footer");if(f){f.setVisible(v);}}});});
sap.ui.predefine('sap/ushell/components/appfinder/GroupListPopover.view',["sap/ushell/Config","sap/ui/thirdparty/jquery","sap/base/Log","sap/m/ResponsivePopover","sap/ushell/resources","sap/m/ScrollContainer","sap/ui/Device","sap/m/StandardListItem","sap/m/List","sap/m/Input","sap/ui/core/library","sap/m/Button","sap/ui/core/IconPool","sap/m/Bar","sap/m/Label","sap/m/DisplayListItem","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(C,q,L,R,r,S,D,a,b,I,c,B,d,f,g,h,m,F,i){"use strict";var j=m.ListMode;var k=m.ListType;var V=c.ValueState;sap.ui.jsview("sap.ushell.components.appfinder.GroupListPopover",{createContent:function(){this.oPopover=sap.ui.getCore().byId("groupsPopover");if(this.oPopover){return;}this.iPopoverDataSectionHeight=192;this.oGroupsContainer=this._createPopoverContainer(this.iPopoverDataSectionHeight);this.oLaunchPageService=sap.ushell.Container.getService("LaunchPage");this.oPopover=new R({id:"groupsPopover",placement:"Auto",title:r.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:"20rem",beginButton:this._createCloseButton(),content:this.oGroupsContainer,afterClose:this.getController()._afterCloseHandler.bind(this.getController())});this.oPopover.setInitialFocus("newGroupItem");},open:function(o){if(document.body.clientHeight-o.getDomRef().getBoundingClientRect().bottom>=310){this.oPopover.setPlacement("Bottom");}this.oPopover.openBy(o);if(this.getViewData().singleGroupSelection){this.getController()._setFooterVisibility(false);}this.deferred=q.Deferred();return this.deferred.promise();},_createPopoverContainer:function(p){var e=sap.ui.getCore().byId("popoverContainer");if(e){return e;}var n=this._createNewGroupUiElements(),G=this._createPopoverGroupList();e=new S({id:"popoverContainer",horizontal:false,vertical:true,content:[n,G]});if(!D.system.phone){e.setHeight((p-2)+"px");}else{e.setHeight("100%");}return e;},_createNewGroupUiElements:function(){var n=sap.ui.getCore().byId("newGroupItemList");if(n){return n;}var N=new a({id:"newGroupItem",title:r.i18n.getText("newGroup_listItemText"),type:"Navigation",press:this.getController()._navigateToCreateNewGroupPane.bind(this.getController())});n=new b("newGroupItemList",{});if(C.last("/core/extension/enableHelp")){N.addStyleClass("help-id-newGroupItem");}n.addItem(N);n.addEventDelegate({onsapdown:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var l=q("#popoverContainer .sapMListModeMultiSelect li, #popoverContainer .sapMListModeSingleSelectMaster li").eq(0);l.focus();}catch(e){}},onsaptabnext:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var l=q("#closeButton");l.focus();}catch(e){}}});return n;},_createNewGroupInput:function(){var n=sap.ui.getCore().byId("newGroupNameInput");if(n){return n;}n=new I({id:"newGroupNameInput",type:"Text",placeholder:r.i18n.getText("new_group_name")});n.setValueState(V.None);n.setPlaceholder(r.i18n.getText("new_group_name"));n.enabled=true;n.addStyleClass("sapUshellCatalogNewGroupInput");return n;},_createHeadBarForNewGroup:function(){var H=sap.ui.getCore().byId("oHeadBar");if(H){return H;}var o=new B({icon:d.getIconURI("nav-back"),press:this.getController()._backButtonHandler.bind(this.getController()),tooltip:r.i18n.getText("newGroupGoBackBtn_tooltip")});o.addStyleClass("sapUshellCatalogNewGroupBackButton");H=new f("oHeadBar",{contentLeft:[o],contentMiddle:[new g({text:r.i18n.getText("newGroup_popoverTitle")})]});return H;},getControllerName:function(){return"sap.ushell.components.appfinder.GroupListPopover";},_createPopoverGroupList:function(){var l=new h({label:"{oGroup/title}",selected:"{selected}",tooltip:"{oGroup/title}",type:k.Active,press:this.getController().groupListItemClickHandler.bind(this.getController())});var u=[];u.push(new F("oGroup/isGroupLocked",i.EQ,false));if(this.getViewData().enableHideGroups){u.push(new F("oGroup/isGroupVisible",i.EQ,true));}var s=this.getViewData().singleGroupSelection,o=new b({mode:s?j.SingleSelectMaster:j.MultiSelect,items:{path:"/userGroupList",template:l,filters:u}});if(s){o.attachSelect(this.getController().okButtonHandler.bind(this.getController()));}else{o.attachSelectionChange(this.getController().checkboxClickHandler.bind(this.getController()));}o.addEventDelegate({onsapup:function(E){try{E.preventDefault();var n,p=q(":focus");if(p.index()===0){n=q("#newGroupItem");n.focus();E._bIsStopHandlers=true;}}catch(e){L.error("Groups popup Accessibility `up` key failed");}}});return o;},_createOkButton:function(){var o=new B({id:"okButton",press:this.getController().okButtonHandler.bind(this.getController()),text:r.i18n.getText("okBtn")});o.addEventDelegate({onsaptabprevious:function(E){try{E.preventDefault();E._bIsStopHandlers=true;var l=q("#newGroupItem");if(!l.length){l=q("#newGroupNameInput input");}l.focus();}catch(e){L.error("Groups popup Accessibility `shift-tab` key failed");}}});return o;},_createCancelButton:function(){return new B({id:"cancelButton",press:this.getController()._closeButtonHandler.bind(this.getController()),text:r.i18n.getText("cancelBtn")});},_createCloseButton:function(){return sap.ui.getCore().byId("closeButton")||new B({id:"closeButton",press:this.getController()._switchGroupsPopoverButtonPress.bind(this.getController()),text:r.i18n.getText(r.i18n.getText("close"))});}});});
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyApps.controller',["sap/ui/thirdparty/jquery","sap/ui/core/library","sap/m/MessageToast","sap/ushell/resources"],function(q,c,M,r){"use strict";var V=c.mvc.ViewType;sap.ui.controller("sap.ushell.components.appfinder.HierarchyApps",{onInit:function(){var e=this.getView().getViewData().easyAccessSystemsModel;if(e){this.getView().setModel(e,"easyAccessSystems");}},getCrumbsData:function(p,m){var a=p.split("/");a.splice(a.length-2,2);var n=[];while(a.length){var P=a.join("/");var t=m.getProperty(P+"/text");n.unshift({text:t,path:P});a.splice(a.length-2,2);}return n;},_updateAppBoxedWithPinStatuses:function(p){var v=this.getView();if(!p){p=v.layout.getBinding("items").getPath();}var e=v.getModel("easyAccess");var a=e.getProperty(p)?e.getProperty(p):[];var b=sap.ushell.Container.getService("Bookmark");var d=a.map(function(f){return b.countBookmarks(f.url).then(function(g){f.bookmarkCount=g;return f;});});q.when.apply(q,d).then(function(){var a=Array.prototype.slice.call(arguments);e.setProperty(p,a);});},updatePageBindings:function(p){this.getView().layout.bindAggregation("items","easyAccess>"+p+"/apps",this.getView().oItemTemplate);this._updateAppBoxedWithPinStatuses(p+"/apps");this.getView().breadcrumbs.bindProperty("currentLocationText","easyAccess>"+p+"/text");var a=this.getCrumbsData(p,this.getView().getModel("easyAccess"));this.getView().crumbsModel.setProperty("/crumbs",a);var n=this.getView().getModel("easyAccess").getProperty(p+"/apps");this.getView().updateResultSetMessage(n.length,false);},onAppBoxPressed:function(e){if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}var u=e.getSource().getProperty("url");if(u&&u.indexOf("#")===0){hasher.setHash(u);}},_handleSuccessMessage:function(a,p){var m;var n=p.addToGroups?p.addToGroups.length:0;var b=p.newGroups?p.newGroups.length:0;var t=n+b;if(t===1){var g;if(n===1){g=p.addToGroups[0].title;}else{g=p.newGroups[0];}m=r.i18n.getText("appAddedToSingleGroup",[a.text,g]);}else{m=r.i18n.getText("appAddedToSeveralGroups",[a.text,t]);}if(t>0){M.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}return m;},_prepareErrorMessage:function(e,a){var g,A,f,n=0,C=false,m;for(var i in e){g=e[i].group;A=e[i].action;if(A==="addBookmark_ToExistingGroup"){n++;if(n===1){f=g.title;}}else if(A==="addBookmark_ToNewGroup"){n++;if(n===1){f=g;}}else{C=true;}}if(C){if(e.length===1){m=r.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=r.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length===1){m=r.i18n.getText({messageId:"fail_app_operation_add_to_group",parameters:[a,f]});}else{m=r.i18n.getText({messageId:"fail_app_operation_add_to_several_groups",parameters:[a]});}return m;},_handleBookmarkAppPopoverResponse:function(a,p){var b=[];p.newGroups.forEach(function(g){b.push(this._createGroupAndAddBookmark(g,a));}.bind(this));p.addToGroups.forEach(function(g){b.push(this._addBookmark(g,a));}.bind(this));q.when.apply(q,b).then(function(){var d=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(a,p,d);}.bind(this));},_handlePopoverGroupsActionPromises:function(a,p,b){var e=b.filter(function(f,i,b){return!f.status;});if(e.length){var E=this._prepareErrorMessage(e,a.text);var d=sap.ushell.components.getCatalogsManager();d.notifyOnActionFailure(E.messageId,E.parameters);return;}this._updateAppBoxedWithPinStatuses();this._handleSuccessMessage(a,p);},_createGroupAndAddBookmark:function(n,a){var b=sap.ushell.components.getCatalogsManager();var d=q.Deferred(),R={};var e=b.createGroup(n);e.done(function(f){var g=this._addBookmark(f.getObject(),a,true);g.done(function(h){d.resolve(h);}).fail(function(){R={group:n,status:0,action:"addBookmark_ToNewGroup"};d.resolve(R);});}.bind(this)).fail(function(){R={group:n,status:0,action:"addBookmark_NewGroupCreation"};d.resolve(R);});return d.promise();},_addBookmark:function(g,a,i){var b=sap.ushell.Container.getService("Bookmark");var d=q.Deferred(),R={};var e=b.addBookmark({url:a.url,title:a.text,subtitle:a.subtitle,icon:a.icon},g.object);var f=i?"addBookmark_ToNewGroup":"addBookmark_ToExistingGroup";e.done(function(){R={group:g,status:1,action:f};d.resolve(R);}).fail(function(){R={group:g,status:0,action:f};d.resolve(R);});return d.promise();},showSaveAppPopover:function(e){var m=this.getView().getModel();var a=e.oSource.getParent().getBinding("title").getContext().getObject();if(m.getProperty("/groupContext").path){var g=m.getProperty("/groupContext").path;var G=m.getProperty(g);var b={newGroups:[],addToGroups:[G]};this._handleBookmarkAppPopoverResponse(a,b);return;}var d=m.getProperty("/groups").map(function(h){return{selected:false,initiallySelected:false,oGroup:h};});var p=new sap.ui.view({type:V.JS,viewName:"sap.ushell.components.appfinder.GroupListPopover",viewData:{groupData:d,enableHideGroups:m.getProperty("/enableHideGroups"),enableHelp:m.getProperty("/enableHelp"),singleGroupSelection:true}});var f=p.open(e.oSource);f.then(this._handleBookmarkAppPopoverResponse.bind(this,a));},resultTextFormatter:function(s,t){var R=r.i18n;if(s){var S=s.systemName?s.systemName:s.systemId;var a="";if(t){a=R.getText("search_easy_access_results",[t,S]);}return a;}return"";},showMoreResultsVisibilityFormatter:function(a,t){if(a&&a.length<t){return true;}return false;},showMoreResultsTextFormatter:function(a,t){if(!a||!t){return"";}var b=a.length;return r.i18n.getText("EasyAccessSearchResults_ShowMoreResults",[b,t]);}});},true);
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyApps.view',["sap/ushell/ui/appfinder/AppBox","sap/ushell/ui/appfinder/PinButton","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/FlexBox","sap/m/library","sap/m/MessagePage","sap/ui/model/json/JSONModel","sap/m/Link","sap/m/Breadcrumbs","sap/m/Text","sap/m/Button"],function(A,P,r,a,F,m,M,J,L,B,T,b){"use strict";var c=m.ButtonType;var d=m.FlexWrap;sap.ui.jsview("sap.ushell.components.appfinder.HierarchyApps",{createContent:function(C){this.oController=C;function g(G,e,s,h,i){var R=r.i18n,t;if(s){var j=G?Array.prototype.indexOf.call(G,h):-1;var k=j!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";t=R.getText(k,i);}else{t=e?R.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):R.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip");}return t;}var p=new P({icon:"sap-icon://pushpin-off",selected:{path:"easyAccess>bookmarkCount",formatter:function(e){return(!!e);}},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(G,e,s,h,i){return g(G,e,s,h,i);}},press:C.showSaveAppPopover.bind(C)});p.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}));p.addStyleClass("sapUshellPinButton");this.oItemTemplate=new A({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:p,tabindex:{path:"easyAccess>text"},press:[C.onAppBoxPressed,C]});this.oItemTemplate.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new F(this.getId()+"_hierarchyAppsLayout",{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:d.Wrap});this.layout.addDelegate({onAfterRendering:function(){var i=this.getItems();var u=function(e){if(e.getKey()==="tabindex"){e.setValue("0");}};if(i.length){i[0].getCustomData().forEach(u);i[0].getPinButton().getCustomData().forEach(u);}}.bind(this.layout)});this.oMessagePage=new M({visible:false,showHeader:false,text:r.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""});var f=[];if(this.getViewData()&&this.getViewData().navigateHierarchy){this.crumbsModel=new J({crumbs:[]});this.linkTemplate=new L({text:"{crumbs>text}",press:function(e){var h=e.oSource.getBinding("text").getContext().getObject();this.getViewData().navigateHierarchy(h.path,false);}.bind(this)});this.breadcrumbs=new B({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");f.push(this.breadcrumbs);}else{this.resultText=new T({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:C.resultTextFormatter.bind(C)}}).addStyleClass("sapUshellEasyAccessSearchResultText");this.resultText.addCustomData(new a({key:"role",value:"heading",writeToDom:true}));this.resultText.addCustomData(new a({key:"aria-level",value:"3",writeToDom:true}));f.push(this.resultText);this.showMoreResultsLink=new b({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:C.showMoreResultsTextFormatter.bind(C)},press:this.getViewData().getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:C.showMoreResultsVisibilityFormatter.bind(C)},type:c.Transparent});}f.push(this.oMessagePage);f.push(this.layout);if(this.showMoreResultsLink){f.push(this.showMoreResultsLink);}return f;},updateResultSetMessage:function(i,I){var e;if(I){e="noFilteredItems";}else{e="EasyAccessMenu_NoAppsToDisplayMessagePage_Text";}if(i){if(I){this.resultText.updateProperty("text");this.resultText.setVisible(true);}this.layout.setVisible(true);this.oMessagePage.setVisible(false);}else{if(I){this.resultText.setVisible(false);}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var E=r.i18n.getText(e);this.oMessagePage.setText(E);}},setShowMoreResultsBusy:function(e){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(e);}},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyApps";}});},true);
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyFolders.controller',["sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/m/StandardListItem","sap/m/SelectDialog","sap/ui/core/Component"],function(L,q,F,a,S,b,C){"use strict";sap.ui.controller("sap.ushell.components.appfinder.HierarchyFolders",{onInit:function(){this.oDialog=null;this.getView().setModel(this.getView().getViewData().easyAccessSystemsModel,"easyAccessSystems");this.getView().setModel(this.getView().getViewData().subHeaderModel,"subHeaderModel");this.getSelectedSystem().then(function(s){if(s){this.setSystemSelected(s);}else{this.setSystemSelected(undefined);this.onSystemSelectionPress();}}.bind(this),function(){this.setSystemSelected(undefined);this.onSystemSelectionPress();});},onExit:function(){if(this.oDialog){this.destroyDialog();}},onAfterRendering:function(){var j=q("#"+this.getView().getId());j.on("click",function(){this.exitSearchMode();}.bind(this));},getPersonalizer:function(){if(this.oPersonalizer){return this.oPersonalizer;}var p=sap.ushell.Container.getService("Personalization"),c=C.getOwnerComponentFor(this),s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true},P={container:"appfinder.HierarchyFolders",item:"lastSelectedSystem"};this.oPersonalizer=p.getPersonalizer(P,s,c);return this.oPersonalizer;},getSelectedSystem:function(){var d=new q.Deferred(),s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length===1){var e=s[0];this.setSystemSelectedInPersonalization(e);d.resolve(e);}else{this.getSelectedSystemInPersonalization().then(function(p){if(p){var c=false;for(var i=0;i<s.length;i++){if((s[i].systemName&&s[i].systemName===p.systemName)||(s[i].systemId===p.systemId)){c=true;d.resolve(p);}}if(!c){d.resolve();this.setSystemSelectedInPersonalization();}}else{d.resolve();}}.bind(this));}return d.promise();},setSystemSelected:function(s){this.getView().getModel("easyAccessSystems").setProperty("/systemSelected",s);this.setSystemSelectedInPersonalization(s);},getSelectedSystemInPersonalization:function(){var d=new q.Deferred();this.getPersonalizer().getPersData().then(function(p){if(p){d.resolve(p);}else{d.resolve();}},function(e){L.error("Failed to get selected system from the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders");d.reject();});return d.promise();},setSystemSelectedInPersonalization:function(s){this.getPersonalizer().setPersData(s).fail(function(e){L.error("Failed to save selected system in the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders");});},onSystemSelectionPress:function(){var s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length<=1){return;}var d=this.createDialog();d.open();},createDialog:function(){var t=this;if(!this.oDialog){this.oDialog=new b({id:"systemSelectionDialog",title:t.getView().translationBundle.getText("easyAccessSelectSystemDialogTitle"),multiSelect:false,contentHeight:"20rem",items:{path:"/systemsList",template:new S({adaptTitleSize:false,title:{parts:["systemName","systemId"],formatter:t.titleFormatter},description:{parts:["systemName","systemId"],formatter:t.descriptionFormatter},selected:{parts:["systemName","systemId"],formatter:t.selectedFormatter.bind(this)}})},confirm:t.systemConfirmHandler.bind(t),search:t.systemSearchHandler.bind(t),cancel:t.destroyDialog.bind(t)});this.oDialog.setModel(this.getView().getModel("easyAccessSystems"));}return this.oDialog;},destroyDialog:function(){this.oDialog.destroyItems();this.oDialog.destroy();this.oDialog=null;},systemConfirmHandler:function(e){var i=e.getParameters().selectedItem,s=i.getBindingContext().getObject();this.setSystemSelected(s);this.destroyDialog();},systemSearchHandler:function(e){var v=e.getParameter("value"),f=new sap.ui.model.Filter("systemName",F.Contains,v),o=new sap.ui.model.Filter("systemId",F.Contains,v),s=new a({filters:[o,f],and:false}),B=e.getSource().getBinding("items");B.filter(s);},titleFormatter:function(s,c){return s||c;},descriptionFormatter:function(s,c){if(s){return c;}return null;},selectedFormatter:function(s,c){var u=this.getView().getModel("easyAccessSystems").getProperty("/systemSelected");if(!u){return false;}if(s){return(u.systemName===s&&u.systemId===c);}return(u.systemId===c);},systemSelectorTextFormatter:function(s){if(s){if(s.systemName){return s.systemName;}return s.systemId;}return this.getView().translationBundle.getText("easyAccessSelectSystemTextWithoutSystem");},exitSearchMode:function(){var s=this.getView().getModel("subHeaderModel");s.setProperty("/search/searchMode",false);s.refresh(true);}});},true);
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyFolders.view',["sap/m/Button","sap/m/Label","sap/m/Bar","sap/m/Page","sap/m/library","sap/m/List","sap/m/StandardListItem","sap/m/Text","sap/ushell/resources"],function(B,L,a,P,m,b,S,T,r){"use strict";var c=m.ButtonType;var d=m.ListSeparators;sap.ui.jsview("sap.ushell.components.appfinder.HierarchyFolders",{createContent:function(C){var t=this;this.translationBundle=r.i18n;this.treePath="";this.lastFocusID=document.URL.substring(document.URL.lastIndexOf("&/")+2)+"-button";this.systemSelectorText=new T({text:{path:"easyAccessSystemsModel>/systemSelected",formatter:C.systemSelectorTextFormatter.bind(C)}});this.oItemTemplate=new S({title:"{easyAccess>text}",type:"Navigation",press:function(){var e=t.pageMenu.$().find(".sapMBarLeft button");if(!e.length){t.lastFocusID=document.activeElement.getAttribute("id");}var p=this.getBindingContextPath();t.getViewData().navigateHierarchy(p,true);}});this.oList=new b({showSeparators:d.None,items:{path:"easyAccess>"+this.treePath+"/folders",template:this.oItemTemplate},updateFinished:function(){var l=this.getItems();t.finishEasyAccessAnimation(true);l.forEach(function(o){o.onsapspace=o.onsapenter;});},noDataText:{path:"easyAccessSystemsModel>/systemSelected",formatter:function(s){if(s){return t.translationBundle.getText("easyAccessFolderWithNoItems");}}}});this.pageMenu=new P({showNavButton:false,enableScrolling:true,headerContent:new a({contentLeft:[new L({text:{parts:["easyAccessSystemsModel>/systemSelected"],formatter:C.systemSelectorTextFormatter.bind(C)}})],contentRight:[new B({text:this.translationBundle.getText("easyAccessSelectSystemDialogTitle"),type:c.Transparent,visible:{path:"easyAccessSystemsModel>/systemsList",formatter:function(s){return s.length>1;}},press:[C.onSystemSelectionPress,C]})]}).addStyleClass("sapUshellEasyAccessMasterPageHeader"),content:this.oList});this.pageMenu.attachNavButtonPress(function(){var p=this.treePath.split("/");var n=p.slice(0,p.length-2);this.getViewData().navigateHierarchy(n.join("/"),false);}.bind(this));return this.pageMenu;},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyFolders";},finishEasyAccessAnimation:function(){if(!this.jqFolderClone){return;}if(this.forwardAnimation){this.pageMenu.$().addClass("forwardToViewAnimation");this.jqFolderClone.addClass("forwardOutOfViewAnimation");}else{this.pageMenu.$().addClass("backToViewAnimation");this.jqFolderClone.addClass("backOutOfViewAnimation");}this.jqFolderClone.on("animationend",function(){this.pageMenu.$().removeClass("forwardToViewAnimation backToViewAnimation");var e=this.pageMenu.$().find(".sapMBarLeft button");if(e.length){e.focus();}else{setTimeout(function(){document.querySelector("#"+this.lastFocusID).focus();}.bind(this));}if(this.jqFolderClone){this.jqFolderClone.remove();}}.bind(this));},prepareEasyAccessAnimation:function(f){this.forwardAnimation=f;this.jqFolderClone=this.pageMenu.$().clone().removeAttr("data-sap-ui").css("z-index","1");this.jqFolderClone.find("*").removeAttr("id");this.pageMenu.$().parent().append(this.jqFolderClone);},updatePageBindings:function(p,f){var s=p.split("/").length>2;this.treePath=p;this.pageMenu.setShowNavButton(s);this.pageMenu.setShowSubHeader(!s);this.prepareEasyAccessAnimation(f);this.oList.bindItems("easyAccess>"+p+"/folders",this.oItemTemplate);}});},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/API',["sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","sap/ushell/ui/shell/ToolAreaItem"],function(U,q,L,O,A,S,N,T){"use strict";
var a=U.extend("sap.ushell.components.applicationIntegration.API",{metadata:{version:"1.74.0",dependencies:{version:"1.74.0",libs:["sap.ui.core","sap.m"],components:[]}}});
a.prototype.createContent=function(){this.oShellModel=A;};
a.prototype.createExtendedShellState=function(s,c){return this.oShellModel.createExtendedShellState(s,c);};
a.prototype.applyExtendedShellState=function(s,c){this.oShellModel.applyExtendedShellState(s,c);};
a.prototype.showLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.oShellModel.addLeftPaneContent([i],c,s);}else{this.oShellModel.addLeftPaneContent(i,c,s);}};
a.prototype.showHeaderItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addHeaderItem([i],c,s);}else{this.oShellModel.addHeaderItem(i,c,s);}};
a.prototype.showRightFloatingContainerItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addRightFloatingContainerItem([i],c,s);}else{this.oShellModel.addRightFloatingContainerItem(i,c,s);}};
a.prototype.showRightFloatingContainer=function(s){this.oShellModel.showRightFloatingContainer(s);};
a.prototype.showToolAreaItem=function(i,c,s){this.oShellModel.addToolAreaItem(i,c,s);};
a.prototype.showActionButton=function(i,c,s){var b=[],d=[],B;if(typeof i==="string"){i=[i];}b=i.filter(function(I){B=sap.ui.getCore().byId(I);return B instanceof sap.m.Button&&!(B instanceof sap.ushell.ui.launchpad.ActionItem);});d=i.filter(function(I){B=sap.ui.getCore().byId(I);return B instanceof sap.ushell.ui.launchpad.ActionItem;});if(b.length){this.convertButtonsToActions(b,c,s);}if(d.length){this.oShellModel.addActionButton(d,c,s);}};
a.prototype.showFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.addFloatingActionButton([i],c,s);}else{this.oShellModel.addFloatingActionButton(i,c,s);}};
a.prototype.showHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addHeaderEndItem([i],c,s);}else{this.oShellModel.addHeaderEndItem(i,c,s);}};
a.prototype.setHeaderVisibility=function(v,c,s){this.oShellModel.setHeaderVisibility(v,c,s);};
a.prototype.showSubHeader=function(i,c,s){if(typeof i==="string"){this.oShellModel.addSubHeader([i],c,s);}else{this.oShellModel.addSubHeader(i,c,s);}};
a.prototype.showSignOutItem=function(c,s){this.oShellModel.showSignOutButton(c,s);};
a.prototype.showSettingsItem=function(c,s){this.oShellModel.showSettingsButton(c,s);};
a.prototype.hideHeaderItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],c,s);}else{this.oShellModel.removeHeaderItem(i,c,s);}};
a.prototype.removeToolAreaItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeToolAreaItem([i],c,s);}else{this.oShellModel.removeToolAreaItem(i,c,s);}};
a.prototype.removeRightFloatingContainerItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],c,s);}else{this.oShellModel.removeRightFloatingContainerItem(i,c,s);}};
a.prototype.hideActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeActionButton([i],c,s);}else{this.oShellModel.removeActionButton(i,c,s);}};
a.prototype.hideLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],c,s);}else{this.oShellModel.removeLeftPaneContent(i,c,s);}};
a.prototype.hideFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],c,s);}else{this.oShellModel.removeFloatingActionButton(i,c,s);}};
a.prototype.hideHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],c,s);}else{this.oShellModel.removeHeaderEndItem(i,c,s);}};
a.prototype.hideSubHeader=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],c,s);}else{this.oShellModel.removeSubHeader(i,c,s);}};
a.prototype.addShellSubHeader=function(p){var d=new q.Deferred(),t=this,c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(i){this.showSubHeader(C.getId(),e,s);}d.resolve(C);}}if(b){c=b.replace(/\./g,"/");sap.ui.require([c],function(f){C=new f(o);if(i){t.showSubHeader(C.getId(),e,s);t.oShellModel.addElementToManagedQueue(C);}d.resolve(C);});}else{L.warning("You must specify control type in order to create it");}return d.promise();};
a.prototype.addSubHeader=function(c,C,i,b,s){var d=c.replace(/\./g,"/"),o=sap.ui.require(d),e,f,r=false;if(o){r=true;}else if(!O.get(c)){q.sap.require(c);}f=function(C){if(c){if(r){return new o(C);}var g=O.get(c);return new g(C);}L.warning("You must specify control type in order to create it");};e=this.createItem(C,b,s,f);if(i){this.showSubHeader(e.getId(),b,s);}return e;};
a.prototype.addUserAction=function(p){var d=new q.Deferred(),t=this,m=this.oShellModel.getModelToUpdate(),c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates,n;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){d.resolve(C);}}if(b){if(b==="sap.m.Button"){b="sap.ushell.ui.launchpad.ActionItem";}c=b.replace(/\./g,"/");sap.ui.require([c],function(f){var g=t.oShellModel.getModelToUpdate();t.oShellModel.setModelToUpdate(m,true);var h;if(o){if(o.id){h=o.id;}}C=sap.ui.getCore().byId(h)||new f(o);if(!C.getActionType){C=new f(o);}if(i){t.showActionButton(C.getId(),e,s);t.oShellModel.addElementToManagedQueue(C);}t.oShellModel.setModelToUpdate(g,false);d.resolve(C);});}else{n="You must specify control type in order to create it";L.warning(n);d.reject(n);}return d.promise();};
a.prototype.addActionButton=function(c,C,i,b,s){var d,o,e,f,r=false;if(c==="sap.m.Button"){c="sap.ushell.ui.launchpad.ActionItem";}d=c.replace(/\./g,"/");o=sap.ui.require(d);if(o){r=true;}else if(!O.get(c)){q.sap.require(c);}f=function(C){if(c){if(r){return new o(C);}var g=O.get(c);return new g(C);}L.warning("You must specify control type in order to create it");};e=this.createItem(C,b,s,f);if(i){this.showActionButton(e.getId(),b,s);}return e;};
a.prototype.addFloatingButton=function(p){var d=new q.Deferred(),t=this,c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(i){t.oShellModel.addElementToManagedQueue(C);t.showFloatingActionButton(oItem.getId(),e,s);}d.resolve(C);}}if(b){c=b.replace(/\./g,"/");}else{c="sap/m/Button";}sap.ui.require([c],function(f){C=new f(o);if(i){this.showFloatingActionButton(oItem.getId(),e,s);}d.resolve(C);});return d.promise();};
a.prototype.addFloatingActionButton=function(c,C,i,b,s){var d,o,e,f,r=false;if(!c){c="sap.m.Button";}d=c.replace(/\./g,"/");o=sap.ui.require(d);if(o){r=true;}else if(!O.get(c)){q.sap.require(c);}f=function(C){if(c){if(r){return new o(C);}var g=O.get(c);return new g(C);}L.warning("You must specify control type in order to create it");};e=this.createItem(C,b,s,f);if(i){this.showFloatingActionButton(e.getId(),b,s);}return e;};
a.prototype.addSidePaneContent=function(p){var d=new q.Deferred(),t=this,c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){d.resolve(C);}}if(b){c=b.replace(/\./g,"/");sap.ui.require([c],function(f){C=new f(o);if(i){t.oShellModel.addElementToManagedQueue(C);t.showLeftPaneContent(oItem.getId(),e,s);}d.resolve(C);});}else{L.warning("You must specify control type in order to create it");}return d.promise();};
a.prototype.addLeftPaneContent=function(c,C,i,b,s){var d=c.replace(/\./g,"/"),o=sap.ui.require(d),e,f,r;if(o){r=true;}else if(!O.get(c)){q.sap.require(c);}f=function(C){if(c){if(r){return new o(C);}var g=O.get(c);return new g(C);}L.warning("You must specify control type in order to create it");};e=this.createItem(C,b,s,f);if(i){this.showLeftPaneContent(e.getId(),b,s);}return e;};
a.prototype.addHeaderItem=function(c,C,i,b,s){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){C=arguments[0];i=arguments[1];b=arguments[2];s=arguments[3];}else{L.warning("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var p=C;p.showSeparator=false;var f=function(C){return new S(C);},I=this.createItem(p,b,s,f);if(i){this.showHeaderItem(I.getId(),b,s);}return I;};
a.prototype.addRightFloatingContainerItem=function(c,i,C,s){var f=function(c){return new N(c);},I=this.createItem(c,C,s,f);if(i){this.showRightFloatingContainerItem(I.getId(),C,s);}return I;};
a.prototype.addToolAreaItem=function(c,i,C,s){var f=function(c){return new T(c);},I=this.createItem(c,C,s,f);if(i){this.showToolAreaItem(I.getId(),C,s);}return I;};
a.prototype.addHeaderEndItem=function(c,C,i,b,s){var p=C;p.showSeparator=false;var f=function(C){return new S(C);},I=this.createItem(p,b,s,f);if(i){this.showHeaderEndItem(I.getId(),b,s);}return I;};
a.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};
a.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};
a.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};
a.prototype.LaunchpadState={App:"app",Home:"home"};
a.prototype.createInspection=function(s,c,C,b){this.oShellModel.createInspection(s,c,C,b);};
a.prototype.createTriggers=function(t,c,s){this.oShellModel.createTriggers(t,c,s);};
a.prototype.convertButtonsToActions=function(i,c,s){var p={},b,t=this;i.forEach(function(I){b=sap.ui.getCore().byId(I);p.id=b.getId();p.text=b.getText();p.icon=b.getIcon();p.tooltip=b.getTooltip();p.enabled=b.getEnabled();p.visible=b.getVisible();if(b.mEventRegistry&&b.mEventRegistry.press){p.press=b.mEventRegistry.press[0].fFunction;}b.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,c,s);});};
a.prototype.createItem=function(c,C,s,f){var i;if(c&&c.id){i=sap.ui.getCore().byId(c.id);}if(!i){i=f(c);if(C){this.oShellModel.addElementToManagedQueue(i);}}return i;};
a.prototype.addEntryInShellStates=function(n,e,f,r,s){this.oShellModel.addEntryInShellStates(n,e,f,r,s);};
a.prototype.removeCustomItems=function(s,i,c,b){if(typeof i==="string"){this.oShellModel.removeCustomItems(s,[i],c,b);}else{this.oShellModel.removeCustomItems(s,i,c,b);}};
a.prototype.addCustomItems=function(s,i,c,b){if(typeof i==="string"){this.oShellModel.addCustomItems(s,[i],c,b);}else{this.oShellModel.addCustomItems(s,i,c,b);}};
return a;});
sap.ui.predefine('sap/ushell/components/applicationIntegration/AppLifeCycle',["sap/ushell/components/applicationIntegration/elements/model","sap/ushell/components/applicationIntegration/Storage","sap/ushell/components/applicationIntegration/application/BlueBoxHandler","sap/ushell/ui5service/ShellUIService","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ushell/components/applicationIntegration/configuration/AppMeta","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ui/Device","sap/ushell/Config","sap/ushell/ui5service/AppIsolationService","sap/ushell/ApplicationType","sap/ushell/components/applicationIntegration/DelegationBootstrap","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log"],function(E,S,B,a,A,R,b,c,d,u,D,C,e,f,g,U,q,L){"use strict";
function h(){var v,i=["URL"],r,s,j,I={},o,k=false,l={},m={home:{embedded:"embedded-home",headerless:"headerless-home",merged:"blank-home",blank:"blank-home"},app:{minimal:"minimal",app:"app",standalone:"standalone",embedded:"embedded",headerless:"headerless",merged:"merged",home:"home",blank:"blank",lean:"lean"}},n,G=[],p={},t=false;this.shellElements=function(){return b;};this.service=function(){return R;};this.isCurrentApp=function(w){return(l.appId===w);};this.isAppWithSimilarShellHashInCache=function(w,F){var x=S.get(w);if(x){if(x.shellHash===F){return true;}return false;}return false;};this.isAppInCache=function(w){return!!S.get(w);};this.normalizeAppId=function(w){var x="-component",y=w.endsWith(x);if(y){return w.substring(0,w.length-x.length);}return w;};this.onComponentCreated=function(w,x,y){var z=y.component,F=this.normalizeAppId(z.getId());if(this.isAppInCache(F)){S.get(F).app=z;this.active(F);}else{l.app=z;if(z.active){z.active();}}};this.onGetMe=function(w,x,y){y.AppLifeCycle=this;};this.store=function(w){var x=S.get(w);if(x){A.store(x.app);R.store(x.service);c.store(x.meta);}};this.destroy=function(w,F){var x=S.get(w),y;function z(){A.destroy(F);b.destroy(F);c.destroy(F);}this.removeControl(w);if(x){y=B.getStateFul(F.getUrl());if(y&&B.isStatefulContainerSupported(y)){var H=B.getHandler();H.destroy(y,w);}else{x.container.destroy();B.deleteStateFul(F.getUrl());}S.remove(w);}else{var P=F&&F.sendBeforeAppCloseEvent&&F.sendBeforeAppCloseEvent();if(P===undefined){z();}else{P.then(function(){z();},function(J){z();q.sap.log.error("FLP got a failed response from the iframe for the 'sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent' message sent",J,"sap.ushell.components.applicationIntegration.AppLifeCycle.js");});}}};this.restore=function(w){var x=S.get(w);if(x){A.restore(x.app);R.restore(x.service);c.restore(x.meta);}};this.active=function(w){var x=S.get(w);if(x){A.active(x.app);}};this.handleExitStateful=function(F,w){var x,H=B.getHandler();if(S.get(F)){x=B.getStorageKey(w);if(x&&B.isKeepAliveSupported(w)){return H.store(w,x);}return Promise.resolve();}return H.destroy(w);};this.handleExitApplication=function(F,w,x){var y;if(F&&w){if(w.getUrl()&&B.isStatefulContainerSupported(B.getStateFul(w.getUrl()))){this.handleExitStateful(F,w);}else if(S.get(F)){this.store(F);}else if((w.getIsStateful&&w.getIsStateful())||(w.getApplicationType&&this.applicationIsStatefulType(w.getApplicationType()))){if(x){w.postMessageRequest("sap.gui.triggerCloseSessionImmediately");}}else{y=i.indexOf(w.getApplicationType)>=0;if(this.isAppOfTypeCached(F,y)===false){this.destroy(F,w);}}if(F.indexOf("Shell-appfinder-component")>0){sap.ui.getCore().getEventBus().publish("sap.ushell","appFinderAfterNavigate");}}};this.onAfterNavigate=function(F,w,T,x){var y=T.indexOf("Shell-appfinder-component")>0||T.indexOf("Shell-home-component")>0;this.handleExitApplication(F,w,y);if(T){if(S.get(T)){this.restore(T);}else{}}};this.storeApp=function(w,x,T,F){if(!this.isAppInCache(w)){S.set(w,{service:R.create(),shellHash:F,appId:w,stt:"loading",appRelatedElements:b.getAppRelatedElement(),container:x,meta:d.getMetadata(T),app:undefined});I[F]=w;B.setStorageKey(x,w);return true;}return false;};this.restoreApp=function(w){if(this.isAppInCache(w)){l=S.get(w);if(B.getStorageKey(l.container)){B.setStorageKey(l.container,w);}}};this.isAppOfTypeCached=function(w,x){if(!k&&w.indexOf(r)!==-1){return true;}if(!k&&w.indexOf("Shell-appfinder")!==-1){return true;}if(new U(window.location.href).get("sap-keep-alive")=="true"&&x){return true;}return false;};h.prototype._getURLParsing=function(){if(!this._oURLParsing){this._oURLParsing=sap.ushell.Container.getService("URLParsing");}return this._oURLParsing;};this.calculateAppType=function(T){if(T.applicationType==="URL"&&T.additionalInformation&&T.additionalInformation.startsWith("SAPUI5.Component=")){return"SAPUI5";}return T.applicationType;};this.getStatefulCapabilities=function(T){if(T.appCapabilities&&T.appCapabilities&&T.appCapabilities.statefulContainer){return T.appCapabilities.statefulContainer;}return undefined;};this.isNotifyInnerAppRouteChangeEnabled=function(T){if(T.appCapabilities&&T.appCapabilities.notifyInnerAppRouteChange){return true;}return false;};this.isStatefulCapabilityEnabled=function(T){var w=this.getStatefulCapabilities(T);if(w&&(w.enabled===true||w===true)){return true;}return false;};this.isGUICapabilityEnabled=function(T){var w=this.getStatefulCapabilities(T);if(w&&w.protocol==="GUI"){return true;}return false;};this.isFLPCapabilityEnabled=function(T){return!this.isGUICapabilityEnabled(T)&&this.isStatefulCapabilityEnabled(T);};this.isGUIStatefulCapabilityEnabled=function(T){return this.isGUICapabilityEnabled(T)&&this.isStatefulCapabilityEnabled(T);};this.openApp=function(w,T,x,F){var y,z,H=i.indexOf(T.applicationType)>=0;var J="application"+w;y=B.getStateFul(T.url);if(y&&B.isStatefulContainerSupported(y)){if(this.isAppOfTypeCached(J,H)||this.isCachedEnabledAsAppParameter(x,T)){if(!this.isAppInCache(J)){this.storeApp(J,y,T,F);}this.restoreApp(J);}else{l={appId:J,stt:"loading",container:y,meta:d.getMetadata(T),app:undefined};}}else if(this.isAppOfTypeCached(J,H)||this.isCachedEnabledAsAppParameter(x,T)){if(!this.isAppInCache(J)){y=this.createApplicationContainer(w,T);this.storeApp(J,y,T,F);B.set(T.url,y);}this.restoreApp(J);}else if(this.applicationIsStatefulType(T.applicationType)||B.isCapByTarget(T,"isGUIStateful")){y=this.getStatefulContainer(T.applicationType);if(!y){y=this.createApplicationContainer(w,T);this.setStatefulContainer(T.applicationType,y);y.setIsStateful(true);}l={appId:J,stt:"loading",container:y,meta:d.getMetadata(T),app:undefined};}else{if(y){z=x.semanticObject+"-"+x.action;this.removeApplication(z);}y=this.createApplicationContainer(w,T);B.set(T.url,y);if(B.isCapUT(y,"isFLP")){B.setCapabilities(y,[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}]);}l={appId:J,stt:"loading",container:y,meta:d.getMetadata(T),app:undefined};}};this.getAppMeta=function(){return c;};this.evict=function(w){var x,y=w.value,z=w.key;this.removeControl(z);if(y.container.getUrl&&y.container.getUrl()){x=B.getStateFul(y.container.getUrl());}if(x){var H=B.getHandler();H.destroy(x,z);}else{y.container.destroy();}};this.init=function(w,x,y,z,F,H,J){var K=this,M;if(D.system.phone){M=10;if(J&&J.limit&&J.limit.phone){M=J.limit.phone;}}else if(D.system.tablet){M=10;if(J&&J.limit&&J.limit.tablet){M=J.limit.tablet;}}else if(D.system.desktop){M=15;if(J&&J.limit&&J.limit.desktop){M=J.limit.desktop;}}else{M=10;}g.init(this.registerShellCommunicationHandler,this.postMessageToIframeApp);g.bootstrap();s=new a({scopeObject:F.ownerComponent,scopeType:"component"});o=new e({scopeObject:F.ownerComponent,scopeType:"component"});j=w;v=x;r=y;c.init(r);k=z;B.init({oShellUIService:s,oAppIsolationService:o},J,this);S.init(M,function(O){this.evict(O);}.bind(this));this.registerShellCommunicationHandler({"sap.ushell.services.appLifeCycle":{oRequestCalls:{"create":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(O){L.info("sap.ushell.services.appLifeCycle.create:"+O);}).catch(function(O){L.error("Error: sap.ushell.services.appLifeCycle.create:"+O);});}},"destroy":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(O){L.info("sap.ushell.services.appLifeCycle.destroy:"+O);}).catch(function(O){L.error("Error: sap.ushell.services.appLifeCycle.destroy:"+O);});}},"store":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(O){L.info("sap.ushell.services.appLifeCycle.store:"+O);}).catch(function(O){L.error("Error: sap.ushell.services.appLifeCycle.store:"+O);});}},"restore":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(O){L.info("sap.ushell.services.appLifeCycle.restore:"+O);}).catch(function(O){L.error("Error: sap.ushell.services.appLifeCycle.restore:"+O);});}}},oServiceCalls:{"subscribe":{executeServiceCallFn:function(O){B.mapCapabilities(O.oContainer,O.oMessageData.body);return new q.Deferred().resolve({}).promise();}},"setup":{executeServiceCallFn:function(O){return new q.Deferred().resolve().promise();}}}}});this.registerShellCommunicationHandler({"sap.ushell.eventDelegation":{oRequestCalls:{"registerEventHandler":{isActiveOnly:false,distributionType:["URL"]}},oServiceCalls:{"registerEventHandler":{executeServiceCallFn:function(O){var P=N(O);return new q.Deferred().resolve(P).promise();}}}}});function N(O){var P=O.oMessageData.body.eventSerObj;return K.registerEventHandler(P);}sap.ui.getCore().getEventBus().subscribe("sap.ushell","appComponentLoaded",this.onComponentCreated,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","getAppLifeCycle",this.onGetMe,this);b.init(this.getElementsModel(),H);};this.addControl=function(w){v.addCenterViewPort(w);};this.removeControl=function(w){var x=B.getById(w),y=B.isStatefulContainerSupported(x);if(!y){v.removeCenterViewPort(w,true);}};this.removeApplication=function(w){var x=this.getControl(w);if(x){this.removeControl(x.getId());x.destroy();}};this.getControl=function(w){return v&&(v.getViewPortControl("centerViewPort","application-"+w)||v.getViewPortControl("centerViewPort","applicationShellPage-"+w));};this.getViewPortContainer=function(){return v;};this.navTo=function(w){v.navTo("centerViewPort",w,"show");};this.getCurrentApplication=function(){return l;};this.setApplicationFullWidth=function(w){var x=this.getCurrentApplication();if(x.container){x.container.toggleStyleClass("sapUShellApplicationContainerLimitedWidth",!w);}};this.createComponent=function(w,P){this.shellElements().setDangling(true);return A.createComponent(w,P);};this.getAppContainer=function(w,x,y,z,F){x.shellUIService=s.getInterface();x.appIsolationService=o.getInterface();x.targetNavigationMode=y?"explace":"inplace";this.openApp(w,x,z,F);if(G.length>0){l.container.registerShellCommunicationHandler(G);}if(p.UI5APP){l.container.setIframeHandlers(p.UI5APP);}return l.container;};this.getShellUIService=function(){return s;};this.getAppIsolationService=function(){return o;};this.initShellUIService=function(w){s._attachHierarchyChanged(c.onHierarchyChange.bind(this));s._attachTitleChanged(c.onTitleChange.bind(this));s._attachRelatedAppsChanged(c.onRelatedAppsChange.bind(this));s._attachBackNavigationChanged(w.fnOnBackNavigationChange.bind(this));};this.parseStatefulContainerConfiguration=function(w){var x={};if(w){var y={"GUI":true};Object.keys(w).filter(function(z){return w[z]===true&&y[z];}).map(function(z){var F=z;if(F==="GUI"){F="TR";}return F;}).forEach(function(z){x[z]=null;});}n=x;};this.setStatefulApplicationContainer=function(w){n=w;};this.getStatefulApplicationContainer=function(){return n;};this.applicationIsStatefulType=function(w){return n.hasOwnProperty(w);};this.getStatefulContainer=function(w){return n[w];};this.setStatefulContainer=function(w,x){n[w]=x;};this.statefulContainerForTypeExists=function(w){return!!this.getStatefulContainer(w);};this.getAllApplicationContainers=function(){return Object.keys(n).map(function(K){return n[K];}).filter(function(w){return!!w;});};this.getElementsModel=function(){return E;};this.activeContainer=function(w){var x=this.getAllApplicationContainers();x.forEach(function(y){L.info("Deactivating container "+y.getId());y.setActive(false);});if(w){L.info("Activating container "+w.getId());w.setActive(true);}};this.showApplicationContainer=function(w){this.navTo(w.getId());w.toggleStyleClass("hidden",false);L.info("New application context opened successfully in an existing transaction UI session.");};this.reuseStateFulContainerAndRestore=function(w,T,H,F){var x=this,y=I[F];if(B.getStorageKey(w)){B.setStorageKey(w,y);}return H.restore(w,y).then(function(){x.showApplicationContainer(w);},function(z){L.error(z&&z.message||z);});};this.reuseStateFulContainer=function(w,x,T,H,F){var y=this;I[F]=T;if(B.getStorageKey(w)){B.setStorageKey(w,T);}this.initAppMetaParams();return H.create(w,x,T).then(function(){y.showApplicationContainer(w);},function(z){L.error(z&&z.message||z);});};this.initAppMetaParams=function(){if(!this.getAppMeta().getIsHierarchyChanged()){s.setHierarchy();}if(!this.getAppMeta().getIsTitleChanged()){s.setTitle();}if(!this.getAppMeta().getIsRelatedAppsChanged()){s.setRelatedApps();}if(!t){s.setBackNavigation();}};this.reuseApplicationContainer=function(w,x,y){var z=this;return w.setNewApplicationContext(x,y).then(function(){z.navTo(w.getId());w.toggleStyleClass("hidden",false);L.info("New application context opened successfully in an existing transaction UI session.");},function(F){L.error(F&&F.message||F);});};this.createApplicationContainer=function(w,x){return A.createApplicationContainer(w,x);};this.publishNavigationStateEvents=function(w,x,O){var y,z=w.getId?w.getId():"",F=this;var H=d.getMetadata(),J=H.icon,T=H.title;w.addEventDelegate({onAfterRendering:O});y=w.exit;w.exit=function(){if(y){y.apply(this,arguments);}F.getAppMeta()._applyContentDensityByPriority();setTimeout(function(){var K=q.extend(true,{},x);delete K.componentHandle;K.appId=z;K.usageIcon=J;K.usageTitle=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",K);L.info("app was closed");},0);var P=F._publicEventDataFromResolutionResult(x);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",P);};};this._publicEventDataFromResolutionResult=function(w){var P={};if(!w){return w;}["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(x){P[x]=w[x];});Object.freeze(P);return P;};this.isCachedEnabledAsAppParameter=function(w,T){if(w&&w.params&&w.params["sap-keep-alive"]){if(w.params["sap-keep-alive"]=="true"){return true;}}if(T&&T.url){if(new U(T.url).get("sap-keep-alive")=="true"){return true;}}return false;};this.getInMemoryInstance=function(w,F){var x="application-"+w,y=S.get(x);if(y){if(y.shellHash===F){return{isInstanceSupported:true,appId:y.appId,container:y.container};}return{isInstanceSupported:false,appId:y.appId,container:y.container};}return{isInstanceSupported:false,appId:undefined,container:undefined};};this.handleOpenStateful=function(w,x,T,y,z,F){var H=B.getHandler();if(S.get(T)&&w===false){this.reuseStateFulContainerAndRestore(y,T,H,F);}else{this.reuseStateFulContainer(y,z.url,T,H,F);if(x){if(!this.isAppInCache(T)){this.storeApp(T,y,z,F);}}}};this.leave=function(w,x){var y=B.isStatefulContainerSupported(w);if(y){return this.handleExitStateful(x,w);}return Promise.resolve();};this.open=function(w,x,y,T,W,F,M){var z,H=this.statefulContainerForTypeExists(T.applicationType),J,K=i.indexOf(T.applicationType)>=0,N="application-"+w,O,P=this.isAppOfTypeCached(N,K)||this.isCachedEnabledAsAppParameter(y,T),Q,V=false,X;Q=this.calculateAppType(T);X=f.getDefaultFullWidthSetting(Q);z=B.getStateFul(T.url);J=B.isStatefulContainerSupported(z);if(!J){z=undefined;O=S.get("application"+x);if(O){z=O.container;}}if(J){if(!z){z=W(w,M,y,T,x,T.fullWidth||M.fullWidth||X,F);this.restoreApp(z.getId());this.navTo(z.getId());V=true;}}else if(!H&&z&&!P){this.destroy(z.getId(),z);z=W(w,M,y,T,x,T.fullWidth||M.fullWidth||X,F);}else if(!z){z=W(w,M,y,T,x,T.fullWidth||M.fullWidth||X,F);}if(!H&&!J){this.restoreApp(z.getId());this.navTo(z.getId());}v.switchState("Center");u.setPerformanceMark("FLP -- centerViewPort");this.activeContainer(z);if(J){this.handleOpenStateful(V,P,"application"+x,z,T,F);}else if(H){this.reuseApplicationContainer(z,T.applicationType,T.url);}return Promise.resolve();};this.handleControl=function(w,x,y,T,W,F){var z=this,M=d.getMetadata(T),H=v.getCurrentCenterPage?v.getCurrentCenterPage():undefined,J=sap.ui.getCore().byId(H);var P=z.leave(J,H).then(function(){z.open(w,x,y,T,W,F,M);},function(K){L.error(K&&K.message||K);});return P;};this.switchViewState=function(w,x,y){var z=w,F;if(m[w]&&m[w][j]){z=m[w][j];}var H=C.last("/core/shell/model/currentState/stateName")==="home";if(!H&&(!l.appId||!S.get(l.appId))){E.destroyManageQueue();}F=S.get("application"+y);if(F){b.restore(F);}else{b.assignNew(w);}E.switchState(z,x,y);this.shellElements().setDangling(false);this.shellElements().processDangling();if(w==="searchResults"){this.getElementsModel().setProperty("/lastSearchScreen","");if(!window.hasher.getHash().indexOf("Action-search")===0){var J=sap.ui.getCore().getModel("searchModel");window.hasher.setHash("Action-search&/searchTerm="+J.getProperty("/uiFilter/searchTerms")+"&dataSource="+JSON.stringify(J.getProperty("/uiFilter/dataSource").getJson()));}}};this.registerShellCommunicationHandler=function(w){A.registerShellCommunicationHandler(w);};this.registerIframeCommunicationHandler=function(H,T){p[T]=H;};this.postMessageToIframeApp=function(w,x,M,W){var y,z=A.getActiveAppContainer(),F=[];if(B.hasIFrame(z)&&(B.isCapabilitySupported(z,w,x)||A.isAppTypeSupported(z,w,x))){F.push(A.postMessageToIframeApp(z,w,x,M,W));}if(!A.isActiveOnly(w,x)){B.forEach(function(O){if(B.hasIFrame(O)){if(B.isCapabilitySupported(O,w,x)||A.isAppTypeSupported(O,w,x)){F.push(A.postMessageToIframeApp(O,w,x,M,W));}}});}y=A.getResponseHandler(w,x);var H=Promise.all(F);if(y){y(H);}return H;};this.postMessageToIframeAppAccordingToPolicy=function(w,x,M,W,P){var y,z=A.getActiveAppContainer(),F=[];if(B.hasIFrame(z)&&A.isAppTypeSupportedByPolicy(z,P)){F.push(A.postMessageToIframeApp(z,w,x,M,W));}if(!P.isActiveOnly){B.forEach(function(O){if(B.hasIFrame(O)){if(B.isCapabilitySupported(O,w,x)||A.isAppTypeSupported(O,w,x)){F.push(A.postMessageToIframeApp(O,w,x,M,W));}}});}y=A.getResponseHandler(w,x);var H=Promise.all(F);if(y){y(H);}return H;};this.registerTunnels=function(T){g.registerTunnels(T,this.registerShellCommunicationHandler);};this.registerEvents=function(w){g.registerEvents(w,this.registerShellCommunicationHandler);};this.setBackNavigationChanged=function(w){t=w;};this.getBackNavigationChanged=function(){return t;};}
return new h();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/DelegationBootstrap',["sap/ushell/components/applicationIntegration/eventDelegation/tunnels"],function(t){"use strict";var a=this;
function D(){a=this;this.init=function(r,p){a.fnRegisterCommHandler=r;a.fnPostMessageToIframe=p;t.init(r);};this.bootstrap=function(){a.fnRegisterCommHandler({"sap.ushell.demo":{oRequestCalls:{"passCoordinates":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(p){p.then(function(r){Log.info("sap.ushell.dem.passCoordinates:"+r);}).catch(function(E){Log.error("sap.ushell.dem.passCoordinates:"+E);});}}}}});var c={},i={clickCallback:function(b){a.fnPostMessageToIframe("sap.ushell.demo","passCoordinates",{screenX:b.screenX,screenY:b.screenY},false);},keyPressCallback:function(b){}},e={"addlistener":{oInterface:document,sFuncName:"addEventListener",fnProxy:function(b,C,u){var o,n;if(C.pairedInterface){o=t.getPairedMethod(C.pairedInterface);}else if(C.getUUID){n=C.getUUID();if(c[n]){o=c[n]}else{o=function(d){C({screenX:d.screenX,screenY:d.screenY})};c[n]=o;}}else{o=C;}return[b,o,u];},fnSpy:function(b){return b==="click"||b==="keypress";}},"removelistener":{oInterface:document,sFuncName:"removeEventListener",fnProxy:function(b,C,u){var o;if(C.pairedInterface){o=t.getPairedMethod(C.pairedInterface);}else if(C.getUUID){o=c[C.getUUID()];}else{o=C;}return[b,o,u];},fnSpy:function(b){return b==="click"||b==="keypress";}},"appOpening":{oInterface:sap.ui.getCore().getEventBus(),sFuncName:"subscribe",fnSpy:function(p,b){return p==="launchpad"&&b==="appOpening";}}},T={"clickCallback":{oInterface:i,sFuncName:"clickCallback",pair:{sMethod:"clickCallback",sInterface:"sap.ushell.pairedInterface",fnExtractArguments:function(s){return[{screenX:s.oMessageData.body.screenX,screenY:s.oMessageData.body.screenY}];}}},"keyPressCallback":{oInterface:i,sFuncName:"keyPressCallback"},"demoFunction":{oInterface:{demoFunction:function(A){return"Outer Shell says: Your argument is: "+A.demo;}},sFuncName:"demoFunction"}};t.registerEvents(e);t.registerTunnels(T);};this.setup=function(r){t.setup(r);};this.createInterface=function(c){var i=c.name,C=c.callback;t.createInterface(i,a.fnRegisterCommHandler,C);};this.registerEvents=function(e){t.registerEvents(e);};this.registerTunnels=function(T){t.registerTunnels(T);};}
return new D();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/Storage',[],function(){"use strict";
function S(){var c,e;function L(l){this.size=0;if(typeof l=="number"){this.limit=l;}else{this.limit=10;}this.map={};this.head=null;this.tail=null;}L.prototype.LRUnode=function(k,v){if(typeof k!="undefined"&&k!==null){this.key=k;}if(typeof v!="undefined"&&v!==null){this.value=v;}this.prev=null;this.next=null;};L.prototype.setHead=function(n){n.next=this.head;n.prev=null;if(this.head!==null){this.head.prev=n;}this.head=n;if(this.tail===null){this.tail=n;}this.size++;this.map[n.key]=n;};L.prototype.set=function(k,v){var n=new L.prototype.LRUnode(k,v);if(this.map[k]){this.map[k].value=n.value;this.remove(n.key);}else if(this.size>=this.limit){var E=this.map[this.tail.key];delete this.map[this.tail.key];this.size--;this.tail=this.tail.prev;this.tail.next=null;if(e){e(E);}}this.setHead(n);};L.prototype.get=function(k){if(this.map[k]){var v=this.map[k].value;var n=new L.prototype.LRUnode(k,v);this.remove(k);this.setHead(n);return v;}else{return null;}};L.prototype.remove=function(k){var n=this.map[k];if(n.prev!==null){n.prev.next=n.next;}else{this.head=n.next;}if(n.next!==null){n.next.prev=n.prev;}else{this.tail=n.prev;}delete this.map[k];this.size--;};L.prototype.removeAll=function(l){this.size=0;this.map={};this.head=null;this.tail=null;if(typeof l=="number"){this.limit=l;}};L.prototype.forEach=function(a){var n=this.head,i=0;while(n){a.apply(this,[n,i,this]);i++;n=n.next;}};L.prototype.toJSON=function(){var j=[],n=this.head;while(n){j.push({key:n.key,value:n.value});n=n.next;}return j;};L.prototype.toString=function(){var s='',n=this.head;while(n){s+=String(n.key)+':'+n.value;n=n.next;if(n){s+='\n';}}return s;};this.init=function(l,i){c=new L(l);e=i;};this.get=function(k){return c.get(k);};this.set=function(k,v){c.set(k,v);};this.remove=function(k){c.remove(k);};this.forEach=function(a){c.forEach(a);};}
return new S();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/Application',["sap/ushell/components/container/ApplicationContainer","sap/ushell/components/applicationIntegration/application/PostMessageAPI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/ushell/components/applicationIntegration/eventDelegation/tunnels","sap/ui/thirdparty/URI"],function(A,P,u,q,t,U){"use strict";var a,B,T={},o={},f={},b=0;
function c(){var d=this;this.handleMessageEvent=function(C,m){var M=m.data;if(typeof M==="string"){try{M=d.parse(m.data);}catch(e){q.sap.log.debug("Message received from origin '"+m.origin+"' cannot be parsed: "+e,M,"sap.ushell.components.container.ApplicationContainer");return;}}if(M.action==="pro54_setGlobalDirty"&&localStorage.getItem(C.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!A.prototype._isTrustedPostMessageSource(C,m)){q.sap.log.warning("Received message from untrusted origin: "+m.origin,M,"sap.ushell.components.container.ApplicationContainer");return;}q.sap.log.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+C.globalDirtyStorageKey+" value: "+M.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");u.localStorageSetItem(C.globalDirtyStorageKey,M.parameters.globalDirty,true);}else{d.handleServiceMessageEvent(C,m,M);}};this.handleServiceMessageEvent=function(C,m,M){var p=q.sap.getObject("sap-ushell-config.services.PostMessage.config",0),s=M&&M.service,S=t.getPairedServiceCall(s),g,h,i,j,I=false,k=P.getAPIs();q.sap.log.debug("Received post message request from origin '"+m.origin+"': "+JSON.stringify(M),null,"sap.ushell.components.container.ApplicationContainer");if(S){l(S);return;}if(M.type!=="request"||!s){return;}for(var E in k){if(k.hasOwnProperty(E)){if(s.indexOf(E)!==-1){h=k[E];i=E;I=true;break;}}}if(I===false){return;}g=s.split(".")[3];if(p&&p.enabled===false){q.sap.log.warning("Received message for "+g+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return;}if(!A.prototype._isTrustedPostMessageSource(C,m)){q.sap.log.warning("Received message from untrusted origin '"+m.origin+"': "+JSON.stringify(m.data),null,"sap.ushell.components.container.ApplicationContainer");return;}function l(e){var y={matchesLocalSid:x,getLocalSystemInSidForma:w,storeSapSystemData:v,executeSetBackNavigationService:r,sendResponseMessage:n,oMessage:m,oMessageData:M,oContainer:C};try{e(y).done(function(R){n("success",{result:R});}).fail(function(D){n("error",{message:D});});}catch(z){n("error",{message:z.message});}}function n(e,y){var R=d.stringify({type:"response",service:M.service,request_id:M.request_id,status:e,body:y});q.sap.log.debug("Sending post message response to origin ' "+m.origin+"': "+R,null,"sap.ushell.components.container.ApplicationContainer");if(typeof m.source!=="object"||m.source===null){q.sap.log.debug("Cannot send response message to origin ' "+m.origin,"`source` member of request message is not an object","sap.ushell.components.container.ApplicationContainer");return;}m.source.postMessage(R,m.origin);}function r(m,M){var D=new q.Deferred(),e;if(M.body&&M.body.callbackMessage&&M.body.callbackMessage.service){e=A.prototype._backButtonPressedCallback.bind(null,m.source,M.body.callbackMessage.service,m.origin);}D.resolve(C.getShellUIService().setBackNavigation(e));return D.promise();}function v(y,z){var K,L,D,F=[y.id];if(arguments.length>1){F.unshift(z);}try{D=JSON.stringify(y);}catch(e){q.sap.log.error("Cannot stringify and store expanded system data: "+e);}if(D){L=u.getLocalStorage();K=u.generateLocalStorageKey("sap-system-data",F);L.setItem(K,D);}}function w(){var e=sap.ushell.Container.getLogonSystem();var y=e.getName();var z=e.getClient();return"sid("+y+"."+z+")";}function x(e){return w().toLowerCase()===e.toLowerCase();}j=h.oServiceCalls[M.service.replace(i+".","")];if(j&&j.executeServiceCallFn){l(j.executeServiceCallFn);}else{n("error",{message:"Unknown service name: '"+M.service+"'"});}};this.init=function(i){B=i;this.registerShellCommunicationHandler({"sap.ushell.PostMessage":{oServiceCalls:{"callTunnelFunction":{executeServiceCallFn:function(s){var e=s.oMessageData.body.content,g=d.restoreArray(e.arguments),r;r=T[e.UUID].fnCallback.apply(this,g);return new q.Deferred().resolve(r).promise();}}},oRequestCalls:{"callTunnelFunction":{isActiveOnly:true,distributionType:["URL"]}}}});};this.restoreArray=function(e){var g=[],i=0;while(e[i]){g.push(e[i]);i++;}return g;};this._createWaitForRendererCreatedPromise=function(){var p,r;r=sap.ushell.Container.getRenderer();if(r){q.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[];}p=new Promise(function(e,g){var O;O=function(){q.sap.log.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");e();sap.ushell.Container.detachRendererCreatedEvent(O);};r=sap.ushell.Container.getRenderer();if(r){q.sap.log.debug("Shell controller: resolving component waitFor promise immediately (shell renderer already created");e();}else{sap.ushell.Container.attachRendererCreatedEvent(O);}});return[p];};this.createComponent=function(r,p){return sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(r,p,this._createWaitForRendererCreatedPromise());};this.stripURL=function(s){var n=s.indexOf("?"),e=s.indexOf("#"),g;if(n>=0){g=s.substr(0,n);}else if(e>=0){g=s.substr(0,e);}else{g=s;}return g;};this.createApplicationContainer=function(s,r){a=new A("application"+s,r);a.setHandleMessageEvent(this.handleMessageEvent);B.setAppCapabilities(a,r.appCapabilities);return a;};this.active=function(e){if(e){if(e.active){e.active();}}};this.restore=function(e){var D;if(e){if(e.getUrl){D=e.getUrl();a=B.get(this.stripURL(D));if(a){B.restoreApp(a.sApplication);}}if(e.restore){e.restore();}if(e.setInitialConfiguration){e.setInitialConfiguration();}if(e.getRouter&&e.getRouter()&&e.getRouter().initialize){e.getRouter().initialize();}a=e;}};this.store=function(e){var D;if(e){if(e.getUrl){D=e.getUrl();a=B.get(this.stripURL(D));if(a){B.storeApp(a.sApplication);}}if(e.suspend){e.suspend();}if(e.getRouter&&e.getRouter()){e.getRouter().stop();}}};this.destroy=function(e){var D,a,g=false;if(e){if(e.getUrl){D=e.getUrl();a=B.get(this.stripURL(D));if(B.isStatefulContainerSupported(a)){g=true;B.destroyApp(a.sApplication);}}if(e.destroy&&g===false){e.destroy();}}};this.getActiveAppContainer=function(){return a;};}
c.prototype.stringify=function(d){var e=function(C){b++;T[b]={fnCallback:C};return{type:"tunnel",UUID:b};},g=[],r=JSON.stringify(d,function(k,v){if(v!==null){if(typeof v==="object"||typeof v==="function"){if(g.indexOf(v)!==-1){return;}g.push(v);}}if(typeof v==="function"){var n=o[v];if(n){return{type:"reversetunnel",UUID:n};}return e(v);}return v;});return r;};
c.prototype.parse=function(d){var e=this;return JSON.parse(d,function(k,v){if(v&&v.type==="reversetunnel"){return T[v.UUID].fnCallback;}else if(v&&v.type==="tunnel"){var g;if(f[v.UUID]){g=f[v.UUID];}else{var h=e.getActiveAppContainer();g=function(){e.postMessageToIframeApp(h,"sap.ushell.PostMessage","callTunnelFunction",{"content":{UUID:v.UUID,arguments:arguments}},true);};g.getUUID=function(){return v.UUID;};o[g]=v.UUID;f[v.UUID]=g;}return g;}return v;});};
c.prototype.getResponseHandler=function(s,i){return P.getResponseHandler(s,i);};
c.prototype.isActiveOnly=function(s,i){return P.isActiveOnly(s,i);};
c.prototype.isAppTypeSupported=function(C,s,i){var d=P._getPostMesageInterface(s,i);return this.isAppTypeSupportedByPolicy(C,d);};
c.prototype.isAppTypeSupportedByPolicy=function(C,p){if(C&&C.getAdditionalInformation&&C.getAdditionalInformation().startsWith("SAPUI5.Component=")){return false;}var d=p;if(!d||!d.distributionType){return false;}if(d.distributionType.indexOf("all")>=0){return true;}if(d.distributionType.indexOf("URL")>=0){return false;}if(C.getApplicationType&&d.distributionType.indexOf(C.getApplicationType())>=0){return true;}return false;};
c.prototype.postMessageToIframeApp=function(C,s,i,m,w){var S=s+"."+i,M=this.createPostMessageRequest(S,m);return this.postMessageToIframe(M,C,w);};
c.prototype.createPostMessageRequest=function(s,m){var r=Date.now().toString();return{"type":"request","request_id":r,"service":s,"body":m};};
c.prototype.postMessageToIframe=function(m,C,w){var d=this,r=m.request_id,i=C._getIFrame();return new Promise(function(n,N){function p(E){var j;try{j=d.parse(E.data,d);if(r!==j.request_id){return;}if(j.status==="success"){n(j);}else{N(j);}window.removeEventListener("message",p);}catch(e){n();q.sap.log.warning("Obtained bad response from framework in response to message "+m.request_id);q.sap.log.debug("Underlying framework returned invalid response data: '"+E.data+"'");}}var M=d.stringify(m);q.sap.log.debug("Sending postMessage "+M+" to application container '"+C.getId()+"'");var g,h;if(!i){n();}else if(w){window.addEventListener("message",p,false);g=new U(C._getIFrameUrl(i));h=g.protocol()+"://"+g.host();i.contentWindow.postMessage(M,h);}else{g=new U(C._getIFrameUrl(i));h=g.protocol()+"://"+g.host();i.contentWindow.postMessage(M,h);n();}});};
c.prototype.registerShellCommunicationHandler=function(C){P.registerShellCommunicationHandler(C);};
c.prototype.addShellCommunicationHandler=function(k,C){P.addShellCommunicationHandler(k,C);};
c.prototype._getPostMesageInterface=function(s,i){return P._getPostMesageInterface(s,i);};
return new c();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/BlueBoxHandler',["sap/ushell/components/applicationIntegration/application/Application","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery"],function(A,U,q){"use strict";
function B(){var c,t=this,a,C={"isStateful":{handler:function(d,o){if(d&&(d.enabled===true||d===true)){return true;}return false;}},"isGUI":{handler:function(d,o){if(d&&d.protocol==="GUI"){return true;}return false;}},"isGUIStateful":{handler:function(d,o){return t.isCapUT(o,"isGUI")&&t.isCapUT(o,"isStateful");}},"isFLP":{handler:function(d,o){return!t.isCapUT(o,"isGUI")&&t.isCapUT(o,"isStateful");}}},b={},s={},h={"DEFAULT":{storageIdentifier:function(u){return this._stripURL(u);},setup:function(T,S){},isContentLoaded:function(i){return false;},create:function(i,u,S){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","create",{sCacheId:S,sUrl:u,sHash:window.hasher.getHash()});},destroy:function(i){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","destroy",{});},store:function(i,S){},restore:function(i,S){}},"URL":{setup:function(T,S){},create:function(i,u,S){var o=new U();if(o.query(true).hasOwnProperty("sap-isolation-enabled")){var p=sap.ushell.Container.getService("URLParsing"),H=p.getHash(o.toString());if(H){var d=p.parseShellHash("#"+H),P=p.paramsToString(d.params);if(P&&P.length>=0){var e=sap.ushell.Container.getService("AppState").createEmptyAppState(),f=sap.ushell.Container.getService("AppState").createEmptyAppState(),g="";if(P.indexOf("sap-intent-param")>=0){g=encodeURIComponent(P);}else{e.setData(P);e.save();g=encodeURIComponent("sap-intent-param="+e.getKey());}f.setData("sap-startup-params="+g);f.save();u=u.split("#")[0]+"&sap-intent-param="+f.getKey()+"#"+window.hasher.getHash();}else{u=u.split("#")[0]+"#"+window.hasher.getHash();}}else{u+="#"+window.hasher.getHash();}}return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","create",{sCacheId:S,sUrl:u,sHash:window.hasher.getHash()},true);},destroy:function(i,S){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","destroy",{sCacheId:S},true);},store:function(i,S){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","store",{sCacheId:S},true);},restore:function(i,S){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","restore",{sCacheId:S,sHash:window.hasher.getHash()},true);}}};this.init=function(S,i,d){c={};A.init(this);a=d;if(i){s=q.extend(true,s,i.supportedTypes);}};this.isStatefulContainerSupported=function(o){var i=this.isCapabilitySupported(o,"sap.ushell.services.appLifeCycle","create")&&this.isCapabilitySupported(o,"sap.ushell.services.appLifeCycle","destroy");return i;};this.isKeepAliveSupported=function(o){var i=this.isCapabilitySupported(o,"sap.ushell.services.appLifeCycle","store")&&this.isCapabilitySupported(o,"sap.ushell.services.appLifeCycle","restore");return i;};this.mapCapabilities=function(o,d){this.setCapabilities(o,d);};this.getCapabilities=function(o){return b[o].oCapMap;};this.isCapabilitySupported=function(o,S,i){if(b[o]&&b[o].oCapMap&&b[o].oCapMap[S]){return!!b[o].oCapMap[S][i];}return false;};this.setCapabilities=function(o,d){var e;if(!b[o]){b[o]={BlueBox:o};}if(!b[o].oCapMap){b[o].oCapMap={};}e=b[o].oCapMap;Object.keys(d).forEach(function(k){var f=d[k],g;if(!e[f.service]){e[f.service]={};}g=e[f.service];g[f.action]=true;});if(!o.getIsStateful()&&this.isStatefulContainerSupported(o)){o.setIsStateful(true);}};this.hasIFrame=function(o){if(o&&o._getIFrame){return true;}return false;};this.getStorageKey=function(o){return b[o].sStorageKey;};this.setAppCapabilities=function(o,d){if(!b[o]){b[o]={BlueBox:o};}b[o].appCapabilities=d;};this.forEach=function(d){var k;for(k in b){if(b.hasOwnProperty(k)){d(b[k].BlueBox);}}};this.isCapByTarget=function(T,d){if(T.appCapabilities===undefined){return false;}if(C[d]&&T&&T.appCapabilities){return C[d].handler(T.appCapabilities);}return T.appCapabilities[d]||false;};this.isCapUT=function(o,d){var e=b[o];if(e===undefined||e.appCapabilities===undefined){return false;}if(C[d]&&e){return C[d].handler(e.appCapabilities,o);}return e.appCapabilities[d]||false;};this.setStorageKey=function(o,d){if(!b[o]){b[o]={BlueBox:o};}b[o].sStorageKey=d;};this.getStorageKey=function(o){if(!b[o]){return undefined;}return b[o].sStorageKey;};this.getHandler=function(){return q.extend(true,h.DEFAULT,h["URL"]);};this._stripURL=function(u){var n=u.indexOf("?"),d=u.indexOf("#"),e;if(n>=0){e=u.substr(0,n);}else if(d>=0){e=u.substr(0,d);}else{e=u;}return e;};this.deleteStateFul=function(u){var d=this._stripURL(u);return this.delete(d);};this.getStateFul=function(u){var d=this._stripURL(u);return this.get(d);};this.destroyApp=function(d){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","destroy",{appId:d});};this.openApp=function(d){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","create",{appId:d,sHash:window.hasher.getHash()});};this.storeApp=function(d){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","store",{appId:d,sHash:window.hasher.getHash()});};this.restoreApp=function(d){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","restore",{appId:d,sHash:window.hasher.getHash()});};this.delete=function(u){if(c[u]){delete c[u];}};this.get=function(u){return c[u];};this.getById=function(i){for(var k in c){if(c.hasOwnProperty(k)){var e=c[k];if(e.sId===i){return e;}}}};this.set=function(u,i){var S=this._stripURL(u);c[S]=i;};}
return new B();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/PostMessageAPI',["sap/ushell/utils","sap/ui/core/Popup","sap/ui/core/library","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/UIComponent","sap/ushell/services/AppConfiguration","sap/ushell/ui/footerbar/SendAsEmailButton","sap/ushell/ui/footerbar/AddBookmarkButton"],function(u,P,c,q,L,U,A,S,a){"use strict";var d=new U(),p;var o={"sap.ushell.services.CrossApplicationNavigation":{oServiceCalls:{"hrefForExternal":{executeServiceCallFn:function(e){return new q.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal(e.oMessageData.body.oArgs)).promise();}},"getSemanticObjectLinks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters,e.oMessageData.body.bIgnoreFormFactors,undefined,undefined,e.oMessageData.body.bCompactIntents);}},"isIntentSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(e.oMessageData.body.aIntents);}},"isNavigationSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported(e.oMessageData.body.aIntents);}},"backToPreviousApp":{executeServiceCallFn:function(){sap.ushell.Container.getService("CrossApplicationNavigation").backToPreviousApp();return new q.Deferred().resolve().promise();}},"historyBack":{executeServiceCallFn:function(e){sap.ushell.Container.getService("CrossApplicationNavigation").historyBack(e.oMessageData.body.iSteps);return new q.Deferred().resolve().promise();}},"getAppStateData":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getAppStateData(e.oMessageData.body.sAppStateKey);}},"toExternal":{executeServiceCallFn:function(e){var g=u.clone(e.oMessageData.body.oArgs);u.storeSapSystemToLocalStorage(g);return new q.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(g)).promise();}},"registerBeforeAppCloseEvent":{executeServiceCallFn:function(e){e.oContainer.setBeforeAppCloseEvent({enabled:true,params:e.oMessageData.body});return new q.Deferred().resolve().promise();}}}},"sap.ushell.ui5service.ShellUIService":{oServiceCalls:{"setTitle":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},"setBackNavigation":{executeServiceCallFn:function(e){return e.executeSetBackNavigationService(e.oMessage,e.oMessageData);}}}},"sap.ushell.services.ShellUIService":{oServiceCalls:{"setTitle":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},"setHierarchy":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setHierarchy(e.oMessageData.body.aHierarchyLevels)).promise();}},"setRelatedApps":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setRelatedApps(e.oMessageData.body.aRelatedApps)).promise();}},"setDirtyFlag":{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new q.Deferred().resolve().promise();}},"showShellUIBlocker":{executeServiceCallFn:function(e){s(e.oMessageData.body.bShow);return new q.Deferred().resolve().promise();}},"getFLPUrl":{executeServiceCallFn:function(e){var i=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){i=true;}return new q.Deferred().resolve(sap.ushell.Container.getFLPUrl(i)).promise();}},"getShellGroupIDs":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").getShellGroupIDs((e.oMessageData.body?e.oMessageData.body.bGetAll:undefined));}},"addBookmark":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId);}},"addBookmarkDialog":{executeServiceCallFn:function(e){var g=new a();g.firePress({});return new q.Deferred().resolve().promise();}},"getShellGroupTiles":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("LaunchPage").getTilesByGroupId(e.oMessageData.body.groupId);}},"sendUrlAsEmail":{executeServiceCallFn:function(e){var g=new S();g.firePress({});return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.Container":{oServiceCalls:{"setDirtyFlag":{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new q.Deferred().resolve().promise();}},"getFLPUrl":{executeServiceCallFn:function(e){var i=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){i=true;}return new q.Deferred().resolve(sap.ushell.Container.getFLPUrl(i)).promise();}},"getFLPConfig":{executeServiceCallFn:function(e){var D=new q.Deferred();sap.ushell.Container.getFLPConfig().then(function(F){D.resolve(F);});return D.promise();}}}},"sap.ushell.services.AppState":{oServiceCalls:{"getAppState":{executeServiceCallFn:function(e){var D=new q.Deferred();sap.ushell.Container.getService("AppState").getAppState(e.oMessageData.body.sKey).done(function(g){delete g._oServiceInstance;D.resolve(g);}).fail(function(g){delete g._oServiceInstance;D.resolve(g);});return D.promise();}},"_saveAppState":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("AppState")._saveAppState(e.oMessageData.body.sKey,e.oMessageData.body.sData,e.oMessageData.body.sAppName,e.oMessageData.body.sComponent,e.oMessageData.body.bTransient,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings);}},"_loadAppState":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("AppState")._loadAppState(e.oMessageData.body.sKey);}},"makeStatePersistent":function(e){return sap.ushell.Container.getService("AppState").makeStatePersistent(e.oMessageData.body.sKey,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings);}}},"sap.ushell.services.Bookmark":{oServiceCalls:{"addBookmarkUI5":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addBookmark(e.oMessageData.body.oParameters,e.oMessageData.body.oGroup);}},"addBookmark":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId);}},"getShellGroupIDs":{executeServiceCallFn:function(){return sap.ushell.Container.getService("Bookmark").getShellGroupIDs();}},"addCatalogTileToGroup":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addCatalogTileToGroup(e.oMessageData.body.sCatalogTileId,e.oMessageData.body.sGroupId,e.oMessageData.body.oCatalogData);}},"countBookmarks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").countBookmarks(e.oMessageData.body.sUrl);}},"deleteBookmarks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").deleteBookmarks(e.oMessageData.body.sUrl);}},"updateBookmarks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").updateBookmarks(e.oMessageData.body.sUrl,e.oMessageData.body.oParameters);}}}},"sap.ushell.services.AppConfiguration":{oServiceCalls:{"setApplicationFullWidth":{executeServiceCallFn:function(e){A.setApplicationFullWidth(e.oMessageData.body.bValue);return new q.Deferred().resolve().promise();}}}}};
function b(){}
b.prototype.getAPIs=function(){this._registerAppRuntimeNewAPI();return o;};
b.prototype.addShellCommunicationHandler=function(k,C){var e=o[k],n;if(e){if(C.oServiceCalls){Object.keys(C.oServiceCalls).forEach(function(g){e.oServiceCalls[g]=C.oServiceCalls[g];});}if(C.oRequestCalls){Object.keys(C.oRequestCalls).forEach(function(g){e.oRequestCalls[g]=C.oRequestCalls[g];});}return;}n={oRequestCalls:{},oServiceCalls:{}};if(C.oServiceCalls){Object.keys(C.oServiceCalls).forEach(function(g){n.oServiceCalls[g]=C.oServiceCalls[g];});}if(C.oRequestCalls){Object.keys(C.oRequestCalls).forEach(function(g){n.oRequestCalls[g]=C.oRequestCalls[g];});}o[k]=n;};
b.prototype._getPostMesageInterface=function(e,i){var C,g=this.getAPIs();if(g[e]){C=g[e];if(C&&C.oRequestCalls&&C.oRequestCalls[i]){return C.oRequestCalls[i];}}return undefined;};
b.prototype.registerShellCommunicationHandler=function(C){var t=this,e;Object.keys(C).forEach(function(k){e=C[k];t.addShellCommunicationHandler(k,e);});};
b.prototype.isActiveOnly=function(e,i){var C=this._getPostMesageInterface(e,i);if(C){return C.isActiveOnly;}return undefined;};
b.prototype.getResponseHandler=function(e,i){var C=this._getPostMesageInterface(e,i);if(C){return C.fnResponseHandler;}return undefined;};
b.prototype._createNewInnerAppState=function(g){var h=sap.ushell.Container.getService("AppState"),n,H,C,N,v;n=h.createEmptyAppState(undefined,false);if(g.oMessageData.body.sData!==undefined){try{v=JSON.parse(g.oMessageData.body.sData);}catch(e){v=g.oMessageData.body.sData;}}else{v="";}n.setData(v);n.save();N=n.getKey();H=window.hasher.getHash();if(H.indexOf("&/")>0){if(H.indexOf("sap-iapp-state=")>0){C=/(?:sap-iapp-state=)([^&/]+)/.exec(H)[1];H=H.replace(C,N);}else{H=H+"/sap-iapp-state="+N;}}else{H=H+"&/sap-iapp-state="+N;}window.hasher.changed.active=false;window.hasher.replaceHash(H);window.hasher.changed.active=true;return N;};
b.prototype._setInnerAppStateData=function(e){return b.prototype._createNewInnerAppState(e);};
b.prototype._registerAppRuntimeNewAPI=function(){if(this.newAPIAdded!==undefined){return;}this.newAPIAdded=true;this.registerShellCommunicationHandler({"sap.ushell.appRuntime":{oRequestCalls:{"innerAppRouteChange":{isActiveOnly:true,distributionType:["all"]},"hashChange":{isActiveOnly:true,distributionType:["URL"]},"setDirtyFlag":{isActiveOnly:true,distributionType:["URL"]},"themeChange":{isActiveOnly:false,distributionType:["all"]},"uiDensityChange":{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{"hashChange":{executeServiceCallFn:function(e){window.hasher.replaceHash(e.oMessageData.body.newHash);return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.UserInfo":{oServiceCalls:{"getThemeList":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("UserInfo").getThemeList();}}}},"sap.ushell.services.ShellNavigation":{oServiceCalls:{"toExternal":{executeServiceCallFn:function(e){sap.ushell.Container.getService("ShellNavigation").toExternal(e.oMessageData.body.oArgs,undefined,e.oMessageData.body.bWriteHistory);return new q.Deferred().resolve().promise();}},"toAppHash":{executeServiceCallFn:function(e){sap.ushell.Container.getService("ShellNavigation").toAppHash(e.oMessageData.body.sAppHash,e.oMessageData.body.bWriteHistory);return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.NavTargetResolution":{oServiceCalls:{"getDistinctSemanticObjects":{executeServiceCallFn:function(){return sap.ushell.Container.getService("NavTargetResolution").getDistinctSemanticObjects();}},"expandCompactHash":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("NavTargetResolution").expandCompactHash(e.oMessageData.body.sHashFragment);}},"resolveHashFragment":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("NavTargetResolution").expandCompactHash(e.oMessageData.body.sHashFragment);}},"isNavigationSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("NavTargetResolution").isNavigationSupported(e.oMessageData.body.aIntents);}}}},"sap.ushell.services.CrossApplicationNavigation":{oServiceCalls:{"expandCompactHash":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").expandCompactHash(e.oMessageData.body.sHashFragment);}},"getDistinctSemanticObjects":{executeServiceCallFn:function(){return sap.ushell.Container.getService("CrossApplicationNavigation").getDistinctSemanticObjects();}},"getLinks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getLinks(e.oMessageData.body);}},"getPrimaryIntent":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getPrimaryIntent(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters);}},"hrefForAppSpecificHash":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").hrefForAppSpecificHash(e.oMessageData.body.sAppHash);}},"isInitialNavigation":{executeServiceCallFn:function(){return sap.ushell.Container.getService("CrossApplicationNavigation").hrefForAppSpecificHash();}},"getAppState":{executeServiceCallFn:function(e){var D=new q.Deferred();sap.ushell.Container.getService("CrossApplicationNavigation").getAppState(d,e.oMessageData.body.sAppStateKey).done(function(g){delete g._oServiceInstance;D.resolve(g);});return D.promise();}},"setInnerAppRoute":{executeServiceCallFn:function(e){var g=sap.ushell.Container.getService("URLParsing"),h=g.parseShellHash(window.hasher.getHash()),n;h.appSpecificRoute=e.oMessageData.body.appSpecificRoute;n="#"+g.constructShellHash(h);window.hasher.changed.active=false;window.hasher.replaceHash(n);window.hasher.changed.active=true;return new q.Deferred().resolve().promise();}},"setInnerAppStateData":{executeServiceCallFn:function(e){var k=b.prototype._setInnerAppStateData(e);return new q.Deferred().resolve(k).promise();}}}},"sap.ushell.services.Renderer":{oServiceCalls:{"addHeaderItem":{executeServiceCallFn:function(e){f("addHeaderItem",e);return new q.Deferred().resolve().promise();}},"addHeaderEndItem":{executeServiceCallFn:function(e){f("addHeaderEndItem",e);return new q.Deferred().resolve().promise();}},"showHeaderItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"showHeaderEndItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"hideHeaderItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"hideHeaderEndItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"setHeaderTitle":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(e.oMessageData.body.sTitle);return new q.Deferred().resolve().promise();}},"setHeaderVisibility":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderVisibility(e.oMessageData.body.bVisible,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.LaunchPage":{oServiceCalls:{"getGroupsForBookmarks":{executeServiceCallFn:function(){return sap.ushell.Container.getService("LaunchPage").getGroupsForBookmarks();}}}}});};
function s(e){if(e===true&&p===undefined){p=new P();p.setShadow(true);p.setModal(true,"sapMDialogBlockLayerInit");p.setNavigationMode("SCOPE");p.eOpenState=c.OpenState.OPEN;q("#shell-cntnt").css("zIndex",40);p._iZIndex=30;p._duringOpen();}else if(e===false&&p!==undefined){p._oLastPosition=p._oDefaultPosition;p.destroy();p=undefined;q("#shell-cntnt").css("zIndex","auto");}}
function f(e,g){sap.ushell.Container.getRenderer("fiori2")[e]("sap.ushell.ui.shell.ShellHeadItem",{id:g.oMessageData.body.sId,tooltip:g.oMessageData.body.sTooltip,icon:g.oMessageData.body.sIcon,press:function(){g.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:g.oMessageData.body.sId});}},g.oMessageData.body.bVisible,g.oMessageData.body.bCurrentState||true,g.oMessageData.body.aStates);}
return new b();},false);
sap.ui.predefine('sap/ushell/components/applicationIntegration/configuration/AppMeta',["sap/ushell/services/AppConfiguration","sap/ushell/components/applicationIntegration/elements/model","sap/ui/Device","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/ui/util/Mobile"],function(A,E,D,C,u,r,a,R,q,M,b){"use strict";
function c(){var i,t=this,d,s,e;this.getIsTitleChanged=function(){return i;};this.getIsRelatedAppsChanged=function(){return e;};this.getHierarchyDefaultValue=function(){var h=[];var f=C.last("/core/shell/model/currentState/stateName");if(f&&((f==="app"||f==="embedded"))){h=[{icon:"sap-icon://home",title:r.i18n.getText("actionHomePage"),intent:s?"#"+s:"#"}];}return h;};this.init=function(I){s=I;};this.getIsHierarchyChanged=function(){return d;};this.onHierarchyChange=function(o){d=true;var h=o.getParameters().data,H,f=[],g=C.last("/core/shell/model/currentState/stateName");if(!h){h=[];}H=t.getHierarchyDefaultValue();h.forEach(function(I,j){f[j]=q.extend({},I);});f=f.concat(H);if(g==="home"){E.updateStateProperty("application/hierarchy",f,false,["home"]);}E.updateStateProperty("application/hierarchy",f,true);};this.onRelatedAppsChange=function(o){e=true;var f=o.getParameters().data,g=C.last("/core/shell/model/currentState/stateName");if(!f){f=[];}if(g==="home"){E.updateStateProperty("application/relatedApps",f,false,["home"]);}E.updateStateProperty("application/relatedApps",f,true);};this.resetShellUIServiceHandlers=function(){e=false;d=false;i=false;};this.onTitleChange=function(o){i=true;var T=o.getParameters().data;if(!T){T=this.getAppMeta().getTitleDefaultValue();}var f=C.last("/core/shell/model/currentState/stateName");if(f==="home"){E.updateStateProperty("application/title",T,false,["home"]);}E.updateStateProperty("application/title",T,true);R.genericSetItem("application/title",T);window.document.title=T;u.setPerformanceMark("FLP -- title change");a.emit("TitleChanged",T);};this._getDefaultFavIcon=function(p){var f=p.get("sapUiShellFavicon");if(f){var m=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(f);if(m){f=m[1];}else if(f==="''"||f==="none"){f=null;}}if(!f){var g=q.sap.getModulePath("sap.ushell");return g+"/themes/base/img/launchpad_favicon.ico";}return f;};this.getFavIconHref=function(){return q("link").filter("[rel=\"shortcut icon\"]").attr("href")||"";};this.getAppIcon=function(){var I="sap-icon://folder",f=A.getMetadata();if(f&&f.icon){I=f.icon;}return I;};this.setAppIcons=function(m){sap.ui.require(["sap/ui/core/theming/Parameters"],function(P){M.start("FLP:ShellController.setAppIcons","setAppIcons","FLP");var f=q.sap.getModulePath("sap.ushell"),l=(m&&m.homeScreenIconPhone)||(f+"/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png"),L=(m&&m["homeScreenIconPhone@2"])||(f+"/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png"),o=(m&&m.homeScreenIconTablet)||(f+"/themes/base/img/launchicons/72_iPad_Desktop_Launch.png"),g=(m&&m["homeScreenIconTablet@2"])||(f+"/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png"),F=(m&&m.favIcon)||(this._getDefaultFavIcon(P)),h=this.getFavIconHref();if(D.os.ios){b.setIcons({"phone":l,"phone@2":L,"tablet":o,"tablet@2":g,"favicon":F,"precomposed":false});}else if(h!==F){b.setIcons({"phone":"","phone@2":"","tablet":"","tablet@2":"","favicon":F,"precomposed":true});}M.end("FLP:ShellController.setAppIcons");}.bind(this));};this._applyContentDensityByPriority=function(f,g){var h;if(f===undefined){if(D.system.combi){var j=sap.ushell.Container.getService("UserInfo"),U=j.getUser(),k="autoDetect";if(U){k=U.getContentDensity();}switch(k){case"cozy":f=false;break;case"compact":f=true;break;default:h=A.getMetadata();if(h.compactContentDensity&&!h.cozyContentDensity){f=true;}else{f=false;}}}else{h=A.getMetadata();if(h.compactContentDensity&&!h.cozyContentDensity){f=true;}else if(!h.compactContentDensity&&h.cozyContentDensity){f=false;}else{f=this._isCompactContentDensityByDevice();}}}this._applyContentDensityClass(f,g);};this._applyContentDensityClass=function(f,g){var I=this._isCompactContentDensityByDevice();return new Promise(function(h,j){function k(l){q("body").toggleClass("sapUiSizeCompact",l).toggleClass("sapUiSizeCozy",!l);if(g===true){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(m){m.postMessageToIframeApp("sap.ushell.appRuntime","uiDensityChange",{"isTouch":(l?"0":"1")});});}h();}if(f===undefined){sap.ushell.Container.getServiceAsync("UserInfo").then(function(l){var U=l.getUser?l.getUser():undefined;k(U&&U.getContentDensity()==="cozy"?false:I);});}else{k(!!f);}});};this._isCompactContentDensityByDevice=function(){return!D.support.touch||D.system.combi;};this.getTitleDefaultValue=function(){var T="",f=A.getMetadata();if(f&&f.title){T=f.title;}return T;};this.create=function(){};this.restore=function(I){this._applyContentDensityByPriority();this.setAppIcons(I);};this.store=function(I){};this.destroy=function(I){};}
return new c();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/elements/model',["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/components/HeaderManager","sap/ushell/components/StateHelper","sap/ui/performance/Measurement","sap/base/Log","sap/ui/thirdparty/jquery"],function(E,C,u,H,S,M,L,q){"use strict";var b;var c;
function a(){return{"home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn"]},"app":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"minimal":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"standalone":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded-home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"lean":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]}};}
function d(){return{"blank":{"stateName":"blank","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"blank-home":{"stateName":"blank-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"home":{"stateName":"home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"search":"","paneContent":[],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]},"app":{"stateName":"app","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"search":"","actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]},"minimal":{"stateName":"minimal","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"standalone":{"stateName":"standalone","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"embedded":{"stateName":"embedded","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"embedded-home":{"stateName":"embedded-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"headerless":{"stateName":"headerless","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"merged":{"stateName":"merged","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"headerless-home":{"stateName":"headerless-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"merged-home":{"stateName":"merged-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"lean":{"stateName":"lean","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":false,"paneContent":[],"search":"","actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]},"lean-home":{"stateName":"lean-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":false,"paneContent":[],"search":"","actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]}};}
function r(O,k){return Object.keys(O).reduce(function(o,K){if(!k[K]){o[K]=O[K];}return o;},{});}
function v(i,j){return j!==undefined;}
function n(){return true;}
function g(o,m){var p=m.split("/");var i=o;p.shift();p.forEach(function(P){if(!i){return;}i=i[P];});return i;}
function e(m,V,o){var p=m.split("/");var i=o;p.shift();var P=p.pop();p.forEach(function(s){i=i[s];});i[P]=V;}
function f(){var o;var s;var k;var A;var m;var I;var l;var p;var t;var w;this.createDefaultTriggers=function(i){var R=function(B,D,F){if(F.sProperty==="actions"){var G=g(F.oModel,F.path);if(G&&G.length===0&&F.aIds&&F.aIds.length>0){this._renderShellState();}}}.bind(this);var j=function(B){function D(O,N){var U=sap.ushell.Container.getService("URLParsing"),G=U.getHash(O),J=U.getHash(N),K=U.parseShellHash(G).appSpecificRoute,P=U.parseShellHash(J).appSpecificRoute;return K!==P;}var F=D(B.oldURL,B.newURL);if(F){this.addHeaderItem(["backBtn"],true);}}.bind(this);this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){sap.ui.getCore().getEventBus().subscribe("launchpad","updateShell",R,this);},fnUnRegister:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","updateShell",R,this);}}],["blank","blank-home"],i);var y=this;var z;this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){window.addEventListener("hashchange",j);var N=0;z=E.on("AppRendered").do(function(){N++;if(N>=2){y.addHeaderItem(["backBtn"],true);}});},fnUnRegister:function(){window.removeEventListener("hashchange",j);if(z){z.off();}}}],["lean","lean-home"],i);};this.init=function(i,j){b=d();c=a();s=C.last("/core/shell/model");o={};m={};I=false;p=false;t=[];w=true;A=j;l=undefined;if(i){M.start("FLP:ElementsModel.init","moveShellHeaderEndItems","FLP");if(i.moveEditHomePageActionToShellHeader){this._removeActionFromMeArea("ActionModeBtn");}if(i.moveContactSupportActionToShellHeader){this._removeCustomDataActionBtnFromMeArea("ContactSupportBtn");}if(i.moveGiveFeedbackActionToShellHeader){this._removeCustomDataActionBtnFromMeArea("EndUserFeedbackBtn");}if(i.moveAppFinderActionToShellHeader){this._removeActionFromMeArea("openCatalogBtn");}if(i.moveUserSettingsActionToShellHeader){this._removeActionFromMeArea("userSettingsBtn");}M.end("FLP:ElementsModel.init");}var y=i&&i.appState?i.appState:"home";this.createDefaultTriggers(y);this.switchState(y);};this.destroy=function(){s=undefined;o=undefined;A=undefined;m=undefined;I=undefined;w=undefined;p=undefined;l=undefined;b=undefined;c=undefined;};this.getModel=function(){var R=sap.ushell.Container.getRenderer("fiori2");if(!R){return undefined;}return R._oShellView.getModel();};this._removeCustomDataActionBtnFromMeArea=function(i){for(var j in c){var y=c[j];var z=y.actions;var B=z.indexOf(i);if(B!==-1){c[j].actions.splice(B,1);}}};this._removeActionFromMeArea=function(B){var i;for(i in b){var j=b[i];if(i==="blank"||i==="blank-home"){continue;}if(B==="ActionModeBtn"&&i==="app"){continue;}var y=j.actions;var z=y.indexOf(B);if(z!==-1){b[i].actions.splice(z,1);}}};this.destroyManageQueue=function(){this._destroyManageQueue(["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"]);};this.switchState=function(i){var j=u.clone(b[i]);var y=r(j,{aTriggers:true});C.emit("/core/shell/model/currentState",y);H.switchState(i);k=A.customShellState;l=undefined;this._renderShellState();return j;};this.setLeftPaneVisibility=function(V,i,j){this.updateStateProperty("showPane",V,i,j);};this.setHeaderHiding=function(){L.warning("Application Life Cycle model: headerHiding property is deprecated and has no effect");};this._createHeaderEventPayload=function(P,V,i,j,D,y){var z={propertyName:P,value:V,aStates:j,bCurrentState:i,action:y,bDoNotPropagate:D};return z;};this.setHeaderVisibility=function(V,i,j){var P=this._createHeaderEventPayload("headerVisible",V,i,j,false);H.updateStates(P);};this.showLogo=function(i,j){this.updateShowLogo(true,i,j,false);};this.updateShowLogo=function(V,i,j,D){var P=this._createHeaderEventPayload("showLogo",V,i,j,D);H.updateStates(P);};this.addHeaderItem=function(i,j,y){if(i.length){var P=this._createHeaderEventPayload("headItems",i,j,y,false);H.updateStates(P);}};this.removeHeaderItem=function(i,j,y){var P=this._createHeaderEventPayload("headItems",i,j,y,false,"remove");H.updateStates(P);};this.addHeaderEndItem=function(i,j,y,D){if(i.length){var P=this._createHeaderEventPayload("headEndItems",i,j,y,D);H.updateStates(P);}};this.removeHeaderEndItem=function(i,j,y){var P=this._createHeaderEventPayload("headEndItems",i,j,y,false,"remove");H.updateStates(P);};this.addSubHeader=function(i,j,y){if(i.length){this._addShellItem("subHeader",i,j,y);}};this.removeSubHeader=function(i,j,y){this._removeShellItem("subHeader",i,j,y);};this.addActionButton=function(i,j,y){this._addActionButton("actions",i,j,y);};this.removeActionButton=function(i,j,y){this._removeShellItem("actions",i,j,y);};this.addToolAreaItem=function(i,j,y,z){if(i.length){this._addToolAreaItem("toolAreaItems",i,j,y,z);}};this.removeToolAreaItem=function(i,j,y){this._removeShellItem("toolAreaItems",i,j,y);};this.addLeftPaneContent=function(i,j,y){if(i.length){this._addShellItem("paneContent",i,j,y);}};this.removeLeftPaneContent=function(i,j,y){this._removeShellItem("paneContent",i,j,y);};this.addRightFloatingContainerItem=function(i,j,y){if(i.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",i,j,y);}};this.removeRightFloatingContainerItem=function(i,j,y){this._removeShellItem("RightFloatingContainerItems",i,j,y);};this.showSettingsButton=function(i,j){this.addActionButton(["userSettingsBtn"],i,j,false);};this.showSignOutButton=function(i,j){this.addActionButton(["logoutBtn"],i,j,false);};this.showRightFloatingContainer=function(i){this._showRightFloatingContainer(i);};this.addFloatingActionButton=function(i,j,y){if(i.length){this._addShellItem("floatingActions",i,j,y);}};this.removeFloatingActionButton=function(i,j,y){this._removeShellItem("floatingActions",i,j,y);};this.updateStateProperty=function(P,V,i,j,D){if(P.startsWith("application")){var y=this._createHeaderEventPayload(P,V,i,j,false);H.updateStates(y);return;}this._setShellItem(P,V,i,j,v,e,D);};this._handleTriggers=function(N){var T,i,j=[],y={};w=false;while(t.length>0){T=t.pop();if(N[T.sName]){j.push(T);y[T.sName]=T;}else{T.fnUnRegister(this);}}for(var z in N){if(N.hasOwnProperty(z)){if(!y[z]){i=N[z];i.fnRegister(this);j.push(i);}}}t=j;w=true;};this._registerTriggers=function(T){w=false;T.forEach(function(i){i.fnRegister(this);t.push(i);});w=true;};function x(T,i){var j=[];if(!i.aTriggers){i.aTriggers=[];}T.forEach(function(y){var F={sName:y.sName,fnRegister:y.fnRegister,fnUnRegister:y.fnUnRegister};i.aTriggers.push(F);j.push(F);});return j;}this.createTriggersOnState=function(T){var i=x(T,b);if(!I){this._registerTriggers(i);}};this.createTriggersOnBaseStates=function(T,B,i){var j=[];B.forEach(function(z){var D=b[z];j=x(T,D);});var y=B.indexOf(i)>=0;if(y&&!I){this._registerTriggers(j);}};this.createTriggers=function(T,i,B){var j=s.currentState;if(i===true){this.createTriggersOnState(T,j);return;}this.createTriggersOnBaseStates(T,B,j.stateName);};this.showShellItem=function(P,j,V){var y=S.getModelStates(j),z="/currentState"+P,B;for(var i=0;i<y.length;i++){B=b[y[i]].stateName;b[B][P.split("/")[1]]=V;}if(s.currentState.stateName===j){e(z,V,s);if(!I){this._renderShellState();}}};this.addCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnAdd(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.removeCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnRemove(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.applyExtendedShellState=function(i){l=i;this._renderShellState();};this.addEntryInShellStates=function(i,j,y,R,z){var B,D;if(!o[i]){o[i]={fnAdd:y,fnHide:R};var F=this._getStatesList();for(B=0;B<F.length;B++){D=F[B];b[D][i]=z[D];}this["remove"+j]=R;this["add"+j]=y;}else{throw new Error("State entry already exsists:"+i);}};this.addElementToManagedQueue=function(i){var j=C.last("/core/shell/model/currentState/stateName"),B,y=i.getId();if(!A){A={extendedShellStates:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}B=A.extendedShellStates;if(!B[j]){B[j]={managedObjects:[],customState:undefined};}B[j].managedObjects.push(y);var z=m[y];if(z){z.nRefCount++;}else{z={oItem:i,nRefCount:1};m[y]=z;}};this.updateNeededTriggersMap=function(i,T){var j;if(!T){return;}for(j=0;j<T.length;j++){i[T[j].sName]=T[j];}};this._renderShellState=function(){var B=C.last("/core/shell/model/currentState/stateName"),i,j,y=u.clone(b[B]),z=A,D,N={};if(I){return;}if(z&&z.customShellState){D=z.customShellState.currentState;}var F={"currentState":u.clone(y)};s=F;I=true;if(l&&z.extendedShellStates&&z.extendedShellStates[l]){i=z.extendedShellStates[l].customState;j=i.currentState;this._addCustomShellStates(j);}if(D){this._addCustomShellStates(D);}s=C.last("/core/shell/model");if(y&&y.aTriggers){this.updateNeededTriggersMap(N,y.aTriggers);}if(j&&j.aTriggers){this.updateNeededTriggersMap(N,j.aTriggers);}if(D&&D.aTriggers){this.updateNeededTriggersMap(N,D.aTriggers);}if(w){this._handleTriggers(N);}delete F.currentState.aTriggers;var G=r(F.currentState,{aTriggers:true});H.recalculateState(l);C.emit("/core/shell/model/currentState",G);I=false;};this._addCustomShellStates=function(T){this.addToolAreaItem(T.toolAreaItems,false,true);this.addSubHeader(T.subHeader,true);this.addRightFloatingContainerItem(T.RightFloatingContainerItems,true);this.addActionButton(T.actions,true,undefined,false);this.addLeftPaneContent(T.paneContent,true);this.addFloatingActionButton(T.floatingActions,true);this.showRightFloatingContainer(T.showRightFloatingContainer);};this._createCustomShellState=function(i){var j={"currentState":{"stateName":i,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}};var y=c[i];if(y){q.extend(j.currentState,y);}return j;};this._showRightFloatingContainer=function(i){this._setShellItem("showRightFloatingContainer",i,true,[],v,e);};this._addActionButton=function(P,j,y,z){function U(B,D,F){var G=g(F,B);var J=G.indexOf("logoutBtn");if(J>-1){G.splice.apply(G,[J,0].concat(D));}else{G=G.concat(D);}var K=u.removeDuplicatedActions(G);function N(G){var Q=[],R=["recentActivitiesBtn","frequentActivitiesBtn","openCatalogBtn","userSettingsBtn","ActionModeBtn","ContactSupportBtn","EndUserFeedbackBtn"];for(var i=0;i<R.length;i++){var T=G.indexOf(R[i]);if(T>-1){Q.push(G.splice(T,1)[0]);}}Q=Q.concat(G);return Q;}var O=N(K);e(B,O,F);}this._setShellItem(P,j,y,z,n,U);};this.setFloatingContainerContent=function(P,i,j,y){function V(z,i,B){return i.length===1;}function U(z,i,B){e(z,i,B);}this._setShellItem(P,i,j,y,V,U);};this._addShellItem=function(P,i,j,y){function V(z,i,B){if(z.length>0){L.warning("You can only add one item. Replacing existing item: "+z[0]+" in state: "+B+", with the new item: "+i[0]+".");}return true;}function U(z,B,D){e(z,i.slice(0),D);}this._setShellItem(P,i,j,y,V,U);};this._addRightFloatingContainerItem=function(P,i,j,y){function U(z,B,D){var F=g(D,z);F=F.concat(B);e(z,F,D);}this._setShellItem(P,i,j,y,n,U);};this._addToolAreaItem=function(P,i,j,y,z){function U(F,i,G){var J=g(G,F),K,B;if(typeof i==="string"){i=[i];}for(B=0;B<i.length;B++){K=i[B];if(J.indexOf(K)<0){J.push(K);}}e(F,J,G);}if(j){var B,D=S.getPassStates(z);for(B=0;B<D.length;B++){this.showShellItem("/toolAreaVisible",D[B],true);}}this._setShellItem(P,i,y,z,n,U);};this._removeShellItem=function(P,i,j,y){function V(z,B){var D,i,F;for(F=0;F<B.length;F++){i=B[F];D=z.indexOf(i);if(D<0){L.warning("You cannot remove Item: "+i+", the Item does not exists.");return false;}}return true;}function U(z,B,D){var F=g(D,z),G,i,J;for(J=0;J<B.length;J++){i=B[J];G=F.indexOf(i);if(G>-1){F.splice(G,1);}}e(z,F,D);}this._setShellItem(P,i,j,y,V,U);};this._setShellItem=function(P,O,y,z,V,U,D){var B,F;var G=Array.isArray(O)?O.slice(0):O;if(y===true){B="/currentState/"+P;F=g(s,B);if(V(F,G,"currentState")===false){return;}if(!p&&!I){U(B,G,k);sap.ui.getCore().getEventBus().publish("launchpad","updateShell",{oModel:s,path:B,aIds:G,sProperty:P});this._renderShellState();}else{U(B,G,s);}}else{var J=D?z:S.getPassStates(z),i,K=s.currentState.stateName;for(i=0;i<J.length;i++){var N=J[i],j;F=g(b[N],"/"+P);if(V(F,G,N)===false){continue;}var Q=S.getModelStates(N,D);for(j=0;j<Q.length;j++){B="/"+Q[j]+"/"+P;U(B,G,b);if(K===Q[j]){if(!I){this._renderShellState();}}}}}};this._getStatesList=function(){return Object.keys(b);};this._destroyManageQueue=function(){var i,j,y,B,z,D;B=A.extendedShellStates;for(z in B){if(B.hasOwnProperty(z)){D=B[z].managedObjects;for(i=0;i<D.length;i++){j=D[i];y=m[j];y.nRefCount--;if(y.nRefCount===0){y.oItem.destroy();m[j]=null;}}delete B[z];}}};this._isValidStateEntry=function(N){return!!o[N];};this.getModelToUpdate=function(){return s;};this.setModelToUpdate=function(i,j){p=j;s=i;};this._getManagedElements=function(){return m;};this.extendStates=function(i){var j;for(j in i){if(i.hasOwnProperty(j)){u.updateProperties(b[j],i[j]);}}};this.getBaseStateMember=function(i,B){return b[i][B];};this.getCustomStateDeltaMember=function(i,j){return c[i][j];};this.getAllStatesInDelta=function(){return Object.keys(c);};}
var h=new f();return h;},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/eventDelegation/tunnels',["sap/ui/thirdparty/jquery"],function(q){"use strict";
function T(){var t=this,r,p={};this.init=function(R){if(!R){throw"1 argument expected, 0 received.";}r=R;};this.createInterface=function(i,c){var R={},s={};R[i]={sInterfaceName:{isActiveOnly:false,distributionType:["URL"]}};s[i]={executeServiceCallFn:function(S){var o=c(S);return new q.Deferred().resolve(o).promise();}};r({"sap.ushell.tunnelRegistry":{oRequestCalls:R,oServiceCalls:s}});};this.createTunnelServiceCallsInfo=function(o){return this.createServiceCallInfo(o);};this.createTunnelServiceCallsInfoForEvents=function(e){return this.createServiceCallInfo(e,this.createEventEntry);};this.createServiceCallInfo=function(R,c){var a={},b,s,P,m,d,e,f,o,E,g;for(var h in R){if(R.hasOwnProperty(h)){s={};P={};o=R[h];if(c){o=c(o);}f=t.createMethodForServiceCall(o);e=t.createServiceCall(f);s[h]=e;a[h]={oServiceCall:s};b=R[h].pair;if(b&&b.sMethod){m=b.sMethod;d=b.sInterface;E=b.fnExtractArguments;e=t.createPairedServiceCall({fnMethod:f,fnExtractArguments:E});P[m]=e;g=[d,m].join('.');p[g]={serviceCall:e,rawMethod:f};}a[h]={oServiceCall:s};}}return a;};this.createServiceCall=function(m){return{executeServiceCallFn:function(s){return new q.Deferred().resolve({endPoint:m}).promise();}};};this.createPairedServiceCall=function(d){var m=d.fnMethod,e=d.fnExtractArguments;return function(s){var a=e(s),b=m.apply(undefined,a);return new q.Deferred().resolve(b).promise();};};this.createMethodForServiceCall=function(o){var i=o.oInterface,f=o.sFuncName,s=o.fnSpy;return function(){if((s&&s.apply(undefined,arguments)||!s)){return i[f].apply(i,arguments);}};};this.createEventEntry=function(e){var o={},i=e.oInterface,f=e.sFuncName,P=e.fnProxy;o[f]=function(){var a=arguments;if(P){a=P.apply(undefined,arguments);}if(arguments&&arguments.length){i[f].apply(i,a);}else{i[f].apply(i);}};return{oInterface:o,sFuncName:f,fnSpy:e.fnSpy};};this.registerTunnels=function(o){if(!r){throw"No 'fnRegisterShellCommunicationHandler'. Use 'init' method.";}var s=t.createTunnelServiceCallsInfo(o);this.createServiceCalls(s);};this.registerEvents=function(e){if(!r){throw"No 'fnRegisterShellCommunicationHandler'. Use 'init' method.";}var s=t.createTunnelServiceCallsInfoForEvents(e);this.createServiceCalls(s);};this.createServiceCalls=function(s){var a="sap.ushell.tunnelRegistry",c={},i,b;c[a]={oServiceCalls:{}};for(i in s){if(s.hasOwnProperty(i)){b=s[i].oServiceCall;q.extend(c[a].oServiceCalls,b);}}r(c);};this.getPairedMethod=function(k){if(p[k]){return p[k].rawMethod;}};this.getPairedServiceCall=function(k){if(p[k]){return p[k].serviceCall;}};}
return new T();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedServices/RelatedServices',[],function(){"use strict";
function R(){var b;var s={};this._historyBackNavigation=function(){window.history.back();};this.navigateBack=function(){if(b){b();}else{if(sap.ushell.Container.getService("CrossApplicationNavigation").isInitialNavigation()){sap.ushell.Container.getService("CrossApplicationNavigation").toExternal({target:{shellHash:"#"},writeHistory:false});return;}this._historyBackNavigation();}};this.setNavigateBack=function(i){b=i;s.backNavigationHander=b;};this.resetNavigateBack=function(){b=this._historyBackNavigation;s.backNavigationHander=b;};this.create=function(){b=this._historyBackNavigation;s={backNavigationHander:b};return s;};this.restore=function(i){if(i){s=i;b=s.backNavigationHander;}};this.store=function(S){s={backNavigationHander:this._historyBackNavigation};};this.destroy=function(S){};}
return new R();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";
function R(){var d=[],E,a,c={},s,i=false,C={},A,t=[],b={"home":{"actions":[]},"app":{"actions":["aboutBtn"]},"minimal":{"actions":["aboutBtn"]},"standalone":{"actions":["aboutBtn"]},"embedded":{"actions":["aboutBtn"]},"embedded-home":{"actions":["aboutBtn"]},"lean":{"actions":["aboutBtn"]}},o={home:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"home"}},app:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"app"}}};this.init=function(e,f){E=e;if(f&&f.length>0){Object.keys(b).forEach(function(S){b[S].actions=f.concat(b[S].actions);});}};this.processDangling=function(){var D,e;for(D=0;D<d.length;D++){e=d.pop();e.func.apply(this,e.args);}};this.setDangling=function(I){i=I;};this.calculateElementsState=function(n,e,f,g){var N=o[n]?o[n]:o.default,h=N[g?undefined:e]?N[e]:N.default,j=h[f]?h[f]:h.default;return j;};this.createCustomShellState=function(S){var e={"currentState":{"stateName":S,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}},f=b[S];if(f){q.extend(e.currentState,f);}return e;};this.createExtendedShellState=function(S,f){var B,e=this.createCustomShellState(S);B=a.extendedShellStates;if(B[S]){return false;}s=e;f();if(B[S]){B[S].customState=e;}else{B[S]={managedObjects:[],customState:e};}s=a.customShellState;return true;};this.assignNew=function(S){c=this.createCustomShellState(S);a.customShellState=c;a.aTriggers=[];a.extendedShellStates={};a.oCheckPoints={};this._updateModel();s=a.customShellState;};this._genericSetItem=function(e,v){var f=e.split("/");var l=f.pop();var g=f.reduce(function(h,m){return h[m];},s.currentState);g[l]=v;E._renderShellState();};this._genericAddItems=function(e,I){var f=s.currentState[e];s.currentState[e]=f.concat(I);E._renderShellState();};this.genericSetItem=function(e,v){if(i){d.push({func:this._genericSetItem,args:arguments});}else{this._genericSetItem(e,v);}};this.genericAddItems=function(e,I){if(i){d.push({func:this.genericAddItems,args:arguments});}else{this._genericAddItems(e,I);}};this.setShellModelForApplications=function(e,v){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(e)>-1){this.genericSetItem(e,v);}else{L.error("Not a valid attribute:"+e);}};this.addShellModelForApplications=function(e,I){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(e)>-1){this.genericAddItems(e,I);}else{L.error("Not a valid attribute:"+e);}};this.setStateModelToUpdate=function(I){s=I;};this.getStateModelToUpdate=function(){return s;};this.model=function(){if(!a){this.create();}A={customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};return A;};this._updateModel=function(){if(A){A.customShellState=a.customShellState;A.aTriggers=a.aTriggers;A.extendedShellStates=a.extendedShellStates;A.oCheckPoints=a.oCheckPoints;}};this.getAppRelatedElement=function(){return{customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};};this.create=function(){a={extendedShellStates:{},oCheckPoints:C,aTriggers:t,customShellState:{"currentState":{"stateName":"app","headEndItems":[],"paneContent":[],"headItems":[],"actions":["aboutBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}}};s=a.customShellState;this._updateModel();return a;};this.restore=function(S){if(S&&S.appRelatedElements){var e=S.appRelatedElements;a.aTriggers=e.aTriggers;a.extendedShellStates=e.extendedShellStates;a.oCheckPoints=e.oCheckPoints;a.customShellState=e.customShellState;}this._updateModel();s=a.customShellState;};this.store=function(m){};this.clean=function(){a=undefined;};this.destroy=function(m){};}
return new R();},true);
sap.ui.predefine('sap/ushell/components/cards/Card.controller',["sap/ushell/components/tiles/utils","sap/ushell/components/cards/ManifestPropertyHelper","sap/ushell/resources","sap/ui/model/json/JSONModel","sap/ui/core/mvc/XMLView"],function(u,m,r,J,X){"use strict";sap.ui.controller("sap.ushell.components.cards.Card",{onInit:function(){var v=this.getView(),c=this.getView().getViewData().chip,t=c.bag.getBag("tileProperties"),M,C;C=m.getTranslatablePropertiesFromBag(t);M=new J({data:C});v.setModel(M);v.setModel(r.i18nModel,"i18n");this._implementConfigurationUiContract(c,v);this._implementPreviewContract(c,C);},onPress:function(){var v=this.getView(),c=v.getViewData().chip,C=c.configuration.getParameterValueAsString("tileConfiguration"),o;if(c.configurationUi.isEnabled()){c.configurationUi.display();}else if(C){o=JSON.parse(C);sap.ushell.Container.getService("CrossApplicationNavigation").toExternal({target:{semanticObject:o.navigation_semantic_object,action:o.navigation_semantic_action},params:o.navigation_semantic_parameters_as_object});}},_implementPreviewContract:function(c,a){if(c.preview){c.preview.setPreviewTitle(a.display_title_text);if(c.preview.setPreviewSubtitle&&typeof c.preview.setPreviewSubtitle==="function"){c.preview.setPreviewSubtitle(a.display_subtitle_text);}}},_implementConfigurationUiContract:function(c,v){if(c.configurationUi&&c.configurationUi.isEnabled()){c.configurationUi.setUiProvider(function(){var C=this._getConfigurationUi(c);C.setModel(v.getModel(),"tileModel");return C;}.bind(this));v.getContent()[0].setTooltip(u.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}},_getConfigurationUi:function(c){var C=new X({viewName:"sap.ushell.components.cards.Configuration",viewData:{chipInstance:c}});return C;}});});
sap.ui.predefine('sap/ushell/components/cards/Configuration.controller',["sap/ushell/components/cards/ManifestPropertyHelper","sap/ushell/resources","sap/base/strings/formatMessage","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log"],function(m,r,f,J,q,L){"use strict";sap.ui.controller("sap.ushell.components.cards.Configuration",{formatter:f,onInit:function(){var v=this.getView(),V=v.getViewData(),c=V.chipInstance,M,s=c.configuration.getParameterValueAsString("cardManifest"),o;if(s){o=this._prepareManifest(s,c);}M=new J({data:{editorValue:JSON.stringify(o,null,4)||""},config:{originalLanguage:"",sapLogonLanguage:"",displayOriginalLanguageWarning:false,manifestEditorEditable:true}});v.setModel(M);v.setModel(r.i18nModel,"i18n");v.setViewName("sap.ushell.components.cards.Configuration");c.configurationUi.attachSave(this.onSaveConfiguration.bind(this));this._checkOriginalLanguage();},onSaveConfiguration:function(){var d=new q.Deferred(),M=this.getView().getModel(),s=M.getProperty("/data/editorValue"),o,E;try{o=JSON.parse(s);}catch(e){this._logErrorAndReject({error:r.i18n.getText("configuration.invalidJSONProvided")},d);return d;}E=m.extractCardData(o);this._saveManifestAndTileConfig(E.manifest,E.tileConfiguration).then(this._saveTilePropertiesBag.bind(this,E)).then(this._saveTitle.bind(this,E.bagProperties.display_title_text)).then(this._updateTileModel.bind(this,E)).then(d.resolve).catch(function(a){this._logErrorAndReject(a,d);}.bind(this));return d.promise();},_saveManifestAndTileConfig:function(a,t){var c=this.getView().getViewData().chipInstance;var p=new Promise(function(b,d){c.writeConfiguration.setParameterValues({cardManifest:JSON.stringify(a),tileConfiguration:t},b,function(e,E){d({error:e,errorInfo:E});});});return p;},_saveTilePropertiesBag:function(c){var C=this.getView().getViewData().chipInstance;var t=C.bag.getBag("tileProperties");this._fillCardBag(c,t);var p=new Promise(function(a,b){t.save(a,function(e,E){b({error:e,errorInfo:E});});});return p;},_saveTitle:function(t){var c=this.getView().getViewData().chipInstance;var p=new Promise(function(a,b){if(c.title){c.title.setTitle(t,a,function(e,E){b({error:e,errorInfo:E});});}else{a();}});return p;},_updateTileModel:function(c){var t=this.getView().getModel("tileModel");t.setProperty("/data/display_title_text",c.bagProperties.display_title_text);t.setProperty("/data/display_subtitle_text",c.bagProperties.display_subtitle_text);},_logErrorAndReject:function(e,d){L.error(e.error,null,"card.Configuration.controller");d.reject(e.error,e.errorInfo);},_fillCardBag:function(e,t){Object.keys(e.bagProperties).forEach(function(p){if(e.bagProperties[p]){t.setText(p,e.bagProperties[p]);}else{t.resetProperty(p);}});},_prepareManifest:function(a,c){var M=JSON.parse(a),C=m.getCardData(c);return m.mergeCardData(M,C);},_checkOriginalLanguage:function(){var M,l;if(!this._isOriginalLanguage()){M=this.getView().getModel();l=this._getLanguages();M.setProperty("/config/originalLanguage",l.originalLanguage.toUpperCase());M.setProperty("/config/sapLogonLanguage",l.logonLanguage.toUpperCase());M.setProperty("/config/displayOriginalLanguageWarning",true);M.setProperty("/config/manifestEditorEditable",false);}},_isOriginalLanguage:function(){var l=this._getLanguages(),o=l.originalLanguage.toLowerCase(),s=l.logonLanguage.toLowerCase(),a=l.ui5CoreLanguage.toLowerCase();return o===""||o===s||o===a;},_getLanguages:function(){var c=this.oView.getViewData().chipInstance;return{originalLanguage:c.bag.getOriginalLanguage(),logonLanguage:sap.ui.getCore().getConfiguration().getLocale().getSAPLogonLanguage(),ui5CoreLanguage:sap.ui.getCore().getConfiguration().getLanguage()};}});});
sap.ui.predefine('sap/ushell/components/cards/ManifestPropertyHelper',["sap/base/util/ObjectPath","sap/ushell/utils"],function(O,u){"use strict";var M={PLACEHOLDERS:{TITLE:"<title>",SUBTITLE:"<subtitle>",ICON:"<icon>",SEARCH_KEYWORDS:"<keywords>",SEMANTIC_OBJECT:"<semantic object>",ACTION:"<action>",PARAMETERS:"<parameters>",TARGET_URL:"<target URL>"},extractCardData:function(m){var a=this._getNavigationAction(m),t,s,S,b,c,T,U,d=O.get(["sap.app","tags","keywords"],m),e;if(a){b=O.get(["parameters","intentSemanticObject"],a);c=O.get(["parameters","intentAction"],a);T=O.get(["parameters","url"],a);s=O.get(["parameters","intentParameters"],a);}if(s){S=u.urlParametersToString(s);}if(T){U=false;}else if(b&&c){U=true;T="#"+b+"-"+c;if(S){T+="?"+S;}}t=JSON.stringify({"display_icon_url":O.get(["sap.card","header","icon","src"],m),"navigation_semantic_object":b,"navigation_semantic_action":c,"navigation_semantic_parameters":S,"navigation_use_semantic_object":U,"navigation_target_url":T});if(t==="{}"){t=undefined;}if(d){e=d.join(",");}return{bagProperties:{"display_title_text":O.get(["sap.card","header","title"],m),"display_subtitle_text":O.get(["sap.card","header","subTitle"],m),"display_search_keywords":e},tileConfiguration:t,manifest:this._replaceDataWithPlaceholders(m)};},mergeCardData:function(m,c){var o=JSON.parse(JSON.stringify(m)),n=this._getNavigationAction(o),s;if(c.display_title_text){O.set(["sap.card","header","title"],c.display_title_text,o);}if(c.display_subtitle_text){O.set(["sap.card","header","subTitle"],c.display_subtitle_text,o);}if(c.display_search_keywords){s=c.display_search_keywords.split(",");O.set(["sap.app","tags","keywords"],s,o);}if(c.display_icon_url){O.set(["sap.card","header","icon","src"],c.display_icon_url,o);}if(c.navigation_semantic_object){O.set(["parameters","intentSemanticObject"],c.navigation_semantic_object,n);}else if(c.navigation_target_url){O.set(["parameters","url"],c.navigation_target_url,n);}if(c.navigation_semantic_action){O.set(["parameters","intentAction"],c.navigation_semantic_action,n);}if(c.navigation_semantic_parameters_as_object){O.set(["parameters","intentParameters"],c.navigation_semantic_parameters_as_object,n);}return o;},getTranslatablePropertiesFromBag:function(b){var t={},T;if(b&&b.getText&&b.getTextNames){T=b.getTextNames();T.forEach(function(p){t[p]=b.getText(p);});}return t;},getCardData:function(c){var t,b,T,C;if(c.bag){t=c.bag.getBag("tileProperties");}else{t=c.getBag("tileProperties");}if(c.configuration){T=c.configuration.getParameterValueAsString("tileConfiguration");}else{T=c.getConfigurationParameter("tileConfiguration");}b=this.getTranslatablePropertiesFromBag(t);C=JSON.parse(T||"{}");if(C.navigation_semantic_parameters){C.navigation_semantic_parameters_as_object=this._parseParameters(C.navigation_semantic_parameters);}Object.keys(b).forEach(function(k){C[k]=b[k];});return C;},_parseParameters:function(p){var U=sap.ushell.Container.getService("URLParsing"),P=U.parseParameters("?"+p);Object.keys(P).forEach(function(k){P[k]=P[k][0];});return P;},_replaceDataWithPlaceholders:function(m){var o=JSON.parse(JSON.stringify(m)),n=this._getNavigationAction(o);if(O.get(["sap.card","header","title"],o)){O.set(["sap.card","header","title"],this.PLACEHOLDERS.TITLE,o);}if(O.get(["sap.card","header","subTitle"],o)){O.set(["sap.card","header","subTitle"],this.PLACEHOLDERS.SUBTITLE,o);}if(O.get(["sap.app","tags","keywords"],o)){O.set(["sap.app","tags","keywords"],this.PLACEHOLDERS.SEARCH_KEYWORDS,o);}if(O.get(["sap.card","header","icon","src"],o)){O.set(["sap.card","header","icon","src"],this.PLACEHOLDERS.ICON,o);}if(O.get(["parameters","intentSemanticObject"],n)){O.set(["parameters","intentSemanticObject"],this.PLACEHOLDERS.SEMANTIC_OBJECT,n);}if(O.get(["parameters","intentAction"],n)){O.set(["parameters","intentAction"],this.PLACEHOLDERS.ACTION,n);}if(O.get(["parameters","url"],n)){O.set(["parameters","url"],this.PLACEHOLDERS.TARGET_URL,n);}if(O.get(["parameters","intentParameters"],n)){O.set(["parameters","intentParameters"],this.PLACEHOLDERS.PARAMETERS,n);}return o;},_getNavigationAction:function(m){var a=O.get(["sap.card","header","actions"],m),A;if(a){for(var i=0;i<a.length;i++){A=a[i];if(A.type==="Navigation"){return A;}}}return null;}};return M;});
sap.ui.predefine('sap/ushell/components/container/ApplicationContainer',["sap/ui/Device","sap/ushell/utils","sap/ushell/ApplicationType","sap/m/MessagePopover","sap/ui/core/Component","sap/ui/core/ComponentContainer","sap/ui/core/Control","sap/ui/thirdparty/URI","sap/ushell/EventHub","sap/ui/core/Icon","sap/ushell/System","sap/ushell/User","sap/m/Text","sap/base/util/UriParameters","sap/base/util/deepEqual","sap/base/util/uid","sap/base/security/encodeXML"],function(D,u,A,M,C,a,b,U,E,I,S,c,T,d,f,g,h){"use strict";var p="sap.ushell.components.container.",s=p+"ApplicationContainer",i="sap.ushell.Container.dirtyState.",l,o,H,r;var j=["sap-ach","sap-fiori-id","sap-hide-intent-link","sap-priority","sap-tag","sap-ui-app-id-hint","sap-ui-debug","sap-ui-fl-control-variant-id","sap-ui-fl-max-layer","sap-ui-tech-hint","sap-ui2-tcode","sap-ui2-wd-app-id","sap-ui2-wd-conf-id","sap-ushell-cdm-site-url","sap-ushell-defaultedParameterNames","sap-ushell-navmode","sap-ushell-next-navmode","sap-ushell-url"];
function k(e){var c1=sap.ushell.Container.getService("CrossApplicationNavigation");c1.isUrlSupported(e.url).done(function(){e.promise.resolve({"allowed":true,"id":e.id});}).fail(function(){e.promise.resolve({"allowed":false,"id":e.id});});}
function m(e){var c1={"asyncURLHandler":b1.prototype._adaptIsUrlSupportedResultForMessagePopover};if(M&&M.setDefaultHandlers){M.setDefaultHandlers(c1);}E.emit("StepDone",e.stepName);}
E.once("initMessagePopover").do(m);l=new u.Map();
function n(e){return l.get(e.getId());}
function q(){return o;}
function t(e){var c1=new d(e).mParams,d1=c1["sap-xapp-state"],e1;delete c1["sap-xapp-state"];e1={startupParameters:c1};if(d1){e1["sap-xapp-state"]=d1;}return e1;}
function v(e,c1){if(!r){r=jQuery.sap.resources({url:jQuery.sap.getModulePath(p)+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});}return r.getText(e,c1);}
function w(){return new I({size:"2rem",src:"sap-icon://error",tooltip:b1.prototype._getTranslatedText("an_error_has_occured")});}
function x(e){var c1=e.getAggregation("child"),d1;if(c1 instanceof a){d1=c1.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");jQuery.sap.log.debug("unloading component "+d1,null,s);}e.destroyAggregation("child");}
function y(e,c1,d1){var e1,f1,g1,h1,i1,j1,k1,l1={},m1,n1;g1=c1.indexOf("?");if(g1>=0){j1=b1.prototype._getParameterMap(c1);l1=j1.startupParameters;c1=c1.slice(0,g1);}if(c1.slice(-1)!=="/"){c1+="/";}if(/\.view\.(\w+)$/i.test(d1)){i1=/^SAPUI5=(?:([^/]+)\/)?([^/]+)\.view\.(\w+)$/i.exec(d1);if(!i1){jQuery.sap.log.error("Invalid SAPUI5 URL",d1,s);return b1.prototype._createErrorControl();}k1=i1[1];m1=i1[2];n1=i1[3].toUpperCase();if(k1){m1=k1+"."+m1;}else{h1=m1.lastIndexOf(".");if(h1<1){jQuery.sap.log.error("Missing namespace",d1,s);return b1.prototype._createErrorControl();}k1=m1.slice(0,h1);}}else{k1=d1.replace(/^SAPUI5=/,"");}jQuery.sap.registerModulePath(k1,c1+k1.replace(/\./g,"/"));b1.prototype._destroyChild(e);if(m1){if(e.getApplicationConfiguration()){l1.config=e.getApplicationConfiguration();}f1=sap.ui.view({id:e.getId()+"-content",type:n1,viewData:l1||{},viewName:m1});e.fireEvent("applicationConfiguration");}else{jQuery.sap.log.debug("loading component "+k1,null,s);var o1=j1?{startupParameters:j1.startupParameters}:{startupParameters:{}};if(j1&&j1["sap-xapp-state"]){o1["sap-xapp-state"]=j1["sap-xapp-state"];}if(e.getApplicationConfiguration()){o1.config=e.getApplicationConfiguration();}e1=sap.ui.component({id:e.getId()+"-component",componentData:o1,name:k1});e.fireEvent("applicationConfiguration",{"configuration":e1.getMetadata().getConfig()});f1=new a({id:e.getId()+"-content",component:e1});}f1.setWidth(e.getWidth());f1.setHeight(e.getHeight());f1.addStyleClass("sapUShellApplicationContainer");e.setAggregation("child",f1,true);return f1;}
function z(e,c1){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell",e,c1);},0);}
function B(e,c1,d1){var e1,f1,g1,h1,i1={startupParameters:{}},j1,k1=e.getComponentHandle(),l1=sap.ushell.Container.getService("PluginManager"),m1,n1;u.addTime("createUi5Component");e1=c1.indexOf("?");if(e1>=0){h1=b1.prototype._getParameterMap(c1);i1={startupParameters:h1.startupParameters};if(h1["sap-xapp-state"]){i1["sap-xapp-state"]=h1["sap-xapp-state"];}c1=c1.slice(0,e1);}if(e.getApplicationConfiguration()){i1.config=e.getApplicationConfiguration();}if(c1.slice(-1)!=="/"){c1+="/";}b1.prototype._destroyChild(e);j1={id:e.getId()+"-component",name:d1,componentData:i1};jQuery.sap.log.debug("Creating component instance for "+d1,JSON.stringify(j1),s);sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:d1});if(k1){f1=k1.getInstance(j1);}else{jQuery.sap.registerModulePath(d1,c1);jQuery.sap.log.error("No component handle available for '"+d1+"'; fallback to component.load()",null,s);f1=sap.ui.component({id:e.getId()+"-component",name:d1,componentData:i1});}e.fireEvent("applicationConfiguration",{"configuration":f1.getMetadata().getConfig()});g1=new a({id:e.getId()+"-content",component:f1});g1.setHeight(e.getHeight());g1.setWidth(e.getWidth());g1.addStyleClass("sapUShellApplicationContainer");e._disableRouterEventHandler=b1.prototype._disableRouter.bind(this,f1);sap.ui.getCore().getEventBus().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",e._disableRouterEventHandler);e.setAggregation("child",g1,true);if(l1){m1=l1.getPluginLoadingPromise("RendererExtensions");n1=m1&&m1.state();if(n1==="pending"){m1.done(function(){b1.prototype._publishExternalEvent("appComponentLoaded",{component:f1});}).fail(function(){b1.prototype._publishExternalEvent("appComponentLoaded",{component:f1});});}if(n1==="resolved"||n1==="rejected"){b1.prototype._publishExternalEvent("appComponentLoaded",{component:f1});}}else{b1.prototype._publishExternalEvent("appComponentLoaded",{component:f1});}return g1;}
function F(e){var rt;if((e instanceof C)&&(typeof e.getRouter==="function")){rt=e.getRouter();if(rt&&(typeof rt.stop==="function")){jQuery.sap.log.info("router stopped for instance "+e.getId());rt.stop();}}}
function G(e){var c1=document.createElement("a"),d1=new d(e).get("sap-client"),e1;c1.href=e;e1=c1.protocol+"//"+c1.host;return new S({alias:d1?e1+"?sap-client="+d1:e1,baseUrl:e1,client:d1||undefined,platform:"abap"});}
function J(e,c1){var d1=false,e1=e.getDomRef(),f1,g1;if(e.getIframeWithPost()===true&&e1&&e1.getAttribute&&e1.getAttribute("sap-iframe-app")=="true"){e1=jQuery("#"+e1.getAttribute("id")+"-iframe")[0];}if(e1){f1=U(e._getIFrameUrl(e1)||window.location&&window.location.href||"");g1=f1.protocol()+"://"+f1.host();d1=(c1.source===e1.contentWindow)||(c1.origin===g1);}return d1;}
function K(e,c1,d1){var e1=JSON.stringify({type:"request",service:c1,request_id:g(),body:{}});jQuery.sap.log.debug("Sending post message request to origin ' "+d1+"': "+e1,null,"sap.ushell.components.container.ApplicationContainer");e.postMessage(e1,d1);}
function L(){var e=this.getDomRef();if(!e||e.tagName!=="IFRAME"){if(this.getIframeWithPost()===true&&e&&e.getAttribute&&e.getAttribute("sap-iframe-app")=="true"){return jQuery("#"+e.getAttribute("id")+"-iframe")[0];}return null;}return e;}
function N(e){var c1;if(e===undefined){e=this._getIFrame();}c1=e.src;if(this.getIframeWithPost()===true){c1=jQuery("#"+e.getAttribute("id").replace("-iframe","-form"))[0].action;}return c1;}
function O(e,c1){var d1=e.getUi5ComponentName&&e.getUi5ComponentName(),e1=c1.data;if(typeof d1==="string"){jQuery.sap.log.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(e1)+"' on container of UI5 application '"+d1+"'","Only non UI5 application containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}if(!e.getActive()){jQuery.sap.log.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(e1)+"' on inactive container '"+e.getId()+"'","Only active containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}H(e,c1);}
function P(e,c1){var d1=e._getIFrame(),e1=e.getApplicationType();if(u.isApplicationTypeEmbeddedInIframe(e.getApplicationType(e1))&&d1){var f1=new U(e._getIFrameUrl(d1));var g1=f1.protocol()+"://"+f1.host();d1.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),g1);c1.preventDefault();}}
function Q(e,c1,d1){e.write("<div").writeControlData(c1).writeAccessibilityState(c1).addClass("sapUShellApplicationContainer").writeClasses(c1).addStyle("height",c1.getHeight()).addStyle("width",c1.getWidth()).writeStyles().write(">").renderControl(d1);e.write("</div>");}
function R(e,c1,d1,e1){var f1,g1=function(){var n1=u.getParameterValueBoolean("sap-accessibility");if(n1!==undefined){return n1;}return sap.ushell.Container.getUser().getAccessibilityMode();},h1=function(){var n1=new d(e)||{mParams:{}};if(n1.mParams["sap-theme"]===undefined){return sap.ushell.Container.getUser().getTheme(c.prototype.constants.themeFormat.NWBC);}return undefined;},i1=function(){var n1=false,o1=new d(e)||{mParams:{}};n1=sap.ui.getCore().getConfiguration().getStatistics()&&o1.mParams["sap-statistics"]===undefined;return n1;},j1=function(){var n1=window.hasher&&window.hasher.getHash(),l1="",o1;if(n1&&n1.length>0&&n1.indexOf("sap-iapp-state=")>0){o1=/(?:sap-iapp-state=)([^&/]+)/.exec(n1);if(o1&&o1.length===2){l1=o1[1];}}return l1;},k1=function(){var n1="";var o1=(!!jQuery("body.sapUiSizeCompact").length);var p1=(!!jQuery("body.sapUiSizeCozy").length);if(o1===true){n1="0";}else if(p1){n1="1";}return n1;};e+=e.indexOf("?")>=0?"&":"?";e+="sap-ie=edge";f1=h1();if(f1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-theme="+encodeURIComponent(f1);}if(d1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-target-navmode="+encodeURIComponent(d1);}if(g1()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-accessibility=X";}if(i1()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-statistics=true";}if(e1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=1";}var l1=j1();if(l1&&l1.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-iapp-state="+l1;}var m1=k1();if(m1&&m1.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-touch="+m1;}return u.appendSapShellParam(e,c1);}
function V(e,c1,d1,e1){var f1=c1.getAggregation("child");if(!f1||c1._bRecreateChild){f1=b1.prototype._createUi5Component(c1,d1,e1);c1._bRecreateChild=false;}b1.prototype._renderControlInDiv(e,c1,f1);}
function W(e,c1,d1){var e1=e.getProperty(c1);if(f(e1,d1)){return;}e.setProperty(c1,d1);e._bRecreateChild=true;}
function X(e,c1,d1,e1,f1){var g1;localStorage.removeItem(c1.globalDirtyStorageKey);if(f1&&f1.indexOf("SAPUI5.Component=")===0&&d1===A.URL.type){V(e,c1,e1,f1.replace(/^SAPUI5\.Component=/,""));return;}if(f1&&f1.indexOf("SAPUI5=")===0&&d1===A.URL.type){b1.prototype._renderControlInDiv(e,c1,b1.prototype._createUi5View(c1,e1,f1));return;}jQuery.sap.log.debug("Not resolved as \"SAPUI5.Component=\" or \"SAPUI5=\" , "+"will attempt to load into iframe "+f1);if(!c1.getActive()){jQuery.sap.log.debug("Skipping rendering container iframe","Container '"+c1.getId()+"' is inactive");return;}try{e1=c1.getFrameSource(d1,e1,f1);}catch(ex){jQuery.sap.log.error(ex.message||ex,null,s);c1.fireEvent("applicationConfiguration");e.renderControl(b1.prototype._createErrorControl());return;}if(sap.ushell.Container){g1=b1.prototype._getLogoutHandler(c1);if(!g1){if(u.isApplicationTypeEmbeddedInIframe(d1)){g1=b1.prototype._logout.bind(null,c1);l.put(c1.getId(),g1);sap.ushell.Container.attachLogoutEvent(g1);sap.ushell.Container.addRemoteSystem(b1.prototype._createSystemForUrl(e1));}}else if(!u.isApplicationTypeEmbeddedInIframe(d1)){sap.ushell.Container.detachLogoutEvent(g1);l.remove(c1.getId());}}if(u.isApplicationTypeEmbeddedInIframe(d1)){var i1=c1.getTargetNavigationMode();e1=b1.prototype._adjustNwbcUrl(e1,d1,i1,c1.getIsStateful());u.localStorageSetItem(c1.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL);}e1=Y(e1);if(c1.getIframeWithPost()===true&&u.isApplicationTypeEmbeddedInIframe(d1)){c1.oDeferredRenderer=new jQuery.Deferred();e1=b1.prototype._filterURLParams(e1);var j1=[];var k1=b1.prototype._getParamKeys(e1,j1);b1.prototype._generateRootElementForIFrame(e,c1,true);if(k1.length>0){var l1=sap.ushell.Container.getService("CrossApplicationNavigation");l1.getAppStateData(k1).then(function(h1){var m1;var n1=jQuery("#"+c1.getId());if(n1){m1=sap.ui.getCore().createRenderManager();b1.prototype._buildHTMLElements(m1,c1,h1,j1,e1,true);m1.flush(n1[0]);m1.destroy();c1.oDeferredRenderer.resolve();}},function(h1){b1.prototype._buildHTMLElements(e,c1,undefined,j1,e1,true);c1.oDeferredRenderer.resolve();});}else{b1.prototype._buildHTMLElements(e,c1,undefined,j1,e1,false);c1.oDeferredRenderer.resolve();}b1.prototype._generateRootElementForIFrame(e,c1,false);return;}c1.fireEvent("applicationConfiguration");e.write("<iframe").writeControlData(c1).writeAccessibilityState(c1).writeAttributeEscaped("src",e1).addClass("sapUShellApplicationContainer").writeClasses(c1).addStyle("height",c1.getHeight()).addStyle("width",c1.getWidth()).writeStyles().write("></iframe>");}
function Y(e){var c1=new U();if(c1.query(true).hasOwnProperty("sap-isolation-enabled")){var d1=sap.ushell.Container.getService("URLParsing"),e1=d1.getHash(c1.toString());if(e1){var f1=d1.parseShellHash("#"+e1),g1=d1.paramsToString(f1.params);if(g1&&g1.length>=0){var h1=sap.ushell.Container.getService("AppState").createEmptyAppState(),i1=sap.ushell.Container.getService("AppState").createEmptyAppState(),j1="";if(g1.indexOf("sap-intent-param")>=0){j1=encodeURIComponent(g1);}else{h1.setData(g1);h1.save();j1=encodeURIComponent("sap-intent-param="+h1.getKey());}i1.setData("sap-startup-params="+j1);i1.save();e=e.split("#")[0]+"&sap-intent-param="+i1.getKey()+"#"+window.hasher.getHash();}else{e=e.split("#")[0]+"#"+window.hasher.getHash();}}else{e+="#"+window.hasher.getHash();}}return e;}
function Z(e){var c1=new U(e);c1=c1.removeSearch(j);return c1.toString();}
function $(e,c1){var d1=[],e1;if(e.indexOf("sap-intent-param=")>0){e1=/(?:sap-intent-param=)([^&/]+)/.exec(e);if(e1&&e1.length===2){d1.push([e1[1]]);c1.push("sap-intent-param-data");}}if(e.indexOf("sap-xapp-state=")>0){e1=/(?:sap-xapp-state=)([^&/]+)/.exec(e);if(e1&&e1.length===2){d1.push([e1[1]]);c1.push("sap-xapp-state-data");}}if(e.indexOf("sap-iapp-state=")>0){e1=/(?:sap-iapp-state=)([^&/]+)/.exec(e);if(e1&&e1.length===2){d1.push([e1[1]]);c1.push("sap-iapp-state-data");}}return d1;}
function _(e,c1,d1,e1,f1,g1){var h1=c1.getId()+"-form",i1="",j1="",k1=false;if(d1===undefined){d1=[];}d1.push([sap.ushell.Container.getFLPUrl(true)]);e1.push("sap-flp-url");var l1="";e1.forEach(function(n1,o1){if(d1[o1][0]){if(typeof d1[o1][0]==="object"){l1=JSON.stringify(d1[o1][0]);}else{l1=d1[o1][0];}i1="<input name=\""+n1+"\" value=\""+h(l1)+"\"/>";j1+=i1;}});c1.fireEvent("applicationConfiguration");e.write("<form").writeAttributeEscaped("method","post").writeAttributeEscaped("id",h1).writeAttributeEscaped("name",h1).writeAttributeEscaped("target",c1.getId()+"-iframe").writeAttributeEscaped("action",f1).addStyle("display","none").writeStyles().write(">").writeAttributeEscaped(j1).write("</form>");var m1=c1.sId;if(!g1&&c1.hasStyleClass("hidden")){k1=true;c1.toggleStyleClass("hidden",false);}c1.sId+="-iframe";e.write("<iframe").writeAttributeEscaped("name",c1.getId()).writeControlData(c1).writeAccessibilityState(c1).writeAttributeEscaped("sap-orig-src",f1).addClass("sapUShellApplicationContainer").writeClasses(c1).addStyle("height",c1.getHeight()).addStyle("width",c1.getWidth()).writeStyles().write("></iframe>");c1.sId=m1;if(k1){c1.toggleStyleClass("hidden",true);}}
function a1(e,c1,d1){if(d1){e.write("<div").writeControlData(c1).writeAttributeEscaped("sap-iframe-app","true").addClass("sapUShellApplicationContainer").writeClasses(c1).addStyle("height",c1.getHeight()).addStyle("width",c1.getWidth()).writeStyles().write(">");}else{e.write("</div>");}}
var b1=b.extend(s,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationConfiguration:{type:"object"},applicationType:{defaultValue:"URL",type:p+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},navigationMode:{defaultValue:"",type:"string"},targetNavigationMode:{defaultValue:"",type:"string"},text:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},active:{defaultValue:true,type:"boolean"},"sap-system":{type:"string"},applicationDependencies:{type:"object"},componentHandle:{type:"object"},ui5ComponentName:{type:"string"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},shellUIService:{type:"object"},appIsolationService:{type:"object"},reservedParameters:{type:"object"},coreResourcesFullyLoaded:{type:"boolean"},isStateful:{defaultValue:false,type:"boolean"},iframeHandlers:{defaultValue:"",type:"string"},iframeWithPost:{defaultValue:false,type:"boolean"},beforeAppCloseEvent:{type:"object"}},events:{"applicationConfiguration":{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell",designtime:"sap/ushell/designtime/ApplicationContainer.designtime"},exit:function(){var e,c1=this;if(sap.ushell.Container){e=b1.prototype._getLogoutHandler(c1);if(e){sap.ushell.Container.detachLogoutEvent(e);l.remove(c1.getId());}}localStorage.removeItem(c1.globalDirtyStorageKey);if(c1._unloadEventListener){removeEventListener("unload",c1._unloadEventListener);}if(c1._disableRouterEventHandler){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",c1._disableRouterEventHandler);}if(c1._storageEventListener){removeEventListener("storage",c1._storageEventListener);}if(c1._messageEventListener){removeEventListener("message",c1._messageEventListener);}b1.prototype._destroyChild(c1);if(b.exit){b.exit.apply(c1);}},setHandleMessageEvent:function(e){H=e;},init:function(){var e=this;e.globalDirtyStorageKey=i+g();if(new d(window.location.href).get("sap-post")==="true"){e.setIframeWithPost(true);}e._unloadEventListener=e.exit.bind(e);addEventListener("unload",e._unloadEventListener);e._storageEventListener=function(c1){var d1=e.getApplicationType();if(c1.key===e.globalDirtyStorageKey&&c1.newValue===sap.ushell.Container.DirtyState.PENDING&&u.isApplicationTypeEmbeddedInIframe(d1)){var e1=e._getIFrame();if(e1){jQuery.sap.log.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");var f1=new U(e._getIFrameUrl(e1));var g1=f1.protocol()+"://"+f1.host();e1.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),g1);}}};addEventListener("storage",e._storageEventListener);e._messageEventListener=b1.prototype._handleMessageEvent.bind(null,e);addEventListener("message",e._messageEventListener);},onAfterRendering:function(){var e=this;this.rerender=function(){};if(D.os.ios&&this.$().prop("tagName")==="IFRAME"){this.$().parent().css("overflow","auto");}if(this.oDeferredRenderer){this.oDeferredRenderer.done(function(){var c1=document.getElementById(e.getId()+"-form");if(c1){c1.submit();}});}},renderer:function(e,c1){var d1=c1.getApplication(),e1=c1.launchpadData,f1;if(!c1.getVisible()){b1.prototype._renderControlInDiv(e,c1);return;}if(c1.error){delete c1.error;b1.prototype._renderControlInDiv(e,c1,b1.prototype._createErrorControl());}else if(!d1){b1.prototype._render(e,c1,c1.getApplicationType(),c1.getUrl(),c1.getAdditionalInformation());}else if(!d1.isResolvable()){b1.prototype._render(e,c1,d1.getType(),d1.getUrl(),"");}else if(e1){b1.prototype._render(e,c1,e1.applicationType,e1.Absolute.url.replace(/\?$/,""),e1.applicationData);}else{jQuery.sap.log.debug("Resolving "+d1.getUrl(),null,s);d1.resolve(function(g1){jQuery.sap.log.debug("Resolved "+d1.getUrl(),JSON.stringify(g1),s);c1.launchpadData=g1;b1.prototype._destroyChild(c1);},function(g1){var h1=d1.getMenu().getDefaultErrorHandler();if(h1){h1(g1);}b1.prototype._destroyChild(c1);c1.error=g1;});f1=new T({text:b1.prototype._getTranslatedText("loading",[d1.getText()])});b1.prototype._destroyChild(c1);c1.setAggregation("child",f1);b1.prototype._renderControlInDiv(e,c1,f1);}}});
b1.prototype.getFrameSource=function(e,c1){if(!Object.prototype.hasOwnProperty.call(A.enum,e)){throw new Error("Illegal application type: "+e);}return c1;};
b1.prototype.setUrl=function(e){W(this,"url",e);};
b1.prototype.setAdditionalInformation=function(e){W(this,"additionalInformation",e);};
b1.prototype.setApplicationType=function(e){W(this,"applicationType",e);};
b1.prototype.createPostMessageRequest=function(e,c1){var d1=Date.now().toString();return{"type":"request","request_id":d1,"service":e,"body":c1};};
b1.prototype.setNewTRApplicationContext=function(e){var c1=this._getIFrame();if(!c1){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}e=u.appendSapShellParam(e);var d1=this.createPostMessageRequest("sap.its.startService",{"url":e});return this.postMessageToIframe(d1,c1,true).catch(function(e1){return Promise.reject({eventData:e1,message:"Failed to change application context."});});};
b1.prototype.postMessageToIframe=function(c1,d1,e1){var f1=this;var g1=c1.request_id;return new Promise(function(h1,i1){function j1(n1){var o1;try{o1=JSON.parse(n1.data,f1);if(g1!==o1.request_id){return;}if(o1.status==="success"){h1(o1);}else{i1(o1);}window.removeEventListener("message",j1);}catch(e){h1();jQuery.sap.log.warning("Obtained bad response from framework in response to message "+c1.request_id);jQuery.sap.log.debug("Underlying framework returned invalid response data: '"+n1.data+"'");}}var k1=JSON.stringify(c1);jQuery.sap.log.debug("Sending postMessage "+k1+" to application container '"+f1.getId()+"'");var l1=new U(f1._getIFrameUrl(d1));var m1=l1.protocol()+"://"+l1.host();if(e1){window.addEventListener("message",j1,false);d1.contentWindow.postMessage(k1,m1);}else{d1.contentWindow.postMessage(k1,m1);h1();}});};
b1.prototype.postMessageToCurrentIframe=function(e,c1){if(c1===undefined){c1=false;}var d1=this._getIFrame();if(!d1){if(c1){return Promise.reject({message:"Expected opened iframe not found."});}return;}return this.postMessageToIframe(e,d1,c1);};
b1.prototype.setNewApplicationContext=function(e,c1){var d1=this;var e1=this["setNew"+e+"ApplicationContext"];if(!e1){return Promise.reject({message:"Unsupported application type"});}var f1=this._getIFrame();if(!f1){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var g1=this.createPostMessageRequest("sap.gui.triggerCloseSessionImmediately",{});return this.postMessageToIframe(g1,f1,true).then(function(){return e1.call(d1,c1);},function(h1){return Promise.reject({eventData:h1,message:"Failed to change application context."});});};
b1.prototype.onApplicationOpened=function(e){var c1=this.getIsStateful();if(!c1){return Promise.resolve();}var d1=this.getApplicationType();if(d1==="TR"&&e!=="TR"){var e1=this._getIFrame();if(!e1){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var f1=this.createPostMessageRequest("sap.gui.triggerCloseSession",{});return this.postMessageToIframe(f1,e1,false).catch(function(g1){return Promise.reject({eventData:g1,message:"Failed to change application context."});});}return Promise.resolve();};
b1.prototype.postMessageRequest=function(e,c1){var d1=this._getIFrame();if(!d1){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var e1=this.createPostMessageRequest(e,c1||{});return this.postMessageToIframe(e1,d1,false).catch(function(f1){return Promise.reject({eventData:f1,message:"Failed to post message."});});};
b1.prototype.sendBeforeAppCloseEvent=function(){var e=this.getBeforeAppCloseEvent&&this.getBeforeAppCloseEvent(),c1;if(e&&e.enabled&&e.enabled===true){c1=this.createPostMessageRequest("sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent",e.params);return this.postMessageToIframe(c1,this._getIFrame(),true);}else{return undefined;}};
b1.prototype._getCommunicationHandlers=q;b1.prototype._adaptIsUrlSupportedResultForMessagePopover=k;b1.prototype._getLogoutHandler=n;b1.prototype._getParameterMap=t;b1.prototype._getTranslatedText=v;b1.prototype._createErrorControl=w;b1.prototype._destroyChild=x;b1.prototype._createUi5View=y;b1.prototype._publishExternalEvent=z;b1.prototype._createUi5Component=B;b1.prototype._disableRouter=F;b1.prototype._createSystemForUrl=G;b1.prototype._isTrustedPostMessageSource=J;b1.prototype._handleMessageEvent=O;b1.prototype._logout=P;b1.prototype._renderControlInDiv=Q;b1.prototype._adjustNwbcUrl=R;b1.prototype._render=X;b1.prototype._getParamKeys=$;b1.prototype._buildHTMLElements=_;b1.prototype._generateRootElementForIFrame=a1;b1.prototype._backButtonPressedCallback=K;b1.prototype._getIFrame=L;b1.prototype._getIFrameUrl=N;b1.prototype._filterURLParams=Z;return b1;},true);
sap.ui.predefine('sap/ushell/components/factsheet/Component',["sap/ui/core/UIComponent","sap/ui/core/library"],function(U,c){"use strict";var V=c.mvc.ViewType;
var C=U.extend("sap.ushell.components.factsheet.Component",{
oMainView:null,
metadata:{version:"1.74.0",library:"sap.ushell.components.factsheet",dependencies:{libs:["sap.m","sap.ui.vbm","sap.suite.ui.commons","sap.ui.layout","sap.viz"],components:[]}},
createContent:function(){var o=this.getComponentData();var s=(o&&o.startupParameters)||{};this.oMainView=sap.ui.view({type:V.JS,viewName:"sap.ushell.components.factsheet.views.ThingViewer",viewData:s,height:"100%"}).addStyleClass("ThingViewer");return this.oMainView;},
exit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId());},
onExit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId());}
});
jQuery.sap.setObject("factsheet.Component",C);return C;});
sap.ui.predefine('sap/ushell/components/factsheet/annotation/Mapping',["sap/ui/Device"],function(D){"use strict";var M={};M.initialized=[];
M.parse=function(m,a){var x={},A={},s={},o={},b={},c="",i,j,d,e,f,g,r,h,n,q,t,u,v,w,T,y,z,B,C,E,F,G,H,I,J,K,L,N,O,P,Q,R,S,U,V,W,X,Y;if(D.browser.internet_explorer){x={setNameSpace:function(k){k.setProperty("SelectionNamespaces","xmlns:edmx=\"http://docs.oasis-open.org/odata/ns/edmx\" xmlns:d=\"http://docs.oasis-open.org/odata/ns/edm\"");k.setProperty("SelectionLanguage","XPath");return k;},selectNodes:function(k,x,l){return l.selectNodes(x);},nextNode:function(k){return k.nextNode();},getNodeText:function(k){return k.text;}};}else{x={setNameSpace:function(k){return k;},nsResolver:function(p){var k={"edmx":"http://docs.oasis-open.org/odata/ns/edmx","d":"http://docs.oasis-open.org/odata/ns/edm"};return k[p]||null;},selectNodes:function(k,p,l){var i1=k.evaluate(p,l,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);i1.length=i1.snapshotLength;return i1;},nextNode:function(k,l){return k.snapshotItem(l);},getNodeText:function(k){return k.textContent;}};}var Z=function(k){var l;if(D.browser.internet_explorer){l=new ActiveXObject("Microsoft.XMLHTTP");l.open("GET",k,false);l.send(null);return l.responseXML;}l=jQuery.sap.sjax({url:k,dataType:"xml"});if(l.success){return l.data;}};var $=function(m){var i1={},j1={},k1={},l1=false,i,m1,n1,o1,p1={},j,q1={},r1={},s1=false,t1,l,k,u1,v1,w1,x1,p,y1;for(i=m.dataServices.schema.length-1;i>=0;i-=1){i1=m.dataServices.schema[i];if(i1.entityType){m1=i1.namespace;n1=i1.entityType;o1=i1.complexType;for(j in n1){if(n1.hasOwnProperty(j)){p1=n1[j];r1={};if(p1.hasStream&&p1.hasStream==="true"){continue;}q1={};for(k in p1.property){t1=p1.property[k];if(t1.type.substring(0,m1.length)===m1){for(l in o1){if(o1[l].name===t1.type.substring(m1.length+1)){for(k in o1[l].property){u1=o1[l].property[k];q1[o1[l].name+"/"+u1.name]=u1.type;}}}}else{v1=t1.name;w1=t1.type;for(p in t1.extensions){x1=t1.extensions[p];if((x1.name==="display-format")&&(x1.value==="Date")){w1="Edm.Date";}else{s1=true;if(!r1[v1]){r1[v1]={};}if(x1.namespace&&!r1[v1][x1.namespace]){r1[v1][x1.namespace]={};}r1[v1][x1.namespace][x1.name]=x1.value;}}q1[v1]=w1;}}if(!j1[m1+"."+p1.name]){j1[m1+"."+p1.name]={};}j1[m1+"."+p1.name]=q1;if(s1){if(!k1[m1+"."+p1.name]){l1=true;}k1[m1+"."+p1.name]={};k1[m1+"."+p1.name]=r1;}}}}}if(l1){y1={types:j1,extensions:k1};}else{y1={types:j1};}return y1;};var _=function(p,k,l,s){var i1,j1,k1="";for(i1 in p){if(p.hasOwnProperty(i1)){if(p[i1]){j1=p[i1];if(j1.Value&&j1.Value.Path){k1=a1(j1.Value.Path,k,l,s);if(k1){p[i1].EdmType=k1;}continue;}if(j1.Path){k1=a1(j1.Path,k,l,s);if(k1){p[i1].EdmType=k1;}continue;}if(j1.Facets){p[i1].Facets=_(j1.Facets,k,l,s);continue;}if(j1.Data){p[i1].Data=_(j1.Data,k,l,s);continue;}if(i1==="Data"){p.Data=_(j1,k,l,s);continue;}if(j1.Value&&j1.Value.Apply){p[i1].Value.Apply.Parameters=_(j1.Value.Apply.Parameters,k,l,s);continue;}if(j1.Value&&j1.Type&&(j1.Type==="Path")){k1=a1(j1.Value,k,l,s);if(k1){p[i1].EdmType=k1;}}}}}return p;};var a1=function(p,k,l,s){var i1;if((p.charAt(0)==="@")&&(p.indexOf(s.Alias)===1)){p=p.slice(s.Alias.length+2);}if(p.indexOf("/")>=0){if(k[p.slice(0,p.indexOf("/"))]){l=p.slice(0,p.indexOf("/"));p=p.slice(p.indexOf("/")+1);}}for(i1 in k[l]){if(k[l].hasOwnProperty(i1)){if(p===i1){return k[l][i1];}}}};var b1=function(k){var l="",p="",i,i1={};for(i=0;i<k.attributes.length;i+=1){if((k.attributes[i].name!=="Property")&&(k.attributes[i].name!=="Term")){l=k.attributes[i].name;p=k.attributes[i].value;}}if(l.length>0){i1[l]=h1(p);}return i1;};var c1=function(d,k){var l={},p,i1,j1,k1,l1,m1;if(k.hasChildNodes()){p=x.selectNodes(d,"./d:String",k);if(p.length>0){i1=x.nextNode(p,0);l.String=x.getNodeText(i1);}else{j1=x.selectNodes(d,"./d:Path",k);if(j1.length>0){k1=x.nextNode(j1,0);l.Path=x.getNodeText(k1);}else{l1=x.selectNodes(d,"./d:Apply",k);if(l1.length>0){m1=x.nextNode(l1,0);l.Apply=f1(d,m1);}}}}return l;};var d1=function(d,k,l){var p={},i1,j1,y,k1,l1,m1,n1,o1,p1={},E,C,K,q1,r1;if(k.hasChildNodes()){i1=x.selectNodes(d,"./d:Record | ./d:Collection/d:Record | ./d:Collection/d:If/d:Record",k);if(i1.length){j1=0;for(y=0;y<i1.length;y+=1){k1=x.nextNode(i1,y);l1=e1(d,k1,l);if(k1.getAttribute("Type")){l1.RecordType=h1(k1.getAttribute("Type"));}if(j1===0){if(k1.nextElementSibling||(k1.parentNode.nodeName==="Collection")||(k1.parentNode.nodeName==="If")){p=[];p.push(l1);}else{p=l1;}}else{p.push(l1);}j1+=1;}}else{m1=x.selectNodes(d,"./d:UrlRef",k);if(m1.length>0){for(y=0;y<m1.length;y+=1){n1=x.nextNode(m1,y);p.UrlRef=c1(d,n1);}}else{m1=x.selectNodes(d,"./d:Url",k);if(m1.length>0){for(y=0;y<m1.length;y+=1){n1=x.nextNode(m1,y);p.Url=c1(d,n1);}}else{r1=x.selectNodes(d,"./d:Collection/d:AnnotationPath | ./d:Collection/d:PropertyPath",k);if(r1.length>0){p=[];for(y=0;y<r1.length;y+=1){o1=x.nextNode(r1,y);p1={};p1[o1.nodeName]=x.getNodeText(o1);p.push(p1);}}else{p=b1(k);E=x.selectNodes(d,"./d:Annotation",k);C={};for(K=0;K<E.length;K+=1){C=x.nextNode(E,K);if(C.hasChildNodes()===false){q1=h1(C.getAttribute("Term"));p[q1]=b1(C);}}}}}}}else{p=b1(k);}return p;};var e1=function(d,k,l){var p={},C={},E,K,i1,j1,y,k1,l1,m1,n1,o1;E=x.selectNodes(d,"./d:Annotation",k);for(K=0;K<E.length;K+=1){C=x.nextNode(E,K);if(C.hasChildNodes()===false){i1=h1(C.getAttribute("Term"));p[i1]=b1(C);}}j1=x.selectNodes(d,"./d:PropertyValue",k);if(j1.length>0){for(y=0;y<j1.length;y+=1){k1=x.nextNode(j1,y);l1=k1.getAttribute("Property");p[l1]=d1(d,k1,l);m1=x.selectNodes(d,"./d:Apply",k1);n1=null;for(o1=0;o1<m1.length;o1+=1){n1=x.nextNode(m1,o1);if(n1){p[l1]={};p[l1].Apply=f1(d,n1);}}}}else{p=d1(d,k,l);}return p;};var f1=function(d,k){var l={},p,i1=null,j1=[],i;p=x.selectNodes(d,"./d:*",k);for(i=0;i<p.length;i+=1){i1=x.nextNode(p,i);switch(i1.nodeName){case"Apply":j1.push({"Type":"Apply","Value":f1(d,i1)});break;case"LabeledElement":j1.push({"Name":i1.getAttribute("Name"),"Value":c1(d,i1)});break;default:j1.push({"Type":i1.nodeName,"Value":x.getNodeText(i1)});break;}}l.Name=k.getAttribute("Function");l.Parameters=j1;return l;};var g1=function(l,p){var i1,i,j1,k1,j,k;for(i=m.dataServices.schema.length-1;i>=0;i-=1){i1=m.dataServices.schema[i];if(i1.entityType){j1=i1.namespace+".";k1=i1.entityType;for(k=k1.length-1;k>=0;k-=1){if(j1+k1[k].name===l&&k1[k].navigationProperty){for(j=0;j<k1[k].navigationProperty.length;j+=1){if(k1[k].navigationProperty[j].name===p){return true;}}}}}}return false;};var h1=function(k){for(f in A){if(A.hasOwnProperty(f)){if(k.indexOf(f+".")>=0){k=k.replace(f+".",A[f]+".");return k;}}}return k;};if(this.initialized[a]){return this.initialized[a];}d=Z(a);d=x.setNameSpace(d);e=x.selectNodes(d,"//d:Schema",d);for(i=0;i<e.length;i+=1){g=x.nextNode(e,i);s.Alias=g.getAttribute("Alias");s.Namespace=g.getAttribute("Namespace");}h=x.selectNodes(d,"//edmx:Reference",d);for(i=0;i<h.length;i+=1){r=x.nextNode(h,i);q=x.selectNodes(d,"./edmx:Include",r);if(q&&q.length>0){n=x.nextNode(q,0);if(n.getAttribute("Alias")){A[n.getAttribute("Alias")]=n.getAttribute("Namespace");}else{A[n.getAttribute("Namespace")]=n.getAttribute("Namespace");}}u=x.selectNodes(d,"./edmx:IncludeAnnotations",r);if(u.length>0){for(j=0;j<u.length;j+=1){t=x.nextNode(u,j);if(t.getAttribute("TargetNamespace")){c=t.getAttribute("TargetNamespace");if(!o[c]){o[c]={};}o[c][t.getAttribute("TermNamespace")]=r.getAttribute("Uri");}else{o[t.getAttribute("TermNamespace")]=r.getAttribute("Uri");}}}}if(o){b.annotationReferences=o;}b.aliasDefinitions=A;w=x.selectNodes(d,"//d:Term",d);if(w.length>0){T={};for(y=0;y<w.length;y+=1){v=x.nextNode(w,y);z=h1(v.getAttribute("Type"));T["@"+s.Alias+"."+v.getAttribute("Name")]=z;}b.termDefinitions=T;}B=$(m);if(B.extensions){b.propertyExtensions=B.extensions;}E=x.selectNodes(d,"//d:Annotations ",d);for(y=0;y<E.length;y+=1){C=x.nextNode(E,y);if(C.hasChildNodes()===false){continue;}F=C.getAttribute("Target");G=F.split(".")[0];if(G&&A[G]){F=F.replace(new RegExp(G,""),A[G]);}H=F;I=null;if(F.indexOf("/")>0){H=F.split("/")[0];I=F.replace(H+"/","");}if(!b[H]){b[H]={};}if(I){if(!b.propertyAnnotations){b.propertyAnnotations={};}if(!b.propertyAnnotations[H]){b.propertyAnnotations[H]={};}b.propertyAnnotations[H][I]={};J=x.selectNodes(d,"./d:Annotation",C);for(K=0;K<J.length;K+=1){L=x.nextNode(J,K);if(L.hasChildNodes()===false){N=h1(L.getAttribute("Term"));b.propertyAnnotations[H][I][N]=b1(L);}}}else{O=H.replace(A[G],G);J=x.selectNodes(d,"./d:Annotation",C);for(P=0;P<J.length;P+=1){L=x.nextNode(J,P);Q=L.getAttribute("Qualifier");R=h1(L.getAttribute("Term"));if(Q){R+="#"+Q;}S=d1(d,L,O);S=_(S,B.types,H,s);b[H][R]=S;}V=x.selectNodes(d,"//d:Annotations[contains(@Target, '"+O+"')]//d:PropertyValue[contains(@Path, '/')]//@Path",d);for(i=0;i<V.length;i+=1){U=x.nextNode(V,i);X=U.value;if(b.propertyAnnotations){if(b.propertyAnnotations[H]){if(b.propertyAnnotations[H][X]){continue;}}}W=X.split("/");if(g1(H,W[0],m)){if(!b.expand){b.expand={};}if(!b.expand[H]){b.expand[H]={};}b.expand[H][W[0]]=W[0];}}Y=x.selectNodes(d,"//d:Annotations[contains(@Target, '"+O+"')]//d:Path[contains(., '/')]",d);for(i=0;i<Y.length;i+=1){U=x.nextNode(Y,i);X=x.getNodeText(U);if(b.propertyAnnotations[H]){if(b.propertyAnnotations[H][X]){continue;}}if(!b.expand){b.expand={};}if(!b.expand[H]){b.expand[H]={};}W=X.split("/");if(g1(H,W[0],m)){if(!b.expand){b.expand={};}if(!b.expand[H]){b.expand[H]={};}b.expand[H][W[0]]=W[0];}}}this.initialized[a]=b;}return b;};
return M;},true);
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureTile',["sap/m/CustomTile","sap/m/Button","sap/m/library","sap/ui/Device","./PictureTileRenderer"],function(C,B,m,D){"use strict";var a=m.ButtonType;
var P=C.extend("sap.ushell.components.factsheet.controls.PictureTile",{metadata:{deprecated:true,library:"sap.ushell",properties:{height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"32px"},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"32px"}},associations:{tileContent:{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:false}},events:{pictureDelete:{}}}});
P.prototype.init=function(){this._oDeletePictureButton=new B({icon:"sap-icon://sys-cancel",press:jQuery.proxy(this._deletePictureRequestHandler,this),type:a.Transparent}).addStyleClass("sapCaUiPTDeleteButton");if(!D.system.desktop){this.attachPress(this._tilePressedHandler);this.attachBrowserEvent("swipe",jQuery.proxy(this._tileSwipedHandler,this));this._oDeletePictureButton.addStyleClass("hide");}};
P.prototype.setTileContent=function(t){this.setContent(null);if(t){var i=t.getImage();this.setContent(i);}else{this.setContent(null);}this.setAssociation("tileContent",t);};
P.prototype.setSize=function(w,h){this._width=w;this._height=h;var $=this.$();if($){$.css({width:w+"px",height:h+"px"});jQuery.sap.byId(this.getId()+"-wrapper").addClass("sapCaUiPTWrapper");}};
P.prototype._tilePressedHandler=function(){this.switchVisibility();};
P.prototype.switchVisibility=function(v){var $=this._oDeletePictureButton.$();if(v===undefined){$.toggleClass("hide");}else{$.toggleClass("hide",!v);}};
P.prototype._tileSwipedHandler=function(){var $=this._oDeletePictureButton.$();if($&&!$.hasClass("hide")){$.addClass("hide");}};
P.prototype._deletePictureRequestHandler=function(){this.firePictureDelete();};
return P;});
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureTileRenderer',['jquery.sap.global','sap/m/CustomTileRenderer','sap/ui/core/Renderer'],function(q,C,R){"use strict";var P=R.extend(C);
P.render=function(r,c){q.sap.log.debug("PictureTileRenderer :: begin rendering");r.write("<div ");r.writeControlData(c);r.addClass("sapCaUiPictureTile");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapCaUiPictureTileContent");r.writeClasses();r.write(">");r.write("<div id='"+c.getId()+"-wrapper'>");r.renderControl(c._oDeletePictureButton);this._renderContent(r,c);r.write("</div>");r.write("</div></div>");};
P._renderContent=function(r,t){r.renderControl(t.getContent());};
return P;},true);
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureViewer',["sap/m/TileContainer","sap/ui/Device","sap/ushell/components/factsheet/controls/PictureTile","./PictureViewerRenderer"],function(T,D,P){"use strict";
var a=T.extend("sap.ushell.components.factsheet.controls.PictureViewer",{metadata:{deprecated:true,library:"sap.ushell",properties:{tileScaling:{type:"float",group:"Misc",defaultValue:0.95},removable:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"items",aggregations:{items:{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:true,singularName:"item"}},events:{pictureDeleted:{}}}});
a.prototype.init=function(){T.prototype.init.apply(this);this.setEditable(false);if(sap.ui.getCore().isMobile()){jQuery(window).bind("tap",jQuery.proxy(this._reset,this));var s=sap.ui.getCore().getStaticAreaRef();this.$blocker=jQuery("<div class='sapCaPVBly sapUiBLy'></div>").css("visibility","hidden");jQuery(s).append(this.$blocker);}if(!sap.ui.getCore().isMobile()){jQuery(window).bind("resize",jQuery.proxy(this._resize,this));}this.addStyleClass("sapCaPW");this.addStyleClass("sapCaPWRendering");};
a.prototype._resize=function(){if(this._oDragSession){return;}setTimeout(jQuery.proxy(function(){this._applyDimension();this._update(false);delete this._iInitialResizeTimeout;},this),this._iInitialResizeTimeout);this._iInitialResizeTimeout=0;};
a.prototype.exit=function(){this.$blocker.remove();if(!sap.ui.getCore().isMobile()){jQuery(window).unbind("resize",jQuery.proxy(this._resize,this));}T.prototype.exit.apply(this);if(!D.system.desktop){jQuery(window).unbind("tap",jQuery.proxy(this._reset,this));}};
a.prototype.setTileScaling=function(t){if(t<0||t>1){t=0.75;jQuery.sap.log.error("Tile Scaling should be a float value between 0 and 1 and not "+t+". Setting it to 0.75 by default.");}this.setProperty("tileScaling",t);};
a.prototype.addItem=function(i){this.insertItem(i,this.getItems().length);};
a.prototype.insertItem=function(i,I){var t=new P({tileContent:i});t.attachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));this.insertTile(t,I);this.insertAggregation("items",i,I);return this;};
a.prototype.insertTile=function(t){t.attachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));T.prototype.insertTile.apply(this,arguments);};
a.prototype.deleteTile=function(t){T.prototype.deleteTile.apply(this,arguments);t.destroy();};
a.prototype.deletePicture=function(i){var p,b,n;n=this.getTiles().length;if(typeof i!=="number"||i<0||i>=n){p=this.getPageFirstTileIndex();}else{p=i;}if(p>-1){b=this.getTiles()[p];b.detachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));this.deleteTile(b);this.removeAggregation("items",p,true);}else{jQuery.sap.log.warning("Cannot find and delete a picture at index : "+i);}return this;};
a.prototype.selectPicture=function(i){var n=this.getTiles().length;if(typeof i!=="number"){i=0;}else if(i<0){i=0;}else if(i>=n){i=n-1;}if(this._bRendered){this.addStyleClass("sapCaPWRendering");}this._selectedIndex=i;return this;};
a.prototype.setSelectedIndex=function(i){this.selectPicture(i);};
a.prototype.getCurrentPictureIndex=function(){return this.getPageFirstTileIndex();};
a.prototype._deletePictureRequestHandler=function(e){var p=this.indexOfTile(e.getSource());this.deleteTile(e.getSource());this.firePictureDeleted({index:p});};
a.prototype._reset=function(e){var i=this.getCurrentPictureIndex();var t=this.getTiles();if(i>-1&&t&&t.length>i){var o=t[i];if(o){var $=jQuery(e.target);var b=this.$();if(b.length>0&&$.length>0){var c=$.closest(this.$());if(c.length===0){o.switchVisibility(false);}}}}};
a.prototype.setRemovable=function(v){this.setProperty("removable",v,true);this.toggleStyleClass("sapCaPWEditable",v);};
a.prototype.setEditable=function(){T.prototype.setEditable.call(this,false);};
a.prototype._getTileDimension=function(){if(!this._bRendered){return;}var $=jQuery.sap.byId(this.getId()+"-scrl");var t={width:$.width(),height:$.height()};return t;};
a.prototype.onBeforeRendering=function(){this.addStyleClass("sapCaPWRendering");};
a.prototype.onAfterRendering=function(){var t=this;this._bRendered=true;this._applyDimension();this.$().toggleClass("sapCaPWEditable",this.getRemovable()===true);this._sInitialResizeTimeoutId=setTimeout(function(){t.addStyleClass("sapCaPWRendering");t._applyPageStartIndex(t._selectedIndex);t._update(false);},this._iInitialResizeTimeout);if(D.system.desktop){var f=this.getTiles()[0],i=this._iInitialResizeTimeout;if(f){setTimeout(jQuery.proxy(function(){this._findTile(f.$()).focus();},this),i);}}};
a.prototype._update=function(){T.prototype._update.apply(this,arguments);this.removeStyleClass("sapCaPWRendering");if(sap.ui.getCore().isMobile()){var t=this;var b=this.$blocker;setTimeout(jQuery.proxy(function(){b.fadeOut(200,function(){t.css("visibility","hidden").css("z-index",0);});},this),250);}};
a.prototype._applyDimension=function(){var d=this._getContainerDimension(),i=this.getId(),$=this.$(),t,o=10,b=60,c=jQuery.sap.byId(i+"-cnt"),e,f,p=jQuery.sap.byId(i+"-pager").outerHeight();jQuery.sap.byId(i+"-scrl").css({width:d.outerwidth+"px",height:(d.outerheight-p)+"px"});c.css({height:(d.outerheight-p)+"px",visibility:"visible"});$.css("visibility","visible");t=$.position();e=c.position();f=c.outerHeight();if(jQuery.device.is.phone){o=2;}else if(D.system.desktop){o=0;}jQuery.sap.byId(i+"-blind").css({top:(e.top+o)+"px",left:(e.left+o)+"px",width:(c.outerWidth()-o)+"px",height:(f-o)+"px"});jQuery.sap.byId(i+"-rightedge").css({top:(t.top+o+b)+"px",right:o+"px",height:(f-o-b)+"px"});jQuery.sap.byId(i+"-leftedge").css({top:(t.top+o+b)+"px",left:(t.left+o)+"px",height:(f-o-b)+"px"});};
a.prototype.showBlockerLayer=function(c){if(sap.ui.getCore().isMobile()){var b=20;jQuery(sap.ui.getCore().getStaticAreaRef()).children().each(function(i,v){var z=parseInt(jQuery(v).css("z-index"),10);if(!isNaN(z)){b=Math.max(b,z);}});jQuery.sap.log.debug("blocker layer z-index calculated : "+b+1);this.$blocker.css("z-index",b+1).css("visibility","visible").fadeIn(200,function(){if(c){c.call();}});}else if(c){c.call();}};
return a;});
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureViewerItem',["sap/ui/core/Control","sap/m/Image"],function(C,I){"use strict";
var P=C.extend("sap.ushell.components.factsheet.controls.PictureViewerItem",{metadata:{deprecated:true,library:"sap.ushell",properties:{src:{type:"string",group:"Misc",defaultValue:null}},aggregations:{image:{type:"sap.m.Image",multiple:false}}}});
P.prototype.setSrc=function(s){this.setProperty("src",s);var i=this.getImage();if(i==null){i=new I();}i.setSrc(s);this.setImage(i);return this;};
P.prototype.exit=function(){var i=this.getImage();if(i){i.destroy();}};
return P;});
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureViewerRenderer',['jquery.sap.global','sap/m/TileContainerRenderer'],function(q,T){"use strict";var P={};
P.render=function(r,c){q.sap.log.debug("PictureViewerRenderer :: begin rendering");T.render(r,c);q.sap.log.debug("PictureViewerRenderer :: end rendering");};
return P;},true);
sap.ui.predefine('sap/ushell/components/factsheet/factory/ThingInspector',["jquery.sap.global","sap/suite/ui/commons/UnifiedThingInspector","sap/ui/core/format/NumberFormat","sap/viz/ui5/data/FlattenedDataset","sap/ui/core/Locale","sap/ui/model/type/DateTime","sap/ui/model/type/Time","sap/ui/model/type/Date","sap/ui/model/type/Float","sap/ui/model/type/Integer","sap/ui/model/json/JSONModel","sap/ui/core/Control","sap/m/Image","sap/m/Link","sap/m/Text","sap/ui/core/library","sap/ui/layout/VerticalLayout","sap/m/Label","sap/ui/layout/form/SimpleForm","sap/suite/ui/commons/UnifiedThingGroup","sap/ui/ux3/ThingGroup","sap/ui/core/HTML","sap/m/Column","sap/m/ColumnListItem","sap/m/library","sap/m/Table","sap/m/Page","sap/m/VBox","sap/m/Input","sap/m/List","sap/m/StandardListItem","sap/ui/model/FilterOperator","sap/m/DateTimeInput","sap/ui/model/Filter","sap/m/ViewSettingsItem","sap/m/ViewSettingsCustomItem","sap/ui/core/CustomData","sap/m/ViewSettingsDialog","sap/ui/model/Sorter","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/viz/ui5/Area","sap/viz/ui5/Bar","sap/viz/ui5/Bubble","sap/viz/ui5/Column","sap/viz/ui5/StackedColumn","sap/viz/ui5/StackedColumn100","sap/viz/ui5/Donut","sap/viz/ui5/Heatmap","sap/viz/ui5/HorizontalArea","sap/viz/ui5/Line","sap/viz/ui5/Pie","sap/viz/ui5/Scatter","sap/viz/ui5/Treemap","sap/viz/ui5/types/Title","sap/suite/ui/commons/KpiTile","sap/ui/model/odata/ODataModel","sap/suite/ui/commons/FacetOverview","sap/suite/ui/commons/library","sap/ui/layout/Grid","sap/ui/vbm/VBI","sap/ui/layout/HorizontalLayout","sap/ui/core/Icon","sap/m/Carousel","sap/ui/core/IconPool","sap/ushell/resources","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/LinkActionSheet","sap/ushell/services/AppConfiguration","sap/m/ActionSheet","sap/ushell/ui/footerbar/JamDiscussButton","sap/ushell/ui/footerbar/JamShareButton"],function($,U,N,F,L,D,T,c,d,I,J,C,f,g,h,q,V,r,S,s,t,H,u,v,w,x,P,y,z,A,B,E,G,K,M,O,Q,R,W,X,Y,Z,_,a1,b1,c1,d1,e1,f1,g1,h1,i1,j1,k1,l1,m1,n1,o1,p1,q1,r1,s1,t1,u1,v1,w1,x1,y1,z1,A1,B1,C1,D1){"use strict";var E1=w.URLHelper;var F1=w.PlacementType;var G1=q1.FacetOverviewHeight;var H1=w.DateTimeInputType;var I1=w.ListMode;var J1=w.ListSeparators;var K1=w.BackgroundDesign;var L1=w.ListType;var M1=q.TextAlign;var N1={},O1=[],P1={},Q1={},R1="displayFactSheet",S1,T1;S1=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();if(sap.ui.getCore().getConfiguration().getLanguage()==="ZH"){S1=new L("zh_CN");}
function U1(a){return a<0;}
function V1(a){var b=Number(a).toFixed(0);if(U1(a)){b=Number(b)*-1;}return b;}
function W1(a,b){var e,o,i,n;if(!a){return"";}o=new RegExp(N.oDefaultFloatFormat.groupingSeparator,"g");if(b>=0){b=parseInt(b,10);n=N.getFloatInstance({minFractionDigits:b,maxFractionDigits:b},S1);}else{n=N.getFloatInstance({minFractionDigits:0,maxFractionDigits:99},S1);}e=n.format(a);i=e.replace(/[\D]/g,"");if(i&&i.length>6){a=a.replace(o,"");if(V1(a)<1000){return N.getIntegerInstance().format(a);}n=N.getFloatInstance({minFractionDigits:1,maxFractionDigits:1,style:"short"},S1);return n.format(a);}return e;}
function X1(){var o="",i,j,p,a,b,m,e,k,n,l,D2;b=this.getElementBinding().sPath.split("/")[1];m=this.getModel();e=this.mBindingInfos.value.parameters;k=this.mBindingInfos.value.parts;for(i=0;i<e.length;i+=1){o=o+e[i].string;}for(j=0;j<k.length;j+=1){p=k[j].path;l="{"+p+"}";a=m.oData[b][p];o=o.replace(l,a);}n=k2(o);if($.isNumeric(n)){D2=this.mBindingInfos.value.parts.filter(function(E2){return(E2.path===p);});n=W1(n,D2[0].type.oFormatOptions.maxFractionDigits);this.setDoubleFontSize(true);}this.setValue(n);this.getElementBinding().detachChange(X1);}
var Y1=function(){var a="";if(T1.getName()&&T1.getDescription()){a=T1.getName()+", "+T1.getDescription();}else if(T1.getName()&&!T1.getDescription()){a=T1.getName();}else if(!T1.getName()&&T1.getDescription()){a=T1.getDescription();}return a;};var Z1=function(a){var b,e,i;b=a.slice(1).split("/");e="/";for(i=0;i<b.length;i+=1){if((b[i].indexOf("(")>0)&&(b[i].indexOf("sid(")<0)){break;}else{e+=b[i]+"/";}}return e;};var $1=function(a,m){var e,b,i,n;b=a.slice(m.sServiceUrl.length+1);if(b.indexOf("/")>=0){i=b.split("/");n=i[i.length];e=i[i.length-1];if(e.indexOf("(")>=0){e=e.slice(e.indexOf("("));}e=this.getNavEntitySet(e,n,m.getMetadata());}else if(b.indexOf("(")>=0){e=b.slice(0,b.indexOf("("));}else if(b.indexOf("?")>=0){e=b.slice(0,b.indexOf("?"));}else{e=b;}return e;};var _1=function(a,m){var e,k="",o,b;e=a.slice(m.sServiceUrl.length+1);if(e.indexOf("(")>=0){k=e.slice(e.indexOf("(")+1,e.indexOf(")"));if(k.indexOf("=")<=0){o=m.getServiceMetadata();b=c2($1(a,m),o);k=a2(b,o)+"="+k;}}return k;};var a2=function(e,m){var i,j,a;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.namespace===e.slice(0,e.lastIndexOf("."))){for(j=0;j<a.entityType.length;j+=1){if(a.entityType[j].name===e.slice(e.lastIndexOf(".")+1)){return a.entityType[j].key.propertyRef[0].name;}}}}};var b2=function(e,m){var i,j,a,b;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){b=a.entityContainer[0].entitySet;for(j=b.length-1;j>=0;j-=1){if(b[j].entityType===e){return b[j].name;}}}}};var c2=function(e,m,b){var i,j,a,k,l;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){k=a.entityContainer[0].entitySet;for(j=k.length-1;j>=0;j-=1){if(k[j].name===e){if(b){l=k[j].entityType.slice(a.namespace.length+1);}else{l=k[j].entityType;}return l;}}}}};var d2=function(e,n,m){var i,j,k,a,b,l,o;a=e.split(".");for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];l=a[0];if(a.length>2){for(k=1;k<a.length-1;k+=1){l+="."+a[k];}}if(b.namespace===l){for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===a[a.length-1]){if(b.entityType[j].navigationProperty){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){o=b.entityType[j].navigationProperty[k];return{name:o.relationship,toRole:o.toRole};}}}}}}}};var e2=function(e,n,m){var a,b,o,i,l,j,p,k;a=c2(e,m);if(n.charAt(0)==="@"){if(N1.termDefinitions&&N1.termDefinitions[n]){b=N1.termDefinitions[n];if(b.indexOf("Collection")>=0){b=b.slice(b.indexOf("(")+1,b.indexOf(")"));}return b2(b,m);}}else{o=d2(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){l=m.dataServices.schema[i];if(l.entityContainer&&l.entityContainer[0].associationSet){for(j=l.entityContainer[0].associationSet.length-1;j>=0;j-=1){p=l.entityContainer[0].associationSet[j];if(p.association===o.name){for(k=0;k<p.end.length;k+=1){if(p.end[k].role===o.toRole){return p.end[k].entitySet;}}}}}}}}};var f2=function(e,n,m){var i,j,k,a,o,b,l,p,D2;a=c2(e,m);p=a.split(".")[a.split(".").length-1];o=d2(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];for(j=0;j<b.entityType.length&&!D2;j+=1){if(b.entityType[j].name===p){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){D2=b.entityType[j].navigationProperty[k].toRole;break;}}}}for(j=b.association.length-1;j>=0;j-=1){l=b.association[j];if(b.namespace+"."+l.name===o.name){for(k=0;k<l.end.length;k+=1){if(l.end[k].role===D2){return l.end[k].multiplicity;}}}}}}else{jQuery.sap.log.error("\""+n+"\" wasn't found in the metadata document. Check whether the corresponding search connector is active.");return 0;}};var g2=function(e,m){var o,a,b,i;o={};if(N1.expand){if(N1.expand[c2(e,m)]){a=N1.expand[c2(e,m)];b=[];for(i in a){if(a.hasOwnProperty(i)){b.push(a[i]);}}o.expand=b.join(", ");}}return o;};var h2=function(a,e,o){var m,b,j,k,l,n;for(m=o.dataServices.schema.length-1;m>=0;m-=1){b=o.dataServices.schema[m];for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===e.split(".")[e.split(".").length-1]){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===a){for(l=0;l<b.association.length;l+=1){for(n=b.association[l].end.length-1;n>=0;n-=1){if(b.association[l].end[n].role===b.entityType[j].navigationProperty[k].toRole){return(b.association[l].end[n].type);}}}}}}}}};var i2=function(p,o){var b={},j;b.parts=[];b.parameters=[];for(j=p.length-1;j>=0;j-=1){if(p[j].Type==="Path"){if(p[j].EdmType){switch(p[j].EdmType){case"Edm.DateTimeOffset":case"Edm.DateTime":b.parts.push({path:p[j].Value,type:new D({"UTC":true})});break;case"Edm.Time":b.parts.push({path:p[j].Value+"/ms",type:new T({source:{pattern:"timestamp"},UTC:true})});break;case"Edm.Date":b.parts.push({path:p[j].Value,type:new c({"UTC":true})});break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":b.parts.push({path:p[j].Value,type:new d()});break;case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":b.parts.push({path:p[j].Value,type:new I()});break;default:b.parts.push({path:p[j].Value});break;}}else{b.parts.push({path:p[j].Value});}}else if(p[j].Type==="String"){b.parameters.unshift({string:p[j].Value});}}b.formatter=function(){var a="",e,k,l,i,m="",n=false,D2=0,E2=0;if(arguments&&arguments.length>=1){e=arguments.length-1;l="";i=0;if(p&&p[0]&&(p[0].Type==="String")&&(p[0].Value.substr(0,1)==="#")){n=true;}for(k=0;k<p.length;k+=1){if(p[k].Type==="Path"){l=arguments[e];if(!l||(l.length===0)){if(a.length>i){if(a.indexOf("(")>i){a=a.substr(0,i);}else{a=a.substr(0,i);l=a;}}}else{if(n){l=encodeURIComponent(l);}a+=l;D2+=1;}e-=1;i=a.length;}else{i=a.length;m=p[k].Value;if(m.indexOf("(")!==-1){E2+=1;}if((l&&l.length>0)||(m.indexOf("(")!==-1)||(m&&(m.substr(0,1)==="#"))){a+=p[k].Value;}else{m="";}}}if(o){a=o(a);}a=a.trim();if((D2===1)&&(E2>0)&&(a.substr(0,1)==="(")&&(a.substr(-1)===")")){a=a.substr(1,a.length-2);}return a.trim();}};return b;};var j2=function(o,p){var k;for(k in o){if(o.hasOwnProperty(k)){if(k==="__metadata"){continue;}else if(k===p){return o[k];}else if(typeof o[k]==="object"){return j2(o[k],p);}}}};var k2=function(a){var l,n,b,e={},i;l=a.lastIndexOf("/");n=a.slice(0,l);b=a.slice(l+1);if(!Q1[a]){e=new J();e.loadData(n,null,false);Q1[a]=e.getData();}else{e=Q1[a];}if(Q1[a]&&Q1[a].d){if(!Q1[a].d[b]){i=j2(Q1[a].d,b);}else{i=Q1[a].d[b];}}return i;};var l2=function(o,e,m,a){var b,i,n,j,k,l,p,D2;b=new C();i=n2(o.Value,o.EdmType,e);if(o.Value&&o.Value["com.sap.vocabularies.UI.v1.IsImageURL"]){b=new f({height:"50px"});if(i.BindingInfo){b.bindProperty("src",i.BindingInfo);}else{b.setProperty("src",i.String);}}else{if(o.UrlRef||o.Url||(o.Target&&o.Target.Path)){b=new g({wrapping:true});}else{b=new h();if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){b.setTextAlign(M1.End);}}b.addStyleClass("sapFactsheetUtiDataField");if(i.BindingInfo){b.bindProperty("text",i.BindingInfo);}else{b.setProperty("text",i.String);}}if((o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigation")&&m){n=o.Target.Path;if(N1[e][n.slice(1)]){if(n.charAt(0)==="@"){if(n.indexOf("/")<0){j=N1[e][n.slice(1)].UrlRef;}else{j=N1[e][n.slice(1,n.indexOf("/"))].UrlRef;}b.bindProperty("href",o2(j));}}b.attachPress(function(E2){return false;});}if(o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url.String){b.setHref(o.Url.String);}else{b.bindProperty("href",o2(o.Url));k=new h({wrapping:true});if(i.BindingInfo){k.bindProperty("text",jQuery.extend({},i.BindingInfo));}else{k.setProperty("text",i.String);}b.setVisible(false);l=new V();l.addContent(b);l.addContent(k);if(!O1[O1.indexOf(a)].Links){O1[O1.indexOf(a)].Links=[];}if(o.Url.Apply){p=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));D2=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("?"));}O1[O1.indexOf(a)].Links.push({sSemanticObject:p,sIntend:D2,oVL:l});}}if(l){return l;}return b;};var m2=function(o,l,p,b){var a,e="",i="",m,j,k,n;a=new r(l);a.addStyleClass("sapFactsheetUtiLabel");if(b){e=":";}if(o.Label){if(o.Label.String){a.setText(o.Label.String.trim()+e);a.setTooltip(o.Label.String.trim());}else if(o.Label.Path){a.bindProperty("text",o.Label.Path);a.bindProperty("tooltip",o.Label.Path);}}else if(o.Value){if(o.Value.Path&&p){m=p[o.Value.Path];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}}else if(o.Value.Apply&&(o.Value.Apply.Name==="odata.concat")){for(k in o.Value.Apply.Parameters){if(o.Value.Apply.Parameters.hasOwnProperty(k)){n=o.Value.Apply.Parameters[k];if(n.Type==="Path"){m=p[n.Value];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}break;}}}}a.setText(i+e);a.setTooltip(i);}return a;};var n2=function(o,e,a){var b={},p=[],k=[],l=[],i,j,m,n,D2,E2,F2,G2,H2,I2,J2,K2;var L2=function(a,M2,N2){var m,O2={};m=N1.propertyAnnotations[a];if(m&&m[M2]&&m[M2][N2]){if(m[M2][N2].Path){O2.Type="Path";O2.Value=m[M2][N2].Path;}else{O2.Type="String";O2.Value=m[M2][N2].String;}}return O2;};if(!o){return false;}if(o.Apply){if(o.Apply.Name==="odata.concat"){if(a&&N1.propertyAnnotations&&N1.propertyAnnotations[a]){n=o.Apply.Parameters;for(j=0;j<n.length;j+=1){p.push(n[j]);if(n[j].Type==="Path"){m=L2(a,n[j].Value,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(m)){p.push({Type:"String",Value:" "});p.push({Type:m.Type,Value:m.Value});}m=L2(a,n[j].Value,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(m)){p.push({Type:"String",Value:" "});p.push({Type:m.Type,Value:m.Value});}}}b.BindingInfo=i2(p);}else{b.BindingInfo=i2(o.Apply.Parameters);}}}else if(o.Path){if(o.Path.charAt(0)==="@"){D2=N1[a][o.Path.slice(1,o.Path.indexOf("/"))].UrlRef;E2=o.Path.slice(o.Path.indexOf("/")+1);if(D2&&D2.Apply){F2=D2.Apply.Parameters;switch(D2.Apply.Name){case"odata.concat":k=F2;k.push({Type:"String",Value:"/"+E2});break;case"odata.fillUriTemplate":G2=F2[0].Value.split("{");for(i in G2){if(G2.hasOwnProperty(i)){if(G2[i].indexOf("}")<0){k.push({Type:"String",Value:G2[i]});}else{H2=G2[i].split("}");for(j=1;j<F2.length;j+=1){if(F2[j].Name===H2[0]){I2=F2[j].Value;if(I2.Path){k.push({Type:"Path",Value:I2.Path});}else if(I2.Apply&&I2.Apply.Name&&(I2.Apply.Name.toLowerCase()==="odata.uriencode")){J2=I2.Apply.Parameters[0];k.push({Type:J2.Type,Value:encodeURIComponent(J2.Value)});k.push({Type:"String",Value:"{"+encodeURIComponent(J2.Value)+"}"});}}}k.push({Type:"String",Value:H2[1]});}}}k.push({Type:"String",Value:"/"+E2});b.fnChange=X1;break;default:break;}b.BindingInfo=i2(k,k2);}else if(D2&&D2.Path){k.push({Type:"Path",Value:D2.Path},{Type:"String",Value:"/"+E2});b.BindingInfo=i2(k,k2);}else if(D2&&D2.String){b.String=k2(D2.String+"/"+E2);}}else{b.BindingInfo={};switch(e){case"Edm.DateTimeOffset":case"Edm.DateTime":b.BindingInfo={path:o.Path,type:new D({"UTC":true})};break;case"Edm.Time":b.BindingInfo={path:o.Path+"/ms",type:new T({source:{pattern:"timestamp"},UTC:true})};break;case"Edm.Date":b.BindingInfo={path:o.Path,type:new c({"UTC":true})};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":if((e==="Edm.Decimal")||(e==="Edm.Double")||(e==="Edm.Single")){K2=new d();}else if((e==="Edm.Int16")||(e==="Edm.Int32")||(e==="Edm.Int64")){K2=new I();}if(N1.propertyAnnotations){l.push({Type:"Path",Value:o.Path,EdmType:e},{Type:"String",Value:" "});m=L2(a,o.Path,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(m)){l.push({Type:m.Type,Value:m.Value});}m=L2(a,o.Path,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(m)){l.push({Type:m.Type,Value:m.Value});}b.BindingInfo=i2(l);}else{b.BindingInfo={path:o.Path,type:K2};}break;default:b.BindingInfo={path:o.Path};break;}}}else if(o.String){b.String=o.String;}return b;};var o2=function(o){var a=[],p,b,j,e,i={},k,l,m;if(o&&o.Apply){p=o.Apply.Parameters;switch(o.Apply.Name){case"odata.fillUriTemplate":p[0].Value=p[0].Value.trim();b=p[0].Value.split("{");for(j=0;j<b.length;j+=1){if(b[j].indexOf("}")<0){a.push({"Value":b[j],"Type":"String"});}else{e=b[j].split("}");i={};i.Value=e[0];i.Type="Path";for(j=1;j<p.length;j+=1){if(p[j].Name===i.Value){k=p[j].Value;if(k.Path){i.Value=k.Path;}else if(k.Apply&&k.Apply.Name&&k.Apply.Name.toLowerCase()==="odata.uriencode"){i.Value=k.Apply.Parameters[0].Value;}break;}}a.push(i);a.push({"Value":e[1],"Type":"String"});}}l=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(l&&l.url){m=jQuery.sap.getUriParameters(l.url).get("sap-system");if(m){a.push({Type:"String",Value:"&sap-system="+m});}}break;default:break;}}return i2(a);};var p2=function(o){var a=M1.Begin;if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){a=M1.End;}return a;};var q2=function(m,e,a,o,b,k){var i,j=0,l=0,n=0,p=0,D2,E2,F2,G2,H2,I2;if(!b){b=m.getServiceMetadata();}if(!a){a=[];}D2=c2(e,b);I2=new S({labelMinWidth:150,maxContainerCols:2});E2=(N1.propertyExtensions)?N1.propertyExtensions[D2]:[];if(o&&o.High){l=o.High;}if(o&&o.Medium){n=o.Medium;}if(o&&o.Low){p=o.Low;}for(i=0;i<a.length;i+=1){F2=x2(a[i]);if(o&&(F2==="High")){if(l){l-=1;}else{continue;}}else if(o&&(F2==="Medium")){if(n){n-=1;}else{continue;}}else if(o&&(F2==="Low")){if(p){p-=1;}else{continue;}}if(o&&o.Total&&(j>=o.Total)){break;}j+=1;G2=new C().setModel(m);H2=m2(a[i],{textAlign:M1.End},E2,false);H2.addStyleClass("sapFactsheetUtiFormPadding");G2=l2(a[i],D2,b,k);G2.addStyleClass("sapFactsheetUtiFormPadding");if(G2.setTextAlign){G2.setTextAlign(M1.Begin);}I2.addContent(H2);I2.addContent(G2);}I2.addStyleClass("sapFactsheetUtiFormLayout");return I2;};var r2=function(m,e,o,b,a){var j="",k=[],i,l,n,p,D2,E2,F2,G2,H2,I2,J2,K2,L2,M2,N2;l=m.getServiceMetadata();switch(o.RecordType){case"com.sap.vocabularies.UI.v1.ReferenceFacet":n=new s();if(o.Label&&o.Label.String){n.setTitle(o.Label.String);}p=o.Target.AnnotationPath;D2=p.substring(p.lastIndexOf("@")+1);p=p.substring(0,p.lastIndexOf("@")-1);if(p){j=f2(e,p,l);}E2=D2.split("#");switch(E2[0]){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":case"com.sap.vocabularies.UI.v1.Badge":case"com.sap.vocabularies.UI.v1.Identification":if(p){F2=e2(e,p,l);L2=c2(F2,l);}else{L2=c2(e,l);}if(E2[0]==="com.sap.vocabularies.UI.v1.Chart"){D2="com.sap.vocabularies.UI.v1.LineItem";}M2=N1[L2][D2];if(N1.propertyExtensions){N2=N1.propertyExtensions[L2];}if(j==="*"&&E2[0]!=="com.sap.vocabularies.UI.v1.Identification"){G2=t2(m,M2,L2,l,b+"/"+p,o,N2,a);n.setContent(G2);}if(E2[0]==="com.sap.vocabularies.UI.v1.Identification"){H2=N1[L2]["com.sap.vocabularies.UI.v1.Identification"];I2=new V({width:"100%"}).setModel(m);if(p){I2.addContent(q2(m,F2,H2,null,null,a)).addStyleClass("sapFactsheetUtiPanel");I2.bindElement(b+"/"+p);}else{I2.addContent(q2(m,e,H2,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}n.setContent(I2);}break;case"com.sap.vocabularies.UI.v1.StatusInfo":if(p){F2=e2(e,p,l);J2=N1[c2(F2,l)]["com.sap.vocabularies.UI.v1.StatusInfo"];n.setContent(q2(m,F2,J2,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p));}else{J2=N1[c2(e,l)]["com.sap.vocabularies.UI.v1.StatusInfo"];n.setContent(q2(m,e,J2,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}break;case"com.sap.vocabularies.UI.v1.FieldGroup":K2=N1[c2(e,l)][D2];if(K2){if(!n.getTitle()||(n.getTitle()==="")){if(K2.Label){if(K2.Label.String){n.setTitle(K2.Label.String);}else if(K2.Label.Path){n.bindProperty("title",K2.Label.Path);}}}if(p){F2=e2(e,p,l);n.setContent(q2(m,F2,K2.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p));}else{n.setContent(q2(m,e,K2.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}}break;default:break;}return n;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":n=new t({title:o.Label.String});n.setContent(s2(o));return n;case"com.sap.vocabularies.UI.v1.CollectionFacet":for(i=0;i<o.Facets.length;i+=1){k.push(r2(m,e,o.Facets[i],b,a));}return k;default:break;}};var s2=function(o){var i,a,b;switch(o.UrlContentType.String){case"image/png":case"image/jpeg":case"image/gif":i=new f({width:"100%"});if(o.Url.String){i.setSrc(o.Url.String);}return i;default:a=new H();if(o.Url.String){a.setContent("<iframe src = '"+o.Url.String+"' width='100%' height='250px' frameborder='0'></iframe>");}else if(o.Url.Path){a.bindProperty("content",{path:o.Url.Path,formatter:function(){b="<iframe src = '"+o.Url.Path+"' width='100%' height='250px' frameborder='0'></iframe>";return b;}});}return a;}};var t2=function(m,a,e,o,b,l,n,D2){var E2=[],F2=[],G2=[],H2=[],I2=[],J2=[],K2=false,i,k,L2,M2,N2,O2,P2,Q2,R2,S2,T2,U2,V2,W2,X2,Y2,Z2,$2,_2,a3,b3;_2=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(!o){o=m.getServiceMetadata();}L2=(N1.propertyExtensions)?N1.propertyExtensions[e]:[];M2=6;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){M2=5;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){M2=4;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){M2=3;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){M2=2;}N2=0;O2=0;for(i=0;i<a.length;i+=1){P2=x2(a[i]);if(P2==="High"){N2+=1;}}if(M2>N2){O2=M2-N2;}else if(M2<N2){N2=M2;}H2.push(new u({visible:false}));G2.push(new h().bindText("__metadata/uri"));for(i=0;i<a.length;i+=1){b3="";S2=new C();P2=x2(a[i]);S2=l2(a[i],e,o,D2);Q2=m2(a[i],null,L2);if(a[i].Value.Path){Y2=a[i].Value.Path;if(n&&n[Y2]&&n[Y2]["http://www.sap.com/Protocols/SAPData"]&&n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable){Q2.data("IsSortable",n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable);if(n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable==="true"){K2=true;}}else{Q2.data("IsSortable","true");K2=true;}if(n&&n[Y2]&&n[Y2]["http://www.sap.com/Protocols/SAPData"]&&n[Y2]["http://www.sap.com/Protocols/SAPData"].filterable){Q2.data("IsFilterable",n[Y2]["http://www.sap.com/Protocols/SAPData"].filterable);if(n[Y2]["http://www.sap.com/Protocols/SAPData"].filterable==="true"){K2=true;}}else{Q2.data("IsFilterable","true");K2=true;}}else{a3=true;for(k=0;k<a[i].Value.Apply.Parameters.length;k+=1){if(a[i].Value.Apply.Parameters[k].Type==="Path"){Y2=a[i].Value.Apply.Parameters[k].Value;if(n[Y2]&&n[Y2]["http://www.sap.com/Protocols/SAPData"]&&n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable){if(n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable==="false"){a3=false;b3="";break;}}if(b3){b3+=";";}b3+=Y2;}}Y2=b3;if(a3===false){Q2.data("IsSortable","false");}else{Q2.data("IsSortable","true");K2=true;}Q2.data("IsFilterable","false");}if(a[i].EdmType){Q2.data("EdmType",a[i].EdmType);}Q2.data("ColumnName",Y2);E2.push(Q2);F2.push(S2);if(P2==="High"){if(N2>0){R2=true;N2-=1;}else{R2=false;}}else if(P2==="Medium"){if(O2>0){R2=true;O2-=1;}else{R2=false;}}else{R2=false;}H2.push(new u({header:Q2,hAlign:p2(a[i]),visible:R2}));G2.push(S2);}T2=new v({type:L1.Navigation,unread:false,cells:G2});if(l){U2=l.Label.String;}T2.attachPress({aColumns:a,aLabels:E2,aControls:F2,sTitle:U2},function(j,p){var i,i3,j3,Q2,k3,l3,m3;i3=j.getSource().getCells()[0].getText().substr(j.getSource().getCells()[0].getText().lastIndexOf("/"));j3=new x({backgroundDesign:K1.Transparent,showSeparators:J1.None,columns:[new u({hAlign:M1.End}),new u()]});j3.addStyleClass("sapFactsheetUtiPanel");j3.addStyleClass("sapFactsheetUtiTilePadding");j3.addStyleClass("sapFactsheetUtiTableNoTopBorder");j3.bindElement(i3);for(i=0;i<a.length;i+=1){Q2=E2[i].clone();Q2.setText(Q2.getText()+":");m3=F2[i].clone();Q2.setLabelFor(m3);j3.addItem(new v({cells:[Q2,m3]}));}k3=new s({content:j3,title:U2,description:Y1()});l3=new P({title:T1.getTitle(),showNavButton:true,content:[k3]});T1.navigateToPage(l3,true);T1.attachAfterNavigate(j3,function(j){if(j.getParameters().getParameters().toId.indexOf("__page")>=0){var n3;n3=j3.getItems();if(n3.length>0&&O1.indexOf(D2)>=0){O1[O1.indexOf(D2)].bLoaded=true;O1[O1.indexOf(D2)].bProcessed=false;O1[O1.indexOf(D2)].bIsTable=true;O1[O1.indexOf(D2)].oTableItems=n3;B2(O1.indexOf(D2));}}});});V2=new x({growing:true,columns:H2});V2.setModel(m);V2.bindItems({path:b,template:T2});var c3=new y({items:[new z({placeholder:_2.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,i3,j3,k3,i;p=j.getSource().getParent().getParent().getId();i3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));j3=i3.getFilterItems();for(i=0;i<j3.length;i+=1){if(j3[i]instanceof O&&j3[i].getKey()===this.oParent.data("ColumnName")){k3=j3[i];break;}}if(k3){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){k3.setSelected(false);k3.setFilterCount(0);}else{k3.setSelected(true);k3.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});var d3=new y({items:[new A({mode:I1.SingleSelectLeft,includeItemInSelection:true,items:[new B({title:_2.getText("USHELL_FACTSHEET_GREATER_THEN")}).data("FilterOperator",E.GT),new B({title:_2.getText("USHELL_FACTSHEET_EQUALS")}).data("FilterOperator",E.EQ),new B({title:_2.getText("USHELL_FACTSHEET_LESS_THEN")}).data("FilterOperator",E.LT)]}),new z({placeholder:_2.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,i3,j3,k3,i;p=j.getSource().getParent().getParent().getId();i3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));j3=i3.getFilterItems();for(i=0;i<j3.length;i+=1){if((j3[i]instanceof O)&&(j3[i].getKey()===this.oParent.data("ColumnName"))){k3=j3[i];break;}}if(k3){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){k3.setSelected(false);k3.setFilterCount(0);}else{k3.setSelected(true);k3.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});new y({items:[new A({mode:I1.SingleSelectLeft,includeItemInSelection:true,items:[new B({title:_2.getText("USHELL_FACTSHEET_AFTER")}).data("FilterOperator",E.GT),new B({title:_2.getText("USHELL_FACTSHEET_AT")}).data("FilterOperator",E.EQ),new B({title:_2.getText("USHELL_FACTSHEET_BEFORE")}).data("FilterOperator",E.LT)]}),new G({type:H1.Date,valueFormat:new D({pattern:"yyyy/MM/dd HH:mm:ss UTC+00:00"}).getOutputPattern(),placeholder:_2.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,i3,j3,k3,i;p=j.getSource().getParent().getParent().getId();i3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));j3=i3.getFilterItems();for(i=0;i<j3.length;i+=1){if((j3[i]instanceof O)&&(j3[i].getKey()===this.oParent.data("ColumnName"))){k3=j3[i];break;}}if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){k3.setSelected(false);k3.setFilterCount(0);}else{k3.setSelected(true);k3.setFilterCount(1);}}}).addStyleClass("sapFactsheetUtiFilterInput")]});var e3=function(S2){var j=[],p=S2.getItems(),i,i3,j3;if(p[0].getParent().data("EdmType")==="Edm.String"&&p[0].getValue()){j.push(new K(p[0].getParent().data("ColumnName"),E.Contains,p[0].getValue()));}else if(p[0].getParent().data("EdmType")==="Edm.Decimal"&&p[1].getValue()){for(i=0;i<p[0].getItems().length;i+=1){if(p[0].getItems()[i].getSelected()===true){i3=p[0].getItems()[i].data("FilterOperator");break;}}j3=p[1].getValue();for(i=j3.length-1;i>0;i-=1){if(j3[i]===","){j3=j3.replace(j3[i],".");break;}}j.push(new K(p[1].getParent().data("ColumnName"),i3,j3));}else if(p[0].getParent().data("EdmType")==="Edm.Date"&&p[1].getValue()){for(i=0;i<p[0].getItems().length;i+=1){if(p[0].getItems()[i].getSelected()===true){i3=p[0].getItems()[i].data("FilterOperator");break;}}j.push(new K(p[1].getParent().data("ColumnName"),i3,p[1].getValue()));}else{j.push(new K(p[0].getParent().data("ColumnName"),E.EQ,p[0].getValue()));}return j;};var f3=function(p){var i3=p.getSource(),j3=i3.getFilterItems(),i,j,k3;for(i=0;i<j3.length;i+=1){if(j3[i]&&j3[i]instanceof O){j3[i].setSelected(false);j3[i].setFilterCount(0);k3=j3[i].getCustomControl().getItems();for(j=0;j<k3.length;j+=1){if((k3[j]instanceof z)||(k3[j]instanceof G)){k3[j].setValue("");}if((k3[j]instanceof A)&&(k3[j].getSelectedItem()!==null)){k3[j].removeSelections();}}}}};var g3=f3;for(i=0;i<H2.length;i+=1){if(H2[i+1]){Q2=E2[i].clone();if(Q2.getText()&&(Q2.data("IsSortable")==="true")&&H2[i+1].getVisible()){W2=new M({text:Q2.getText(),key:Q2.data("ColumnName")});if(i===0){W2.setSelected(true);}W2.Sort=Q2.Sort;I2.push(W2);}if(Q2.getText()&&(Q2.data("IsFilterable")==="true")){if(Q2.data("EdmType")==="Edm.String"){$2=c3.clone().data("ColumnName",Q2.data("ColumnName")).data("EdmType",Q2.data("EdmType"));}else if(Q2.data("EdmType")==="Edm.Decimal"){$2=d3.clone().data("ColumnName",Q2.data("ColumnName")).data("EdmType",Q2.data("EdmType"));}if((Q2.data("EdmType")==="Edm.String")||(Q2.data("EdmType")==="Edm.Decimal")){Z2=new O({key:Q2.data("ColumnName"),text:Q2.getText(),customControl:$2,customData:new Q({key:"callback",value:e3})});J2.push(Z2);}}}}X2=new R({sortItems:I2,filterItems:J2,cancel:g3,resetFilters:f3,confirm:function(j){var i3=[],j3=[],k3=[],l3=[],i,p,m3,n3,o3,p3,q3;m3=j.getParameters();n3=V2.getBinding("items");if(m3.sortItem){o3=m3.sortItem.getKey();p3=m3.sortDescending;if(o3.indexOf(";")>0){j3=o3.split(";");for(i=0;i<j3.length;i+=1){i3.push(new W(j3[i],p3));}}else if(o3){i3.push(new W(o3,p3));}n3.sort(i3);}p=m3;for(i=0;i<p.filterItems.length;i+=1){if(p.filterItems[i]instanceof O){q3=p.filterItems[i].getCustomData()[0].getValue();k3=q3.apply(this,[p.filterItems[i].getCustomControl()]);if(k3){if(!Array.isArray(k3)){k3=[k3];}l3=l3.concat(k3);}}else if(p.filterItems[i]instanceof M){k3=p.filterItems[i].getCustomData()[0].getValue();if(k3){if(!Array.isArray(k3)){k3=[k3];}l3=l3.concat(k3);}}}n3.filter(l3);}});if(K2===true&&(I2.length>0||J2.length>0)){V2.setHeaderToolbar(new X({content:[new r(),new Y(),new Z({icon:"sap-icon://drop-down-list",press:function(){X2.open();},tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("P13NDIALOG_VIEW_SETTINGS")})]}));}V2.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));var h3=(function(D2){return function(j){var p=this.getItems();if(p.length===0){this.setNoDataText(_2.getText("FACETOVERVIEW_NO_CONTENT_TEXT"));}else{this.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));}if(p.length>0&&O1.indexOf(D2)>=0){O1[O1.indexOf(D2)].bLoaded=true;O1[O1.indexOf(D2)].bProcessed=false;O1[O1.indexOf(D2)].bIsTable=true;O1[O1.indexOf(D2)].oTableItems=p;}B2(O1.indexOf(D2));};}(D2));V2.attachUpdateFinished(h3);return V2;};var u2=function(a,o,b,e){var i;switch(a){case"com.sap.vocabularies.UI.v1.ChartType/Area":i=new _({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bar":i=new a1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bubble":i=new b1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Column":i=new c1({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":i=new d1({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":i=new e1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Donut":i=new f1({});break;case"com.sap.vocabularies.UI.v1.ChartType/HeatMap":i=new g1({});break;case"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":i=new h1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Line":i=new i1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Pie":i=new j1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Scatter":i=new k1({});break;case"com.sap.vocabularies.UI.v1.ChartType/TreeMap":i=new l1({});break;case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked100":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/Radar":case"com.sap.vocabularies.UI.v1.ChartType/Waterfall":break;}if(i){if(o&&o.String){i.setTitle(new m1({visible:true,text:o.String}));}if(b&&b.String){i.setTooltip(b.String);}i.setWidth("100%");i.setHeight("17rem");i.setDataset(e);}else{i=new h({});}return i;};var v2=function(i){var a;i=i||1;if(jQuery.device.is.phone){a=(7*i)+"rem";}else{a=(11*i-1)+"rem";}return a;};var w2=function(a){var b=0,e=0,j=0,i,o;for(i=0;i<a.length;i+=1){o=x2(a[i]);if(o){switch(o){case"High":b+=1;break;case"Medium":e+=1;break;case"Low":j+=1;break;}}}return{High:b,Medium:e,Low:j};};var x2=function(o){var e="";if(o.Importance){e=o.Importance.EnumMember;}else if(o["com.sap.vocabularies.UI.v1.Importance"]){e=o["com.sap.vocabularies.UI.v1.Importance"].EnumMember;}return e.substr(e.indexOf("/")+1);};var y2=function(m,a,e,b){var i=false,o,j,k,l;o=new n1({doubleFontSize:false});if(a.ValueFormat){j=a.ValueFormat.NumberOfFractionalDigits.Int;}if(a.Title&&a.Title.String){o.setDescription(a.Title.String);}else if(a.Title&&a.Title.Path){o.bindProperty("description",{path:a.Title.Path});}if(a.Value&&a.Value.String){o.setValue(a.Value.String);}else if(a.Value&&a.Value.Path){k=n2(a.Value,a.Value.EdmType,e);if(k.fnChange){o.setModel(m);o.bindElement(b);o.getElementBinding().attachChange(k.fnChange,o);}if(k.String){if($.isNumeric(k.String)){i=true;o.setValue(W1(k.String,j));}else{o.setValue(k.String);}}else if(k.BindingInfo){l=k.BindingInfo;if(l.parts&&l.parts.length===2){o.bindProperty("valueUnit",l.parts[0]);l.parts[1].type=undefined;l.parts[1].formatter=(function(){return function(n){return W1(n,j);};}(j));o.bindProperty("value",l.parts[1]);}else if(l.parts&&l.parts.length===1){l.parts[0].type=undefined;l.parts[0].formatter=(function(){return function(n){return W1(n,j);};}(j));o.bindProperty("value",l);}else{o.bindProperty("value",l);}}}if(a.Value.EdmType==="Edm.Decimal"||a.Value.EdmType==="Edm.Double"||a.Value.EdmType==="Edm.Single"||a.Value.EdmType==="Edm.Int16"||a.Value.EdmType==="Edm.Int32"||a.Value.EdmType==="Edm.Int64"||i===true){o.setDoubleFontSize(true);}return o;};var z2=function(m){var a=[],b=[],e,i,k;var j=function(o){if(l(o)===false){if(Array.isArray(o)){for(i=0;i<o.length;i+=1){l(o[i]);}}else if(typeof o==="object"){for(k in o){if(o.hasOwnProperty(k)){if(o[k].constructor!==String){j(o[k]);}}}}}};var l=function(o){if(o.RecordType&&o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url&&o.Url.Apply){e=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));if(a.indexOf(e)<0){a.push(e);}return true;}}else{return false;}};for(k in N1){if(N1.hasOwnProperty(k)){if(k.indexOf(m.dataServices.schema[0].namespace)>=0){j(N1[k]);}}}for(i=0;i<a.length;i+=1){if(!P1.hasOwnProperty(a[i])){b.push(a[i]);}}return b;};var A2=function(a){var i,o,l,b;if(a.length>0){o=new J();l="/sap/opu/odata/UI2/INTEROP/SemanticObjects?$expand=Links&$format=json";b="&$filter=id%20eq%20%27";for(i=0;i<a.length;i+=1){if(b.length>22){b+="%20or%20id%20eq%20%27"+a[i]+"%27";}else{b+=a[i]+"%27";}}l+=l+b;o.loadData(l);o.attachRequestCompleted(function(){var e=[],i,j,k;if(this.getData().d&&this.getData().d.results){k=this.getData().d.results;for(i=0;i<k.length;i+=1){P1[k[i].id]="";e=k[i].Links.results;for(j=0;j<e.length;j+=1){P1[e[j].id.slice(0,e[j].id.indexOf("~"))]="";}}}P1.InteropCompleted=true;B2();});}else{P1.InteropCompleted=true;}};var B2=function(a){var i,j,k,n,b,e,l;if(P1.InteropCompleted===true){for(i=0;i<O1.length;i+=1){if(O1[i].bLoaded&&!O1[i].bProcessed&&O1[i].Links){l=O1[i].Links;for(j=0;j<l.length;j+=1){if(P1.hasOwnProperty(l[j].sIntend)===true){if(O1[i].bIsTable===true){if(O1[i].oTableItems){b=O1[i].oTableItems;for(k=0;k<b.length;k+=1){e=b[k].getCells();for(n=0;n<e.length;n+=1){if(e[n]instanceof V&&e[n].getContent()[0].getBindingInfo("href").parts===l[j].oVL.getContent()[0].getBindingInfo("href").parts&&e[n].getContent()[1].getBindingInfo("text").parts===l[j].oVL.getContent()[1].getBindingInfo("text").parts){e[n].getContent()[0].setVisible(true);e[n].getContent()[1].setVisible(false);}}}}}else{l[j].oVL.getContent()[0].setVisible(true);l[j].oVL.getContent()[1].setVisible(false);}}else if(O1[i].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}O1[i].bProcessed=true;}}}}if(a>=0){if(O1[a].bLoaded&&!O1[a].bProcessed&&O1[a].Links){l=O1[a].Links;for(j=0;j<l.length;j+=1){if(O1[a].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}}}}};var C2=function(e,l,T1){var m={},n=[],p=0,D2=0,E2=0,i,j,F2,G2,H2,I2,J2,K2,L2,M2,N2,O2,P2,Q2,R2,S2,T2,U2,V2,W2,X2,Y2,Z2,$2,_2,a3,b3,c3,d3,e3,f3,g3,h3,i3,j3,k3,l3,m3,n3,o3,p3,q3,r3,s3,t3,u3,v3;F2=Z1(e);U2=l.substring(0,l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));V2=l.substring(l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));if(window.location.search.indexOf("cbn_keep_anno_case%3Dtrue")===-1){V2=V2.toLowerCase();}G2=new o1(F2,{annotationURI:U2+V2,loadAnnotationsJoined:true,loadMetadataAsync:false,json:true});G2.setCountSupported(false);T1.setModel(G2);H2=$1(e,G2);I2="/"+e.slice(F2.length);J2=G2.getServiceMetadata();N1=G2.getServiceAnnotations();K2=c2(H2,J2);L2=N1[K2]["com.sap.vocabularies.UI.v1.HeaderInfo"];M2=N1[K2]["com.sap.vocabularies.UI.v1.Facets"];T1.bindElement(I2,g2(H2,J2));W2=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");P1.InteropCompleted=false;A2(z2(J2));T1.addStyleClass("sapFactsheetUtiThingType"+H2.replace(/\s/g,""));if(L2.TypeName.String){T1.setTitle(L2.TypeName.String);}else if(L2.TypeName.Path){T1.bindProperty("title",{path:L2.TypeName.Path});}if(L2.ImageUrl&&L2.ImageUrl.String){T1.setIcon(L2.ImageUrl.String);}else if(L2.ImageUrl&&L2.ImageUrl.Path){T1.bindProperty("icon",{path:L2.ImageUrl.Path});}else if(L2.TypeImageUrl&&L2.TypeImageUrl.String){T1.setIcon(L2.TypeImageUrl.String);}else if(L2.TypeImageUrl&&L2.TypeImageUrl.Path){T1.bindProperty("icon",{path:L2.TypeImageUrl.Path});}if(L2.Title.Value.String){T1.setName(L2.Title.Value.String);}else{T1.bindProperty("name",n2(L2.Title.Value,L2.Title.EdmType,K2).BindingInfo);}if(L2.Description&&L2.Description.Value){if(L2.Description.Value.String){T1.setDescription(L2.Description.Value.String);}else{T1.bindProperty("description",n2(L2.Description.Value,L2.Description.EdmType,K2).BindingInfo);}}for(s3 in N1[K2]){if(N1[K2].hasOwnProperty(s3)){if(s3.search("com.sap.vocabularies.UI.v1.DataPoint")!==-1){t3=N1[K2][s3];if(t3){T1.addKpi(y2(G2,t3,K2,I2));E2+=1;}}if(E2>=3){break;}}}for(i=0;i<M2.length;i+=1){if(M2[i]["com.sap.vocabularies.UI.v1.IsSummary"]){Q2=M2[i];break;}}if(Q2){X2=15;for(j=0;j<Q2.Facets.length;j+=1){Y2=Q2.Facets[j].Target.AnnotationPath.substring(Q2.Facets[j].Target.AnnotationPath.lastIndexOf("@")+1);N2=Q2.Facets[j].Target.AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);Q2.Facets[j].NavPath=N2;Z2=e2(H2,N2,J2);Q2.Facets[j].NavEntitySet=Z2;if(Z2){$2=Z2;}else{$2=H2;}Q2.Facets[j].EntitySet=$2;_2=c2(Z2,J2);if(_2){a3=_2;}else{a3=K2;}Q2.Facets[j].EntityType=a3;b3=[];if(N1[a3][Y2].length){b3=N1[a3][Y2];}else if(N1[a3][Y2].Data.length){b3=N1[a3][Y2].Data;}Q2.Facets[j].Content=b3;for(i=0;i<b3.length;i+=1){c3=x2(b3[i]);if(c3==="High"){p+=1;}else if(c3==="Medium"){D2+=1;}}}if(p>=X2){p=X2;D2=0;}else if((p+D2)>X2){D2=X2-p;if(D2<0){D2=0;}}if(jQuery.device.is.phone){D2=0;}e3=X2-p-D2;m3=new p1({title:W2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT")});O1=[];O1.push(m3);O1[0].bLoaded=false;O1[0].bProcessed=false;O1[0].bIsTable=false;f3=[];h3=D2+p;for(j=0;j<Q2.Facets.length;j+=1){i3=q2(G2,Q2.Facets[j].EntitySet,Q2.Facets[j].Content,{High:p,Medium:D2,Low:0},null,m3).addStyleClass("sapFactsheetUtiTilePadding");if(j>0){i3.addStyleClass("sapFactsheetUtiPaddingTop");}if(Q2.Facets[j].NavPath){i3.bindElement(I2+"/"+Q2.Facets[j].NavPath);}g3=w2(Q2.Facets[j].Content);p-=g3.High;D2-=g3.Medium;if(((g3.High>0)&&((p+g3.High)>0))||((g3.Medium>0)&&((D2+g3.Medium)>0))){f3.push(i3);if(j>0){if(e3>0){e3-=1;}else if(D2>0){D2-=1;}else if(p>0){p-=1;}}}if((p<1)&&(D2<1)){break;}}if(p<0){p=0;}if(D2<0){D2=0;}m=new V({content:f3,width:"100%"});j3=v2();l3=1;if((h3>3)&&(h3<=9)){j3=v2(2);l3=2;}else if(h3>9){j3=v2(3);l3=3;}m3.setContent(m);m3.setRowSpan(l3);if(jQuery.device.is.phone){m3.setHeightType(G1.Auto);}else{m3.setHeight(j3);}m3.addStyleClass("sapFactsheetUtiGeneralInformationOverviewFacet");m3.attachPress({facets:Q2},function(o,a){var b,k,D3,E3,m;T1.removeAllFacetContent();D3=new s();D3.setDescription(Y1());D3.setTitle(W2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));D3.addStyleClass("sapFactsheetUtiGeneralInformationUtg");if(a.facets.Facets.length>1){b="L6 M12 S12";}else{b="L12 M12 S12";}O1[0].Links=[];E3=new V({width:"100%"});for(i=0;i<a.facets.Facets.length;i+=1){if(i%2===0){k=new r1({hSpacing:1,vSpacing:1,defaultSpan:b});}m=r2(G2,H2,a.facets.Facets[i],I2,this);m.addStyleClass("sapFactsheetUtiGeneralInformationUtgContent");if((i===0)&&(a.facets.Facets.length>1)&&(m.getTitle().trim()==="")){m.setTitle(W2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));}k.addContent(m);if(i%2!==0){E3.addContent(k);}}O1[0].bLoaded=true;O1[0].bProcessed=false;O1[0].bIsTable=false;B2(0);if(i%2!==0){E3.addContent(k);}D3.setContent(E3);T1.addFacetContent(D3);T1.navigateToDetail();});T1.addFacet(m3);}var w3=function(O2){return function(a){var i,o,b,k,D3,E3,I2,F3,G3,H3,I3,J3,K3,L3,M3;if((O2.cardinality==="*"&&a.results&&a.results.length&&a.results.length!==0)||(O2.cardinality==="1"&&a)){E3=new J();if(O2.cardinality==="*"){if(a.results&&a.results.length){E3.setData(a);}}else{E3.setData({result:a});I2="/result";}o=new o1("/sap/opu/odata/sap/VBI_APPL_DEF_SRV",false);b=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.GeoLocation"];G3=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.HeaderInfo"];H3=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Identification"];if(b.Longitude&&b.Latitude){D3={"Data":{"Set":{"N":[{"name":"Spots","E":[]}]}}};if(O2.cardinality==="1"){if(b.Longitude.Path&&b.Latitude.Path){k=a[b.Longitude.Path]+";"+a[b.Latitude.Path]+";0";}D3.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}else{for(i=0;i<a.results.length;i+=1){if(b.Longitude.Path&&b.Latitude.Path){k=a.results[i][b.Longitude.Path]+";"+a.results[i][b.Latitude.Path]+";0";}D3.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}if(a.results.length!==0){k=a.results[0][b.Longitude.Path]+";"+a.results[0][b.Latitude.Path]+";0";}}}M3=parseInt(a.__count,10);if(Number(M3)){O2.facet.setQuantity(M3);}var N3=function(S3){var T3,U3,V3,W3,X3;T3=$.parseJSON(S3.getParameters().data);if(T3.Action.name==="DETAIL_REQUEST"&&T3.Action.instance){U3=T3.Action.instance;if(E3.oData.results){I2="/results/"+U3.split(".")[1];}L3=G3.TypeName.String.substring(0,17);W3=parseFloat(v2(0.7))*16;X3=parseFloat(v2(1.5))*16;V3={"SAPVB":{"version":"2.0","xmlns:VB":"VB","Windows":{"Remove":{"name":"Detail1"},"Set":{"name":"Detail1","Window":{"id":"Detail1","type":"callout","refParent":"Main","refScene":"","offsetX":"16","offsetY":"-27","modal":"false","width":X3,"height":W3,"caption":L3,"pos.bind":U3+".GeoPosition"}}},"Scenes":{"Set":{"name":"Details","Scene":{"id":"Details","navControlVisible":"false"}}}}};this.load(V3);}};var O3=function(S3){var s3,T3,Z2,U3;if(!I3){I3=l2(G3.Title,O2.navigationType,J2,O2.facet);I3.setModel(E3);I3.bindElement(I2);J3=l2(G3.Description,O2.navigationType,J2,O2.facet);J3.setModel(E3);J3.bindElement(I2);for(s3 in b.Address){if(s3==="label"){F3=l2({Value:b.Address[s3]},O2.navigationType,J2,O2.facet);F3.setModel(E3);F3.bindElement(I2);break;}}U3=7;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){U3=4;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){U3=5;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){U3=2;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){U3=3;}K3=new V({width:"100%"}).setModel(G2);if(O2.navigationPath){Z2=e2(O2.entitySet,O2.navigationPath,J2);K3.addContent(q2(G2,Z2,H3,{High:U3},null,O2.facet));K3.setModel(E3).bindElement(I2);}else{K3.addContent(q2(G2,O2.entitySet,H3,{High:U3},null,O2.facet)).setModel(E3).bindElement(I2);}}else{I3.bindElement(I2);if(J3){J3.bindElement(I2);}if(F3){F3.bindElement(I2);}if(K3){K3.bindElement(I2);}}T3=parseFloat(v2(1.5))*16*0.95+"px";if(I3){I3.placeAt(S3.getParameter("contentarea").id);I3.addStyleClass("sapFactsheetUtiGeoPopupHead");if(jQuery.device.is.phone){I3.addStyleClass("sapFactsheetUtiGeoPopupHeadFontPhone");}I3.setWidth(T3);}if(J3){J3.placeAt(S3.getParameter("contentarea").id);J3.addStyleClass("sapFactsheetUtiGeoPopupDescr");if(jQuery.device.is.phone){J3.addStyleClass("sapFactsheetUtiGeoPopupDescrFontPhone");}J3.setWidth(T3);}if(F3){F3.placeAt(S3.getParameter("contentarea").id);F3.addStyleClass("sapFactsheetUtiGeoPopupText");F3.setWidth(T3);}if(K3&&K3.getContent()[0]&&K3.getContent()[0].getContent&&K3.getContent()[0].getContent().length>0){K3.placeAt(S3.getParameter("contentarea").id);K3.addStyleClass("sapFactsheetUtiGeoPopupText");K3.setWidth(T3);}if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));};var P3=function(S3){if(I3){I3.destroy();I3=undefined;}if(J3){J3.destroy();J3=undefined;}if(F3){F3.destroy();F3=undefined;}if(K3){K3.destroy();K3=undefined;}$(S3.getParameter("contentarea").id).empty();};var Q3=function(O2){return function(a){var S3,T3,U3,V3,i;V3=a.ProjectJSON;V3=V3.indexOf("{")?V3.substr(V3.indexOf("{")):V3;S3=$.parseJSON(V3);S3.SAPVB.Scenes.Set.SceneGeo.initialStartPosition=k;S3.SAPVB.Scenes.Set.SceneGeo.initialZoom=12;S3.SAPVB.Actions.Set.Action.push({id:"200",name:"TAP_ON_MAP",refEvent:"Click",refScene:"MainScene",refVO:"Map"});if(D3){S3.SAPVB.Data=D3.Data;}for(i=0;i<S3.SAPVB.Scenes.Set.SceneGeo.VO.length;i+=1){if(S3.SAPVB.Scenes.Set.SceneGeo.VO[i].datasource==="Spots"){if(S3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale&&S3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale.split(";").length!==3){S3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale="1.0;1.0;1.0";break;}}}O2.facet.getContent().attachSubmit(function(){if(jQuery.device.is.tablet||jQuery.device.is.phone){O2.facet.firePress();}});O2.facet.getContent().load(S3);O2.facet.attachPress("",function(){var W3=[],X3=[],i,Y3;if(!T3){T3=new s1({width:"100%",height:"100%",plugin:false,config:null});T3.addStyleClass("sapFactsheetUtiGeoPopup");}S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.move="false";S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.zoom="false";S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.pitch="false";S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.yaw="false";S3.SAPVB.Scenes.Set.SceneGeo.SuppressedNavControlVisibility="false";T3.load(S3);if(O2.cardinality==="*"){for(i=0;i<E3.oData.results.length;i+=1){W3.push(E3.oData.results[i][b.Longitude.Path]);X3.push(E3.oData.results[i][b.Latitude.Path]);}}T3.attachSubmit(N3);T3.attachOpenWindow(O3);T3.attachCloseWindow(P3);U3=new s({content:T3,title:O2.facetContent.Label.String,description:Y1()});T1.removeAllFacetContent();T1.addFacetContent(U3);T1.navigateToDetail();T1.attachAfterNavigate(W3,function(Z3){if(Z3.getParameters().getParameters().toId.indexOf("-detail-page")!==-1){if(jQuery.device.is.phone){Y3="300px";}else{Y3=Math.floor($("#"+Z3.getParameters().getParameters().toId+"-cont").height()-128)+"px";}T3.setHeight(Y3);if(W3.length>1){T3.zoomToGeoPosition(W3,X3);}}});});};};var R3=function(S3){return function(){T1.removeFacet(S3);};};o.read("VBIApplicationSet('ZFACTSHEETS')","","",false,Q3(O2),R3(O2.facet));}else{O2.facet.setQuantity(undefined);O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);O2.facet.setContent(undefined);O2.facet.setTitle(undefined);}};};var x3=function(O2){return function(a){var b="",i,j,o,k,D3,E3,F3,G3,m,H3,I3,J3,K3,L3,M3,N3,O3,P3,Q3,R3,S3,T3,U3,V3,W3,X3,Y3,Z3,$3,_3,a4;o=new J();if(O2.facetContent.Target&&O2.facetContent.Target.AnnotationPath&&O2.facetContent.Target.AnnotationPath.split("#")[1]&&N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+O2.facetContent.Target.AnnotationPath.split("#")[1]]){k=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+O2.facetContent.Target.AnnotationPath.split("#")[1]];}else{k=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Badge"];}if(O2.cardinality==="*"){if(a.results&&a.results.length){X3=O2.facetContent.Target.AnnotationPath;u3=X3.substring(X3.lastIndexOf("@")+1);if(u3==="com.sap.vocabularies.UI.v1.Chart"){Y3=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Chart"];Z3=N1.propertyExtensions[O2.navigationType];$3=[];for(i=0;i<Y3.Dimensions.length;i+=1){$3.push({axis:1,name:Z3[Y3.Dimensions[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+Y3.Dimensions[i].PropertyPath+"}"});}_3=[];for(i=0;i<Y3.Measures.length;i+=1){_3.push({name:Z3[Y3.Measures[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+Y3.Measures[i].PropertyPath+"}"});}a4=new F({dimensions:$3,measures:_3,data:{path:"/results"}});m=u2(Y3.ChartType.EnumMember,Y3.Title,Y3.Description,a4);m.setModel(o);O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.XL);}else{m=new V({width:"100%"}).addStyleClass("sapFactsheetUtiVLayoutPadding");for(i=0;i<a.results.length;i+=1){F3=new t1().addStyleClass("sapFactsheetUtiHLayoutPadding");D3=l2(k.Title,O2.navigationType,J2,O2.facet);if(D3.setWrapping){D3.setWrapping(false);}sap.ui.getCore().byId(T1.getId()+"-master-page").addDelegate({onAfterShow:(function(F3){return function(){var b4,c4;b4=F3.getParent().getDomRef().clientWidth;c4=b4;if(F3.getContent()[0]){c4-=F3.getContent()[0].getDomRef().clientWidth;if(b4<F3.getContent()[0].getDomRef().clientWidth){F3.getContent()[0].getDomRef().setAttribute("style","width:"+b4+"px");return;}}if(F3.getContent()[1]){c4-=F3.getContent()[1].getDomRef().clientWidth;}if(c4<10){c4=0;}if(F3.getContent()[2]){F3.getContent()[2].getDomRef().setAttribute("style","width:"+c4+"px");}};}(F3))});o=new J();o.setData({result:a.results[i]});D3.setModel(o);D3.bindElement("/result");G3=false;if(a.results[i][k.Title.Value.Path]){G3=true;}if(k.Title.Value.Apply){for(j=0;j<k.Title.Value.Apply.Parameters.length;j+=1){if(k.Title.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][k.Title.Value.Apply.Parameters[j].Value]){G3=true;break;}}}}b="";if(G3){F3.addContent(D3);if(k.MainInfo&&((k.MainInfo.EdmType&&k.MainInfo.EdmType==="Edm.Decimal")||(k.MainInfo.Value&&k.MainInfo.Value.Apply&&k.MainInfo.Value.Apply.Parameters[0]&&k.MainInfo.Value.Apply.Parameters[0].EdmType&&k.MainInfo.Value.Apply.Parameters[0].EdmType==="Edm.Decimal"))){b="comma";}else if(k.MainInfo&&k.MainInfo.Value.Path&&a.results[i][k.MainInfo.Value.Path]){b="dash";}else if(k.MainInfo&&k.MainInfo.Value.Apply){for(j=0;j<k.MainInfo.Value.Apply.Parameters.length;j+=1){if(k.MainInfo.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][k.MainInfo.Value.Apply.Parameters[j].Value]){b="dash";break;}}}}if(b==="dash"){F3.addContent(new H({content:"<span class=\"sapFactsheetUtiSeparatorPadding sapMText\"> &ndash; </span>"}));}if(b==="comma"){F3.addContent(new h({text:", "}).addStyleClass("sapFactsheetUtiSeparatorPaddingForDecimal"));}}if(k.MainInfo){E3=l2(k.MainInfo,O2.navigationType,J2,O2.facet);if(E3.setWrapping){E3.setWrapping(false);}E3.setModel(o);E3.bindElement("/result");F3.addContent(E3);}m.addContent(F3);}}H3=parseInt(a.__count,10);if(Number(H3)){O2.facet.setQuantity(H3);}O2.facet.setContent(m);O2.facet.attachPress({facet:O2.facetContent},function(b4,c4){var m;T1.removeAllFacetContent();O1[O1.indexOf(O2.facet)].Links=[];m=r2(G2,O2.entitySet,c4.facet,O2.bindingPath,this);m.setDescription(Y1());T1.addFacetContent(m);if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=false;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=true;}B2(O1.indexOf(O2.facet));T1.navigateToDetail();});}else{O2.facet.setQuantity(0);O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);}if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));}else{o.setData({result:a});for(V3 in a){if(a.hasOwnProperty(V3)){if(V3!=="__metadata"){if(typeof a[V3]==="string"&&a[V3]){if(parseInt(a[V3],10)!==0){W3=true;break;}}else if(typeof a[V3]==="number"&&parseInt(a[V3],10)!==0){W3=true;break;}}}}if(W3){I3=new V();J3=(N1.propertyExtensions)?N1.propertyExtensions[O2.navigationType]:[];K3=new t1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");L3=m2(k.Title,{},J3,true).addStyleClass("sapFactsheetUtiLabelMargin");D3=l2(k.Title,O2.navigationType,J2,O2.facet);D3.setModel(o);D3.bindElement("/result");K3.addContent(L3);K3.addContent(D3);I3.addContent(K3);if(k.MainInfo){M3=new t1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");N3=m2(k.MainInfo,{},J3,true).addStyleClass("sapFactsheetUtiLabelMargin");E3=l2(k.MainInfo,O2.navigationType,J2,O2.facet);E3.setModel(o);E3.bindElement("/result");M3.addContent(N3);M3.addContent(E3);I3.addContent(M3);}if(k.SecondaryInfo){O3=new t1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");P3=m2(k.SecondaryInfo,{},J3,true).addStyleClass("sapFactsheetUtiLabelMargin");Q3=l2(k.SecondaryInfo,O2.navigationType,J2,O2.facet);Q3.setModel(o);Q3.bindElement("/result");O3.addContent(P3);O3.addContent(Q3);I3.addContent(O3);}if(k.TypeImageUrl||k.ImageUrl){if(k.ImageUrl){R3=k.ImageUrl;}else{R3=k.TypeImageUrl;}S3=new t1();T3="64px";if(jQuery.device.is.phone){T3="48px";}if(R3.String&&(R3.String.substr(0,11)==="sap-icon://")){U3=new u1({size:T3,width:T3});}else{U3=new f({width:T3});}U3.addStyleClass("sapFactsheetUtiRelIcon");if(R3&&R3.String){U3.setSrc(R3.String);}else if(R3&&R3.Path){U3.bindProperty("src",R3.Path);}S3.addContent(U3);S3.addContent(I3);O2.facet.setContent(S3);}else{O2.facet.setContent(I3);}O2.facet.attachPress({facet:O2.facetContent},function(b4,c4){var m;T1.removeAllFacetContent();O1[O1.indexOf(O2.facet)].Links=[];m=r2(G2,O2.entitySet,c4.facet,O2.bindingPath,this);m.setDescription(Y1());T1.addFacetContent(m);if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));T1.navigateToDetail();});}else{O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);}if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));}};};var y3=function(O2){return function(){T1.removeFacet(O2.facet);};};var z3=function(O2){return function(a){var o,b,i,k,D3;b=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.MediaResource"];if(O2.cardinality==="*"){if(a.results&&a.results.length){o=new t1().addStyleClass("sapFactsheetUtiPictureViewerOverview");for(i=0;i<a.results.length;i+=1){o.addContent(new f({src:a.results[i][b.Thumbnail.Url.Path],height:"85px"}));if(i===3){break;}}k=parseInt(a.__count,10);if(Number(k)){O2.facet.setQuantity(k);}O2.facet.setContent(o);O2.facet.attachPress({facet:O2.facetContent,data:a},function(E3,F3){var G3,v3,H3;T1.removeAllFacetContent();D3=new s();if(F3.facet.Label&&F3.facet.Label.String){D3.setTitle(F3.facet.Label.String);}D3.setDescription(Y1());if(jQuery.device.is.phone){v3="350px";}else{v3="550px";}G3=new v1({height:v3});for(i=0;i<F3.data.results.length;i+=1){H3=new f({src:F3.data.results[i][b.Url.Path]});if(jQuery.device.is.phone){H3.addStyleClass("sapFactsheetUtiCarouselMaxImageHeightPhone");}else{H3.addStyleClass("sapFactsheetUtiCarouselMaxImageHeight");}G3.addPage(H3);}D3.setContent(G3);T1.addFacetContent(D3);T1.navigateToDetail();});}else{O2.facet.setQuantity(0);O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);}}};};var A3=function(o,D3){var E3=[],F3={},i,j,k,G3,H3,I3,J3,K3,L3,M3;var N3=function(J2,a){var i,b="";if(J2){if(J2.Path){return a[J2.Path];}else if(J2.String){return J2.String;}else if(J2.Apply.Name==="odata.concat"){for(i=0;i<J2.Apply.Parameters.length;i+=1){if(J2.Apply.Parameters[i].Type==="Path"){b=b+a[J2.Apply.Parameters[i].Value];}else if(J2.Apply.Parameters[i].Type==="String"){b=b+J2.Apply.Parameters[i].Value;}}return b;}}};F3.iCount=0;F3.aContacts=[];for(i=0;i<o.__batchResponses.length;i+=1){if(!o.__batchResponses[i].data){continue;}E3=o.__batchResponses[i].data.results;if(!E3){E3=[];E3.push(o.__batchResponses[i].data);}if(E3.length>0){G3=N1[E3[0].__metadata.type]["com.sap.vocabularies.Communication.v1.Contact"];if(G3){for(j=0;j<E3.length;j+=1){H3=I3=J3="";if(G3.tel){for(k=0;k<G3.tel.length;k+=1){if(G3.tel[k].type&&G3.tel[k].type.EnumMember){K3=N3(G3.tel[k].uri,E3[j]);switch(G3.tel[k].type.EnumMember){case"com.sap.vocabularies.Communication.v1.PhoneType/voice":H3=K3?K3.replace("tel:",""):"";H3=H3?H3.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/cell":I3=K3?K3.replace("tel:",""):"";I3=I3?I3.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/fax":J3=K3?K3.replace("tel:",""):"";J3=J3?J3.replace(";ext=",""):"";break;}}}}M3=G3.email&&G3.email.address?G3.email.address:"";L3=N3(G3.photo,E3[j]);F3.iCount+=1;F3.aContacts.push({fn:N3(G3.fn,E3[j]),title:N3(G3.title,E3[j]),org:N3(G3.org,E3[j]),phone:H3,mobile:I3,fax:J3,photo:L3,email:N3(M3,E3[j]),sEntity:E3[0].__metadata.type,bExistsPhoto:!!L3,bUseIcon:!L3,sOrder:F3.iCount});}}}}if(D3){F3.aContacts.sort(function(a,b){return a[D3]>b[D3]?1:-1;});}return F3;};var B3=function(){return function(o){var i,a,b,k,D3,E3,F3,G3;a=A3(o,"sOrder");b=new r1({defaultSpan:"L6 M6 S12",hSpacing:0,vSpacing:0}).addStyleClass("sapFactsheetUtiContactsGrid");for(i=0;i<a.aContacts.length&&i<4;i+=1){E3=new V();if(a.aContacts[i].photo){F3=new f({height:"55px",src:a.aContacts[i].photo});}else{F3=new u1({size:"50px",src:w1.getIconURI("person-placeholder")}).addStyleClass("sapFactsheetUtiRelIcon");}E3.addContent(F3);E3.addStyleClass("sapFactsheetUtiContactsImage");D3=new V({content:[new h({text:a.aContacts[i].fn}).addStyleClass("sapFactsheetUtiTextName"),new h({text:a.aContacts[i].title}).addStyleClass("sapFactsheetUtiTextValue")]});k=new t1({content:[E3,D3]}).addStyleClass("sapFactsheetUtiContactsBox");b.addContent(k);}m3=sap.ui.getCore().byId(T1.data("contactFacetId"));m3.setQuantity(a.iCount);if(i>0){m3.setContent(b);if(i<=2){G3=G1.M;}else{G3=G1.L;}m3.attachPress(function(){var i,n=[],d3;G2.clearBatch();for(i=0;i<N1[K2]["com.sap.vocabularies.UI.v1.Contacts"].length;i+=1){N2=N1[K2]["com.sap.vocabularies.UI.v1.Contacts"][i].AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);if(N2!==""){d3=I2+"/"+N2;}else{d3=I2;}n.push(G2.createBatchOperation(d3,"GET"));}G2.addBatchReadOperations(n);G2.submitBatch(function(o){var a,H3,I3,J3,K3,L3,M3;M3=jQuery.sap.resources({url:jQuery.sap.getModulePath("sap.ushell.components.container.")+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});a=A3(o,"sEntity");H3=new J();H3.setData(a);I3=new v({type:w.Inactive,unread:false,cells:[new V({content:[new f({src:"{photo}",width:"74px",visible:"{bExistsPhoto}"}),new u1({size:"76px",src:w1.getIconURI("person-placeholder"),visible:"{bUseIcon}"}).addStyleClass("sapFactsheetUtiRelIcon")]}),new V({content:[new h({text:"{fn}"}).addStyleClass("sapFactsheetUtiContactsName"),new r({text:"{title}"}),new r({text:"{org}"})]}),new g({text:"{phone}",href:"tel:{phone}"}),new g({text:"{mobile}",href:"tel:{mobile}"}),new g({text:"{fax}",href:"tel:{fax}"}),new g({text:"{email}",href:"mailto:{email}"})]});J3=new x({threshold:2,inset:false,showUnread:true,scrollToLoad:true,columns:[new u({hAlign:M1.Center,width:"12%",header:new h({text:""})}),new u({hAlign:M1.Begin,header:new h({text:M3.getText("USHELL_FACTSHEET_NAME")})}),new u({hAlign:M1.Begin,width:"12%",header:new h({text:M3.getText("USHELL_FACTSHEET_PHONE")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:M1.Begin,width:"12%",header:new h({text:x1.i18n.getText("mobile")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:M1.Begin,width:"12%",header:new h({text:x1.i18n.getText("fax")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:M1.Begin,width:"26%",header:new h({text:M3.getText("USHELL_FACTSHEET_EMAIL")}),minScreenWidth:"Tablet",demandPopin:true})],items:{path:"/aContacts",template:I3}});K3=new R({sortItems:[new M({key:"fn",text:M3.getText("USHELL_FACTSHEET_NAME")}),new M({key:"phone",text:M3.getText("USHELL_FACTSHEET_PHONE")}),new M({key:"mobile",text:x1.i18n.getText("mobile")}),new M({key:"fax",text:x1.i18n.getText("fax")}),new M({key:"email",text:M3.getText("USHELL_FACTSHEET_EMAIL")})],confirm:function(N3){var O3,P3,Q3=[];O3=N3.getParameters();P3=J3.getBinding("items");if(O3.sortItem){Q3.push(new W(O3.sortItem.getKey(),O3.sortDescending));P3.sort(Q3);}}});J3.setHeaderToolbar(new X({content:[new r(),new Y(),new Z({icon:"sap-icon://drop-down-list",press:function(){K3.open();}})]}));J3.setModel(H3);L3=new s({title:m3.getTitle(),description:Y1(),content:J3});T1.removeAllFacetContent();T1.addFacetContent(L3);T1.navigateToDetail();});});}else{G3=G1.S;m3.addStyleClass("sapFactsheetUtiEmptyTile");m3.setQuantity(0);}m3.setHeightType(jQuery.device.is.phone?G1.Auto:G3);};};for(i=0;i<M2.length;i+=1){if(M2[i]["com.sap.vocabularies.UI.v1.Map"]){N2=M2[i].Target.AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);p3="1";o3=K2;if(N2){o3=h2(N2,K2,J2);p3=f2(H2,N2,J2);}v3="100%";if(jQuery.device.is.phone){v3="150px";}n3=new s1({width:"100%",height:v3,plugin:false,config:null});m3=new p1({title:M2[i].Label.String.trim(),heightType:jQuery.device.is.phone?G1.Auto:G1.L,content:n3});O1.push(m3);O1[O1.length-1].bLoaded=false;O1[O1.length-1].bProcessed=false;O1[O1.length-1].bIsTable=false;O2={cardinality:p3,navigationPath:N2,facet:m3,facetContent:M2[i],navigationType:o3,metadata:J2,bindingPath:I2,entitySet:H2};if(p3==="*"){q3=["$inlinecount=allpages","$top=1000"];}else{q3=[];}G2.read(I2+"/"+N2,"",q3,true,w3(O2));T1.addFacet(m3);}else if(M2[i].Target){N2=M2[i].Target.AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);u3=M2[i].Target.AnnotationPath.substring(M2[i].Target.AnnotationPath.lastIndexOf("@")+1);if(N2){o3=h2(N2,K2,J2);m3=new p1({title:M2[i].Label.String.trim(),heightType:jQuery.device.is.phone?G1.Auto:G1.M});p3=f2(H2,N2,J2);if(p3!==0){O2={cardinality:p3,navigationPath:N2,facet:m3,facetContent:M2[i],navigationType:o3,metadata:J2,bindingPath:I2,entitySet:H2};if(M2[i]["com.sap.vocabularies.UI.v1.Gallery"]){if(p3==="*"){q3=["$inlinecount=allpages"];}else{q3=[];}G2.read(I2+"/"+N2,"",q3,true,z3(O2));}else{O1.push(m3);O1[O1.length-1].bLoaded=false;O1[O1.length-1].bProcessed=false;O1[O1.length-1].bIsTable=false;if(p3==="*"){q3=["$inlinecount=allpages","$top=3"];}else{q3=[];}G2.read(I2+"/"+N2,"",q3,true,x3(O2),y3(O2));}T1.addFacet(m3);}}else if(u3==="com.sap.vocabularies.UI.v1.Contacts"){m3=new p1({title:M2[i].Label.String.trim(),heightType:jQuery.device.is.phone?G1.Auto:G1.M});T1.data("contactFacetId",m3.sId);O2={facet:m3};G2.clearBatch();for(j=0;j<N1[K2][u3].length;j+=1){N2=N1[K2][u3][j].AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);if(N2!==""){p3=f2(H2,N2,J2);if(p3==="*"){d3=I2+"/"+N2+"?$top=4&$inlinecount=allpages";}else{d3=I2+"/"+N2;}}else{d3=I2;}n.push(G2.createBatchOperation(d3,"GET"));}G2.addBatchReadOperations(n);G2.submitBatch(B3(O2));T1.addFacet(m3);}}}k3=new y1();var C3=function(){var b={},i,o,s3,a,k,u3,D3,E3,F3,G3,H3,I3,J3,K3;k3.setAppData({title:T1.getTitle(),subtitle:T1.getName()+" - "+T1.getDescription()});k3.setEnabled(true);I3=sap.ushell.Container.getService("URLParsing");J3=I3.getShellHash(window.location.href);K3=I3.parseShellHash(J3);F3=K3.semanticObject;S2=new z1({showCancelButton:true,placement:F1.Top});P2=_1(e,G2);k=P2.split(",");for(i=0;i<k.length;i+=1){k[i]=k[i].replace("='","=","g");if(k[i].lastIndexOf("'")===k[i].length-1){k[i]=k[i].slice(0,-1);}}for(u3 in N1[K2]){if(N1[K2].hasOwnProperty(u3)){if(u3.indexOf("com.sap.vocabularies.Common.v1.SecondaryKey")===0){D3=N1[K2][u3];for(i=0;i<D3.length;i+=1){E3=this.getBoundContext().getProperty(D3[i].PropertyPath);if(E3){k.push(D3[i].PropertyPath+"="+E3);}}}}}for(i=0;i<k.length;i+=1){s3=k[i].substr(0,k[i].indexOf("="));a=k[i].substr(k[i].indexOf("=")+1,k[i].length);b[decodeURIComponent(s3)]=decodeURIComponent(a);}R2=sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(F3,b);R2.done(jQuery.proxy(function(L3){var i,M3,N3;for(i=0;i<L3.length;i+=1){N3=L3[i].intent;if(N3.indexOf(R1)<0&&N3.indexOf("-analyzeKPIDetails~")<0&&N3.indexOf("-analyzeSBKPIDetails~")<0&&N3.indexOf("-NavigateToMaintainCusProj~")<0&&N3.indexOf("CostCenter-manageCostCenter~")<0&&N3.indexOf("AccountingDocument-analyzeDocumentJournal~")<0&&N3.indexOf("AccountingDocument-analyzeGLLineItem~")<0&&N3.indexOf("ControllingDocument-analyzeCostCenters~")<0&&N3.indexOf("ControllingDocument-analyzeInternalOrders~")<0&&N3.indexOf("ControllingDocument-analyzeMarketSegment~")<0&&N3.indexOf("ControllingDocument-analyzeProfitCentersActuals~")<0&&N3.indexOf("ControllingDocument-analyzeProfitLoss~")<0&&N3.indexOf("ControllingDocument-analyzeProjectsActuals~")<0&&N3.indexOf("PurchaseOrder-create~")<0){M3=sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({target:{shellHash:N3}});S2.addItem(new g({text:L3[i].text,href:M3}));T1.setTransactionsVisible(true);}}}));T1.attachTransactionsButtonPress(function(L3){S2.openBy(L3.getParameter("caller"));});this.detachChange(C3);A1.setWindowTitle(T1.getTitle().trim()+": "+T1.getName().trim()+" ("+T1.getDescription().trim()+")");T1.setActionsVisible(true);r3=new Z({text:W2.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_EMAIL_LINK"),icon:"sap-icon://email",press:function(){E1.triggerEmail("",T1.getName(),window.location.href);}});T2=new B1({placement:F1.Top});G3=e.substr(0,e.lastIndexOf("/")+1);for(o in G2.oData){if(G2.oData.hasOwnProperty(o)){G3=G3+o;H3=o.substring(o.indexOf("(")+1,o.indexOf(")"));break;}}T2.addButton(new C1({jamData:{businessObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:H2,key:H3,name:T1.getTitle(),ui_url:window.location.href}}}));T2.addButton(new D1({jamData:{object:{id:window.location.href,display:new h({text:T1.getTitle()}),share:""},externalObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:H2,key:H3,name:T1.getTitle()}}}));T2.addButton(k3);T2.addButton(r3);T1.attachActionsButtonPress(function(L3){T2.openBy(L3.getParameter("caller"));});O1[0].bLoaded=true;O1[0].bProcessed=false;B2(0);};T1.getElementBinding().attachChange(C3);T1.attachBackAction(function(){history.back();});T1.addDelegate({onAfterRendering:function(){T1._adjustFacetLayout();}});return T1;};return function(a,b){try{T1=C2(a,b,new U({configurationVisible:false}));}catch(e){throw e;}return T1;};},true);
sap.ui.predefine('sap/ushell/components/factsheet/tools/ODataUrlTemplating',function(){"use strict";
function P(p,t,u){this.parameter=p;this.template=t;this.semiConvertedUrl=u;this.message=" is a missing key parameter for constructing the entity url";this.toString=function(){return this.parameter+this.message;};}
var O={ParameterException:P,resolve:function(t,d){var e,v,p,i,b=t.match(/{\s*[\w\.]+\s*}/g);e=t;for(i=b.length-1;i>=0;i-=1){p=b[i];v=d[p.replace(/[{}]/g,"")];if(v!==undefined){if(typeof v!=="string"){v=v[0];}v=encodeURIComponent(decodeURIComponent(v));e=e.replace(p,v);}}p=e.match(/{\s*[\w\.]+\s*}/g);if(p){jQuery.sap.log.error(" "+e);throw new this.ParameterException(p,t,e);}return e;}};return O;},true);
sap.ui.predefine('sap/ushell/components/factsheet/views/ThingViewer.controller',["sap/ui/model/odata/ODataModel"],function(O){"use strict";sap.ui.controller("sap.ushell.components.factsheet.views.ThingViewer",{setService:function(u){this.getView().setModel(new O(u));}});});
sap.ui.predefine('sap/ushell/components/factsheet/views/ThingViewer.view',["sap/ushell/components/factsheet/tools/ODataUrlTemplating","sap/ushell/components/factsheet/factory/ThingInspector","sap/ui/model/odata/ODataUtils","sap/ui/core/Component"],function(O,T,a,C){"use strict";sap.ui.jsview("sap.ushell.components.factsheet.views.ThingViewer",{getControllerName:function(){return"sap.ushell.components.factsheet.views.ThingViewer";},createContent:function(){var e,A,E,t,v,s;v=this.getViewData();e=v.entity||v.service;if(!e){E=v.entityTemplateURI||v.template;if(E){if(typeof E!=="string"){E=E[0];}E=E.replace(/%25/g,"%");E=E.replace(/%28/g,"(");E=E.replace(/%29/g,")");E=E.replace(/%27/g,"'");E=E.replace(/%3D/g,"=");E=E.replace(/%7B/g,"{");E=E.replace(/%7D/g,"}");e=O.resolve(E,v);}}A=v.annotationURI||v.annotation;if(typeof e!=="string"){e=e[0];}if(typeof A!=="string"){A=A[0];}s=e.substr(0,e.lastIndexOf("/"));function b(c,s){var S;if(sap.ui.model.odata&&a&&typeof a.setOrigin==="function"){if(!(c&&c.getComponentData())){throw new Error("no component passed");}if(c&&c.getComponentData()&&c.getComponentData().startupParameters&&c.getComponentData().startupParameters["sap-system"]){S=c.getComponentData().startupParameters["sap-system"][0];s=a.setOrigin(s,{alias:S});}}return s;}s=b(C.getOwnerComponentFor(this),s);s=s+e.substr(e.lastIndexOf("/"));t=T(s,A);t.addStyleClass("ThingInspector");return t;}});});
sap.ui.predefine('sap/ushell/components/homepage/ActionMode',["sap/ushell/resources","sap/m/library","sap/m/Button","sap/ui/thirdparty/jquery"],function(r,m,B,q){"use strict";var P=m.PlacementType;var A=function(){this.oEventBus=sap.ui.getCore().getEventBus();this.init=function(M){this.oModel=M;};};
A.prototype._activate=function(){this.oModel.setProperty("/tileActionModeActive",true);this.aOrigHiddenGroupsIds=this.getHomepageManager().getCurrentHiddenGroupIds(this.oModel);var d=sap.ui.getCore().byId("dashboardGroups");d.addLinksToUnselectedGroups();var t=sap.ui.getCore().byId("ActionModeBtn");if(t){t.setTooltip(r.i18n.getText("exitEditMode"));t.setText(r.i18n.getText("exitEditMode"));if(t.setSelected){t.setSelected(true);}}this.oEventBus.publish("launchpad","actionModeActive");};
A.prototype._deactivate=function(){this.oModel.setProperty("/tileActionModeActive",false);this.oEventBus.publish("launchpad","actionModeInactive",this.aOrigHiddenGroupsIds);var t=sap.ui.getCore().byId("TileActions");if(t!==undefined){t.destroy();}sap.ui.require(["sap/m/MessageToast"],function(M){M.show(r.i18n.getText("savedChanges"),{duration:4000});});var T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(r.i18n.getText("activateEditMode"));T.setText(r.i18n.getText("activateEditMode"));if(T.setSelected){T.setSelected(false);}}};
A.prototype.toggleActionMode=function(M,s,d){d=d||[];var v=d.filter(function(g){return g.getVisible();});var D={group:v[M.getProperty("/topGroupInViewPortIndex")],restoreLastFocusedTile:true};if(M.getProperty("/tileActionModeActive")){this._deactivate();var j=q(".sapUshellTileContainerHeader[tabindex=0]");if(j.length){var a=j[0].closest(".sapUshellTileContainer");if(a){D.restoreLastFocusedTileContainerById=a.id;}}}else{this._activate();}this.oEventBus.publish("launchpad","scrollToGroup",D);};
A.prototype.activateGroupEditMode=function(g){var j=q(g.getDomRef()).find(".sapUshellTileContainerContent");j.addClass("sapUshellTileContainerEditMode");};
A.prototype.getHomepageManager=function(){if(!this.oHomepageManager){this.oHomepageManager=sap.ushell.components.getHomepageManager();}return this.oHomepageManager;};
A.prototype._openActionsMenu=function(e,v){var t=this,T=v||e.getSource(),a=[],o=sap.ui.getCore().byId("TileActions"),b,i,c=[],n,d,f,g,h,j;if(T){g=T.getBindingContext().getObject().object;a=this.getHomepageManager().getTileActions(g);}t.oTileControl=T;q(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");j=q(e.getSource().getDomRef()).find(".sapUshellTileActionLayerDiv");j.addClass("sapUshellTileActionLayerDivSelected");var k=T.getModel();var G=T.getParent().getBindingContext().getPath();if(a.length===0||k.getProperty(G+"/isGroupLocked")){n=new B({text:r.i18n.getText("tileHasNoActions"),enabled:false});c.push(n);}else{for(i=0;i<a.length;i++){f=a[i];h=(function(f){return function(){t._handleActionPress(f,T);};}(f));d=new B({text:f.text,icon:f.icon,press:h});c.push(d);}}b=e.getSource().getActionSheetIcon?e.getSource().getActionSheetIcon():undefined;if(!b){var M=sap.ui.getCore().byId(e.getSource().getId()+"-action-more");if(M){b=M;}else{b=e.getSource();}}if(!o){sap.ui.require(["sap/m/ActionSheet"],function(l){o=new l("TileActions",{placement:P.Bottom,afterClose:function(){q(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var E=sap.ui.getCore().getEventBus();E.publish("dashboard","actionSheetClose",t.oTileControl);}});t._openActionSheet(o,c,b);});}else{t._openActionSheet(o,c,b);}};
A.prototype._openActionSheet=function(a,b,t){b=b||[];a.destroyButtons();b.forEach(function(o){a.addButton(o);});a.openBy(t);};
A.prototype._handleActionPress=function(a,t){if(a.press){a.press.call(a,t);}else if(a.targetURL){if(a.targetURL.indexOf("#")===0){hasher.setHash(a.targetURL);}else{window.open(a.targetURL,"_blank");}}else{sap.ui.require(["sap/m/MessageToast"],function(M){M.show("No Action");});}};
return new A();},true);
sap.ui.predefine('sap/ushell/components/homepage/Component',["sap/ui/core/UIComponent","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/HomepageManager","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ushell/resources"],function(U,m,H,s,C,r){"use strict";return U.extend("sap.ushell.components.homepage.Component",{metadata:{manifest:"json"},init:function(){this.oModel=m.getModel();this.setModel(this.oModel);U.prototype.init.apply(this,arguments);var d={model:this.oModel,view:this.oDashboardView};this.oHomepageManager=new H("dashboardMgr",d);this.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted",function(){sap.ui.require(["sap/ushell/components/homepage/FLPAnalytics"]);});s.toggleUserActivityLog();s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");C.on("/core/home/homePageGroupDisplay").do(function(n){this.oHomepageManager.handleDisplayModeChange(n);}.bind(this));s.getEffectiveHomepageSetting("/core/home/sizeBehavior","/core/home/sizeBehaviorConfigurable");C.on("/core/home/sizeBehavior").do(function(S){var M=this.oHomepageManager.getModel();M.setProperty("/sizeBehavior",S);}.bind(this));},createContent:function(){this.oDashboardView=sap.ui.view({viewName:"sap.ushell.components.homepage.DashboardContent",type:"JS",async:true});return this.oDashboardView;},exit:function(){this.oHomepageManager.destroy();}});});
sap.ui.predefine('sap/ushell/components/homepage/DashboardContent.controller',["sap/ui/thirdparty/jquery","./DashboardUIActions","sap/ushell/utils","sap/ushell/EventHub","sap/ui/Device","sap/ushell/resources","sap/ushell/Layout","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/Log"],function(q,D,u,E,a,r,L,F,b,c){"use strict";sap.ui.controller("sap.ushell.components.homepage.DashboardContent",{onInit:function(){var e=sap.ui.getCore().getEventBus();this.handleDashboardScroll=this._handleDashboardScroll.bind(this);e.subscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe("launchpad","actionModeInactive",this._handleGroupVisibilityChanges,this);e.subscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.addEventListener("visibilitychange",u.handleTilesVisibility,false);if(a.browser.mobile){e.subscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);}this.isDesktop=(a.system.desktop&&(navigator.userAgent.toLowerCase().indexOf("tablet")<0));},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);e.unsubscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.unsubscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.removeEventListener("visibilitychange",u.handleTilesVisibility,false);if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.destroy();delete this.oDashboardUIActionsModule;}},onAfterRendering:function(){u.setPerformanceMark("FLP - dashboard after rendering");var h=sap.ushell.components.getHomepageManager();if(!h.getPreparedGroupModel()){h.loadPersonalizedGroups();}else{E.once("firstSegmentCompleteLoaded").do(h.handleFirstSegmentLoaded.bind(h));}var e=sap.ui.getCore().getEventBus(),m,t,g,i,d;e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);a.orientation.attachHandler(function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible");if(j.length){m=this.getView().getModel();t=m.getProperty("/topGroupInViewPortIndex");if(j.get(t)){g=sap.ui.getCore().byId(j.get(t).id);i=m.getProperty("/editTitle");this._publishAsync("launchpad","scrollToGroup",{group:g,isInEditTitle:i});}}},this);q(window).bind("resize",function(){clearTimeout(d);d=setTimeout(this.resizeHandler.bind(this),300);}.bind(this));this._updateTopGroupInModel();},_dashboardDeleteTileHandler:function(e){var t=e.getSource(),T=t.getBindingContext().getObject(),d={tileId:T.uuid};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},dashboardTilePress:function(e){var t=e.getSource();if(!t){return;}if(a.system.desktop){var s=document.activeElement.id.indexOf("feedTile")!==-1;if(document.activeElement.tagName!=="INPUT"&&s!==true){if(sap.ui.getCore().byId(t.getId())){sap.ushell.components.ComponentKeysHandler.setTileFocus(t.$());}}}sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick",{uuid:t.getUuid()});},_updateTopGroupInModel:function(){var m=this.getView().getModel(),t=this._getIndexOfTopGroupInViewPort();var s=this._getModelGroupFromVisibleIndex(t);m.setProperty("/iSelectedGroup",s);m.setProperty("/topGroupInViewPortIndex",t);},_getIndexOfTopGroupInViewPort:function(){var v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName("section"),j=q(s).find(".sapUshellTileContainer"),o=j.not(".sapUshellHidden").eq(0).offset(),f=(o&&o.top)||0,t=[],n=s[0].scrollTop,e=0;if(!j||!o){return e;}j.each(function(){if(!q(this).hasClass("sapUshellHidden")){var h=q(this).parent().offset().top;t.push([h,h+q(this).parent().height()]);}});var g=n+f;q.each(t,function(i,h){var k=h[0],l=h[1];if(k-24<=g&&g<=l){e=i;return false;}});return e;},_handleDashboardScroll:function(){var v=this.getView(),m=v.getModel(),n=400;var h=m.getProperty("/homePageGroupDisplay"),e=h!=="tabs",t=m.getProperty("/tileActionModeActive");function H(){u.handleTilesVisibility();}clearTimeout(this.timeoutId);this.timeoutId=setTimeout(H,n);if(!a.system.phone){v.oAnchorNavigationBar.closeOverflowPopup();}if(e||t){this._updateTopGroupInModel();}v.oAnchorNavigationBar.reArrangeNavigationBarElements();},_handleGroupDeletion:function(g){var e=sap.ui.getCore().getEventBus(),G=g.getObject(),i=G.removable,s=G.title,d=G.groupId,R=r.i18n,m=sap.ushell.Container.getService("Message"),A,C;sap.ui.require(["sap/m/MessageBox"],function(M){A=M.Action;C=(i?A.DELETE:R.getText("ResetGroupBtn"));m.confirm(R.getText(i?"delete_group_msg":"reset_group_msg",s),function(o){if(o===C){e.publish("launchpad",i?"deleteGroup":"resetGroup",{groupId:d});}},R.getText(i?"delete_group":"reset_group"),[C,A.CANCEL]);});},_modelLoaded:function(){this.bModelInitialized=true;sap.ushell.Layout.getInitPromise().then(function(){this._initializeUIActions();}.bind(this));},_initializeUIActions:function(){if(!this.oDashboardUIActionsModule){this.oDashboardUIActionsModule=new D();}this.oDashboardUIActionsModule.initializeUIActions(this);},_forceBrowserRerenderElement:function(e){var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(d){d(function(){var f=e.style.display;e.style.display="none";e.style.display=f;});}else{c.info("unsupported browser for animation frame");}},_webkitMobileRenderFix:function(){if(a.browser.chrome||a.os.android){this._forceBrowserRerenderElement(document.body);}},resizeHandler:function(){u.recalculateBottomSpace();u.handleTilesVisibility();if(E.last("AppRendered")!==undefined){E.emit("AppRendered",undefined);}if(L&&q("#dashboardGroups").is(":visible")){L.reRenderGroupsLayout(null);this._initializeUIActions();}},_appOpenedHandler:function(C,e,d){var p,P,m=this.getView().getModel();p=this.getOwnerComponent();P=p.getMetadata().getComponentName();if(d.additionalInformation&&d.additionalInformation.indexOf(P)===-1){u.setTilesNoVisibility();}if(m.getProperty("/tileActionModeActive")&&sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode.toggleActionMode(m,"Menu Item");}if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.disableAllDashboardUiAction();}},_scrollToGroupByName:function(C,e,d){var g=this.getView().getModel().getProperty("/groups"),G=d.groupName,l=sap.ushell.Container.getService("LaunchPage");g.forEach(function(o){if(l.getGroupTitle(o.object)===G){this._scrollToGroup(C,e,{groupId:o.groupId});}}.bind(this));},_scrollToGroup:function(C,e,d){var g=d.group?d.group.getGroupId():d.groupId;var G;if(this.oView.oDashboardGroupsBox.getGroups()){G=this.oView.oDashboardGroupsBox.getGroups().reduce(function(f,h){return h&&h.getGroupId()===g?h:f;},null);}var o=G&&G.getDomRef();if(!o){return;}var t=o.querySelector(".sapUshellTileContainerEditMode")||o.querySelector(".sapUshellTilesContainer-sortable");if(!t){return;}document.getElementById("sapUshellDashboardPage-cont").scrollTop=t.offsetTop;setTimeout(function(){if(a.system.desktop){var j=G.$();if(d.restoreLastFocusedTile){var l=false;if(d.restoreLastFocusedTileContainerById){j=q("#"+d.restoreLastFocusedTileContainerById);l=true;}sap.ushell.components.ComponentKeysHandler.goToLastVisitedTile(j,l);}else if(d.groupChanged){var f=j.find(".sapUshellTile, .sapMGTLineMode, .sapFCard").filter(":visible").eq(0);if(f.length){sap.ushell.components.ComponentKeysHandler.setTileFocus(f);}}}if(d.isInEditTitle){G.setEditMode(true);}u.handleTilesVisibility();},0);},_handleDrop:function(e,d){var l=L.getLayoutEngine(),t=l.layoutEndCallback(),i=!t.dstArea,o=sap.ui.getCore().getEventBus(),n,f,T,g=q.Deferred(),v=this.getView(),m=v.getModel(),h=m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs",j=m.getProperty("/tileActionModeActive"),I=true,k=!!(m.getProperty("/personalization")&&(a.browser.msie||a.browser.edge)&&a.browser.version>=11&&(a.system.combi||a.system.tablet)),p=t.tile.getBindingContext().getObject().isLinkPersonalizationSupported;L.getLayoutEngine()._toggleAnchorItemHighlighting(false);if(t.dstGroup){var s=t.dstGroup.getBindingContext(),w=s.getProperty(s.sPath).isGroupLocked;I=i&&w;}if(!t.tileMovedFlag||(k&&l.isTabBarCollision())||I||(!p&&t.dstArea==="links")){o.publish("launchpad","sortableStop");return null;}if(!j&&!h&&t.dstArea==="links"&&!t.dstGroupData.getLinks().length){o.publish("launchpad","sortableStop");return null;}n=true;f=true;if((t.srcGroup!==t.dstGroup)){n=f=false;}else if(t.tile!==t.dstGroup.getTiles()[t.dstTileIndex]){f=false;}T=this._getTileUuid(t.tile);if(t.srcGroup&&t.srcGroup.removeAggregation&&t.srcArea){t.srcGroup.removeAggregation("tiles",t.tile,n);}var S=t.dstGroupData&&t.dstGroupData.insertAggregation&&t.dstArea===t.srcArea;if(S){t.tile.sParentAggregationName=t.dstArea;t.dstGroupData.insertAggregation(t.dstArea,t.tile,t.dstTileIndex,f);g=this._handleSameTypeDrop(t,T,S);}else if(i){g=this._handleShortDrop(t,T,S);}else{g=this._handleConvertDrop(t,S,d);}if(this.getView().getModel()){this.getView().getModel().setProperty("/draggedTileLinkPersonalizationSupported",true);}o.publish("launchpad","sortableStop");return g.promise();},_handleSameTypeDrop:function(t,T,s){var e=sap.ui.getCore().getEventBus(),d=q.Deferred();t.tile._getBindingContext().oModel.setProperty(t.tile._getBindingContext().sPath+"/draggedInTabBarToSourceGroup",false);e.publish("launchpad","movetile",{sTileId:T,sToItems:t.dstArea?t.dstArea:"tiles",sFromItems:t.srcArea?t.srcArea:"tiles",sTileType:t.dstArea?t.dstArea.substr(0,t.dstArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_handleShortDrop:function(t,T,s){var e=sap.ui.getCore().getEventBus(),d=q.Deferred();e.publish("launchpad","movetile",{sTileId:T,sToItems:t.srcArea||"tiles",sFromItems:t.srcArea||"tiles",sTileType:t.srcArea?t.srcArea.substr(0,t.srcArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_handleConvertDrop:function(t,s,d){var e=sap.ui.getCore().getEventBus(),o=q.Deferred();e.publish("launchpad","convertTile",{toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,tile:sap.ui.getCore().byId(d.id),srcGroupId:t.srcGroup.getGroupId?t.srcGroup.getGroupId():t.srcGroup.groupId,longDrop:s,callBack:function(){o.resolve();}});return o.promise();},_getTileUuid:function(t){if(t.getUuid){return t.getUuid();}var T=t.getBindingContext().getObject();if(T.getParent){return T.getParent().getUuid();}return T.uuid;},_handleDrag:function(e,d){var t=L.getLayoutEngine().layoutEndCallback(),T=t.tile.getBindingContext().getObject(),m=this.getView().getModel();if(m){m.setProperty("/draggedTileLinkPersonalizationSupported",T.isLinkPersonalizationSupported);}},_handleTabBarItemPressEventHandler:function(C,e,d){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups"),G=d.iGroupIndex;for(var i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}m.setProperty("/groups/"+G+"/isGroupSelected",true);this._handleTabBarItemPress(C,e,G);},_handleTabBarItemPress:function(C,e,g,o){var v=this.getView(),s,f;if(o){s=o.getParameter("group").getIndex();}else{s=g;}sap.ui.getCore().getEventBus().publish("launchpad","tabSelected",{iSelectedGroup:s});f=this._getVisibleGroupIndex(s);v.oDashboardGroupsBox.removeLinksFromUnselectedGroups();v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);v.oAnchorNavigationBar.setSelectedItemIndex(f);v.oAnchorNavigationBar.reArrangeNavigationBarElements();setTimeout(function(){u.handleTilesVisibility();},0);},_getVisibleGroupIndex:function(s){var g=this.getView().getModel().getProperty("/groups");var h=0;for(var i=0;i<s;i++){if(!g[i].isGroupVisible||!g[i].visibilityModes[0]){h++;}}return s-h;},_getModelGroupFromVisibleIndex:function(s){var g=this.getView().getModel().getProperty("/groups"),v=0;for(var i=0;i<g.length;i++){if(g[i].isGroupVisible&&g[i].visibilityModes[0]){v++;if(v>s){return i;}}}return 0;},_handleAnchorItemPress:function(e){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups");if(a.system.phone&&e.getParameter("manualPress")){e.oSource.openOverflowPopup();}for(var i=0;i<g.length;i++){if(m.getProperty("/groups/"+i+"/isGroupSelected")===true){m.setProperty("/groups/"+i+"/isGroupSelected",false);}}m.setProperty("/groups/"+e.getParameter("group").getIndex()+"/isGroupSelected",true);m.setProperty("/iSelectedGroup",e.getParameter("group").getIndex());if(m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs"&&!m.getProperty("/tileActionModeActive")){this._handleTabBarItemPress(undefined,undefined,undefined,e);}else{if(!m.getProperty("/tileActionModeActive")){v.oDashboardGroupsBox.getBinding("groups").filter([new F("isGroupVisible",b.EQ,true)]);}else{v.oDashboardGroupsBox.getBinding("groups").filter([]);}this._scrollToGroup("launchpad","scrollToGroup",{group:e.getParameter("group"),groupChanged:true,focus:(e.getParameter("action")==="sapenter")});}},_addGroupHandler:function(d){var i,p=d.getSource().getBindingContext().getPath(),e=p.split("/");i=window.parseInt(e[e.length-1],10);if(d.getSource().sParentAggregationName==="afterContent"){i=i+1;}sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:"",location:i,isRendered:true});},_publishAsync:function(C,e,d){var B=sap.ui.getCore().getEventBus();window.setTimeout(q.proxy(B.publish,B,C,e,d),1);},_changeGroupVisibility:function(g){var B=g.getPath(),m=g.getModel(),G=m.getProperty(B+"/isGroupVisible");if(m.getProperty(B+"/isDefaultGroup")||m.getProperty(B+"/isGroupLocked")){return;}m.setProperty(B+"/isGroupVisible",!G);},_handleGroupVisibilityChanges:function(C,e,o){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),h=sap.ushell.components.getHomepageManager(),d=h.getCurrentHiddenGroupIds(m),s=d.length===o.length,i=s,p;d.some(function(H,I){if(!i){return true;}i=o&&Array.prototype.indexOf.call(o,H)!==-1;return!i;});if(!i){p=l.hideGroups(d);p.done(function(){m.updateBindings("groups");});p.fail(function(){var f=sap.ushell.Container.getService("Message");f.error(r.i18n.getText("hideGroups_error"));});}window.setTimeout(function(){u.recalculateBottomSpace();},0);},_updateShellHeader:function(){if(!this.oShellUIService){this._initializeShellUIService();}else{this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();}},_initializeShellUIService:function(){return sap.ui.require(["sap/ushell/ui5service/ShellUIService"],function(S){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();return this.oShellUIService;}.bind(this));},_deactivateActionModeInTabsState:function(){var v=this.getView(),m=v.getModel(),i;var g=m.getProperty("/groups");for(i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}var s=v.oAnchorNavigationBar.getSelectedItemIndex();var h=0;if(!this._isGroupVisible(s)){for(i=0;i<g.length;i++){if(!this._isGroupVisible(i)){h++;}else{s=i;break;}}}else{for(i=0;i<s;i++){if(!this._isGroupVisible(i)){h++;}}}var f=s-h;v.oAnchorNavigationBar.setSelectedItemIndex(f);v.oAnchorNavigationBar.adjustItemSelection();m.setProperty("/groups/"+s+"/isGroupSelected",true);v.oDashboardGroupsBox.removeLinksFromAllGroups();var G=m.getProperty("/homePageGroupDisplay");if(G&&G==="tabs"){v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);}},_isGroupVisible:function(g){var G=this.getView().getModel().getProperty("/groups");return(G[g].isGroupVisible&&G[g].visibilityModes[0]);}});});
sap.ui.predefine('sap/ushell/components/homepage/DashboardContent.view',["sap/ui/thirdparty/jquery","sap/m/library","sap/m/Page","sap/ui/core/AccessibleLandmarkRole","sap/ui/core/mvc/View","sap/ui/Device","sap/ui/model/Filter","sap/ushell/components/homepage/DashboardGroupsBox","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/launchpad/AnchorItem","sap/ushell/ui/launchpad/AnchorNavigationBar","sap/ushell/utils","sap/ui/core/Component","sap/ui/model/FilterOperator"],function(q,m,P,A,V,D,F,a,C,E,r,b,c,u,d,e){"use strict";sap.ui.jsview("sap.ushell.components.homepage.DashboardContent",{createContent:function(o){this.oModel=this.getModel();var f=this.oModel.getProperty("/personalization"),h=sap.ushell.components.getHomepageManager?sap.ushell.components.getHomepageManager():undefined;this.isCombi=D.system.combi;this.isTouch=this.isCombi?false:(D.system.phone||D.system.tablet);this.parentComponent=d.getOwnerComponentFor(this);this.addStyleClass("sapUshellDashboardView");this.ieHtml5DnD=f&&h&&h.isIeHtml5DnD();this.oRenderer=sap.ushell.Container.getRenderer("fiori2");sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","contentRefresh",this._onDashboardShown,this);this.oDoable=E.once("CoreResourcesComplementLoaded").do(function(){this.oAnchorNavigationBar.setOverflowEnabled(true);if(f){sap.ui.require(["sap/ushell/components/homepage/ActionMode"],function(i){i.init(this.oModel);}.bind(this));this._createFooter();this._createActionModeMenuButton();}}.bind(this));this.oRenderer.getRouter().getRoute("home").attachMatched(this._onDashboardShown,this);this.oAnchorNavigationBar=this._getAnchorNavigationBar(o);var g=new a();this.oDashboardGroupsBox=g.createGroupsBox(o,this.oModel);this.oFilterSelectedGroup=new F("isGroupSelected",e.EQ,true);this.oPage=new P("sapUshellDashboardPage",{customHeader:this.oAnchorNavigationBar,landmarkInfo:{headerRole:A.Navigation,headerLabel:r.i18n.getText("NavigationBarLabel"),contentRole:sap.ui.core.AccessibleLandmarkRole.Region,contentLabel:r.i18n.getText("DashboardGroupsLabel")},floatingFooter:true,content:[this.oDashboardGroupsBox]});this.oPage.addEventDelegate({onAfterRendering:function(){var i=this.getDomRef(),s=i.getElementsByTagName("section");q(s[0]).off("scrollstop",o.handleDashboardScroll);q(s[0]).on("scrollstop",o.handleDashboardScroll);}.bind(this)});return this.oPage;},getAnchorItemTemplate:function(){var t=this,h=C.last("/core/extension/enableHelp");var o=new b({index:"{index}",title:"{title}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",writeHelpId:h,selected:false,isGroupRendered:"{isRendered}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(f,i,v){if(!v[f?1:0]){return false;}return i||f;}},locked:"{isGroupLocked}",isGroupDisabled:{parts:["isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(i,I,s){return i&&I&&s==="tabs";}},press:function(f){t.oAnchorNavigationBar.handleAnchorItemPress(f);}});o.attachBrowserEvent("focus",function(){this.setNavigationBarItemsVisibility();}.bind(this.oAnchorNavigationBar));return o;},_getAnchorNavigationBar:function(o){var f=new c("anchorNavigationBar",{selectedItemIndex:"{/topGroupInViewPortIndex}",itemPress:[function(g){this._handleAnchorItemPress(g);},o],overflowEnabled:false});if(D.system.desktop){f.addEventDelegate({onsapskipforward:function(g){g.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.ComponentKeysHandler.goToTileContainer(g,this.bGroupWasPressed);this.bGroupWasPressed=false;},onsapskipback:function(g){g.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(g);},onsapenter:function(g){g.srcControl.getDomRef().click();},onsapspace:function(g){g.srcControl.getDomRef().click();}});}f.addStyleClass("sapContrastPlus");return f;},_actionModeButtonPress:function(){this.oDashboardGroupsBox.getBinding("groups").filter([]);var f=this.oDashboardGroupsBox.getGroups();sap.ushell.components.homepage.ActionMode.toggleActionMode(this.oModel,"Menu Item",f);this._updateAnchorNavigationBarVisibility();if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){if(this.oModel.getProperty("/tileActionModeActive")){var g=this.oModel.getProperty("/groups"),s;for(var i=0;i<g.length;i++){if(g[i].isGroupSelected){s=i;break;}}this.getController()._scrollToGroup("launchpad","scrollToGroup",{group:{getGroupId:function(){return g[s].groupId;}},groupChanged:false,focus:true});}else{this.getController()._deactivateActionModeInTabsState();}}},_createActionModeMenuButton:function(){var o={id:"ActionModeBtn",text:r.i18n.getText("activateEditMode"),icon:"sap-icon://edit",press:this._actionModeButtonPress.bind(this)};this.oTileActionsButton=sap.ui.getCore().byId(o.id);if(this.oTileActionsButton){this.oTileActionsButton.setTooltip(o.text);this.oTileActionsButton.setText(o.text);this.oTileActionsButton.attachPress(o.press);}else{var f={controlType:"sap.ushell.ui.launchpad.ActionItem",oControlProperties:o,bIsVisible:true,aStates:["home"]};this.oRenderer.addUserAction(f).done(function(g){this.oTileActionsButton=g;if(C.last("/core/extension/enableHelp")){this.oTileActionsButton.addStyleClass("help-id-ActionModeBtn");}}.bind(this));}},_handleEditModeChange:function(){if(this.oTileActionsButton){this.oTileActionsButton.toggleStyleClass("sapUshellAcionItemActive");}},_createFooter:function(){sap.ui.require(["sap/m/Bar","sap/m/Button","sap/m/ToolbarSpacer"],function(B,f,T){var o=new B("sapUshellDashboardFooter",{visible:"{/tileActionModeActive}",contentRight:[new T()]});var g=new f("sapUshellDashboardFooterDoneBtn",{type:m.ButtonType.Emphasized,text:r.i18n.getText("closeEditMode"),tooltip:r.i18n.getText("exitEditMode"),press:this._actionModeButtonPress.bind(this)});if(D.system.desktop){g.addEventDelegate({onsapskipforward:function(h){h.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(h);},onsapskipback:function(h){h.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.ComponentKeysHandler.goToFirstVisibleTileContainer();},onsaptabprevious:function(h){h.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.components.ComponentKeysHandler.goToFirstVisibleTileContainer();},onsaptabnext:function(h){h.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(h);}});}o.addContentRight(g);this.oPage.setFooter(o);}.bind(this));},_onDashboardShown:function(){var i=this.oRenderer&&this.oRenderer.getCurrentCoreView()==="home";if(i){if(!D.system.phone){this.oRenderer.showRightFloatingContainer(false);}this._updateAnchorNavigationBarVisibility();this.getController().resizeHandler();u.refreshTiles();if(D.system.desktop){sap.ushell.components.ComponentKeysHandler.goToTileContainer();}}},_updateAnchorNavigationBarVisibility:function(){var o=this.oPage.getShowHeader(),v=this.oAnchorNavigationBar.getVisibleGroups(),f=v.length>1;this.oPage.setShowHeader(f);if(f&&!o){var g=this.getModel().getProperty("/groups"),s=this.getModel().getProperty("/iSelectedGroup");for(var i=0;i<v.length;i++){if(v[i].getGroupId()===g[s].groupId){this.oAnchorNavigationBar.setSelectedItemIndex(i);break;}}}},getControllerName:function(){return"sap.ushell.components.homepage.DashboardContent";},exit:function(){V.prototype.exit.apply(this,arguments);if(this.oAnchorNavigationBar){this.oAnchorNavigationBar.handleExit();this.oAnchorNavigationBar.destroy();}if(this.oTileActionsButton){this.oTileActionsButton.destroy();}if(this.oDoable){this.oDoable.off();}if(this.oDoneBtnLabel){this.oDoneBtnLabel.destroy();}sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRefresh",this._onDashboardShown,this);}});},false);
sap.ui.predefine('sap/ushell/components/homepage/DashboardGroupsBox',["sap/ushell/Layout","sap/ui/base/Object","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ushell/ui/launchpad/Tile","sap/ushell/ui/launchpad/DashboardGroupsContainer","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ui/core/Component","sap/m/GenericTile","sap/ui/Device","sap/ushell/ui/launchpad/PlusTile","sap/ushell/resources","sap/ushell/ui/launchpad/TileContainer","sap/ushell/ui/launchpad/LinkTileWrapper","sap/m/Button","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/GroupHeaderActions","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement"],function(L,b,F,a,c,D,C,E,u,d,G,e,P,r,T,f,B,A,g,h,q,M){"use strict";
var j=b.extend("sap.ushell.components.homepage.DashboardGroupsBox",{
metadata:{publicMethods:["createGroupsBox"]},
constructor:function(){if(sap.ushell.components.homepage.getDashboardGroupsBox&&sap.ushell.components.homepage.getDashboardGroupsBox()){return sap.ushell.components.homepage.getDashboardGroupsBox();}sap.ushell.components.homepage.getDashboardGroupsBox=(function(v){return function(){return v;};}(this.getInterface()));this.oController=undefined;this.oGroupsContainer=undefined;this.isLinkPersonalizationSupported=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported();sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);},
destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);sap.ushell.components.homepage.getDashboardGroupsBox=undefined;},
calculateFilter:function(){var i=[];var o;var s=this.oModel.getProperty("/homePageGroupDisplay"),k=this.oModel.getProperty("/tileActionModeActive");if(!k){if(s&&s==="tabs"){o=new F("isGroupSelected",a.EQ,true);}else{o=new F("isGroupVisible",a.EQ,true);}i.push(o);}return i;},
createGroupsBox:function(o,m){this.oController=o;var t=this,i,k,l=function(s){var v,w;if(s&&(v=s.getDomRef())){w=v.querySelector(".sapUshellPlusTile");if(w){return w;}}return null;},n=function(s){var v=l(s.currentGroup),w=l(s.endGroup),x=(s.tiles[s.tiles.length-2]===s.item)||(s.endGroup.getTiles().length===0);if(x){t._hidePlusTile(w);}else{t._showPlusTile(w);}if(s.currentGroup!==s.endGroup){t._showPlusTile(v);}};i=function(){L.getLayoutEngine().setExcludedControl(P);L.getLayoutEngine().setReorderTilesCallback.call(L.layoutEngine,n);};k=function(){if(!L.isInited){L.init({getGroups:this.getGroups.bind(this),getAllGroups:t.getAllGroupsFromModel.bind(t),isTabBarActive:t.isTabBarActive.bind(t)}).done(i);e.media.attachHandler(function(){if(!this.bIsDestroyed){L.reRenderGroupsLayout(null);}},this,e.media.RANGESETS.SAP_STANDARD);var s=this.getDomRef();o.getView().sDashboardGroupsWrapperId=!h(s)&&s.parentNode?s.parentNode.id:"";}if(this.getGroups().length){if(this.getModel().getProperty("/enableTilesOpacity")){u.handleTilesOpacity(this.getModel());}}E.emit("CenterViewPointContentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");this.getBinding("groups").filter(t.calculateFilter());};this.isTabBarActive=function(){return this.oModel.getProperty("/homePageGroupDisplay")==="tabs";};this.oModel=m;var p=this.calculateFilter(),U=C.last("/core/home/gridContainer");this.oGroupsContainer=new D("dashboardGroups",{displayMode:"{/homePageGroupDisplay}",afterRendering:k});if(U){sap.ui.require(["sap/ushell/ui/launchpad/GridContainer"],function(){t.oGroupsContainer.bindAggregation("groups",{filters:p,path:"/groups",factory:function(){var s=C.last("/core/home/sizeBehavior");var v=t._createGridContainer(o,m);v.setTileSizeBehavior(s);return v;}});});C.on("/core/home/sizeBehavior").do(function(s){t.oGroupsContainer.getAggregation("groups").forEach(function(v){v.setTileSizeBehavior(s);});});}else{this.oGroupsContainer.bindAggregation("groups",{filters:p,path:"/groups",factory:function(){return t._createTileContainer(o,m);}});}if(e.system.desktop){this.oGroupsContainer.addEventDelegate({onsapskipback:function(s){s.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);if(q(".sapUshellAnchorItem").is(":visible")){sap.ushell.components.ComponentKeysHandler.goToSelectedAnchorNavigationItem();}else{sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(s);}},onsapskipforward:function(s){s.preventDefault();var v=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(v){v.focus();}else if(q("#sapUshellFloatingContainerWrapper").is(":visible")&&s.originalEvent.srcElement.id!==""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(s);}},onsaptabnext:function(s){if(t.oModel.getProperty("/tileActionModeActive")){if(q(document.activeElement).closest(".sapUshellTileContainerHeader").length){var v=q(document.activeElement).closest(".sapUshellTileContainer");var w=q(document.activeElement).hasClass("sapUshellContainerTitle");var x=v.find(".sapUshellHeaderActionButton");if(w&&!x.length||document.activeElement.id===x.last()[0].id){if(v.find(".sapUshellTile, .sapUshellLink, .sapFCard").is(":visible")){s.preventDefault();sap.ushell.components.ComponentKeysHandler.goToLastVisitedTile(v,true);return;}}if(x.length&&document.activeElement.id!==x.last()[0].id){return;}}var y=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(y){s.preventDefault();y.focus();return;}}s.preventDefault();if(q("#sapUshellFloatingContainerWrapper").is(":visible")&&(s.originalEvent.srcElement.id)!==""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(s);}},onsaptabprevious:function(s){sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);var v=q(":focus");if(t.oModel.getProperty("/tileActionModeActive")&&!v.hasClass("sapUshellTileContainerHeader")){var w=q(document.activeElement);if(w.hasClass("sapUshellTile")||w.hasClass("sapFCard")){s.preventDefault();var x=w.closest(".sapUshellTileContainer");var y=x.find(".sapUshellHeaderActionButton").filter(":visible").last();if(y.length>0){y.focus();}else{x.find(".sapUshellContainerTitle").focus();}}}}});}return this.oGroupsContainer;},
getAllGroupsFromModel:function(){return this.oModel.getProperty("/groups");},
_createTileContainer:function(o){var t=this,i=new F("isTileIntentSupported",a.EQ,true),k=new T({headerText:"{title}",showEmptyLinksArea:{parts:["/tileActionModeActive","links/length","isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(l,n,m,I,s){if(n){return true;}else if(m){return false;}return l||I&&s==="tabs";}},showMobileActions:{parts:["/tileActionModeActive"],formatter:function(I){return I&&!this.getDefaultGroup();}},showIcon:{parts:["/isInDrag","/tileActionModeActive"],formatter:function(I,l){return(this.getIsGroupLocked()&&(I||l));}},deluminate:{parts:["/isInDrag"],formatter:function(I){return this.getIsGroupLocked()&&I;}},transformationError:{parts:["/isInDrag","/draggedTileLinkPersonalizationSupported"],formatter:function(I,l){return I&&!l;}},showBackground:"{/tileActionModeActive}",tooltip:"{title}",tileActionModeActive:"{/tileActionModeActive}",ieHtml5DnD:o.getView().ieHtml5DnD,enableHelp:"{/enableHelp}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",showHeader:true,showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",editMode:"{editMode}",supportLinkPersonalization:this.isLinkPersonalizationSupported,titleChange:function(l){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:l.getSource().getGroupId(),newTitle:l.getParameter("newTitle")});},showEmptyLinksAreaPlaceHolder:{parts:["links/length","/isInDrag","/homePageGroupDisplay"],formatter:function(n,I,s){return I&&s==="tabs"&&!n;}},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(l){return l&&!this.getIsGroupLocked();}},visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(l,m,v){if(!v[l?1:0]){return false;}return m||l;}},hidden:{parts:["/tileActionModeActive","isGroupVisible"],formatter:function(I,l){return I&&!l;}},links:this._getLinkTemplate(),tiles:{path:"tiles",factory:this._itemFactory.bind(this),filters:[i]},add:function(l){t._handleAddTileToGroup(l);}});return k;},
_createGridContainer:function(o){var i=sap.ui.require("sap/ushell/ui/launchpad/GridContainer"),k=new F("isTileIntentSupported",a.EQ,true);return new i({groupId:"{groupId}",showHeader:true,defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",headerText:"{title}",showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(t,l,v){if(!v[t?1:0]){return false;}return l||t;}},isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",editMode:"{editMode}",showBackground:"{/tileActionModeActive}",showIcon:{parts:["/isInDrag","/tileActionModeActive"],formatter:function(I,l){return(this.getIsGroupLocked()&&(I||l));}},tileActionModeActive:"{/tileActionModeActive}",supportLinkPersonalization:this.isLinkPersonalizationSupported,ieHtml5DnD:o.getView().ieHtml5DnD,enableHelp:"{/enableHelp}",showEmptyLinksAreaPlaceHolder:{parts:["links/length","/isInDrag","/homePageGroupDisplay"],formatter:function(n,I,s){return I&&s==="tabs"&&!n;}},showEmptyLinksArea:{parts:["/tileActionModeActive","links/length","isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(t,n,l,I,s){if(n){return true;}else if(l){return false;}return t||I&&s==="tabs";}},titleChange:function(l){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:l.getSource().getGroupId(),newTitle:l.getParameter("newTitle")});},tooltip:"{title}",links:this._getLinkTemplate(),tiles:{path:"tiles",factory:this._itemFactory.bind(this),filters:[k]}});},
_getLinkTemplate:function(){var o=new F("isTileIntentSupported",a.EQ,true);if(!this.isLinkPersonalizationSupported){return{path:"links",templateShareable:true,template:new f({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,tileViews:{path:"content",factory:function(i,k){return k.getObject();}},afterRendering:function(i){var k=q(this.getDomRef().getElementsByTagName("a"));k.attr("tabindex",-1);}}),filters:[o]};}return{path:"links",factory:function(i,k){var l=k.getObject().content[0];if(l&&l.bIsDestroyed){l=l.clone();k.getModel().setProperty(k.getPath()+"/content/0",l);}return l;},filters:[o]};},
_itemFactory:function(i,o){var t=o.getProperty(o.sPath),k,l,m,n;if(t){if(t.isCard){k=t&&t.content;l=k&&k.length&&k[0];if(l&&l["sap.card"]){n=l;}else if(t.manifest){n={"sap.flp":t.manifest&&t.manifest["sap.flp"],"sap.card":{"type":"List"}};}else{return this._createErrorTile();}sap.ui.getCore().loadLibrary("sap.ui.integration");var p=sap.ui.requireSync("sap/ui/integration/widgets/Card");m=new p({manifest:n});}else{m=this._createTile();}t.controlId=m&&m.getId&&m.getId();}return m;},
_createErrorTile:function(){return new c({tileViews:{path:"content",factory:function(){return new G({state:"Failed"});}}});},
_createTile:function(){var t=new c({"long":"{long}",isDraggedInTabBarToSourceGroup:"{draggedInTabBarToSourceGroup}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",isCustomTile:"{isCustomTile}",target:"{target}",isLocked:"{isLocked}",navigationMode:"{navigationMode}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,tileViews:{path:"content",factory:function(i,o){return o.getObject();}},coverDivPress:function(o){if(!o.oSource.getBindingContext().getObject().tileIsBeingMoved&&sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode._openActionsMenu(o);}},showActions:function(o){if(sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode._openActionsMenu(o);}},deletePress:[this.oController._dashboardDeleteTileHandler,this.oController],press:[this.oController.dashboardTilePress,this.oController]});var v=sap.ui.getCore().byId("viewPortContainer");t.addEventDelegate({onclick:function(){M.start("FLP:DashboardGroupsBox.onclick","Click on tile","FLP");M.start("FLP:OpenApplicationonClick","Open Application","FLP");function i(){M.end("FLP:DashboardGroupsBox.onclick");v.detachAfterNavigate(i);}v.attachAfterNavigate(i);}});return t;},
_updateGroupHeaderVisibility:function(){var k=this.oGroupsContainer.getGroups(),l=this.oModel.getProperty("/tileActionModeActive"),m=this.oController.getView().oPage.getShowHeader(),n,v=0;for(var i=0;i<k.length;i++){if(k[i].getProperty("visible")){v++;if(n===undefined){n=i;}else{k[i].setShowGroupHeader(true);}}}if(n!==undefined){var V=l||(v===1&&!m);k[n].setShowGroupHeader(V);}},
_handleActionModeChange:function(){var i=this.oModel.getProperty("/tileActionModeActive");if(i){this._addTileContainersContent();}else{L.reRenderGroupsLayout(null);}},
_addTileContainersContent:function(){var k=this.oGroupsContainer.getGroups();for(var i=0;i<k.length;i++){var o=k[i];if(!o.getBeforeContent().length){o.addBeforeContent(this._getBeforeContent());}if(!o.getAfterContent().length){o.addAfterContent(this._getAfterContent());}if(!o.getHeaderActions().length){o.addHeaderAction(this._getGroupHeaderAction());}}},
_handleAddGroupButtonPress:function(o){this.oController._addGroupHandler(o);this._addTileContainersContent();},
_getBeforeContent:function(){var o=new B({icon:"sap-icon://add",text:r.i18n.getText("add_group_at"),visible:"{= !${isGroupLocked} && !${isDefaultGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]});o.addStyleClass("sapUshellAddGroupButton");o.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));return o;},
_getAfterContent:function(){var o=new B({icon:"sap-icon://add",text:r.i18n.getText("add_group_at"),visible:"{= ${isLastGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]}).addStyleClass("sapUshellAddGroupButton");o.addStyleClass("sapUshellAddGroupButton");o.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));return o;},
_getGroupHeaderAction:function(){return new g({content:this._getHeaderActions(),tileActionModeActive:"{/tileActionModeActive}",isOverflow:"{/isPhoneWidth}"}).addStyleClass("sapUshellOverlayGroupActionPanel");},
_getHeaderActions:function(){var H=[];if(C.last("/core/home/gridContainer")){var o=new B({text:r.i18n.getText("AddTileBtn"),visible:"{= !${isGroupLocked}}",enabled:"{= !${/editTitle}}",press:this._handleAddTileToGroup.bind(this)}).addStyleClass("sapUshellHeaderActionButton");if(e.system.phone){o.setIcon("sap-icon://add");}H.push(o);}H.push(new B({text:{path:"isGroupVisible",formatter:function(i){return r.i18n.getText(i?"HideGroupBtn":"ShowGroupBtn");}},icon:{path:"isGroupVisible",formatter:function(i){if(e.system.phone){return i?"sap-icon://hide":"sap-icon://show";}return"";}},visible:"{= ${/enableHideGroups} && !${isGroupLocked} && !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(i){var s=i.getSource(),k=s.getBindingContext();this.oController._changeGroupVisibility(k);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));H.push(new B({text:{path:"removable",formatter:function(i){return r.i18n.getText(i?"DeleteGroupBtn":"ResetGroupBtn");}},icon:{path:"removable",formatter:function(i){if(e.system.phone){return i?"sap-icon://delete":"sap-icon://refresh";}return"";}},visible:"{= !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(i){var s=i.getSource(),k=s.getBindingContext();this.oController._handleGroupDeletion(k);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));return H;},
_handleAddTileToGroup:function(o){if(document.toDetail){document.toDetail();}d.getOwnerComponentFor(this.oController.getView().parentComponent).getRouter().navTo("appfinder",{"innerHash*":"catalog/"+JSON.stringify({targetGroup:encodeURIComponent(o.getSource().getBindingContext().sPath)})});},
_hidePlusTile:function(p){if(p){p.classList.add("sapUshellHidePlusTile");}},
_showPlusTile:function(p){if(p){p.classList.remove("sapUshellHidePlusTile");}}
});
return j;});
sap.ui.predefine('sap/ushell/components/homepage/DashboardUIActions',["sap/ui/base/Object","sap/ushell/Layout","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/Log"],function(b,L,D,q,a){"use strict";
var c=b.extend("sap.ushell.components.homepage.DashboardUIActions",{
metadata:{publicMethods:["initializeUIActions"]},
constructor:function(){this.aTabBarItemsLocation=[];if(sap.ushell.components.homepage.getDashboardUIActions&&sap.ushell.components.homepage.getDashboardUIActions()){return sap.ushell.components.homepage.getDashboardUIActions();}sap.ushell.components.homepage.getDashboardUIActions=(function(v){return function(){return v;};}(this.getInterface()));this.oTileUIActions=undefined;this.oLinkUIActions=undefined;this.oGroupUIActions=undefined;this.oController=undefined;this.UIActionsInitialized=false;sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._disableGroupUIActions,this);},
destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._disableGroupUIActions,this);sap.ushell.components.homepage.getDashboardUIActions=undefined;this.oGroupUIActions=null;this.oTileUIActions=null;this.oLinkUIActions=null;},
initializeUIActions:function(C){this.oController=C;if(C.getView().getModel().getProperty("/homePageGroupDisplay")==="tabs"){this._fillTabBarItemsArray();}var i=sap.ushell.Container?sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported():null;var p=q("#sapUshellDashboardPage").width();var d=C.getView().sDashboardGroupsWrapperId,A,r=sap.ui.getCore().getConfiguration().getRTL(),o={containerSelector:"#dashboardGroups",wrapperSelector:d?"#"+d:undefined,rootSelector:"#shell"},e=q.extend(true,{},o,{switchModeDelay:1000,isTouch:C.getView().isTouch,isCombi:C.getView().isCombi,debug:false}),l={draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",cloneClass:"sapUshellLinkTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:C.getView().isTouch||C.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:"sapUshellLockedTile",onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p,defaultMouseMoveHandler:function(){}},t={draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",deltaTop:-44,scrollContainerSelector:undefined,startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:C.getView().isTouch||C.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:"sapUshellLockedTile",onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p,defaultMouseMoveHandler:function(){}},g={draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",draggableSelectorExclude:".sapUshellHeaderActionButton",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",startCallback:this._handleGroupsUIStart.bind(this),endCallback:this._handleGroupDrop.bind(this),dragCallback:this._handleGroupStartDrag.bind(this),moveTolerance:C.getView().isTouch||C.getView().isCombi?10:0.1,isLayoutEngine:false,isVerticalDragOnly:true,draggableElement:".sapUshellTileContainerHeader"},w={type:"tiles",draggableSelector:".sapUshellTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p},W={type:"links",draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p},f={type:"groups",draggableSelector:".sapUshellTileContainerHeader",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",_publishAsync:C._publishAsync};if(C.getView().oDashboardGroupsBox.getGroups().length){if(C.getView().getModel().getProperty("/personalization")){if(!C.getView().ieHtml5DnD){sap.ui.require(["sap/ushell/UIActions"],function(U){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=new U(q.extend(true,{},e,t)).enable();this.oGroupUIActions=new U(q.extend(true,{},e,g));if(i){this.oLinkUIActions=new U(q.extend(true,{},e,l)).enable();}A=C.getView().getModel().getProperty("/tileActionModeActive");if(A){this.oGroupUIActions.enable();}}.bind(this));}else{sap.ui.require(["sap/ushell/UIActionsWin8"],function(U){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=U.getInstance(q.extend(true,{},o,w)).enable();this.oLinkUIActions=U.getInstance(q.extend(true,{},o,W)).enable();this.oGroupUIActions=U.getInstance(q.extend(true,{},o,f)).enable();}.bind(this));}}}},
_enableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.enable();}},
disableAllDashboardUiAction:function(){this._disableTileUIActions();this._disableLinkUIActions();this._disableGroupUIActions();},
_disableTileUIActions:function(){if(this.oTileUIActions){this.oTileUIActions.disable();}},
_disableLinkUIActions:function(){if(this.oLinkUIActions){this.oLinkUIActions.disable();}},
_disableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.disable();}},
_handleTileDragMove:function(d){if(!d.isScrolling){L.getLayoutEngine().moveDraggable(d.moveX,d.moveY,this.aTabBarItemsLocation);}},
_handleTileDragAndScrollContinuation:function(m){var A=q("#anchorNavigationBar").offset(),i=A.top;if(m<i){L.getLayoutEngine()._cancelLongDropTimmer();}return L.getLayoutEngine()._isTabBarCollision(m);},
_fillTabBarItemsArray:function(){var i=q(".sapUshellAnchorItem"),l=i.length,d,B=10,t=0,T,e=[],I,o,f,n;for(d=0;d<l;d++){I=i[d];o=I.getBoundingClientRect();e[d]=o.width;}for(d=0;d<l;d++){f=e[d];if(f===0){continue;}n=Math.round(f/B);for(T=t;T<t+n;T++){this.aTabBarItemsLocation[T]=d;}t=T;}},
_handleTileUIStart:function(e,u){if((D.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");if(this.titleElement){this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}}},
_changeTileDragAndDropAnimate:function(e,u){var d=this.dragNDropData.jqDashboard.scrollTop(),j,t,f,g,h,T,i,C;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){j=this.dragNDropData.jqDraggableElements.eq(i);t=j[0];f=j.position();g=j.offset();if((g.left===t.offset.left)&&(g.top===t.offset.top)){continue;}t.position=f;t.offset=g;C=j.data("clone");if(!C){continue;}h=t.position.left+this.dragNDropData.containerLeftMargin;T=this._getTileTopOffset(j,t.position,d);C.stop(true,false).animate({left:h,top:T},{duration:250},{easing:"swing"});}},
_preventTextSelection:function(){if(window.getSelection){var s=window.getSelection();try{s.removeAllRanges();}catch(e){}}},
_handleStartDragTile:function(e,t){this._preventTextSelection();L.getLayoutEngine().layoutStartCallback(t);q(t).find("a").removeAttr("href");this.oController._handleDrag.call(this.oController,e,t);sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},
_onBeforeCreateLinkClone:function(e,d){L.getLayoutEngine().saveLinkBoundingRects(d);},
_handleLinkDrop:function(e,t,A){var d=q.Deferred(),p;if(L.isTabBarActive()){L.tabBarTileDropped();}if((D.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}if(D.desktop){q("body").removeClass("sapUshellDisableUserSelect");}if(L.getLayoutEngine().isLinkIntersected()||L.getLayoutEngine().isOriginalAreaChanged()){p=this.oController._handleDrop.call(this.oController,e,t);}if(p){p.then(function(){q("#dashboardGroups .sapUshellHidePlusTile").removeClass("sapUshellHidePlusTile");setTimeout(function(){d.resolve();},300);});}else{setTimeout(function(){d.resolve();},0);}return d.promise();},
_handleTileDrop:function(e,t,A){if(L.getLayoutEngine().isOriginalAreaChanged()){return this._handleTileToLinkDrop(e,t,A);}return this._handleTileToTileDrop(e,t,A);},
_handleTileToLinkDrop:function(e,t,A){return this._handleLinkDrop(e,t,A);},
_handleTileToTileDrop:function(e,t,A){var j,h,T,d=function(e,t){q("#dashboardGroups .sapUshellHidePlusTile").removeClass("sapUshellHidePlusTile");if((D.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(D.desktop){q("body").removeClass("sapUshellDisableUserSelect");}};h=q(".sapUshellTabBarHoverOn");h.removeClass("sapUshellTabBarHoverOn");T=q(".sapUshellTileDragOpacity");T.removeClass("sapUshellTileDragOpacity");if(L.isTabBarActive()){L.tabBarTileDropped();}if(L.isTabBarActive()&&L.isOnTabBarElement()){if(A&&A.clone){var o=q.Deferred();j=q(A.clone);j.css("display","none");setTimeout(function(){o.resolve();d.call(this,e,t);}.bind(this),300);return o.promise();}d.apply(this,arguments);}d.apply(this,arguments);},
_getTileTopOffset:function(t,p,d){var i=0,T=i+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=p.top;return T;},
_markDisableGroups:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty("/isInDrag",true);}},
_endUIHandler:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty("/isInDrag",false);}},
_handleGroupStartDrag:function(e,u){this.oTileUIActions.disable();if(this.oLinkUIActions){this.oLinkUIActions.disable();}var g=q(".sapUshellDashboardGroupsContainerItem-clone"),d=g.find(".sapUshellContainerTitle"),t=d.height(),f=d.width(),h,i,j,s,r=sap.ui.getCore().getConfiguration().getRTL();if(!D.system.phone){g.find(".sapUshellTileContainerEditMode").offset({top:this.oGroupUIActions.getMove().y-t,left:r?q("#sapUshellDashboardPage").width()+this.oGroupUIActions.getMove().x+f:this.oGroupUIActions.getMove().x-(f/2)});q(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}else{q(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");q(".sapUshellLineModeContainer, .sapUshellLinksContainer").addClass("sapUshellTileContainerRemoveContent");q(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");q(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}q(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerRemoveContent");q(u).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.oController.getView().getModel().setProperty("/isInDrag",true);q(u).attr("startPos",q(u).index());a.info("startPos - "+q(u).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},0);h=q("#dashboardGroups").offset().top;i=q(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top;j=q(".sapUshellDashboardGroupsContainerItem-clone").offset().top;s=i-h-j;q(".sapUshellDashboardView section").animate({scrollTop:s},0);},
_handleGroupsUIStart:function(e,u){q(u).find(".sapUshellTileContainerContent").css("outline-color","transparent");},
_handleGroupDrop:function(e,u){var B=sap.ui.getCore().getEventBus(),Q=q(u),f=q(Q.children()[0]).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),o={group:g,groupChanged:false,focus:false},n=Q.index();Q.startPos=window.parseInt(Q.attr("startPos"),10);d.removeAggregation("groups",g,true);d.insertAggregation("groups",g,n,true);this._handleGroupMoved(e,{item:Q});Q.removeAttr("startPos");sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){q(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");q(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");q(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");q(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerRemoveContent");q(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");q(".sapUshellLineModeContainer, .sapUshellLinksContainer").removeClass("sapUshellTileContainerRemoveContent");},0);window.setTimeout(q.proxy(B.publish,B,"launchpad","scrollToGroup",o),1);this.oTileUIActions.enable();if(this.oLinkUIActions){this.oLinkUIActions.enable();}},
_handleGroupMoved:function(e,u){var f=u.item.startPos,t=u.item.index(),m=this.oController.getView().getModel();if(t!==-1){this.oController._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t});setTimeout(function(){m.setProperty("/isInDrag",false);},100);}},
_setController:function(C){this.oController=C;}
});
return c;});
sap.ui.predefine('sap/ushell/components/homepage/FLPAnalytics',["sap/ushell/services/AppConfiguration","sap/base/Log","sap/ui/thirdparty/jquery"],function(A,L,q){"use strict";var o=["deleteTile","actionModeActive","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],E=sap.ui.getCore().getEventBus(),t=this,l={};
function s(c){var m=sap.ushell.services.AppConfiguration.getMetadata();l[c]={};l[c].startTime=new Date();l[c].title=m.title;}
function a(c){var d=0;try{d=(new Date()-l[c].startTime)/1000;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Time in Application (sec)",d,[l[c].title]);}catch(e){L.warning("Duration in application "+c+" could not be calculated",null,"sap.ushell.components.homepage.FLPAnalytics");}}
function h(c,d,D){var f=hasher.getHash(),g;window.swa.custom1={ref:f};switch(d){case"appOpened":s(f);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Direct Launch",[l[f].title]);E.unsubscribe("sap.ushell","appOpened",h);break;case"bookmarkTileAdded":g=window.document.title;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Save as Tile",[g,D&&D.group&&D.group.title?D.group.title:"",D&&D.group&&D.group.id?D.group.id:"",D&&D.tile&&D.tile.title?D.tile.title:g]);break;case"actionModeActive":sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Enter Action Mode",[D.source]);break;case"catalogTileClick":sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Catalog",[]);break;case"dashboardTileClick":sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Homepage",[]);break;case"dashboardTileLinkClick":sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Tile Group Link",[]);break;default:break;}}
function b(c){var f,T,d;if(c.getParameter("from")&&c.getParameter("to")){f=c.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:f};a(f);d=c.getParameter("to");T=d.getId().replace("application-","").replace("applicationShellPage-","");s(T);window.swa.custom1={ref:T};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Fiori Navigation",[l[T].title]);}}
q(window).on("unload",function(c){var d=window.location.hash.substr(1);a(d);});try{sap.ui.getCore().byId("viewPortContainer").attachAfterNavigate(b,t);}catch(e){L.warning("Failure when subscribing to viewPortContainer 'AfterNavigate' event",null,"sap.ushell.components.homepage.FLPAnalytics");}E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",h,t);o.forEach(function(i){E.subscribe("launchpad",i,h,t);});E.subscribe("sap.ushell","appOpened",h,t);},false);
sap.ui.predefine('sap/ushell/components/pages/ActionMode',["sap/ushell/resources","sap/ushell/EventHub","sap/base/Log"],function(r,E,L){"use strict";var A={};
A.start=function(c){this.oController=c;c.getView().getModel("viewSettings").setProperty("/actionModeActive",true);E.emit("enableMenuBarNavigation",false);var a=sap.ui.getCore().byId("ActionModeBtn");var s=r.i18n.getText("PageRuntime.EditMode.Exit");a.setTooltip(s);a.setText(s);};
A.cancel=function(){this._cleanup();};
A.save=function(){L.info("store actions in pages service");this._cleanup();};
A._cleanup=function(){this.oController.getView().getModel("viewSettings").setProperty("/actionModeActive",false);E.emit("enableMenuBarNavigation",true);var a=sap.ui.getCore().byId("ActionModeBtn");var s=r.i18n.getText("PageRuntime.EditMode.Activate");a.setTooltip(s);a.setText(s);};
A.visualizationAdd=function(e,s,p){L.info("add visualization");};
A.sectionAdd=function(e,s,p){L.info("add section");};
A.sectionDelete=function(e,s,p){L.info("delete section");};
A.sectionReset=function(e,s,p){L.info("reset section");};
A.sectionTitleChange=function(e,s,p){L.info("section title changed");};
A.sectionMove=function(e,s,p){L.info("section should be moved");};
A.sectionVisibilityChange=function(e,s,p){L.info("section was hidden or unhidden");};
return A;});
sap.ui.predefine('sap/ushell/components/pages/Component',["sap/ui/core/UIComponent","sap/ushell/EventHub","sap/ushell/components/SharedComponentUtils","sap/ushell/resources"],function(U,E,S,r){"use strict";return U.extend("sap.ushell.components.pages.Component",{metadata:{manifest:"json"},init:function(){U.prototype.init.apply(this,arguments);E.emit("PagesRuntimeRendered");S.toggleUserActivityLog();S.getEffectiveHomepageSetting("/core/home/sizeBehavior","/core/home/sizeBehaviorConfigurable");this.setModel(r.i18nModel,"i18n");},getComponentData:function(){return{};}});});
sap.ui.predefine('sap/ushell/components/pages/StateManager',[],function(){"use strict";var S={};
S.init=function(p,a){this.oPagesRuntimeNavContainer=p;this.oPagesNavContainer=a;this._oURLParsingService=sap.ushell.Container.getServiceAsync("URLParsing");this.oPagesRuntimeNavContainer.attachNavigate(this._onErrorPageNavigated,this);this.oPagesNavContainer.attachNavigate(this._onPageNavigated,this);this._onTabNavigatedBind=this._onTabNavigated.bind(this);document.addEventListener("visibilitychange",this._onTabNavigatedBind);this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe("launchpad","setConnectionToServer",this._onEnableRequests,this);this.oEventBus.subscribe("sap.ushell","navigated",this._onShellNavigated,this);};
S._onEnableRequests=function(c,e,d){if(!d||d.active===undefined){return;}this._setCurrentPageVisibility(d.active);};
S._setCurrentPageVisibility=function(v,r,n){if(this.oPagesRuntimeNavContainer.getCurrentPage().isA("sap.m.MessagePage")&&!n){return;}var c=this.oPagesNavContainer.getCurrentPage();this._setPageVisibility(c,v,r);};
S._setPageVisibility=function(p,v,r){if(!p){return;}this._visitVisualizations(p,function(a){a.setActive(v,r);});};
S._visitVisualizations=function(p,v){if(!v){return;}p.getContent()[0].getAggregation("sections").forEach(function(s){s.getAggregation("visualizations").forEach(v);});};
S._onShellNavigated=function(){return this._oURLParsingService.then(function(u){var h=u.parseShellHash(window.hasher.getHash());if((h.semanticObject==="Shell"&&h.action==="home")||(h.semanticObject==="Launchpad"&&h.action==="openFLPPage")){this._setCurrentPageVisibility(true,true);}else{this._setCurrentPageVisibility(false,false);}}.bind(this));};
S._onTabNavigated=function(){return this._oURLParsingService.then(function(u){var h=u.parseShellHash(window.hasher.getHash());if((h.semanticObject==="Shell"&&h.action==="home")||(h.semanticObject==="Launchpad"&&h.action==="openFLPPage")){this._setCurrentPageVisibility(!document.hidden);}}.bind(this));};
S._onPageNavigated=function(e){var p=e.getParameters();this._setPageVisibility(p.from,false);this._setPageVisibility(p.to,true);};
S._onErrorPageNavigated=function(e){var t=e.getParameter("to");this._setCurrentPageVisibility(!t.isA("sap.m.MessagePage"),undefined,true);};
S.exit=function(){this.oEventBus.unsubscribe("sap.ushell","navigated",this._onPageNavigated,this);document.removeEventListener("visibilitychange",this._onTabNavigatedBind);this.oPagesNavContainer.detachNavigate(this._onPageNavigated,this);this.oPagesRuntimeNavContainer.detachNavigate(this._onErrorPageNavigated,this);this.oEventBus.unsubscribe("launchpad","setConnectionToServer",this._onEnableRequests,this);};
return S;});
sap.ui.predefine('sap/ushell/components/pages/controller/PageRuntime.controller',["sap/ui/core/mvc/Controller","sap/m/GenericTile","sap/ushell/resources","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/components/pages/formatter/PageRuntimeFormatter","sap/m/library","sap/m/MessageToast","sap/ushell/components/pages/StateManager","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/base/Log","sap/ushell/utils"],function(C,G,r,J,a,P,l,M,s,O,E,L,u){"use strict";return C.extend("sap.ushell.components.pages.controller.Pages",{formatter:P,onInit:function(){this._oVisualizationLoadingService=sap.ushell.Container.getServiceAsync("VisualizationLoading");this._oPagesService=sap.ushell.Container.getServiceAsync("Pages");this._oURLParsingService=sap.ushell.Container.getServiceAsync("URLParsing");this._oViewSettingsModel=new J({sizeBehavior:a.last("/core/home/sizeBehavior"),actionModeActive:false});this.getView().setModel(this._oViewSettingsModel,"viewSettings");this._aConfigListeners=a.on("/core/home/sizeBehavior").do(function(S){this._oViewSettingsModel.setProperty("/sizeBehavior",S);}.bind(this));this._oErrorPageModel=new J({icon:"sap-icon://documents",text:"",description:"",details:""});this.getView().setModel(this._oErrorPageModel,"errorPage");this._oPagesService.then(function(p){this.getView().setModel(p.getModel());}.bind(this));this.sCurrentTargetPageId="";this._openFLPPage();this.oContainerRouter=sap.ushell.Container.getRenderer().getRouter();this.oContainerRouter.getRoute("home").attachMatched(this._openFLPPage,this);this.oContainerRouter.getRoute("openFLPPage").attachMatched(this._openFLPPage,this);this.oErrorPage=this.byId("errorPage");this.oPagesNavContainer=this.byId("pagesNavContainer");this.oPagesRuntimeNavContainer=this.byId("pagesRuntimeNavContainer");s.init(this.oPagesRuntimeNavContainer,this.oPagesNavContainer);this.oEventHubListener=E.once("PagesRuntimeRendered").do(function(){if(a.last("/core/shell/enablePersonalization")){this._createActionModeButton();}}.bind(this));},_getPageAndSpaceId:function(){return this._oURLParsingService.then(function(b){var h=b.parseShellHash(window.hasher.getHash());var i={semanticObject:h.semanticObject||"",action:h.action||""};var H=h.params||{};var p=H.pageId||[];var S=H.spaceId||[];return this._parsePageAndSpaceId(p,S,i);}.bind(this));},_parsePageAndSpaceId:function(p,b,i){if(p.length<1&&b.length<1){if(i.semanticObject==="Shell"&&i.action==="home"){return this._getAssignedPage();}return Promise.reject(r.i18n.getText("PageRuntime.NoPageIdAndSpaceIdProvided"));}if(p.length===1&&b.length===0){return Promise.reject(r.i18n.getText("PageRuntime.OnlyPageIdProvided"));}if(p.length===0&&b.length===1){return Promise.reject(r.i18n.getText("PageRuntime.OnlySpaceIdProvided"));}if(p.length>1||b.length>1){return Promise.reject(r.i18n.getText("PageRuntime.MultiplePageOrSpaceIdProvided"));}if(p[0]===""){return Promise.reject(r.i18n.getText("PageRuntime.InvalidPageId"));}if(b[0]===""){return Promise.reject(r.i18n.getText("PageRuntime.InvalidSpaceId"));}return Promise.resolve({pageId:p[0],spaceId:b[0]});},_getAssignedPage:function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getMenuEntries();}).then(function(m){if(m.length===0){return Promise.reject(r.i18n.getText("PageRuntime.NoAssignedPage"));}var p={};if(O.get("target.parameters",m[0])){m[0].target.parameters.forEach(function(o){if(o.name&&o.value){p[o.name]=o.value;}});}if(!p.spaceId||!p.pageId){return Promise.reject(r.i18n.getText("PageRuntime.CannotFindADefaultPage"));}return{spaceId:p.spaceId,pageId:p.pageId};});},_openFLPPage:function(){var p,S;return this._getPageAndSpaceId().then(function(i){p=i.pageId;S=i.spaceId;this.sCurrentTargetPageId=p;return this._oVisualizationLoadingService.then(function(v){this._oResolvedVisualizationLoadingService=v;return Promise.all([v.loadVisualizationData(),this._oPagesService]);}.bind(this)).then(function(b){var o=b[1];return o.loadPage(p);}).then(function(){if(this.sCurrentTargetPageId===p){u.setPerformanceMark("FLP-TTI-Homepage");this._navigate(p);}}.bind(this)).catch(function(e){if(e instanceof Error){this._oErrorPageModel.setProperty("/text",r.i18n.getText("PageRuntime.GeneralError.Text"));}else{var d=r.i18n.getText("PageRuntime.CannotLoadPage.Description")+JSON.stringify(e);this._oErrorPageModel.setProperty("/icon","sap-icon://documents");this._oErrorPageModel.setProperty("/text",r.i18n.getText("PageRuntime.CannotLoadPage.Text",[p,S]));this._oErrorPageModel.setProperty("/description","");this._oErrorPageModel.setProperty("/details",d);}this.oPagesRuntimeNavContainer.to(this.oErrorPage);}.bind(this));}.bind(this)).catch(function(e){this._oErrorPageModel.setProperty("/icon","sap-icon://documents");this._oErrorPageModel.setProperty("/text",e||"");this._oErrorPageModel.setProperty("/description","");this._oErrorPageModel.setProperty("/details","");this.oPagesRuntimeNavContainer.to(this.oErrorPage);}.bind(this));},_navigate:function(t){var p=this.oPagesNavContainer.getPages();var b;for(var i=0;i<p.length;i++){b=p[i].data("pageId");if(t&&t===b){this.oPagesNavContainer.to(p[i]);this.oPagesRuntimeNavContainer.to(this.oPagesNavContainer);return;}}},_pressViewDetailsButton:function(){var e=this._oErrorPageModel.getProperty("/details")||"";this._oErrorPageModel.setProperty("/description",e);},_copyToClipboard:function(){var t=document.createElement("textarea");try{t.contentEditable=true;t.readonly=false;t.textContent=this._oErrorPageModel.getProperty("/description");document.documentElement.appendChild(t);t.select();document.execCommand("copy");M.show(r.i18n.getText("PageRuntime.CannotLoadPage.CopySuccess"),{closeOnBrowserNavigation:false});}catch(e){M.show(r.i18n.getText("PageRuntime.CannotLoadPage.CopyFail"),{closeOnBrowserNavigation:false});}finally{t.parentNode.removeChild(t);}},_visualizationFactory:function(i,c){if(this._oResolvedVisualizationLoadingService){var v=c.getObject();return this._oResolvedVisualizationLoadingService.instantiateVisualization(v);}return new G({state:l.LoadState.Failed});},onExit:function(){this.oContainerRouter.getRoute("home").detachMatched(this._openFLPPage,this);this.oContainerRouter.getRoute("openFLPPage").detachMatched(this._openFLPPage,this);this._aConfigListeners.off();this.oEventHubListener.off();s.exit();},_createActionModeButton:function(){var A={id:"ActionModeBtn",text:r.i18n.getText("PageRuntime.EditMode.Activate"),icon:"sap-icon://edit",press:[this.pressActionModeButton,this]};var t=sap.ui.getCore().byId(A.id);if(t){t.setTooltip(A.text);t.setText(A.text);t.attachPress(A.press);}else{var o={controlType:"sap.ushell.ui.launchpad.ActionItem",oControlProperties:A,bIsVisible:true,aStates:["home"]};var R=sap.ushell.Container.getRenderer("fiori2");R.addUserAction(o).done(function(b){t=b;if(a.last("/core/extension/enableHelp")){t.addStyleClass("help-id-ActionModeBtn");}});}},pressActionModeButton:function(){var A=this.getView().getModel("viewSettings").getProperty("/actionModeActive");sap.ui.require(["sap/ushell/components/pages/ActionMode"],function(b){if(A){b.cancel();}else{b.start(this);}}.bind(this));},handleEditModeAction:function(h,e,S,p){sap.ui.require(["sap/ushell/components/pages/ActionMode"],function(A){A[h](e,S,p);});},visualizationMove:function(e,S,p){L.info("visualization should be moved");}});});
sap.ui.predefine('sap/ushell/components/pages/formatter/PageRuntimeFormatter',["sap/ui/Device"],function(D){"use strict";var P={};
P._sectionVisibility=function(v){return!(v.length===0&&D.system.phone);};
return P;});
sap.ui.predefine('sap/ushell/components/shell/MeArea/Component',["sap/ui/core/UIComponent","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/components/shell/MeArea/MeArea.controller"],function(U,A,C,M){"use strict";var _;
function a(){if(!_){_=sap.ushell.Container.getRenderer("fiori2");}return _;}
return U.extend("sap.ushell.components.shell.MeArea.Component",{metadata:{version:"1.74.0",library:"sap.ushell.components.shell.MeArea",dependencies:{libs:["sap.m"]}},createContent:function(){this._bIsMeAreaCreated=false;this.oMeAreaController=new M();this.oMeAreaController.onInit();var t=this;A.getElementsModel().createTriggers([{fnRegister:function(){if(!t.oActionsDoable){t.oActionsDoable=C.on("/core/shell/model/currentState/actions").do(function(b){if(b&&b.length>0){a().showHeaderEndItem(["meAreaHeaderButton"],true);}else{a().hideHeaderEndItem(["meAreaHeaderButton"],true);}});}},fnUnRegister:function(){if(!t.oActionsDoable){t.oActionsDoable.off();t.oActionsDoable=null;}}}],false,["blank-home","blank"]);sap.ui.getCore().getEventBus().publish("shell","meAreaCompLoaded",{delay:0});},exit:function(){if(this.oActionsDoable){this.oActionsDoable.off();}this.oEventListener.off();this.oMeAreaController.onExit();}});});
sap.ui.predefine('sap/ushell/components/shell/MeArea/MeArea.controller',["sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/json/JSONModel","sap/m/StandardListItem","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/resources","sap/ushell/ui/footerbar/AboutButton","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/ui/footerbar/EndUserFeedback","sap/ushell/ui/launchpad/ActionItem","sap/ushell/ui/QuickAccess","sap/ushell/EventHub","sap/m/library","sap/base/Log","sap/ui/performance/Measurement","sap/ui/core/ElementMetadata"],function(C,D,J,S,A,a,r,b,c,E,d,Q,f,l,L,M,g){"use strict";var h=l.ListType;var B=l.ButtonType;var _;
function i(){if(!_){_=sap.ushell.Container.getRenderer("fiori2");}return _;}
function j(){return i().getShellConfig();}
function k(){return A.getElementsModel().getModel();}
function m(s){if(!sap.ui.getCore().byId(s)){L.debug("Could not render ActionItem because it was not created: "+s);return false;}return true;}
return C.extend("sap.ushell.components.shell.MeArea.MeArea",{_aDanglingControl:[],_aDoables:[],onInit:function(){var t=this;var o=j();this._createActionButtons(o);var u=sap.ushell.Container.getUser();var e=a.last("/core/shell/model/currentState/actions").filter(m);this.oModel=new J({actions:e,userName:u.getFullName()||u.getId()});this._aDoables.push(a.on("/core/shell/model/currentState/actions").do(function(n){var F=n.filter(m);t.getModel().setProperty("/actions",F);}));this._aDoables.push(f.on("showMeArea").do(function(s){var p=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(p&&p.isOpen()||!s){t._toggleMeAreaPopover(false);}else{t._toggleMeAreaPopover(true);}}));},onExit:function(){this._destroyDanglingControls();this._aDoables.forEach(function(o){o.off();});this._aDanglingControl=[];this._aDoables=[];var p=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(p){p.destroy();}},getModel:function(){return this.oModel;},_createActionButtons:function(o){var e=a.last("/core/extension/enableHelp");this._createAboutButton(e);if(a.last("/core/spaces/enabled")&&!o.moveAppFinderActionToShellHeader||o.enablePersonalization!==false&&!o.moveAppFinderActionToShellHeader){this._createAppFinderButton(o,e);}if(!o.moveUserSettingsActionToShellHeader){this._createSettingsButton(e);}if(!o.moveContactSupportActionToShellHeader){this._createSupportTicketButton(e);}this._createEndUserFeedbackButton(o,e);if(o.enableRecentActivity&&a.last("/core/shell/model/currentState/showRecentActivity")){this._createRecentActivitiesButton();this._createFrequentActivitiesButton();}if(!o.disableSignOut){this._createLogoutButton();}},_createAppFinderButton:function(o,e){if(sap.ui.getCore().byId("openCatalogBtn")){return;}var O=new d("openCatalogBtn",{text:r.i18n.getText("open_appFinderBtn"),icon:"sap-icon://sys-find",visible:!o.disableAppFinder,actionType:"action",press:function(){M.start("FLP:AppFinderLoadingStartToEnd","AppFinderLoadingStartToEnd","FLP");sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(n){n.toExternal({target:{semanticObject:"Shell",action:"appfinder"}});});}});if(e){O.addStyleClass("help-id-openCatalogActionItem");}this._addDanglingControl(O);},_createAboutButton:function(e){var I="aboutBtn";if(!sap.ui.getCore().byId(I)){var o=new b(I);if(e){o.addStyleClass("help-id-aboutBtn");}this._addDanglingControl(o);i().showActionButton(I,false);}},_createSettingsButton:function(e){var I="userSettingsBtn";if(!sap.ui.getCore().byId(I)){var u=new d(I,{text:r.i18n.getText("userSettings"),icon:"sap-icon://action-settings",press:function(){f.emit("openUserSettings",Date.now());}});if(e){u.addStyleClass("help-id-loginDetails");}this._addDanglingControl(u);}},_createSupportTicketButton:function(e){var t=this;a.on("/core/extension/SupportTicket").do(function(n){var I="ContactSupportBtn";var o=sap.ui.getCore().byId(I);if(n&&!o){o=new c(I);t._addDanglingControl(o);if(e){o.addStyleClass("help-id-contactSupportBtn");}}if(n){i().showActionButton(I);}else{i().hideActionButton(I);}});},_createEndUserFeedbackButton:function(o,e){var t=this;a.on("/core/extension/EndUserFeedback").do(function(n){if(n){var I="EndUserFeedbackBtn";var p=sap.ui.getCore().byId(I);if(!p){var q=i().getEndUserFeedbackConfiguration();p=new E(I,{showAnonymous:q.showAnonymous,anonymousByDefault:q.anonymousByDefault,showLegalAgreement:q.showLegalAgreement,showCustomUIContent:q.showCustomUIContent,feedbackDialogTitle:q.feedbackDialogTitle,textAreaPlaceholder:q.textAreaPlaceholder,customUIContent:q.customUIContent});if(e){p.addStyleClass("help-id-EndUserFeedbackBtn");}p.setModel(k());t._addDanglingControl(p);}sap.ushell.Container.getServiceAsync("EndUserFeedback").then(function(s){a.emit("/core/shell/model/showEndUserFeedback",true);t._setupEndUserFeedbackButton(s,p,o);});}else{a.emit("/core/shell/model/showEndUserFeedback",false);}});},_setupEndUserFeedbackButton:function(o,n,p){try{o.isEnabled().done(function(){var q=i().getEndUserFeedbackConfiguration();if(p.moveGiveFeedbackActionToShellHeader){M.start("FLP:Shell.controller._createActionButtons","create give feedback as shell head end item","FLP");var t=sap.ui.getCore().byId("EndUserFeedbackHandlerBtn");if(t){t.setModel(k());t.setShowAnonymous(q.showAnonymous);t.setAnonymousByDefault(q.anonymousByDefault);t.setShowLegalAgreement(q.showLegalAgreement);t.setShowCustomUIContent(q.showCustomUIContent);t.setFeedbackDialogTitle(q.feedbackDialogTitle);t.setTextAreaPlaceholder(q.textAreaPlaceholder);t.setAggregation("customUIContent",q.customUIContent,false);n.attachPress(function(){t.firePress();});}M.end("FLP:Shell.controller._createActionButtons");}n.setVisible(true);i().showActionButton(n.getId());}).fail(function(){if(p.moveGiveFeedbackActionToShellHeader){i().hideHeaderEndItem(n.getId());}else{i().hideActionButton(n.getId());}});}catch(e){L.error("EndUserFeedback adapter is not found",e.message||e);}},_createRecentActivitiesButton:function(){var t=this,I="recentActivitiesBtn";a.on("/core/shell/model/enableTrackingActivity").do(function(e){if(e){var R=sap.ui.getCore().byId(I);if(!R){R=new d(I,{text:r.i18n.getText("recentActivities"),icon:"sap-icon://customer-history",press:function(){Q.openQuickAccessDialog("recentActivityFilter","meAreaHeaderButton");}});t._addDanglingControl(R);}i().showActionButton(I,false);}else{i().hideActionButton(I,false);}});},_createFrequentActivitiesButton:function(){var t=this,I="frequentActivitiesBtn";a.on("/core/shell/model/enableTrackingActivity").do(function(e){if(e){var F=sap.ui.getCore().byId(I);if(!F){F=new d(I,{text:r.i18n.getText("frequentActivities"),icon:"sap-icon://activity-individual",tooltip:r.i18n.getText("frequentActivitiesTooltip"),press:function(){Q.openQuickAccessDialog("frequentlyUsedFilter","meAreaHeaderButton");}});t._addDanglingControl(F);}i().showActionButton(I,false);}else{i().hideActionButton(I,false);}});},_createLogoutButton:function(){var I="logoutBtn";if(sap.ui.getCore().byId(I)){return;}var o=new d(I,{visible:true,type:B.Transparent,icon:"sap-icon://log",text:r.i18n.getText("signoutBtn_title"),press:this.logout});this._addDanglingControl(o);i().showActionButton(I,false);},logout:function(){sap.ui.require(["sap/m/MessageBox","sap/ushell/ui/launchpad/LoadingDialog"],function(e,n){var o=new n({text:""}),s=true,I=false,p={};sap.ushell.Container.getGlobalDirty().done(function(q){s=false;if(I===true){o.exit();o=new n({text:""});}var t=function(){var R=r.i18n;if(q===sap.ushell.Container.DirtyState.DIRTY){p.message=R.getText("unsaved_data_warning_popup_message");p.icon=e.Icon.WARNING;p.messageTitle=R.getText("unsaved_data_warning_popup_title");}else{p.message=R.getText("signoutConfirmationMsg");p.icon=e.Icon.QUESTION;p.messageTitle=R.getText("signoutMsgTitle");}return p;};p=t(q);e.show(p.message,p.icon,p.messageTitle,[e.Action.OK,e.Action.CANCEL],function(u){if(u===e.Action.OK){o.openLoadingScreen();o.showAppInfo(r.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.logout();}else if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}},g.uid("confirm"));});if(s===true){o.openLoadingScreen();I=true;}});},_addDanglingControl:function(o){this._aDanglingControl.push(o);},_destroyDanglingControls:function(){if(this._aDanglingControl){this._aDanglingControl.forEach(function(o){if(o.destroyContent){o.destroyContent();}o.destroy();});}},_toggleMeAreaPopover:function(s){var p=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(!p){p=sap.ui.xmlfragment("sap.ushell.components.shell.MeArea.MeAreaPopover",this);p.setModel(this.getModel());}else if(s){p.getModel().refresh(true);}if(s){p.openBy(sap.ui.getCore().byId("meAreaHeaderButton"));}else{p.close();}},meAreaPopoverItemFactory:function(I,o){var e=sap.ui.getCore().byId(o.getObject()),n;var p=function(){if(e){e.firePress();f.emit("showMeArea",false);}};n=new S({id:I+"-"+e.getId(),icon:e.getIcon(),iconInset:true,title:e.getText(),visible:e.getVisible(),type:h.Active,customData:[{key:"actionItemId",value:e.getId()}],press:p});n.addStyleClass("sapUshellMeAreaActionItem");n.addEventDelegate({onkeydown:function(q){if(q.keyCode===32){p();}}});return n;}});});
sap.ui.predefine('sap/ushell/components/shell/MenuBar/Component',["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel"],function(U,J){"use strict";return U.extend("sap.ushell.components.shell.MenuBar.Component",{init:function(){U.prototype.init.apply(this,arguments);var m=new J();this.setModel(m,"menu");sap.ushell.Container.getServiceAsync("Menu").then(function(M){return M.getMenuEntries();}).then(function(M){m.setProperty("/",M);});}});});
sap.ui.predefine('sap/ushell/components/shell/MenuBar/controller/MenuBar.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/base/util/ObjectPath","sap/ushell/EventHub"],function(C,J,O,E){"use strict";return C.extend("sap.ushell.components.shell.MenuBar.controller.MenuBar",{onInit:function(){this.oContainerRouter=sap.ushell.Container.getRenderer().getRouter();this.oContainerRouter.getRoute("home").attachMatched(this._selectIndexAfterRouteChange,this);this.oContainerRouter.getRoute("openFLPPage").attachMatched(this._selectIndexAfterRouteChange,this);this.oEventHubListener=E.on("enableMenuBarNavigation").do(function(e){this.getView().getModel("viewConfiguration").setProperty("/enableMenuBarNavigation",e);}.bind(this));var v=new J({selectedKey:"None Existing Key",enableMenuBarNavigation:true});this.getView().setModel(v,"viewConfiguration");this.oURLParsingService=sap.ushell.Container.getServiceAsync("URLParsing");this._selectIndexAfterRouteChange();},onMenuItemSelection:function(e){var s=e.getParameter("key");var m=this.getView().getModel("menu");var d=m.getProperty("/").find(function(M){return M.uid===s;});if(d.type==="intent"){this._performCrossApplicationNavigation(d.target);}if(d.type==="url"){this._openURL(d.target);}},_performCrossApplicationNavigation:function(d){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(c){var p={};d.parameters.forEach(function(P){if(P.name&&P.value){p[P.name]=[P.value];}});c.toExternal({target:{semanticObject:d.semanticObject,action:d.action},params:p});});},_openURL:function(d){window.open(d.url,"_blank");},_selectIndexAfterRouteChange:function(){var v=this.getView().getModel("viewConfiguration");return this.oURLParsingService.then(function(u){var h=u.parseShellHash(window.hasher.getHash());if(h.action==="home"){v.setProperty("/selectedKey","");}else{var s=this._getMenuUID(O.get("params.spaceId.0",h),O.get("params.pageId.0",h));if(s){v.setProperty("/selectedKey",s);}else{v.setProperty("/selectedKey","None Existing Key");}}}.bind(this));},_getMenuUID:function(s,p){var m=this.getView().getModel("menu").getProperty("/");var M=m.find(function(o){var S=o.target.parameters.find(function(a){return a.name==="spaceId"&&a.value===s;});var P=o.target.parameters.find(function(a){return a.name==="pageId"&&a.value===p;});return S&&P;});return M&&M.uid;},onExit:function(){this.oEventHubListener.off();}});});
sap.ui.predefine('sap/ushell/components/shell/Notifications/Component',["sap/ushell/resources","sap/ui/core/UIComponent","sap/ushell/utils","sap/ushell/EventHub","sap/ui/Device","sap/m/Popover","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/IconPool","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/library"],function(r,U,u,E,D,P,L,q,I,A,m){"use strict";var a=m.PlacementType;
function g(){return sap.ui.getCore().byId("NotificationsCountButton");}
return U.extend("sap.ushell.components.shell.Notifications.Component",{metadata:{version:"1.74.0",library:"sap.ushell.components.shell.Notifications",dependencies:{libs:["sap.m"]}},createContent:function(){this._aTimeouts=[];this.oRenderer=sap.ushell.Container.getRenderer("fiori2");this.oNotificationsService=sap.ushell.Container.getService("Notifications");sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.Notifications","onNewNotifications",this._handleAlerts,this);if(this.oNotificationsService.isEnabled()===true){this.oRenderer.shellCtrl.getModel().setProperty("/enableNotifications",true);this.oNotificationsService.init();if(this.oRenderer.getShellConfig().enableNotificationsUI===true){this.oRenderer.shellCtrl.getModel().setProperty("/enableNotificationsUI",true);this.oNotificationsService.registerDependencyNotificationsUpdateCallback(this._updateCount.bind(this),true);}}var n=g();n.applySettings({icon:I.getIconURI("bell"),floatingNumber:"{/notificationsCount}",visible:"{/enableNotifications}",selected:false,enabled:true,tooltip:r.i18n.getText("NotificationToggleButtonExpanded")},true,true);n.addEventDelegate({onAfterRendering:function(){var c=this.getDisplayFloatingNumber();if(c>0){this.$().attr("aria-label",r.i18n.getText("NotificationToggleButtonCollapsed",c));}else{this.$().attr("aria-label",r.i18n.getText("NotificationToggleButtonCollapsedNoNotifications"));}}.bind(n)});if(this.oRenderer.oShellModel.getModel().getProperty("/enableNotificationsUI")===true){this.oRenderer.addHeaderEndItem(["NotificationsCountButton"],false,["home","app","minimal"],true);}E.on("showNotifications").do(this._toggleNotifications.bind(this));},_handleAlerts:function(c,e,n){(n||[]).forEach(this.handleNotification.bind(this));},handleNotification:function(n){var o=this.oRenderer.addRightFloatingContainerItem({press:function(){this.oPopover.close();if(window.hasher.getHash()!==n.NavigationTargetObject+"-"+n.NavigationTargetAction){u.toExternalWithParameters(n.NavigationTargetObject,n.NavigationTargetAction,n.NavigationTargetParams);}this.oNotificationsService.markRead(n.Id);},datetime:r.i18n.getText("notification_arrival_time_now"),title:n.SensitiveText?n.SensitiveText:n.Text,description:n.SubTitle,unread:n.IsRead,priority:"High",hideShowMoreButton:true},true,true);this.oRenderer.showRightFloatingContainer(true);var t=setTimeout(function(){this.oRenderer.removeRightFloatingContainerItem(o.getId(),true);}.bind(this),3500);this._aTimeouts.push(t);},_updateCount:function(){var M=this.oRenderer.oShellModel.getModel();this.oNotificationsService.getUnseenNotificationsCount().done(function(n){M.setProperty("/notificationsCount",parseInt(n,10));}).fail(function(d){L.error("Notifications - call to notificationsService.getCount failed: ",d);});},_getPopover:function(){if(!this.oPopover){var n=sap.ui.view("notificationsView",{viewName:"sap.ushell.components.shell.Notifications.Notifications",type:"XML",viewData:{}});n.addCustomData(new A({key:"role",value:"region",writeToDom:true}));n.addCustomData(new A({key:"aria-label",value:r.i18n.getText("NotificationToggleButtonExpanded"),writeToDom:true}));this.oPopover=new P("shellNotificationsPopover",{showHeader:false,placement:a.Bottom,showArrow:true,content:n,beforeClose:function(e){e.getSource().getContent()[0].invalidate();this._resetCount();}.bind(this)}).addStyleClass("sapUshellNotificationsPopup sapUiSizeCompact");}return this.oPopover;},_toggleNotifications:function(s){var p=this._getPopover();var S=g();if(!S.$().width()){S=sap.ui.getCore().byId("endItemsOverflowBtn");}if(p.isOpen()){p.close();}else if(s!==false){this._resetCount();p.setContentWidth(q("body").width()>=600?"31.1rem":undefined);p.openBy(S);}},_resetCount:function(){sap.ushell.Container.getRenderer("fiori2").oShellModel.getModel().setProperty("/notificationsCount",0);sap.ushell.Container.getService("Notifications").notificationsSeen();},exit:function(){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.services.Notifications","onNewNotifications",this._handleAlerts,this);if(this.oNotificationsService.isEnabled()===true){this.oNotificationsService.destroy();}this.oNotificationsService=null;this.oRenderer=null;if(this.oPopover){this.oPopover.destroy();this.oPopover=null;}this._aTimeouts.forEach(window.clearTimeout);}});});
sap.ui.predefine('sap/ushell/components/shell/Notifications/Notifications.controller',["sap/ui/Device","sap/ushell/utils","sap/ushell/resources","sap/m/Text","sap/m/VBox","sap/m/CustomListItem","sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","sap/base/Log","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/library","sap/ui/core/library"],function(D,u,r,T,V,C,q,K,L,J,M,m,c){"use strict";var P=c.Priority;var a=m.ListType;var F=m.FlexAlignItems;sap.ui.controller("sap.ushell.components.shell.Notifications.Notifications",{oPagingConfiguration:{MAX_NOTIFICATION_ITEMS_DESKTOP:400,MAX_NOTIFICATION_ITEMS_MOBILE:100,MIN_NOTIFICATION_ITEMS_PER_BUFFER:15,NOTIFICATION_ITEM_HEIGHT:(D.system.phone||D.system.tablet)?130:100,TAB_BAR_HEIGHT:100},onInit:function(){var i={};if(D.system.desktop){this.iMaxNotificationItemsForDevice=this.oPagingConfiguration.MAX_NOTIFICATION_ITEMS_DESKTOP;}else{this.iMaxNotificationItemsForDevice=this.oPagingConfiguration.MAX_NOTIFICATION_ITEMS_MOBILE;}this.oNotificationsService=sap.ushell.Container.getService("Notifications");this.oSortingType=this.oNotificationsService.getOperationEnum();i[this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING]=this.getInitialSortingModelStructure();i[this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING]=this.getInitialSortingModelStructure();i[this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING]=this.getInitialSortingModelStructure();i[this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING]={};this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;this.oPreviousByDateSorting=this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;this.oPreviousTabKey="sapUshellNotificationIconTabByDate";this.sCurrentExpandedType=undefined;var o=new J(i);o.setSizeLimit(1500);this.getView().setModel(o);this.getView().setModel(r.i18nModel,"i18n");this.getNextBuffer();this._oTopNotificationData=undefined;},onAfterRendering:function(){this.removeTabIndexFromList(this.sCurrentSorting);var t=this.getView().byId("notificationIconTabBar--header");if(t){t.getDomRef().classList.remove("sapContrastPlus");}if(this.sCurrentSorting!==this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){if(this._oTopNotificationData){this.scrollToItem(this._oTopNotificationData);}}this.getView().$("-sapUshellNotificationIconTabByDate-text").attr("aria-label",r.i18n.getText("notificationsSortByDateDescendingTooltip"));this.getView().$("-sapUshellNotificationIconTabByType-text").attr("aria-label",r.i18n.getText("notificationsSortByTypeTooltip"));this.getView().$("-sapUshellNotificationIconTabByPrio-text").attr("aria-label",r.i18n.getText("notificationsSortByPriorityTooltip"));},shouldFetchMoreNotifications:function(){var h=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/hasMoreItemsInBackend"),l=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/listMaxReached");return h&&!l;},getNextBuffer:function(){var s=this.sCurrentSorting,b=this.getItemsFromModel(s),n,p,N;if(!this.shouldFetchMoreNotifications()){return;}N=this.getNumberOfItemsToFetchOnScroll(s);if(N===0){this.getView().getModel().setProperty("/"+s+"/hasMoreItems",false);return;}if(b!==undefined){n=b.length;}if(n===0){this.addBusyIndicatorToTabFilter(s);}this.getView().getModel().setProperty("/"+s+"/inUpdate",true);p=this.oNotificationsService.getNotificationsBufferBySortingType(s,n,N);p.done(function(R){var d=this.oNotificationsService._getNotificationSettingsAvalability();if(d.state()==="pending"){this.oNotificationsService._userSettingInitialization();}this.addBufferToModel(s,R);}.bind(this));p.fail(function(){if(n===0){this.removeBusyIndicatorToTabFilter(s);this.handleError();}}.bind(this));},getNextBufferForType:function(){var s=this.sCurrentExpandedType,S=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,g=this.getGroupFromModel(s),b=g?g.aNotifications:undefined,n=0,p,h=g?g.hasMoreItems:true;if(!h){return;}if(b!==undefined){n=b.length;}this.getView().getModel().setProperty("/"+S+"/inUpdate",true);p=this.oNotificationsService.getNotificationsBufferInGroup(s,n,this.iMaxNotificationItemsForDevice);p.done(function(R){this.addTypeBufferToModel(s,R,false);}.bind(this));p.fail(function(){this.getNextBufferFailHandler(S);}.bind(this));},addBufferToModel:function(s,R){var b=this.getItemsFromModel(s),i=b.length,d,h=R.length>=this.getNumberOfItemsToFetchOnScroll(s);this._oTopNotificationData=undefined;if(!R){this.getView().getModel().setProperty("/"+s+"/hasMoreItemsInBackend",false);return;}this.getView().getModel().setProperty("/"+s+"/hasMoreItemsInBackend",h);d=b.concat(R);this.getView().getModel().setProperty("/"+s+"/aNotifications",d);this.getView().getModel().setProperty("/"+s+"/inUpdate",false);if(d.length>=this.iMaxNotificationItemsForDevice){this.handleMaxReached(s);}this.handleListCSSClass(s,!d.length);if(i===0){this.removeBusyIndicatorToTabFilter(s);}},addTypeBufferToModel:function(t,R,o){var g=this.getGroupFromModel(t),G=this.getGroupIndexFromModel(t),b=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING),d;if(!R){return;}if(R.length<this.getBasicBufferSize()){g.hasMoreItems=false;}if(!g.aNotifications||o){g.aNotifications=[];}d=g.aNotifications.concat(R);b[G].aNotifications=d;b[G].Busy=false;this.getView().getModel().setProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,b);this.getView().getModel().setProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING+"/inUpdate",false);},keydownHandler:function(k){var j,n,b;if(k.keyCode===K.DELETE){j=q(document.activeElement);if(j.hasClass("sapUshellNotificationsListItem")){n=j.next();b=j.find(".sapMNLB-CloseButton")[0];sap.ui.getCore().byId(b.id).firePress();if(n){n.focus();}}}},notificationsUpdateCallback:function(d){var t=this,s=this.sCurrentSorting,b,n,N;if(s===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){this.notificationsUpdateCallbackForType();d.resolve();return;}b=this.getItemsFromModel(s);if(b!==undefined){n=b.length;}this.cleanModel();N=this.getNumberOfItemsToFetchOnUpdate(n);this.oNotificationsService.getNotificationsBufferBySortingType(s,0,N).done(function(e){if(!e){return;}d.resolve();t.replaceItemsInModel(s,e,N);}).fail(function(e){L.error("Notifications control - call to notificationsService.getNotificationsBufferBySortingType failed: ",e,"sap.ushell.components.shell.Notifications.Notifications");});},isMoreCircleExist:function(s){var S=this.getNotificationList(s),i=S.getItems().length,l=S.getItems()[i-1];return!!i&&l.getMetadata().getName()==="sap.m.CustomListItem";},handleMaxReached:function(s){var S=this.getNotificationList(s),n=Math.floor(this.oNotificationsService.getNotificationsCount()),i=n-this.iMaxNotificationItemsForDevice,I=this.isMoreCircleExist(s);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/moreNotificationCount",i);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/listMaxReached",i>=0);if(i>0&&!I){S.addItem(this.getMoreCircle(this.sCurrentSorting));}else if(i<=0&&I){S.removeItem(this.oMoreListItem);}},reAddFailedGroup:function(g){var o=this.getView().getModel(),G=o.getProperty("/notificationsByTypeDescending");G.splice(g.removedGroupIndex,0,g.oGroup);o.setProperty("/notificationsByTypeDescending",G);},removeGroupFromModel:function(g){var o=this.getView().getModel(),G=o.getProperty("/notificationsByTypeDescending"),R={oGroup:g,removedGroupIndex:undefined};G.some(function(b,i){if(b.Id===g.Id){R.removedGroupIndex=i;G.splice(i,1);o.setProperty("/notificationsByTypeDescending",G);return true;}return false;});this.sCurrentExpandedType=undefined;return R;},updateGroupHeaders:function(){var p=this.oNotificationsService.getNotificationsGroupHeaders(),t=this,g=t.getView().getModel().getProperty("/"+t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);p.fail(function(d){L.error("Notifications control - call to notificationsService.updateGroupHeaders failed: ",d,"sap.ushell.components.shell.Notifications.Notifications");});p.done(function(n){var j=JSON.parse(n),b=j.value;b.forEach(function(i){var f=false;g.forEach(function(d,I){if(d.Id===i.Id){g[I].GroupHeaderText=i.GroupHeaderText;g[I].CreatedAt=i.CreatedAt;f=true;}});if(!f){g.unshift(i);}});t.getView().getModel().setProperty("/"+t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,g);});},reloadGroupHeaders:function(){var p=this.oNotificationsService.getNotificationsGroupHeaders(),t=this;p.fail(function(d){L.error("Notifications control - call to notificationsService.getNotificationsGroupHeaders failed: ",d,"sap.ushell.components.shell.Notifications.Notifications");t.removeBusyIndicatorToTabFilter(t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);});p.done(function(n){var j=JSON.parse(n),b=j.value,d=[];b.forEach(function(i){if(i.IsGroupHeader){i.Collapsed=true;d.push(i);}});t.getView().getModel().setProperty("/"+t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,d);t.removeBusyIndicatorToTabFilter(t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);});},markRead:function(n){var p=this.oNotificationsService.markRead(n),t=this;p.fail(function(){sap.ushell.Container.getService("Message").error(r.i18n.getText("notificationsFailedMarkRead"));t.setMarkReadOnModel(n,false);});this.setMarkReadOnModel(n,true);},onExit:function(){},onBeforeRendering:function(){this.oNotificationsService.registerDependencyNotificationsUpdateCallback(this.notificationsUpdateCallback.bind(this),false);},executeAction:function(n,A){return this.oNotificationsService.executeAction(n,A);},executeBulkAction:function(A,s,g,p){var t=g,o=this.oNotificationsService.executeBulkAction(g.Id,A),b,G=s,n=this.getView().getModel().getProperty(p+"/NotificationTypeDesc"),d=this;if(n===""){n=this.getView().getModel().getProperty(p+"/NotificationTypeKey");}o.fail(function(R){this.getView().getModel().setProperty(p+"/Busy",false);if(R&&R.succededNotifications&&R.succededNotifications.length){R.succededNotifications.forEach(function(N){this.removeNotificationFromModel(N);}.bind(this));d.cleanModel();}if(R.succededNotifications.length===1){b=r.i18n.getText("notificationsPartialSuccessExecuteBulkAction",[G,R.succededNotifications.length,R.failedNotifications.length+R.succededNotifications.length,n,R.failedNotifications.length]);M.show(b,{duration:4000});}else if(R.succededNotifications.length>1){b=r.i18n.getText("notificationsSingleSuccessExecuteBulkAction",[G,R.succededNotifications.length,R.failedNotifications.length+R.succededNotifications.length,n,R.failedNotifications.length]);M.show(b,{duration:4000});}else{b=r.i18n.getText("notificationsFailedExecuteBulkAction");sap.ushell.Container.getService("Message").error(b);}}.bind(this));o.done(function(){b=r.i18n.getText("notificationsSuccessExecuteBulkAction",[G,n]);M.show(b,{duration:4000});this.removeGroupFromModel(t);this.cleanModel();}.bind(this));},dismissNotification:function(n){var t=this,R=this.removeNotificationFromModel(n),p=this.oNotificationsService.dismissNotification(n);this.cleanModel();p.fail(function(){sap.ushell.Container.getService("Message").error(r.i18n.getText("notificationsFailedDismiss"));t.addNotificationToModel(R.obj,R.index);});},dismissBulkNotifications:function(g){var R=this.removeGroupFromModel(g),p=this.oNotificationsService.dismissBulkNotifications(g.Id);this.cleanModel();p.fail(function(){sap.ushell.Container.getService("Message").error(r.i18n.getText("notificationsFailedExecuteBulkAction"));this.reAddFailedGroup(R);}.bind(this));},onListItemPress:function(n,s,A,p){var v=sap.ui.getCore().byId("viewPortContainer");if(v){v.switchState("Center");}u.toExternalWithParameters(s,A,p);this.markRead(n);},scrollToItem:function(t){var j=this._getJqNotificationObjects(),b=j[0],d=j[1],e=j[2],f=j[3],i,n,g,h,k;if(b.length>0&&d.length>0&&e.length>0&&f.length>0){i=f.outerHeight(true)-window.parseInt(f.css("margin-top").replace("px",""));n=this.getIndexInModelByItemId(t.topItemId);n=n||0;g=n*i+window.parseInt(f.css("margin-top").replace("px",""));h=window.parseInt(d.css("padding-top").replace("px",""))+window.parseInt(e.css("padding-top").replace("px",""));k=b.offset().top;b.scrollTop(g+h+k-t.offSetTop);}this._oTopNotificationData=undefined;},_getJqNotificationObjects:function(){var j=q("#notificationIconTabBar-containerContent"),b=j.children(),d=b.children(),e=j.find("li").eq(0);return[j,b,d,e];},getTopOffSet:function(){var t=0,j=this._getJqNotificationObjects()[0];if(j.children().length>0&&j.children().children().length>0){t+=j.children().outerHeight()-j.children().height();t+=j.children().children().outerHeight()-j.children().children().height();}return t;},getTopItemOnTheScreen:function(){var j=this._getJqNotificationObjects()[0],t=0,i,b=0,d=this;t=this.getTopOffSet();j.find("li").each(function(){b=q(this).offset().top;if(b>=t){i=d.getItemNotificationId(this);return false;}});return{topItemId:i,offSetTop:b};},handleError:function(){try{sap.ushell.Container.getService("Message").error(r.i18n.getText("errorOccurredMsg"));}catch(e){L.error("Getting Message service failed.");}},addBusyIndicatorToTabFilter:function(s){var l=this.getNotificationList(s);l.setBusy(true);l.setShowNoData(false);},removeBusyIndicatorToTabFilter:function(s){var l=this.getNotificationList(s);l.setBusy(false);l.setShowNoData(true);},addNotificationToModel:function(n,i){var o=this.getView().getModel(),b=o.getProperty("/"+this.sCurrentSorting+"/aNotifications");b.splice(i,0,n);o.setProperty("/"+this.sCurrentSorting+"/aNotifications",b);},removeNotificationFromModel:function(n){var o=this.getView().getModel(),i,g,b,N,R={};if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING||this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING||this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){N="/"+this.sCurrentSorting+"/aNotifications";b=o.getProperty(N);b.some(function(d,i,e){if(d.Id&&d.Id===n){R.obj=e.splice(i,1)[0];R.index=i;return true;}});o.setProperty(N,b);return R;}g=o.getProperty("/notificationsByTypeDescending");for(i=0;i<g.length;i++){b=g[i].aNotifications;if(b){if(b.length===1&&b[0].Id===n){g.splice(i,1);}else{b.some(function(d,i,e){if(d.Id&&d.Id===n){R.obj=e.splice(i,1)[0];R.index=i;return true;}});g[i].aNotifications=b;}}}this.updateGroupHeaders();o.setProperty("/notificationsByTypeDescending",g);return R;},getIndexInModelByItemId:function(n){var N,i;if(this.notificationsByTypeDescending===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){N=this.getView().getModel().getProperty("/"+this.sCurrentExpandedType+"/aNotifications");}else{N=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/aNotifications");}if(N===undefined||N.length===0){return 0;}for(i=0;i<N.length;i++){if(N[i].Id===n){return i;}}},cleanModel:function(){var t=this,s=this.getView().getModel().getProperty("/");Object.keys(s).forEach(function(S){if(S!==t.sCurrentSorting&&S!==t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){s[S]=t.getInitialSortingModelStructure();}});this.getView().getModel().setProperty("/",s);},replaceItemsInModel:function(s,R,n){var b=this.getItemsFromModel(s),i=b.length,h=R.length>=n;if(i){this._oTopNotificationData=this.getTopItemOnTheScreen();}this.getView().getModel().setProperty("/"+s+"/hasMoreItemsInBackend",h);this.getView().getModel().setProperty("/"+s+"/aNotifications",R);this.getView().getModel().setProperty("/"+s+"/inUpdate",false);this.handleMaxReached(s);},setMarkReadOnModel:function(n,I){var o=this.getView().getModel(),p="/"+this.sCurrentSorting,N,d,g,i;d=o.getProperty(p);if(this.sCurrentSorting==="notificationsByTypeDescending"){for(i=0;i<d.length;i++){if(d[i].Id===this.sCurrentExpandedType){p=p+"/"+i;g=true;break;}}if(!g){return;}}p=p+"/aNotifications";N=o.getProperty(p);N.some(function(b){if(b.Id===n){b.IsRead=I;return true;}});o.setProperty(p,N);},onTabSelected:function(e){var k=e.getParameter("key");if(k==="sapUshellNotificationIconTabByDate"){var b;if(this.oPreviousTabKey==="sapUshellNotificationIconTabByDate"){b=this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING?this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING:this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;this._changeDateListBinding(b,e.getParameter("item"));this.oPreviousByDateSorting=b;}else{b=this.oPreviousByDateSorting;}this.sCurrentSorting=b;if(this.getItemsFromModel(b).length===0){this.getNextBuffer(b);}}else if(k==="sapUshellNotificationIconTabByType"&&this.oPreviousTabKey!=="sapUshellNotificationIconTabByType"){this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING;this.addBusyIndicatorToTabFilter(this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);this.reloadGroupHeaders();this.getView().byId("notificationIconTabBar").addStyleClass("sapUshellNotificationIconTabByTypeWithBusyIndicator");}else{this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING;if(this.getItemsFromModel(this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING).length===0){this.getNextBuffer(this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING);}}this.oPreviousTabKey=k;},_changeDateListBinding:function(s,t){if(s===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING){t.$("text").attr("aria-label",r.i18n.getText("notificationsSortByDateDescendingTooltip"));this.getView().byId("sapUshellNotificationsListDate").bindItems("/notificationsByDateDescending/aNotifications",sap.ui.xmlfragment("sap.ushell.components.shell.Notifications.NotificationsListItem",this));}else{t.$("text").attr("aria-label",r.i18n.getText("notificationsSortByDateAscendingTooltip"));this.getView().byId("sapUshellNotificationsListDate").bindItems("/notificationsByDateAscending/aNotifications",sap.ui.xmlfragment("sap.ushell.components.shell.Notifications.NotificationsListItem",this));}},onNotificationItemPress:function(e){var o=e.getSource().getBindingContextPath(),b=this.getView().getModel().getProperty(o),s=b.NavigationTargetObject,A=b.NavigationTargetAction,p=b.NavigationTargetParams,n=b.Id;this.onListItemPress(n,s,A,p);},onNotificationItemClose:function(e){this._retainFocus();var n=e.getSource().getBindingContextPath(),N=this.getView().getModel().getProperty(n),s=N.Id;this.dismissNotification(s);},onNotificationItemButtonPress:function(e){this._retainFocus();var n=e.getSource().getBindingContext().getPath(),o=this.getView().getModel(),N=o.getProperty(n),p=n.split("/"),t=this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,s=t?"/"+p[1]+"/"+p[2]+"/"+p[3]+"/"+p[4]:"/"+p[1]+"/"+p[2]+"/"+p[3],b=o.getProperty(s),d=b.Id;o.setProperty(s+"/Busy",true);this.executeAction(d,N.ActionId).done(function(f){if(f&&f.isSucessfull){sap.ui.require(["sap/m/MessageToast"],function(M){if(f.message&&f.message.length){M.show(f.message,{duration:4000});}else{var A=N.ActionText;M.show(r.i18n.getText("ActionAppliedToNotification",A),{duration:4000});}});if(f.DeleteOnReturn!==false){this.removeNotificationFromModel(d);sap.ushell.Container.getService("Notifications")._addDismissNotifications(d);this.cleanModel();}}else if(f){sap.ushell.Container.getService("Message").error(f.message);}else{sap.ushell.Container.getService("Message").error(r.i18n.getText("notificationsFailedExecuteAction"));}o.setProperty(s+"/Busy",false);}.bind(this)).fail(function(){o.setProperty(s+"/Busy",false);sap.ushell.Container.getService("Message").error(r.i18n.getText("notificationsFailedExecuteAction"));});},onNotificationGroupItemClose:function(e){var n=e.getSource().getBindingContext().getPath(),p=n.split("/"),s="/"+p[1]+"/"+p[2],N=this.getView().getModel().getProperty(s);this.dismissBulkNotifications(N);},onNotificationGroupItemCollapse:function(e){var g=e.getSource(),p=g.getBindingContext().getPath();if(!g.getCollapsed()){this.getView().getModel().setProperty(p+"/Busy",true);this.expandedGroupIndex=p.substring(p.lastIndexOf("/")+1);this.onExpandGroup(g);}},onNotificationGroupItemButtonPress:function(e){var o=this.getView().getModel(),n=e.getSource().getBindingContext().getPath(),N=o.getProperty(n),p=n.split("/"),s="/"+p[1]+"/"+p[2],b=o.getProperty(s);this._retainFocus();o.setProperty(s+"/Busy",true);this.executeBulkAction(N.ActionId,e.getSource().getProperty("text"),b,s);},onListUpdateStarted:function(e){if(e.getParameter("reason")==="Growing"){if(!this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/inUpdate")){this.getNextBuffer();}}},getNumberOfItemsInScreen:function(){var i,h=this.getWindowSize();i=(h-this.oPagingConfiguration.TAB_BAR_HEIGHT)/this.oPagingConfiguration.NOTIFICATION_ITEM_HEIGHT;return Math.ceil(i);},getBasicBufferSize:function(){return Math.max(this.getNumberOfItemsInScreen()*3,this.oPagingConfiguration.MIN_NOTIFICATION_ITEMS_PER_BUFFER);},getWindowSize:function(){return q(window).height();},getNumberOfItemsToFetchOnScroll:function(s){var i=this.getItemsFromModel(s).length,b=this.getBasicBufferSize();if(i>=this.iMaxNotificationItemsForDevice){return 0;}if(i+b>this.iMaxNotificationItemsForDevice){return this.iMaxNotificationItemsForDevice-i;}return b;},getNumberOfItemsToFetchOnUpdate:function(n){var b=this.getBasicBufferSize(),N=Math.ceil(n/b),R;R=N>0?N*b:b;return R>this.iMaxNotificationItemsForDevice?this.iMaxNotificationItemsForDevice:R;},getItemsFromModel:function(s){if(s===undefined){s=this.sCurrentSorting;}return this.getView().getModel().getProperty("/"+s+"/aNotifications");},getItemsOfTypeFromModel:function(t){var g=this.getGroupFromModel(t);if(g){return g.aNotifications?g.aNotifications:[];}return[];},getGroupFromModel:function(t){var g=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);return g.find(function(b){return b.Id===t;});},getGroupIndexFromModel:function(t){var g=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING),i;g.forEach(function(b,d){if(b.Id===t){i=d;return true;}});return i;},getItemNotificationId:function(e){var i,I;i=sap.ui.getCore().byId(e.getAttribute("Id")).getBindingContext().sPath;I=this.getView().getModel().getProperty(i+"/Id");return I;},getInitialSortingModelStructure:function(){return{hasMoreItemsInBackend:true,listMaxReached:false,aNotifications:[],inUpdate:false,moreNotificationCount:""};},onExpandGroup:function(g){var l=this.getView().byId("sapUshellNotificationsListType").getItems(),b=g.getId(),G=this.getView().getModel().getProperty(g.getBindingContextPath()),t=this;t.sCurrentExpandedType=G.Id;t.getView().getModel().setProperty(g.getBindingContextPath()+"/aNotifications",[]);t.getView().getModel().setProperty(g.getBindingContextPath()+"/hasMoreItems",true);l.forEach(function(i,d){if(i.getId()===b){t.getNextBufferForType();}else if(i.getId()!==b&&!i.getCollapsed()){i.setCollapsed(true);t.getView().getModel().setProperty(i.getBindingContextPath()+"/hasMoreItems",true);}});},notificationsUpdateCallbackForType:function(){var s=this.sCurrentExpandedType,S=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,g=this.getGroupFromModel(s),b=g?g.aNotifications:undefined,n=0,p;if(b!==undefined){n=b.length;}this.getView().getModel().setProperty("/"+S+"/inUpdate",true);this.updateGroupHeaders();if(s){p=this.oNotificationsService.getNotificationsBufferInGroup(s,0,this.getNumberOfItemsToFetchOnUpdate(n));p.done(function(R){this.addTypeBufferToModel(s,R,true);}.bind(this));p.fail(function(R){this.getNextBufferFailHandler(R);}.bind(this));}},getNotificationList:function(s){var l;if(s===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING||s===this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING){l=this.getView().byId("sapUshellNotificationsListDate");}else if(s===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){l=this.getView().byId("sapUshellNotificationsListPriority");}else{l=this.getView().byId("sapUshellNotificationsListType");}return l;},removeTabIndexFromList:function(s){var l=this.getNotificationList(s);var o=l.$().children().get(1);if(o){o.removeAttribute("tabindex");}},handleListCSSClass:function(s,i){this.getNotificationList(s).toggleStyleClass("sapContrast",i);},getMoreCircle:function(t){var o=new T({text:r.i18n.getText("moreNotifications")}),n=new T({text:""}).addStyleClass("sapUshellNotificationsMoreCircleCount"),b=new V({items:[n,o],alignItems:F.Center}).addStyleClass("sapUshellNotificationsMoreCircle"),B=new T({text:r.i18n.getText("moreNotificationsAvailable_message"),textAlign:"Center"}).addStyleClass("sapUshellNotificationsMoreHelpingText"),d=new T({text:r.i18n.getText("processNotifications_message"),textAlign:"Center"}).addStyleClass("sapUshellNotificationsMoreHelpingText"),v=new V({items:[b,B,d]}).addStyleClass("sapUshellNotificationsMoreVBox"),l=new C({type:a.Inactive,content:v}).addStyleClass("sapUshellNotificationsMoreListItem");n.setModel(this.getView().getModel());n.bindText("/"+t+"/moreNotificationCount");this.oMoreListItem=l;return l;},_retainFocus:function(){var i=this.getView().byId("notificationIconTabBar"),k=i.getSelectedKey(),I=i.getItems(),s=0;I.forEach(function(o,b){if(o.getKey()===k){s=b;}});I[s].focus();},priorityFormatter:function(p){if(p){p=p.charAt(0)+p.substr(1).toLowerCase();return P[p];}}});});
sap.ui.predefine('sap/ushell/components/shell/Notifications/Settings.controller',["sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel"],function(q,J){"use strict";sap.ui.controller("sap.ushell.components.shell.Notifications.Settings",{onInit:function(){var t=this,s=sap.ushell.Container.getService("Notifications").readSettings(),m=new J(),v,n,r,d;m.setProperty("/aDitryRowsIndicator",[]);m.setProperty("/rows",[]);m.setProperty("/originalRows",[]);s.done(function(R){r=JSON.parse(R);m.setProperty("/rows",r.value);d=JSON.parse(JSON.stringify(r.value));m.setProperty("/originalRows",d);});s.fail(function(){n=t.getView().getNoDataUI();t.getView().removeAllContent();t.getView().addContent(n);});this._handleSwitchFlagsDataInitialization(m);v=this.getView();v.setModel(m);},onExit:function(){},onBeforeRendering:function(){},onAfterRendering:function(){var o=this.getView().getModel().getProperty("/flags"),r=this.getView().getModel().getProperty("/rows"),d;if(r!==undefined){d=JSON.parse(JSON.stringify(r));this.getView().getModel().setProperty("/originalRows",d);}this.getView().getModel().setProperty("/originalFlags/highPriorityBannerEnabled",o.highPriorityBannerEnabled);this.getView().getModel().setProperty("/aDitryRowsIndicator",[]);},getContent:function(){var d=new q.Deferred();d.resolve(this.getView());return d.promise();},getValue:function(){var d=new q.Deferred();d.resolve(" ");return d.promise();},onCancel:function(){var o=this.getView().getModel().getProperty("/originalFlags"),O=this.getView().getModel().getProperty("/originalRows"),d=JSON.parse(JSON.stringify(O));this.getView().getModel().setProperty("/flags/highPriorityBannerEnabled",o.highPriorityBannerEnabled);this.getView().getModel().setProperty("/rows",d);this.getView().getModel().setProperty("/originalFlags",{});this.getView().getModel().setProperty("/originalRows",[]);this.getView().getModel().setProperty("/aDitryRowsIndicator",[]);},onSave:function(){var d=new q.Deferred(),r=this.getView().getModel().getProperty("/rows"),o=this.getView().getModel().getProperty("/originalRows"),t,T,i,D=this.getView().getModel().getProperty("/aDitryRowsIndicator");d.resolve();this._handleSwitchFlagsSave();for(i=0;i<r.length;i++){if(D[i]&&D[i]===true){t=r[i];T=o[i];if(!this._identicalRows(t,T)){sap.ushell.Container.getService("Notifications").saveSettingsEntry(t);}}}this.getView().getModel().setProperty("/aDitryRowsIndicator",[]);return d.promise();},setControlDirtyFlag:function(){var c=this.getBindingContext().sPath,i=c.substring(c.lastIndexOf("/")+1,c.length),o=this.getModel().getProperty("/aDitryRowsIndicator");if(o!==undefined){this.getModel().setProperty("/aDitryRowsIndicator/"+i,true);}},_handleSwitchFlagsDataInitialization:function(m){var s=sap.ushell.Container.getService("Notifications").getUserSettingsFlags(),M=sap.ushell.Container.getService("Notifications")._getNotificationSettingsMobileSupport(),e=sap.ushell.Container.getService("Notifications")._getNotificationSettingsEmailSupport();s.done(function(S){m.setProperty("/flags",{});m.setProperty("/flags/highPriorityBannerEnabled",S.highPriorityBannerEnabled);m.setProperty("/flags/mobileNotificationsEnabled",M);m.setProperty("/flags/emailNotificationsEnabled",e);m.setProperty("/originalFlags",{});m.setProperty("/originalFlags/highPriorityBannerEnabled",S.highPriorityBannerEnabled);});},_handleSwitchFlagsSave:function(){var h=this.getView().getModel().getProperty("/flags/highPriorityBannerEnabled"),o=this.getView().getModel().getProperty("/originalFlags/highPriorityBannerEnabled");if(o!==h){sap.ushell.Container.getService("Notifications").setUserSettingsFlags({highPriorityBannerEnabled:h});this.getView().getModel().setProperty("/originalFlags/highPriorityBannerEnabled",h);}},_identicalRows:function(r,a){if((r.NotificationTypeId===a.NotificationTypeId)&&(r.PriorityDefault===a.PriorityDefault)&&(r.DoNotDeliver===a.DoNotDeliver)&&(r.DoNotDeliverMob===a.DoNotDeliverMob)&&(r.DoNotDeliverEmail===a.DoNotDeliverEmail)){return true;}return false;}});});
sap.ui.predefine('sap/ushell/components/shell/Notifications/Settings.view',["sap/m/Table","sap/m/Column","sap/m/CheckBox","sap/m/Switch","sap/m/Text","sap/m/Label","sap/m/VBox","sap/m/HBox","sap/m/FlexBox","sap/ui/core/Icon","sap/m/ColumnListItem","sap/ui/model/Sorter","sap/ui/core/library","sap/m/library","sap/ushell/resources"],function(T,C,a,S,b,L,V,H,F,I,c,d,l,m,r){"use strict";var e=m.ListSeparators;var B=m.BackgroundDesign;var f=l.TextAlign;sap.ui.jsview("sap.ushell.components.shell.Notifications.Settings",{createContent:function(){var t=this,n,o,s,v,h,R=r.i18n;n=new T("notificationSettingsTable",{backgroundDesign:B.Transparent,showSeparators:e.All,fixedLayout:false,columns:[new C({header:new b({text:R.getText("notificationType_column"),tooltip:R.getText("notificationType_columnTooltip")}),vAlign:"Middle",hAlign:"Left"}),new C({header:new b({text:R.getText("iOSNotification_column"),tooltip:R.getText("iOSNotification_columnTooltip")}),visible:"{/flags/mobileNotificationsEnabled}",minScreenWidth:"Tablet",demandPopin:true,vAlign:"Middle",hAlign:"Left"}),new C({header:new b({text:R.getText("eMailFld"),tooltip:R.getText("email_columnTooltip")}),visible:"{/flags/emailNotificationsEnabled}",minScreenWidth:"Tablet",demandPopin:true,vAlign:"Middle",hAlign:"Left"}),new C({header:new b({text:R.getText("highNotificationsBanner_column"),tooltip:R.getText("highNotificationsBanner_columnTooltip")}),minScreenWidth:"Tablet",demandPopin:true,hAlign:"Left"}),new C({header:new b({text:R.getText("Notifications_Settings_Show_Type_column"),tooltip:R.getText("notificationTypeEnable_columnTooltip")}),vAlign:"Middle",hAlign:"Left"})]});o=new c({cells:[new L({text:"{NotificationTypeDesc}"}),new a({selected:{parts:["DoNotDeliverMob"],formatter:function(D){return!D;}},select:function(E){t.getController().setControlDirtyFlag.apply(this);var p=E.getSource().getBindingContext().sPath;t.getModel().setProperty(p+"/DoNotDeliverMob",!E.mParameters.selected);}}),new a({visible:{parts:["IsEmailEnabled","IsEmailIdMaintained","DoNotDeliver"],formatter:function(E,g,D){return E&&g&&!D;}},selected:{path:"DoNotDeliverEmail",formatter:function(D){return!D;}},select:function(E){t.getController().setControlDirtyFlag.apply(this);var p=E.getSource().getBindingContext().sPath;t.getModel().setProperty(p+"/DoNotDeliverEmail",!E.mParameters.selected);}}),new a({select:function(E){t.getController().setControlDirtyFlag.apply(this);var p=E.getSource().getBindingContext().sPath;if(E.mParameters.selected===true){t.getModel().setProperty(p+"/PriorityDefault","40-HIGH");}else{t.getModel().setProperty(p+"/PriorityDefault","");}},selected:{parts:["PriorityDefault"],formatter:function(p){t.getController().setControlDirtyFlag.apply(this);if(p==="40-HIGH"){return true;}return false;}}}),new S({state:{parts:["DoNotDeliver"],formatter:function(D){return!D;}},customTextOn:" ",customTextOff:" ",change:function(E){var N=E.getParameter("state"),p=E.getSource().getBindingContext().sPath;t.getModel().setProperty(p+"/DoNotDeliver",!N);t.getController().setControlDirtyFlag.apply(this);}})]});n.bindAggregation("items",{path:"/rows",template:o,sorter:new d("NotificationTypeDesc")});v=new V();s=this.createSwitchControlBar();h=new V();h.addStyleClass("sapContrastPlus");h.addItem(s);v.addItem(h);v.addItem(n);return[v];},createSwitchControlBar:function(){var D,o,g,s,R=r.i18n;s=new F("notificationSettingsSwitchBar");o=new L("doNotDisturbLabel",{text:R.getText("Show_High_Priority_Alerts_title")});D=new S("doNotDisturbSwitch",{tooltip:R.getText("showAlertsForHighNotifications_tooltip"),state:"{/flags/highPriorityBannerEnabled}",customTextOn:R.getText("Yes"),customTextOff:R.getText("No")}).addAriaLabelledBy(o);g=new H("notificationDoNotDisturbHBox",{items:[D,o]});s.addItem(g);return s;},getNoDataUI:function(){var n,N,o,g,R=r.i18n;if(n===undefined){N=new I("notificationSettingsNoDataIcon",{size:"5rem",src:"sap-icon://message-information"});o=new b("notificationSettingsNoDataTextHeader",{text:R.getText("noNotificationTypesEnabledHeader_message")}).setTextAlign(f.Center);g=new b("notificationSettingsNoDataText",{text:R.getText("noNotificationTypesEnabled_message")}).setTextAlign(f.Center);n=new V("notificationSettingsNoDataInnerBox",{items:[N,o,g]});}return n;},getControllerName:function(){return"sap.ushell.components.shell.Notifications.Settings";}});});
sap.ui.predefine('sap/ushell/components/shell/ProductSwitch/Component',["sap/base/Log","sap/ui/Device","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(L,D,U,J,C,E,r){"use strict";
function g(){return sap.ui.getCore().byId("productSwitchBtn");}
function a(){return sap.ui.getCore().byId("sapUshellProductSwitchPopover");}
function b(){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem("productSwitchBtn");}
return U.extend("sap.ushell.components.shell.ProductSwitch.Component",{metadata:{version:"1.74.0",library:"sap.ushell.components.shell.ProductSwitch",dependencies:{libs:["sap.m","sap.f"]}},createContent:function(){this.oModel=this._getModel();this.aDoables=[];},_getModel:function(){var t=this,m=new J();m.loadData(C.last("/core/productSwitch/url")).then(function(){var p=m.getData();if(p.length===0){L.debug("There are no other profucts configured for your user. ProductSwitch button will be hidden.");b();}else{g().setVisible(true);t.aDoables.push(E.on("showProductSwitch").do(t._openProductSwitch.bind(t)));}}).catch(function(e){L.debug(e);b();});return m;},_openProductSwitch:function(){var p=a();if(!p){p=sap.ui.xmlfragment("sap.ushell.components.shell.ProductSwitch.ProductSwitch",this);p.setModel(this.oModel);p.setModel(r.i18nModel,"i18n");if(D.system.phone){p.setShowHeader(true);}}var s=g();if(!s||!s.$().width()){s=sap.ui.getCore().byId("endItemsOverflowBtn");}p.openBy(s);},onProductItemPress:function(e){var t=e.getParameter("itemPressed").getTargetSrc();a().close();window.open(t,"_blank");},exit:function(){var p=a();if(!p){p.destroy();}this.aDoables.forEach(function(d){d.off();});}});});
sap.ui.predefine('sap/ushell/components/shell/Search/Component',["sap/ushell/resources","sap/ui/core/UIComponent","sap/ui/core/IconPool","sap/ui/core/routing/HashChanger"],function(r,U,I,H){"use strict";return U.extend("sap.ushell.components.shell.Search.Component",{metadata:{version:"1.53.0-SNAPSHOT",library:"sap.ushell.components.shell.search",dependencies:{libs:["sap.m","sap.ui.layout"]}},createContent:function(){var s=sap.ushell.Container.getRenderer("fiori2").getShellController(),S=s.getView(),o=(S.getViewData()?S.getViewData().config:{})||{};var t=this;var b=(o.enableSearch!==false);if(b){var _=function(i){if(!t._searchShellHelperDeferred){t._searchShellHelperDeferred=jQuery.Deferred();sap.ui.require(["sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader","sap/ushell/renderers/fiori2/search/SearchShellHelper"],function(d,e){if(i){e.init();}t._searchShellHelperDeferred.resolve(e);});}return t._searchShellHelperDeferred;};var a={id:"sf",tooltip:"{i18n>searchbox_tooltip}",text:"{i18n>searchBtn}",ariaLabel:"{i18n>searchbox_tooltip}",icon:I.getIconURI("search"),visible:true,showSeparator:false,press:function(e){_(false).done(function(d){d.onShellSearchButtonPressed(e);});}};var c=sap.ushell.Container.getRenderer("fiori2").addHeaderEndItem("sap.ushell.ui.shell.ShellHeadItem",a,true,false);c.setModel(r.i18nModel,"i18n");if(o.openSearchAsDefault){_(true).done(function(d){d.setDefaultOpen(true);});}t.oHashChanger=H.getInstance();t.oHashChanger.attachEvent("shellHashChanged",function(d){var h=d.mParameters;setTimeout(function(){sap.ui.require(["sap/ushell/renderers/fiori2/search/HashChangeHandler"],function(e){e.handle(h);});},6000);});c.addEventDelegate({onsapskipforward:function(e){e.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onsapskipback:function(e){e.preventDefault();jQuery("#sapUshellHeaderAccessibilityHelper").focus();},onAfterRendering:function(){jQuery("#sf").attr("aria-pressed",false);}});}sap.ui.getCore().getEventBus().publish("shell","searchCompLoaded",{delay:0});},exit:function(){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem("sf");var s=sap.ui.getCore().byId("sf");if(s){s.destroy();}}});});
sap.ui.predefine('sap/ushell/components/shell/UserImage/Component',["sap/ushell/resources","sap/ui/core/UIComponent","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/m/Link","sap/ui/layout/VerticalLayout","sap/m/FlexBox","sap/ui/core/IconPool","sap/ui/Device","sap/base/Log","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery"],function(r,U,D,B,T,L,V,F,I,a,l,i,q){"use strict";var s;return U.extend("sap.ushell.components.shell.UserImage.Component",{metadata:{version:"1.74.0",library:"sap.ushell.components.shell.UserImage",dependencies:{libs:["sap.m","sap.ui.layout"]}},createContent:function(){var S;s=sap.ushell.Container.getRenderer("fiori2")._oShellView;S=(s.getViewData()?s.getViewData().config:{})||{};this.loadUserImage();var u=sap.ushell.Container.getUser();if(S.enableUserImgConsent===true&&u.getImageConsent()===undefined){this._showUserConsentPopup();}},_showUserConsentPopup:function(){var t=this;var b=sap.ui.getCore().getConfiguration().getRTL()?"Right":"Left";var d,f,c,e;var y=new B("yesButton",{text:r.i18n.getText("DisplayImg"),type:"Emphasized",press:function(){t.updateUserImage(true);d.close();}});var n=new B("noButton",{text:r.i18n.getText("DontDisplayImg"),press:function(){t.updateUserImage(false);d.close();}});d=new D("userConsentDialog",{title:r.i18n.getText("userImageConsentDialogTitle"),modal:true,stretch:a.system.phone,buttons:[y,n],afterClose:function(){d.destroy();}}).addStyleClass("sapUshellUserConsentDialog");var u=new T({text:r.i18n.getText("userImageConsentDialogTermsOfUse")}).addStyleClass("sapUshellUserConsentDialogTerms");var g=new T({text:r.i18n.getText("userImageConsentText"),textAlign:b}).addStyleClass("sapUshellUserConsentDialogText");var h=new L({text:r.i18n.getText("userImageConsentDialogShowTermsOfUse"),textAlign:b,press:function(){var k=e.getVisible();if(k){e.setVisible(false);h.setText(r.i18n.getText("userImageConsentDialogShowTermsOfUse"));}else{h.setText(r.i18n.getText("userImageConsentDialogHideTermsOfUse"));e.setVisible(true);}}}).addAriaLabelledBy(g);f=new F({alignItems:"Center",direction:"Row",items:[g]}).addStyleClass("sapUshellUserConsentDialogBox");c=new F({alignItems:"Center",direction:"Row",items:[h]}).addStyleClass("sapUshellUserConsentDialogBox").addStyleClass("sapUshellUserConsentDialogLink");e=new F({alignItems:"Center",direction:"Row",items:[u]}).addStyleClass("ushellUserImgConsentTermsOfUseFlexBox");e.setVisible(false);var j=new V("userConsentDialogLayout",{content:[f,c,e]});d.addContent(j);d.open();},loadUserImage:function(){var u=sap.ushell.Container.getUser(),b=u.getImage();if(b){this._setUserImage(b);}u.attachOnSetImage(this._setUserImage.bind(this));},_setUserImage:function(p){var u=typeof p==="string"?p:p.mParameters,b=true;if(u&&typeof u==="string"){b=false;}else if(!i(u)){b=false;}var c=I.getIconURI("person-placeholder"),d=I.getIconURI("account");var h={"Cache-Control":"no-cache, no-store, must-revalidate","Pragma":"no-cache","Expires":"0"};if(!b){q.ajax({url:u,headers:h,success:function(){s.getModel().setProperty("/userImage/personPlaceHolder",u);s.getModel().setProperty("/userImage/account",u);},error:function(){l.error("Could not load user image from: "+u,"","sap.ushell.renderers.fiori2.Shell.view");var o=sap.ushell.Container.getUser();o.setImage("");}});}else{s.getModel().setProperty("/userImage/personPlaceHolder",c);s.getModel().setProperty("/userImage/account",d);}},updateUserImage:function(b){var u=sap.ushell.Container.getUser(),d=new q.Deferred(),o;this.userInfoService=sap.ushell.Container.getService("UserInfo");if(b!==undefined){u.setImageConsent(b);o=this.userInfoService.updateUserPreferences(u);o.done(function(){u.resetChangedProperty("isImageConsent");d.resolve();});}else{d.reject(b+"is undefined");}},exit:function(){}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/Component',["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/components/shell/UserSettings/UserPreferences","sap/ushell/components/shell/UserSettings/UserSettings.controller"],function(U,J,C,a){"use strict";var d=[];return U.extend("sap.ushell.components.shell.UserSettings.Component",{metadata:{rootView:{"viewName":"sap.ushell.components.shell.UserSettings.UserSettings","type":"XML","async":false,"id":"View"},version:"1.74.0",library:"sap.ushell.components.shell.UserSettings",dependencies:{libs:["sap.m"]}},createId:function(i){return"sapFlpUserSettings-"+i;},init:function(){U.prototype.init.apply(this,arguments);var m=new J({entries:C.last("/core/shell/model/userPreferences/entries"),profiling:C.last("/core/shell/model/userPreferences/profiling")});var s=sap.ui.getCore().byId("shell").getModel();var v=this.getRootControl();v.setModel(m,"entries");v.setModel(s);d.push(C.on("/core/shell/model/userPreferences/entries").do(function(r){v.getModel("entries").setProperty("/entries",r);}));d.push(C.on("/core/shell/model/userPreferences/profiling").do(function(r){v.getModel("entries").setProperty("/profiling",r);}));sap.ui.getCore().byId("shell").addDependent(v);this._getSearchPrefs();a.setModel();},_getSearchPrefs:function(){function i(){try{return C.last("/core/shellHeader/headEndItems").indexOf("sf")!==-1;}catch(e){jQuery.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: search button is not visible.");return false;}}if(i()){sap.ui.require(["sap/ushell/renderers/fiori2/search/userpref/SearchPrefs","sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader"],function(S){var s=S.getEntry(),r=sap.ushell.Container.getRenderer("fiori2");s.isSearchPrefsActive().done(function(b){if(b&&r){r.addUserProfilingEntry(s);}});});}},exit:function(){for(var i=0;i<d.length;i++){d.off();}}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/DefaultParameters.controller',["sap/ui/comp/smartform/SmartForm","sap/ui/model/odata/ODataModel","sap/ui/comp/smartfield/SmartField","sap/ui/comp/valuehelpdialog/ValueHelpDialog","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ui/comp/smartform/GroupElement","sap/ui/comp/smartform/Group","sap/ui/layout/GridData","sap/m/Button","sap/ushell/resources","sap/m/library","sap/ui/comp/smartfield/SmartLabel","sap/m/Input","sap/m/FlexItemData","sap/m/FlexBox","sap/ui/comp/library","sap/m/Token"],function(S,O,a,V,q,L,D,J,G,b,c,B,r,m,d,I,F,e,f,T){"use strict";var g=f.valuehelpdialog.ValueHelpRangeOperation;var h=m.ButtonType;sap.ui.controller("sap.ushell.components.shell.UserSettings.DefaultParameters",{onInit:function(){this.oModelRecords={};this.oChangedParameters={};this.oBlockedParameters={};this.aDisplayedUserDefaults=[];this.DefaultParametersService=sap.ushell.Container.getService("UserDefaultParameters");},applyFocus:function(){var t=this;setTimeout(function(){if(!D.phone){var i=t.getView().$().firstFocusableDomRef();if(i){i.focus();}}},1);},overrideOdataModelValue:function(E){var u=E.getParameter("url"),M=E.getSource(),s,i,t=this;this.aDisplayedUserDefaults.forEach(function(R){if(R.editorMetadata&&R.editorMetadata.editorInfo){i=R.editorMetadata.editorInfo.odataURL+R.editorMetadata.editorInfo.bindingPath;if(i===u){s=R.editorMetadata.editorInfo.bindingPath+"/"+R.editorMetadata.editorInfo.propertyName;if(M.getProperty(s)!==R.valueObject.value){M.setProperty(s,R.valueObject.value);}t.oBlockedParameters[R.parameterName]=false;}}});},getOrCreateModelForODataService:function(u){if(!this.oModelRecords[u]){var p={metadataUrlParams:{"sap-documentation":"heading,quickinfo","sap-value-list":"none"},json:true};var M=new O(u,p);M.setDefaultCountMode("None");M.setDefaultBindingMode("TwoWay");M.attachRequestCompleted(this.overrideOdataModelValue.bind(this));this.oModelRecords[u]=M;}return this.oModelRecords[u];},constructControlSet:function(p){var u=[];for(var P in p){for(var n=0;n<u.length;n++){if(u[n].parameterName===P){u.splice(n,1);}}p[P].parameterName=P;u.push(p[P]);}this.sortParametersByGroupIdParameterIndex(u);this.aDisplayedUserDefaults=u;this.sForm=new S({editable:true}).addStyleClass("sapUshellShellDefaultValuesForm");this.getView().addContent(this.sForm);},getValue:function(){var i=q.Deferred();var H=sap.ushell.Container.getService("UserDefaultParameters").hasRelevantMaintainableParameters();H.done(function(j){i.resolve({value:j?1:0,displayText:" "});});H.fail(function(E){i.reject(E);});return i.promise();},createPlainModel:function(i,R){R.modelBind.model=this.oMdlParameter;R.modelBind.extendedModel=this.oMdlParameter;i.setModel(R.modelBind.model);var M="/sUserDef_"+R.nr+"_";R.modelBind.sFullPropertyPath=M;R.modelBind.sPropertyName="{"+M+"}";R.modelBind.model.setProperty(R.modelBind.sFullPropertyPath,R.valueObject.value);},revertToPlainModelControls:function(i,R){L.error("Metadata loading for parameter "+R.parameterName+" failed"+JSON.stringify(R.editorMetadata));R.modelBind.isOdata=false;this.createPlainModel(i,R);this.createAppropriateControl(i,R);},getContent:function(){var t=this;var j=new q.Deferred();this.DefaultParametersService.editorGetParameters().done(function(p){t.oMdlParameter=new J(p);t.oMdlParameter.setDefaultBindingMode("TwoWay");t.getView().setModel(t.oMdlParameter,"MdlParameter");t.oOriginalParameters=q.extend(true,{},p);t.oCurrentParameters=q.extend(true,{},p);t.constructControlSet(p);var l="nevermore";var k;t.aChangedParameters=[];t.oBindingContexts={};t.setPropValue=function(R){R.modelBind.model.setProperty(R.modelBind.sFullPropertyPath,R.valueObject.value);t.oBlockedParameters[R.parameterName]=false;};t.oMdlParameter.setProperty("/sUser");for(var i=0;i<t.aDisplayedUserDefaults.length;++i){var R=t.aDisplayedUserDefaults[i];R.nr=i;R.editorMetadata=R.editorMetadata||{};R.valueObject=R.valueObject||{value:""};var n=new G({});if(l!==R.editorMetadata.groupId){var o=R.editorMetadata.groupTitle||undefined;k=new b({label:o,"editable":true,layoutData:new c({linebreak:false})});l=R.editorMetadata.groupId;t.sForm.addGroup(k);}k.addGroupElement(n);R.modelBind={model:undefined,sModelPath:undefined,sPropertyName:undefined,sFullPropertyPath:undefined};R.valueObject.value=R.valueObject.value||"";if(R.editorMetadata.editorInfo&&R.editorMetadata.editorInfo.propertyName){R.modelBind.isOdata=true;var u=R.editorMetadata.editorInfo.odataURL;R.modelBind.model=t.getOrCreateModelForODataService(u);n.setModel(R.modelBind.model);if(!t.oBindingContexts[u]){n.bindElement(R.editorMetadata.editorInfo.bindingPath);t.oBindingContexts[u]=R.modelBind.model.getContext(R.editorMetadata.editorInfo.bindingPath);}else{n.setBindingContext(t.oBindingContexts[u]);}R.modelBind.sPropertyName="{"+R.editorMetadata.editorInfo.propertyName+"}";R.modelBind.sFullPropertyPath=R.editorMetadata.editorInfo.bindingPath+"/"+R.editorMetadata.editorInfo.propertyName;R.modelBind.extendedModel=t.oMdlParameter;}else{t.createPlainModel(n,R);}R.valueObject.value=R.valueObject.value||"";R.modelBind.model.setProperty(R.modelBind.sFullPropertyPath,R.valueObject.value);if(R.modelBind.isOdata){t.oBlockedParameters[R.parameterName]=true;R.modelBind.model.attachMetadataLoaded(t.createAppropriateControl.bind(t,n,R));R.modelBind.model.attachMetadataFailed(t.revertToPlainModelControls.bind(t,n,R));}else{t.createAppropriateControl(n,R);}R.modelBind.model.bindTree(R.modelBind.sFullPropertyPath).attachChange(t.storeChangedData.bind(t));}t.oMdlParameter.bindTree("/").attachChange(t.storeChangedData.bind(t));j.resolve(t.getView());});return j.promise();},createAppropriateControl:function(i,R){var s,l,j,k;if(R.editorMetadata.extendedUsage){var t=this;j=new B({text:r.i18n.getText("userDefaultsExtendedParametersTitle"),tooltip:r.i18n.getText("userDefaultsExtendedParametersTooltip"),type:{parts:["MdlParameter>/"+R.parameterName+"/valueObject/extendedValue/Ranges"],formatter:function(p){return p&&p.length?h.Emphasized:h.Transparent;}},press:function(p){t.openExtendedValueDialog(p,R);}}).addStyleClass("sapUshellExtendedDefaultParamsButton");}L.debug("Creating controls for parameter"+R.parameterName+" type "+R.modelBind.isOdata);var E=i.getElements().slice();E.forEach(function(p){i.removeElement(p);});var n=i.getFields().slice();n.forEach(function(p){i.removeField(p);});l=new d({width:D.system.phone?"auto":"12rem",textAlign:D.system.phone?"Left":"Right"});if(R.modelBind.isOdata&&R.editorMetadata.editorInfo){s=new a({value:R.modelBind.sPropertyName,name:R.parameterName});s.attachInnerControlsCreated({},this.applyFocus,this);l.setLabelFor(s);}else{s=new I({name:R.parameterName,value:R.modelBind.sPropertyName,type:"Text"});s.addAriaLabelledBy(l);this.setPropValue(R);l.setText((R.editorMetadata.displayText||R.parameterName)+":");l.setTooltip(R.editorMetadata.description||R.parameterName);}s.attachChange(this.storeChangedData.bind(this));s.addStyleClass("sapUshellDefaultValuesSmartField");s.setLayoutData(new F({shrinkFactor:0}));var o=new e({width:D.system.phone?"100%":"auto",direction:(D.system.phone&&!j)?"Column":"Row",items:[s,j]});l.setLayoutData(new F({shrinkFactor:0}));k=new e({alignItems:D.system.phone?"Start":"Center",direction:D.system.phone?"Column":"Row",items:[l,o]});i.addElement(k);},openExtendedValueDialog:function(E,o){var t=this,p="/"+o.parameterName+"/valueObject/extendedValue/Ranges",M=o.modelBind.extendedModel,R=M.getProperty(p)||[],l,n;if(o.modelBind.isOdata){n=this._getMetadataNameSpace(o.editorMetadata.editorInfo.odataURL);var i=o.modelBind.model.getMetaModel().getODataEntityType(n+"."+o.editorMetadata.editorInfo.entityName);if(i){l=o.modelBind.model.getMetaModel().getODataProperty(i,o.editorMetadata.editorInfo.propertyName)["sap:label"];}}var v=new V({basicSearchText:o.editorMetadata.displayText||l||o.parameterName,title:o.editorMetadata.displayText||l||o.parameterName,supportRanges:true,supportRangesOnly:true,key:o.modelBind.sPropertyName,displayFormat:"UpperCase",descriptionKey:o.editorMetadata.displayText||l||o.parameterName,filterMode:true,stretch:D.system.phone,ok:function(C){t.saveExtendedValue(C,o,M,v);},cancel:function(){v.close();},afterClose:function(){v.destroy();}});v.setIncludeRangeOperations(this.getListOfSupportedRangeOperations());this.addTokensToValueHelpDialog(v,R,o.parameterName);var k=[];k.push({label:v.getTitle(),key:o.parameterName});v.setRangeKeyFields(k);v.open();},saveExtendedValue:function(C,o,M,v){this.aTokens=C.getParameters().tokens;var t=[],p="/"+o.parameterName+"/valueObject/extendedValue/Ranges",i,j={extendedValue:{"Ranges":[]}};q.extend(this.oCurrentParameters[o.parameterName].valueObject,j);for(var k in this.aTokens){if(this.aTokens.hasOwnProperty(k)){t.push(this.aTokens[k].data("range"));}}i=t.map(function(k){return{Sign:k.exclude?"E":"I",Option:k.operation!=="Contains"?k.operation:"CP",Low:k.value1,High:k.value2||null};});if(!M.getProperty("/"+o.parameterName+"/valueObject/extendedValue")){M.setProperty("/"+o.parameterName+"/valueObject/extendedValue",{});}M.setProperty(p,i);this.oChangedParameters[o.parameterName]=true;v.close();},getListOfSupportedRangeOperations:function(){var s=Object.keys(g);return s.filter(function(o){return o!=="StartsWith"&&o!=="EndsWith"&&o!=="Initial";});},_getMetadataNameSpace:function(s){var i=s.split("/"),n;n=i[i.length-1];return n;},addTokensToValueHelpDialog:function(o,R,p){var t=[],i;R.forEach(function(j){if(j){i={};i.exclude=j.Sign==="E";i.keyField=p;i.operation=j.Option!=="CP"?j.Option:"Contains";i.value1=j.Low;i.value2=j.High;t.push(new T({}).data("range",i));}});o.setTokens(t);},sortParametersByGroupIdParameterIndex:function(u){function i(o,k){if(!(k.editorMetadata&&k.editorMetadata.groupId)){return-1;}if(!(o.editorMetadata&&o.editorMetadata.groupId)){return 1;}if(o.editorMetadata.groupId<k.editorMetadata.groupId){return-1;}if(o.editorMetadata.groupId>k.editorMetadata.groupId){return 1;}return 0;}function j(o,k){if(!(k.editorMetadata&&k.editorMetadata.parameterIndex)){return-1;}if(!(o.editorMetadata&&o.editorMetadata.parameterIndex)){return 1;}return o.editorMetadata.parameterIndex-k.editorMetadata.parameterIndex;}u.sort(function(o,k){var l=i(o,k);if(l===0){return j(o,k);}return l;});},storeChangedData:function(){var i=0,t=this,j=t.aDisplayedUserDefaults;for(i=0;i<j.length;++i){var p=j[i].parameterName;if(!t.oBlockedParameters[p]){var o={value:t.oCurrentParameters[p].valueObject&&t.oCurrentParameters[p].valueObject.value,extendedValue:t.oCurrentParameters[p].valueObject&&t.oCurrentParameters[p].valueObject.extendedValue&&t.oCurrentParameters[p].valueObject.extendedValue};if(j[i].modelBind&&j[i].modelBind.model){var M=j[i].modelBind.model;var k=j[i].modelBind.extendedModel;var P=j[i].modelBind.sFullPropertyPath;var A=M.getProperty(P);var n={value:M.getProperty(P),extendedValue:k.getProperty("/"+p+"/valueObject/extendedValue")};if(this.isValueDifferent(n,o)){t.oCurrentParameters[p].valueObject.value=A;if(n.extendedValue){q.extend(t.oCurrentParameters[p].valueObject.extendedValue,n.extendedValue);}t.oChangedParameters[p]=true;}}}}},onCancel:function(){if(sap.ui.getCore().byId("saveButton")){sap.ui.getCore().byId("saveButton").setEnabled(true);}var C=Object.keys(this.oChangedParameters),j=this.aDisplayedUserDefaults,p,o,k;if(C.length>0){for(var i=0;i<j.length&&C.length>0;i++){p=j[i].parameterName;if(C.indexOf(p)>-1){k=this.oOriginalParameters[p];o=j[i].modelBind;o.model.setProperty(o.sFullPropertyPath,k.valueObject.value||"");if(k.editorMetadata&&k.editorMetadata.extendedUsage){o.extendedModel.setProperty("/"+p+"/valueObject/extendedValue",k.valueObject.extendedValue||{});}}}this.oCurrentParameters=q.extend(true,{},this.oOriginalParameters);this.oChangedParameters={};}},isValueDifferent:function(v,o){var i=false,s=v?JSON.stringify(v):v,j=o?JSON.stringify(o):o,E,k;if(s===j){return false;}if(v===undefined){return false;}if(o===undefined){return false;}E=v.extendedValue?JSON.stringify(v.extendedValue):v.extendedValue;k=o.extendedValue?JSON.stringify(o.extendedValue):o.extendedValue;if((v.value===""&&o.value===undefined)||(o.value===""&&v.value===undefined)){i=true;}if(i&&(E===k)){return false;}return(!i&&(v.value!==o.value))||(E!==k);},onSave:function(){var t=this,j=new q.Deferred(),i,C=Object.keys(this.oChangedParameters).sort(),s,p,k=false;if(C.length===0){j.resolve();}for(i=0;i<C.length;i++){p=C[i];if(this.isValueDifferent(this.oOriginalParameters[p].valueObject,this.oCurrentParameters[p].valueObject)){if((this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.value===null)||(this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.value==="")){this.oCurrentParameters[p].valueObject.value=undefined;}if(this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.extendedValue&&Array.isArray(this.oCurrentParameters[p].valueObject.extendedValue.Ranges)&&(this.oCurrentParameters[p].valueObject.extendedValue.Ranges.length===0)){this.oCurrentParameters[p].valueObject.extendedValue=undefined;}s=sap.ushell.Container.getService("UserDefaultParameters").editorSetValue(p,this.oCurrentParameters[p].valueObject);s.done(function(P){t.oChangedParameters={};t.oOriginalParameters[P].valueObject.value=t.oCurrentParameters[P].valueObject.value;j.resolve();});s.fail(j.reject);k=true;}}if(!k){j.resolve();}return j.promise();}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/DefaultParameters.view',[],function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.UserSettings.DefaultParameters",{createContent:function(){},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.DefaultParameters";}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/FlpSettings.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/model/resource/ResourceModel"],function(C,J,D,R){"use strict";return C.extend("sap.ushell.components.shell.UserSettings.FlpSettings",{DISPLAY_MODES:{"scroll":0,"tabs":1,getName:function(v){return Object.keys(this)[v];}},onInit:function(){this.oConfModel=new J({});this.oConfModel.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),flexAlignItems:D.system.phone?"Stretch":"Start",textAlign:D.system.phone?"Begin":"End",textDirection:D.system.phone?"Column":"Row",labelWidth:D.system.phone?"auto":"12rem"});this.getView().setModel(this.oConfModel,"config");var r=new R({bundleUrl:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/resources/resources")+".properties"});this.getView().setModel(r,"i18n");var i=this.getView().getViewData().initialDisplayMode;this.iCurrentMode=this.DISPLAY_MODES[i]||this.DISPLAY_MODES.scroll;},onBeforeRendering:function(){this.oConfModel.setProperty("/displayMode",this.iCurrentMode);},onSave:function(){this.iCurrentMode=this.oConfModel.getProperty("/displayMode");return this.DISPLAY_MODES.getName(this.iCurrentMode);}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/LanguageRegionSelector.controller',["sap/ui/performance/Measurement","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/Locale","sap/ushell/resources","sap/ui/core/LocaleData","sap/ui/model/json/JSONModel"],function(M,q,L,a,r,b,J){"use strict";sap.ui.controller("sap.ushell.components.shell.UserSettings.LanguageRegionSelector",{onInit:function(){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){L.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.bIsSetLanguage=sap.ushell.Container.getRenderer("fiori2").getModelConfiguration().enableSetLanguage;this.isLanguageChanged=false;this.isLanguagePersonalized=this.oUser.isLanguagePersonalized();this.sLanguage=this._getFormatedLanguage(this.oUser.getLanguage());this.aLanguageList=null;var m=new J();var s=this.oUser.getLanguageText();var c={languageList:[{key:this.sLanguage,text:s}],selectedLanguage:this.sLanguage,selectedLanguageText:s};var l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var o=b.getInstance(l);var d=o.getDatePattern("medium"),t=o.getTimePattern("medium"),T=(t.indexOf("H")===-1)?"12h":"24h";c.datePatternList=[{text:d,key:d}];c.timeFormat=T;c.selectedDatePattern=d;var h=this.oView.hourFormatSegmentedButton.getButtons();var f=(T==="12h")?h[0]:h[1];this.oView.hourFormatSegmentedButton.setSelectedButton(f);m.setData(c);this.oView.setModel(m);},getContent:function(){var d=q.Deferred();var t=this;if(this.bIsSetLanguage){M.start("FLP:LanguageRegionSelector.getContent","getContent","FLP");var c=this._getLanguagesList();c.done(function(l){if(l){if(l.length>1){if(!t.isLanguagePersonalized){t.getView().getModel().setProperty("/selectedLanguage","default");}else{t.getView().getModel().setProperty("/selectedLanguage",t.oUser.getLanguage());}t.getView().getModel().setSizeLimit(l.length);t.getView().getModel().setProperty("/languageList",l);t.oView.inputLanguage.setVisible(false);t.oView.selectLanguage.setVisible(true);t.oView.helpingText.setVisible(true);t.oView.helpingTextLabel.setVisible(true);}}M.end("FLP:LanguageRegionSelector.getContent");d.resolve(t.getView());});c.fail(function(e){L.error(e);d.resolve(t.getView());});}else{d.resolve(t.getView());}return d.promise();},getValue:function(){var d=q.Deferred();var s=this.getView().getModel().getProperty("/selectedLanguage");var u=this.oUser.getLanguage();if(s==="default"){d.resolve(this._getFormatedLanguage(u)+" | "+r.i18n.getText("timeFormatFld")+": "+this.getView().getModel().getProperty("/timeFormat"));}else{d.resolve(this._getFormatedLanguage(s)+" | "+r.i18n.getText("timeFormatFld")+": "+this.getView().getModel().getProperty("/timeFormat"));}return d.promise();},onCancel:function(){var d=q.Deferred();if(this.bIsSetLanguage){this.isLanguageChanged=false;var s=this.getView().getModel().getProperty("/selectedLanguage");if(!this.isLanguagePersonalized||this.oUser.getLanguage()!==s){this._handleSelectChange(this.oUser.getLanguage(),"Cancel");d.resolve();}else{d.resolve();}}else{d.resolve();}return d.promise();},onSave:function(){var d=q.Deferred();var o;var s=this.getView().getModel().getProperty("/selectedLanguage");if(this.isLanguageChanged){if(s){o=this.oUser.getLanguage();this.oUser.setLanguage(s);this.userInfoService.updateUserPreferences(this.oUser).done(function(){d.resolve();window.location.reload();}).fail(function(e){this.oUser.setLanguage(o);this._handleSelectChange(o,"Cancel");L.error(e);d.reject(e);}.bind(this));}}else{d.resolve();}return d.promise();},_getFormatedLanguage:function(l){if(l&&l.indexOf("-")>-1){l=l.replace("-"," (").concat(")").toUpperCase();}else if(l){l=l.toUpperCase();}return l;},_handleSelectChange:function(l,m){var o=new a(l);var c=b.getInstance(o);var d=c.getDatePattern("medium"),t=c.getTimePattern("medium"),T=(t.indexOf("H")===-1)?"12h":"24h";this.isLanguageChanged=true;if(m==="Cancel"){if(!this.isLanguagePersonalized){this.getView().selectLanguage.setSelectedKey("default");}else{this.getView().selectLanguage.setSelectedKey(l);}this.isLanguageChanged=false;}this.getView().comboDate.setValue(d);var h=this.getView().hourFormatSegmentedButton.getButtons();var s=(T==="12h")?h[0]:h[1];this.getView().hourFormatSegmentedButton.setSelectedButton(s);},_getLanguagesList:function(){var R=q.Deferred();if(this.aLanguageList==null){M.start("FLP:LanguageRegionSelector._getLanguagesList","_getLanguagesList","FLP");var g=this.userInfoService.getLanguageList();g.done(function(d){M.end("FLP:LanguageRegionSelector._getLanguagesList");R.resolve(d);});g.fail(function(){R.reject("Failed to load language list.");});}else{R.resolve(this.aLanguageList);}return R.promise();}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/LanguageRegionSelector.view',["sap/m/VBox","sap/m/Button","sap/m/SegmentedButton","sap/m/ComboBox","sap/m/Text","sap/m/FlexBox","sap/m/Input","sap/m/Select","sap/m/Label","sap/ui/Device","sap/ushell/resources","sap/ui/core/Item"],function(V,B,S,C,T,F,I,a,L,D,r,b){"use strict";sap.ui.jsview("sap.ushell.components.shell.UserSettings.LanguageRegionSelector",{createContent:function(c){var i=new b({key:"{key}",text:"{text}"});var d=r.i18n;var l="languageSelectionSelect";var s="dateFormatCombo";var f=D.system.phone?"Column":"Row";var g=D.system.phone?"Stretch":"Center";var t=D.system.phone?"Left":"Right";var h=D.system.phone?"auto":"12rem";var j=D.system.phone?"auto":"16rem";var k=D.system.phone?"100%":undefined;var m=new L("languageSelectionLabel",{text:{path:"/selectedLanguage",formatter:function(e){e=c._getFormatedLanguage(e);return d.getText(e.indexOf("(")>-1?"languageAndRegionTit":"languageRegionFld")+":";}},width:h,textAlign:t,labelFor:l});this.selectLanguage=new a("languageSelectionSelect",{visible:false,width:j,items:{path:"/languageList",template:i},selectedKey:"{/selectedLanguage}",change:function(e){var x=e.getParameters().selectedItem.getKey();c._handleSelectChange(x);}}).addAriaLabelledBy(m);this.inputLanguage=new I("languageSelectionInput",{visible:true,value:"{/selectedLanguageText}",editable:false}).addAriaLabelledBy(m);var n=new F({alignItems:g,direction:f,items:[m,this.selectLanguage,this.inputLanguage]});this.helpingTextLabel=new L({visible:false,text:"",width:h,textAlign:t});this.helpingText=new T({visible:false,text:d.getText("LanguageAndRegionHelpingText"),width:j,textAlign:"Begin"}).addStyleClass("sapUshellFlpSettingsLanguageRegionDescription");var o=new F({alignItems:g,direction:f,items:[this.helpingTextLabel,this.helpingText]});var p=new L({text:d.getText("dateFormatFld")+":",width:h,textAlign:t,labelFor:s});this.comboDate=new C("dateFormatCombo",{width:k,items:{path:"/datePatternList",template:i},selectedKey:"{/selectedDatePattern}",editable:false}).addAriaLabelledBy(p);var q=new F({alignItems:g,direction:f,items:[p,this.comboDate]});var u=new L({text:d.getText("timeFormatFld")+":",width:h,textAlign:t});this.hourFormatSegmentedButton=new S("hoursSegmentedButton",{enabled:false,width:"10rem",buttons:[new B({text:d.getText("btn12h")}),new B({text:d.getText("btn24h")})]}).addAriaLabelledBy(u);var v=new F({alignItems:g,direction:f,items:[u,this.hourFormatSegmentedButton]});v.addStyleClass("sapUshellFlpSettingsLanguageRegionHourFormatFBox");var w=new V({items:[n,o,q,v]});w.addStyleClass("sapUiSmallMargin");return w;},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.LanguageRegionSelector";}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/Spaces.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ushell/resources","sap/ushell/Config"],function(C,J,D,r,a){"use strict";return C.extend("sap.ushell.components.shell.UserSettings.Spaces",{onInit:function(){this.bSpacesEnabledSavedValue=a.last("/core/spaces/enabled");this.oModel=new J({isSpacesEnabled:this.bSpacesEnabledSavedValue,textAlign:D.system.phone?"Begin":"End",labelWidth:D.system.phone?"auto":"12rem"});this.getView().setModel(this.oModel,"config");this.getView().setModel(r.getTranslationModel(),"i18n");this.oUserInfoServicePromise=sap.ushell.Container.getServiceAsync("UserInfo");},getContent:function(){var d=jQuery.Deferred();d.resolve(this.getView());return d.promise();},getValue:function(){return jQuery.Deferred().resolve().promise();},onCancel:function(){this.oModel.setProperty("/isSpacesEnabled",this.bSpacesEnabledSavedValue);},onSave:function(){var d=jQuery.Deferred();var s=this.oModel.getProperty("/isSpacesEnabled");if(s===this.bSpacesEnabledSavedValue){d.resolve();return d.promise();}this.oUserInfoServicePromise.then(function(u){var U=u.getUser();U.setChangedProperties({propertyName:"spacesEnabled",name:"SPACES_ENABLEMENT"},this.bSpacesEnabledSavedValue,s);u.updateUserPreferences(U).done(function(){U.resetChangedProperty("spacesEnabled");this.bSpacesEnabledSavedValue=s;d.resolve({refresh:true});}.bind(this)).fail(function(e){this.oModel.setProperty("/isSpacesEnabled",this.bSpacesEnabledSavedValue);U.resetChangedProperty("spacesEnabled");d.reject(e);}.bind(this));}.bind(this));return d.promise();}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/ThemeSelector.controller',["sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ui/core/theming/Parameters","sap/ui/Device","sap/ushell/resources"],function(E,C,a,q,J,P,D,r){"use strict";
function g(n,b){var l=Math.min(n.length,(b||"").length);var i=0;while(i<l&&n[i]===b[i]){i++;}return i?n.slice(0,i).trim():n;}
sap.ui.controller("sap.ushell.components.shell.UserSettings.ThemeSelector",{TILE_SIZE:{Small:0,Responsive:1,getName:function(v){return Object.keys(this)[v];}},onInit:function(){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){q.sap.log.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.currentThemeId=this.oUser.getTheme(sap.ushell.User.prototype.constants.themeFormat.ORIGINAL_THEME);this.origThemeId=this.currentThemeId;this.aThemeList=null;this.isContentLoaded=false;this.aSapThemeMap={base:"sapUshellBaseIconStyle",sap_bluecrystal:"sapUshellBlueCrystalIconStyle",sap_belize_hcb:"sapUshellHCBIconStyle",sap_belize_hcw:"sapUshellHCWIconStyle",sap_belize:"sapUshellBelizeIconStyle",sap_belize_plus:"sapUshellPlusIconStyle",sap_fiori_3_hcb:"sapUshellHCBIconStyle",sap_fiori_3_hcw:"sapUshellHCWIconStyle",sap_fiori_3:"sapUshellQuartzLightIconStyle",sap_fiori_3_dark:"sapUshellQuartzDarkIconStyle"};this.oPersonalizers={};this.oThemeNamesMap={};this._oDarkModeModel=this.getDarkModeModel();this._aSupportedDarkModeThemes=C.last("/core/darkMode/supportedThemes");},getConfigurationModel:function(){var c=new J({});c.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),sapUiContentIconColor:P.get("sapUiContentIconColor"),flexAlignItems:"Center",textAlign:D.system.phone?"Left":"Right",textDirection:"Row",labelWidth:"auto",isCozyContentMode:this.isCozyContentMode(),sizeBehaviorConfigurable:C.last("/core/home/sizeBehaviorConfigurable")});return c;},getDarkModeModel:function(){var d=new J({}),o={enabled:false,detectionSupported:false,detectionEnabled:true,isDarkThemeApplied:false};if(C.last("/core/darkMode/enabled")){o.enabled=true;var b=sap.ushell.Container.getService("DarkModeSupport");o.detectionSupported=b.canAutomaticallyToggleDarkMode();b.attachModeChanged(function(m){d.setProperty("/isDarkThemeApplied",m===sap.ushell.services.DarkModeSupport.Mode.DARK);});}d.setData(o);return d;},_getIsChangeThemePermitted:function(){return this.oUser.isSetThemePermitted();},onAfterRendering:function(){var t=this;var d=this._isDarkModeActive();var o=E.on("UserPreferencesDetailNavigated");o.do(function(i){if(i!=="detailuserPrefThemeSelector"){return;}o.off("UserPreferencesDetailNavigated");var l=sap.ui.getCore().byId("userPrefThemeSelector--themeList"),b=l.getItems(),I,T;l.toggleStyleClass("sapUshellThemeListDisabled",!t.isListActive());b.forEach(function(L){T=L.getCustomData()[0].getValue();I=L.getContent()[0].getItems()[0].getItems()[0];if(!t.isListActive()){L.isSelectable=function(){return false;};}if(T===t.currentThemeId){L.setSelected(true);if(!t.isListActive()){L.toggleStyleClass("sapUshellThemeListItemSelected",true);}}else{L.setSelected(false);}if(t.aSapThemeMap[T]){I.addStyleClass(t.aSapThemeMap[T]);}I.toggleStyleClass("sapUshellDarkMode",d);I.toggleStyleClass("sapUshellHCBIconStyleOnHCB",T===t.currentThemeId&&(T||"").indexOf("_hcb")>-1);I.toggleStyleClass("sapUshellHCWIconStyleOnHCW",t.currentThemeId!=="sap_belize_hcb"&&(T||"").indexOf("_hcw")>-1);});var c=sap.ui.getCore().byId("userPrefThemeSelector--contentDensitySwitch");if(c){c.setState(t.currentContentDensity==="cozy");c.setEnabled(t.isContentDensitySwitchEnabled());}var e=sap.ui.getCore().byId("userPrefThemeSelector--tileSizeRadioButtonGroup");if(e){var s=C.last("/core/home/sizeBehavior");e.setSelectedIndex(t.TILE_SIZE[s]);}l.getModel("config").setProperty("/sapUiContentIconColor",P.get("sapUiContentIconColor"));q(".sapUshellAppearanceTable > table").attr("role","list");});},getContent:function(){var t=this;var d=q.Deferred();var R=r.getTranslationModel();this.getView().setModel(R,"i18n");this.getView().setModel(this.getConfigurationModel(),"config");this.getView().setModel(this._oDarkModeModel,"darkMode");if(this.isContentDensitySwitchEnabled()){this.origContentDensity=this.currentContentDensity;if(this.oUser.getContentDensity()){this.currentContentDensity=this.oUser.getContentDensity();}else{this.currentContentDensity="cozy";}}if(this.isContentLoaded===true){d.resolve(this.getView());}else{var b=this._getThemeList();b.done(function(T){if(T.length>0){T.sort(function(c,e){var f=c.name,h=e.name;if(f<h){return-1;}if(f>h){return 1;}return 0;});for(var i=0;i<T.length;i++){if(T[i].id===t.currentThemeId){T[i].isSelected=true;}else{T[i].isSelected=false;}}t._adjustThemeList(T);t.getView().getModel().setProperty("/options",T);d.resolve(t.getView());}else{d.reject();}});b.fail(function(){d.reject();});}return d.promise();},_adjustThemeList:function(t){t.forEach(function(T){var c=this._getComplementaryThemeId(T.id);T.name=this.oThemeNamesMap[T.id]||T.id||"";T.isVisible=true;T.isCombi=false;if(this._isDarkModeActive()&&c){t.forEach(function(o){if(o.id===c){T.name=this._getCombinedThemeName(T.id);T.isCombi=true;T.isVisible=T.isSelected;o.isVisible=!T.isSelected;}}.bind(this));}}.bind(this));},getValue:function(){var d=q.Deferred();var t=this._getThemeList();var b=this;var c;t.done(function(T){b.aThemeList=T;c=b._getThemeNameById(b.currentThemeId);d.resolve(c);});t.fail(function(e){d.reject(e);});return d.promise();},onCancel:function(){this.currentThemeId=this.oUser.getTheme(sap.ushell.User.prototype.constants.themeFormat.ORIGINAL_THEME);if(this.isContentDensitySwitchEnabled()){this.currentContentDensity=this.oUser.getContentDensity();}this.tileSizeChanged=false;},onSave:function(){var R=q.Deferred(),w,p=[],t=0,s=0,f=0,F=[],b=function(){s++;R.notify();},c=function(e){F.push({entry:"currEntryTitle",message:e});f++;R.notify();};var T=this.onSaveThemes();T.done(b);T.fail(c);p.push(T);if(this.isContentDensitySwitchEnabled()){var o=this.onSaveContentDensity();o.done(b);o.fail(c);p.push(o);}if(this.tileSizeChanged&&this.currentTileSize){C.emit("/core/home/sizeBehavior",this.currentTileSize);if(this.currentTileSize==="Responsive"){q(".sapUshellTile").removeClass("sapUshellSmall");q(".sapUshellPlusTile").removeClass("sapUshellPlusTileSmall");}else{q(".sapUshellTile").addClass("sapUshellSmall");q(".sapUshellPlusTile").addClass("sapUshellPlusTileSmall");}this.tileSizeChanged=false;var S=this.writeToPersonalization("flp.settings.FlpSettings","sizeBehavior",this.currentTileSize);S.done(b);S.fail(c);p.push(S);}w=q.when.apply(null,p);w.done(function(){R.resolve();});R.progress(function(){if(f>0&&(f+s===t)){R.reject("At least one save action failed");}});return R.promise();},_applyDarkMode:function(){var m=this._oDarkModeModel;if(m.getProperty("/enabled")&&m.getProperty("/detectionSupported")&&m.getProperty("/detectionEnabled")){sap.ushell.Container.getService("DarkModeSupport")._toggleDarkModeBasedOnSystemColorScheme();}},onSaveThemes:function(){var d=q.Deferred(),u;if(this.oUser.getTheme(sap.ushell.User.prototype.constants.themeFormat.ORIGINAL_THEME)!==this.currentThemeId&&this.isListActive()){if(this.currentThemeId){this.oUser.setTheme(this.currentThemeId);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.origThemeId=this.currentThemeId;this.oUser.resetChangedProperty("theme");this._applyDarkMode();d.resolve();}.bind(this));u.fail(function(e){this.oUser.setTheme(this.origThemeId);this.oUser.resetChangedProperty("theme");this.currentThemeId=this.origThemeId;q.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject("Could not find theme: "+this.currentThemeId);}}else{d.resolve();}return d.promise();},_getThemeList:function(){var d=q.Deferred(),t=this;if(!this.aThemeList){var b=this.userInfoService.getThemeList();b.done(function(o){t.aThemeList=o.options||[];t.aThemeList.forEach(function(T){t.oThemeNamesMap[T.id]=T.name;});if(t._getIsChangeThemePermitted()===false){t.aThemeList=[{id:t.currentThemeId,name:t._getThemeNameById(t.currentThemeId)}];}d.resolve(t.aThemeList);});b.fail(function(){d.reject("Failed to load theme list.");});}else{d.resolve(this.aThemeList);}return d.promise();},getCurrentThemeId:function(){return this.currentThemeId;},setCurrentThemeId:function(n){this.currentThemeId=n;},_getThemeNameById:function(t){if(this.aThemeList){for(var i=0;i<this.aThemeList.length;i++){if(this.aThemeList[i].id===t){return this._getCombinedThemeName(t);}}}return t;},_isDarkModeActive:function(){var m=this._oDarkModeModel;if(m.getProperty("/enabled")){return m.getProperty("/detectionSupported")?m.getProperty("/detectionEnabled"):true;}return false;},_getComplementaryThemeId:function(t){var s=this._aSupportedDarkModeThemes||[];for(var j=0;j<s.length;j++){var p=s[j];if(p.dark===t){return p.light;}else if(p.light===t){return p.dark;}}return null;},_getCombinedThemeName:function(t){var T=this.oThemeNamesMap;function b(i){return T[i]||"";}var n=b(t);return this._isDarkModeActive()?g(n,b(this._getComplementaryThemeId(t))):n;},onSaveContentDensity:function(){var d=q.Deferred();var u;if(this.oUser.getContentDensity()!==this.currentContentDensity&&this.isContentDensitySwitchEnabled()){if(this.currentContentDensity){this.oUser.setContentDensity(this.currentContentDensity);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.oUser.resetChangedProperty("contentDensity");this.origContentDensity=this.currentContentDensity;sap.ui.getCore().getEventBus().publish("launchpad","toggleContentDensity",{contentDensity:this.currentContentDensity});E.emit("toggleContentDensity",{contentDensity:this.currentContentDensity});E.once("toggleContentDensity").do(function(){d.resolve();});}.bind(this));u.fail(function(e){this.oUser.setContentDensity(this.origContentDensity);this.oUser.resetChangedProperty("contentDensity");this.currentContentDensity=this.origContentDensity;q.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject("Could not find mode: "+this.currentContentDensity);}}else{d.resolve();}return d.promise();},getCurrentContentDensity:function(){return this.currentContentDensity;},isCozyContentMode:function(){return!!q("body.sapUiSizeCozy").length;},setCurrentContentDensity:function(e){var n=e.getSource().getState()?"cozy":"compact";this.currentContentDensity=n;},setCurrentTileSize:function(e){var n=e.getSource().getSelectedIndex();this.currentTileSize=this.TILE_SIZE.getName(n);this.tileSizeChanged=true;},getIconFormatter:function(t){if(this.aSapThemeMap[t]){return undefined;}return"sap-icon://palette";},onSelectHandler:function(e){var i=e.getParameters().listItem;this.setCurrentThemeId(i.getBindingContext().getProperty("id"));},isContentDensitySwitchEnabled:function(){return!D.system.phone;},isListActive:function(){return this.getView().getModel().getProperty("/setTheme");},writeToPersonalization:function(c,i,v){var p;try{p=this.getPersonalizer(c,i).setPersData(v);}catch(e){q.sap.log.error("Personalization service does not work:");q.sap.log.error(e.name+": "+e.message);p=q.when(Promise.reject(e));}return p;},getPersonalizer:function(c,i){var k=c+"-"+i;if(this.oPersonalizers[k]){return this.oPersonalizers[k];}var p=sap.ushell.Container.getService("Personalization");var o=a.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};if(!this.oPersonalizers[k]){this.oPersonalizers[k]=p.getPersonalizer({container:c,item:i},s,o);}return this.oPersonalizers[k];},changeThemeMode:function(e){sap.ushell.Container.getService("DarkModeSupport").toggleModeChange();},changeSystemModeDetection:function(e){var s=e.getSource().getState();if(s){sap.ushell.Container.getService("DarkModeSupport").enableDarkModeBasedOnSystem();}else{sap.ushell.Container.getService("DarkModeSupport").disableDarkModeBasedOnSystem();}var m=this.getView().getModel();var t=m.getProperty("/options");this._adjustThemeList(t);this.getView().getModel().setProperty("/options",t);this.getView().invalidate();}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/UsageAnalyticsSelector.controller',["sap/ui/thirdparty/jquery","sap/ushell/resources"],function(q,r){"use strict";sap.ui.controller("sap.ushell.components.shell.UserSettings.UsageAnalyticsSelector",{onInit:function(){this.oUser=sap.ushell.Container.getUser();this.switchStateValue=this.oUser.getTrackUsageAnalytics();this.getView().oSwitchButton.setState(this.switchStateValue);},getContent:function(){var t=this,d=q.Deferred();d.resolve(t.getView());return d.promise();},getValue:function(){var d=q.Deferred(),i=r.i18n;d.resolve(this.switchStateValue?i.getText("trackingEnabled"):i.getText("trackingDisabled"));return d.promise();},onSave:function(){var c=this.getView().oSwitchButton.getState();this.switchStateValue=c;return sap.ushell.Container.getService("UsageAnalytics").setTrackUsageAnalytics(c);},onCancel:function(){this.getView().oSwitchButton.setState(this.switchStateValue);}});},true);
sap.ui.predefine('sap/ushell/components/shell/UserSettings/UsageAnalyticsSelector.view',["sap/m/Label","sap/ushell/resources","sap/ui/Device","sap/m/Switch","sap/m/library","sap/m/Text","sap/m/HBox","sap/m/FlexItemData","sap/m/VBox"],function(L,r,D,S,m,T,H,F,V){"use strict";var a=m.SwitchType;sap.ui.jsview("sap.ushell.components.shell.UserSettings.UsageAnalyticsSelector",{createContent:function(){var f=D.system.phone?"Start":"Center",s=D.system.phone?"Wrap":"NoWrap",b=D.system.phone?"Column":"Row",t=D.system.phone?"Left":"Right",A=D.system.phone?"Baseline":"Auto",w=D.system.phone?"auto":"11.75rem";this.oLabel=new L({width:w,textAlign:t,text:r.i18n.getText("allowTracking")+":"}).addStyleClass("sapUshellUsageAnalyticsSelectorLabel");this.oSwitchButton=new S("usageAnalyticsSwitchButton",{type:a.Default}).addStyleClass("sapUshellUsageAnalyticsSelectorSwitchButton");this.oMessage=new T({text:sap.ushell.Container.getService("UsageAnalytics").getLegalText()}).addStyleClass("sapUshellUsageAnalyticsSelectorLegalTextMessage");this.fBox=new H({alignItems:f,wrap:s,direction:b,height:"2rem",items:[this.oLabel,this.oSwitchButton],layoutData:new F({alignSelf:A})});this.vBox=new V({items:[this.fBox,this.oMessage]});return this.vBox;},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.UsageAnalyticsSelector";}});},true);
sap.ui.predefine('sap/ushell/components/shell/UserSettings/UserPreferences',["sap/ushell/resources","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils"],function(r,A,s,C,q,L,u){"use strict";
function _(){return sap.ushell.Container.getRenderer("fiori2");}
function a(){return A.getElementsModel().getModel();}
function G(v,i,j,k,t,o,l,m,n,p,M,w,x){this.view=null;this.getView=function(){if(!this.view||!sap.ui.getCore().byId(v)){if(j==="xml"){this.view=sap.ui.xmlview(v,i);}else{this.view=sap.ui.jsview(v,i);}}if(M){this.view.setModel(M);}return this.view;};return{entryHelpID:k,title:t,valueResult:null,onSave:o?o.bind(this):function(){if(this.getView().getController().onSave){return this.getView().getController().onSave();}}.bind(this),onCancel:l?l.bind(this):function(){if(this.getView().getController().onCancel){return this.getView().getController().onCancel();}}.bind(this),contentFunc:m?m.bind(this):function(){if(this.getView().getController().getContent){return this.getView().getController().getContent();}}.bind(this),valueArgument:n?n.bind(this):function(){var y=new q.Deferred(),z=this;setTimeout(function(){if(z.getView().getController().getValue){z.getView().getController().getValue().done(function(B){y.resolve(B);});}},0);return y.promise();}.bind(this),editable:typeof p==="function"?p():p,contentResult:null,icon:w,defaultVisibility:x};}
function c(m){return function(){return this.getView().getController()[m]();};}
function b(p){var E={entryHelpID:p.entryHelpId,title:r.i18n.getText(p.i18nTitleKey),editable:true,valueResult:null,contentResult:null,icon:p.icon,getView:function(){var i=p.viewType==="xml"?sap.ui.xmlview:sap.ui.jsview;var v=sap.ui.getCore().byId(p.viewId);if(!v){v=i(p.viewId,p.componentNamespace);}return v;}};E.valueArgument=c("getValue").bind(E);E.onSave=c("onSave").bind(E);E.onCancel=c("onCancel").bind(E);E.contentFunc=c("getContent").bind(E);return E;}
function d(){return b({entryHelpId:"language",i18nTitleKey:"languageRegionTit",icon:"sap-icon://globe",viewId:"languageRegionSelector",componentNamespace:"sap.ushell.components.shell.UserSettings.LanguageRegionSelector"});}
function U(){return b({entryHelpId:"UserActivitiesEntry",i18nTitleKey:"userActivities",icon:"sap-icon://laptop",viewId:"userActivitiesHandler",componentNamespace:"sap.ushell.components.shell.UserSettings.userActivitiesHandler"});}
function S(){return b({entryHelpId:"spaces",i18nTitleKey:"spaces",icon:"sap-icon://home",viewId:"Spaces",viewType:"xml",componentNamespace:"sap.ushell.components.shell.UserSettings.Spaces"});}
function e(){var o=_().getShellConfig();var i=o.enableUserImgConsent;var v=i?"userAccountSelector":"userAccountSetting";var j=i?"sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector":"sap.ushell.components.shell.UserSettings.userAccount.UserAccountSetting";return b({entryHelpId:"userAccountEntry",i18nTitleKey:"UserAccountFld",icon:"sap-icon://account",viewId:v,componentNamespace:j,viewType:"xml"});}
function f(){var m=a(),o=sap.ushell.Container.getUser(),i=[],p=[];i.push(new e());var t=new G("userPrefThemeSelector","sap.ushell.components.shell.UserSettings.ThemeSelector","xml","themes",r.i18n.getText("Appearance"),function(){var y=this.getView().getController().onSave();y.done(function(){if(C.last("/core/home/enableTilesOpacity")){u.handleTilesOpacity();}});return y;},undefined,undefined,undefined,function(){if(C.last("/core/shell/model/setTheme")!==undefined){return C.last("/core/shell/model/setTheme")&&o.isSetThemePermitted();}return o.isSetThemePermitted();},m,"sap-icon://palette");i.push(t);var j=new G("userPrefUsageAnalyticsSelector","sap.ushell.components.shell.UserSettings.UsageAnalyticsSelector","js","usageAnalytics",r.i18n.getText("usageAnalytics"),undefined,undefined,undefined,undefined,sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted());p.push(j);var k=new G("userProfilingView","sap.ushell.components.shell.UserSettings.UserProfiling","js","userProfiling",r.i18n.getText("userProfiling"),undefined,undefined,undefined,undefined,false,m,"sap-icon://user-settings",false);var E=C.last("/core/spaces/configurable");if(E){i.push(new S());}i.push(new d());var l=C.last("/core/shell/enableRecentActivity");if(l){i.push(new U());}i.push(k);if(C.last("/core/shell/model/enableNotifications")===true){var n=sap.ushell.Container.getService("Notifications")._getNotificationSettingsAvalability(),v;v=new G("notificationSettings","sap.ushell.components.shell.Notifications.Settings","js","notification",r.i18n.getText("notificationSettingsEntry_title"),undefined,undefined,undefined,undefined,true,undefined,"sap-icon://bell",false);i.push(v);n.done(function(y){if(y.settingsAvailable){v.visible=true;C.last("/core/shell/model/userPreferences/entries").every(function(z,B){if(z.title===r.i18n.getText("notificationSettingsEntry_title")){m.setProperty("/userPreferences/entries/"+B+"/visible",true);return false;}return true;});}});}if(C.last("/core/shell/model/userDefaultParameters")){var w=new G("defaultParametersSelector","sap.ushell.components.shell.UserSettings.DefaultParameters","js","defaultParameters",r.i18n.getText("defaultsValuesEntry"),undefined,undefined,undefined,undefined,true,undefined,undefined,false);i.push(w);}var x=C.last("/core/home/enableHomePageSettings")&&!C.last("/core/spaces/enabled");if(x){i.push(g());}return{dialogTitle:r.i18n.getText("userSettings"),isDetailedEntryMode:false,activeEntryPath:null,entries:i,profiling:p};}
function g(){var R=_(),o=r.i18n;var i;var E={title:o.getText("FlpSettings_entry_title"),entryHelpID:"flpSettingsEntry",valueArgument:function(){return q.Deferred().resolve(" ");},contentFunc:function(){var D=new q.Deferred();s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings").then(function(j){i=sap.ui.xmlview({viewName:"sap.ushell.components.shell.UserSettings.FlpSettings",viewData:{initialDisplayMode:j||"scroll"}});D.resolve(i);});return D;},onSave:function(){var D=i.getController().onSave();var j=s.getPersonalizer("homePageGroupDisplay",R).setPersData(D);j.fail(function(k){L.error("Failed to save the anchor bar mode in personalization",k,"sap.ushell.components.flp.settings.FlpSettings");});C.emit("/core/home/homePageGroupDisplay",D);return q.Deferred().resolve();},onCancel:function(){return q.Deferred().resolve();},icon:"sap-icon://home"};return E;}
function h(){var i=C.last("/core/shell/model/userPreferences/entries");var D=f();D.entries=D.entries.concat(i);D.entries=_().reorderUserPrefEntries(D.entries);a().setProperty("/userPreferences",D);}
return{setModel:h};});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/UserProfiling.controller',["sap/ui/thirdparty/jquery"],function(q){"use strict";sap.ui.controller("sap.ushell.components.shell.UserSettings.UserProfiling",{onInit:function(){this.isContentLoaded=true;},onCancel:function(){var p=this.getView().getModel().getProperty("/userPreferences/profiling"),P,i;for(i=0;i<p.length;i++){P=p[i];if(P.onCancel){P.onCancel();}}},getValue:function(){var d=q.Deferred();var p=this.getView().getModel().getProperty("/userPreferences/profiling");p.forEach(function(e,i){if(e.entryHelpID==="usageAnalytics"){if(!sap.ushell.Container.getService("UsageAnalytics").systemEnabled()||!sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted()){p.splice(i,1);}}},this);if(p!==undefined&&p.length>0){d.resolve({value:1,displayText:" "});}else{d.resolve({value:0,displayText:" "});}return d.promise();},onSave:function(){var r=q.Deferred(),p=this.getView().getModel().getProperty("/userPreferences/profiling"),w,P=[],t=0,s=0,f=0,F=[],T,a=function(){s++;r.notify();},b=function(e){F.push({entry:"currEntryTitle",message:e});f++;r.notify();};p.forEach(function(i){T=i.onSave();T.done(a);T.fail(b);P.push(T);t++;});w=q.when.apply(null,P);w.done(function(){r.resolve();});r.progress(function(){if(f>0&&(f+s===t)){r.reject("At least one save action failed");}});return r.promise();},getContent:function(){var t=this,d=q.Deferred(),p=this.getView().getModel().getProperty("/userPreferences/profiling");p.forEach(function(i){var c=i.contentFunc();c.done(function(r){t.getView().profilingContent.addItem(r);});});d.resolve(t.getView());return d.promise();}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/UserProfiling.view',["sap/m/VBox"],function(V){"use strict";sap.ui.jsview("sap.ushell.components.shell.UserSettings.UserProfiling",{createContent:function(){this.profilingContent=new V().addStyleClass("sapUshellUserSettingDetailContent");return this.profilingContent;},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.UserProfiling";}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/UserSettings.controller',["sap/ui/core/mvc/Controller","sap/ui/Device","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/utils","sap/base/Log","sap/ui/thirdparty/jquery","sap/m/ObjectHeader","sap/m/library","sap/ui/core/IconPool","sap/m/Page","sap/m/Label","sap/m/Input","sap/m/StandardListItem","sap/m/Text","sap/m/FlexBox"],function(C,D,A,a,E,r,u,L,q,O,m,I,P,b,c,S,T,F){"use strict";var B=m.BackgroundDesign;var d;return C.extend("sap.ushell.components.shell.UserSettings",{onInit:function(){this.getView().byId("userSettingEntryList").addEventDelegate({onAfterRendering:this._listAfterRendering.bind(this)});this.getView().byId("userSettingsDialog").addEventDelegate({onkeydown:this._keyDown.bind(this)});var s=this.getView().byId("settingsApp");s.setMode(D.system.desktop?"StretchCompressMode":"ShowHideMode");s._oDetailNav.setAutoFocus(false);d=E.on("openUserSettings").do(this.openUserSettings.bind(this));},onExit:function(){d.off();},openUserSettings:function(){this.getView().byId("userSettingsDialog").open();},_afterClose:function(){sap.ushell.Container.getUser().resetChangedProperties();if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}},_createDetailPage:function(e,t,o){var f=new O({title:t,backgroundDesign:B.Solid}).addStyleClass("sapUshellUserSettingDetailHeader");if(e==="userAccountEntry"){var U=sap.ushell.Container.getUser();if(U.getImage()){f.setIcon(a.last("/core/shell/model/userImage/personPlaceHolder"));}else{f.setIcon(I.getIconURI("sap-icon://person-placeholder"));}U.attachOnSetImage(function(){var s=a.last("/core/shell/model/userImage/personPlaceHolder"),g=I.getIconURI("sap-icon://person-placeholder");f.setIcon(s||g);});f.setTitle(sap.ushell.Container.getUser().getFullName());}var p=new P("detail"+o.getId(),{content:[f,o],showHeader:false}).addStyleClass("sapUsheUserSettingDetaildPage");p.addEventDelegate({onAfterRendering:this._handleNavButton.bind(this)});this.getView().byId("settingsApp").addDetailPage(p);return p.getId();},_createEntryContent:function(e){var t=this;return new Promise(function(f){if(typeof e.contentFunc==="function"){e.contentFunc().always(function(g){if(g instanceof sap.ui.core.Control){f(t._createDetailPage(e.entryHelpID,e.title,g));}else{var h=new F(e.entryHelpID,{height:"5rem",alignItems:"Center",justifyContent:"Center",items:[new T({text:r.i18n.getText("loadingErrorMessage")})]});f(t._createDetailPage(e.entryHelpID,e.title,h));}});}else{var o;e.valueArgument().done(function(v){o=t._getKeyValueContent(e,v);}).fail(function(){o=t._getKeyValueContent(e);}).always(function(){f(t._createDetailPage(e.entryHelpID,e.title,o));});}});},_createListEntry:function(i,o){var e=o.getProperty(o.sPath);if(e.entryHelpID){i=e.entryHelpID+"-UserSettingsEntry";}return new S(i,{title:{path:"entries>title"},description:{path:"entries>valueResult"},icon:{parts:[{path:"entries>icon"},{path:"/userImage/account"}],formatter:this._getEntryIcon},visible:{parts:[{path:"entries>visible"},{path:"entries>defaultVisibility"},{path:"entries>title"}],formatter:this._getEntryVisible.bind(this)},type:D.system.phone?"Navigation":"Inactive"}).addStyleClass("sapUshellUserSettingMasterListItem");},_dialogCancelButtonHandler:function(){var e=this.getView().getModel("entries").getData().entries||[];for(var i=0;i<e.length;i++){if(e[i]&&e[i].onCancel){e[i].onCancel();}}this._handleSettingsDialogClose();},_emitEntryOpened:function(e){var U=E.last("UserSettingsOpened")||{},p=e.split("/").pop();U[p]=true;E.emit("UserSettingsOpened",U);},_getEntryIcon:function(e,U){if(e==="sap-icon://account"&&U){return U;}return e||"sap-icon://action-settings";},_getEntryVisible:function(v,e,t){if(t===r.i18n.getText("userProfiling")){var p=this.getView().getModel("entries").getProperty("/profiling")||[],U=sap.ushell.Container.getService("UsageAnalytics");for(var i=p.length-1;i>=0;i--){if(p[i].entryHelpID==="usageAnalytics"){if(!U.systemEnabled()||!U.isSetUsageAnalyticsPermitted()){p.splice(i,1);}}}return p&&p.length>0;}if(v!==undefined){return v;}if(e!==undefined){return e;}return true;},_getKeyValueContent:function(e,s){var k=new b({text:e.title+":"}).addStyleClass("sapUshellUserSettingsDetailsKey");var v=new c({value:s||" ",editable:false}).addStyleClass("sapUshellUserSettingsDetailsValue");var o=new F(e.entryHelpID,{alignItems:D.system.phone?"Start":"Center",wrap:D.system.phone?"Wrap":"NoWrap",direction:D.system.phone?"Column":"Row",items:[k,v]});return o;},_handleNavButton:function(){var s=this.getView().byId("settingsApp"),n=this.getView().byId("userSettingsNavBackButton");n.setVisible(!s.isMasterShown());},_handleSettingsDialogClose:function(){this.getView().byId("settingsApp").toMaster("sapFlpUserSettings-View--userSettingMaster");this.getView().byId("userSettingEntryList").removeSelections(true);this.getView().byId("userSettingsDialog").close();},_refreshBrowser:function(){document.location=document.location.href.replace(location.hash,"");},_handleSettingsSave:function(){var s=A.getElementsModel().getModel(),t=this;var i=s.getProperty("/userPreferences/isDetailedEntryMode");if(i){s.setProperty("/userPreferences/activeEntryPath",null);}u.saveUserPreferenceEntries(s.getProperty("/userPreferences/entries")).done(function(o){t._handleSettingsDialogClose();sap.ui.require(["sap/m/MessageToast"],function(M){var e=r.i18n.getText("savedChanges");M.show(e,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});if(o&&o.refresh){t._refreshBrowser();}}).fail(function(f){sap.ui.require(["sap/m/MessageBox"],function(M){var e;var g="";if(f.length===1){e=r.i18n.getText("savingEntryError")+" ";}else{e=r.i18n.getText("savingEntriesError")+"\n";}f.forEach(function(o){e+=o.entry+"\n";g+="Entry: "+o.entry+" - Error message: "+o.message+"\n";});M.show(e,{icon:M.Icon.ERROR,title:r.i18n.getText("error"),actions:[M.Action.OK]});L.error("Failed to save the following entries",g,"sap.ushell.ui.footerbar.UserPreferencesButton");});});},_itemPress:function(e){this._toDetail(e.getSource().getSelectedItem(),e.getId());},_keyDown:function(e){if(e.keyCode===27){this._dialogCancelButtonHandler();}},_listAfterRendering:function(){var M=this.getView().byId("userSettingEntryList");var e=M.getItems();for(var i=0;i<e.length;i++){var p=e[i].getBindingContext("entries").getPath();this._setEntryValueResult(p);}if(!D.system.phone){var f=M.getItems()[0];if(f){M.setSelectedItem(f);this._toDetail(f,"select");f.getDomRef().focus();}}},_navBackButtonPressHandler:function(e){var s=this.getView().byId("settingsApp");if(D.system.phone){s.backDetail();this._handleNavButton();e.getSource().setPressed(false);}else if(s.isMasterShown()){s.hideMaster();e.getSource().setTooltip(r.i18n.getText("ToggleButtonShow"));e.getSource().setPressed(false);}else{s.showMaster();e.getSource().setTooltip(r.i18n.getText("ToggleButtonHide"));e.getSource().setPressed(true);}},_navToDetail:function(i,e,s){var o=this.getView().byId("settingsApp");o.toDetail(i);E.emit("UserPreferencesDetailNavigated",i);if(e==="select"&&!D.system.phone){var f=q(document.getElementById(i)).firstFocusableDomRef();if(f){f.focus();}}if(o.getMode()==="ShowHideMode"){o.hideMaster();}this._handleNavButton();this._emitEntryOpened(s);},_setEntryValueResult:function(e){var M=this.getView().getModel("entries"),i=M.getProperty(e+"/editable"),v=M.getProperty(e+"/valueArgument"),V=M.getProperty(e+"/visible"),f=M.getProperty(e+"/defaultVisibility");if(typeof v==="function"){M.setProperty(e+"/valueResult",r.i18n.getText("genericLoading"));M.setProperty(e+"/editable",false);v().done(function(g){M.setProperty(e+"/editable",i);var h=true;if(g&&g.value!==undefined){h=!!g.value;}else if(V!==undefined){h=V;}else if(f!==undefined){h=f;}var s=" ";if(g!==undefined){if(typeof(g)==="object"){s=g.displayText;}else{s=g;}}M.setProperty(e+"/visible",h);M.setProperty(e+"/valueResult",s);}).fail(function(){M.setProperty(e+"/valueResult",r.i18n.getText("loadingErrorMessage"));});}else if(v){M.setProperty(e+"/valueResult",v);}else{M.setProperty(e+"/valueResult",r.i18n.getText("loadingErrorMessage"));}},_toDetail:function(s,e){var M=this.getView().getModel("entries"),f=s.getBindingContext("entries").getPath(),g=M.getProperty(f+"/contentResult");if(D.system.phone){s.setSelected(false);}if(g){this._navToDetail(g,e,f);}else{var t=this,o=M.getProperty(f);this._createEntryContent(o).then(function(n){M.setProperty(f+"/contentResult",n);t._navToDetail(n,e,f);});}}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/userAccount/UserAccountSelector.controller',["sap/ushell/ui/launchpad/AccessibilityCustomData","sap/base/Log","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/m/Switch","sap/m/library","sap/ui/model/json/JSONModel","sap/ui/core/theming/Parameters","sap/ui/Device"],function(A,L,q,r,S,m,J,P,D){"use strict";var a=m.SwitchType;sap.ui.controller("sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector",{onInit:function(){var s=sap.ushell.Container.getRenderer("fiori2").getShellController();var o=s.getView();this.oShellConfig=(o.getViewData()?o.getViewData().config:{})||{};this.imgConsentEnabled=this.oShellConfig.enableUserImgConsent?this.oShellConfig.enableUserImgConsent:false;if(this.imgConsentEnabled){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){L.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.currentUserImgConsent=this.oUser.getImageConsent();this.origUserImgConsent=this.currentUserImgConsent;this.addImgConsentEnableSwitch(this.currentUserImgConsent);}},getContent:function(){var d=q.Deferred();var R=r.getTranslationModel();this.getView().setModel(R,"i18n");this.getView().setModel(this.getConfigurationModel(),"config");d.resolve(this.getView());return d.promise();},getValue:function(){var d=q.Deferred();d.resolve(sap.ushell.Container.getUser().getFullName());return d.promise();},onCancel:function(){if(this.imgConsentEnabled){this.currentUserImgConsent=this.oUser.getImageConsent();this.oUserEnableImgConsentSwitch.setState(this.currentUserImgConsent);}},onSave:function(){var R=q.Deferred(),w,u,p=[];if(this.imgConsentEnabled){u=this.onSaveUserImgConsent();p.push(u);}w=q.when.apply(null,p);w.done(function(){R.resolve();});return R.promise();},onSaveUserImgConsent:function(){var d=q.Deferred();var u;if(this.oUser.getImageConsent()!==this.currentUserImgConsent){if(this.currentUserImgConsent!==undefined){this.oUser.setImageConsent(this.currentUserImgConsent);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.oUser.resetChangedProperty("isImageConsent");this.origUserImgConsent=this.currentUserImgConsent;d.resolve();}.bind(this));u.fail(function(e){this.oUser.setImageConsent(this.origUserImgConsent);this.oUser.resetChangedProperty("isImageConsent");this.currentUserImgConsent=this.origUserImgConsent;L.error(e);d.reject(e);}.bind(this));}else{d.reject(this.currentUserImgConsent+"is undefined");}}else{d.resolve();}return d.promise();},getConfigurationModel:function(){var c=new J({});var u=sap.ushell.Container.getUser();c.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),sapUiContentIconColor:P.get("sapUiContentIconColor"),isStatusEnable:this.originalEnableStatus?this.originalEnableStatus:false,flexAlignItems:D.system.phone?"Stretch":"Center",textAlign:D.system.phone?"Left":"Right",textDirection:D.system.phone?"Column":"Row",labelWidth:D.system.phone?"auto":"12rem",name:u.getFullName(),mail:u.getEmail(),server:window.location.host,imgConsentEnabled:this.imgConsentEnabled,isImageConsent:this.currentUserImgConsent});return c;},_getUserSettingsPersonalizer:function(){if(this.oUserPersonalizer===undefined){this.oUserPersonalizer=this._createUserPersonalizer();}return this.oUserPersonalizer;},_createUserPersonalizer:function(){var p=sap.ushell.Container.getService("Personalization"),c,s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true},o=p.getPersonalizer(s,c);return o;},addImgConsentEnableSwitch:function(e){var u=sap.ui.getCore().byId("UserAccountSelector--userImgConsentEnableFlexBox");this.oUserEnableImgConsentSwitch=new S({customTextOff:r.i18n.getText("No"),customTextOn:r.i18n.getText("Yes"),type:a.Default,state:e,change:this.setCurrentUserImgConsent.bind(this)});this.oUserEnableImgConsentSwitch.addCustomData(new A({key:"aria-labelledBy",value:"UserAccountSelector--sapUshellUserImageConsentSwitchLabel",writeToDom:true}));if(!u){L.error("UserAccountSelector: addImgConsentEnableSwitch was called before the renderer");return;}u.addItem(this.oUserEnableImgConsentSwitch);},setCurrentUserImgConsent:function(e){this.currentUserImgConsent=e.mParameters.state;},termsOfUserPress:function(){var t=sap.ui.getCore().byId("UserAccountSelector--termsOfUseTextFlexBox");var b=sap.ui.getCore().byId("UserAccountSelector--termsOfUseLink");var i=t.getVisible();if(i){t.setVisible(false);b.setText(r.i18n.getText("userImageConsentDialogShowTermsOfUse"));}else{b.setText(r.i18n.getText("userImageConsentDialogHideTermsOfUse"));t.setVisible(true);}}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/userAccount/UserAccountSelector.view',["sap/ui/thirdparty/jquery","sap/m/VBox","sap/m/FlexBox","sap/m/Input","sap/m/Label","sap/ui/Device","sap/ushell/resources"],function(q,V,F,I,L,D,r){"use strict";sap.ui.jsview("sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector",{createContent:function(){var i=r.i18n;var f=D.system.phone?"Column":"Row";var s=D.system.phone?"Stretch":"Center";var t=D.system.phone?"Left":"Right";var l=D.system.phone?"auto":"12rem";var n=new L({text:i.getText("UserAccountNameFld")+":",width:l,textAlign:t});var a=new I("userAccountuserName",{value:"{/name}",editable:false}).addAriaLabelledBy(n);a.addEventDelegate({onfocusin:function(){q("#userAccountuserName input").blur();}});var b=new F({alignItems:s,direction:f,items:[n,a]});var e=new L({text:i.getText("UserAccountEmailFld")+":",width:l,textAlign:t});var c=new F({alignItems:s,direction:f,items:[e,new I({value:"{/mail}",editable:false}).addAriaLabelledBy(e)]});var d=new L({text:i.getText("UserAccountServerFld")+":",width:l,textAlign:t});var g=new F({alignItems:s,direction:f,items:[d,new I({value:"{/server}",editable:false}).addAriaLabelledBy(d)]});var v=new V({items:[b,c,g]});v.addStyleClass("sapUiSmallMargin");return v;},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector";}});},true);
sap.ui.predefine('sap/ushell/components/shell/UserSettings/userActivitiesHandler.controller',["sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/Component","sap/ushell/resources"],function(A,C,q,L,a,r){"use strict";sap.ui.controller("sap.ushell.components.shell.UserSettings.userActivitiesHandler",{onInit:function(){this.oModel=A.getElementsModel().getModel();this.isTrackingEnable=this.oModel.getProperty("/enableTrackingActivity")!==undefined?this.oModel.getProperty("/enableTrackingActivity"):true;this.currentTrackingMode=this.isTrackingEnable;this.oView.trackUserActivitySwitch.setState(this.isTrackingEnable);},getContent:function(){var d=q.Deferred();d.resolve(this.getView());return d.promise();},getValue:function(){return q.Deferred().resolve(" ");},onCancel:function(){var d=q.Deferred();if(this.currentTrackingMode!==this.isTrackingEnable){this.isTrackingEnable=!this.isTrackingEnable;this.oView.trackUserActivitySwitch.setState(this.isTrackingEnable);}d.resolve();return d.promise();},onSave:function(){var d=q.Deferred();if(this.currentTrackingMode!==this.isTrackingEnable){this.oModel.setProperty("/enableTrackingActivity",this.isTrackingEnable);this.writeUserActivityModeToPersonalization(this.isTrackingEnable);this.currentTrackingMode=this.isTrackingEnable;C.emit("/core/shell/model/enableTrackingActivity",this.isTrackingEnable);}d.resolve();return d.promise();},writeUserActivityModeToPersonalization:function(i){var d,p;try{p=this._getPersonalizer().setPersData(i);}catch(e){L.error("Personalization service does not work:");L.error(e.name+": "+e.message);d=new q.Deferred();d.reject(e);p=d.promise();}return p;},_getPersonalizer:function(){var p=sap.ushell.Container.getService("Personalization"),c=a.getOwnerComponentFor(this),s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true},P={container:"flp.settings.FlpSettings",item:"userActivitesTracking"};return p.getPersonalizer(P,s,c);},_handleCleanHistory:function(){sap.ushell.Container.getServiceAsync("UserRecents").then(function(s){s.clearRecentActivities();b();function b(){sap.ui.require(["sap/m/MessageToast"],function(M){var m=r.i18n.getText("savedChanges");M.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});}});},_handleTrackUserActivitySwitch:function(i){this.isTrackingEnable=i;}});});
sap.ui.predefine('sap/ushell/components/shell/UserSettings/userActivitiesHandler.view',["sap/m/VBox","sap/m/Button","sap/m/FlexBox","sap/m/library","sap/m/Switch","sap/m/Label","sap/ui/Device","sap/ushell/resources"],function(V,B,F,m,S,L,D,r){"use strict";var a=m.SwitchType;sap.ui.jsview("sap.ushell.components.shell.UserSettings.userActivitiesHandler",{createContent:function(c){var i=r.i18n;var f=D.system.phone?"Column":"Row";var s=D.system.phone?"Stretch":"Center";var t=D.system.phone?"Left":"Right";var C="cleanActivityButton";this.trackingLabel=new L("trackingLabel",{text:i.getText("trackingLabel"),textAlign:t}).addStyleClass("sapUshellCleanActivityLabel");this.trackUserActivitySwitch=new S("trackUserActivitySwitch",{type:a.Default,customTextOn:i.getText("Yes"),customTextOff:i.getText("No"),change:function(e){c._handleTrackUserActivitySwitch(e.getParameter("state"));}}).addAriaLabelledBy(this.trackingLabel);var T=new F({alignItems:s,direction:f,items:[this.trackingLabel,this.trackUserActivitySwitch]});this.cleanActivityLabel=new L("cleanActivityLabel",{text:i.getText("cleanActivityLabel"),textAlign:t,labelFor:C}).addStyleClass("sapUshellCleanActivityLabel");this.cleanActivityButton=new B({id:"cleanActivityButton",text:i.getText("cleanActivityButton"),press:c._handleCleanHistory}).addAriaLabelledBy(this.cleanActivityLabel);var b=new F({alignItems:s,direction:f,items:[this.cleanActivityLabel,this.cleanActivityButton]});var v=new V({items:[T,b]});v.addStyleClass("sapUiSmallMargin");return v;},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.userActivitiesHandler";}});});
sap.ui.predefine('sap/ushell/components/tiles/action/ActionTile.controller',["sap/ushell/components/tiles/utils","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log"],function(u,J,q,L){"use strict";sap.ui.getCore().loadLibrary("sap.m");sap.ui.controller("sap.ushell.components.tiles.action.ActionTile",{onInit:function(){var v=this.getView();var V=v.getViewData();var r=u.getResourceBundleModel();var t=V.chip;var c=u.getActionConfiguration(t);var m;var a=this;function f(s,S){var b=r.getResourceBundle(),R=b.getText("configuration.semantic_object")+":\n"+s+"\n\n"+b.getText("configuration.semantic_action")+":\n"+S;return R;}v.setModel(r,"i18n");m=new J({config:c,displayText:f(c.semantic_object,c.semantic_action)});v.setModel(m);if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var C=u.getConfigurationUi(a.getView(),"sap.ushell.components.tiles.action.Configuration");t.configurationUi.attachCancel(this.onCancelConfiguration.bind(null,C));t.configurationUi.attachSave(this.onSaveConfiguration.bind(this,C,f));return C;}.bind(this));v.byId("actionTile").setTooltip(r.getResourceBundle().getText("edit_configuration.tooltip"));}},onPress:function(e){var t=this.getView().getViewData().chip;if(t.configurationUi.isEnabled()){t.configurationUi.display();}},onSaveConfiguration:function(c,f){var d=q.Deferred(),m=c.getModel(),t=m.getProperty("/tileModel"),T=c.getViewData().chip;function l(E){L.warning(E,null,"sap.ushell.components.tiles.action.ActionTile.controller");d.reject(E);}var r=u.checkTMInputOnSaveConfig(c);if(r){d.reject("mandatory_fields_missing");return d.promise();}var b=u.getResourceBundleModel().getResourceBundle();if(u.tableHasDuplicateParameterNames(m.getProperty("/config/rows"))){d.reject(b.getText("configuration.signature.uniqueParamMessage.text"));}else if(!u.tableHasInvalidSapPrelaunchOperationValue(m.getProperty("/config/rows"))){var s=JSON.stringify([{"type":"split","source":"p1","target":["p2","p3"]},{"type":"merge","source":["p4","p5"],"target":"p6"}]);d.reject(b.getText("configuration.signature.invalidSapPrelaunchOperationsMessage.text",[s]));}else{var F=m.getProperty("/config/formFactorConfigDefault")?undefined:u.buildFormFactorsObject(m);var M=u.getMappingSignatureString(m.getProperty("/config/rows"),m.getProperty("/config/isUnknownAllowed"));var o=u.getMappingSignature(m.getProperty("/config/rows"),m.getProperty("/config/isUnknownAllowed"));var a={semantic_object:q.trim(m.getProperty("/config/semantic_object"))||"",semantic_action:q.trim(m.getProperty("/config/semantic_action"))||"",display_title_text:q.trim(m.getProperty("/config/display_title_text"))||"",url:q.trim(m.getProperty("/config/url"))||"",ui5_component:q.trim(m.getProperty("/config/ui5_component"))||"",navigation_provider:q.trim(m.getProperty("/config/navigation_provider")),navigation_provider_role:q.trim(m.getProperty("/config/navigation_provider_role"))||"",navigation_provider_instance:q.trim(m.getProperty("/config/navigation_provider_instance"))||"",target_application_id:q.trim(m.getProperty("/config/target_application_id"))||"",target_application_alias:q.trim(m.getProperty("/config/target_application_alias"))||"",transaction:{code:q.trim(m.getProperty("/config/transaction/code"))},web_dynpro:{application:q.trim(m.getProperty("/config/web_dynpro/application")),configuration:q.trim(m.getProperty("/config/web_dynpro/configuration"))},target_system_alias:q.trim(m.getProperty("/config/target_system_alias")),display_info_text:q.trim(m.getProperty("/config/display_info_text")),form_factors:F,mapping_signature:M,signature:o};var e=T.bag.getBag("tileProperties");e.setText("display_title_text",a.display_title_text);T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(a)},function(){var C=u.getActionConfiguration(T,false);var g=u.getActionConfiguration(T,true);m=new J({config:C,tileModel:t});c.setModel(m);t.setData({config:g,displayText:f(g.semantic_object,g.semantic_action)},false);e.save(function(){L.debug("property bag 'tileProperties' saved successfully");d.resolve();},l);},l);}return d.promise();},onCancelConfiguration:function(c){var v=c.getViewData();var m=c.getModel();var t=m.getProperty("/tileModel");var T=v.chip;var C=u.getActionConfiguration(T,false);c.getModel().setData({config:C,tileModel:t},false);}});},true);
sap.ui.predefine('sap/ushell/components/tiles/action/Configuration.controller',["sap/ushell/components/tiles/utils","sap/ui/core/library","sap/m/MessageBox"],function(u,c,M){"use strict";var V=c.ValueState;sap.ui.controller("sap.ushell.components.tiles.action.Configuration",{sEnterValuePlaceHolder:"",sDuplicateErrorMsg:"",sDuplicateErrorTitle:"",sInvalidParmMsg:"",aDefaultObjects:[{obj:"",name:""},{obj:"*",name:"*"}],onConfigurationInputChange:function(C){u.checkTMInput(this.getView(),C);},onInit:function(){var v=this.getView();var s=v.byId("semantic_objectInput");var r=v.byId("navigation_provider_roleInput");var i=v.byId("navigation_provider_instanceInput");var a=v.byId("target_application_aliasInput");var A=v.byId("semantic_actionInput");var t=v.byId("targetTypeInput");var R=u.getResourceBundleModel();v.setModel(R,"i18n");v.setViewName("sap.ushell.components.tiles.action.Configuration");u.createSemanticObjectModel(this,s,this.aDefaultObjects);u.createRoleModel(this,r,i);u.createAliasModel(this,a);u.createActionModel(this,A);u.createNavigationProviderModel(this,t);s.attachChange(function(C){var d=C.getSource().getValue();v.getModel().setProperty("/config/semantic_object",d);});r.attachChange(function(C){var d=C.getSource().getValue();v.getModel().setProperty("/config/navigation_provider_role",d);u.updateAliasModel(v,a);});i.attachChange(function(C){var d=C.getSource().getValue();v.getModel().setProperty("/config/navigation_provider_instance",d);});a.attachChange(function(C){var d=C.getSource().getValue();v.getModel().setProperty("/config/target_application_alias",d);});var b=R.getResourceBundle();this.sEnterValuePlaceHolder=b.getText("configuration.signature.table.valueFieldLbl");this.sDuplicateErrorMsg=b.getText("configuration.signature.uniqueParamMessage.text");this.sDuplicateErrorTitle=b.getText("configuration.signature.uniqueParamMessage.title");this.sInvalidParmMsg=b.getText("configuration.signature.invalidParamMessage.text");},handleMandatoryChange:function(m){var i=m.getParameter("id");var p=sap.ui.getCore().byId(i).getParent().getCells();var I=m.getParameter("checked");if(I){p[2].setEnabled(true);p[2].setPlaceholder(this.sEnterValuePlaceHolder);p[4].setEnabled(false);p[4].setValue("");p[4].setPlaceholder("");p[3].setEnabled(true);}else{p[2].setEnabled(false);p[2].setValue("");p[2].setPlaceholder("");p[4].setEnabled(true);p[4].setPlaceholder(this.sEnterValuePlaceHolder);p[3].setEnabled(false);p[3].setChecked(false);}},addRow:function(){var v=this.getView();var m=v.getModel();var r=m.getProperty("/config/rows");var n=u.getEmptyRowObj();r.push(n);m.setProperty("/config/rows",r);},deleteRow:function(){var v=this.getView();var m=v.getModel();var r=m.getProperty("/config/rows");var t=v.byId("mappingSignatureTable");var s=t.getSelectedIndices();var S=s.sort(function(a,b){return b-a;}).slice();for(var i=0;i<S.length;i++){t.removeSelectionInterval(S[i],S[i]);r.splice(S[i],1);}m.setProperty("/config/rows",r);},checkDuplicateNames:function(a){var m=this.getView().getModel();var r=m.getProperty("/config/rows");var n=sap.ui.getCore().byId(a.getParameter("id"));var N=a.getParameter("newValue");if(N!=""&&!(/^[\w-/]+$/.test(N))){n.setValueState(V.Error);M.alert(this.sInvalidParmMsg,this.focusNameField.bind(n),this.sDuplicateErrorTitle);}if(u.tableHasDuplicateParameterNames(r)){n.setValueState(V.Error);M.alert(this.sDuplicateErrorMsg,this.focusNameField.bind(n),this.sDuplicateErrorTitle);}else{n.setValueState(V.None);}},focusNameField:function(){this.focus();},onValueHelpRequest:function(e){u.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){u.actionSelectOnValueHelpRequest(this,e);},onRoleValueHelpRequest:function(e){u.roleSelectOnValueHelpRequest(this,e);},onInstanceValueHelpRequest:function(e){u.instanceSelectOnValueHelpRequest(this,e);},instanceSuggest:function(e){u.instanceSuggest(this,e);},aliasSuggest:function(e){u.aliasSuggest(this,e);},onAliasValueHelpRequest:function(e){u.applicationAliasSelectOnValueHelpRequest(this,e);},onFormFactorChange:function(){var m=this.getView().getModel();m.setProperty("/config/formFactorConfigDefault",false);},onApplicationTypeChange:function(e){var p=e.getParameters();if(p.selectedItem){u.displayApplicationTypeFields(p.selectedItem.getKey(),this.getView());}}});},true);
sap.ui.predefine('sap/ushell/components/tiles/applauncher/Configuration.controller',["sap/ushell/components/tiles/utils","sap/ui/core/ListItem"],function(u,L){"use strict";sap.ui.controller("sap.ushell.components.tiles.applauncher.Configuration",{onConfigurationInputChange:function(c){u.checkInput(this.getView(),c);},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),t=v.byId("targetUrl"),s=v.byId("navigation_semantic_objectInput"),a=v.byId("navigation_semantic_actionInput"),r=u.getResourceBundleModel();v.setModel(r,"i18n");var b=r.getResourceBundle();v.setViewName("sap.ushell.components.tiles.applauncher.Configuration");u.createSemanticObjectModel(this,s,this.aDefaultObjects);u.createActionModel(this,a);s.attachChange(function(C){var V=C.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V);});function c(U){return!U;}t.bindProperty("enabled",{formatter:c,path:"/config/navigation_use_semantic_object"});var i=new L({key:"URL",text:b.getText("configuration.tile_actions.table.target_type.url")});v.byId("targetTypeCB").addItem(i);i=new L({key:"INT",text:b.getText("configuration.tile_actions.table.target_type.intent")});v.byId("targetTypeCB").addItem(i);},onAfterRendering:function(){u.updateMessageStripForOriginalLanguage(this.getView());},onValueHelpRequest:function(e){u.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){u.actionSelectOnValueHelpRequest(this,e,false);},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a);u.checkInput(this.getView(),e);},onIconValueHelpRequest:function(e){u.iconSelectOnValueHelpRequest(this,e,false);},onSelectIconClose:function(){u.onSelectIconClose(this.getView());},onSelectIconOk:function(){u.onSelectIconOk(this.getView());},handleTargetTypeChange:function(t){u.onTargetTypeChange(t);},onTileActionValueHelp:function(e){u.objectSelectOnValueHelpRequest(this,e,true);},onTileActionIconValueHelp:function(e){u.iconSelectOnValueHelpRequest(this,e,true);},addRow:function(){u.addTileActionsRow(this.getView());},deleteRow:function(){u.deleteTileActionsRow(this.getView());}});},true);
sap.ui.predefine('sap/ushell/components/tiles/applauncher/StaticTile.controller',["sap/ushell/components/tiles/utils","sap/ushell/components/tiles/utilsRT","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/services/AppType","sap/m/library","sap/ui/model/json/JSONModel","sap/base/Log","sap/ui/thirdparty/jquery"],function(u,a,A,C,b,l,J,L,q){"use strict";var G=l.GenericTileScope;var c=l.GenericTileMode;sap.ui.getCore().loadLibrary("sap.m");sap.ui.controller("sap.ushell.components.tiles.applauncher.StaticTile",{_aDoableObject:{},onInit:function(){var s=this.getView(),v=s.getViewData(),t=v.chip,o=a.getConfiguration(t,t.configurationUi.isEnabled(),false),m,k,K,d=this,N=o.navigation_target_url,S,U,h;this.oShellModel=A.getElementsModel();S=t.url.getApplicationSystem();if(S){U=sap.ushell.Container.getService("URLParsing");if(U.isIntentUrl(N)){h=U.parseShellHash(N);if(!h.params){h.params={};}h.params["sap-system"]=S;N="#"+U.constructShellHash(h);}else{N+=((N.indexOf("?")<0)?"?":"&")+"sap-system="+S;}}this.navigationTargetUrl=N;m=new J({sizeBehavior:C.last("/core/home/sizeBehavior"),wrappingType:C.last("/core/home/wrappingType"),mode:o.display_mode,config:o,nav:{navigation_target_url:(t.configurationUi&&t.configurationUi.isEnabled()?"":N)},search:{display_highlight_terms:[]}});s.setModel(m);this._aDoableObject=C.on("/core/home/sizeBehavior").do(function(g){m.setProperty("/sizeBehavior",g);});if(t.types){t.types.attachSetType(function(T){if(d.tileType!=T){var m=d.getView().getModel();if(T==="link"){m.setProperty("/mode",c.LineMode);}else{m.setProperty("/mode",m.getProperty("/config/display_mode"));}d.tileType=T;}});}if(!this.tileType){this.tileType="tile";}if(t.search){k=s.getModel().getProperty("/config/display_search_keywords");K=k.split(/[, ]+/).filter(function(n){return n&&n!=="";});if(o.display_title_text&&o.display_title_text!==""&&K.indexOf(o.display_title_text)===-1){K.push(o.display_title_text);}if(o.display_subtitle_text&&o.display_subtitle_text!==""&&K.indexOf(o.display_subtitle_text)===-1){K.push(o.display_subtitle_text);}if(o.display_info_text&&o.display_info_text!==""&&K.indexOf(o.display_info_text)===-1){K.push(o.display_info_text);}t.search.setKeywords(K);t.search.attachHighlight(function(H){s.getModel().setProperty("/search/display_highlight_terms",H);});}if(t.bag&&t.bag.attachBagsUpdated){t.bag.attachBagsUpdated(function(g){if(g.indexOf("tileProperties")>-1){u._updateTilePropertiesTexts(s,t.bag.getBag("tileProperties"));}});}if(t.configuration&&t.configuration.attachConfigurationUpdated){t.configuration.attachConfigurationUpdated(function(g){if(g.indexOf("tileConfiguration")>-1){u._updateTileConfiguration(s,t.configuration.getParameterValueAsString("tileConfiguration"));}});}if(t.preview){t.preview.setTargetUrl(N);t.preview.setPreviewIcon(o.display_icon_url);t.preview.setPreviewTitle(o.display_title_text);if(t.preview.setPreviewSubtitle&&typeof t.preview.setPreviewSubtitle==="function"){t.preview.setPreviewSubtitle(o.display_subtitle_text);}}if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var g=u.getConfigurationUi(s,"sap.ushell.components.tiles.applauncher.Configuration");t.configurationUi.attachCancel(d.onCancelConfiguration.bind(null,g));t.configurationUi.attachSave(d.onSaveConfiguration.bind(null,g));return g;});this.getView().getContent()[0].setTooltip(u.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}if(t.actions){var e=o.actions,E;if(e){E=e.slice();}else{E=[];}var T=m.getProperty("/mode")===c.LineMode?"link":"tile",f=a.getTileSettingsAction(m,this.onSaveRuntimeSettings.bind(this),T);E.push(f);t.actions.setActionsProvider(function(){return E;});}},onExit:function(){this._aDoableObject.off();},onPress:function(e){var s=this.getView(),v=s.getViewData(),t=v.chip,T=s.getModel().getProperty("/config");if(e.getSource().getScope&&e.getSource().getScope()===G.Display){if(t.configurationUi.isEnabled()){t.configurationUi.display();}else if(this.navigationTargetUrl){if(this.navigationTargetUrl[0]==="#"){hasher.setHash(this.navigationTargetUrl);}else{var d=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(d){var r={title:T.display_title_text,appType:b.URL,url:T.navigation_target_url,appId:T.navigation_target_url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}window.open(this.navigationTargetUrl,"_blank");}}}},onSaveRuntimeSettings:function(s){var v=s.getModel(),t=this.getView().getViewData().chip,o=this.getView().getModel().getProperty("/config");o.display_title_text=v.getProperty("/title");o.display_subtitle_text=v.getProperty("/subtitle");o.display_info_text=v.getProperty("/info");o.display_search_keywords=v.getProperty("/keywords");var d=t.bag.getBag("tileProperties");d.setText("display_title_text",o.display_title_text);d.setText("display_subtitle_text",o.display_subtitle_text);d.setText("display_info_text",o.display_info_text);d.setText("display_search_keywords",o.display_search_keywords);function e(E){L.error(E,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");}d.save(function(){L.debug("property bag 'tileProperties' saved successfully");this.getView().getModel().setProperty("/config/display_title_text",o.display_title_text);this.getView().getModel().setProperty("/config/display_subtitle_text",o.display_subtitle_text);this.getView().getModel().setProperty("/config/display_info_text",o.display_info_text);this.getView().getModel().setProperty("/config/display_search_keywords",o.display_search_keywords);this.getView().getModel().refresh();}.bind(this),e);},onSaveConfiguration:function(o){var d=q.Deferred();var m=o.getModel();var t=m.getProperty("/tileModel");var T=o.getViewData().chip;var e=u.tileActionsRows2TileActionsArray(m.getProperty("/config/tile_actions_rows"));var f={display_icon_url:m.getProperty("/config/display_icon_url"),navigation_use_semantic_object:m.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:m.getProperty("/config/navigation_target_url"),navigation_semantic_object:q.trim(m.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:q.trim(m.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:q.trim(m.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:m.getProperty("/config/display_search_keywords")};var r=u.checkInputOnSaveConfig(o);if(!r){r=u.checkTileActions(o);}if(r){d.reject("mandatory_fields_missing");return d.promise();}if(f.navigation_use_semantic_object){f.navigation_target_url=a.getSemanticNavigationUrl(f);m.setProperty("/config/navigation_target_url",f.navigation_target_url);}var g=T.bag.getBag("tileProperties");g.setText("display_title_text",m.getProperty("/config/display_title_text"));g.setText("display_subtitle_text",m.getProperty("/config/display_subtitle_text"));g.setText("display_info_text",m.getProperty("/config/display_info_text"));g.setText("display_search_keywords",f.display_search_keywords);var h=T.bag.getBag("tileNavigationActions");u.populateTileNavigationActionsBag(h,e);function i(E,j){L.error(E,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");d.reject(E,j);}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(f)},function(){var j=a.getConfiguration(T,false,false),k=a.getConfiguration(T,true,false),m=new J({config:j,nav:{navigation_target_url:""},tileModel:t});o.setModel(m);t.setData({config:k,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(j.navigation_target_url);T.preview.setPreviewIcon(j.display_icon_url);T.preview.setPreviewTitle(j.display_title_text);if(T.preview.setPreviewSubtitle&&typeof T.preview.setPreviewSubtitle==="function"){T.preview.setPreviewSubtitle(j.display_subtitle_text);}}g.save(function(){L.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(j.display_title_text,function(){d.resolve();},i);}else{d.resolve();}},i);h.save(function(){L.debug("property bag 'navigationProperties' saved successfully");},i);},i);return d.promise();},onCancelConfiguration:function(o){var v=o.getViewData(),m=o.getModel(),t=m.getProperty("/tileModel"),T=v.chip,d=a.getConfiguration(T,T.configurationUi.isEnabled(),false);o.getModel().setData({config:d,nav:{navigation_target_url:""},tileModel:t},false);}});},false);
sap.ui.predefine('sap/ushell/components/tiles/applauncher/StaticTile.view',["sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent"],function(G,I,T){"use strict";sap.ui.jsview("sap.ushell.components.tiles.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncher.StaticTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");return this.getTileControl();},getTileControl:function(){var c=this.getController();return new G({mode:"{= ${/mode} || (${/config/display_icon_url} ? 'ContentMode' : 'HeaderMode') }",header:"{/config/display_title_text}",subheader:"{/config/display_subtitle_text}",sizeBehavior:"{/sizeBehavior}",wrappingType:"{/wrappingType}",size:"Auto",tileContent:new T({size:"Auto",footer:"{/config/display_info_text}",content:new I({src:"{/config/display_icon_url}"})}),press:[c.onPress,c]});},getMode:function(){return this.getModel().getProperty("/mode")||(this.getModel().getProperty("/config/display_icon_url")?"ContentMode":"HeaderMode");}});});
sap.ui.predefine('sap/ushell/components/tiles/applauncherdynamic/Configuration.controller',["sap/ushell/components/tiles/utils","sap/ui/core/ListItem"],function(u,L){"use strict";sap.ui.controller("sap.ushell.components.tiles.applauncherdynamic.Configuration",{onConfigurationInputChange:function(c){u.checkInput(this.getView(),c);},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),a=v.byId("navigation_semantic_actionInput"),r=u.getResourceBundleModel();v.setModel(r,"i18n");var b=r.getResourceBundle();v.setViewName("sap.ushell.components.tiles.applauncherdynamic.Configuration");u.createSemanticObjectModel(this,s,this.aDefaultObjects);u.createActionModel(this,a,this.aDefaultObjects);s.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V);});a.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_action",V);});v.byId("targetUrl").bindProperty("enabled",{formatter:function(U){return!U;},path:"/config/navigation_use_semantic_object"});var i=new L({key:"URL",text:b.getText("configuration.tile_actions.table.target_type.url")});v.byId("targetTypeCB").addItem(i);i=new L({key:"INT",text:b.getText("configuration.tile_actions.table.target_type.intent")});v.byId("targetTypeCB").addItem(i);},onAfterRendering:function(){u.updateMessageStripForOriginalLanguage(this.getView());},onValueHelpRequest:function(e){u.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){u.actionSelectOnValueHelpRequest(this,e,false);},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a);u.checkInput(this.getView(),e);},onIconValueHelpRequest:function(e){u.iconSelectOnValueHelpRequest(this,e,false);},onSelectIconClose:function(){u.onSelectIconClose(this.getView());},onSelectIconOk:function(){u.onSelectIconOk(this.getView());},handleTargetTypeChange:function(t){u.onTargetTypeChange(t);},onTileActionValueHelp:function(e){u.objectSelectOnValueHelpRequest(this,e,true);},onTileActionIconValueHelp:function(e){u.iconSelectOnValueHelpRequest(this,e,true);},addRow:function(){u.addTileActionsRow(this.getView());},deleteRow:function(){u.deleteTileActionsRow(this.getView());}});},true);
sap.ui.predefine('sap/ushell/components/tiles/applauncherdynamic/DynamicTile.controller',["sap/ui/thirdparty/datajs","sap/ui/thirdparty/URI","sap/ushell/components/tiles/utils","sap/ushell/components/tiles/utilsRT","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/services/AppType","sap/m/library","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/util/UriParameters"],function(O,U,u,a,A,C,b,l,J,q,c){"use strict";var G=l.GenericTileScope;var d=l.GenericTileMode;sap.ui.getCore().loadLibrary("sap.m");sap.ui.controller("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{timer:null,_aDoableObject:{},oDataRequest:null,sConfigNavigationTargetUrlOld:"",REFRESH_INTERVAL_MIN:10,constructTargetUrlWithSapSystem:function(n,s){var o,h;if(s){o=sap.ushell.Container.getService("URLParsing");if(o.isIntentUrl(n)){h=o.parseShellHash(n);if(!h.params){h.params={};}h.params["sap-system"]=s;n="#"+o.constructShellHash(h);}else{n+=((n.indexOf("?")<0)?"?":"&")+"sap-system="+s;}}return n;},onInit:function(){var v=this.getView(),V=v.getViewData(),t=V.chip,o=a.getConfiguration(t,t.configurationUi.isEnabled(),false),m,k,K,e=this,N=o.navigation_target_url,s;this.sConfigNavigationTargetUrlOld=o.navigation_target_url;q.sap.log.setLevel(2,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile");this.bIsRequestCompleted=false;this.oShellModel=A.getElementsModel();s=t.url.getApplicationSystem();this.navigationTargetUrl=this.constructTargetUrlWithSapSystem(N,s);m=new J({sizeBehavior:C.last("/core/home/sizeBehavior"),wrappingType:C.last("/core/home/wrappingType"),config:o,mode:o.display_mode||d.ContentMode,data:a.getDataToDisplay(o,{number:((t.preview&&t.preview.isEnabled())?1234:"...")}),nav:{navigation_target_url:(t.configurationUi&&t.configurationUi.isEnabled()?"":this.navigationTargetUrl)},search:{display_highlight_terms:[]}});v.setModel(m);this._aDoableObject=C.on("/core/home/sizeBehavior").do(function(S){m.setProperty("/sizeBehavior",S);});if(t.types){t.types.attachSetType(function(T){if(e.tileType!=T){var m=e.getView().getModel();if(T==="link"){m.setProperty("/mode",d.LineMode);}else{m.setProperty("/mode",m.getProperty("/config/display_mode")||d.ContentMode);}e.tileType=T;}});}if(!this.tileType){this.tileType="tile";}if(t.search){k=v.getModel().getProperty("/config/display_search_keywords");K=k.split(/[, ]+/).filter(function(n,i){return n&&n!=="";});if(o.display_title_text&&o.display_title_text!==""&&K.indexOf(o.display_title_text)===-1){K.push(o.display_title_text);}if(o.display_subtitle_text&&o.display_subtitle_text!==""&&K.indexOf(o.display_subtitle_text)===-1){K.push(o.display_subtitle_text);}if(o.display_info_text&&o.display_info_text!==""&&K.indexOf(o.display_info_text)===-1){K.push(o.display_info_text);}if(o.display_number_unit&&o.display_number_unit!==""&&K.indexOf(o.display_number_unit)===-1){K.push(o.display_number_unit);}t.search.setKeywords(K);t.search.attachHighlight(function(h){v.getModel().setProperty("/search/display_highlight_terms",h);});}if(t.bag&&t.bag.attachBagsUpdated){t.bag.attachBagsUpdated(function(h){if(h.indexOf("tileProperties")>-1){u._updateTilePropertiesTexts(v,t.bag.getBag("tileProperties"));}});}if(t.configuration&&t.configuration.attachConfigurationUpdated){t.configuration.attachConfigurationUpdated(function(h){if(h.indexOf("tileConfiguration")>-1){u._updateTileConfiguration(v,t.configuration.getParameterValueAsString("tileConfiguration"));}});}if(t.preview){t.preview.setTargetUrl(this.navigationTargetUrl);t.preview.setPreviewIcon(o.display_icon_url);t.preview.setPreviewTitle(o.display_title_text);if(t.preview.setPreviewSubtitle&&typeof t.preview.setPreviewSubtitle==="function"){t.preview.setPreviewSubtitle(o.display_subtitle_text);}}if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var h=u.getConfigurationUi(v,"sap.ushell.components.tiles.applauncherdynamic.Configuration");t.configurationUi.attachCancel(e.onCancelConfiguration.bind(null,h));t.configurationUi.attachSave(e.onSaveConfiguration.bind(null,h));return h;});this.getView().getContent()[0].setTooltip(u.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}else if(!t.preview||!t.preview.isEnabled()){if(!s){sap.ushell.Container.addRemoteSystemForServiceUrl(o.service_url);}this.bNeedsRefresh=true;this.iNrOfTimerRunning=0;}if(t.refresh){t.refresh.attachRefresh(this.refreshHandler.bind(this));}if(t.visible){t.visible.attachVisible(this.visibleHandler.bind(this));}if(t.actions){var f=o.actions,E;if(f){E=f.slice();}else{E=[];}var T=m.getProperty("/mode")===d.LineMode?"link":"tile",g=a.getTileSettingsAction(m,this.onSaveRuntimeSettings.bind(this),T);E.push(g);t.actions.setActionsProvider(function(){return E;});}sap.ui.getCore().getEventBus().subscribe("launchpad","sessionTimeout",this.stopRequests,this);},stopRequests:function(){if(this.timer){clearTimeout(this.timer);}if(this.oDataRequest){try{this.bIsAbortRequestFlow=true;this.oDataRequest.abort();}catch(e){q.sap.log.warning(e.name,e.message);}this.bNeedsRefresh=true;this.bIsAbortRequestFlow=undefined;}},onExit:function(){this.stopRequests();sap.ui.getCore().getEventBus().unsubscribe("launchpad","sessionTimeout",this.stopRequests,this);this._aDoableObject.off();},onPress:function(e){var v=this.getView(),V=v.getViewData(),m=v.getModel(),t=m.getProperty("/nav/navigation_target_url"),T=V.chip,o=m.getProperty("/config");if(e.getSource().getScope&&e.getSource().getScope()===G.Display){if(T.configurationUi.isEnabled()){T.configurationUi.display();}else if(t){if(t[0]==="#"){hasher.setHash(t);}else{var L=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(L){var r={title:o.display_title_text,appType:b.URL,url:o.navigation_target_url,appId:o.navigation_target_url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}window.open(t,"_blank");}}}},extractData:function(D){var n,k=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];if(typeof D==="object"&&Object.keys(D).length===1){n=Object.keys(D)[0];if(Array.prototype.indexOf.call(k,n)===-1){return D[n];}}return D;},onSaveRuntimeSettings:function(s){var v=this.getView(),V=v.getModel(),t=v.getViewData().chip,o=V.getProperty("/config"),S=s.getModel();o.display_title_text=S.getProperty("/title");o.display_subtitle_text=S.getProperty("/subtitle");o.display_info_text=S.getProperty("/info");o.display_search_keywords=S.getProperty("/keywords");var e=t.bag.getBag("tileProperties");e.setText("display_title_text",o.display_title_text);e.setText("display_subtitle_text",o.display_subtitle_text);e.setText("display_info_text",o.display_info_text);e.setText("display_search_keywords",o.display_search_keywords);function f(E){q.sap.log.error(E,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");}e.save(function(){q.sap.log.debug("property bag 'tileProperties' saved successfully");V.setProperty("/config",o);V.setProperty("/data/display_title_text",o.display_title_text);V.setProperty("/data/display_subtitle_text",o.display_subtitle_text);V.setProperty("/data/display_info_text",o.display_info_text);V.refresh();},f);},onSaveConfiguration:function(o){var D=q.Deferred(),m=o.getModel(),t=m.getProperty("/tileModel"),T=o.getViewData().chip,e=u.tileActionsRows2TileActionsArray(m.getProperty("/config/tile_actions_rows")),f={display_icon_url:m.getProperty("/config/display_icon_url"),display_number_unit:m.getProperty("/config/display_number_unit"),service_url:m.getProperty("/config/service_url"),service_refresh_interval:m.getProperty("/config/service_refresh_interval"),navigation_use_semantic_object:m.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:m.getProperty("/config/navigation_target_url"),navigation_semantic_object:q.trim(m.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:q.trim(m.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:q.trim(m.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:m.getProperty("/config/display_search_keywords")};var r=u.checkInputOnSaveConfig(o);if(!r){r=u.checkTileActions(o);}if(r){D.reject("mandatory_fields_missing");return D.promise();}if(f.navigation_use_semantic_object){f.navigation_target_url=a.getSemanticNavigationUrl(f);m.setProperty("/config/navigation_target_url",f.navigation_target_url);}var g=T.bag.getBag("tileProperties");g.setText("display_title_text",m.getProperty("/config/display_title_text"));g.setText("display_subtitle_text",m.getProperty("/config/display_subtitle_text"));g.setText("display_info_text",m.getProperty("/config/display_info_text"));g.setText("display_search_keywords",f.display_search_keywords);var h=T.bag.getBag("tileNavigationActions");u.populateTileNavigationActionsBag(h,e);function i(E,j){q.sap.log.error(E,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");D.reject(E,j);}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(f)},function(){var j=a.getConfiguration(T,false,false),k=a.getConfiguration(T,true,false),m=new J({config:j,tileModel:t});o.setModel(m);t.setData({data:k,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(j.navigation_target_url);T.preview.setPreviewIcon(j.display_icon_url);T.preview.setPreviewTitle(j.display_title_text);if(T.preview.setPreviewSubtitle&&typeof T.preview.setPreviewSubtitle==="function"){T.preview.setPreviewSubtitle(j.display_subtitle_text);}}g.save(function(){q.sap.log.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(j.display_title_text,function(){D.resolve();},i);}else{D.resolve();}},i);h.save(function(){q.sap.log.debug("property bag 'navigationProperties' saved successfully");},i);},i);return D.promise();},successHandlerFn:function(r,R){var v=this.getView(),m=v.getModel(),o=m.getProperty("/config"),V=v.getViewData(),t=V.chip,s=t.url.getApplicationSystem(),D;this.oDataRequest=undefined;if(typeof R==="object"){var e=new c(r).get("$inlinecount");if(e&&e==="allpages"){R={number:R.__count};}else{R=this.extractData(R);}}else if(typeof R==="string"){R={number:R};}if(V.properties&&V.properties.info){if(typeof R==="object"){R.info=V.properties.info;}}D=a.getDataToDisplay(o,R);m.setProperty("/data",D);if(this.sConfigNavigationTargetUrlOld!==o.navigation_target_url){this.navigationTargetUrl=this.constructTargetUrlWithSapSystem(o.navigation_target_url,s);this.sConfigNavigationTargetUrlOld=this.navigationTargetUrl;}m.setProperty("/nav/navigation_target_url",a.addParamsToUrl(this.navigationTargetUrl,D));var i=o.service_refresh_interval;if(i>0){i=Math.max(i,this.REFRESH_INTERVAL_MIN);q.sap.log.info("Wait "+i+" seconds before calling "+o.service_url+" again",null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile.controller");this.refeshAfterInterval(i);}},errorHandlerFn:function(m,i){var v=this.getView(),M=v.getModel(),o=M.getProperty("/config"),s=m&&m.message?m.message:m,r=u.getResourceBundleModel().getResourceBundle();this.oDataRequest=undefined;if(s==="Request aborted"){q.sap.log.info("Data request from service "+o.service_url+" was aborted",null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile");}else{if(m.response){s+=" - "+m.response.statusCode+" "+m.response.statusText;}var L=i?q.sap.log.warning:q.sap.log.error;L("Failed to update data via service\n"+"  service URL: "+o.service_url+"\n"+"  "+s,null,"sap.ushell.components.tiles.applauncherdynamic.DynamicTile");}if(!this.bIsAbortRequestFlow){M.setProperty("/data",a.getDataToDisplay(o,{number:"???",info:r.getText("dynamic_data.error"),infoState:"Critical"}));}},onCancelConfiguration:function(o){var v=o.getViewData(),m=o.getModel(),t=m.getProperty("/tileModel"),T=v.chip,e=a.getConfiguration(T,false,false);m.setData({config:e,tileModel:t},false);},prepareToLoadData:function(){var D=this.getView(),o=D.getModel().getProperty("/config"),t=D.getViewData().chip,s=o.service_url,r,g,e=this;if(!s){this.errorHandlerFn("No service URL given!",true);return;}if(/;o=([;\/?]|$)/.test(s)){s=t.url.addSystemToServiceUrl(s);}if(this.serviceUrlWithDefaults){g=new q.Deferred().resolve({url:this.serviceUrlWithDefaults}).promise();}else{r=sap.ushell.Container.getService("ReferenceResolver");g=r.resolveUserDefaultParameters(s);}g.done(e.loadData.bind(e)).fail(e.errorHandlerFn.bind(e));},loadData:function(r){if(r.defaultsWithoutValue&&r.defaultsWithoutValue.length>0){this.errorHandlerFn("The service URL contains User Default(s) with no set value: "+r.defaultsWithoutValue.join(", "),true);return;}if(r.ignoredReferences&&r.ignoredReferences.length>0){this.errorHandlerFn("The service URL contains invalid Reference(s): "+r.ignoredReferences.join(", "),false);return;}var s=r.url,S,e,R,o;this.serviceUrlWithDefaults=s;R={"Cache-Control":"no-cache, no-store, must-revalidate","Pragma":"no-cache","Expires":"0","Accept-Language":(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||""};if(sap.ushell.Container){S=sap.ui.getCore().getConfiguration().getSAPLogonLanguage();if(S){R["sap-language"]=S;}e=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";o=new U(s);if(e&&!o.protocol()){R["sap-client"]=e;}}if(S&&s.indexOf("sap-language=")===-1){s=s+(s.indexOf("?")>=0?"&":"?")+"sap-language="+S;}this.oDataRequest=O.read({requestUri:s,headers:R},this.successHandlerFn.bind(this,s),this.errorHandlerFn.bind(this));},refreshTile:function(){var v=this.getView(),V=v.getViewData(),i=V.chip.visible.isVisible();if(i&&this.bNeedsRefresh){this.bNeedsRefresh=false;if(!this.oDataRequest){this.prepareToLoadData();}}},refeshAfterInterval:function(r){var t=this;this.iNrOfTimerRunning++;window.setTimeout(function(){t.iNrOfTimerRunning--;if(t.iNrOfTimerRunning===0){t.bNeedsRefresh=true;t.refreshTile();}},r*1000);},refreshHandler:function(){this.bNeedsRefresh=true;this.refreshTile();},visibleHandler:function(i){if(i){this.refreshTile();}else{this.stopRequests();}}});},false);
sap.ui.predefine('sap/ushell/components/tiles/applauncherdynamic/DynamicTile.view',["sap/m/GenericTile","sap/m/TileContent","sap/m/library","sap/m/NumericContent"],function(G,T,m,N){"use strict";var V=m.ValueColor;sap.ui.jsview("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncherdynamic.DynamicTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");return this.getTileControl();},getTileControl:function(){var c=this.getController();return new G({mode:"{/mode}",header:"{/data/display_title_text}",subheader:"{/data/display_subtitle_text}",size:"Auto",sizeBehavior:"{/sizeBehavior}",wrappingType:"{/wrappingType}",tileContent:[new T({size:"Auto",footer:"{/data/display_info_text}",footerColor:{path:"/data/display_info_state",formatter:function(f){if(!V[f]){f=V.Neutral;}return f;}},unit:"{/data/display_number_unit}",content:[new N({scale:"{/data/display_number_factor}",value:"{/data/display_number_value}",truncateValueTo:5,indicator:"{/data/display_state_arrow}",valueColor:{path:"/data/display_number_state",formatter:function(v){if(!V[v]){v=V.Neutral;}return v;}},icon:"{/data/display_icon_url}",width:"100%"})]})],press:[c.onPress,c]});},onAfterRendering:function(){var M=this.getModel(),d=M.getProperty("/data/display_info_state"),e=this.getDomRef(),a=e?e.getElementsByClassName("sapMTileCntFtrTxt")[0]:null;if(a){switch(d){case"Negative":a.classList.add("sapUshellTileFooterInfoNegative");break;case"Neutral":a.classList.add("sapUshellTileFooterInfoNeutral");break;case"Positive":a.classList.add("sapUshellTileFooterInfoPositive");break;case"Critical":a.classList.add("sapUshellTileFooterInfoCritical");break;default:return;}}},getMode:function(){return this.getModel().getProperty("/mode");}});});
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncher/Component',["sap/ui/core/UIComponent","sap/ui/core/library"],function(U,c){"use strict";var V=c.mvc.ViewType;return U.extend("sap.ushell.components.tiles.cdm.applauncher.Component",{metadata:{},createContent:function(){var C=this.getComponentData();var p=C.properties.tilePersonalization||{};var s=C.startupParameters;if(s&&s["sap-system"]){p["sap-system"]=s["sap-system"][0];}var t=sap.ui.view({type:V.JS,viewName:"sap.ushell.components.tiles.cdm.applauncher.StaticTile",viewData:{properties:C.properties,configuration:p},async:true});t.loaded().then(function(v){this._oController=t.getController();}.bind(this));return t;},tileSetVisualProperties:function(n){if(this._oController){this._oController.updatePropertiesHandler(n);}},tileRefresh:function(){},tileSetVisible:function(i){},exit:function(){this._oController=null;}});});
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncher/StaticTile.controller',["sap/ui/core/mvc/Controller","sap/ushell/Config","sap/ushell/services/AppType","sap/ui/model/json/JSONModel","sap/m/library"],function(C,a,A,J,m){"use strict";var G=m.GenericTileScope;return C.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{_aDoableObject:{},_getConfiguration:function(){var c=this.getView().getViewData();c.properties.sizeBehavior=a.last("/core/home/sizeBehavior");c.properties.wrappingType=a.last("/core/home/wrappingType");return c;},onInit:function(){var v=this.getView();var M=new J();M.setData(this._getConfiguration());v.setModel(M);this._aDoableObject=a.on("/core/home/sizeBehavior").do(function(s){M.setProperty("/properties/sizeBehavior",s);});},onExit:function(){this._aDoableObject.off();},onPress:function(e){var t=this.getView().getViewData().properties;if(e.getSource().getScope&&e.getSource().getScope()===G.Display){var T=this._createTargetUrl();if(!T){return;}if(T[0]==="#"){hasher.setHash(T);}else{var l=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(l){var r={title:t.title,appType:A.URL,url:t.targetURL,appId:t.targetURL};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}window.open(T,"_blank");}}},updatePropertiesHandler:function(n){var t=this.getView().getContent()[0],T=t.getTileContent()[0];if(typeof n.title!=="undefined"){t.setHeader(n.title);}if(typeof n.subtitle!=="undefined"){t.setSubheader(n.subtitle);}if(typeof n.icon!=="undefined"){T.getContent().setSrc(n.icon);}if(typeof n.info!=="undefined"){T.setFooter(n.info);}},_createTargetUrl:function(){var t=this.getView().getViewData().properties.targetURL,s=this.getView().getViewData().configuration["sap-system"],u,h;if(t&&s){u=sap.ushell.Container.getService("URLParsing");if(u.isIntentUrl(t)){h=u.parseShellHash(t);if(!h.params){h.params={};}h.params["sap-system"]=s;t="#"+u.constructShellHash(h);}else{t+=((t.indexOf("?")<0)?"?":"&")+"sap-system="+s;}}return t;},_getCurrentProperties:function(){var t=this.getView().getContent()[0],T=t.getTileContent()[0],s=a.last("/core/home/sizeBehavior");return{title:t.getHeader(),subtitle:t.getSubheader(),info:T.getFooter(),icon:T.getContent().getSrc(),sizeBehavior:s};}});},true);
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncher/StaticTile.view',["sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/ui/core/mvc/JSView"],function(G,I,T){"use strict";sap.ui.jsview("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncher.StaticTile";},createContent:function(c){var v=this.getViewData().properties;this.setHeight("100%");this.setWidth("100%");return new G({mode:v.mode||(v.icon?"ContentMode":"HeaderMode"),header:v.title,subheader:v.subtitle,size:"Auto",sizeBehavior:"{/properties/sizeBehavior}",wrappingType:"{/properties/wrappingType}",tileContent:new T({size:"Auto",footer:v.info,content:new I({src:v.icon})}),press:[c.onPress,c]});}});});
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncherdynamic/Component',["sap/ui/core/UIComponent","sap/ui/core/library"],function(U,c){"use strict";var V=c.mvc.ViewType;return U.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.Component",{metadata:{},createContent:function(){var C=this.getComponentData();var p=C.properties||{};var P=p.tilePersonalization||{};var i=p.indicatorDataSource;if(i&&i.path){P.serviceUrl=i.path;P.serviceRefreshInterval=i.refresh;}var s=C.startupParameters;if(s&&s["sap-system"]&&s["sap-system"][0]){P["sap-system"]=s["sap-system"][0];}if(P.serviceUrl&&P.serviceUrl.charAt(0)!=="/"&&p.dataSource&&p.dataSource.uri){var S=p.dataSource.uri;if(P["sap-system"]){if(S.charAt(S.length-1)==="/"){S=S.slice(0,S.length-1);}S+=";o="+P["sap-system"];}if(S.charAt(S.length-1)!=="/"){S+="/";}S+=P.serviceUrl;P.serviceUrl=S;}var t=sap.ui.view({type:V.JS,viewName:"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",viewData:{properties:p,configuration:P},async:true});t.loaded().then(function(v){this._oController=t.getController();this.tileRefresh();}.bind(this));return t;},tileSetVisualProperties:function(n){if(this._oController){this._oController.updateVisualPropertiesHandler(n);}},tileRefresh:function(){if(this._oController){this._oController.refreshHandler();}},tileSetVisible:function(i){if(this._oController){this._oController.visibleHandler(i);}},exit:function(){this._oController=null;}});});
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.controller',["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat","sap/ushell/Config","sap/ushell/services/AppType","sap/ui/thirdparty/datajs","sap/ui/thirdparty/URI","sap/ui/model/json/JSONModel","sap/m/library","sap/base/Log","sap/base/util/UriParameters"],function(C,u,N,a,A,O,U,J,m,L,b){"use strict";var G=m.GenericTileScope;return C.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",{timer:null,_aDoableObject:{},oDataRequest:null,_getConfiguration:function(){var v=this.getView().getViewData(),c={},o,h;c.configuration=v.configuration;c.properties=v.properties;c.properties.info=c.properties.info||"";c.properties.number_value="...";c.properties.number_value_state="Neutral";c.properties.number_state_arrow="None";c.properties.number_factor="";c.properties.number_unit="";var s=c.configuration["sap-system"];var t=c.properties.targetURL;if(t&&s){o=sap.ushell.Container.getService("URLParsing");if(o.isIntentUrl(t)){h=o.parseShellHash(t);if(!h.params){h.params={};}h.params["sap-system"]=s;t="#"+o.constructShellHash(h);}else{t+=((t.indexOf("?")<0)?"?":"&")+"sap-system="+s;}c.properties.targetURL=t;}c.properties.sizeBehavior=a.last("/core/home/sizeBehavior");c.properties.wrappingType=a.last("/core/home/wrappingType");return c;},onInit:function(){var v=this.getView();var M=new J();M.setData(this._getConfiguration());v.setModel(M);this._aDoableObject=a.on("/core/home/sizeBehavior").do(function(s){M.setProperty("/properties/sizeBehavior",s);});},refreshHandler:function(){this.loadData(0);},visibleHandler:function(i){if(i){if(!this.oDataRequest){this.refreshHandler(this);}}else{this.stopRequests();}},updateVisualPropertiesHandler:function(n){var p=this.getView().getModel().getProperty("/properties");var c=false;if(typeof n.title!=="undefined"){p.title=n.title;c=true;}if(typeof n.subtitle!=="undefined"){p.subtitle=n.subtitle;c=true;}if(typeof n.icon!=="undefined"){p.icon=n.icon;c=true;}if(typeof n.targetURL!=="undefined"){p.targetURL=n.targetURL;c=true;}if(typeof n.info!=="undefined"){p.info=n.info;c=true;}if(c){this.getView().getModel().setProperty("/properties",p);}},stopRequests:function(){if(this.timer){clearTimeout(this.timer);}if(this.oDataRequest){try{this.oDataRequest.abort();}catch(e){L.warning(e.name,e.message);}}},onPress:function(e){if(e.getSource().getScope&&e.getSource().getScope()===G.Display){var t=this.getView().getModel().getProperty("/properties/targetURL"),T=this.getView().getModel().getProperty("/properties/title");if(!t){return;}else if(t[0]==="#"){hasher.setHash(t);}else{var l=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(l){var r={title:T,appType:A.URL,url:t,appId:t};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}window.open(t,"_blank");}}},initUpdateDynamicData:function(){var v=this.getView(),s=v.getModel().getProperty("/configuration/serviceUrl"),S=v.getModel().getProperty("/configuration/serviceRefreshInterval");if(!S){S=0;}else if(S<10){L.warning("Refresh Interval "+S+" seconds for service URL "+s+" is less than 10 seconds, which is not supported. Increased to 10 seconds automatically.",null,"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile.controller");S=10;}if(s){this.loadData(S);}},extractData:function(d){var n,k=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];if(typeof d==="object"&&Object.keys(d).length===1){n=Object.keys(d)[0];if(Array.prototype.indexOf.call(k,n)===-1){return d[n];}}return d;},successHandleFn:function(r){var c=this.getView().getModel().getProperty("/configuration");var d=r;this.oDataRequest=undefined;if(typeof r==="object"){var e=new b(c.serviceUrl).get("$inlinecount");if(e&&e==="allpages"){d={number:r.__count};}else{d=this.extractData(d);}}else if(typeof r==="string"){d={number:r};}this.updatePropertiesHandler(d);},errorHandlerFn:function(M){var s=M&&M.message?M.message:M,r=u.getResourceBundleModel().getResourceBundle(),c=this.getView().getModel().getProperty("/configuration/serviceUrl");this.oDataRequest=undefined;if(s==="Request aborted"){jQuery.sap.log.info("Data request from service "+c+" was aborted",null,"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile");}else{if(M.response){s+=" - "+M.response.statusCode+" "+M.response.statusText;}L.error("Failed to update data via service "+c+": "+s,null,"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile");this.updatePropertiesHandler({number:"???",info:r.getText("dynamic_data.error")});}},loadData:function(s){var c=this.getView().getModel().getProperty("/configuration/serviceUrl"),S,d,r,o;if(!c){return;}r={"Cache-Control":"no-cache, no-store, must-revalidate","Pragma":"no-cache","Expires":"0","Accept-Language":(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||""};if(s>0){L.info("Wait "+s+" seconds before calling "+c+" again",null,"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile.controller");this.timer=window.setTimeout(this.loadData.bind(this,s,false),(s*1000));}if(!this.oDataRequest){if(sap.ushell.Container){S=sap.ui.getCore().getConfiguration().getSAPLogonLanguage();if(S){r["sap-language"]=S;}d=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";o=new U(c);if(d&&!o.protocol()){r["sap-client"]=d;}}if((S)&&(c.indexOf("sap-language=")===-1)){c=c+(c.indexOf("?")>=0?"&":"?")+"sap-language="+S;}this.oDataRequest=O.read({requestUri:c,headers:r},this.successHandleFn.bind(this),this.errorHandlerFn.bind(this));}},onExit:function(){this.stopRequests();this._aDoableObject.off();},addParamsToUrl:function(s,t){var p="",c=s.indexOf("?")!==-1,i;if(t&&t.length>0){for(i=0;i<t.length;i=i+1){p+=t[i];if(i<t.length-1){p+="&";}}}if(p.length>0){if(!c){s+="?";}else{s+="&";}s+=p;}return s;},_normalizeNumber:function(n,c,d,i){var e;if(isNaN(n)){e=n;}else{var o=N.getFloatInstance({maxFractionDigits:i});if(!d){var f=Math.abs(n);if(f>=1000000000){d="B";n/=1000000000;}else if(f>=1000000){d="M";n/=1000000;}else if(f>=1000){d="K";n/=1000;}}e=o.format(n);}var g=e;var h=g[c-1];c-=(h==="."||h===",")?1:0;g=g.substring(0,c);return{displayNumber:g,numberFactor:d};},updatePropertiesHandler:function(d){var e=u.getResourceBundleModel().getResourceBundle().getText("dynamic_data.error");var c=0,i,n,o,s,p=this.getView().getModel().getProperty("/properties"),f={title:d.title||p.title||"",subtitle:d.subtitle||p.subtitle||"",icon:d.icon||p.icon||"",targetURL:d.targetURL||p.targetURL||"",number_value:!isNaN(d.number)?d.number:"...",number_digits:d.numberDigits>=0?d.numberDigits:4,info:p.info==e?d.info||"":d.info||p.info||"",number_unit:d.numberUnit||p.number_unit||"",number_state_arrow:d.stateArrow||p.number_state_arrow||"None",number_value_state:d.numberState||p.number_value_state||"Neutral",number_factor:d.numberFactor||p.number_factor||""};var t=[];if(d.targetParams){t.push(d.targetParams);}if(d.results){for(i=0,n=d.results.length;i<n;i=i+1){o=d.results[i].number||0;if(typeof o==="string"){o=parseInt(o,10);}c=c+o;s=d.results[i].targetParams;if(s){t.push(s);}}f.number_value=c;}if(t.length>0){f.targetURL=this.addParamsToUrl(f.targetURL,t);}if(!isNaN(d.number)){if(typeof d.number==="string"){d.number=d.number.trim();}var S=this._shouldProcessDigits(d.number,d.numberDigits),g=f.icon?4:5;if(d.number&&d.number.length>=g||S){var h=this._normalizeNumber(d.number,g,d.numberFactor,d.numberDigits);f.number_factor=h.numberFactor;f.number_value=h.displayNumber;}else{var j=N.getFloatInstance({maxFractionDigits:g});f.number_value=j.format(d.number);}}if(f.number_value_state){switch(f.number_value_state){case"Positive":f.number_value_state="Good";break;case"Negative":f.number_value_state="Error";break;}}f.sizeBehavior=a.last("/core/home/sizeBehavior");this.getView().getModel().setProperty("/properties",f);},_shouldProcessDigits:function(d,D){var n;d=typeof(d)!=="string"?d.toString():d;if(d.indexOf(".")!==-1){n=d.split(".")[1].length;if(n>D){return true;}}return false;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view',["sap/m/GenericTile","sap/m/TileContent","sap/m/NumericContent","sap/m/library"],function(G,T,N,m){"use strict";var V=m.ValueColor;sap.ui.jsview("sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile";},createContent:function(c){this.setHeight("100%");this.setWidth("100%");return new G({size:"Auto",header:"{/properties/title}",subheader:"{/properties/subtitle}",sizeBehavior:"{/properties/sizeBehavior}",wrappingType:"{/properties/wrappingType}",tileContent:[new T({size:"Auto",footer:"{/properties/info}",footerColor:{path:"/data/display_info_state",formatter:function(f){if(!V[f]){f=V.Neutral;}return f;}},unit:"{/properties/number_unit}",content:[new N({truncateValueTo:5,scale:"{/properties/number_factor}",value:"{/properties/number_value}",indicator:"{/properties/number_state_arrow}",valueColor:{path:"/properties/number_value_state",formatter:function(v){if(!V[v]){v=V.Neutral;}return v;}},icon:"{/properties/icon}",width:"100%"})]})],press:[c.onPress,c]});}});});
sap.ui.predefine('sap/ushell/components/tiles/generic',["sap/ui/core/mvc/Controller","sap/m/library","sap/ui/core/format/DateFormat","sap/ushell/components/tiles/indicatorTileUtils/cache","sap/ushell/components/tiles/utils","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log"],function(C,m,D,c,u,M,J,q,L){"use strict";var a=m.DeviationIndicator;var V=m.ValueColor;var F=m.FrameType;var b=m.LoadState;
var g=C.extend("sap.ushell.components.tiles.generic",{
getTile:function(){return this.oKpiTileView.oGenericTile;},
_updateTileModel:function(n){var d=this.getTile().getModel().getData();q.extend(d,n);this.getTile().getModel().setData(d);},
logError:function(e){this._updateTileModel({value:"",scale:"",unit:""});L.error(e);if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject();}else{this.oKpiTileView.oGenericTile.setState(b.Failed);}},
getKeyForCallCheck:function(){if(this.oKpiTileView.getViewName()==="sap.ushell.components.tiles.indicatornumeric.NumericTile"){return this.oConfig.TILE_PROPERTIES.id+"left";}return this.oConfig.TILE_PROPERTIES.id+"right";},
getRelativeTime:function(){var d=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate(),t;if(q.type(this.cacheTime)==="date"){t=this.cacheTime;}else{t=new Date(parseInt(this.cacheTime.substr(6),10));}var r=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(d-t),e,o;switch(r.unit){case"minutes":o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"minutes");d=d-o;e=new Date(d);break;case"hours":o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"hours");d=d-o;e=new Date(d);break;case"days":o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"days");d=d-o;e=new Date(d);break;}return e;},
setTimeStamp:function(){this.updateTimeStampjobScheduled=false;var f=D.getDateTimeInstance({relative:true,relativeSource:"auto",style:"short"});var t=f.format(this.getRelativeTime());this.oKpiTileView.oNVConfS.setRefreshOption(true);this.oKpiTileView.oNVConfS.setTimestamp(t);this.updateTimeStampjobScheduled=false;var k=this.oConfig.TILE_PROPERTIES.id+"time";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k);if(r){clearTimeout(r);r=undefined;}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible());},
isACurrencyMeasure:function(d){var e=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;return sap.ushell.components.tiles.indicatorTileUtils.util.getFormattingMetadata(this.oRunTimeODataModel,e,d)._hasCurrency;},
isCurrencyMeasure:function(d){var t=this;var e=c.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(e&&e.Data){var k=e.Data&&JSON.parse(e.Data);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(t.oKpiTileView.getViewName()==="sap.ushell.components.tiles.indicatornumeric.NumericTile"){k=k.leftData;}else{k=k.rightData;}}if(t.oKpiTileView.getViewName()==="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile"||t.oConfig.TILE_PROPERTIES.tileType==="CM"){if(k&&k.data&&k.data.length){for(var i=0;i<k.data.length;i++){if(k.data[i]&&k.data[i].measure===d){if(q.type(k.data[i].isCurM)==="boolean"){return k.data[i].isCurM;}return t.isACurrencyMeasure(d);}return t.isACurrencyMeasure(d);}}else{return t.isACurrencyMeasure(d);}}if(k&&q.type(k.isCurM)==="boolean"){return k.isCurM;}return t.isACurrencyMeasure(d);}return t.isACurrencyMeasure(d);},
formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f=f+","+o[t[i]];}}return f;},
setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){var d=c.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(d&&d.Data&&d.Data.length){d.Data=JSON.parse(d.Data);T.trendValue=Number(d.Data.trend);T.targetValue=Number(d.Data.target);T.criticalHighValue=Number(d.Data.ch);T.warningHighValue=Number(d.Data.wh);d.Data=JSON.stringify(d.Data);}break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(d&&d.Data&&d.Data.length){d.Data=JSON.parse(d.Data);T.criticalLowValue=Number(d.Data.cl);T.warningLowValue=Number(d.Data.wl);T.trendValue=Number(d.Data.trend);T.targetValue=Number(d.Data.target);d.Data=JSON.stringify(d.Data);}break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(d&&d.Data&&d.Data.length){d.Data=JSON.parse(d.Data);T.criticalLowValue=Number(d.Data.cl);T.warningLowValue=Number(d.Data.wl);T.trendValue=Number(d.Data.trend);T.targetValue=Number(d.Data.target);T.criticalHighValue=Number(d.Data.ch);T.warningHighValue=Number(d.Data.wh);d.Data=JSON.stringify(d.Data);}break;}}else if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="RELATIVE"){T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},
setNoData:function(){var v=this.getView().getViewData();if(v.parentController){v.parentController.setNoData();if(v.deferredObj){v.deferredObj.resolve();}}else{try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(b.Loaded);}catch(e){}}},
getLocalCache:function(c){var l={};l.ChipId=c.ChipId;l.Data=c.Data;l.CacheMaxAge=c.CacheMaxAgeUnit;l.CacheMaxAgeUnit=c.CacheMaxAgeUnit;l.CacheType=c.CacheType;l.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return l;},
fetchKpiValue:function(d,E,r,A){var t=this;var k=0;try{var s=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var T=this.setThresholdValues();var f=T.fullyFormedMeasure;var h=c.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);var i=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var j=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,i,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);var l=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var n=this.getKeyForCallCheck();var o=true;if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){o=sap.ushell.components.tiles.indicatorTileUtils.util.isCallInProgress(n);if(o===undefined){o=true;}}if(o){if((!h||(!j&&t.oTileApi.visible.isVisible())||l||(A&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh)){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(n,false);if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,s,f,null,v);if(Q){this.QUERY_SERVICE_MODEL=Q.model;this.queryUriForKpiValue=Q.uri;this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(Q.uri,null,null,true,function(w){t.backEndCallMade=true;t.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(n,true);if(w&&w.results&&w.results.length&&w.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]!=null){k=w.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var x={};if(Q.unit[0]){t._updateTileModel({unit:w.results[0][Q.unit[0].name]});x.uom=w.results[0][Q.unit[0].name];}if(t.oConfig.TILE_PROPERTIES.frameType==="TwoByOne"){x.numericValue=k;}else{x.value=k;}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){T.criticalHighValue=w.results[0][T.sCriticalHigh];T.criticalLowValue=w.results[0][T.sCriticalLow];T.warningHighValue=w.results[0][T.sWarningHigh];T.warningLowValue=w.results[0][T.sWarningLow];T.targetValue=w.results[0][T.sTarget];T.trendValue=w.results[0][T.sTrend];}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="RELATIVE"){T.targetValue=Number(w.results[0][T.sTarget]);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(w.results[0][T.sTrend]);}x.cl=T.criticalLowValue;x.ch=T.criticalHighValue;x.wl=T.warningLowValue;x.wh=T.warningHighValue;x.trend=T.trendValue;x.target=T.targetValue;x.isCurM=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var y={};y.ChipId=t.oConfig.TILE_PROPERTIES.id;y.Data=JSON.stringify(x);y.CacheMaxAge=Number(t.chipCacheTime);y.CacheMaxAgeUnit=t.chipCacheTimeUnit;y.CacheType=1;var z=t.getLocalCache(y);if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,z);var U=false;if(h){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,y,U,function(w){if(w){t.cacheTime=w&&w.CachedTime;c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,w);t.setTimeStamp(t.cacheTime);}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}});}}else{var B=c.getKpivalueById(t.oConfig.TILE_PROPERTIES.id),G;if(B){if(!B.CachedTime){B.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}G=B.Data;if(G){G=JSON.parse(G);if(t.oKpiTileView.getViewName()==="sap.ushell.components.tiles.indicatornumeric.NumericTile"){G.leftData=x;}else{G.rightData=x;}}B.Data=JSON.stringify(G);c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,B);}else{G={};if(t.oKpiTileView.getViewName()==="sap.ushell.components.tiles.indicatornumeric.NumericTile"){G.leftData=x;}else{G.rightData=x;}z.Data=JSON.stringify(G);c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,z);}t.cacheWriteData=x;}t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();t.updateDatajobScheduled=false;var H=t.oConfig.TILE_PROPERTIES.id+"data";var I=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(H);if(I){clearTimeout(I);I=undefined;}d.call(t,k,T);}else{c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,{empty:"empty"});t.setNoData();}},function(w){t.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(n,true);if(w&&w.response){L.error(w.message+" : "+w.request.requestUri);E.call(t,w);}});}else{t.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(n,true);t.logError("Error Preparing Query Service URI");}}}else if(t.DEFINITION_DATA.TILE_PROPERTIES.frameType===F.OneByOne){var p;if(h&&h.Data){p=h.Data&&JSON.parse(h.Data);k=p.value;if(p.uom){t._updateTileModel({unit:p.uom});}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){T.criticalHighValue=p.ch;T.criticalLowValue=p.cl;T.warningHighValue=p.wh;T.warningLowValue=p.wl;T.targetValue=p.target;T.trendValue=p.trend;}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="RELATIVE"){T.targetValue=Number(p.target);T.criticalHighValue=T.targetValue*T.ch/100;T.criticalLowValue=T.targetValue*T.cl/100;T.warningHighValue=T.targetValue*T.wh/100;T.warningLowValue=T.targetValue*T.wl/100;T.trendValue=Number(p.trend);}t.cacheTime=h.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(h.CachedTime),t);}d.call(t,k,T);}else{t.setNoData();}}else if(h&&h.Data){p=h.Data&&JSON.parse(h.Data);if(t.oKpiTileView.getViewName()==="sap.ushell.components.tiles.indicatornumeric.NumericTile"){p=p.leftData;}else{p=p.rightData;}k=p.numericValue;if(p.unit){t._updateTileModel({unit:p.unit});}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){T.criticalHighValue=p.ch;T.criticalLowValue=p.cl;T.warningHighValue=p.wh;T.warningLowValue=p.wl;T.targetValue=p.target;T.trendValue=p.trend;}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="RELATIVE"){T.targetValue=Number(p.target);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(p.trend);}t.cacheTime=h.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(h.CachedTime),t);}d.call(t,k,T);}else{t.setNoData();}}}catch(e){t.logError(e);}},
getRunTimeODataModel:function(U,s){if(window["sap-ushell-config"].cacheBusting){U=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(U);}if(!this.oRunTimeODataModel){this.oRunTimeODataModel=sap.ushell.components.tiles.indicatorTileUtils.util.getODataModelByServiceUri(U);}if(this.oRunTimeODataModel.getServiceMetadata()){s();}else{this.oRunTimeODataModel.attachMetadataLoaded(s);}},
parse_sapclient:function(){var i,S,r,f,d;S="P_SAPClient";r="$$$";f=this.oConfig.EVALUATION_FILTERS;if(f.constructor!==Array){return;}if(f.length<1){return;}for(i in f){d=f[i];if(d.NAME===S&&d.VALUE_1===r){break;}d=null;}if(d){q.when(sap.ushell.components.tiles.indicatorTileUtils.util.getHanaClient()).done(function(e){d.VALUE_1=e;});}},
fetchEvaluation:function(d,f,r,i){var t=this;var p=this.oConfig.TILE_PROPERTIES.sb_metadata||"HANA";t.DEFINITION_DATA=d;t._updateTileModel(this.DEFINITION_DATA);var h=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);if((t.oTileApi.visible.isVisible()&&!t.firstTimeVisible)||h||i){q.when(sap.ushell.components.tiles.indicatorTileUtils.util.getFrontendCache(d,t.oTileApi)).done(function(j){t.firstTimeVisible=true;j=c.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(j||Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){f.call();}else{try{if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)||!t.dataCallInProgress){t.dataCallInProgress=true;var k=c.getEvaluationById(t.oConfig.TILE_PROPERTIES.id);if(k){t.oConfig.EVALUATION_FILTERS=k.EVALUATION_FILTERS;f.call();}else if(t.evaluationFetchDeferred){t.evaluationFetchDeferred=false;sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(t.oConfig,t.oTileApi,function(l){t.evaluationFetchDeferred=true;t.oConfig.EVALUATION_FILTERS=l;if(p.toUpperCase()==="HANA"){t.parse_sapclient();}c.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);f.call();});}}}catch(e){t.evaluationFetchDeferred=true;t.logError("no evaluation data");}}}).fail(function(){t.firstTimeVisible=true;if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){f.call();}else{try{var j=c.getEvaluationById(t.oConfig.TILE_PROPERTIES.id);if(j){t.oConfig.EVALUATION_FILTERS=j.EVALUATION_FILTERS;f.call();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(t.oConfig,t.oTileApi,function(k){t.oConfig.EVALUATION_FILTERS=k;if(p.toUpperCase()==="HANA"){t.parse_sapclient();}c.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);f.call();});}}catch(e){t.logError("no evaluation data");}}});}},
refreshHandler:function(r,A){var t=this;var i=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var d=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(A);if(!t.firstTimeVisible||i||d){t.fetchEvaluation(t.oConfig,function(){var U;if(t.oConfig.TILE_PROPERTIES.tileType==="NT"||t.oConfig.TILE_PROPERTIES.tileType==="AT"||t.oKpiTileView.getViewName()==="sap.ushell.components.tiles.indicatornumeric.NumericTile"||t.oKpiTileView.getViewName()==="sap.ushell.components.tiles.indicatordeviation.DeviationTile"){U=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(U,function(){if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(k,T){this.KPIVALUE=k;t.doProcess(k,T);},t.logError,r,d);}else{t.doProcess();}});}else{U=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(U,function(){if(t.KPI_VALUE_REQUIRED){t.doProcess(t.KPIVALUE,t.setThresholdValues());}else{t.doProcess(i,d);}});}},r,d);}},
visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},
getChipConfiguration:function(d){var t=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),t.oTileApi.preview.isEnabled(),function(f){t.oConfig=f;var h=sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig);var s=sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig);if(t.oTileApi.search){t.oTileApi.search.setKeywords([h,s]);}if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}d.call();});}catch(e){t.logError(e.message);}},
onAfterTileRendering:function(){var t=this;this.firstTimeVisible=false;this.oKpiTileView=this.getView();this.updateDatajobScheduled=false;this.updateTimeStampjobScheduled=false;this.oViewData=this.oKpiTileView.getViewData();this.tilePressed=false;this.kpiValueFetchDeferred=true;this.evaluationFetchDeferred=true;this.backEndCallMade=false;if(!sap.ushell.components.tiles.utils){q.sap.require("sap.ushell.components.tiles.utils");}this.oResourceBundle=u.getResourceBundleModel().getResourceBundle();this.oTileApi=this.oViewData.chip;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(b.Loading);this.getChipConfiguration(function(){var n;t.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t.oConfig);t.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t.oConfig);if(t.oTileApi.preview.isEnabled()){t.doDummyProcess();t.oKpiTileView.oGenericTile.attachPress(function(){M.show(t.oResourceBundle.getText("sb.NavigationHelp"));});}else if(t.oConfig.BLANKTILE||t.oConfig.TILE_PROPERTIES.blankTile){t.doDummyProcess();n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=n;});}else{if(t.oTileApi.visible&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){t.oTileApi.visible.attachVisible(t.visibleHandler.bind(t));}n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"' style='display: block;'/>");t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=n;});if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){t.oKpiTileView.oNVConfS.attachRefresh(function(){t.oKpiTileView.oGenericTile.setState(b.Loading);q.proxy(t.refreshHandler(true),t);});}t.fetchEvaluation(t.oConfig,function(){t.DEFINITION_DATA=t.oConfig;var U=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);var d=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var i=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,d,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);if(!i||t.getView().getViewData().refresh){t.getRunTimeODataModel(U,function(){if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(k,T){this.KPIVALUE=k;t.doProcess(k,T);},t.logError);}else{t.doProcess();}});}else if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(k,T){this.KPIVALUE=k;t.doProcess(k,T);},t.logError);}else{t.doProcess();}});}});},
onAfterRendering:function(){this.onAfterTileRendering();},
_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new J({}));}},
autoFormatter:function(n,i){i=i||false;if(!n){return"";}return sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(n),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,i);},
setToolTip:function(d,e,t){var f=this,o,T=this.setThresholdValues(),h=this.oConfig.EVALUATION.COLUMN_NAME,i=this.isCurrencyMeasure(h),v;if(t==="CONT"||t==="COMP"){if(this.oKpiTileView.getContent()[0].getTileContent().length){o=f.oKpiTileView.getContent()[0].getTileContent()[0].getContent();var j,k,l,n,p,r,s,w,x;if(e&&e[0]){j=e[0].title;n=this.autoFormatter(e[0].value,i);s=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(e[0].color);}if(e&&e[1]){k=e[1].title;p=this.autoFormatter(e[1].value,i);w=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(e[1].color);}if(e&&e[2]){l=e[2].title;r=this.autoFormatter(e[2].value,i);x=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(e[2].color);}var y={};y["0"]=this.oConfig.EVALUATION.COLUMN_NAME+",asc";y["1"]=this.oConfig.EVALUATION.COLUMN_NAME+",desc";y["2"]=this.oConfig.TILE_PROPERTIES.dimension+",asc";y["3"]=this.oConfig.TILE_PROPERTIES.dimension+",desc";var z=y[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");v={measure:this.oConfig.EVALUATION.COLUMN_NAME,contributionTile:z,m1:j,v1:n,c1:s,m2:k,v2:p,c2:w,m3:l,v3:r,c3:x};sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(o,t,v);}}else{var A="";if(d==="Error"){A="sb.error";}if(d==="Neutral"){A="sb.neutral";}if(d==="Critical"){A="sb.critical";}if(d==="Good"){A="sb.good";}v={status:A,actual:this.autoFormatter(e,i),target:this.autoFormatter(T.targetValue,i),cH:this.autoFormatter(T.criticalHighValue,i),wH:this.autoFormatter(T.warningHighValue,i),wL:this.autoFormatter(T.warningLowValue,i),cL:this.autoFormatter(T.criticalLowValue,i)};o=f.oKpiTileView.getContent()[0].getTileContent()[0]&&f.oKpiTileView.getContent()[0].getTileContent()[0].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(o,t,v);}},
getTrendColor:function(t){var d=this,w,f,h,i;try{var j=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var r=V.Neutral;if(j==="MI"){if(t.criticalHighValue&&t.warningHighValue){i=Number(t.criticalHighValue);h=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<h){r=V.Good;}else if(this.CALCULATED_KPI_VALUE<=i){r=V.Critical;}else{r=V.Error;}}}else if(j==="MA"){if(t.criticalLowValue&&t.warningLowValue){f=Number(t.criticalLowValue);w=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<f){r=V.Error;}else if(this.CALCULATED_KPI_VALUE<=w){r=V.Critical;}else{r=V.Good;}}}else if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){i=Number(t.criticalHighValue);h=Number(t.warningHighValue);w=Number(t.warningLowValue);f=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<f||this.CALCULATED_KPI_VALUE>i){r=V.Error;}else if((this.CALCULATED_KPI_VALUE>=f&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=h&&this.CALCULATED_KPI_VALUE<=i)){r=V.Critical;}else{r=V.Good;}}return r;}catch(e){d.logError(e);}},
getTrendIndicator:function(t){var d=this;t=Number(t);try{var f=a.None;if(t>this.CALCULATED_KPI_VALUE){f=a.Down;}else if(t<this.CALCULATED_KPI_VALUE){f=a.Up;}return f;}catch(e){d.logError(e);}},
setTextInTile:function(){var t=this;var d=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:d.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:d.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},
_getEvaluationThresholdMeasures:function(){var t=[];t.push(this.oConfig.EVALUATION.COLUMN_NAME);if(this.oConfig.EVALUATION.VALUES_SOURCE==="MEASURE"){var d=this.oConfig.EVALUATION_VALUES;if(d&&d.length){for(var i=0;i<d.length;i++){if((d[i]).COLUMN_NAME&&!((d[i]).FIXED)){t.push((d[i]).COLUMN_NAME);}}}}return t;},
onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}
});
return g;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorArea/AreaChartTile.controller',["sap/ushell/components/tiles/generic","sap/m/library","sap/ushell/components/tiles/indicatorTileUtils/cache","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/ui/thirdparty/jquery"],function(g,m,d,A,f,q){"use strict";var F=m.FrameType;var L=m.LoadState;
var h=g.extend("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=false;},
doProcess:function(r,i){this.onAfterFinalEvaluation(r,i);},
doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({footer:"",description:"",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oKpiTileView.oGenericTile.setState(L.Loaded);},
scheduleJob:function(a){if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}},
onAfterFinalEvaluation:function(r,j){var t=this;var E=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var M=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var k=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(k===undefined){this.logError();return;}var l=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var n=this.DEFINITION_DATA.EVALUATION_VALUES;var o=d.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(o){var p=o.Data&&JSON.parse(o.Data);}}var s=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var u=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,s,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);var w=M;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){switch(l){case"MI":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningHigh&&t.sCriticalHigh&&t.sTarget){w+=","+t.sWarningHigh+","+t.sCriticalHigh+","+t.sTarget;}break;case"MA":t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget){w+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget;}break;case"RA":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget&&t.sWarningHigh&&t.sCriticalHigh){w+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget+","+t.sWarningHigh+","+t.sCriticalHigh;}break;}}var x=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);if((p&&!p.rightData)||!o||(!u&&t.oTileApi.visible.isVisible())||x||(j&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh){if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,E,w,k,v);if(Q){this.queryUriForTrendChart=Q.uri;var y={};try{this.trendChartODataReadRef=Q.model.read(Q.uri,null,null,true,function(a){t.kpiValueFetchDeferred=true;if(a&&a.results&&a.results.length){if(Q.unit[0]){t.unit=a.results[0][Q.unit[0].name];t.CURRENCY_CODE=t.unit;y.unit=Q.unit[0];y.unit.name=Q.unit[0].name;}t.queryUriResponseForTrendChart=a;k=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oRunTimeODataModel,E,k);a.results.splice(10);a.firstXlabel=a.results[0][k];a.lastXlabel=a.results[a.results.length-1][k];y.data=a;if(y&&y.data&&y.data.results&&y.data.results.length){for(var i=0;i<y.data.results.length;i++){delete y.data.results[i].__metadata;}}y.isCurM=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);y.dimensionName=k;_(a,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);var c={};t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();c.ChipId=t.oConfig.TILE_PROPERTIES.id;c.Data=JSON.stringify(y);c.CacheMaxAge=Number(t.chipCacheTime);c.CacheMaxAgeUnit=t.chipCacheTimeUnit;c.CacheType=1;var b=t.getLocalCache(c);if(t.DEFINITION_DATA.TILE_PROPERTIES.frameType===F.TwoByOne){var C=d.getKpivalueById(t.oConfig.TILE_PROPERTIES.id),D;if(C){if(!C.CachedTime){C.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}D=C.Data;if(D){D=JSON.parse(D);D.rightData=y;}C.Data=JSON.stringify(D);d.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,C);}else{D={};D.rightData=y;b.Data=JSON.stringify(D);d.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,b);}t.cacheWriteData=y;t.getView().getViewData().deferredObj.resolve();}else{d.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,b);var U=false;if(o){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,c,U,function(a){if(a){t.cacheTime=a&&a.CachedTime;d.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,a);t.setTimeStamp();}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}});}t.oKpiTileView.oGenericTile.setState(L.Loaded);t.updateDatajobScheduled=false;var G=t.oConfig.TILE_PROPERTIES.id+"data";var H=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(G);if(H){clearTimeout(H);H=undefined;}q.proxy(t.scheduleJob(t.cacheTime),t);}}else{t.setNoData();}},function(a){t.kpiValueFetchDeferred=true;if(a&&a.response){t.logError("Data call failed");}});}catch(e){t.kpiValueFetchDeferred=true;t.logError(e);}}else{t.kpiValueFetchDeferred=true;t.logError();}}}else if(o&&o.Data){try{var z;var B=t.oConfig&&t.oConfig.TILE_PROPERTIES&&t.oConfig.TILE_PROPERTIES.tileType;if(B.indexOf("DT-")===-1){z=o.Data&&JSON.parse(o.Data);}else{z=o.Data&&JSON.parse(o.Data);z=z.rightData;}if(z.unit){t.unit=z.data.results[0][z.unit.name];t.CURRENCY_CODE=t.unit;}t.cacheTime=o.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}t.queryUriResponseForTrendChart=z.data;k=z.dimensionName;_(z.data,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);if(t.oConfig.TILE_PROPERTIES.frameType===F.OneByOne){t.oKpiTileView.oGenericTile.setState(L.Loaded);}else{t.getView().getViewData().deferredObj.resolve();}q.proxy(t.scheduleJob(t.cacheTime),t);}catch(e){t.logError(e);}}else{t.setNoData();}function _(C,D){var G=[];var H=[];var I=[];var J=[];var K=[];var N=[];var O=C.firstXlabel;var P,R,S,T,U;var V=C.lastXlabel;var W=Number(C.results[0][M]);var X=Number(C.results[C.results.length-1][M]);var i;for(i in C.results){C.results[i][k]=Number(i);C.results[i][M]=Number(C.results[i][M]);if(t.sWarningHigh){C.results[i][t.sWarningHigh]=Number(C.results[i][t.sWarningHigh]);}if(t.sCriticalHigh){C.results[i][t.sCriticalHigh]=Number(C.results[i][t.sCriticalHigh]);}if(t.sCriticalLow){C.results[i][t.sCriticalLow]=Number(C.results[i][t.sCriticalLow]);}if(t.sWarningLow){C.results[i][t.sWarningLow]=Number(C.results[i][t.sWarningLow]);}if(t.sTarget){C.results[i][t.sTarget]=Number(C.results[i][t.sTarget]);}if(t.sWarningHigh){I.push(C.results[i][t.sWarningHigh]);}if(t.sCriticalHigh){J.push(C.results[i][t.sCriticalHigh]);}if(t.sCriticalLow){K.push(C.results[i][t.sCriticalLow]);}if(t.sWarningLow){N.push(C.results[i][t.sWarningLow]);}G.push(C.results[i][k]);H.push(C.results[i][M]);}try{O=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(O);V=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(V);}catch(e){t.logError(e);}var Y=Number(W);if(t.oConfig.EVALUATION.SCALING===-2){Y*=100;}var Z=Math.min.apply(Math,H);var c=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var $=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Y,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION,c,t.CURRENCY_CODE);if(t.oConfig.EVALUATION.SCALING===-2){$+=" %";}var a1=$.toString();var b1=Number(X);if(t.oConfig.EVALUATION.SCALING===-2){b1*=100;}var c1=Math.max.apply(Math,H);c=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var d1=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(b1,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION,c,t.CURRENCY_CODE);if(t.oConfig.EVALUATION.SCALING===-2){d1+=" %";}var e1=d1.toString();try{var f1=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,G));var g1=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,G));}catch(e){t.logError(e);}if(D==="MEASURE"){if(I.length!==0){t.firstwH=I[f1];t.lastwH=I[g1];}if(J.length!==0){t.firstcH=J[f1];t.lastcH=J[g1];}if(K.length!==0){t.firstcL=K[f1];t.lastcL=K[g1];}if(N.length!==0){t.firstwL=N[f1];t.lastwL=N[g1];}}var h1={width:"100%",height:"100%",unit:t.unit||"",chart:{color:"Neutral",data:C.results},size:"Auto",minXValue:f1,maxXValue:g1,minYValue:Z,maxYValue:c1,firstXLabel:{label:O+"",color:"Neutral"},lastXLabel:{label:V+"",color:"Neutral"},firstYLabel:{label:a1+"",color:"Neutral"},lastYLabel:{label:e1+"",color:"Neutral"},minLabel:{},maxLabel:{}};var i1;switch(l){case"MA":for(i in n){if(n[i].TYPE==="CL"){h1.minThreshold={color:"Error"};i1={};i1[k]="";i1[M]=Number(n[i].FIXED);t.cl=Number(n[i].FIXED);h1.minThreshold.data=(D==="MEASURE")?C.results:[i1];P=(D==="MEASURE")?t.sCriticalLow:M;}else if(n[i].TYPE==="WL"){h1.maxThreshold={color:"Good"};i1={};i1[k]="";i1[M]=Number(n[i].FIXED);h1.maxThreshold.data=(D==="MEASURE")?C.results:[i1];R=(D==="MEASURE")?t.sWarningLow:M;t.wl=Number(n[i].FIXED);}else if(n[i].TYPE==="TA"){i1={};i1[k]="";i1[M]=Number(n[i].FIXED);h1.target={color:"Neutral"};h1.target.data=(D==="MEASURE")?C.results:[i1];U=(D==="MEASURE")?t.sTarget:M;}}h1.innerMinThreshold={data:[]};h1.innerMaxThreshold={data:[]};if(D==="FIXED"){h1.firstYLabel.color=W<t.cl?"Error":((t.cl<=W)&&(W<=t.wl))?"Critical":(W>t.wl)?"Good":"Neutral";h1.lastYLabel.color=X<t.cl?"Error":((t.cl<=X)&&(X<=t.wl))?"Critical":(X>t.wl)?"Good":"Neutral";}else if(D==="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL){h1.firstYLabel.color=W<t.firstcL?"Error":((t.firstcL<=W)&&(W<=t.firstwL))?"Critical":(W>t.firstwL)?"Good":"Neutral";h1.lastYLabel.color=X<t.lastcL?"Error":((t.lastcL<=X)&&(X<=t.lastwL))?"Critical":(X>t.lastwL)?"Good":"Neutral";}break;case"MI":for(i in n){if(n[i].TYPE==="CH"){i1={};i1[k]="";i1[M]=Number(n[i].FIXED);t.ch=Number(n[i].FIXED);h1.maxThreshold={color:"Error"};h1.maxThreshold.data=(D==="MEASURE")?C.results:[i1];R=(D==="MEASURE")?t.sCriticalHigh:M;}else if(n[i].TYPE==="WH"){i1={};i1[k]="";i1[M]=Number(n[i].FIXED);t.wh=Number(n[i].FIXED);h1.minThreshold={color:"Good"};h1.minThreshold.data=(D==="MEASURE")?C.results:[i1];P=(D==="MEASURE")?t.sWarningHigh:M;}else if(n[i].TYPE==="TA"){i1={};i1[k]="";i1[M]=Number(n[i].FIXED);h1.target={color:"Neutral"};h1.target.data=(D==="MEASURE")?C.results:[i1];U=(D==="MEASURE")?t.sTarget:M;}}if(D==="FIXED"){h1.firstYLabel.color=W>t.ch?"Error":((t.wh<=W)&&(W<=t.ch))?"Critical":(W<t.wh)?"Good":"Neutral";h1.lastYLabel.color=X>t.ch?"Error":((t.wh<=X)&&(X<=t.ch))?"Critical":(X<t.wh)?"Good":"Neutral";}else if(D==="MEASURE"&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){h1.firstYLabel.color=W>t.firstcH?"Error":((t.firstwH<=W)&&(W<=t.firstcH))?"Critical":(W<t.firstwH)?"Good":"Neutral";h1.lastYLabel.color=X>t.lastcH?"Error":((t.lastwH<=X)&&(X<=t.lastcH))?"Critical":(X<t.lastwH)?"Good":"Neutral";}h1.innerMaxThreshold={data:[]};h1.innerMinThreshold={data:[]};break;case"RA":for(i in n){if(n[i].TYPE==="CH"){i1={};i1[k]="";i1[M]=Number(n[i].FIXED);t.ch=Number(n[i].FIXED);h1.maxThreshold={color:"Error"};h1.maxThreshold.data=(D==="MEASURE")?C.results:[i1];R=(D==="MEASURE")?t.sCriticalHigh:M;}else if(n[i].TYPE==="WH"){i1={};i1[k]="";i1[M]=Number(n[i].FIXED);t.wh=Number(n[i].FIXED);h1.innerMaxThreshold={color:"Good"};h1.innerMaxThreshold.data=(D==="MEASURE")?C.results:[i1];T=(D==="MEASURE")?t.sWarningHigh:M;}else if(n[i].TYPE==="WL"){i1={};i1[k]="";i1[M]=Number(n[i].FIXED);t.wl=Number(n[i].FIXED);h1.innerMinThreshold={color:"Good"};h1.innerMinThreshold.data=(D==="MEASURE")?C.results:[i1];S=(D==="MEASURE")?t.sWarningLow:M;}else if(n[i].TYPE==="CL"){i1={};i1[k]="";i1[M]=Number(n[i].FIXED);t.cl=Number(n[i].FIXED);h1.minThreshold={color:"Error"};h1.minThreshold.data=(D==="MEASURE")?C.results:[i1];P=(D==="MEASURE")?t.sCriticalLow:M;}else if(n[i].TYPE==="TA"){i1={};i1[k]="";i1[M]=Number(n[i].FIXED);h1.target={color:"Neutral"};h1.target.data=(D==="MEASURE")?C.results:[i1];U=(D==="MEASURE")?t.sTarget:M;}}if(D==="FIXED"){h1.firstYLabel.color=(W>t.ch||W<t.cl)?"Error":((t.wh<=W)&&(W<=t.ch))||((t.cl<=W)&&(W<=t.wl))?"Critical":((W>=t.wl)&&(W<=t.wh))?"Good":"Neutral";h1.lastYLabel.color=(X>t.ch||X<t.cl)?"Error":((t.wh<=X)&&(X<=t.ch))||((t.cl<=X)&&(X<=t.wl))?"Critical":((X>=t.wl)&&(X<=t.wh))?"Good":"Neutral";}else if(D==="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){h1.firstYLabel.color=(W>t.firstcH||W<t.firstcL)?"Error":((t.firstwH<=W)&&(W<=t.firstcH))||((t.firstcL<=W)&&(W<=t.firstwL))?"Critical":((W>=t.firstwL)&&(W<=t.firstwH))?"Good":"Neutral";h1.lastYLabel.color=(X>t.lastcH||X<t.lastcL)?"Error":((t.lastwH<=X)&&(X<=t.lastcH))||((t.lastcL<=X)&&(X<=t.lastwL))?"Critical":((X>=t.lastwL)&&(X<=t.lastwH))?"Good":"Neutral";}break;}var j1=function(l1,a,b,D){return new A({color:"{/"+l1+"/color}",points:{path:"/"+l1+"/data",template:new f({x:"{"+a+"}",y:"{"+b+"}"})}});};var k1=t.getView().oNVConfContS;k1.setTarget(j1("target",k,U));k1.setInnerMinThreshold(j1("innerMinThreshold",k,S));k1.setInnerMaxThreshold(j1("innerMaxThreshold",k,T));k1.setMinThreshold(j1("minThreshold",k,P));k1.setMaxThreshold(j1("maxThreshold",k,R));k1.setChart(j1("chart",k,M));t.setTextInTile();if(t.getView().getViewData().parentController){t.getView().getViewData().parentController._updateTileModel(h1);}else{t._updateTileModel(h1);}}}
});
return h;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorArea/AreaChartTile.view',["sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/m/library","sap/suite/ui/microchart/AreaMicroChart","sap/ushell/components/tiles/sbtilecontent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(A,a,b,M,c,s,G,J){"use strict";var L=M.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorArea.AreaChartTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var h="Lorem ipsum";var d="Lorem ipsum";var S=M.Size;var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;d=t.subTitle;}var e=function(n){return new A({color:"Good",points:{path:"/"+n+"/data",template:new a({x:"{day}",y:"{balance}"})}});};var f=function(n){return new b({label:"{/"+n+"/label}",color:"{/"+n+"/color}"});};var g={subheader:d,header:h,footerNum:"",footerComp:"",scale:"",unit:"",value:8888,size:"Auto",frameType:"OneByOne",state:L.Loading};this.oNVConfContS=new c({width:"{/width}",height:"{/height}",size:S.Responsive,target:e("target"),innerMinThreshold:e("innerMinThreshold"),innerMaxThreshold:e("innerMaxThreshold"),minThreshold:e("minThreshold"),maxThreshold:e("maxThreshold"),chart:e("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:f("firstXLabel"),lastXLabel:f("lastXLabel"),firstYLabel:f("firstYLabel"),lastYLabel:f("lastYLabel"),minLabel:f("minLabel"),maxLabel:f("maxLabel")});this.oNVConfS=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var o=new J();o.setData(g);this.oGenericTile.setModel(o);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDual/DualTile.controller',["sap/m/MessageToast","sap/ushell/components/tiles/indicatorTileUtils/cache","sap/ushell/components/tiles/utils","sap/m/library","sap/ui/core/library","sap/ui/core/format/DateFormat","sap/ui/thirdparty/jquery"],function(M,c,u,m,a,D,q){"use strict";var b=m.DeviationIndicator;var V=m.ValueColor;var F=m.FrameType;var S=m.Size;var L=m.LoadState;var d=a.mvc.ViewType;sap.ui.controller("sap.ushell.components.tiles.indicatorDual.DualTile",{getRelativeTime:function(){var e=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();this.cacheTime=(q.type(this.cacheTime)==="date")?this.cacheTime:new Date(parseInt(this.cacheTime.substr(6),10));var r=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(e-this.cacheTime),f,o;switch(r.unit){case"minutes":o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"minutes");e=e-o;f=new Date(e);break;case"hours":o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"hours");e=e-o;f=new Date(e);break;case"days":o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"days");e=e-o;f=new Date(e);break;}return f;},getTile:function(){return this.oKpiTileView.oGenericTile;},setTimeStamp:function(){this.updateTimeStampjobScheduled=false;var f=D.getDateTimeInstance({relative:true,relativeSource:"auto"});var t=f.format(this.getRelativeTime());var l=this.getView().oGenericTile.getTileContent()[0];if(l){if(l.setRefreshOption){l.setRefreshOption(true);}if(l.setTimestamp){l.setTimestamp(t);}}this.updateTimeStampjobScheduled=false;var k=this.oConfig.TILE_PROPERTIES.id+"time";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k);if(r){clearTimeout(r);r=undefined;}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible());},getLocalCache:function(c){var l={};l.ChipId=c.ChipId;l.Data=c.Data;l.CacheMaxAge=c.CacheMaxAgeUnit;l.CacheMaxAgeUnit=c.CacheMaxAgeUnit;l.CacheType=c.CacheType;l.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return l;},refreshPress:function(){this.initProcess(true);},_getView:function(v,e,r){var f=this.oKpiTileView.getViewData();var g=sap.ui.view({type:d.JS,viewName:v,viewData:q.extend(true,{},f,{parentController:this},{deferredObj:e},{refresh:r})});return g;},logError:function(){this._updateTileModel({value:"",scale:"",unit:""});if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject();}},doProcess:function(r){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(this.oKpiTileView.oConfig.TILE_PROPERTIES.id+"defferedLeft",this.deferred_left);sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(this.oKpiTileView.oConfig.TILE_PROPERTIES.id+"defferedRight",this.deferred_right);var t=this;this.getView().oGenericTile.removeAllTileContent();var s=this.getView().oGenericTile;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(L.Loading);var f=t.tileType.split("-")[1];try{var v;v="sap.ushell.components.tiles.indicatornumeric.NumericTile";this.leftView=t._getView(v,this.deferred_left,r);this.leftView.getController().dataCallInProgress=false;s.addTileContent(this.leftView.oGenericTile.getTileContent()[0]);switch(f){case"CM":v="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"CT":v="sap.ushell.components.tiles.indicatorcontribution.ContributionTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"AT":v="sap.ushell.components.tiles.indicatordeviation.DeviationTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"TT":v="sap.ushell.components.tiles.indicatorArea.AreaChartTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;}this.leftView.getController().onAfterTileRendering();this.rightView.getController().onAfterTileRendering();var l=this.getView().oGenericTile.getTileContent()[0];if(l&&l.attachRefresh){l.attachRefresh(q.proxy(this.refreshPress,t));}}catch(e){this.logError(e);}},_updateTileModel:function(n){var e=this.getTile().getModel().getData();q.extend(e,n);this.getTile().getModel().setData(e);},setTextInTile:function(){var t=this;var e=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:e.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:e.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},doDummyProcess:function(){var t=this;try{t.setTextInTile();switch(t.tileType){case"DT-CM":t._updateTileModel({value:1,size:S.Auto,frameType:F.TwoByOne,state:L.Loading,valueColor:V.Good,indicator:b.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});break;case"DT-AT":t._updateTileModel({valueColor:"Good",value:100,frameType:F.TwoByOne,unit:"USD",actual:{value:120,color:V.Good},targetValue:100,thresholds:[{value:0,color:V.Error},{value:50,color:V.Critical},{value:150,color:V.Critical},{value:200,color:V.Error}],showActualValue:true,showTargetValue:true});break;case"DT-CT":t._updateTileModel({value:8888,size:S.Auto,frameType:F.TwoByOne,state:L.Loading,valueColor:V.Error,indicator:b.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});break;case"DT-TT":this._updateTileModel({value:8888,size:S.Auto,frameType:F.TwoByOne,state:L.Loading,valueColor:V.Error,indicator:b.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});break;}}catch(e){}},visibleHandler:function(i){if(!i){if(this.leftView){this.leftView.getController().firstTimeVisible=false;}if(this.rightView){this.rightView.getController().firstTimeVisible=false;}sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){if(this.leftView){this.leftView.getController().refreshHandler();}if(this.rightView){this.rightView.getController().refreshHandler();}}},initProcess:function(r){var t=this;this.oKpiTileView=this.getView();this.oResourceBundle=u.getResourceBundleModel().getResourceBundle();this.viewData={};t.viewData=this.oKpiTileView.getViewData();this.oTileApi=this.viewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.deferred_left=new q.Deferred();this.deferred_right=new q.Deferred();q.when(this.deferred_left,this.deferred_right).done(function(){t.setTextInTile();t.oConfig=t.oKpiTileView.oConfig;t.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t.oConfig);t.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t.oConfig);var l=t.leftView.getController().cacheWriteData;var e=t.rightView.getController().cacheWriteData;t.oKpiTileView.oGenericTile.setState(L.Loaded);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oKpiTileView.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'/>");t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;c.setKpivalueById(t.oKpiTileView.oConfig.TILE_PROPERTIES.id,null);window.location.hash=n;});var f={};var w={};w.leftData=l;w.rightData=e;f.ChipId=t.oConfig.TILE_PROPERTIES.id;f.Data=JSON.stringify(w);f.CacheMaxAge=Number(t.chipCacheTime);f.CacheMaxAgeUnit=t.chipCacheTimeUnit;f.CacheType=1;var g=t.getLocalCache(f);if(w.leftData&&w.rightData){c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,g);}var h=c.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(t.chipCacheTime&&w.leftData&&w.rightData){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,f,false,function(i){if(i){c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,i);t.cacheTime=i.CachedTime;t.setTimeStamp.call(t);}});}if(t.chipCacheTime){if(!t.cacheTime){t.cacheTime=h.CachedTime;}t.setTimeStamp.call(t);sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(t,t.oTileApi.visible.isVisible());}}).fail(function(){t.oKpiTileView.oGenericTile.setState(L.Failed);});t.tileType=t.oKpiTileView.oConfig.TILE_PROPERTIES.tileType;this.oTileApi=t.viewData.chip;if(this.oTileApi.preview.isEnabled()){this.doDummyProcess();t.oKpiTileView.oGenericTile.attachPress(function(){M.show(t.oResourceBundle.getText("sb.NavigationHelp"));});}else{this.doProcess(r);}},onAfterRendering:function(){this.initProcess();},setNoData:function(){try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(L.Loaded);}catch(e){}},getChipConfiguration:function(f){var t=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),t.oTileApi.preview.isEnabled(),function(g){t.oConfig=g;f.call();});}catch(e){t.logError(e.message);}}});return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDual/DualTile.view',["sap/ushell/components/tiles/sbtilecontent","sap/m/NumericContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/suite/ui/microchart/AreaMicroChart","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/library","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(s,N,C,a,A,b,c,d,B,e,m,G,J){"use strict";var S=m.Size;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorDual.DualTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorDual.DualTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var t=this;t.oGenericTileData={};sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.getViewData().chip.configuration.getParameterValueAsString("tileConfiguration"),t.getViewData().chip.preview.isEnabled(),function(k){t.oConfig=k;});t.tileType=t.oConfig.TILE_PROPERTIES.tileType;t.oNumericContent=new N({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:"{/isFormatterValue}",truncateValueTo:5,valueColor:"{/valueColor}",nullifyValue:false});t.oLeftTileContent=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});var o;switch(t.tileType){case"DT-CM":o=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oComparisionContent=new a({size:"{/size}",scale:"{/scale}",data:{template:o,path:"/data"}});t.oRightContent=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oComparisionContent});break;case"DT-CT":o=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oContributionContent=new a({size:"{/size}",scale:"{/scale}",data:{template:o,path:"/data"}});t.oRightContent=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oContributionContent});break;case"DT-TT":var f=function(n){return new A({color:"Good",points:{path:"/"+n+"/data",template:new b({x:"{day}",y:"{balance}"})}});};var g=function(n){return new c({label:"{/"+n+"/label}",color:"{/"+n+"/color}"});};var h=new d({width:"{/width}",height:"{/height}",size:"{/size}",target:f("target"),innerMinThreshold:f("innerMinThreshold"),innerMaxThreshold:f("innerMaxThreshold"),minThreshold:f("minThreshold"),maxThreshold:f("maxThreshold"),chart:f("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:g("firstXLabel"),lastXLabel:g("lastXLabel"),firstYLabel:g("firstYLabel"),lastYLabel:g("lastYLabel"),minLabel:g("minLabel"),maxLabel:g("maxLabel")});t.oRightContent=new s({unit:"{/unit}",size:"{/size}",content:h});break;case"DT-AT":var i=new B({value:"{value}",color:"{color}"});var j=new e({size:S.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:i,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});t.oRightContent=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:j});break;}t.oGenericTile=new G({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[t.oLeftTileContent,t.oRightContent]});t.oGenericTileModel=new J();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualComparison/DualComparison.controller',["sap/m/library","sap/ushell/components/tiles/indicatorTileUtils/cache","sap/ui/thirdparty/jquery","sap/base/Log"],function(m,c,q,L){"use strict";var S=m.Size;var D=m.DeviationIndicator;var V=m.ValueColor;var a=m.LoadState;sap.ui.controller("tiles.indicatorDualComparison.DualComparison",{getTile:function(){return this.oDualComparisonView.oGenericTile;},_updateTileModel:function(n){var b=this.getTile().getModel().getData();q.extend(b,n);this.getTile().getModel().setData(b);},setTitle:function(){var t=this;var b=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:b.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:b.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},logError:function(e){this.oDualComparisonView.oGenericTile.setState(a.Failed);this.oDualComparisonView.oGenericTile.setState(a.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},getTrendColor:function(t){var b=this;var d,w,f,g;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var r=V.Neutral;if(i==="MI"){if(t.criticalHighValue&&t.warningHighValue){d=Number(t.criticalHighValue);w=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<w){r=V.Good;}else if(this.CALCULATED_KPI_VALUE<=d){r=V.Critical;}else{r=V.Error;}}}else if(i==="MA"){if(t.criticalLowValue&&t.warningLowValue){f=Number(t.criticalLowValue);g=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<f){r=V.Error;}else if(this.CALCULATED_KPI_VALUE<=g){r=V.Critical;}else{r=V.Good;}}}else if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){d=Number(t.criticalHighValue);w=Number(t.warningHighValue);g=Number(t.warningLowValue);f=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<f||this.CALCULATED_KPI_VALUE>d){r=V.Error;}else if((this.CALCULATED_KPI_VALUE>=f&&this.CALCULATED_KPI_VALUE<=g)||(this.CALCULATED_KPI_VALUE>=w&&this.CALCULATED_KPI_VALUE<=d)){r=V.Critical;}else{r=V.Good;}}return r;}catch(e){b.logError(e);}},_processDataForComparisonChart:function(d,b,u){var f=[],e={},i,t,l;var g;var T=[];var h=this;for(i=0;i<d.results.length;i++){var j=d.results[i];}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oConfig.EVALUATION.ODATA_URL,this.oConfig.EVALUATION.ODATA_ENTITYSET);for(i=0,l=T.length;i<l;i++){t=T[i];e[t.key]=t.value;}var k=h.oConfig.TILE_PROPERTIES.COLUMN_NAMES||h.oConfig.EVALUATION.COLUMN_NAMES;for(i=0;i<k.length;i++){var n={};var o=k[i];n.value=Number(j[o.COLUMN_NAME]);var p=Number(j[o.COLUMN_NAME]);if(h.oConfig.EVALUATION.SCALING===-2){p*=100;}g=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(p,h.oConfig.EVALUATION.SCALING,h.oConfig.EVALUATION.DECIMAL_PRECISION);if(h.oConfig.EVALUATION.SCALING===-2){g+=" %";}n.displayValue=g.toString();if(u[i]&&j[u[i].name]){n.displayValue+=" "+j[u[i].name];}n.color=o.semanticColor;n.title=e[o.COLUMN_NAME]||o.COLUMN_NAME;f.push(n);}return f;},getTrendIndicator:function(t,v){var b=this;t=Number(t);try{var d=D.None;if(t>v){d=D.Down;}else if(t<v){d=D.Up;}return d;}catch(e){b.logError(e);}},fetchKpiValue:function(s,E){var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL,b=this.oConfig.EVALUATION.ODATA_ENTITYSET,d;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){d=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{d=this.oConfig.EVALUATION.COLUMN_NAME;var f=d;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(var j=0;j<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;j++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME!==this.oConfig.EVALUATION.COLUMN_NAME){f=f+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME;}}}}var g=this.oConfig.EVALUATION_VALUES;var h=c.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!h){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=d+",asc";o["1"]=d+",desc";var k=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var l=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),b,f,null,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){l.uri+="&$orderby="+k[0]+" "+k[2];}else{l.uri+="&$orderby="+k[0]+" "+k[1];}this.writeData={};this.comparisionChartODataRef=l.model.read(l.uri,null,null,true,function(g){if(g&&g.results&&g.results.length){if(l.unit){t.writeData.unit=l.unit;}t.oConfig.TILE_PROPERTIES.FINALVALUE=g;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,f.split(",")[0],l.unit);t.writeData.data=g;var p;for(var i=0;i<t.oConfig.TILE_PROPERTIES.FINALVALUE.length;i++){if(t.oConfig.TILE_PROPERTIES.FINALVALUE[i].title===t.DEFINITION_DATA.EVALUATION.COLUMN_NAME){t.writeData.numericData=t.oConfig.TILE_PROPERTIES.FINALVALUE[i];p=t.oConfig.TILE_PROPERTIES.FINALVALUE[i].value;t.getTrendIndicator(t.setThresholdValues().trendValue,p);t._updateTileModel({valueColor:t.oConfig.TILE_PROPERTIES.FINALVALUE[i].color,value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(calculatedValueForScaling),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString()});break;}}c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(g.results.length===0){t.oConfig.TILE_PROPERTIES.FINALVALUE=g;t.writeData.data=g;c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{E.call(t,"no Response from QueryServiceUri");}},function(i){if(i&&i.response){L.error(i.message+" : "+i.request.requestUri);E.call(t,i);}});if(!t.writeData.numericData){var n=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),b,d,null,n);if(Q){t.QUERY_SERVICE_MODEL=Q.model;t.queryUriForKpiValue=Q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(Q.uri,null,null,true,function(g){if(g&&g.results&&g.results.length){if(Q.unit){t._updateTileModel({unitNumeric:g.results[0][Q.unit.name]});t.writeData.unitNumeric=Q.unit;t.writeData.unitNumeric.name=Q.unit.name;}t.writeData.numericData=g.results[0];t.DEFINITION_DATA.value=t.writeData.numericData[t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];t.writeData.numericData.color=t.getTrendColor(t.setThresholdValues());t.DEFINITION_DATA.valueColor=t.writeData.numericData.color;var i="";var p=g.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var r=t.getTrendIndicator(t.setThresholdValues().trendValue,p);if(t.oConfig.EVALUATION.SCALING===-2){p*=100;t.getView().oNumericContent.setFormatterValue(false);}i=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(p),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING===-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:i.toString(),valueColor:t.writeData.numericData.color,indicator:r});}else{E.call(t,"no Response from QueryServiceUri");}});}}}else{if(h.unit){t._updateTileModel({unit:h.data.results[0][h.unit.name]});}if(h.data&&h.data.results&&h.data.results.length){t.oConfig.TILE_PROPERTIES.FINALVALUE=h.data;t._updateTileModel({value:h.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]});t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,f,t.writeData.unit);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(g.results.length===0){t.oConfig.TILE_PROPERTIES.FINALVALUE=h.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{E.call(t,"no Response from QueryServiceUri");}}}catch(e){E.call(t,e);}},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k){this.CALCULATED_KPI_VALUE=k;t.oDualComparisonView.oGenericTile.setFrameType("TwoByOne");t.oDualComparisonView.oGenericTile.removeAllTileContent();t.oDualComparisonView.oGenericTile.addTileContent(t.oDualComparisonView.oNumericTile);t.oDualComparisonView.oGenericTile.addTileContent(t.oDualComparisonView.oComparisonTile);var b=this.CALCULATED_KPI_VALUE;var d,e;for(var i=0;i<b.length;i++){if(b[i].title===t.DEFINITION_DATA.EVALUATION.COLUMN_NAME){e=b[i].value;d=b[i].color||"Neutral";t._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(e),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),valueColor:d});break;}}if(!d&&!e){d=t.DEFINITION_DATA.valueColor;e=t.DEFINITION_DATA.value;}this._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(e),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),data:this.CALCULATED_KPI_VALUE});var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualComparisonView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oDualComparisonView.oGenericTile.setState(a.Loaded);var s="";if(d==="Error"){s="sb.error";}if(d==="Neutral"){s="sb.neutral";}if(d==="Critical"){s="sb.critical";}if(d==="Good"){s="sb.good";}var T=t.setThresholdValues();var f,g,h,v,j,l,o,p,r;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){f=this.CALCULATED_KPI_VALUE[0].title;v=this.CALCULATED_KPI_VALUE[0].value;o=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){g=this.CALCULATED_KPI_VALUE[1].title;j=this.CALCULATED_KPI_VALUE[1].value;p=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){h=this.CALCULATED_KPI_VALUE[2].title;l=this.CALCULATED_KPI_VALUE[2].value;r=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color);}var u={status:s,actual:e,target:T.targetValue,cH:T.criticalHighValue,wH:T.warningHighValue,wL:T.warningLowValue,cL:T.criticalLowValue};var w={m1:f,v1:v,c1:o,m2:g,v2:j,c2:p,m3:h,v3:l,c3:r};var C=t.oDualComparisonView.oGenericTile.getTileContent()[0].getContent();var x=t.oDualComparisonView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",u);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(x,"COMP",w);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var b=c.getEvaluationById(this.oConfig.EVALUATION.ID);if(b){t.oConfig.EVALUATION_FILTERS=b.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;c.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(C){if(!C.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){C.flowWithoutDesignTimeCall();}else{C.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualComparisonView=this.getView();this.oChip=this.oDualComparisonView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oChip.url.getApplicationSystem();this.oDualComparisonView.oGenericTile.setState(a.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),function(b){t.oConfig=b;if(t.oChip.preview){t.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oChip.preview.isEnabled()){t.setTitle();t._updateTileModel({value:1,size:S.Auto,frameType:"TwoByOne",state:a.Loading,valueColor:V.Good,indicator:D.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});t.oDualComparisonView.oGenericTile.setState(a.Loaded);}else{t.setTitle();t.oDualComparisonView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.comparisionChartODataRef);c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oChip.configuration.getParameterValueAsString("isSufficient"))){c.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}});return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualComparison/DualComparison.view',["sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(N,T,C,a,G,J){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualComparison.DualComparison",{getControllerName:function(){return"tiles.indicatorDualComparison.DualComparison";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var t=this;t.oGenericTileData={};t.oNumericContent=new N({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new T({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});t.oCmprsDataTmpl=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new a({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oComparisonTile=new T({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,t.oComparisonTile]});t.oGenericTileModel=new J();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualContribution/DualContribution.controller',["sap/ushell/components/tiles/indicatorTileUtils/cache","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(c,m,q,L){"use strict";var V=m.ValueColor;var S=m.Size;var D=m.DeviationIndicator;var a=m.LoadState;sap.ui.controller("tiles.indicatorDualContribution.DualContribution",{getTile:function(){return this.oDualContributionView.oGenericTile;},_updateTileModel:function(n){var b=this.getTile().getModel().getData();q.extend(b,n);this.getTile().getModel().setData(b);this.getTile().getModel().updateBindings();},setTitle:function(){var t=this;var b=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:b.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:b.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},logError:function(e){this.oDualContributionView.oGenericTile.setState(a.Failed);this.oDualContributionView.oGenericTile.setState(a.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},getTrendIndicator:function(t,v){var b=this;t=Number(t);try{var d=D.None;if(t>v){d=D.Down;}else if(t<v){d=D.Up;}return d;}catch(e){b.logError(e);}},_processDataForComparisonChart:function(d,b,f){var s=this.oConfig.TILE_PROPERTIES.semanticMeasure;var g=[];var t;for(var i=0;i<d.results.length;i++){var h=d.results[i];var j={};try{j.title=h[f].toString();}catch(e){j.title="";}j.value=Number(h[b]);var k=Number(h[b]);if(this.oConfig.EVALUATION.SCALING===-2){k*=100;}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(k,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);j.displayValue=t.toString();if(typeof s==="undefined"){j.color="Neutral";}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MA"){if(j.value>h[s]){j.color="Good";}else{j.color="Error";}}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MI"){if(j.value<h[s]){j.color="Good";}else{j.color="Error";}}else{j.color="Neutral";}g.push(j);}return g;},fetchKpiValue:function(s,E){var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL,b=this.oConfig.EVALUATION.ODATA_ENTITYSET,d;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){d=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{d=this.oConfig.EVALUATION.COLUMN_NAME;}var f=this.oConfig.TILE_PROPERTIES.dimension;var g=this.oConfig.EVALUATION_VALUES;var h=c.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!h){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=d+",asc";o["1"]=d+",desc";o["2"]=f+",asc";o["3"]=f+",desc";var i=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var j=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),b,d,f,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){j.uri+="&$top=3&$orderby="+i[0]+" "+i[2];}else{j.uri+="&$top=3&$orderby="+i[0]+" "+i[1];}this.comparisionChartODataRef=j.model.read(j.uri,null,null,true,function(g){if(j.unit[0]){t._updateTileModel({unitContribution:g.results[0][j.unit[0].name]});t.writeData.unitContribution=j.unit[0];t.writeData.unitContribution.name=j.unit[0].name;}if(g&&g.results&&g.results.length){f=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oChip.url.addSystemToServiceUrl(u),b,f);t.writeData.dimension=f;t.oConfig.TILE_PROPERTIES.FINALVALUE=g;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,d.split(",")[0],f);t.writeData.data=g;c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(g.results.length===0){t.oConfig.TILE_PROPERTIES.FINALVALUE=g;t.writeData.data=g;c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);}else{E.call(t,"no Response from QueryServiceUri");}},function(r){if(r&&r.response){L.error(r.message+" : "+r.request.requestUri);E.call(t,r);}});var k=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),b,d,null,k);if(Q){t.QUERY_SERVICE_MODEL=Q.model;t.queryUriForKpiValue=Q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(Q.uri,null,null,true,function(g){if(g&&g.results&&g.results.length){if(Q.unit){t._updateTileModel({unitNumeric:g.results[0][Q.unit.name]});t.writeData.unitNumeric=Q.unit;t.writeData.unitNumeric.name=Q.unit.name;}t.writeData.numericData=g;var n="";var l=g.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var p=t.getTrendIndicator(t.setThresholdValues().trendValue,l);if(t.oConfig.EVALUATION.SCALING===-2){l*=100;t.getView().oNumericContent.setFormatterValue(false);}t.DEFINITION_DATA.value=l;n=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(l),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING===-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:n.toString(),valueColor:t.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution,indicator:p});s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE,l);}else{E.call(t,"no Response from QueryServiceUri");}});}}else{var T=t.setThresholdValues();var l;if(h.unitContribution){t._updateTileModel({unitContribution:h.data.results[0][h.unitContribution.name]});}if(h.unitNumeric){t._updateTileModel({unitNumeric:h.numericData.results[0][h.unitNumeric.name]});}if(h.data&&h.data.results&&h.data.results.length){f=h.dimension;t.oConfig.TILE_PROPERTIES.FINALVALUE=h.data;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,d.split(",")[0],f);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(g.results.length===0){t.oConfig.TILE_PROPERTIES.FINALVALUE=h.data;}else{E.call(t,"no Response from QueryServiceUri");}if(h.numericData&&h.numericData.results&&h.numericData.results.length){l=h.numericData.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING===-2){l*=100;t.getView().oNumericContent.setFormatterValue(false);}var n=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(l),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING===-2){t._updateTileModel({scale:"%"});}var p=t.getTrendIndicator(T.trendValue,l);t._updateTileModel({value:n.toString(),indicator:p,valueColor:t.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution});s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE,l);}else{E.call(t,"no Response from QueryServiceUri");}}}catch(e){E.call(t,e);}},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k,b){this.CALCULATED_KPI_VALUE=k;if(t.oConfig.TILE_PROPERTIES.frameType==="TwoByOne"){t.oDualContributionView.oGenericTile.setFrameType("TwoByOne");t.oDualContributionView.oGenericTile.removeAllTileContent();t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oNumericTile);t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oComparisonTile);}else{t.oDualContributionView.oGenericTile.setFrameType("OneByOne");t.oDualContributionView.oGenericTile.removeAllTileContent();t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oComparisonTile);}var d=this.CALCULATED_KPI_VALUE;var e=this.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution;for(var i=0;i<this.CALCULATED_KPI_VALUE.length;i++){d[i].color=e;}this._updateTileModel({data:d});var T=t.setThresholdValues();var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualContributionView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oDualContributionView.oGenericTile.setState(a.Loaded);var s="";if(e==="Error"){s="sb.error";}if(e==="Neutral"){s="sb.neutral";}if(e==="Critical"){s="sb.critical";}if(e==="Good"){s="sb.good";}T=t.setThresholdValues();var f,g,h,v,j,l,o,p,r;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){f=this.CALCULATED_KPI_VALUE[0].title;v=this.CALCULATED_KPI_VALUE[0].value;o=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){g=this.CALCULATED_KPI_VALUE[1].title;j=this.CALCULATED_KPI_VALUE[1].value;p=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){h=this.CALCULATED_KPI_VALUE[2].title;l=this.CALCULATED_KPI_VALUE[2].value;r=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color);}var u={status:s,actual:b,target:T.targetValue,cH:T.criticalHighValue,wH:T.warningHighValue,wL:T.warningLowValue,cL:T.criticalLowValue};var w={m1:f,v1:v,c1:o,m2:g,v2:j,c2:p,m3:h,v3:l,c3:r};var C=t.oDualContributionView.oGenericTile.getTileContent()[0].getContent();var x=t.oDualContributionView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",u);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(x,"CONT",w);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var b=c.getEvaluationById(this.oConfig.EVALUATION.ID);if(b){t.oConfig.EVALUATION_FILTERS=b.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;c.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(C){if(!C.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){C.flowWithoutDesignTimeCall();}else{C.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},onInit:function(){var t=this;t.writeData={};this.firstTimeVisible=false;this.oDualContributionView=this.getView();this.oChip=this.oDualContributionView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oChip.url.getApplicationSystem();this.oDualContributionView.oGenericTile.setState(a.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),function(b){t.oConfig=b;if(t.oChip.preview){t.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oChip.preview.isEnabled()){t.setTitle();t._updateTileModel({value:8888,size:S.Auto,frameType:"TwoByOne",state:a.Loading,valueColor:V.Error,indicator:D.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});t.oDualContributionView.oGenericTile.setState(a.Loaded);}else{t.setTitle();t.oDualContributionView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.comparisionChartODataRef);c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oChip.configuration.getParameterValueAsString("isSufficient"))){c.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualContribution/DualContribution.view',["sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(N,T,C,a,G,J){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualContribution.DualContribution",{getControllerName:function(){return"tiles.indicatorDualContribution.DualContribution";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var t=this;t.oGenericTileData={};t.oNumericContent=new N({value:"{/value}",scale:"{/scale}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new T({unit:"{/unitNumeric}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});t.oCmprsDataTmpl=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new a({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oComparisonTile=new T({unit:"{/unitContribution}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,t.oComparisonTile]});t.oGenericTileModel=new J();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.controller',["sap/ui/model/json/JSONModel","sap/ushell/components/tiles/indicatorTileUtils/cache","sap/m/library","sap/ui/thirdparty/jquery"],function(J,c,m,q){"use strict";var D=m.DeviationIndicator;var V=m.ValueColor;var L=m.LoadState;sap.ui.controller("tiles.indicatorDualDeviation.DualDeviation",{logError:function(e){this.oDualDeviationView.oGenericTile.setState(L.Failed);this.oDualDeviationView.oGenericTile.setState(L.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},getThresholdsObjAndColor:function(t){try{var T={};T.arrObj=[];T.returnColor=V.Neutral;var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var w,a,b,d;if(i==="MI"){b=Number(t.criticalHighValue)||0;d=Number(t.warningHighValue)||0;if(b&&d){b=window.parseFloat(b);d=window.parseFloat(d);T.arrObj.push({value:b,color:V.Error});T.arrObj.push({value:d,color:V.Critical});if(this.CALCULATED_KPI_VALUE<d){T.returnColor=V.Good;}else if(this.CALCULATED_KPI_VALUE<=b){T.returnColor=V.Critical;}else{T.returnColor=V.Error;}}}else if(i==="MA"){a=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(a&&w){a=window.parseFloat(a);w=window.parseFloat(w);T.arrObj.push({value:a,color:V.Error});T.arrObj.push({value:w,color:V.Critical});if(this.CALCULATED_KPI_VALUE<a){T.returnColor=V.Error;}else if(this.CALCULATED_KPI_VALUE<=w){T.returnColor=V.Critical;}else{T.returnColor=V.Good;}}}else{b=Number(t.criticalHighValue)||0;d=Number(t.warningHighValue)||0;a=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(w&&d&&a&&a){b=window.parseFloat(b);d=window.parseFloat(d);w=window.parseFloat(w);a=window.parseFloat(a);T.arrObj.push({value:b,color:V.Error});T.arrObj.push({value:d,color:V.Critical});T.arrObj.push({value:w,color:V.Critical});T.arrObj.push({value:a,color:V.Error});if(this.CALCULATED_KPI_VALUE<a||this.CALCULATED_KPI_VALUE>b){T.returnColor=V.Error;}else if((this.CALCULATED_KPI_VALUE>=a&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=d&&this.CALCULATED_KPI_VALUE<=b)){T.returnColor=V.Critical;}else{T.returnColor=V.Good;}}}return T;}catch(e){this.logError(e);}},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=D.None;if(t>v){b=D.Down;}else if(t<v){b=D.Up;}return b;}catch(e){a.logError(e);}},getTile:function(){return this.oDualDeviationView.oGenericTile;},_updateTileModel:function(n){var a=this.getTile().getModel().getData();q.extend(a,n);this.getTile().getModel().setData(a);},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},setThresholdValues:function(){var t=this;var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;},fetchKpiValue:function(s,E){var t=this;var k=0;try{var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var a=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var T=this.setThresholdValues();var M=T.fullyFormedMeasure;var b=c.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!b){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),a,M,null,v);if(Q){this.QUERY_SERVICE_MODEL=Q.model;this.queryUriForKpiValue=Q.uri;try{this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(Q.uri,null,null,true,function(g){t.writeData={};if(g&&g.results&&g.results.length){k=g.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(Q.unit[0]){t._updateTileModel({unit:g.results[0][Q.unit[0].name]});t.writeData.unit=Q.unit[0];t.writeData.unit.name=Q.unit[0].name;}t.writeData.numericData=g;var S="",f;var d=k;if(t.oConfig.EVALUATION.SCALING===-2){d*=100;t.getView().oNumericContent.setFormatterValue(false);}S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(d),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);f=t.getTrendIndicator(T.trendValue,d);if(t.oConfig.EVALUATION.SCALING===-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:S.toString(),indicator:f,valueColor:t.getThresholdsObjAndColor(T).returnColor});t.writeData.data=g;c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){T.criticalHighValue=g.results[0][T.sCriticalHigh];T.criticalLowValue=g.results[0][T.sCriticalLow];T.warningHighValue=g.results[0][T.sWarningHigh];T.warningLowValue=g.results[0][T.sWarningLow];T.targetValue=g.results[0][T.sTarget];T.trendValue=g.results[0][T.sTrend];}s.call(t,k,T);}else{E.call(t,"no Response from QueryServiceUri");}},function(g){if(g&&g.response){E.call(t,g.message);}});}catch(e){t.logError("Error in Query Service URI");}}}else if(b.data&&b.data.results&&b.data.results.length){var d,S,f;T=t.setThresholdValues();d=b.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING===-2){d*=100;t.getView().oNumericContent.setFormatterValue(true);}if(t.oConfig.EVALUATION.SCALING===-2){t._updateTileModel({scale:"%"});}S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(d),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);f=t.getTrendIndicator(T.trendValue,d);if(b.unit){t._updateTileModel({unit:b.data.results[0][b.unit.name]});}t._updateTileModel({indicator:f,value:S.toString()});if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){T.criticalHighValue=b.data.results[0][T.sCriticalHigh];T.criticalLowValue=b.data.results[0][T.sCriticalLow];T.warningHighValue=b.data.results[0][T.sWarningHigh];T.warningLowValue=b.data.results[0][T.sWarningLow];T.targetValue=b.data.results[0][T.sTarget];T.trendValue=b.data.results[0][T.sTrend];}s.call(t,b.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME],T);}else{E.call(t,"no Response from QueryServiceUri");}}catch(e){E.call(t,e);}},flowWithoutDesignTimeCall:function(){var t=this;var f,a;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k,b){var d=Number(k);if(this.oConfig.EVALUATION.SCALING===-2){d*=100;}f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(d),this.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);this.CALCULATED_KPI_VALUE=Number(k);var e={};var g=this.getThresholdsObjAndColor(b);var h={value:Number(k),color:g.returnColor};e.valueColor=h.color;e.actualValueLabel=f.toString();e.actual=h;var i=this.DEFINITION_DATA.EVALUATION_VALUES,j;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE==="MEASURE"){j=Number(b.targetValue);if(this.oConfig.EVALUATION.SCALING===-2){j*=100;}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(j,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);e.targetValue=Number(b.targetValue);e.targetValueLabel=a.toString();}else{for(var l=0;l<i.length;l++){if(i[l].TYPE==="TA"){j=Number(i[l].FIXED);if(this.oConfig.EVALUATION.SCALING===-2){j*=100;}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(j);e.targetValue=Number(i[l].FIXED);e.targetValueLabel=a.toString();}}}this._updateTileModel(e);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualDeviationView.oGenericTile.$().wrap("<a href ='"+n+"'/>");this.oDualDeviationView.oGenericTile.setState(L.Loaded);var s="";if(e.valueColor==="Error"){s="sb.error";}if(e.valueColor==="Neutral"){s="sb.neutral";}if(e.valueColor==="Critical"){s="sb.critical";}if(e.valueColor==="Good"){s="sb.good";}var v={status:s,actual:d,target:b.targetValue,cH:b.criticalHighValue,wH:b.warningHighValue,wL:b.warningLowValue,cL:b.criticalLowValue};var o=v;var C=t.oDualDeviationView.oGenericTile.getTileContent()[0].getContent();var p=t.oDualDeviationView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",v);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(p,"DT",o);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var a=c.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;c.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(C){if(!C.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){C.flowWithoutDesignTimeCall();}else{C.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);}if(i){this.refreshHandler(this);}},setTextInTile:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualDeviationView=this.getView();this.oViewData=this.oDualDeviationView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oTileApi.url.getApplicationSystem();this.oDualDeviationView.oGenericTile.setState(L.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),t.oTileApi.preview.isEnabled(),function(a){t.oConfig=a;t.setTextInTile();if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oTileApi.preview.isEnabled()){t._updateTileModel({valueColor:"Good",value:100,frameType:"TwoByOne",unit:"USD",actual:{value:120,color:V.Good},targetValue:100,thresholds:[{value:0,color:V.Error},{value:50,color:V.Critical},{value:150,color:V.Critical},{value:200,color:V.Error}],showActualValue:true,showTargetValue:true});t.oDualDeviationView.oGenericTile.setState(L.Loaded);}else{t.oDualDeviationView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);c.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){c.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new J({}));}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);}});return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.view',["sap/m/library","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(m,N,T,B,a,G,J){"use strict";var S=m.Size;var L=m.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualDeviation.DualDeviation",{getControllerName:function(){return"tiles.indicatorDualDeviation.DualDeviation";},createContent:function(){var t=this;this.setHeight("100%");this.setWidth("100%");var h="Lorem ipsum";var s="Lorem ipsum";var b=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(b.title&&b.subTitle){h=b.title;s=b.subTitle;}var d={subheader:s,header:h,footerNum:"",footerComp:"",frameType:"TwoByOne",state:L.Loading,scale:""};t.oNumericContent=new N({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new T({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});var o=new B({value:"{value}",color:"{color}"});t.oBCTmpl=new a({size:S.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:o,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});var n=new T({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oBCTmpl});t.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,n]});var g=new J();g.setData(d);t.oGenericTile.setModel(g);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualTrend/DualTrend.controller',["sap/ui/model/json/JSONModel","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartItem","sap/ushell/components/tiles/indicatorTileUtils/cache","sap/m/library","sap/ui/thirdparty/jquery"],function(J,A,c,d,m,q){"use strict";var S=m.Size;var V=m.ValueColor;var D=m.DeviationIndicator;var L=m.LoadState;sap.ui.controller("tiles.indicatorDualTrend.DualTrend",{logError:function(e){this.oDualTrendView.oGenericTile.setState(L.Failed);this.oDualTrendView.oGenericTile.setState(L.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=D.None;if(t>v){b=D.Down;}else if(t<v){b=D.Up;}return b;}catch(e){a.logError(e);}},getTile:function(){return this.oDualTrendView.oGenericTile;},getTrendColor:function(t){var a=this;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var r=V.Neutral;if(i==="MI"){if(t.criticalHighValue&&t.warningHighValue){t.criticalHighValue=Number(t.criticalHighValue);t.warningHighValue=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<t.warningHighValue){r=V.Good;}else if(this.CALCULATED_KPI_VALUE<=t.criticalHighValue){r=V.Critical;}else{r=V.Error;}}}else if(i==="MA"){if(t.criticalLowValue&&t.warningLowValue){t.criticalLowValue=Number(t.criticalLowValue);t.warningLowValue=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<t.criticalLowValue){r=V.Error;}else if(this.CALCULATED_KPI_VALUE<=t.warningLowValue){r=V.Critical;}else{r=V.Good;}}}else if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){t.criticalHighValue=Number(t.criticalHighValue);t.warningHighValue=Number(t.warningHighValue);t.warningLowValue=Number(t.warningLowValue);t.criticalLowValue=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<t.criticalLowValue||this.CALCULATED_KPI_VALUE>t.criticalHighValue){r=V.Error;}else if((this.CALCULATED_KPI_VALUE>=t.criticalLowValue&&this.CALCULATED_KPI_VALUE<=t.warningLowValue)||(this.CALCULATED_KPI_VALUE>=t.warningHighValue&&this.CALCULATED_KPI_VALUE<=t.criticalHighValue)){r=V.Critical;}else{r=V.Good;}}return r;}catch(e){a.logError(e);}},_updateTileModel:function(n){var a=this.getTile().getModel().getData();q.extend(a,n);this.getTile().getModel().setData(a);},onAfterFinalEvaluation:function(){var t=this;var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var E=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var M=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var f=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(f==undefined){this.logError();return;}var g=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE,h=this.DEFINITION_DATA.EVALUATION_VALUES,Q;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var j=M;switch(g){case"MI":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningHigh&&t.sCriticalHigh&&t.sTarget){j+=","+t.sWarningHigh+","+t.sCriticalHigh+","+t.sTarget;}break;case"MA":t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget){j+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget;}break;case"RA":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget&&t.sWarningHigh&&t.sCriticalHigh){j+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget+","+t.sWarningHigh+","+t.sCriticalHigh;}break;}Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,j,f,v);}else{Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,M,f,v);}var k=d.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!k){if(Q){this.queryUriForTrendChart=Q.uri;t.writeData={};try{this.trendChartODataReadRef=Q.model.read(Q.uri,null,null,true,function(a){if(a&&a.results&&a.results.length){if(Q.unit[0]){t.unit=a.results[0][Q.unit[0].name];t.writeData.unit=Q.unit[0];t.writeData.unit.name=Q.unit[0].name;}t.queryUriResponseForTrendChart=a;f=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oTileApi.url.addSystemToServiceUrl(u),E,f);a.firstXlabel=a.results[0][f];a.lastXlabel=a.results[a.results.length-1][f];t.writeData.data=a;t.writeData.dimensionName=f;d.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);var b=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualTrendView.oGenericTile.$().wrap("<a href ='"+b+"'/>");t.oDualTrendView.oGenericTile.setState(L.Loaded);_(a,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);}else{t.logError("no Response from QueryServiceUri");}},function(a){if(a&&a.response){t.logError("Data call failed");}});}catch(e){t.logError(e);}}else{t.logError();}v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,M,null,v);if(Q){t.QUERY_SERVICE_MODEL=Q.model;t.queryUriForKpiValue=Q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(Q.uri,null,null,true,function(a){if(a&&a.results&&a.results.length){var s="";var l=a.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];t.writeData.numericData=a;if(t.oConfig.EVALUATION.SCALING==-2){l*=100;}s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(l),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}var n=t.getTrendIndicator(t.setThresholdValues().trendValue,l);t._updateTileModel({value:s.toString(),valueColor:t.getTrendColor(t.setThresholdValues()),indicator:n});}else{fnError.call(t,"no Response from QueryServiceUri");}});}}else{try{if(k.unit!==undefined){t.unit=k.data.results[0][k.unit.name];}t.queryUriResponseForTrendChart=k.data;f=k.dimensionName;var l=k.numericData.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var n=t.getTrendIndicator(t.setThresholdValues().trendValue,k.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]);var s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(l),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);t.oDualTrendView.oGenericTile.setState(L.Loaded);_(k.data,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);t._updateTileModel({value:s.toString(),valueColor:t.getTrendColor(t.setThresholdValues()),indicator:n});}catch(e){t.logError(e);}}function _(o,p){var r=[];var w=[];var x=[];var y=[];var z=[];var B=[];var C=o.firstXlabel;var F,G,H,I,K;var N=o.lastXlabel;var O=Number(o.results[0][M]);var P=Number(o.results[o.results.length-1][M]);var i;for(i in o.results){o.results[i][f]=Number(i);o.results[i][M]=Number(o.results[i][M]);if(t.sWarningHigh){o.results[i][t.sWarningHigh]=Number(o.results[i][t.sWarningHigh]);}if(t.sCriticalHigh){o.results[i][t.sCriticalHigh]=Number(o.results[i][t.sCriticalHigh]);}if(t.sCriticalLow){o.results[i][t.sCriticalLow]=Number(o.results[i][t.sCriticalLow]);}if(t.sWarningLow){o.results[i][t.sWarningLow]=Number(o.results[i][t.sWarningLow]);}if(t.sTarget){o.results[i][t.sTarget]=Number(o.results[i][t.sTarget]);}if(t.sWarningHigh){x.push(o.results[i][t.sWarningHigh]);}if(t.sCriticalHigh){y.push(o.results[i][t.sCriticalHigh]);}if(t.sCriticalLow){z.push(o.results[i][t.sCriticalLow]);}if(t.sWarningLow){B.push(o.results[i][t.sWarningLow]);}r.push(o.results[i][f]);w.push(o.results[i][M]);}try{C=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(C);N=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(N);}catch(e){t.logError(e);}var R=Number(O);if(t.oConfig.EVALUATION.SCALING==-2){R*=100;}var T=Math.min.apply(Math,w);var U=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(R,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){U+=" %";}var W=U.toString();var X=Number(P);if(t.oConfig.EVALUATION.SCALING==-2){X*=100;}var Y=Math.max.apply(Math,w);var Z=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(X,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){Z+=" %";}var $=Z.toString();try{var a1=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,r));var b1=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,r));}catch(e){t.logError(e);}if(p=="MEASURE"){if(x.length!=0){t.firstwH=x[a1];t.lastwH=x[b1];}if(y.length!=0){t.firstcH=y[a1];t.lastcH=y[b1];}if(z.length!=0){t.firstcL=z[a1];t.lastcL=z[b1];}if(B.length!=0){t.firstwL=B[a1];t.lastwL=B[b1];}}var c1={width:"100%",height:"100%",unit:t.unit||"",chart:{color:"Neutral",data:o.results},size:"Auto",minXValue:a1,maxXValue:b1,minYValue:T,maxYValue:Y,firstXLabel:{label:C+"",color:"Neutral"},lastXLabel:{label:N+"",color:"Neutral"},firstYLabel:{label:W+"",color:"Neutral"},lastYLabel:{label:$+"",color:"Neutral"},minLabel:{},maxLabel:{}},d1;switch(g){case"MA":for(i in h){if(h[i].TYPE=="CL"){c1.minThreshold={color:"Error"};d1={};d1[f]="";d1[M]=Number(h[i].FIXED);t.cl=Number(h[i].FIXED);c1.minThreshold.data=(p=="MEASURE")?o.results:[d1];F=(p=="MEASURE")?t.sCriticalLow:M;}else if(h[i].TYPE=="WL"){c1.maxThreshold={color:"Good"};d1={};d1[f]="";d1[M]=Number(h[i].FIXED);c1.maxThreshold.data=(p=="MEASURE")?o.results:[d1];G=(p=="MEASURE")?t.sWarningLow:M;t.wl=Number(h[i].FIXED);}else if(h[i].TYPE=="TA"){d1={};d1[f]="";d1[M]=Number(h[i].FIXED);c1.target={color:"Neutral"};c1.target.data=(p=="MEASURE")?o.results:[d1];K=(p=="MEASURE")?t.sTarget:M;}}c1.innerMinThreshold={data:[]};c1.innerMaxThreshold={data:[]};if(p=="FIXED"){c1.firstYLabel.color=O<t.cl?"Error":((t.cl<=O)&&(O<=t.wl))?"Critical":(O>t.wl)?"Good":"Neutral";c1.lastYLabel.color=P<t.cl?"Error":((t.cl<=P)&&(P<=t.wl))?"Critical":(P>t.wl)?"Good":"Neutral";}else if(p=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL){c1.firstYLabel.color=O<t.firstcL?"Error":((t.firstcL<=O)&&(O<=t.firstwL))?"Critical":(O>t.firstwL)?"Good":"Neutral";c1.lastYLabel.color=P<t.lastcL?"Error":((t.lastcL<=P)&&(P<=t.lastwL))?"Critical":(P>t.lastwL)?"Good":"Neutral";}break;case"MI":for(i in h){if(h[i].TYPE=="CH"){d1={};d1[f]="";d1[M]=Number(h[i].FIXED);t.ch=Number(h[i].FIXED);c1.maxThreshold={color:"Error"};c1.maxThreshold.data=(p=="MEASURE")?o.results:[d1];G=(p=="MEASURE")?t.sCriticalHigh:M;}else if(h[i].TYPE=="WH"){d1={};d1[f]="";d1[M]=Number(h[i].FIXED);t.wh=Number(h[i].FIXED);c1.minThreshold={color:"Good"};c1.minThreshold.data=(p=="MEASURE")?o.results:[d1];F=(p=="MEASURE")?t.sWarningHigh:M;}else if(h[i].TYPE=="TA"){d1={};d1[f]="";d1[M]=Number(h[i].FIXED);c1.target={color:"Neutral"};c1.target.data=(p=="MEASURE")?o.results:[d1];K=(p=="MEASURE")?t.sTarget:M;}}if(p=="FIXED"){c1.firstYLabel.color=O>t.ch?"Error":((t.wh<=O)&&(O<=t.ch))?"Critical":(O<t.wh)?"Good":"Neutral";c1.lastYLabel.color=P>t.ch?"Error":((t.wh<=P)&&(P<=t.ch))?"Critical":(P<t.wh)?"Good":"Neutral";}else if(p=="MEASURE"&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){c1.firstYLabel.color=O>t.firstcH?"Error":((t.firstwH<=O)&&(O<=t.firstcH))?"Critical":(O<t.firstwH)?"Good":"Neutral";c1.lastYLabel.color=P>t.lastcH?"Error":((t.lastwH<=P)&&(P<=t.lastcH))?"Critical":(P<t.lastwH)?"Good":"Neutral";}c1.innerMaxThreshold={data:[]};c1.innerMinThreshold={data:[]};break;case"RA":for(i in h){if(h[i].TYPE=="CH"){d1={};d1[f]="";d1[M]=Number(h[i].FIXED);t.ch=Number(h[i].FIXED);c1.maxThreshold={color:"Error"};c1.maxThreshold.data=(p=="MEASURE")?o.results:[d1];G=(p=="MEASURE")?t.sCriticalHigh:M;}else if(h[i].TYPE=="WH"){d1={};d1[f]="";d1[M]=Number(h[i].FIXED);t.wh=Number(h[i].FIXED);c1.innerMaxThreshold={color:"Good"};c1.innerMaxThreshold.data=(p=="MEASURE")?o.results:[d1];I=(p=="MEASURE")?t.sWarningHigh:M;}else if(h[i].TYPE=="WL"){d1={};d1[f]="";d1[M]=Number(h[i].FIXED);t.wl=Number(h[i].FIXED);c1.innerMinThreshold={color:"Good"};c1.innerMinThreshold.data=(p=="MEASURE")?o.results:[d1];H=(p=="MEASURE")?t.sWarningLow:M;}else if(h[i].TYPE=="CL"){d1={};d1[f]="";d1[M]=Number(h[i].FIXED);t.cl=Number(h[i].FIXED);c1.minThreshold={color:"Error"};c1.minThreshold.data=(p=="MEASURE")?o.results:[d1];F=(p=="MEASURE")?t.sCriticalLow:M;}else if(h[i].TYPE=="TA"){d1={};d1[f]="";d1[M]=Number(h[i].FIXED);c1.target={color:"Neutral"};c1.target.data=(p=="MEASURE")?o.results:[d1];K=(p=="MEASURE")?t.sTarget:M;}}if(p=="FIXED"){c1.firstYLabel.color=(O>t.ch||O<t.cl)?"Error":((t.wh<=O)&&(O<=t.ch))||((t.cl<=O)&&(O<=t.wl))?"Critical":((O>=t.wl)&&(O<=t.wh))?"Good":"Neutral";c1.lastYLabel.color=(P>t.ch||P<t.cl)?"Error":((t.wh<=P)&&(P<=t.ch))||((t.cl<=P)&&(P<=t.wl))?"Critical":((P>=t.wl)&&(P<=t.wh))?"Good":"Neutral";}else if(p=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){c1.firstYLabel.color=(O>t.firstcH||O<t.firstcL)?"Error":((t.firstwH<=O)&&(O<=t.firstcH))||((t.firstcL<=O)&&(O<=t.firstwL))?"Critical":((O>=t.firstwL)&&(O<=t.firstwH))?"Good":"Neutral";c1.lastYLabel.color=(P>t.lastcH||P<t.lastcL)?"Error":((t.lastwH<=P)&&(P<=t.lastcH))||((t.lastcL<=P)&&(P<=t.lastwL))?"Critical":((P>=t.lastwL)&&(P<=t.lastwH))?"Good":"Neutral";}break;}var e1=function(f1,a,b){return new c({color:"{/"+f1+"/color}",points:{path:"/"+f1+"/data",template:new A({x:"{"+a+"}",y:"{"+b+"}"})}});};t.getTile().getTileContent()[1].getContent().setTarget(e1("target",f,K));t.getTile().getTileContent()[1].getContent().setInnerMinThreshold(e1("innerMinThreshold",f,H));t.getTile().getTileContent()[1].getContent().setInnerMaxThreshold(e1("innerMaxThreshold",f,I));t.getTile().getTileContent()[1].getContent().setMinThreshold(e1("minThreshold",f,F));t.getTile().getTileContent()[1].getContent().setMaxThreshold(e1("maxThreshold",f,G));t.getTile().getTileContent()[1].getContent().setChart(e1("chart",f,M));t._updateTileModel(c1);}},flowWithoutDesignTimeCall:function(){this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;}this.onAfterFinalEvaluation();},flowWithDesignTimeCall:function(){var t=this;try{var a=d.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;d.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(C){if(!C.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){C.flowWithoutDesignTimeCall();}else{C.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);}if(i){this.refreshHandler(this);}},setTextInTile:function(){var t=this;this._updateTileModel({header:t.oTileApi.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:t.oTileApi.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualTrendView=this.getView();this.oViewData=this.oDualTrendView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oTileApi.url.getApplicationSystem();this.oDualTrendView.oGenericTile.setState(L.Loading);if(this.oTileApi.preview.isEnabled()){this.setTextInTile();this._updateTileModel({value:8888,size:S.Auto,frameType:"TwoByOne",state:L.Loading,valueColor:V.Error,indicator:D.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oDualTrendView.oGenericTile.setState(L.Loaded);}else{try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(a){t.oConfig=a;t.setTextInTile();t.oDualTrendView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.trendChartODataReadRef);d.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){d.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}});}catch(e){this.logError(e);}}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new J({}));}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);}});return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualTrend/DualTrend.view',["sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/suite/ui/microchart/AreaMicroChart","sap/m/TileContent","sap/m/NumericContent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(A,a,b,c,T,N,G,J){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualTrend.DualTrend",{getControllerName:function(){return"tiles.indicatorDualTrend.DualTrend";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var d=function(s){return new A({color:"Good",points:{path:"/"+s+"/data",template:new a({x:"{day}",y:"{balance}"})}});};var e=function(s){return new b({label:"{/"+s+"/label}",color:"{/"+s+"/color}"});};var g={footer:"",header:"",subheader:""};var n=new c({width:"{/width}",height:"{/height}",size:"{/size}",target:d("target"),innerMinThreshold:d("innerMinThreshold"),innerMaxThreshold:d("innerMaxThreshold"),minThreshold:d("minThreshold"),maxThreshold:d("maxThreshold"),chart:d("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:e("firstXLabel"),lastXLabel:e("lastXLabel"),firstYLabel:e("firstYLabel"),lastYLabel:e("lastYLabel"),minLabel:e("minLabel"),maxLabel:e("maxLabel")});var o=new T({unit:"{/unit}",size:"{/size}",content:n});var f=new N({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});var h=new T({unit:"{/unit}",size:"{/size}",content:f});this.oGenericTile=new G({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[h,o]});var i=new J();i.setData(g);this.oGenericTile.setModel(i);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.controller',["sap/ui/model/json/JSONModel","sap/suite/ui/commons/library","sap/ushell/components/tiles/indicatorTileUtils/cache"],function(J,a,b){"use strict";var I=a.InfoTileValueColor;var d=a.InfoTileSize;var L=a.LoadState;sap.ui.controller("tiles.indicatorHarveyBall.HarveyBallTile",{onInit:function(){this.getView().setModel(new J());this.initializeVariables();this.attachHandlers();this.getVariable("tile").setState(L.Loading);this.readChipConfiguration();},attachHandlers:function(){var t=this;var c=this.getVariable("chip");if(c.visible){c.visible.attachVisible(function(v){if(v){t.onVisible();}else{t.abortAllOpenODataRequests();}});}this.getVariable("tile").attachPress(function(){t.abortAllOpenODataRequests();var i=t.getVariable("indicatorUtils");t.getVariable("cache").setKpivalueById(t.getVariable("chipId"),null);window.location.hash=i.getNavigationTarget(t.getVariable("evalData"),t.getVariable("system"));});},initializeVariables:function(){this._variables={};this._oDataRequests={};var v=this.getView();var V=v.getViewData();var t=v.oTile;var c=V.chip;this.setVariable("indicatorUtils",sap.ushell.components.tiles.indicatorTileUtils.util);this.setVariable("cache",b);this.setVariable("hasAppeared",false);this.setVariable("chip",c);this.setVariable("tile",t);this.setVariable("tileControl",t.getTileContent()[0].getContent());this.setVariable("configurationString",c.configuration.getParameterValueAsString("tileConfiguration"));this.setVariable("system",c.url.getApplicationSystem());},getVariable:function(k){return this._variables[k];},setVariable:function(k,v){this._variables[k]=v;},readChipConfiguration:function(){var t=this;var c=this.getVariable("chip");var u=this.getVariable("indicatorUtils");u.getParsedChip(this.getVariable("configurationString"),function(e){t.setVariable("evalData",e);t.setVariable("chipId",e.TILE_PROPERTIES.id);t.setVariable("tileProperties",e.TILE_PROPERTIES);if(c.preview){c.preview.setTargetUrl(u.getNavigationTarget(e,t.getVariable("system")));t.loadPreviewData();if(c.preview.isEnabled()){t.getVariable("tile").setState(L.Loaded);}else{t.loadActualData();}}});},loadPreviewData:function(){var t=this.getVariable("indicatorUtils").getTileTitleSubtitle(this.getVariable("chip"));this.getView().getModel().setData({fractionValue:34,value:100,size:d.Auto,frameType:"OneByOne",color:"Good",state:L.Loading,header:t.title||this.getVariable("indicatorUtils").getChipTitle(this.getVariable("evalData")),subheader:t.subTitle||this.getVariable("indicatorUtils").getChipSubTitle(this.getVariable("evalData"))});},loadActualData:function(){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.getVariable("cache").setEvaluationById(this.getVariable("chipId"),this.getVariable("evalData"));this.onEvalFiltersFetched();}else{this.fetchEvalFilters(this.onEvalFiltersFetched);}},registerOpenODataRequest:function(k,r){this._oDataRequests[k]=r;},deregisterOpenODataRequest:function(k){delete this._oDataRequests[k];},abortAllOpenODataRequests:function(){for(var c in this._oDataRequests){try{this.getVariable("indicatorUtils").abortPendingODataCalls(this._oDataRequests[c]);delete this._oDataRequests[c];}catch(e){}}},fetchKpiValue:function(p){function m(o,u,C,S,l){var D=o.read(u,null,null,true,function(n){t.deregisterOpenODataRequest(C.type);if(n&&n.results&&n.results.length){try{if(C.thresholds&&C.thresholds.length){t._setThresholdValues(n.results[0]);}k[C.type]=n.results[0][C.measure];k.unit=k.unit||n.results[0][C.unit]||"";if(--j==0){t.getVariable("cache").setKpivalueById(t.getVariable("chipId"),k);S.call(t,k);}}catch(e){t.logError(e);}}else{l.call(t,"no data");}},function(e){t.deregisterOpenODataRequest(C.type);if(e&&e.response){l.call(t,e.message);}});t.registerOpenODataRequest(C.type,D);}var t=this;var i=this.getVariable("indicatorUtils");var c=this.getVariable("cache").getKpivalueById(this.getVariable("chipId"));if(c){p.fnS.call(t,c);}else{var M=p.measure1,s=p.measure2;var u=p.url,E=p.entitySet;var v=p.filters;var f=p.fractionFilters.concat(v);var q,Q;var g,h,k;var j=2;f.forEach(function(e){e.value=e.value+"";e.valueTo=e.valueTo+"";});if(p.thresholds&&p.thresholds.length){q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,M+","+p.thresholds,null,v);}else{q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,M,null,v);}Q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,s,null,f);g=q.unit[0];h=Q.unit[0];k={kpiValue:null,fractionValue:null,unit:""};if(q){m(q.model,q.uri,{measure:M,type:"kpiValue",unit:g,thresholds:p.thresholds},p.fnS,p.fnE);}if(Q){m(Q.model,Q.uri,{measure:s,type:"fractionValue",unit:h},p.fnS,p.fnE);}if(!(q&&Q)){p.fnE.call(t,"Error Preparing Query Service URI");}}},_setThresholdValues:function(c){var t=this.getVariable("oThreshold"),e;if(t){if(this.getVariable("evalData").EVALUATION.VALUES_SOURCE=="RELATIVE"){if(t.TA.COLUMN_NAME){t.TA.VALUE=parseFloat(c[t.TA.COLUMN_NAME]);for(e in t){if(!t[e].COLUMN_NAME){t[e].VALUE=t.TA.VALUE*t[e].VALUE/100;}}}}else{for(e in t){if(t[e].COLUMN_NAME){t[e].VALUE=parseFloat(c[t[e].COLUMN_NAME]);}}}}this.setVariable("oThreshold",t);},getThresholdObject:function(){var t=this.getVariable("oThreshold");if(!t){var T=this.getVariable("evalData").EVALUATION_VALUES;t={};for(var i=0,l=T.length;i<l;i++){t[T[i].TYPE]={VALUE:parseFloat(T[i].FIXED),COLUMN_NAME:T[i].COLUMN_NAME};}this.setVariable("oThreshold",t);}return t;},hasSomeValue:function(){var f=true;if(arguments.length){for(var i=0,l=arguments.length;i<l;i++){if(!(arguments[i]||arguments[i]=="0")){f=false;break;}}}else{f=false;}return f;},getTrendColor:function(k){var c="Neutral";var t,g,W,e,C,f;if(this.getVariable("tileProperties").isFractionMeasure){t=this.getThresholdObject();g=this.getVariable("evalData").EVALUATION.GOAL_TYPE;if(g=="MA"){W=t.WL;C=t.CL;if(this.hasSomeValue(W,C)){c="Good";if(k<C.VALUE){c="Error";}else if(k<=W.VALUE){c="Critical";}}}else if(g=="MI"){e=t.WH;f=t.CH;if(this.hasSomeValue(e,f)){c="Error";if(k<e.VALUE){c="Good";}else if(k<=f.VALUE){c="Critical";}}}else{W=t.WL;C=t.CL;e=t.WH;f=t.CH;if(this.hasSomeValue(e,f,C,W)){if(k<=C.VALUE||k>=e.VALUE){c="Error";}else if((W.VALUE>=k&&k>=C.VALUE)||(f.VALUE>=k&&k>=e.VALUE)){c="Critical";}else{c="Good";}}}}return I[c];},_getThresholdMeasures:function(){var t=[];var T=this.getThresholdObject();for(var e in T){if(T[e].COLUMN_NAME){t.push(T[e].COLUMN_NAME);}}return t;},onEvalFiltersFetched:function(){var t=this;if(this.getVariable("chip").visible.isVisible()&&!this.getVariable("hasAppeared")){try{var k=this.getVariable("evalData");var u=k.EVALUATION.ODATA_URL;var E=k.EVALUATION.ODATA_ENTITYSET;var c=this.getVariable("tileProperties");var h=[];var v=this.getVariable("indicatorUtils").prepareFilterStructure(k.EVALUATION_FILTERS,k.ADDITIONAL_FILTERS);var f=k.EVALUATION.COLUMN_NAME;var g=f;var i=[];if(c.isFractionMeasure){g=c.harveyTotalMeasure;i=this._getThresholdMeasures();}else{h=this.getVariable("indicatorUtils").prepareFilterStructure(c.harveyFilters||h);}this.setVariable("totalMeasure",g);this.setVariable("fractionMeasure",f);this.fetchKpiValue({measure1:g,measure2:f,entitySet:E,thresholds:i,url:u,filters:v,fractionFilters:h,fnS:function(j){j.kpiValue=Number(j.kpiValue);j.fractionValue=Number(j.fractionValue);t.setVariable("kpiValue",j.kpiValue);t.setVariable("fractionValue",j.fractionValue);t.onKpiValueFetched(j.kpiValue,j.unit,j.fractionValue);},fnE:this.logError});t.setVariable("hasAppeared",true);}catch(e){this.logError(e);}}},fetchEvalFilters:function(s){var t=this;try{var c=this.getVariable("cache").getEvaluationById(this.getVariable("chipId"));if(c){this.getVariable("evalData").EVALUATION_FILTERS=c.EVALUATION_FILTERS;s();}else{var D=this.getVariable("indicatorUtils").getFilterFromRunTimeService(this.getVariable("evalData"),function(f){t.deregisterOpenODataRequest("kpiFilterRequest");t.getVariable("evalData").EVALUATION_FILTERS=f;t.getVariable("cache").setEvaluationById(t.getVariable("chipId"),t.getVariable("evalData"));s.call(t);},function(e){this.logError(e);t.deregisterOpenODataRequest("kpiFilterRequest");});this.registerOpenODataRequest("kpiFilterRequest",D);}}catch(e){this.logError(e);}},onKpiValueFetched:function(k,e,f,g){var i=this.getVariable("indicatorUtils");var s=k;var h=f;var j=this.getVariable("evalData");var l=j.EVALUATION.SCALING;if(l==-2){s*=100;h*=100;}var c=this.isACurrencyMeasure(this.getVariable("totalMeasure"));s=i.getLocaleFormattedValue(Number(s),l,null,c,e);c=this.isACurrencyMeasure(this.getVariable("fractionMeasure"));h=i.getLocaleFormattedValue(Number(h),l,null,c,e);this.getView().getModel().setProperty("/totalLabel",s+" "+e);this.getView().getModel().setProperty("/fractionLabel",h+" "+g);this.getView().getModel().setProperty("/color",this.getTrendColor(f));this.getView().getModel().setProperty("/value",k);this.getView().getModel().setProperty("/fractionValue",f);var n=i.getNavigationTarget(this.getVariable("evalData"),this.getVariable("system"));this.getVariable("tile").$().wrap("<a href ='"+n+"'/>");this.getVariable("tile").setState(L.Loaded);},logError:function(e){this.getVariable("tile").setState(L.Failed);this.getVariable("indicatorUtils").logError(e,this.getVariable("tile"));},onVisible:function(){if(!this.getVariable("hasAppeared")){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.onEvalFiltersFetched();}else{this.fetchEvalFilters(this.onEvalFiltersFetched);}}},onExit:function(){this.abortAllOpenODataRequests();}});});
sap.ui.predefine('sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics',["sap/ui/model/odata/ODataModel","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/model/Sorter"],function(O,F,c,S){"use strict";sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants={};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE="http://www.sap.com/Protocols/SAPData";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.VERSION="0.7";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper={renderPropertyKeyValue:function(f,p){if(f.charAt(0)=="'"){throw"Illegal property value starting with a quote";}switch(p){case"Edm.String":return"'"+f+"'";case"Edm.DateTime":return"datetime'"+f+"'";case"Edm.Guid":return"guid'"+f+"'";case"Edm.Time":return"time'"+f+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+f+"'";default:return f;}},renderPropertyFilterValue:function(f,p){if(f.charAt(0)=="'"){throw"Illegal property value starting with a quote";}switch(p){case"Edm.String":return"'"+f+"'";case"Edm.DateTime":return"datetime'"+f+"'";case"Edm.Guid":return"guid'"+f+"'";case"Edm.Time":return"time'"+f+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+f+"'";default:return f;}},tokenizeNametoLabelText:function(n){var l="";l=n.replace(/([^A-Z0-9_]+)([A-Z0-9_])/g,"$1 $2");l=l.replace(/([A-Z0-9_]{2,})([A-Z0-9_])([^A-Z0-9_]+)/g,"$1 $2$3");l=l.replace(/(.*) _E$/,"$1");l=l.replace(/(.*) _(.*)/g,"$1 $2");return l;}};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model=function(m,a){this._init(m,a);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByURI=function(u){return{sServiceURI:u};};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel=function(m){return{oModel:m};};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceWithWorkaround=function(m,w){return{oModelReference:m,aWorkaroundID:w};};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.prototype={_init:function(m,a){this._oActivatedWorkarounds={};if(m&&m.aWorkaroundID){var w=m.aWorkaroundID;for(var i=0;i<w.length;i++){this._oActivatedWorkarounds[w[i]]=true;}m=m.oModelReference;}if(!m||(!m.sServiceURI&&!m.oModel)){throw"Usage with oModelReference being an instance of Model.ReferenceByURI or Model.ReferenceByModel";}if(m.oModel){this._oModel=m.oModel;}else{this._oModel=new O(m.sServiceURI);}if(this._oModel.getServiceMetadata().dataServices==undefined){throw"Model could not be loaded";}this.mergeV2Annotations(a);this._oQueryResultSet={};this._oParameterizationSet={};this._oEntityTypeSet={};this._oEntitySetSet={};this._oEntityTypeNameToEntitySetMap={};var s=this._oModel.getServiceMetadata().dataServices.schema[0];var C;for(i=-1,C;C=s.entityContainer[++i];){if(C.isDefaultEntityContainer=="true"){this._oDefaultEntityContainer=C;break;}}var e=s.entityType;var q=[],p=[],u=[];var j;for(i=-1,t;t=e[++i];){var P=false;if(t.extensions!=undefined){var E;for(j=-1;E=t.extensions[++j];){if(E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE&&E.name=="semantics"){P=true;switch(E.value){case"aggregate":q.push(t);break;case"parameters":p.push(t);break;default:u.push(t);}}if(P){continue;}}if(!P){u.push(t);}}else{u.push(t);}}for(i=-1,t;t=u[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var b=this._getEntitySetsOfType(s,o.getQName());if(b.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics";}if(b.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics";}var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;}var f={};for(i=-1,t;t=p[++i];){o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;b=this._getEntitySetsOfType(s,o.getQName());if(b.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics";}if(b.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics";}d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;var g=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization(o,d);this._oParameterizationSet[g.getName()]=g;f[o.getQName()]=g;var h=o.getQName();if(s.association!=undefined){var A;for(j=-1;A=s.association[++j];){if(A.referentialConstraint==undefined){continue;}var k=null;if(A.end[0].type==h&&A.end[0].multiplicity=="*"&&A.end[1].multiplicity=="1"){k=A.end[1].type;}else if(A.end[1].type==h&&A.end[1].multiplicity=="*"&&A.end[0].multiplicity=="1"){k=A.end[0].type;}if(!k){continue;}if(A.referentialConstraint.dependent.propertyRef.length!=1){continue;}var l=g.findParameterByName(A.referentialConstraint.dependent.propertyRef[0].name);if(l==null){continue;}var v=this._oEntityTypeSet[k];var V=this._oEntityTypeNameToEntitySetMap[k];l.setValueSetEntity(v,V);}}}var t;for(i=-1,t;t=q[++i];){o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var Q=o.getQName();g=null;var n=null;if(s.association!=undefined){for(j=-1,A;A=s.association[++j];){var r=null;if(A.end[0].type==Q){r=A.end[1].type;}else if(A.end[1].type==Q){r=A.end[0].type;}else{continue;}var M=null;M=f[r];if(M!=null){if(g!=null){throw"LIMITATION: Unable to handle multiple parameter entity types of query entity "+o.name;}else{g=M;n=A;}}}}b=this._getEntitySetsOfType(s,o.getQName());if(b.length!=1){throw"Invalid consumption model: There must be exactly one entity set for an entity type annotated with aggregating semantics";}d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;var x=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult(this,o,d,g);this._oQueryResultSet[x.getName()]=x;if(g){g.setTargetQueryResult(x,n);}}},oUI5ODataModelAnnotatableObject:{objectName:"schema",keyPropName:"namespace",extensions:true,aSubObject:[{objectName:"entityType",keyPropName:"name",extensions:true,aSubObject:[{objectName:"property",keyPropName:"name",aSubObject:[],extensions:true}]},{objectName:"entityContainer",keyPropName:"name",extensions:false,aSubObject:[{objectName:"entitySet",keyPropName:"name",extensions:true,aSubObject:[]}]}]},mergeV2Annotations:function(a){try{var A=JSON.parse(a);}catch(e){return;}var m;try{m=this._oModel.getServiceMetadata().dataServices;}catch(e){return;}for(var p in A){if(!(this.oUI5ODataModelAnnotatableObject.objectName===p)){continue;}if(!(A[p]instanceof Array)){continue;}this.mergeV2AnnotationLevel(m[this.oUI5ODataModelAnnotatableObject.objectName],A[this.oUI5ODataModelAnnotatableObject.objectName],this.oUI5ODataModelAnnotatableObject);break;}return;},mergeV2AnnotationLevel:function(M,a,u){for(var i=-1,A;A=a[++i];){for(var j=-1,o;o=M[++j];){if(!(A[u.keyPropName]===o[u.keyPropName])){continue;}if(A.extensions!==undefined){if(o.extensions===undefined){o.extensions=[];}for(var l=-1,b;b=A.extensions[++l];){var f=false;for(var m=-1,d;d=o.extensions[++m];){if(b.name===d.name&&b.namespace===d.namespace){d.value=b.value;f=true;break;}}if(!f){o.extensions.push(b);}}}for(var k=-1,U;U=u.aSubObject[++k];){for(var p in A){if(!(U.objectName===p)){continue;}if(!(A[U.objectName]instanceof Array)){continue;}if((o[U.objectName]===undefined)||(!(o[U.objectName]instanceof Array))){continue;}this.mergeV2AnnotationLevel(o[U.objectName],A[U.objectName],U);break;}}}}return;},findQueryResultByName:function(n){var q=this._oQueryResultSet[n];if(!q&&this._oDefaultEntityContainer){var Q=this._oDefaultEntityContainer.name+"."+n;q=this._oQueryResultSet[Q];}return q;},getAllQueryResultNames:function(){if(this._aQueryResultNames){return this._aQueryResultNames;}this._aQueryResultNames=new Array(0);for(var n in this._oQueryResultSet){this._aQueryResultNames.push(this._oQueryResultSet[n].getName());}return this._aQueryResultNames;},getAllQueryResults:function(){return this._oQueryResultSet;},getODataModel:function(){return this._oModel;},_getEntitySetsOfType:function(s,q){var e=[];for(var i=-1,E;E=s.entityContainer[++i];){for(var j=-1,o;o=E.entitySet[++j];){if(o.entityType==q){e.push([E,o]);}}}return e;},_oModel:null,_oDefaultEntityContainer:null,_aQueryResultNames:null,_oQueryResultSet:null,_oParameterizationSet:null,_oEntityTypeSet:null,_oEntitySetSet:null,_oEntityTypeNameToEntitySetMap:null,_oActivatedWorkarounds:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult=function(m,e,E,p){this._init(m,e,E,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult.prototype={_init:function(m,e,E,p,a){this._oModel=m;this._oEntityType=e;this._oEntitySet=E;this._oParameterization=p;this._oDimensionSet={};this._oMeasureSet={};var P=e.getTypeDescription().property;var A={};for(var i=-1,o;o=P[++i];){if(o.extensions==undefined){continue;}for(var j=-1,b;b=o.extensions[++j];){if(!b.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(b.name){case"aggregation-role":switch(b.value){case"dimension":var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension(this,o);this._oDimensionSet[d.getName()]=d;break;case"measure":var M=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure(this,o);this._oMeasureSet[M.getName()]=M;break;case"totaled-properties-list":this._oTotaledPropertyListProperty=o;break;}break;case"attribute-for":var D=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute(this,o);A[D.getKeyProperty()]=D;break;}}}for(var s in A){D=A[s];D.getDimension().addAttribute(D);}if(m._oActivatedWorkarounds.IdentifyTextPropertiesByName){var f=[];for(var g in this._oDimensionSet){d=this._oDimensionSet[g];if(!d.getTextProperty()){var t=null;t=e.findPropertyByName(g+"Name");if(!t){t=e.findPropertyByName(g+"Text");}if(!t){t=e.findPropertyByName(g+"Desc");}if(!t){t=e.findPropertyByName(g+"Description");}if(t){d.setTextProperty(t);f.push(t.name);}}}var h;for(i=-1,h;h=f[++i];){delete this._oDimensionSet[h];}}},getName:function(){return this.getEntitySet().getQName();},getParameterization:function(){return this._oParameterization;},getAllDimensionNames:function(){if(this._aDimensionNames){return this._aDimensionNames;}this._aDimensionNames=[];for(var n in this._oDimensionSet){this._aDimensionNames.push(this._oDimensionSet[n].getName());}return this._aDimensionNames;},getAllDimensions:function(){return this._oDimensionSet;},getAllMeasureNames:function(){if(this._aMeasureNames){return this._aMeasureNames;}this._aMeasureNames=[];for(var n in this._oMeasureSet){this._aMeasureNames.push(this._oMeasureSet[n].getName());}return this._aMeasureNames;},getAllMeasures:function(){return this._oMeasureSet;},findDimensionByName:function(n){return this._oDimensionSet[n];},getTotaledPropertiesListProperty:function(){return this._oTotaledPropertyListProperty;},findMeasureByName:function(n){return this._oMeasureSet[n];},getModel:function(){return this._oModel;},getEntityType:function(){return this._oEntityType;},getEntitySet:function(){return this._oEntitySet;},_oModel:null,_oEntityType:null,_oEntitySet:null,_oParameterization:null,_aDimensionNames:null,_oDimensionSet:null,_aMeasureNames:null,_oMeasureSet:null,_oTotaledPropertyListProperty:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization=function(e,E){this._init(e,E);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization.prototype={_init:function(e,E){this._oEntityType=e;this._oEntitySet=E;this._oParameterSet={};var p=e.getTypeDescription().property;for(var i=-1,P;P=p[++i];){if(P.extensions==undefined){continue;}for(var j=-1,o;o=P.extensions[++j];){if(!o.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(o.name){case"parameter":var a=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter(this,P);this._oParameterSet[a.getName()]=a;break;}}}},setTargetQueryResult:function(q,a){this._oQueryResult=q;var Q=this._oEntityType.getSchema().namespace+"."+a.name;var n=this._oEntityType.getTypeDescription().navigationProperty;if(!n){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type";}for(var i=-1,N;N=n[++i];){if(N.relationship==Q){this._oNavPropToQueryResult=N.name;}}if(!this._oNavPropToQueryResult){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type";}},getName:function(){return this.getEntitySet().getQName();},getAllParameterNames:function(){if(this._aParameterNames){return this._aParameterNames;}this._aParameterNames=[];for(var n in this._oParameterSet){this._aParameterNames.push(this._oParameterSet[n].getName());}return this._aParameterNames;},getAllParameters:function(){return this._oParameterSet;},findParameterByName:function(n){return this._oParameterSet[n];},getNavigationPropertyToQueryResult:function(){return this._oNavPropToQueryResult;},getEntityType:function(){return this._oEntityType;},getEntitySet:function(){return this._oEntitySet;},_oEntityType:null,_oEntitySet:null,_oQueryResult:null,_oNavPropToQueryResult:null,_aParameterNames:null,_oParameterSet:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter=function(p,P){this._init(p,P);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter.prototype={_init:function(p,P){this._oParameterization=p;this._oProperty=P;var e=p.getEntityType();if(P.extensions!=undefined){for(var i=-1,E;E=P.extensions[++i];){if(!E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(E.name){case"parameter":switch(E.value){case"mandatory":this._bRequired=true;break;case"optional":this._bRequired=false;break;default:throw"Invalid annotation value for parameter property";}break;case"label":this._sLabelText=E.value;break;case"text":this._oTextProperty=e.findPropertyByName(E.value);break;case"upper-boundary":this._bIntervalBoundaryParameter=true;this._oUpperIntervalBoundaryParameterProperty=e.findPropertyByName(E.value);break;case"lower-boundary":this._bIntervalBoundaryParameter=true;this._oLowerIntervalBoundaryParameterProperty=e.findPropertyByName(E.value);break;}}}if(!this._sLabelText){this._sLabelText="";}},setValueSetEntity:function(e,E){this._oValueSetEntityType=e;this._oValueSetEntitySet=E;},getTextProperty:function(){return this._oTextProperty;},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName());}return this._sLabelText;},isOptional:function(){return(!this._bRequired);},isIntervalBoundary:function(){return this._bIntervalBoundaryParameter;},isLowerIntervalBoundary:function(){return(!!this._oUpperIntervalBoundaryParameterProperty);},getPeerIntervalBoundaryParameter:function(){var p=null;if(this._oLowerIntervalBoundaryParameterProperty){p=this._oLowerIntervalBoundaryParameterProperty.name;}else{p=this._oUpperIntervalBoundaryParameterProperty.name;}if(!p){throw"Parameter is not an interval boundary";}return this._oParameterization.findParameterByName(p);},isValueSetAvailable:function(){return(!!this._oValueSetEntityType);},getName:function(){return this._oProperty.name;},getProperty:function(){return this._oProperty;},getContainingParameterization:function(){return this._oParameterization;},getURIToValueEntitySet:function(s){var u=null;u=(s||"")+"/"+this._oValueSetEntitySet.getQName();return u;},_oParameterization:null,_oProperty:null,_sLabelText:null,_oTextProperty:null,_bRequired:false,_bIntervalBoundaryParameter:false,_oLowerIntervalBoundaryParameterProperty:null,_oUpperIntervalBoundaryParameterProperty:null,_oValueSetEntityType:null,_oValueSetEntitySet:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension=function(q,p){this._init(q,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;this._oAttributeSet={};if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;case"super-ordinate":this._sSuperOrdinatePropertyName=e.value;break;}}}if(!this._sLabelText){this._sLabelText="";}},getName:function(){return this._oProperty.name;},getKeyProperty:function(){return this._oProperty;},getTextProperty:function(){return this._oTextProperty;},setTextProperty:function(t){this._oTextProperty=t;},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName());}return this._sLabelText;},getSuperOrdinateDimension:function(){if(!this._sSuperOrdinatePropertyName){return null;}return this._oQueryResult.findDimensionByName(this._sSuperOrdinatePropertyName);},getHierarchy:function(){if(!this._oHierarchy){this._oHierarchy=this._oQueryResult.getEntityType().getHierarchy(this._oProperty.name);}return this._oHierarchy;},getAllAttributeNames:function(){if(this._aAttributeNames){return this._aAttributeNames;}this._aAttributeNames=[];for(var n in this._oAttributeSet){this._aAttributeNames.push(this._oAttributeSet[n].getName());}return this._aAttributeNames;},getAllAttributes:function(){return this._oAttributeSet;},findAttributeByName:function(n){return this._oAttributeSet[n];},addAttribute:function(d){this._oAttributeSet[d.getName()]=d;},getContainingQueryResult:function(){return this._oQueryResult;},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sSuperOrdinatePropertyName:null,_aAttributeNames:null,_oAttributeSet:null,_oHierarchy:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute=function(q,p){this._init(q,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"attribute-for":this._sDimensionName=e.value;break;case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;}}}},getName:function(){return this._oProperty.name;},getKeyProperty:function(){return this._oProperty;},getTextProperty:function(){return this._oTextProperty;},getLabelText:function(){return this._sLabelText;},getDimension:function(){return this._oQueryResult.findDimensionByName(this._sDimensionName);},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sDimensionName:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure=function(q,p){this._init(q,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;case"unit":this._oUnitProperty=q.getEntityType().findPropertyByName(e.value);break;}}}if(!this._sLabelText){this._sLabelText="";}},getName:function(){return this._oProperty.name;},getRawValueProperty:function(){return this._oProperty;},getFormattedValueProperty:function(){return this._oTextProperty;},getUnitProperty:function(){return this._oUnitProperty;},getLabelText:function(){return this._sLabelText;},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_oUnitProperty:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet=function(m,s,C,e){this._init(m,s,C,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet.prototype={_init:function(m,s,C,e){this._oEntitySet=e;this._oContainer=C;this._oSchema=s;this._oModel=m;if(s.entityContainer.length>1){this._sQName=C.name+"."+e.name;}else{this._sQName=e.name;}},getQName:function(){return this._sQName;},getSetDescription:function(){return this._oEntitySet;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntitySet:null,_oContainer:null,_oSchema:null,_oModel:null,_sQName:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType=function(m,s,e){this._init(m,s,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._oPropertySet={};this._aFilterablePropertyNames=[];this._aSortablePropertyNames=[];this._aRequiredFilterPropertyNames=[];this._sQName=s.namespace+"."+e.name;var r={};var R=null;for(var i=-1,p;p=e.property[++i];){this._aFilterablePropertyNames.push(p.name);this._aSortablePropertyNames.push(p.name);if(p.extensions==undefined){continue;}for(var j=-1,E;E=p.extensions[++j];){if(!E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(E.name){case"filterable":if(E.value=="false"){this._aFilterablePropertyNames.pop(p.name);}break;case"sortable":if(E.value=="false"){this._aSortablePropertyNames.pop(p.name);}break;case"required-filter":if(E.value=="true"){this._aRequiredFilterPropertyNames.push(p.name);}break;case"hierarchy-node-for":if(!(R=r[p.name])){R=r[p.name]={};}R.dimensionName=E.value;break;case"hierarchy-parent-node-for":case"hierarchy-parent-nod":if(!(R=r[E.value])){R=r[E.value]={};}R.parentNodeIDProperty=p;break;case"hierarchy-level-for":if(!(R=r[E.value])){R=r[E.value]={};}R.levelProperty=p;break;case"hierarchy-drill-state-for":case"hierarchy-drill-stat":if(!(R=r[E.value])){R=r[E.value]={};}R.drillStateProperty=p;break;}}this._oPropertySet[p.name]=p;}this._oRecursiveHierarchySet={};for(var h in r){var H=r[h];var o=this._oPropertySet[h];var d=this._oPropertySet[H.dimensionName];if(d==null){d=o;}this._oRecursiveHierarchySet[d.name]=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy(e,o,H.parentNodeIDProperty,H.levelProperty,d);}},findPropertyByName:function(n){return this._oPropertySet[n];},getFilterablePropertyNames:function(){return this._aFilterablePropertyNames;},getSortablePropertyNames:function(){return this._aSortablePropertyNames;},getRequiredFilterPropertyNames:function(){return this._aRequiredFilterPropertyNames;},getAllHierarchyPropertyNames:function(){if(this._aHierarchyPropertyNames){return this._aHierarchyPropertyNames;}this._aHierarchyPropertyNames=[];for(var n in this._oRecursiveHierarchySet){this._aHierarchyPropertyNames.push(this._oRecursiveHierarchySet[n].getNodeValueProperty().name);}return this._aHierarchyPropertyNames;},getHierarchy:function(n){if(this._oRecursiveHierarchySet[n]==undefined){return null;}return this._oRecursiveHierarchySet[n];},getQName:function(){return this._sQName;},getTypeDescription:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_sQName:null,_oPropertySet:null,_aFilterablePropertyNames:null,_aRequiredFilterPropertyNames:null,_aHierarchyPropertyNames:null,_oRecursiveHierarchySet:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy=function(e,n,p,N,o){this._init(e,n,p,N,o);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy.prototype={_init:function(e,n,p,N,o){this._oEntityType=e;this._oNodeIDProperty=n;this._oParentNodeIDProperty=p;this._oNodeLevelProperty=N;this._oNodeValueProperty=o;},isRecursiveHierarchy:function(){return true;},isLeveledHierarchy:function(){return false;},getNodeIDProperty:function(){return this._oNodeIDProperty;},getParentNodeIDProperty:function(){return this._oParentNodeIDProperty;},getNodeLevelProperty:function(){return this._oNodeLevelProperty;},getNodeValueProperty:function(){return this._oNodeValueProperty;},_oNodeIDProperty:null,_oParentNodeIDProperty:null,_oNodeLevelProperty:null,_oNodeValueProperty:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression=function(m,s,e){this._init(m,s,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._aFilterCondition=[];},clear:function(){this._aFilterCondition=[];},addCondition:function(p,o,v,V){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add filter condition for unknown property name "+p;}var f=this._oEntityType.getFilterablePropertyNames();if(f.indexOf(p)===-1){throw"Cannot add filter condition for not filterable property name "+p;}this._aFilterCondition.push({property:P,op:o,val1:v,val2:V});return this._aFilterablePropertyNames;},addSetCondition:function(p,v){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add filter condition for unknown property name "+p;}var f=this._oEntityType.getFilterablePropertyNames();if(f.indexOf(p)===-1){throw"Cannot add filter condition for not filterable property name "+p;}for(var i=-1,V;V=v[++i];){this._aFilterCondition.push({property:P,op:F.EQ,val1:V});}return this._aFilterablePropertyNames;},getExpressionAsUI5FilterArray:function(){var f=[];for(var i=-1,C;C=this._aFilterCondition[++i];){f.push(new c(C.property.name,C.op,C.val1,C.val2));}return f;},getURIFilterOptionValue:function(){if(this._aFilterCondition.length==0){return"";}this._aFilterCondition.sort(function(a,b){if(a.property.name==b.property.name){return 0;}if(a.property.name>b.property.name){return 1;}return-1;});var p=this._aFilterCondition[0].property.name;var o="";var s="";for(var i=-1,C;C=this._aFilterCondition[++i];){if(p!=C.property.name){o+=(o==""?"":" and ")+"("+s+")";s="";p=C.property.name;}switch(C.op){case F.BT:s+=(s==""?"":" or ")+"("+C.property.name+" "+F.GE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(C.val1,C.property.type)+" and "+C.property.name+" "+F.LE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(C.val2,C.property.type)+")";break;default:s+=(s==""?"":" or ")+"("+C.property.name+" "+C.op.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(C.val1,C.property.type)+")";}}o+=(o==""?"":" and ")+"("+s+")";return o;},getEntityType:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_aFilterCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder={Ascending:"asc",Descending:"desc"};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression=function(m,s,e){this._init(m,s,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._aSortCondition=[];},_containsSorter:function(p){var r=null;for(var i=-1,C;C=this._aSortCondition[++i];){if(C.property.name===p){r={sorter:C,index:i};break;}}return r;},_removeFromArray:function(a,f,t){var r=a.slice((t||f)+1||a.length);a.length=f<0?a.length+f:f;return a.push.apply(a,r);},clear:function(){this._aSortCondition=[];},addSorter:function(p,s){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add sort condition for unknown property name "+p;}if(this._containsSorter(p)!=null){throw"Sort condition for this property name is already defined "+p;}var a=this._oEntityType.getSortablePropertyNames();if(a.indexOf(p)===-1){throw"Cannot add sort condition for not sortable property name "+p;}this._aSortCondition.push({property:P,order:s});return this;},removeSorter:function(p){if(!p){return;}var s=this._containsSorter(p);if(s){this._removeFromArray(this._aSortCondition,s.index);}},getExpressionsAsUI5SorterArray:function(){var s=[];for(var i=-1,C;C=this._aSortCondition[++i];){s.push(new S(C.property.name,C.order==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder.Descending));}return s;},getExpressionAsUI5Sorter:function(){var s=this.getExpressionsAsUI5SorterArray();if(s.length==0){return null;}return s[0];},getURIOrderByOptionValue:function(){if(this._aSortCondition.length==0){return"";}var o="";for(var i=-1,C;C=this._aSortCondition[++i];){o+=C.property.name+" "+C.order;if(i<this._aSortCondition.length-1){o+=", ";}}return o;},getEntityType:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_aSortCondition:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest=function(p){this._init(p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest.prototype={_init:function(p){if(!p){throw"No parameterization given";}this._oParameterization=p;this._oParameterValueAssignment=[];},getParameterization:function(){return this._oParameterization;},setParameterValue:function(p,v,t){var P=this._oParameterization.findParameterByName(p);if(!P){throw"Invalid parameter name "+p;}if(t!=null){if(!P.isIntervalBoundary()){throw"Range value cannot be applied to parameter "+p+" accepting only single values";}if(!P.isLowerIntervalBoundary()){throw"Range value given, but parameter "+p+" does not hold the lower boundary";}}if(!P.isIntervalBoundary()){if(v==null){delete this._oParameterValueAssignment[p];}else{this._oParameterValueAssignment[p]=v;}}else{if(v==null&&t!=null){throw"Parameter "+p+": An upper boundary cannot be given without the lower boundary";}if(v==null){delete this._oParameterValueAssignment[p];t=null;}else{this._oParameterValueAssignment[p]=v;}var u=P.getPeerIntervalBoundaryParameter();if(t==null){t=v;}if(v==null){delete this._oParameterValueAssignment[u.getName()];}else{this._oParameterValueAssignment[u.getName()]=t;}}return;},getURIToParameterizationEntitySet:function(s){return(s||"")+"/"+this._oParameterization.getEntitySet().getQName();},getURIToParameterizationEntry:function(s){var d=this._oParameterization.getAllParameters();for(var D in d){if(this._oParameterValueAssignment[D]==undefined){throw"Parameter "+D+" has no value assigned";}}var k="",f=true;for(var p in this._oParameterValueAssignment){k+=(f?"":",")+p+"="+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyKeyValue(this._oParameterValueAssignment[p],d[p].getProperty().type);f=false;}return(s||"")+"/"+this._oParameterization.getEntitySet().getQName()+"("+k+")";},_oParameterization:null,_oParameterValueAssignment:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest=function(q){this._init(q);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest.prototype={_init:function(q,p){this._oQueryResult=q;this._oParameterizationRequest=p;this._oAggregationLevel={};this._oMeasures={};this._bIncludeEntityKey=false;this._oFilterExpression=null;},setParameterizationRequest:function(p){this._oParameterizationRequest=p;},getQueryResult:function(){return this._oQueryResult;},setAggregationLevel:function(d){this._oAggregationLevel={};if(!d){d=this._oQueryResult.getAllDimensionNames();}this.addToAggregationLevel(d);},addToAggregationLevel:function(d){if(!d){return;}for(var i=-1,D;D=d[++i];){if(!this._oQueryResult.findDimensionByName(D)){throw D+" is not a valid dimension name";}this._oAggregationLevel[D]={key:true,text:false,attributes:null};}},removeFromAggregationLevel:function(d){if(!d){return;}for(var i=-1,D;D=d[++i];){if(!this._oQueryResult.findDimensionByName(D)){throw D+" is not a valid dimension name";}if(this._oAggregationLevel[D]!=undefined){delete this._oAggregationLevel[D];this.getSortExpression().removeSorter(D);}}},getAggregationLevel:function(){var d=[];for(var D in this._oAggregationLevel){d.push(D);}return d;},getAggregationLevelDetails:function(d){if(this._oAggregationLevel[d]==undefined){throw"Aggregation level does not include dimension "+d;}return this._oAggregationLevel[d];},setMeasures:function(m){if(!m){m=this._oQueryResult.getAllMeasureNames();}this._oMeasures={};for(var i=-1,M;M=m[++i];){if(!this._oQueryResult.findMeasureByName(M)){throw M+" is not a valid measure name";}this._oMeasures[M]={value:true,text:false,unit:false};}},getMeasureNames:function(){var m=[];for(var M in this._oMeasures){m.push(M);}return m;},includeDimensionKeyTextAttributes:function(d,I,b,a){var D=[];if(d){if(this._oAggregationLevel[d]==undefined){throw d+" is not included in the aggregation level";}D.push(d);}else{for(var n in this._oAggregationLevel){D.push(n);}a=null;}for(var i=-1,s;s=D[++i];){if(I!=null){this._oAggregationLevel[s].key=I;}if(b!=null){this._oAggregationLevel[s].text=b;}if(a!=null){this._oAggregationLevel[s].attributes=a;}}},includeMeasureRawFormattedValueUnit:function(m,I,b,a){var M=[];if(m){if(this._oMeasures[m]==undefined){throw m+" is not part of the query result";}M.push(m);}else{for(var n in this._oMeasures){M.push(n);}}for(var i=-1,s;s=M[++i];){if(I!=null){this._oMeasures[s].value=I;}if(b!=null){this._oMeasures[s].text=b;}if(a!=null){this._oMeasures[s].unit=a;}}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oQueryResult.getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},setRequestOptions:function(i,I){if(i){this._bIncludeEntityKey=i;}if(I){this._bIncludeCount=I;}},setResultPageBoundaries:function(s,e){if(s!=null&&typeof s!=="number"){throw"Start value must be null or numeric";}if(e!==null&&typeof e!=="number"){throw"End value must be null or numeric";}if(s==null){s=1;}if(s<1||s>(e==null?s:e)){throw"Invalid values for requested page boundaries";}this._iSkipRequestOption=(s>1)?s:null;this._iTopRequestOption=(e!=null)?(e-s+1):null;},getResultPageBoundaries:function(){var s,e;if(this._iSkipRequestOption==null){s=1;e=1;}else{s=this._iSkipRequestOption;e=this._iSkipRequestOption+this._iTopRequestOption;}return{start:s,end:(this._iTopRequestOption!=null)?e:null};},getURIToQueryResultEntitySet:function(s){var u=null;if(this._oQueryResult.getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request";}else{u=this._oParameterizationRequest.getURIToParameterizationEntry(s)+"/"+this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult();}}else{u=(s||"")+"/"+this._oQueryResult.getEntitySet().getQName();}return u;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="",i;for(var d in this._oAggregationLevel){var D=this._oQueryResult.findDimensionByName(d);var o=this._oAggregationLevel[d];if(o.key==true){s+=(s==""?"":",")+D.getKeyProperty().name;}if(o.text==true&&D.getTextProperty()){s+=(s==""?"":",")+D.getTextProperty().name;}if(o.attributes){var a;for(i=-1;a=o.attributes[++i];){s+=(s==""?"":",")+D.findAttributeByName(a).getName();}}}for(var m in this._oMeasures){var M=this._oQueryResult.findMeasureByName(m);var b=this._oMeasures[m];if(b.value==true){s+=(s==""?"":",")+M.getRawValueProperty().name;}if(b.text==true&&M.getFormattedValueProperty()){s+=(s==""?"":",")+M.getFormattedValueProperty().name;}if(b.unit==true&&M.getUnitProperty()){s+=(s==""?"":",")+M.getUnitProperty().name;}}if(this._bIncludeEntityKey){var k=this._oQueryResult.getEntityType().getTypeDescription().key.propertyRef,K;for(i=-1;K=k[++i];){s+=(s==""?"":",")+K.name;}}Q=(s||null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f||null);break;}case"$orderby":{var e=null;if(this._oSortExpression){e=this._oSortExpression.getURIOrderByOptionValue();}Q=(e||null);break;}case"$top":{if(this._iTopRequestOption!==null){Q=this._iTopRequestOption;}break;}case"$skip":{Q=this._iSkipRequestOption;break;}default:break;}return Q;},getURIToQueryResultEntries:function(s){var r=this.getURIToQueryResultEntitySet(s);var a=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var b=this.getURIQueryOptionValue("$orderby");var t=this.getURIQueryOptionValue("$top");var d=this.getURIQueryOptionValue("$skip");var u=r;var q=false;if(a){u+="?$select="+a;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&b){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+b;}if(this._iTopRequestOption&&t){if(!q){u+="?";q=true;}else{u+="&";}u+="$top="+t;}if(this._iSkipRequestOption&&d){if(!q){u+="?";q=true;}else{u+="&";}u+="$skip="+d;}if(this._bIncludeCount){if(!q){u+="?";q=true;}else{u+="&";}u+="$inlinecount=allpages";}return u;},_oQueryResult:null,_oParameterizationRequest:null,_oAggregationLevel:null,_oMeasures:null,_bIncludeEntityKey:null,_bIncludeCount:null,_oFilterExpression:null,_oSortExpression:null,_iSkipRequestOption:0,_iTopRequestOption:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest=function(p){this._init(p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest.prototype={_init:function(p){this._oParameter=p;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null;},includeParameterText:function(i){if(i!=null){this._oValueSetResult.text=i;}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";s+=(s==""?"":",")+this._oParameter.getProperty().name;if(this._oValueSetResult.text==true&&this._oParameter.getTextProperty()){s+=(s==""?"":",")+this._oParameter.getTextProperty().name;}Q=(s||null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f||null);break;}case"$orderby":{var a=null;if(this._oSortExpression){a=this._oSortExpression.getURIOrderByOptionValue();}Q=(a||null);break;}default:break;}return Q;},getURIToParameterValueSetEntries:function(s){var r=null;r=(s||"")+"/"+this._oParameter.getContainingParameterization().getEntitySet().getQName();var a=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var b=this.getURIQueryOptionValue("$orderby");var u=r;var q=false;if(a){u+="?$select="+a;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&b){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+b;}return u;},_oParameter:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest=function(d,p){this._init(d,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest.prototype={_init:function(d,p){this._oDimension=d;this._oParameterizationRequest=p;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null;},setParameterizationRequest:function(p){this._oParameterizationRequest=p;},includeDimensionTextAttributes:function(i,a){if(i!=null){this._oValueSetResult.text=i;}if(a!=null){this._oValueSetResult.attributes=a;}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oDimension.getContainingQueryResult().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},hasMasterDataAvailable:function(){return false;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";s+=(s==""?"":",")+this._oDimension.getKeyProperty().name;if(this._oValueSetResult.text==true&&this._oDimension.getTextProperty()){s+=(s==""?"":",")+this._oDimension.getTextProperty().name;}if(this._oValueSetResult.attributes){for(var i=-1,a;a=this._oValueSetResult.attributes[++i];){s+=(s==""?"":",")+this._oDimension.findAttributeByName(a).getName();}}Q=(s||null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f||null);break;}case"$orderby":{var b=null;if(this._oSortExpression){b=this._oSortExpression.getURIOrderByOptionValue();}Q=(b||null);break;}default:break;}return Q;},getURIToDimensionMemberEntries:function(s){var r=null;if(this._oDimension.getContainingQueryResult().getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request";}else{r=this._oParameterizationRequest.getURIToParameterizationEntry(s)+"/"+this._oDimension.getContainingQueryResult().getParameterization().getNavigationPropertyToQueryResult();}}else{r=(s||"")+"/"+this._oDimension.getContainingQueryResult().getEntitySet().getQName();}var a=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var b=this.getURIQueryOptionValue("$orderby");var u=r;var q=false;if(a){u+="?$select="+a;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&b){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+b;}return u;},_oDimension:null,_oParameterizationRequest:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil',["sap/ui/model/FilterOperator","sap/ushell/components/tiles/utils","sap/ui/model/analytics/odata4analytics","sap/ui/core/format/NumberFormat","sap/ui/model/odata/ODataModel","sap/base/Log","sap/ui/thirdparty/jquery","sap/base/util/UriParameters"],function(F,u,o,N,O,L,q,U){"use strict";var P=o.ParameterizationRequest;var Q=o.QueryResultRequest;var R=o.Model.ReferenceByModel;var M=o.Model;sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.util=sap.ushell.components.tiles.indicatorTileUtils.util||{};sap.ushell.components.tiles.indicatorTileUtils.util=(function(g,$){var c={},t={"ANN":"years","WEE":"weeks","DAY":"days","HUR":"hours","MIN":"minutes"},a={},b={};return{getScheduledJob:function(k){return a[k];},setScheduledJob:function(k,d){a[k]=d;},isCallInProgress:function(k){return b[k];},setUnsetCallInProgress:function(k,v){b[k]=v;},getTimeUnitMap:function(){return t;},getHanaUser:function(){},addSystemToServiceUrl:function(d,s){L.info("Hana Adapter --> Add System to Service Url");if(sap.ushell&&sap.ushell.Container){if(s){d=sap.ushell.Container.getService("URLParsing").addSystemToServiceUrl(d,s);}else{d=sap.ushell.Container.getService("URLParsing").addSystemToServiceUrl(d);}}return d;},getODataModelByServiceUri:function(s){s=this.addSystemToServiceUrl(s);if(!c[s]){var m=new O(s,{loadMetadataAsync:true,json:true});c[s]=m;}return c[s];},getEdmType:function(s,p){var d=null;if(s instanceof O){d=s;}else{d=this.getODataModelByServiceUri(s);}if(d&&d.getServiceMetadata()){var e=d.getServiceMetadata();var f=e.dataServices.schema[0].entityType;if(f){for(var i=0;i<f.length;i++){var h=f[i];var k=h.property;for(var j=0;j<k.length;j++){var l=k[j];if(l.name===p){return l.type;}}}}}return null;},getMillisecond:function(d,e){var r;switch(e){case"seconds":r=d*1000;break;case"minutes":r=d*60*1000;break;case"hours":r=d*60*60*1000;break;case"days":r=d*24*60*60*1000;break;case"weeks":r=d*7*24*60*60*1000;break;case"months":r=d*4*7*24*60*60*1000;break;case"years":r=d*12*4*7*24*60*60*1000;break;}return r;},getUTCDate:function(){var n=new Date();return n;},isCacheValid:function(d,e,f,h,i){var j=c.getKpivalueById(d);if(!j){return false;}else if(!(f&&Number(f))){return true;}var k=this.getMillisecond(f,t[h]),l;if(q.type(j.CachedTime)==="date"){l=j.CachedTime&&j.CachedTime.getTime();}else{l=j.CachedTime&&parseInt(j.CachedTime.substr(6),10);}var m=this.getUTCDate();return(l>=e&&k>=(m-l)&&!i);},getMantissaLength:function(n){var s=n.toString();var i=0;if(n<0){i=1;}if(s.indexOf(".")===-1){return(n<0?s.length-1:s.length);}return s.substring(i,s.indexOf(".")).length;},getLocaleFormattedValue:function(n,s,d,i,e){q.sap.require("sap.ui.core.format.NumberFormat");i=i||false;e=e||null;if(i){return N.getCurrencyInstance({style:"short",showMeasure:false}).format(n,e);}var D=2;var f={style:"short"};var h;if(!(d==-1||d==null)){f.shortDecimals=Number(d);f.minFractionDigits=Number(d);f.maxFractionDigits=Number(d);}var v=N.getInstance(f);if(s===-2){if(n>9999){h="????";}else if((n>-0.001&&n<0)||(n<0.001&&n>0)){h="0";}else{if(n.toString().indexOf(".")!==-1){h=Number(n).toFixed(4-n.toString().indexOf("."));}else{h=Number(n);}h=v.format(h);}}else if(d==-1||d==null){var m=this.getMantissaLength(n);if(!(m%3)){D=1;}if(m%3===1){D=3;}if(m%3===2){D=2;}if(Math.abs(n)%Math.pow(10,m-1)===0){D=0;}else if((Math.abs(n)%Math.pow(10,m-1))<6*Math.pow(10,m-4)){D=0;}v=N.getInstance({style:"short",shortDecimals:D});h=v.format(n);}else{h=v.format(n);}return h;},getPlatform:function(p){return(new U(window.location.href).get("sb_metadata")||p||"HANA").toUpperCase();},getTileTitleSubtitle:function(C){var d={};if(C.bag&&C.bag.getBagIds()&&C.bag.getBagIds().length){d.title=C.bag.getBag("sb_tileProperties").getText("title")||C.bag.getBag("sb_tileProperties").getProperty("title")||C.preview.getTitle();d.subTitle=C.bag.getBag("sb_tileProperties").getText("description")||C.bag.getBag("sb_tileProperties").getProperty("description")||C.preview.getDescription();}else{d.title=C.preview.getTitle();d.subTitle=C.preview.getDescription();}return d;},scheduleFetchDataJob:function(i){var d;if(this.getView().getViewName().indexOf("DualTile")!==-1){d=this.oKpiTileView.oConfig;}else{d=this.oConfig;}var k=d.TILE_PROPERTIES.id+"data";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k);if(r){clearTimeout(r);r=undefined;}var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeUnitMap(),e=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(d),f=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(d),h=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(e,t[f]),j;if(q.type(this.cacheTime)==="date"){j=this.cacheTime;}else{j=new Date(parseInt(this.cacheTime.substr(6),10));}var l=h-(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-j);if(l<=0){l=0;}else if(l>2147483646){l=2147483646;}if(!i){l=300000;}if(this.getView().getViewName().indexOf("DualTile")!==-1){r=setTimeout(this.refreshPress.bind(this),l);}else{r=setTimeout(this.refreshHandler.bind(this,false,true),l);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(k,r);}this.updateDatajobScheduled=true;},scheduleTimeStampJob:function(){var k=this.oConfig.TILE_PROPERTIES.id+"time",r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k),d;if(r){clearTimeout(r);r=undefined;}if(q.type(this.cacheTime)==="date"){d=this.cacheTime;}else{d=new Date(parseInt(this.cacheTime.substr(6),10),13);}var e=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-d);r=setTimeout(this.setTimeStamp.bind(this,this.cacheTime),e.timer);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(k,r);this.updateTimeStampjobScheduled=true;},getBoolValue:function(v){var r=false;if(typeof v==="boolean"&&v){r=true;}return r;},getSeconds:function(d){return(d/1000);},getMinutes:function(d){return(this.getSeconds(d)/60);},getHours:function(d){return(this.getMinutes(d)/60);},getDays:function(d){return(this.getHours(d)/24);},getWeeks:function(d){return(this.getDays(d)/7);},getMonths:function(d){return(this.getWeeks(d)/4);},getYears:function(d){return(this.getMonths(d)/12);},getTimeDifference:function(d){var r={};if(d){var m=this.getMinutes(d);var h=this.getHours(d);var e=this.getDays(d);if(m<5){r.time=0;r.unit="minutes";r.timer=Math.round(this.getMillisecond(5-m,"minutes"));}else if(m>=5&&m<60){if(m<10){r.time=5;}else{r.time=(m-(m%10));}r.unit="minutes";r.timer=Math.round(this.getMillisecond(10-(m%10),"minutes"));}else if(h>=1&&h<24){r.unit="hours";r.time=(h-(h%1));r.timer=Math.round(this.getMillisecond(1-(h%1),"hours"));}else if(e>=1&&e<2){r.unit="days";r.time=(e-(e%1));r.timer=Math.round(this.getMillisecond(1-(e%1),"days"));}else{r.unit="days";r.time=(e-(e%1));r.timer=this.getMillisecond(2,"days");}}else{r.timer=6000;r.unit="days";r.timer=2000;}return r;},getCachingTime:function(C){return((C.CACHINGTIME&&Number(C.CACHINGTIME))||(C.TILE_PROPERTIES.cachingTime&&Number(C.TILE_PROPERTIES.cachingTime)));},getCachingTimeUnit:function(C){return(C.CACHINGUNIT||C.TILE_PROPERTIES.cachingTimeUnit);},getFrontendCacheQuery:function(d,e,p,T){var f;try{var h=T.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV");h=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(h);f=this.getODataModelByServiceUri(h);h="/CacheParameters(P_CacheType=1)/Results";return{oModel:f,uri:h};}catch(i){L.error("FrontEnd cache Metadata failed");return null;}},isDualTile:function(C){var d=C&&C.TILE_PROPERTIES&&C.TILE_PROPERTIES.tileType;if(d.indexOf("DT-")===-1){return false;}return true;},writeFrontendCacheByChipAndUserId:function(T,d,e,f,h){var s=function(e){L.info("cache write successFully");h(e);};var i=function(){L.error("cache update failed");h(null);};try{var j=T.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV/");j=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(j);var k=this.getODataModelByServiceUri(j);var l="/CacheData";k.create(l,e,{async:true,success:s,error:i});}catch(m){L.error(m);}},getKpiChipsOnPage:function(d,e){var f=[];var l=sap.ushell.Container.getService("LaunchPage");l.getGroups().done(function(G){if(G&&G instanceof Array&&G.length){L.info("Group Chip fetch");}e(d,f);});},getFrontendCache:function(C,T){var d=this;var e=c.getFrontEndCacheDeferredObject(T.url.getApplicationSystem());var f;if(e){f=e;}else{f=q.Deferred();}var h=C&&C.TILE_PROPERTIES&&C.TILE_PROPERTIES.id;var i=c.getKpivalueById(h);if(i){e.resolve(true);}else if(e){return e.promise();}else{c.setFrontEndCacheDefferedObject(T.url.getApplicationSystem(),f);e=f;this.getKpiChipsOnPage(h,function(h,p){if(p){var j=d.getFrontendCacheQuery(p,sap.ushell.Container.getUser().getId(),p,T);if(j){var k=j.oModel;var l=j.uri;var m=false;k.read(l,null,null,true,function(n){if(n&&n.results&&n.results instanceof Array&&n.results.length){q.each(n.results,function(r,s){c.setKpivalueById(s.ChipId,s);});}if(c.getKpivalueById(h)){m=true;}e.resolve(m);},function(n){if(n&&n.response){L.error(n.message+" : "+n.request.requestUri);}e.reject();});}else{e.reject();}}else{e.resolve(false);}});}return e.promise();},getModelerRuntimeServiceModel:function(){var d="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";d=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(d);return this.getODataModelByServiceUri(d);},getSapFontErrorCode:function(){return String.fromCharCode(0xe0b1);},getSapFontBusyCode:function(){return String.fromCharCode(0xe1f2);},prepareFilterStructure:function(f,d){var v=[];if(d){f=f.concat(d);}for(var i=0;i<f.length;i++){var p={};p.comparator=f[i].OPERATOR;p.filterPropertyName=f[i].NAME;if(f[i].ID){p.id=f[i].ID;}p.type=f[i].TYPE;p.value=f[i].VALUE_1;p.valueTo=f[i].VALUE_2;v.push(p);}return v;},getODataModelByServiceUriFromChipAPI:function(s,T){s=T.url.addSystemToServiceUrl(s);if(!c[s]){var m=new O(s,true);c[s]=m;}return c[s];},cacheBustingMechanism:function(s){if(window["sap-ushell-config"].cacheBusting.cacheBusterToken){var d=window["sap-ushell-config"].cacheBusting&&window["sap-ushell-config"].cacheBusting.cacheBusterToken;s=s+"?_="+d;}return s;},getRunTimeUri:function(p){var d="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";var e="/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV";if(p.toUpperCase()==="HANA"){if(window["sap-ushell-config"].cacheBusting){d=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(d);}return d;}if(window["sap-ushell-config"].cacheBusting){e=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(e);}return e;},getFilterFromRunTimeService:function(C,T,s,e){var p=C.TILE_PROPERTIES.sb_metadata;var K=this.getODataModelByServiceUriFromChipAPI(this.getRunTimeUri(p),T);var f="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",C.EVALUATION.ID);var k=K.read("/EVALUATION_FILTERS",null,{"$filter":f},true,function(d){var h=[];if(d.results.length){h=d.results;}s.call(this,h);},e);return k;},_getOData4AnalyticsObject:function(s){var m=null;if(s instanceof O){m=s;}else if(typeof s==="string"){m=this.getODataModelByServiceUri(s);}else{throw new Error("Invalid Input to Create ODataModel Object : "+s);}var d=new M(R(m));return d;},findTextPropertyForDimension:function(s,d,f){try{var h=this._getOData4AnalyticsObject(s);var i=h.findQueryResultByName(d);var D=i.findDimensionByName(f);if(D.getTextProperty()){return D.getTextProperty().name;}return f;}catch(e){L.error("Error Fetching Text Property for "+f+" : "+e.toString());}},getEvalValueMeasureName:function(C,d,r){var e=C.EVALUATION_VALUES;for(var i=0;i<e.length;i++){if(e[i].TYPE===d){if(r==="FIXED"){return e[i].FIXED;}return e[i].COLUMN_NAME;}}},getSemanticColorName:function(d){var s="";if(d==="Error"){s="sb.error";}if(d==="Neutral"){s="sb.neutral";}if(d==="Critical"){s="sb.critical";}if(d==="Good"){s="sb.good";}return s;},setTooltipInTile:function(C,d,v){var e="";var r=u.getResourceBundleModel().getResourceBundle();if(d==="NT"||d==="DT"){if(v.status){e+=r.getText("sb.status")+": "+r.getText(v.status)+"\n";}if(v.actual){e+=r.getText("sb.actual")+": "+v.actual+"\n";}if(v.target){e+=r.getText("sb.target")+": "+v.target+"\n";}if(v.cH){e+=r.getText("sb.ch")+": "+v.cH+"\n";}if(v.wH){e+=r.getText("sb.wh")+": "+v.wH+"\n";}if(v.wL){e+=r.getText("sb.wl")+": "+v.wL+"\n";}if(v.cL){e+=r.getText("sb.cl")+": "+v.cL+"\n";}}if(d==="CONT"||d==="COMP"){if(v.measure&&d==="CONT"){if(v&&v.contributionTile.contributionTile&&v.contributionTile.contributionTile[1]==="asc"){e+=r.getText("sb.bottomn")+": "+v.contributionTile[0]+"\n";}else if(v&&v.contributionTile.contributionTile&&v.contributionTile.contributionTile.length){e+=r.getText("sb.topn")+": "+v.contributionTile[0]+"\n";}}if(v.m1&&((v.v1===undefined||v.v1===null)?false:v.v1.toString())&&v.c1){e+=v.m1+": "+v.v1+" "+r.getText(v.c1)+"\n";}if(v.m2&&((v.v2===undefined||v.v2===null)?false:v.v2.toString())&&v.c2){e+=v.m2+": "+v.v2+" "+r.getText(v.c2)+"\n";}if(v.m3&&((v.v3===undefined||v.v3===null)?false:v.v3.toString())&&v.c3){e+=v.m3+": "+v.v3+" "+r.getText(v.c3)+"\n";}}if(C&&C.setTooltip){C.setTooltip(e);}},_getFormattedTileProperties:function(d){d=d||{};var p=["sb_metadata","sb_navigation","sb_catalog"];var e=false;for(var i=0;!e&&i<p.length;i++){e=e||new U(window.location.href).get(p[i])||d[p[i]];}d.sb_metadata=(new U(window.location.href).get("sb_metadata")||d.sb_metadata||"HANA").toLowerCase();d.sb_navigation=(new U(window.location.href).get("sb_navigation")||d.sb_navigation||"abap").toLowerCase();d.sb_catalog=(new U(window.location.href).get("sb_catalog")||d.sb_catalog||"HANA").toLowerCase();d.isPlatformInfoPresent=e;return d;},getEvaluationDetailsFromRunTimeService:function(e,p,i,d){var K=this.getODataModelByServiceUri(this.getRunTimeUri(p));var f="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",i);K.read(e,null,{"$filter":f},true,function(h){var j=[];if(h.results.length){j=h.results;}d.call(this,j);});},getParsedChip:function(C,i,d){try{var p={};var e=JSON.parse(C);var f=JSON.parse(e.TILE_PROPERTIES).evaluationId||"";if(e.TILE_PROPERTIES){var h=JSON.parse(e.TILE_PROPERTIES);if(h&&(h.instanceId||h.catalogId)){return false;}}var j=this;if(e.blankTile){p.BLANKTILE=e.blankTile;}if(e.cachingTime){p.CACHINGTIME=e.cachingTime;}if(e.cachingTimeUnit){p.CACHINGUNIT=e.cachingTimeUnit;}if(e.TAGS){p.TAGS=JSON.parse(e.TAGS);}if(e.ADDITIONAL_FILTERS){p.ADDITIONAL_FILTERS=JSON.parse(e.ADDITIONAL_FILTERS);}if(e.ADDITIONAL_APP_PARAMETERS){p.ADDITIONAL_APP_PARAMETERS=JSON.parse(e.ADDITIONAL_APP_PARAMETERS);}p.TILE_PROPERTIES=this._getFormattedTileProperties(JSON.parse(e.TILE_PROPERTIES));var s=p.TILE_PROPERTIES.sb_metadata;if(e.EVALUATION_FILTERS){p.EVALUATION_FILTERS=JSON.parse(e.EVALUATION_FILTERS);if(e.EVALUATION_VALUES){p.EVALUATION_VALUES=JSON.parse(e.EVALUATION_VALUES);if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else if(!i){j.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",s,f,function(l){p.EVALUATION=l;if(d){d(p);}else{return p;}});}else if(d){d(p);}else{return p;}}else if(!i){j.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",s,f,function(l){p.EVALUATION_VALUES=l;if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else{j.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",s,f,function(l){p.EVALUATION=l;if(d){d(p);}else{return p;}});}});}else if(d){d(p);}else{return p;}}else if(i){if(d){d(p);}else{return p;}}else{j.getEvaluationDetailsFromRunTimeService("/EVALUATION_FILTERS",s,f,function(l){p.EVALUATION_FILTERS=l;if(e.EVALUATION_VALUES){p.EVALUATION_VALUES=JSON.parse(e.EVALUATION_VALUES);if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else{j.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",s,f,function(l){p.EVALUATION=l;if(d){d(p);}else{return p;}});}}else{j.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",s,f,function(l){p.EVALUATION_VALUES=l;if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else{j.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",s,f,function(l){p.EVALUATION=l;if(d){d(p);}else{return p;}});}});}});}}catch(k){return false;}},getNavigationTarget:function(C,s){var f=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService;var d=f&&f("CrossApplicationNavigation");var e;var p={};p.evaluationId=C.EVALUATION.ID;p.chipId=C.TILE_PROPERTIES.id;if(s){p["sap-system"]=s;}p.tileType=C.TILE_PROPERTIES.tileType;if(C.TILE_PROPERTIES.dimension){p.dimension=C.TILE_PROPERTIES.dimension;}if(C.TILE_PROPERTIES.storyId){p.storyId=C.TILE_PROPERTIES.storyId;}if(C.TILE_PROPERTIES.apfConfId){p["sap-apf-configuration-id"]=C.TILE_PROPERTIES.apfConfId;}if(C.TILE_PROPERTIES.isPlatformInfoPresent){p.sb_metadata=C.TILE_PROPERTIES.sb_metadata;p.sb_navigation=C.TILE_PROPERTIES.sb_navigation;p.sb_catalog=C.TILE_PROPERTIES.sb_catalog;}if(C.ADDITIONAL_APP_PARAMETERS){for(e in C.ADDITIONAL_APP_PARAMETERS){if(C.ADDITIONAL_APP_PARAMETERS.hasOwnProperty(e)){if(C.ADDITIONAL_APP_PARAMETERS[e].constructor===Array){var h=C.ADDITIONAL_APP_PARAMETERS[e];for(var i=0;i<h.length;i++){p[e]=h[i];}}else{p[e]=C.ADDITIONAL_APP_PARAMETERS[e];}}}}var k=d&&d.hrefForExternal({target:{semanticObject:C.TILE_PROPERTIES.semanticObject,action:C.TILE_PROPERTIES.semanticAction},params:p})||"";if(C.ADDITIONAL_FILTERS){var l=C.ADDITIONAL_FILTERS;var m="&";for(var j=0;j<l.length;j++){if(l[j].OPERATOR==="EQ"){m=m+"/"+l[j].NAME+"="+l[j].VALUE_1;}}k+=m;}return k;},getChipTitle:function(C){var d="";if(C){var e=C.EVALUATION||{};d=e.INDICATOR_TITLE||"";}return d;},getstringifyTileConfig:function(C){var s={};s.EVALUATION=JSON.stringify(C.EVALUATION);s.EVALUATION_FILTERS=JSON.stringify(C.EVALUATION_FILTERS);s.EVALUATION_VALUES=JSON.stringify(C.EVALUATION_VALUES);s.TILE_PROPERTIES=JSON.stringify(C.TILE_PROPERTIES);return JSON.stringify(s);},getChipSubTitle:function(C){var T="";if(C){var d=C.EVALUATION||{};T=d.TITLE||"";}return T;},getAllMeasures:function(s,d){var m=[];try{var f=this._getOData4AnalyticsObject(s);var h=f.findQueryResultByName(d);m=h.getAllMeasureNames();}catch(e){L.error("Error Fetching All Measures : "+e.toString());}return m;},getFormattingMetadata:function(s,e,p){var f={};f._hasCurrency=false;f._hasSapText=false;var m=null;if(s instanceof O){m=R(s);}else{var d=this.getODataModelByServiceUri(s);m=R(d);}var h=new M(m);var j=h.findQueryResultByName(e);var k=j.getAllMeasures();if(k[p]){var l=(k[p]._oTextProperty&&k[p]._oTextProperty.name)?k[p]._oTextProperty.name:"";if(l!=""){f._hasSapText=true;f._sapTextColumn=l;}else if(k[p].hasOwnProperty("_oUnitProperty")){var n=k[p]._oUnitProperty.extensions;for(var i=0;i<k[p]._oUnitProperty.extensions.length;i++){if(n[i].name==="semantics"&&n[i].value==="currency-code"){f._hasCurrency=true;f._currencyColumn=k[p]._oUnitProperty.name;}}}}return f;},getAllDimensions:function(s,d){function i(m,n){var p=0,r=0;var v=[];while(p<m.length&&r<n.length){if(m[p]<n[r]){p++;}else if(m[p]>n[r]){r++;}else{v.push(m[p]);p++;r++;}}return v;}var f=[];var h=[];try{var j=this._getOData4AnalyticsObject(s);var k=j.findQueryResultByName(d);var l=k.getEntityType();h=l.getFilterablePropertyNames();f=k.getAllDimensionNames();if(h&&h.length){f=i(h.sort(),f.sort());}}catch(e){L.error("Error Fetching All Dimesions : "+e.toString());}return f;},prepareQueryServiceUri:function(s,d,m,f,v,h,n){function _(e1){return e1.replace(/'/g,"''");}var p=null;var r=function(){};var w=function(){};try{var x=null;if(s instanceof O){x=R(s);}else{var A=this.getODataModelByServiceUri(s);x=R(A);}var B=new M(x);var C=B.findQueryResultByName(d);var D=new Q(C);if(m){D.setMeasures(m.split(","));D.includeMeasureRawFormattedValueUnit(null,true,true,true);}if(f){if(typeof f==="string"){p=f;p=p.split(",");}for(var i=0;i<p.length;i++){D.addToAggregationLevel([p[i]]);var E=C.getAllDimensions();if(E[p[i]].getTextProperty()!=null){D.includeDimensionKeyTextAttributes([p[i]],true,true,null);}}}if(v&&v.length){var G=[];var H=[];var l;for(i=0,l=v.length;i<l;i++){var I=v[i];if(I.type==="PA"){H.push(I);}else if(I.type==="FI"){G.push(I);}}r=function(e1){var f1=e1.toJSON();var g1=f1.charAt(f1.length-1).toUpperCase();if(g1.charCodeAt(0)>=65&&g1.charCodeAt(0)<=90){f1=f1.slice(0,-1);}return f1;};w=function(e1){if(e1){try{if(e1===+e1){e1=window.parseInt(e1);}var f1=new Date(e1);var g1=f1.getTime();if(isNaN(g1)){return e1;}return r(f1);}catch(e){}}return e1;};if(G.length){var J=D.getFilterExpression();for(i=0,l=G.length;i<l;i++){I=G[i];if(this.getEdmType(s,I.filterPropertyName)==="Edm.DateTime"){I.value=w(I.value);I.valueTo=w(I.valueTo);}if(I.comparator==F.BT){J.addCondition(I.filterPropertyName,I.comparator,_(I.value),I.valueTo);}else{var K=I.value.split(",");for(var j=0,k=K.length;j<k;j++){J.addCondition(I.filterPropertyName,I.comparator,_(K[j].replace(/\^\|/g,",")),null);}}}}if(H.length){if(C.getParameterization()){var S=new P(C.getParameterization());var T=C.getParameterization();var V,W,X,Y,Z;for(var y=0,z=H.length;y<z;y++){V=H[y];W=T.findParameterByName(V.filterPropertyName);if(W.isIntervalBoundary()===true&&W.isLowerIntervalBoundary()===true){Z=W.getPeerIntervalBoundaryParameter();for(i=0,l=H.length;i<l;i++){if(H[i].filterPropertyName===Z.getName()){Y=_(H[i].value);break;}}X=_(V.value);if(Y){S.setParameterValue(V.filterPropertyName,X,Y);}}else if(W.isIntervalBoundary()===true&&W.isLowerIntervalBoundary()===false){L.info("Future development");}else{S.setParameterValue(V.filterPropertyName,_(V.value));}}D.setParameterizationRequest(S);}}}var a1=D.getURIToQueryResultEntries();if(h&&h.length){a1=a1+"&$orderby=";for(y=0,z=h.length;y<z;y++){var b1=h[y].sortOrder||"asc";if(b1){a1+=h[y].element+" "+b1+",";}}a1=a1.slice(0,a1.length-1);}if(n){a1=a1+"&$top="+n;}var c1=C.getAllMeasures();var d1=[];for(i=0;i<m.split(",").length;i++){d1.push(c1[m.split(",")[i]].getUnitProperty());}return{uri:a1,model:B.getODataModel(),unit:d1};}catch(e){L.error("Error Preparing Query Service Uri using OData4Analytics Library : "+e.toString());if(arguments.length){L.error("Arguments Passed to this function");L.error(arguments[0]+","+arguments[1]+","+arguments[2]+","+arguments[3]);}else{L.error("NO Arguments passed to this function");}return null;}},getAllEntitySet:function(s){var d=[];try{var f=this._getOData4AnalyticsObject(s);d=f.getAllQueryResultNames();}catch(e){L.error("Error fetching Enity Set : "+e.toString());}return d;},getAllMeasuresWithLabelText:function(s,d){var m=[];try{var f=this._getOData4AnalyticsObject(s);var h=f.findQueryResultByName(d);var j=h.getAllMeasureNames();for(var i=0;i<j.length;i++){var k=j[i];g.oMeasure=h.findMeasureByName(k);m.push({key:k,value:oMeasure.getLabelText()});}}catch(e){L.error("Error Fetching All Measures : "+e.toString());}return m;},getAllDimensionsWithLabelText:function(s,d){var f=[];try{var h=this._getOData4AnalyticsObject(s);var j=h.findQueryResultByName(d);var k=j.getAllDimensionNames();for(var i=0;i<k.length;i++){var l=k[i];var D=j.findDimensionByName(l);var m=null;if(D.getTextProperty()!=null){m=D.getTextProperty().name;}f.push({key:l,value:D.getLabelText(),textProperty:m});}}catch(e){L.error("Error Fetching All Dimesions : "+e.toString());}return f;},getAllInputParams:function(s,d){var i=[];try{var f=this._getOData4AnalyticsObject(s);var h=f.findQueryResultByName(d);if(h.getParameterization()){var p=h.getParameterization();i=p.getAllParameterNames();}}catch(e){L.error("Error Fetching Input Params : "+e.toString());}return i;},getAllInputParamsWithFlag:function(s,d){var f=[];try{var h=this._getOData4AnalyticsObject(s);var j=h.findQueryResultByName(d);if(j.getParameterization()){var p=j.getParameterization();var k=p.getAllParameterNames();for(var i=0;i<k.length;i++){var l=k[i];var m=p.findParameterByName(l);f.push({name:l,optional:m.isOptional()});}}}catch(e){L.error("Error Fetching Input Params : "+e.toString());}return f;},formatOdataObjectToString:function(v){if(v&&v.constructor===Object){if(v.__edmType==="Edm.Time"){var m=v.ms;var s=Math.floor((m/1000)%60);var d=Math.floor((m/60000)%60);var h=Math.floor((m/3600000)%24);return h+"H"+d+"M"+s+"S";}}return v;},generateCombinations:function(d){function e(h,s){while(s.length<h){s="0"+s;}return s;}var m=Math.pow(2,d.length);var r=[];var f=0;while(m>1){var s=(m-1).toString(2);s=e(d.length,s);r[f]=[];for(var i=0;i<s.length;i++){if(Number(s[i])){r[f].push(d[i]);}}m--;f++;}return r;},logError:function(e,C){if(e==="no data"&&C){var r=u.getResourceBundleModel().getResourceBundle();C.setFailedText(r.getText("sb.noData"));}L.error(e.toString());},numberOfLeadingZeros:function(n){n=String(n);var d=0;var e=n.indexOf(".");if(e===-1){return 0;}if(Number(n.split(".")[0])!==0){return 0;}var i=e+1;while(n[i++]=="0"){++d;}return d;},formatValue:function(v,s,d){d=d||3;var e={3:"K",6:"M",9:"B",12:"T",0:""};e["-3"]="m";e["-6"]="u";e["-9"]="n";e["-12"]="t";e["-2"]="%";var f,p,h;f=Number(v).toPrecision(d);var z=this.numberOfLeadingZeros(f);if(z>0&&s<0){p=f*Math.pow(10,z+d);h=-(z+d);}else{p=Number(f.split("e")[0]);h=Number(f.split("e")[1])||0;}if(!v&&v!==0){return{value:"",unitPrefix:""};}if(s>=0){if(h%3!==0){if(h%3===2){if(h+1===s){h=h+1;p=p/10;}else{h=h-2;p=p*100;}}else if(h+2===s){h=h+2;p=p/100;}else{h--;p=p*10;}}else if(h===15){p=p*1000;h=12;}}else if(s==="-2"){var x=this.formatValue((v*100),0);}else if(h>=0&&v<10&&s==="-3"){p=v*Math.pow(10,3);h=-3;}else if(h>=0){return this.formatValue(v,0);}else{h=Math.abs(h);s=Math.abs(s);if(s>h){p=p/(Math.pow(10,h%3));h=h-(h%3);}else{var i=h-s;p=p/(Math.pow(10,i));h=h-i;}h=0-h;}p+="";if(s==="-2"){var j=(x.unitPrefix=="")?Number(x.value+"").toFixed(4-(x.value+"").indexOf(".")):Number(x.value+"").toFixed(3-(x.value+"").indexOf("."));return{value:Number(j),unitPrefix:(x.unitPrefix)+e[-2]};}p=Number(p).toFixed(4-p.indexOf("."));return{value:Number(p),unitPrefix:e[h]};},isSmartbusinessChipAndCachable:function(d){var C=this.getParsedChip(d&&d.getConfigurationParameter("tileConfiguration"));return(C&&C.TILE_PROPERTIES&&C.TILE_PROPERTIES.tileType&&this.getCachingTime(C));},getHanaClient:function(){var e;var f=function(d,s,x){e=d.sessionClient;c.setCacheHanaClient(e);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e);};var h=function(d,k,l){L.error(d.responseText);L.error("session client call failed");c.setCacheHanaClient(null);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.reject();};var i=sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED||q.Deferred();var j=c.getCacheHanaClient();if(j!==undefined){e=j;sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e);}else if(sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED){return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise();}else{sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED=i;q.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/r/sb/core/logic/GetSessionClient.xsjs",success:f,error:h});}return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise();},abortPendingODataCalls:function(d){try{if(d){d.abort();}}catch(e){this.logError(e);}}};})(window,q);sap.ushell.components.tiles.indicatorTileUtils.cache=(function(){var B={};var K={};var s="HANA_CLIENT";return{getCacheHanaClient:function(){return B[s];},setCacheHanaClient:function(d){B[s]=d;},getEvaluationByChipId:function(k){if(B[k]){return B[k];}return null;},getEvaluationById:function(k){return this.getEvaluationByChipId(k);},setEvaluationById:function(k,d){B[k]=d;},getFrontEndCacheDeferredObject:function(k){if(B[k]){return B[k];}return null;},setFrontEndCacheDefferedObject:function(k,d){B[k]=d;},getKpivalueById:function(k){if(K[k]){return K[k];}return null;},setKpivalueById:function(k,d){K[k]=d;}};})();return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.controller',["sap/ushell/components/tiles/generic","sap/ushell/components/tiles/indicatorTileUtils/cache","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(g,a,m,q,L){"use strict";var D=m.DeviationIndicator;var V=m.ValueColor;var S=m.Size;var b=m.LoadState;var F=m.FrameType;
var C=g.extend("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=false;},
_processDataForComparisonChart:function(d,e,u){var f=[],h={},i,t,l;var j;var T=[];var k=this;var n=null;for(i=0;i<d.results.length;i++){var o=d.results[i];}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oTileApi.url.addSystemToServiceUrl(this.oConfig.EVALUATION.ODATA_URL),this.oConfig.EVALUATION.ODATA_ENTITYSET);for(i=0,l=T.length;i<l;i++){t=T[i];h[t.key]=t.value;}var p=k.oConfig.TILE_PROPERTIES.COLUMN_NAMES||k.oConfig.EVALUATION.COLUMN_NAMES;for(i=0;i<p.length;i++){var r={};var s=p[i];r.value=Number(o[s.COLUMN_NAME]);var v=Number(o[s.COLUMN_NAME]);var w=false;var x=0;var y=k._getEvaluationThresholdMeasures();var I=y?Array.prototype.indexOf.call(y,s.COLUMN_NAME):-1;if(I>-1){w=true;x=k.oConfig.EVALUATION.SCALING;}if(k.oConfig.EVALUATION.SCALING===-2&&w){v*=100;}var c=k.isCurrencyMeasure(s.COLUMN_NAME);if(u&&u[i]&&o[u[i].name]){n=o[u[i].name];}j=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(v,x,k.oConfig.EVALUATION.SCALING,k.oConfig.EVALUATION.DECIMAL_PRECISION,c,n);if(k.oConfig.EVALUATION.SCALING===-2&&w){j+=" %";}r.displayValue=j.toString();if(u){if(u[i]&&o[u[i].name]){r.displayValue+=" "+o[u[i].name];}}r.color=s.semanticColor;r.title=h[s.COLUMN_NAME]||s.COLUMN_NAME;r.measure=s.COLUMN_NAME;r.isCurM=c;f.push(r);}return f;},
fetchChartData:function(r,c,s,E){function d(A,B){var G=false;if(A&&A.results&&A.results.length){for(var i=0,l=B.length;i<l&&!G;i++){G=A.results[0][B[i].COLUMN_NAME]!==null;}}return G;}var t=this;try{var f=this.oConfig.EVALUATION.ODATA_ENTITYSET;var h=this.oConfig.EVALUATION.COLUMN_NAME;var k=h,j;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(j=0;j<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;j++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME!==this.oConfig.EVALUATION.COLUMN_NAME){k=k+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME;}}}else{for(j=0;j<this.oConfig.EVALUATION.COLUMN_NAMES.length;j++){if(this.oConfig.EVALUATION.COLUMN_NAMES[j].COLUMN_NAME!==this.oConfig.EVALUATION.COLUMN_NAME){k=k+","+this.oConfig.EVALUATION.COLUMN_NAMES[j].COLUMN_NAME;}}}var n=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var o=a.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(o){var p=o.Data&&JSON.parse(o.Data);}}var u=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var v=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,u,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);if((p&&!p.rightData)||!o||(!v&&t.oTileApi.visible.isVisible())||n||(c&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh){if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var w=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var x=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,f,k,null,w,3);this.comparisionChartODataRef=x.model.read(x.uri,null,null,true,function(i){t.kpiValueFetchDeferred=true;var l={};if(x.unit){l.unit=x.unit;}if(d(i,t.oConfig.TILE_PROPERTIES.COLUMN_NAMES||t.oConfig.EVALUATION.COLUMN_NAMES)){t.oConfig.TILE_PROPERTIES.FINALVALUE=i;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,k.split(",")[0],x.unit);l.data=t.oConfig.TILE_PROPERTIES.FINALVALUE;var A={};t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();A.ChipId=t.oConfig.TILE_PROPERTIES.id;A.Data=JSON.stringify(l);A.CacheMaxAge=Number(t.chipCacheTime);A.CacheMaxAgeUnit=t.chipCacheTimeUnit;A.CacheType=1;var B=t.getLocalCache(A);t.updateDatajobScheduled=false;var G=t.oConfig.TILE_PROPERTIES.id+"data";var H=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(G);if(H){clearTimeout(H);H=undefined;}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,B);var U=false;if(o){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,A,U,function(i){if(i){t.cacheTime=i&&i.CachedTime;a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,i);t.setTimeStamp();}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}});}}else{var I=a.getKpivalueById(t.oConfig.TILE_PROPERTIES.id),J;if(I){if(!I.CachedTime){I.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}J=I.Data;if(J){J=JSON.parse(J);J.rightData=l;}I.Data=JSON.stringify(J);a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,I);}else{J={};J.rightData=l;B.Data=JSON.stringify(J);a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,B);}t.cacheWriteData=l;}s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(i.results.length===0){t.oConfig.TILE_PROPERTIES.FINALVALUE=i;if(a.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){l=a.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);l.data=i;}else{l.data=i;}a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,l);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,{empty:"empty"});t.setNoData();}},function(i){t.kpiValueFetchDeferred=true;if(i&&i.response){L.error(i.message+" : "+i.request.requestUri);E.call(t,i);}});}}else if(o&&o.Data){var y;var z=t.oConfig&&t.oConfig.TILE_PROPERTIES&&t.oConfig.TILE_PROPERTIES.tileType;if(z.indexOf("DT-")===-1){y=o.Data&&JSON.parse(o.Data);}else{y=o.Data&&JSON.parse(o.Data);y=y.rightData;}t.cacheTime=o.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}if(y.data&&y.data.length){t.oConfig.TILE_PROPERTIES.FINALVALUE=y.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{t.oConfig.TILE_PROPERTIES.FINALVALUE=y.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}}else{t.setNoData();}}catch(e){t.kpiValueFetchDeferred=true;E.call(t,e);}},
doProcess:function(r,i){var t=this;this.setTextInTile();this.fetchChartData(r,i,function(k){this.CALCULATED_KPI_VALUE=k;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType===F.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(F.TwoByOne);t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());var c={};c.data=this.CALCULATED_KPI_VALUE;t.getView().getViewData().deferredObj.resolve();}else{t.oKpiTileView.oGenericTile.setFrameType(F.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(b.Loaded);}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"COMP");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}},this.logError);},
doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({value:8888,size:S.Auto,frameType:F.OneByOne,state:b.Loading,valueColor:V.Error,indicator:D.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1.2,color:"Good"},{title:"Measure 2",value:0.78,color:"Good"},{title:"Measure 3",value:1.4,color:"Error"}]});this.oKpiTileView.oGenericTile.setState(b.Loaded);}
});
return C;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.view',["sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/ushell/components/tiles/sbtilecontent","sap/m/GenericTile","sap/ui/model/json/JSONModel","sap/m/library"],function(C,a,s,G,J,M){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcomparison.ComparisonTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var S=M.Size;var t=this;t.oGenericTileData={};t.oCmprsDataTmpl=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new a({size:S.Responsive,scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oNVConfS=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNVConfS]});t.oGenericTileModel=new J();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorcontribution/ContributionTile.controller',["sap/ushell/components/tiles/generic","sap/ushell/components/tiles/indicatorTileUtils/cache","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(g,a,m,q,L){"use strict";var D=m.DeviationIndicator;var V=m.ValueColor;var S=m.Size;var b=m.LoadState;var F=m.FrameType;
var C=g.extend("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=false;},
_processDataForComparisonChart:function(d,f,h,u){var s=this.oConfig.TILE_PROPERTIES.semanticColorContribution;var j=[];var t;var k;for(var i=0;i<d.results.length;i++){var l=d.results[i];var n={};try{n.title=l[h].toString();}catch(e){n.title="";}n.value=Number(l[f]);var o=Number(l[f]);if(this.oConfig.EVALUATION.SCALING===-2){o*=100;}var c=this.isCurrencyMeasure(f);k=l[u];t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(o,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,k);n.displayValue=t.toString();if(typeof s==="undefined"){n.color="Neutral";}else{n.color=s;}if(n&&u){n[u]=k;}j.push(n);}return j;},
fetchChartData:function(r,i,s,E){var t=this;try{var c=this.oConfig.EVALUATION.ODATA_ENTITYSET,d;t.setThresholdValues();if(this.oConfig.TILE_PROPERTIES.semanticMeasure){d=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{d=this.oConfig.EVALUATION.COLUMN_NAME;}var u=null;var f=this.oConfig.TILE_PROPERTIES.dimension;var h=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var j=a.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(j){var k=j.Data&&JSON.parse(j.Data);}}var l=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var n=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,l,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);if((k&&!k.rightData)||!j||(!n&&t.oTileApi.visible.isVisible())||h||(i&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh){if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=d+",asc";o["1"]=d+",desc";o["2"]=f+",asc";o["3"]=f+",desc";var p=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var w=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,c,d,f,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){w.uri+="&$top=3&$orderby="+p[0]+" "+p[2];}else{w.uri+="&$top=3&$orderby="+p[0]+" "+p[1];}this.comparisionChartODataRef=w.model.read(w.uri,null,null,true,function(z){t.kpiValueFetchDeferred=true;var A={};if(z&&z.results&&z.results.length){if(w.unit[0]){t._updateTileModel({unit:z.results[0][w.unit[0].name]});u=w.unit[0].name;A.unit=w.unit[0];A.unit.name=w.unit[0].name;}f=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oRunTimeODataModel,c,f);A.dimension=f;t.oConfig.TILE_PROPERTIES.FINALVALUE=z;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,d.split(",")[0],f,u);A.data=t.oConfig.TILE_PROPERTIES.FINALVALUE;A.isCurM=t.isACurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var B={};t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();B.ChipId=t.oConfig.TILE_PROPERTIES.id;B.Data=JSON.stringify(A);B.CacheMaxAge=Number(t.chipCacheTime);B.CacheMaxAgeUnit=t.chipCacheTimeUnit;B.CacheType=1;var G=t.getLocalCache(B);t.updateDatajobScheduled=false;var H=t.oConfig.TILE_PROPERTIES.id+"data";var I=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(H);if(I){clearTimeout(I);I=undefined;}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,G);var U=false;if(j){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,B,U,function(z){if(z){t.cacheTime=z&&z.CachedTime;a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,z);}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}});}}else{var J=a.getKpivalueById(t.oConfig.TILE_PROPERTIES.id),K;if(J){if(!J.CachedTime){J.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}K=J.Data;if(K){K=JSON.parse(K);if(t.oKpiTileView.getViewName()==="tiles.indicatornumeric.NumericTile"){K.leftData=A;}else{K.rightData=A;}}J.Data=JSON.stringify(K);a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,J);}else{K={};K.rightData=A;G.Data=JSON.stringify(K);a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,G);}t.cacheWriteData=A;}s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(z.results.length===0){t.oConfig.TILE_PROPERTIES.FINALVALUE=z;if(a.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){A=a.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);A.data=z;}else{A.data=z;}a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,A);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{a.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,{empty:"empty"});t.setNoData();}},function(z){t.kpiValueFetchDeferred=true;if(z&&z.response){L.error(z.message+" : "+z.request.requestUri);E.call(t,z);}});}}else if(j&&j.Data){var x;var y=t.oConfig&&t.oConfig.TILE_PROPERTIES&&t.oConfig.TILE_PROPERTIES.tileType;if(y.indexOf("DT-")===-1){x=j.Data&&JSON.parse(j.Data);}else{x=j.Data&&JSON.parse(j.Data);x=x.rightData;}t.cacheTime=j.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}if(x.data&&x.data.length){if(x.unit){t._updateTileModel({unit:x.data[0][x.unit.name]});}f=x.dimension;t.oConfig.TILE_PROPERTIES.FINALVALUE=x.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(x&&x.data&&x.data instanceof Array&&x.data.length===0){t.oConfig.TILE_PROPERTIES.FINALVALUE=x.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{t.setNoData();}}else{t.setNoData();}}catch(e){t.kpiValueFetchDeferred=true;E.call(t,e);}},
doProcess:function(r,i){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);this.setTextInTile();this.fetchChartData(r,i,function(k){this.CALCULATED_KPI_VALUE=k;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType===F.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(F.TwoByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());t.getView().getViewData().deferredObj.resolve();}else{t.oKpiTileView.oGenericTile.setFrameType(F.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(b.Loaded);}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"CONT");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}},this.logError);},
doDummyProcess:function(){var t=this;t.setTextInTile();t._updateTileModel({value:8888,size:S.Auto,frameType:F.OneByOne,state:b.Loading,valueColor:V.Error,indicator:D.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral"},{title:"EMEA",value:50,color:"Neutral"},{title:"APAC",value:-20,color:"Neutral"}]});this.oKpiTileView.oGenericTile.setState(b.Loaded);}
});
return C;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorcontribution/ContributionTile.view',["sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/ushell/components/tiles/sbtilecontent","sap/m/GenericTile","sap/ui/model/json/JSONModel","sap/m/library"],function(C,a,s,G,J,M){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcontribution.ContributionTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var S=M.Size;var t=this;t.oGenericTileData={};t.oCmprsDataTmpl=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new a({size:S.Responsive,scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oNVConfS=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNVConfS]});t.oGenericTileModel=new J();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatordeviation/DeviationTile.controller',["sap/ushell/components/tiles/generic","sap/m/library"],function(g,m){"use strict";var V=m.ValueColor;var L=m.LoadState;var F=m.FrameType;
var D=g.extend("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=true;},
doProcess:function(k,t){var a=this;var f,b;f=t.targetValue;var d=Number(k);this.setThresholdValues();if(this.oConfig.EVALUATION.SCALING==-2){d*=100;}var c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);b=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(d),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);this.CALCULATED_KPI_VALUE=Number(k);var e={};var h=this.getThresholdsObjAndColor(t).returnColor;var i={value:Number(k),color:h};e.actualValueLabel=b.toString();e.actual=i;e.thresholds=[];e.thresholds=this.getThresholdsObjAndColor(t).arrObj;var j=this.DEFINITION_DATA.EVALUATION_VALUES,l;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){l=Number(f);if(this.oConfig.EVALUATION.SCALING==-2){l*=100;}c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(l,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);e.targetValue=Number(l);e.targetValueLabel=f.toString();}else{for(var n=0;n<j.length;n++){if(j[n].TYPE==="TA"){l=Number(f);if(this.oConfig.EVALUATION.SCALING==-2){l*=100;}c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(l,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);e.targetValue=Number(l);e.targetValueLabel=f.toString();}}}if(this.oConfig.EVALUATION.SCALING==-2){e.scale="%";}this._updateTileModel(e);if(this.DEFINITION_DATA.TILE_PROPERTIES.frameType==F.TwoByOne){a.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());a.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(a.oConfig.TILE_PROPERTIES.id+"defferedRight",false);}else{this.oKpiTileView.oGenericTile.setState(L.Loaded);}this.setToolTip(h,d,"DT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}}},
getThresholdsObjAndColor:function(t){try{var T={};T.arrObj=[];T.returnColor=V.Neutral;var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var w,c,a,b;if(i==="MI"){a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;if(a&&b){a=window.parseFloat(a);b=window.parseFloat(b);T.arrObj.push({value:a,color:V.Error});T.arrObj.push({value:b,color:V.Critical});if(this.CALCULATED_KPI_VALUE<b){T.returnColor=V.Good;}else if(this.CALCULATED_KPI_VALUE<=a){T.returnColor=V.Critical;}else{T.returnColor=V.Error;}}}else if(i==="MA"){c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(c&&w){c=window.parseFloat(c);w=window.parseFloat(w);T.arrObj.push({value:c,color:V.Error});T.arrObj.push({value:w,color:V.Critical});if(this.CALCULATED_KPI_VALUE<c){T.returnColor=V.Error;}else if(this.CALCULATED_KPI_VALUE<=w){T.returnColor=V.Critical;}else{T.returnColor=V.Good;}}}else{a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(w&&b&&c&&c){a=window.parseFloat(a);b=window.parseFloat(b);w=window.parseFloat(w);c=window.parseFloat(c);T.arrObj.push({value:a,color:V.Error});T.arrObj.push({value:b,color:V.Critical});T.arrObj.push({value:w,color:V.Critical});T.arrObj.push({value:c,color:V.Error});if(this.CALCULATED_KPI_VALUE<c||this.CALCULATED_KPI_VALUE>a){T.returnColor=V.Error;}else if((this.CALCULATED_KPI_VALUE>=c&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=b&&this.CALCULATED_KPI_VALUE<=a)){T.returnColor=V.Critical;}else{T.returnColor=V.Good;}}}return T;}catch(e){this.logError(e);}},
doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({actual:{value:120,color:V.Good},targetValue:100,thresholds:[{value:0,color:V.Error},{value:50,color:V.Critical},{value:150,color:V.Critical},{value:200,color:V.Error}],showActualValue:true,showTargetValue:true});this.oKpiTileView.oGenericTile.setState(L.Loaded);}
});
return D;});
sap.ui.predefine('sap/ushell/components/tiles/indicatordeviation/DeviationTile.view',["sap/m/library","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/ushell/components/tiles/sbtilecontent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(M,B,a,s,G,J){"use strict";var S=M.Size;var L=M.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatordeviation.DeviationTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var h="Lorem ipsum";var b="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;b=t.subTitle;}var d={subheader:b,header:h,footerNum:"",footerComp:"",frameType:"OneByOne",state:L.Loading,scale:""};var o=new B({value:"{value}",color:"{color}"});this.oBCTmpl=new a({size:S.Responsive,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:o,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});this.oNVConfS=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oBCTmpl});this.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var g=new J();g.setData(d);this.oGenericTile.setModel(g);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatornumeric/NumericTile.controller',["sap/ushell/components/tiles/generic","sap/m/library"],function(g,m){"use strict";var D=m.DeviationIndicator;var V=m.ValueColor;var L=m.LoadState;var F=m.FrameType;
var N=g.extend("sap.ushell.components.tiles.indicatornumeric.NumericTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=true;},
doProcess:function(k,t){var a=this;this.CALCULATED_KPI_VALUE=k;var b=this.getTrendColor(t);var d=this.getTrendIndicator(t.trendValue);var s="";var e=this.CALCULATED_KPI_VALUE;if(this.oConfig.EVALUATION.SCALING==-2){e*=100;this.getView().oNVConfContS.setFormatterValue(false);}var c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(e),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);if(this.oConfig.EVALUATION.SCALING==-2){this._updateTileModel({scale:"%"});}this._updateTileModel({value:s.toString(),valueColor:b,indicator:d});if(a.oConfig.TILE_PROPERTIES.frameType==F.OneByOne){this.oKpiTileView.oGenericTile.setState(L.Loaded);this.setToolTip(b,e,"NT");}else{a.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());a.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(a.oConfig.TILE_PROPERTIES.id+"defferedLeft",false);}this.setToolTip(b,e,"NT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(a.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,a.oTileApi.visible.isVisible());}}},
doDummyProcess:function(){var t=this;this.setTextInTile();if(!(t.oConfig.BLANKTILE||t.oConfig.TILE_PROPERTIES.blankTile)){t._updateTileModel({value:"10.34",scale:"M",valueColor:V.Neutral,indicator:D.None});}else{this.oKpiTileView.oNVConfContS.setIcon("sap-icon://BusinessSuiteInAppSymbols/icon-multiple-charts");}this.oKpiTileView.oGenericTile.setState(L.Loaded);}
});
return N;});
sap.ui.predefine('sap/ushell/components/tiles/indicatornumeric/NumericTile.view',["sap/m/library","sap/m/NumericContent","sap/ushell/components/tiles/sbtilecontent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(m,N,s,G,J){"use strict";var D=m.DeviationIndicator;var V=m.ValueColor;var L=m.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("sap.ushell.components.tiles.indicatornumeric.NumericTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatornumeric.NumericTile";},createContent:function(){var h="Lorem ipsum";var a="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;a=t.subTitle;}var g={subheader:a,header:h,footerNum:"",footerComp:"",scale:"",unit:"",value:"",size:"Auto",frameType:"OneByOne",state:L.Loading,valueColor:V.Neutral,indicator:D.None,title:"",footer:"",description:""};this.oNVConfContS=new N({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",valueColor:"{/valueColor}",size:"{/size}",formatterValue:true,truncateValueTo:5,nullifyValue:false});this.oNVConfS=new s({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var o=new J();o.setData(g);this.oGenericTile.setModel(o);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/utils',["sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/ui/core/CustomData","sap/ui/core/Item","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/components/tiles/utilsRT"],function(P,r,O,J,c,F,d,I,e,S,f,T,C,g,L,h,q,k,u){"use strict";var M=c.MessageType;var V=c.ValueState;var l=c.mvc.ViewType;var U={};
U.isInitial=function(s){return s==="App Launcher  Static"||s==="App Launcher  Dynamic"||s==="Target Mapping";};
U.getResourceBundleModel=function(){return r.i18nModel;};
U.getEmptyRowObj=function(E){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!E,defValEnabled:true,editable:E};};
U.getEmptyTileActionsRowObj=function(E){var R=U.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:R.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:E};};
U.getTileNavigationActionsRows=function(a,E){var b=[],j=[];j=this.getTileNavigationActions(a);if(j.length){for(var i=0;i<j.length;i++){b.push(t(j[i],E));}}else{b=[this.getEmptyTileActionsRowObj(E)];}return b;};
U.getTileNavigationActions=function(a){var b=[],s="";var j=a.bag.getBag("tileNavigationActions");if(j.getPropertyNames().indexOf("tile_navigation_actions")>=0){b=JSON.parse(j.getProperty("tile_navigation_actions"));for(var i=0;i<b.length;i++){if(b[i].text){if(j.getTextNames().indexOf("action_tile_"+(i+1))>=0){s=j.getText("action_tile_"+(i+1));}b[i].text=s;}}}return b;};
var t=function(a,E){var b={},R=U.getResourceBundleModel().getResourceBundle();b.menu_title=a.text;b.icon=a.icon;if((a.targetURL).charAt(0)==="#"){b.target_type=R.getText("configuration.tile_actions.table.target_type.intent");var N=a.targetURL.split("-");b.navigation_target=N[0].substring(1,N[0].length);b.action=N[1];b.isTargetTypeIntent=true;}else{b.target_type=R.getText("configuration.tile_actions.table.target_type.url");b.navigation_target=a.targetURL;b.action="";b.isTargetTypeIntent=false;}b.editable=E;return b;};
U.tileActionsRows2TileActionsArray=function(a){var b=[];for(var i=0;i<a.length;i++){if(a[i].menu_title){b.push(m(a[i]));}}return b;};
var m=function(a){var b={};b.text=a.menu_title;b.icon=a.icon;if(a.action){b.targetURL="#"+a.navigation_target+"-"+a.action;}else{b.targetURL=a.navigation_target;}return b;};
U.populateTileNavigationActionsBag=function(a,N){a.setProperty("tile_navigation_actions",JSON.stringify(N));for(var i=0;i<N.length;i++){var A=N[i].text;a.setText("action_tile_"+(i+1),A);}};
U.getDefaultFormFactors=function(){return{"appDefault":false,"manual":{"desktop":true,"tablet":true,"phone":true},"defaultParam":true};};
U.buildFormFactorsObject=function(a){return{"appDefault":a.getProperty("/config/appFormFactor"),"manual":{"desktop":a.getProperty("/config/desktopChecked"),"tablet":a.getProperty("/config/tabletChecked"),"phone":a.getProperty("/config/phoneChecked")}};};
U.tableHasDuplicateParameterNames=function(a){var p={};for(var i=0;i<a.length;i++){var b=a[i].name;if(b!==""){if(p[b]){return true;}p[b]=true;}}return false;};
U.tableHasInvalidSapPrelaunchOperationValue=function(a){for(var i=0;i<a.length;i++){if(a[i].name==="sap-prelaunch-operations"){if(P.parseAndValidateOperations(a[i].defaultValue)===null){return false;}break;}}return true;};
U.getMappingSignatureString=function(a,b){var j="";for(var i=0;i<a.length;i++){if(a[i].name){j+=(n(a[i])+"&");}}return b?j+"*=*":j.substring(0,j.length-1);};
var n=function(a){var p="";if(a.mandatory){if(a.isRegularExpression){p="{"+a.name+"="+encodeURIComponent(a.value)+"}";}else{p=a.name+"="+encodeURIComponent(a.value);}}else{p="["+a.name+"="+encodeURIComponent(a.defaultValue)+"]";}return p;};
U.getMappingSignatureTableData=function(a,E){var p=[];var b=a.split("&");for(var i=0;i<b.length;i++){var j=b[i];if(j!=="*=*"){p.push(o(b[i],E));}}return p;};
var o=function(p,E){var a={};if(p.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";p=p.substring(1,p.length-1);a.name=p.substring(0,p.indexOf("="));a.defaultValue=decodeURIComponent(p.substring(p.indexOf("=")+1));}else{a.mandatory=true;a.defaultValue="";if(p.charAt(0)==="{"){a.isRegularExpression=true;p=p.substring(1,p.length-1);}else{a.isRegularExpression=false;}a.name=p.substring(0,p.indexOf("="));a.value=decodeURIComponent(p.substring(p.indexOf("=")+1));}a.editable=E;if(E){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory;}else{a.valEnabled=true;a.defValEnabled=true;}return a;};
U.getAllowUnknownParametersValue=function(a){if(a&&(a.substring(a.length-3,a.length)==="*=*")){return true;}return false;};
U.getMappingSignature=function(R,a){var A=a?"allowed":"ignored";var b=new RegExp("%%UserDefault[.].+%%");var i=[];var j={"parameters":{},"additional_parameters":A};R.forEach(function(p){j.parameters[p.name]={"required":p.mandatory,"rename_to":p.rename_to};if(p.defaultValue){i=b.exec(p.defaultValue);if(i){p.defaultValue=i[0];}j.parameters[p.name].defaultValue={"value":p.defaultValue};}if(p.value){i=b.exec(p.value);if(i){p.value=i[0];}j.parameters[p.name].filter={"value":p.value};if(p.isRegularExpression){j.parameters[p.name].filter.format="regexp";}}});return j;};
U.getSignatureTableData=function(s,E){var p=[];var R={};var a={};var b=s.parameters;for(var i in b){a=b[i];R={};R.editable=E;R.name=i;R.mandatory=a.required;if(a.rename_to){R.rename_to=a.rename_to;}else{R.rename_to=a.renameTo;}if(E){R.valEnabled=R.mandatory;R.defValEnabled=!R.mandatory;}else{R.valEnabled=true;R.defValEnabled=true;}if(a.filter){R.value=a.filter.value;if(a.filter.format&&a.filter.format==="regexp"){R.isRegularExpression=true;}}if(a.defaultValue){R.defaultValue=a.defaultValue.value;}p.push(R);}return p;};
U.getTranslatedTitle=function(a){if(a.bag){var b=a.bag.getBag("tileProperties");if(b.getTextNames().indexOf("display_title_text")>=0){return b.getText("display_title_text");}}if(a.title){return a.title.getTitle();}if(a.preview){return a.preview.getTitle();}return"";};
U.getTranslatedSubtitle=function(a,b){if(a.bag){var i=a.bag.getBag("tileProperties");if(i.getTextNames().indexOf("display_subtitle_text")>=0){return i.getText("display_subtitle_text");}}if(typeof b.display_subtitle_text==="string"){return b.display_subtitle_text;}if(a.preview&&a.preview.getDescription&&a.preview.getDescription()){return a.preview.getDescription();}return"";};
U.getTranslatedProperty=function(a,b,p){if(a.bag){var i=a.bag.getBag("tileProperties");if(i.getTextNames().indexOf(p)>=0){return i.getText(p);}}return b[p];};
U.getActionConfiguration=function(a,A){var s=a.configuration.getParameterValueAsString("tileConfiguration");var b=JSON.parse(s||"{}"),R;if(typeof A==="undefined"){A=a.configurationUi.isEnabled();}if(A){R=U.getResourceBundleModel().getResourceBundle();}b.semantic_object=b.semantic_object||(A?"["+R.getText("configuration.semantic_object")+"]":"");b.semantic_action=b.semantic_action||(A?"["+R.getText("configuration.semantic_action")+"]":"");b.navigation_provider=b.navigation_provider||"";b.navigation_provider_role=b.navigation_provider_role||"";b.navigation_provider_instance=b.navigation_provider_instance||"";b.target_application_id=b.target_application_id||"";b.target_application_alias=b.target_application_alias||"";b.display_info_text=b.display_info_text||"";b.editable=true;if(a.configurationUi&&a.configurationUi.isReadOnly){if(a.configurationUi.isReadOnly()){b.editable=false;}}return b;};
U.getConfiguration=function(v){var a=v.getViewData();var b=a.chip;var i=u.getConfiguration(b,true,true);return i;};
U.getConfigurationUi=function(v,s){var a,b,R,i,A,j;var p=v.getViewData();var w=U.getConfiguration(v);var x=new J({config:w,tileModel:v.getModel()});a=new sap.ui.view({type:l.XML,viewData:p,viewName:s});a.setModel(x);b=a.byId("navigation_semantic_objectInput")||a.byId("semantic_objectInput");if(b){b.getModel().setProperty("/enabled",w.navigation_use_semantic_object);b.getModel().setProperty("/value",w.semantic_object||w.navigation_semantic_object);}R=a.byId("navigation_provider_roleInput");if(R){R.getModel().setProperty("/value",w.navigation_provider_role);}i=a.byId("navigation_provider_instanceInput");if(i){i.getModel().setProperty("/value",w.navigation_provider_instance);}A=a.byId("target_application_aliasInput");if(A){A.getModel().setProperty("/value",w.target_application_alias);}j=a.byId("targetTypeInput");if(j){if(!a.getModel().getProperty("/config/transaction")){a.getModel().setProperty("/config/transaction",{});}if(!a.getModel().getProperty("/config/web_dynpro")){a.getModel().setProperty("/config/web_dynpro",{});}if(v.getModel().getProperty("/config/navigation_provider")==="LPD"){U.displayLpdCustApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="WCF"){j.setSelectedKey("WCF");U.displayWCFApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||v.getModel().getProperty("/config/navigation_provider")===""){j.setSelectedKey("SAPUI5");U.displaySapui5ApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="TR"){U.displayTransactionApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="WDA"){U.displayWebDynproApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="URL"){U.displayURLApplicationTypeFields(a);}}return a;};
U._updateTilePropertiesTexts=function(v,a){var b=a.getTextNames(),i=v.getModel();b.forEach(function(p){i.setProperty("/data/"+p,a.getText(p));i.setProperty("/config/"+p,a.getText(p));});};
U._updateTileConfiguration=function(v,a){var b=v.getModel();q.each(JSON.parse(a),function(p,s){b.setProperty("/data/"+p,s);b.setProperty("/config/"+p,s);if(p==="navigation_target_url"){b.setProperty("/nav/"+p,s);}});};
U.aData=[];U.aActionData=[];U.aRoleData=[];U.aAliasData=[];
U.objectSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),i,s,b;if(v!==undefined){i=E.getParameter("itemsBinding");s=new F("name",d.Contains,v);b=new F("obj",d.Contains,v);a.push(b);a.push(s);i.filter(new F(a,false));}};
U.actionSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),i,s;if(v!==undefined){i=E.getParameter("itemsBinding");s=new F("text",d.Contains,v);a.push(s);i.filter(new F(a,false));}};
U.roleSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),i,s,b;if(v!==undefined){i=E.getParameter("itemsBinding");s=new F("role",d.Contains,v);b=new F("instance",d.Contains,v);a.push(s);a.push(b);i.filter(new F(a,false));}};
U.instanceSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),b,R,i,s,j;b=E.getSource().getCustomData();R=b[0].getValue();if(v!==undefined){i=E.getParameter("itemsBinding");if(v!==""){j=new F("instance",d.Contains,v);a.push(j);}if(R!==""){s=new F("role",d.EQ,R);a.push(s);}if(a.length>0){i.filter(new F(a,true));}}};
U.instanceSuggest=function(a,E){var v=a.getView(),b=[],s=E.getParameter("value"),R,i,j,p,w;R=v.byId("navigation_provider_roleInput");i=R.getValue();s=E.getParameter("suggestValue");if(s!==""){w=new F("instance",d.Contains,s);b.push(w);}if(i!==""){p=new F("role",d.EQ,i);b.push(p);}if(b.length>0){j=E.oSource.getBinding("suggestionItems");j.filter(new F(b,true));}};
U.aliasSuggest=function(a,E){var v=a.getView(),b=[],s=E.getParameter("value"),i,j,p,w,x;i=v.byId("navigation_provider_instanceInput");j=i.getValue();s=E.getParameter("suggestValue");if(s!==""){x=new F("alias",d.Contains,s);b.push(x);}if(j!==""){w=new F("instance",d.EQ,j);b.push(w);}if(b.length>0){p=E.oSource.getBinding("suggestionItems");p.filter(new F(b,true));}};
U.aliasSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),b,i,j,s,p;b=E.getSource().getCustomData();i=b[0].getValue();if(v!==undefined){j=E.getParameter("itemsBinding");s=new F("instance",d.EQ,i);if(v!==""){p=new F("alias",d.Contains,v);a.push(p);}a.push(s);j.filter(new F(a,true));}};
U.objectSelectUpdateDialog=function(s,v){var a=[],i=s.getBinding("items"),b;if(v!==undefined){b=new F("name",d.Contains,v);a.push(b);i.filter(a);}};
U.actionSelectUpdateDialog=function(s,v){var a=[],i=s.getBinding("items"),b;if(v!==undefined){b=new F("text",d.Contains,v);a.push(b);i.filter(a);}};
U.roleSelectUpdateDialog=function(s,v){var a=[],i=s.getBinding("items"),b;if(v!==undefined){b=new F("role",d.Contains,v);a.push(b);i.filter(a);}};
U.instanceSelectUpdateDialog=function(s,v){var a=[],b,i=s.getBinding("items"),j,R,p;b=s.getCustomData();R=b[0].getValue();if(v!==undefined){j=new F("instance",d.Contains,v);a.push(j);}if(R!==""){p=new F("role",d.EQ,R);a.push(p);}if(a.length>0){i.filter(a,true);}};
U.aliasSelectUpdateDialog=function(s,v){var a=[],b,i,j=s.getBinding("items"),p,w;b=s.getCustomData();i=b[0].getValue();if(v!==undefined){w=new F("alias",d.Contains,v);a.push(w);}if(i!==""){p=new F("instance",d.EQ,i);a.push(p);}if(a.length>0){j.filter(a,true);}};
U.sSelectedColor=(q(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");U.sDeselectedColor=(q(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");
U.iconSelect=function(i,s){i.setColor(s?U.sSelectedColor:U.sDeselectedColor);i.setActiveColor(s?U.sDeselectedColor:U.sSelectedColor);};
U.onSelectIcon=function(a,i,b,j){var p=a.getView().getModel(),s;if(i){s=p.getProperty("/config/tile_actions_selected_icon");}else{s=p.getProperty("/config/selected_icon");}if(s){U.iconSelect(s,false);}s=j.getSource();U.iconSelect(s,true);p.setProperty("/config/ok.enabled",true);if(i){p.setProperty("/config/tile_actions_selected_icon",s);}else{p.setProperty("/config/selected_icon",s);}a.byId("selectIconDialog").setTitle(s.getSrc());};
U.onSelectIconClose=function(v){v.byId("selectIconDialog").close();};
U.onSelectIconOk=function(v,a){var s=v.getModel().getProperty("/config/selected_icon");if(!a){v.getModel().setProperty("/config/display_icon_url",s.getSrc());v.byId("iconInput").setValueState(V.None);}else{s=v.getModel().getProperty("/config/tile_actions_selected_icon");if(s){a.setValue(s.getSrc());a.setValueState(V.None);}}U.onSelectIconClose(v);};
U.iconSelectOnValueHelpRequest=function(a,E,b){var p=a.getView().getModel();var R=a.getView().byId("icons");var s=I.getIconCollectionNames();var D=a.getView().byId("selectIconDialog");var v=a.getView().byId("ok");var w,x,y,z,i,j,A,B=false;R.destroyContent();if(b){y=sap.ui.getCore().byId(E.getParameter("id"));x=y.getValue();}else{x=p.getProperty("/config/display_icon_url");}v.attachEventOnce("press",function(){U.onSelectIconOk(a.getView(),y);});s.sort();s=q.grep(s,function(G){if(G==="BusinessSuiteInAppSymbols"){B=true;return false;}return true;});if(B){s.push("BusinessSuiteInAppSymbols");}for(i=0;i<s.length;i+=1){z=I.getIconNames(s[i]);z.sort();for(j=0;j<z.length;j+=1){A=I.getIconURI(z[j],s[i]);R.addContent(new e({height:"38px",press:U.onSelectIcon.bind(null,a,b,y),size:"2rem",src:A,tooltip:A,width:"38px"}));}}w=R.getContent();p.setProperty("/config/ok.enabled",false);D.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(i=0;i<w.length;i+=1){if(w[i].getSrc()===x){if(b){p.setProperty("/config/tile_actions_selected_icon",w[i]);}else{p.setProperty("/config/selected_icon",w[i]);}U.iconSelect(w[i],true);p.setProperty("/config/ok.enabled",true);D.setTitle(x);}else{U.iconSelect(w[i],false);}}D.open();};
U.objectSelectOnValueHelpRequest=function(a,E,i){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object"),b,j,p=new J(),w=new S("semantic_object_select_dialog",{title:s,search:U.objectSelectDoSearch,liveChange:U.objectSelectDoSearch}),x=new f({title:"{obj}"});if(i){b=sap.ui.getCore().byId(E.getParameter("id"));}else{b=v.byId("semantic_objectInput")||v.byId("navigation_semantic_objectInput");}j=b.getValue();w.open(j);p.setData(a.aDefaultObjects.concat(U.aData));w.bindAggregation("items","/",x);w.setModel(p);U.objectSelectUpdateDialog(w,j);w.attachCancel(function(y){b.setValue(j);if(!i){b.fireChange();}w.destroy();w=null;});w.attachConfirm(function(y){var z=y.getParameter("selectedItem");if(z){b.setValue(z.getTitle());if(!i){b.fireChange();}}w.destroy();w=null;});};
U.actionSelectOnValueHelpRequest=function(a,E,i){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action"),A,b,j=new J(),p=new S("semantic_action_select_dialog",{title:s,search:U.actionSelectDoSearch,liveChange:U.actionSelectDoSearch}),w=new f({title:"{text}"});if(i){A=sap.ui.getCore().byId(E.getParameter("id"));}else{A=v.byId("semantic_actionInput")||v.byId("navigation_semantic_actionInput");}b=A.getValue();p.open(b);j.setData(U.aActionData);p.bindAggregation("items","/items",w);p.setModel(j);U.actionSelectUpdateDialog(p,b);p.attachCancel(function(x){A.setValue(b);if(!i){A.fireChange();}p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){A.setValue(y.getTitle());if(!i){A.fireChange();A.fireLiveChange({"newValue":y.getTitle()});}}p.destroy();p=null;});};
U.roleSelectOnValueHelpRequest=function(a){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),R,i,b,j=new J(),p=new sap.m.TableSelectDialog("role_select_dialog",{title:s,search:U.roleSelectDoSearch,liveChange:U.roleSelectDoSearch,columns:[new sap.m.Column({header:[new T({text:U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new sap.m.Column({header:[new T({text:U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),w=new sap.m.ColumnListItem({cells:[new T({text:"{role}"}),new T({text:"{instance}"})]});R=v.byId("navigation_provider_roleInput");i=v.byId("navigation_provider_instanceInput");b=R.getValue();p.open(b);j.setData(a.aDefaultObjects.concat(U.aRoleData));p.bindAggregation("items","/",w);p.setModel(j);U.roleSelectUpdateDialog(p,b);p.attachCancel(function(x){R.setValue(b);R.fireChange();p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){R.setValue(y.getCells()[0].getText());i.setValue(y.getCells()[1].getText());R.fireChange();i.fireChange();}p.destroy();p=null;});};
U.instanceSelectOnValueHelpRequest=function(a){var v=a.getView(),R,s=U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance"),i,b,j=new J(),p=new S("instance_select_dialog",{title:s,search:U.instanceSelectDoSearch,liveChange:U.instanceSelectDoSearch}),w=new f({title:"{instance}"});i=v.byId("navigation_provider_instanceInput");b=i.getValue();R=v.byId("navigation_provider_roleInput").getValue();p.addCustomData(new C({key:"role",value:R}));p.open(b);j.setData(a.aDefaultObjects.concat(U.aRoleData));p.bindAggregation("items","/",w);p.setModel(j);U.instanceSelectUpdateDialog(p,b);p.attachCancel(function(x){i.setValue(b);i.fireChange();p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){i.setValue(y.getTitle());i.fireChange();}p.destroy();p=null;});};
U.applicationAliasSelectOnValueHelpRequest=function(a){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias"),A,b,i,j=new J(),p=new S("alias_select_dialog",{title:s,search:U.aliasSelectDoSearch,liveChange:U.aliasSelectDoSearch}),w=new f({title:"{alias}"});A=v.byId("target_application_aliasInput");b=A.getValue();i=v.byId("navigation_provider_instanceInput").getValue();p.addCustomData(new C({key:"instance",value:i}));p.open(b);j.setData(a.aDefaultObjects.concat(U.aAliasData));p.bindAggregation("items","/",w);p.setModel(j);U.aliasSelectUpdateDialog(p,b);p.attachCancel(function(x){A.setValue(b);A.fireChange();p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){A.setValue(y.getTitle());A.fireChange();}p.destroy();p=null;});};
U.onTargetTypeChange=function(a){var i=a.getParameter("id");var p=sap.ui.getCore().byId(i).getParent().getCells();var s=a.getSource().getSelectedKey();if(s==="INT"){p[3].setEnabled(true);p[2].setShowValueHelp(true);p[2].setValue("");}else{p[2].setShowValueHelp(false);p[2].setValue("");p[3].setEnabled(false);p[3].setValue("");}};
U.addTileActionsRow=function(a){var b=a.getModel();var i=b.getProperty("/config/tile_actions_rows");var j=this.getEmptyTileActionsRowObj();i.push(j);b.setProperty("/config/tile_actions_rows",i);};
U.deleteTileActionsRow=function(j){var p=j.getModel();var s=p.getProperty("/config/tile_actions_rows");var v=j.byId("tileActions");var w=v.getSelectedIndices();var x=w.sort(function(a,b){return b-a;}).slice();for(var i=0;i<x.length;i++){v.removeSelectionInterval(x[i],x[i]);s.splice(x[i],1);}p.setProperty("/config/tile_actions_rows",s);};
U.checkInput=function(a,b){var i=U.getResourceBundleModel().getResourceBundle(),j=a.byId("iconInput"),p=a.byId("useLpdCheckbox"),s=a.byId("navigation_semantic_objectInput")||a.byId("semantic_objectInput"),v=a.byId("navigation_semantic_actionInput")||a.byId("semantic_actionInput"),w=V.None,x=null,N=q.trim(b.getParameter("newValue"));switch(b.getSource()){case j:if(N!==""&&N.substring(0,11)!=="sap-icon://"){w=V.Error;x=i.getText("configuration.display_icon_url.warning");}break;case p:if(!p.getSelected()){v.setValueState(V.None);s.setValueState(V.None);}break;case s:if(/[-#&? ]/.test(N)){w=V.Error;x=i.getText("configuration.semantic_object.error_invalid_chars");}else if(N===""){w=V.Error;}break;case v:if(/[-#&? ]/.test(N)){w=V.Error;x=i.getText("configuration.semantic_action.error_invalid_chars");}else if(N===""){w=V.Error;}break;default:break;}if(w){b.getSource().setValueState(w);if(x!==null){b.getSource().setValueStateText(x||"");}}};
U.checkInputOnSaveConfig=function(a){var i=a.byId("iconInput");var s=a.byId("navigation_semantic_objectInput");var b=a.byId("navigation_semantic_actionInput");var j=a.byId("useLpdCheckbox");var p=U.getResourceBundleModel().getResourceBundle();var R=false;if(i.getValue()!==""&&!U.isIconURIValid(i.getValue())){i.setValueState(V.Error);i.setValueStateText(p.getText("configuration.display_icon_url.warning"));R=true;}if(j.getSelected()&&/[-#&? ]/.test(s.getValue())){s.setValueState(V.Error);s.setValueStateText(p.getText("configuration.semantic_object.error_invalid_chars"));R=true;}else if(j.getSelected()&&s.getValue()===""){s.setValueState(V.Error);R=true;}if(/[-#&? ]/.test(b.getValue())){b.setValueState(V.Error);b.setValueStateText(p.getText("configuration.semantic_action.error_invalid_chars"));R=true;}else if(j.getSelected()&&b.getValue()===""){b.setValueState(V.Error);R=true;}return R;};
U.checkTileActions=function(a){var b=a.getModel().getProperty("/config/tile_actions_rows");var j=U.getResourceBundleModel().getResourceBundle();var R=false;for(var i=0;i<b.length;i++){if(!b[i].menu_title&&(b[i].navigation_target||b.length>1)){b[i].valueState=V.Error;R=true;}else{b[i].valueState=V.None;}if(b[i].icon){if(!U.isIconURIValid(b[i].icon)){b[i].iconValueState=V.Error;b[i].iconValueStateText=j.getText("configuration.display_icon_url.warning");R=true;}}}a.getModel().setProperty("/config/tile_actions_rows",b);return R;};
U.isIconURIValid=function(i){var R=[];var s="";var a="";var v="";R=/sap-icon:\/\/(.+)\//.exec(i);if(R){s=R[1];R=/\/\/.+\/(.+)/.exec(i);if(R){a=R[1];}else{a="";}v=I.getIconURI(a,s);if(v!==i){return false;}}else{R=/sap-icon:\/\/(.+)/.exec(i);if(R){a=R[1];if(!I.getIconInfo(a)){return false;}}else{return false;}}return true;};
U.checkTMInput=function(a,b){var i=U.getResourceBundleModel().getResourceBundle(),s=a.byId("semantic_objectInput"),j=a.byId("semantic_actionInput"),p=a.byId("target_application_descriptionInput"),v=a.byId("target_application_urlInput"),w=a.byId("target_application_componentInput"),N=a.byId("navigation_provider_roleInput"),x=a.byId("navigation_provider_instanceInput"),y=a.byId("target_application_aliasInput"),z=a.byId("target_application_idInput"),A=q.trim(b.getParameter("newValue")),B=V.None,D=null;switch(b.getSource()){case s:if(/[-#&? ]/.test(A)){B=V.Error;D=i.getText("configuration.semantic_object.error_invalid_chars");}if(j.getValue()===""){j.setValueState(V.Error);}break;case j:if(/[-#&? ]/.test(A)){B=V.Error;D=i.getText("configuration.semantic_action.error_invalid_chars");}else if(A===""){B=V.Error;}break;case p:if(A===""){B=V.Error;}break;case v:if(A!==""&&!(/^[-~+,;:?%&#=/.\w]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.url.error_invalid_chars");}break;case w:if(A===""){B=V.Error;}else if(A.substring(0,17)==="SAPUI5.Component="){B=V.Error;D=i.getText("configuration.target_application.component.error_invalid_input");}break;case N:if(A===""){B=V.Error;}else if(!(/^[\w/]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.role.error_invalid_chars");}break;case x:if(A===""){B=V.Error;}else if(!(/^[\w/]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.instance.error_invalid_chars");}break;case y:if(A===""&&z.getValue()===""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");}else if(A!==""&&z.getValue()!==""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");z.setValueState(B);z.setValueStateText(D);}else{z.setValueState(V.None);}break;case z:if(A===""&&y.getValue()===""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");}else if(A!==""&&y.getValue()!==""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");y.setValueState(B);y.setValueStateText(D);}else if(A!==""&&!(/^[A-Fa-f0-9]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.alias_id.error_invalid_chars");}else{y.setValueState(V.None);}break;default:break;}if(B){b.getSource().setValueState(B);if(D!==null){b.getSource().setValueStateText(D||"");}}};
U.checkTMInputOnSaveConfig=function(a){var b=U.getResourceBundleModel().getResourceBundle();var s=a.byId("semantic_objectInput");var i=a.byId("semantic_actionInput");var j=a.byId("target_application_descriptionInput");var p=a.byId("target_application_urlInput");var v=a.byId("target_application_componentInput");var N=a.byId("navigation_provider_roleInput");var w=a.byId("navigation_provider_instanceInput");var x=a.byId("target_application_aliasInput");var y=a.byId("target_application_idInput");var z=a.byId("targetTypeInput");var A=a.byId("target_transactionInput");var W=a.byId("target_web_dynpro_applicationInput");var B=a.byId("target_wcf_application_idInput");var D=a.byId("desktopCB");var E=a.byId("tabletCB");var G=a.byId("phoneCB");var R=false;s.setValue(s.getValue().trim());if(/[-#&? ]/.test(s.getValue())){s.setValueState(V.Error);s.setValueStateText(b.getText("configuration.semantic_object.error_invalid_chars"));R=true;}i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(V.Error);i.setValueStateText(b.getText("configuration.semantic_action.error_invalid_chars"));R=true;}else if(i.getValue()===""){i.setValueState(V.Error);R=true;}var H=a.getModel().getProperty("/config/navigation_provider"),K;if(H==="SAPUI5"){if(j.getValue()===""){j.setValueState(V.Error);R=true;}if(p.getValue()!==""&&!(/^[-~+,;:?%&#=/.\w]+$/.test(p.getValue()))){p.setValueState(V.Error);p.setValueStateText(b.getText("configuration.target_application.url.error_invalid_chars"));R=true;}if(v.getValue()===""){v.setValueState(V.Error);R=true;}else if(v.getValue().substring(0,17)==="SAPUI5.Component="){v.setValueState(V.Error);v.setValueStateText(b.getText("configuration.target_application.component.error_invalid_input"));R=true;}}else if(H==="LPD"){if(N.getValue()===""){N.setValueState(V.Error);R=true;}if(!(/^[\w]+$/.test(N.getValue()))){N.setValueState(V.Error);K=b.getText("configuration.target_application.role.error_invalid_chars");N.setValueStateText(K);R=true;}if(w.getValue()===""){w.setValueState(V.Error);R=true;}if(!(/^[\w]+$/.test(w.getValue()))){w.setValueState(V.Error);K=b.getText("configuration.target_application.instance.error_invalid_chars");w.setValueStateText(K);R=true;}if(x.getValue()===""&&y.getValue()===""){K=b.getText("configuration.target_application.alias_id.warning");x.setValueState(V.Error);x.setValueStateText(K);y.setValueState(V.Error);y.setValueStateText(K);R=true;}if(x.getValue()!==""&&y.getValue()!==""){K=b.getText("configuration.target_application.alias_id.warning");x.setValueState(V.Error);x.setValueStateText(K);y.setValueState(V.Error);y.setValueStateText(K);R=true;}if(y.getValue()!==""&&!(/^[A-Fa-f0-9]+$/.test(y.getValue()))){y.setValueState(V.Error);y.setValueStateText(b.getText("configuration.target_application.alias_id.error_invalid_chars"));R=true;}}else if(H==="TR"){if(A.getValue()===""){A.setValueState(V.Error);R=true;}}else if(H==="WDA"){if(W.getValue()===""){W.setValueState(V.Error);R=true;}}else if(H==="WCF"){if(B.getValue()===""){B.setValueState(V.Error);R=true;}}else if(H==="URL"){if(p.getValue()===""){p.setValueState(V.Error);R=true;}else if(!(/^[-~+,;:?%&#=/.\w]+$/.test(p.getValue()))){p.setValueState(V.Error);p.setValueStateText(b.getText("configuration.target_application.url.error_invalid_chars"));R=true;}}else{z.setValueState(V.Error);z.setValueStateText(b.getText("configuration.navigation_provider.error_invalid_provider"));R=true;}if(!D.getSelected()&&!E.getSelected()&&!G.getSelected()){K=b.getText("configuration.form_factor.warning");D.setValueState(V.Error);D.setValueStateText(K);E.setValueState(V.Error);E.setValueStateText(K);G.setValueState(V.Error);G.setValueStateText(K);R=true;}return R;};
U.updateTooltipForDisabledProperties=function(a){var b=a.getModel();var i=b.getProperty("/config/isLocaleSuitable");if(!i){var j=U.getResourceBundleModel().getResourceBundle();var p=j.getText("edit_configuration.original_locale_not_fit_tooltip",[b.getProperty("/config/userLocale"),b.getProperty("/config/orgLocale")]);a.byId("titleInput").setTooltip(p);a.byId("subtitleInput").setTooltip(p);a.byId("keywordsInput").setTooltip(p);a.byId("infoInput").setTooltip(p);}};
U.updateMessageStripForOriginalLanguage=function(a){var b=a.getModel();if(b.getProperty("/config/isLocaleSuitable")===false){var s=U.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[b.getProperty("/config/orgLocale").toUpperCase(),b.getProperty("/config/userLocale").toUpperCase()]);var i=a.byId("messageStrip");i.setVisible(true);i.setText(s);i.setType(M.Warning);}};
U.createSemanticObjectModel=function(a,s,D){var v=a.getView(),b="/sap/opu/odata/UI2/INTEROP/SemanticObjects",j=[{obj:"",name:""},{obj:"*",name:"*"}],p=(D||j).slice(0),w=new J();w.setSizeLimit(999999);w.setProperty("/value","");w.setProperty("/enabled",true);s.bindAggregation("suggestionItems","suggest>/items",new g({text:"{suggest>obj}"}));s.setModel(w,"suggest");if(U.aData.length>0){w.setData({items:p.concat(U.aData)},true);return;}O.read({requestUri:b,headers:{"Accept":"application/json"}},function(x){var y,z,i;for(i=0;i<x.results.length;i=i+1){y=x.results[i].id;z=x.results[i].text;U.aData.push({obj:y,name:z||y});}w.setData({items:p.concat(U.aData)},true);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+b+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.createRoleModel=function(a,R,b){var v=a.getView(),s="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",j=new J(),p=new J();j.setSizeLimit(999999);p.setSizeLimit(999999);j.setProperty("/value","");j.setProperty("/enabled",true);p.setProperty("/value","");p.setProperty("/enabled",true);var w=new sap.m.ColumnListItem({cells:[new L({text:"{role}"}),new L({text:"{instance}"})]});R.bindAggregation("suggestionRows","/items",w);b.bindAggregation("suggestionItems","/items",new g({text:"{instance}"}));b.setModel(p);R.setModel(j);R.attachSuggestionItemSelected(function(i){b.setValue(i.getParameter("selectedRow").getCells()[1].getText());b.fireChange();});if(U.aRoleData.length>0){j.setData({items:U.aRoleData},false);p.setData({items:U.aRoleData},false);return;}O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D){var x,y,i;for(i=0;i<D.results.length;i=i+1){x=D.results[i].lpdRole;y=D.results[i].instance;U.aRoleData.push({role:x,instance:y});}j.setData({items:U.aRoleData},true);p.setData({items:U.aRoleData},true);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+s+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.createAliasModel=function(a,A){var v=a.getView(),b,s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",j=new J();j.setSizeLimit(999999);j.setProperty("/value","");j.setProperty("/enabled",true);A.bindAggregation("suggestionItems","/items",new g({text:"{alias}"}));A.setModel(j);b=u.getConfiguration(v.oViewData.chip,true,true);if(b&&b.navigation_provider_role&&b.navigation_provider_instance){if(b.navigation_provider_role!==""&&b.navigation_provider_instance!==""){s=s+"?role='"+b.navigation_provider_role+"'&instance='"+b.navigation_provider_instance+"'";}}O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D){var p,R,w,i,x;U.aAliasData=[];for(i=0;i<D.results.length;i=i+1){p=D.results[i].lpdApplicationAlias;R=D.results[i].lpdRole;w=D.results[i].lpdInstance;U.aAliasData.push({role:R,instance:w,alias:p});}x=j.getData();if(x){x.items=U.aAliasData;}else{x={items:U.aAliasData};}j.setData(x,false);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+s+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.updateAliasModel=function(v,a){var s,b,R,j=a.getModel();b=v.byId("navigation_provider_instanceInput").getValue();R=v.byId("navigation_provider_roleInput").getValue();s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+R+"'&instance='"+b+"'";O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D){var A,R,b,i,p;U.aAliasData=[];for(i=0;i<D.results.length;i=i+1){A=D.results[i].lpdApplicationAlias;R=D.results[i].lpdRole;b=D.results[i].lpdInstance;U.aAliasData.push({role:R,instance:b,alias:A});}p=j.getData();if(p){p.items=U.aAliasData;}else{p={items:U.aAliasData};}j.setData(p,false);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+s+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.createActionModel=function(a,A){var i=new J();var v=a.getView(),b,s;i.setData({"items":[{"text":"display"},{"text":"approve"},{"text":"displayFactSheet"},{"text":"manage"},{"text":"create"},{"text":"monitor"},{"text":"track"},{"text":"change"},{"text":"register"},{"text":"release"},{"text":"analyzeKPIDetails"},{"text":"lookup"},{"text":"manageLineItems"}]});U.aActionData=i.getData();b=u.getConfiguration(v.oViewData.chip,true,true);s=b.navigation_semantic_action||b.semantic_action;if(s){if(!i.getData().items.some(function(j){return j.text===s;})){i.getData().items.push({"text":s});}}A.bindAggregation("suggestionItems","items>/items",new g({text:"{items>text}"}));A.setModel(i,"items");A.getBinding("suggestionItems").sort(new h("text",false));};
U.createNavigationProviderModel=function(a,b){var i=new J();var R=U.getResourceBundleModel().getResourceBundle();var j=[{"key":"SAPUI5","text":R.getText("configuration.target_application.sapui5")},{"key":"LPD","text":R.getText("configuration.target_application.lpd_cust")},{"key":"TR","text":R.getText("configuration.target_application.transaction")},{"key":"WDA","text":R.getText("configuration.target_application.web_dynpro")},{"key":"URL","text":R.getText("configuration.target_application.url")}];var p=U.getConfiguration(a.getView());var s=p.navigation_provider==="WCF";if(s){j.push({"key":"WCF","text":R.getText("configuration.target_application.wcf")});}i.setData({"items":j});b.bindItems("items>/items",new g({key:"{items>key}",text:"{items>text}"}));b.setModel(i,"items");b.getBinding("items").sort(new h("text",false));};
U.displayApplicationTypeFields=function(a,b){switch(a){case"LPD":U.displayLpdCustApplicationTypeFields(b);break;case"SAPUI5":U.displaySapui5ApplicationTypeFields(b);break;case"TR":U.displayTransactionApplicationTypeFields(b);break;case"WDA":U.displayWebDynproApplicationTypeFields(b);break;case"URL":U.displayURLApplicationTypeFields(b);break;case"WCF":U.displayWCFApplicationTypeFields(b);break;}};
U.displayWCFApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(true);a.byId("target_wcf_application_idInput").setVisible(true);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("application_type_deprecated").setVisible(false);};
U.displaySapui5ApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(true);a.byId("target_application_urlInput").setVisible(true);a.byId("application_component").setVisible(true);a.byId("target_application_componentInput").setVisible(true);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(false);a.byId("target_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};
U.displayLpdCustApplicationTypeFields=function(a){a.byId("application_description").setVisible(false);a.byId("target_application_descriptionInput").setVisible(false);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("navigation_provider_role").setVisible(true);a.byId("navigation_provider_roleInput").setVisible(true);a.byId("navigation_provider_instance").setVisible(true);a.byId("navigation_provider_instanceInput").setVisible(true);a.byId("target_application_alias").setVisible(true);a.byId("target_application_aliasInput").setVisible(true);a.byId("target_application_id").setVisible(true);a.byId("target_application_idInput").setVisible(true);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(false);a.byId("target_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(true);};
U.displayTransactionApplicationTypeFields=function(a){a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("target_transaction").setVisible(true);a.byId("target_transactionInput").setVisible(true);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("application_type_deprecated").setVisible(false);};
U.displayWebDynproApplicationTypeFields=function(a){a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(true);a.byId("target_web_dynpro_applicationInput").setVisible(true);a.byId("target_web_dynpro_configuration").setVisible(true);a.byId("target_web_dynpro_configurationInput").setVisible(true);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("application_type_deprecated").setVisible(false);};
U.displayURLApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(true);a.byId("target_application_urlInput").setVisible(true);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("application_type_deprecated").setVisible(false);};
return U;},true);
sap.ui.predefine('sap/ushell/components/tiles/utilsRT',["sap/ui/core/format/NumberFormat","sap/ui/core/library","sap/base/Log"],function(N,c,L){"use strict";var V=c.mvc.ViewType;var u={};
u.getConfiguration=function(t,a,E){var r;var C=t.configuration.getParameterValueAsString("tileConfiguration");try{var o=JSON.parse(C||"{}");}catch(e){L.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utilsRT");return{};}var U=sap.ui.require("sap/ushell/components/tiles/utils");o.editable=true;if(t.configurationUi&&t.configurationUi.isReadOnly){if(t.configurationUi.isReadOnly()){o.editable=false;}}var T=U.getTranslatedTitle(t);var s=U.getTranslatedSubtitle(t,o);var i=U.getTranslatedProperty(t,o,"display_info_text");var k=U.getTranslatedProperty(t,o,"display_search_keywords");if(a){r=U.getResourceBundleModel().getResourceBundle();if(E&&t.bag){var b=t.bag.getOriginalLanguage();var l=sap.ui.getCore().getConfiguration().getLocale().getSAPLogonLanguage();var d=sap.ui.getCore().getConfiguration().getLanguage();o.isLocaleSuitable=b===""||b.toLowerCase()===l.toLowerCase()||b.toLowerCase()===d.toLowerCase();o.orgLocale=b;o.userLocale=l;}}o.display_icon_url=o.display_icon_url||"";if(i!==undefined){o.display_info_text=i;}else if(o.display_info_text===undefined){if(a&&!E){o.display_info_text="["+r.getText("configuration.display_info_text")+"]";}else{o.display_info_text="";}}o.navigation_semantic_object=o.navigation_semantic_object||"";o.navigation_semantic_action=o.navigation_semantic_action||"";o.navigation_semantic_parameters=o.navigation_semantic_parameters||"";o.display_number_unit=o.display_number_unit||"";o.display_number_factor=o.display_number_factor||"";o.service_refresh_interval=o.service_refresh_interval?parseInt(o.service_refresh_interval,10):0;o.service_url=o.service_url||"";o.navigation_target_url=o.navigation_target_url||"";if(a&&U.isInitial(T)){o.display_title_text=E?"":"["+r.getText("configuration.display_title_text")+"]";o.display_subtitle_text=E?"":"["+r.getText("configuration.display_subtitle_text")+"]";}else{o.display_title_text=T||o.display_title_text||"";if(s!==undefined){o.display_subtitle_text=s;}else if(o.display_subtitle_text===undefined){o.display_subtitle_text="";}}o.navigation_use_semantic_object=(o.navigation_use_semantic_object!==false);o.display_search_keywords=k||o.display_search_keywords||"";if(a){o.display_number_value=o.display_number_value||1234;}o.form_factors=o.form_factors?o.form_factors:U.getDefaultFormFactors();o.desktopChecked=o.form_factors.manual.desktop;o.tabletChecked=o.form_factors.manual.tablet;o.phoneChecked=o.form_factors.manual.phone;o.manualFormFactor=!(o.form_factors.appDefault)&&o.editable;o.appFormFactor=o.form_factors.appDefault;o.formFactorConfigDefault=!!o.form_factors.defaultParam;if(o.signature){o.rows=U.getSignatureTableData(o.signature,E&&o.editable);}else{o.rows=(o.mapping_signature&&o.mapping_signature!=="*=*")?U.getMappingSignatureTableData(o.mapping_signature,E&&o.editable):[U.getEmptyRowObj(o.editable)];}if(o.signature){o.isUnknownAllowed=(o.signature.additional_parameters==="allowed"||o.signature.additionalParameters==="allowed");}else{o.isUnknownAllowed=(o.mapping_signature!==undefined)?U.getAllowUnknownParametersValue(o.mapping_signature):true;}if(a){o.tile_actions_rows=U.getTileNavigationActionsRows(t,o.editable);}else if(!o.actions){o.actions=U.getTileNavigationActions(t);}return o;};
u.getDataToDisplay=function(C,d){var a=0,i,n,o,s,D={display_icon_url:d.icon||C.display_icon_url||"",display_title_text:d.title||C.display_title_text||"",display_number_value:!isNaN(d.number)?d.number:"...",display_number_unit:d.numberUnit||C.display_number_unit||"",display_info_text:d.info||C.display_info_text||"",display_info_state:d.infoState||"Neutral",display_subtitle_text:d.subtitle||C.display_subtitle_text||"",display_state_arrow:d.stateArrow||"None",display_number_state:d.numberState||"Neutral",display_number_digits:d.numberDigits>=0?d.numberDigits:4,display_number_factor:d.numberFactor||"",display_search_keyword:d.keywords||C.display_search_keyword||"",targetParams:[]};if(d.infoStatus){D.display_info_state=d.infoStatus;}if(d.targetParams){D.targetParams.push(d.targetParams);}if(d.results){for(i=0,n=d.results.length;i<n;i=i+1){o=d.results[i].number||0;if(typeof o==="string"){o=parseFloat(o,10);}a=a+o;s=d.results[i].targetParams;if(s){D.targetParams.push(s);}}D.display_number_value=a;}if(!isNaN(d.number)){if(typeof d.number==="string"){d.number=d.number.trim();}if(d.number===""){D.display_number_value="...";}else{var S=this._shouldProcessDigits(d.number,d.numberDigits),m=D.display_icon_url?4:5;if(d.number&&d.number.length>=m||S){var b=this._normalizeNumber(d.number,m,d.numberFactor,d.numberDigits);D.display_number_factor=b.numberFactor;D.display_number_value=b.displayNumber;}else{var e=N.getFloatInstance({maxFractionDigits:m});D.display_number_value=e.format(d.number);}}}if(D&&D.display_number_state){switch(D.display_number_state){case"Positive":D.display_number_state="Good";break;case"Negative":D.display_number_state="Error";break;}}return D;};
u.getTileSettingsAction=function(m,s,t){var a=sap.ui.require("sap/ushell/components/tiles/utils");var r=a.getResourceBundleModel().getResourceBundle();return{text:(!t||t==="tile")?r.getText("tileSettingsBtn"):r.getText("linkSettingsBtn"),press:function(){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout","sap/m/Button","sap/m/Dialog"],function(S,b,B,D){var A={showGroupSelection:false,title:m.getProperty("/config/display_title_text"),subtitle:m.getProperty("/config/display_subtitle_text")};if(!t||t==="tile"){A.info=m.getProperty("/config/display_info_text");A.icon=m.getProperty("/config/display_icon_url");A.keywords=m.getProperty("/config/display_search_keywords");}else if(t==="link"){A.showInfo=false;A.showIcon=false;A.showPreview=false;}var d=sap.ui.view({type:V.JS,viewName:"sap.ushell.ui.footerbar.SaveAsTile",viewData:{appData:A}});var o=new S({id:"tileSettings",layout:b.GridLayout,content:[d]}).addStyleClass("sapUshellAddBookmarkForm");var e=new B("bookmarkOkBtn",{text:r.getText("okBtn"),press:function(){s(d);h.close();},enabled:true}),f=new B("bookmarkCancelBtn",{text:r.getText("cancelBtn"),press:function(){h.close();}});var g=function(i){e.setEnabled(!!i.trim());};d.getTitleInput().attachLiveChange(function(){g(this.getValue());});var h=new D({id:"settingsDialog",title:(!t||t==="tile")?r.getText("tileSettingsDialogTitle"):r.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:o,beginButton:e,endButton:f,horizontalScrolling:false,afterClose:function(){h.destroy();}});h.open();});}};};
u.getSemanticNavigationUrl=function(C){var U="#"+jQuery.trim(C.navigation_semantic_object);U+="-"+jQuery.trim(C.navigation_semantic_action);if(C.navigation_semantic_parameters&&jQuery.trim(C.navigation_semantic_parameters).length>0){U+="?"+jQuery.trim(C.navigation_semantic_parameters);}return U;};
u.addParamsToUrl=function(U,d){var p="",b=U.indexOf("?")!==-1,t=d.targetParams,i;if(t&&t.length>0){for(i=0;i<t.length;i=i+1){p+=t[i];if(i<t.length-1){p+="&";}}}if(p.length>0){if(!b){U+="?";}else{U+="&";}U+=p;}return U;};
u._normalizeNumber=function(n,m,a,i){var b;if(isNaN(n)){b=n;}else{var o=N.getFloatInstance({maxFractionDigits:i});if(!a){var d=Math.abs(n);if(d>=1000000000){a="B";n/=1000000000;}else if(d>=1000000){a="M";n/=1000000;}else if(d>=1000){a="K";n/=1000;}}b=o.format(n);}var e=b;var f=e[m-1];m-=(f==="."||f===",")?1:0;e=e.substring(0,m);return{displayNumber:e,numberFactor:a};};
u._shouldProcessDigits=function(d,D){var n;d=typeof(d)!=="string"?d.toString():d;if(d.indexOf(".")!==-1){n=d.split(".")[1].length;if(n>D){return true;}}return false;};
return u;},true);
sap.ui.predefine('sap/ushell/components/treeview/NavTree.controller',["sap/ui/model/json/JSONModel","sap/ui/core/Icon","sap/m/Label","sap/m/CustomListItem","sap/m/library","sap/m/Link","sap/base/Log","sap/ui/thirdparty/jquery"],function(J,I,L,C,m,a,b,q){"use strict";var c=m.ListType;sap.ui.controller("sap.ushell.components.treeview.NavTree",{onInit:function(){var v=this.getView().getViewData(),r=v.data.items,s=v.data.serviceURL||"",t={items:[],entryObject:{}};var M=new J(t);this.getView().setModel(M);q.getJSON(s).done(function(r){this.buidModelData(r);}.bind(this)).fail(function(j,d,e){var f=d+", "+e;b.error("Request Failed: "+f);this.buidModelData(r);}.bind(this));},buidModelData:function(r){var i,e,g=0,t={items:[],entryObject:{}};for(i in r.nodes){var d=r.nodes[i];if(d.type==="SUBMENU"){var f=d.title;for(e in d.nodes){var h=d.nodes[e];h.groupIndex=g.toString();h.groupName=f;t.items.push(h);t.entryObject[g.toString()]={title:d.title,type:d.type};}}else if(d.type==="URL"||d.type==="APP"){d.groupIndex=g.toString();d.groupName="";t.items.push(d);t.entryObject[g.toString()]={title:d.title,type:d.type,href:d.target};}g++;}var M=new J(t);this.getView().setModel(M);},getGroupHeader:function(g){var e=this.getView().getModel().getData().entryObject[g.key];if(e.type==="SUBMENU"){var i=new I({src:"slim-arrow-right",tooltip:e.title}).addStyleClass("sapUshellGroupListItemIcon");var l=new L({text:e.title}).addStyleClass("sapUshellNavTreeLink");return new C({press:[this.handleClickOnSubMenu,this],type:c.Active,content:[i,l]}).addStyleClass("sapUshellNavTreeListItem sapUshellNavTreeParent");}return new C({content:new a({text:e.title,href:e.href}).addStyleClass("sapUshellNavTreeLink")}).addEventDelegate({onclick:this.onNavTreeTitleChange.bind(this)}).addStyleClass("sapUshellNavTreeListItem sapUshellNavTreeSingle");},onNavTreeTitleChange:function(e){if(this._prevSelect){this._prevSelect.removeStyleClass("sapUshellNavTreeItemSelected");}var i=e.srcControl;if(e.srcControl.getContent){window.location.href=e.srcControl.getContent()[0].getHref();i.addStyleClass("sapUshellNavTreeItemSelected");this._prevSelect=i;}else{i.getParent().addStyleClass("sapUshellNavTreeItemSelected");this._prevSelect=i.getParent();}},handleClickOnSubMenu:function(e){var i=e.getSource().getContent()[0];if(i.getSrc()==="slim-arrow-down"){i.setSrc("slim-arrow-right");this.toggleSubItemsState(e,true);}else{i.setSrc("slim-arrow-down");this.toggleSubItemsState(e,false);}},toggleSubItemsState:function(e,i){if(e){var j=q(e.getSource().getDomRef());if(i){j.nextUntil(".sapUshellNavTreeSingle, .sapUshellNavTreeParent").addClass("sapUshellNavTreeChildHide");}else{j.nextUntil(".sapUshellNavTreeSingle, .sapUshellNavTreeParent").removeClass("sapUshellNavTreeChildHide");}}}});},true);
sap.ui.predefine('sap/ushell/components/treeview/NavTree.view',["sap/m/List","sap/m/CustomListItem","sap/m/Link","sap/ui/model/Sorter","sap/ui/thirdparty/jquery"],function(L,C,a,S,q){"use strict";sap.ui.jsview("sap.ushell.components.treeview.NavTree",{createContent:function(c){var l=new C({content:new a({text:"{title}",href:"{target}"}).addStyleClass("sapUshellNavTreeLink")}).addEventDelegate({onclick:c.onNavTreeTitleChange.bind(c)}).addStyleClass("sapUshellNavTreeListItem sapUshellNavTreeChild sapUshellNavTreeChildHide sapUshellNavTree_visual_transition");var o=new L({items:{path:"/items",groupHeaderFactory:q.proxy(c.getGroupHeader,c),sorter:new S("groupIndex",false,true),template:l}});var b=o.onAfterRendering;o.onAfterRendering=function(){b.apply(this,arguments);if(this.getItems().length>0){var f=this.getItems()[0];if(f.getMetadata().getName()==="sap.m.GroupHeaderListItem"&&f.getTitle&&!f.getTitle()){f.destroy();}var O=q(".sapUshellNavTreeParent");O.each(function(){var Q=q(this);var i=sap.ui.getCore().byId(Q.attr("id"));var I=i.getContent().length&&i.getContent()[0]&&i.getContent()[0].getSrc()||"";if(I==="slim-arrow-down"){Q.nextUntil(".sapUshellNavTreeSingle, .sapUshellNavTreeParent").removeClass("sapUshellNavTreeChildHide");}});}};return o;},getControllerName:function(){return"sap.ushell.components.treeview.NavTree";}});},true);
sap.ui.predefine('sap/ushell/functionBindPrototype',["sap/base/Log"],function(L){"use strict";L.error("The application uses an obsolete sap.ushell.functionBindPrototype module.","The reference to this module has to be removed.");},false);
sap.ui.predefine('sap/ushell/iconfonts',["sap/ui/core/IconPool"],function(I){"use strict";var a={};
a.registerFiori2IconFont=function(){I.registerFont({fontFamily:"BusinessSuiteInAppSymbols",fontURI:sap.ui.require.toUrl("sap/ushell/themes/base/fonts")});I.registerFont({fontFamily:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts")});var f={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0018","e0c3"],["F0019","e0c3"],["F0020","e0c3"],["F0021","e10d"],["F0366","e129"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},F={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},A={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","E200"],["F0019","E201"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","E22F"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E213"],["F0429","E2A6"],["F0xx1","E240"],["F0xx2","E241"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},o={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E21C"],["F0251","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2BC"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"],["F0600","E38A"]]},b={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F0834","E31D"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E383"],["F0718","E384"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},c={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},d={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},e={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1030","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},g={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1563","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},h={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"],["Wifi-Online","E710"],["Wifi-Offline","E711"],["Sunrise","E712"],["Sunset","E713"],["Afternoon","E714"],["Night","E715"],["Loading Date","E715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71A"],["Heavy Rain","e71B"],["Foggy","e71C"],["Snow","e71D"],["Risk Assessment","e71E"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"],["Windy","e729"],["Oil Tank","e72A"],["Location Assets","e72B"],["Transport Systems","e72C"],["Field","e72D"],["Field Group","e72E"],["Record","e730"],["Record Group","e731"]]},i={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(f,F,A,h,o,b,i,c,d,e,g,s);};
a.registerFonts=function(){var o,i,j;for(i=0;i<arguments.length;i=i+1){o=arguments[i];for(j=0;j<o.icons.length;j=j+1){I.addIcon(o.icons[j][0],o.collectionName,o.fontFamily,o.icons[j][1],false,true);}}};
return a;},true);
sap.ui.predefine('sap/ushell/library',["sap/ui/core/library","sap/m/library","sap/ui/core/Core","sap/ushell/ApplicationType"],function(c,l,C,A){"use strict";C.initLibrary({name:"sap.ushell",dependencies:["sap.ui.core","sap.m"],types:["sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.components.container.ApplicationType"],interfaces:[],controls:["sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.EndUserFeedback","sap.ushell.ui.footerbar.HideGroupsButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Panel","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:[],version:"1.74.0",extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});sap.ushell.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};sap.ushell.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};sap.ushell.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};sap.ushell.components.container.ApplicationType=A.enum;return sap.ushell;},true);
sap.ui.predefine('sap/ushell/navigationMode',[],function(){"use strict";var e={};var _=function(E){var i=true;if(E){if(typeof E!=="object"){i=false;}else{Object.keys(E).forEach(function(k){if(["GUI","WDA","WCF"].indexOf(k)===-1){i=false;}else if(typeof E[k]!=="boolean"){i=false;}});}}if(!i){jQuery.sap.log.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(E),"sap.ushell.services.navigationMode");}};
e._isLegacyApplicationType=function(A){switch(A){case"WDA":case"TR":case"NWBC":case"WCF":return true;default:return false;}};
var a=function(A){switch(A){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined;}};var b=function(E,A){if(jQuery.isPlainObject(E)){return E[a(A)];}return false;};
e.compute=function(n,E,s,A,o){var i,l,c=["inplace","explace"];_(o);var N={};if(c.indexOf(E)>=0){N["sap-ushell-next-navmode"]=E;}if(c.indexOf(s)>=0){i=e._getInternalNavigationMode(s,n);jQuery.sap.log.debug("Navigation mode was forced to "+i,"because sap-ushell-navmode parameter was set to "+s+" for target with applicationType: "+A,"sap.ushell.navigationMode");N.navigationMode=i;N.explicitNavMode=true;return N;}l=e._isLegacyApplicationType(A)&&e._isLegacyApplicationType(n);if(b(o,n)===true&&!l){N.navigationMode="embedded";}return N;};
e._getInternalNavigationMode=function(E,A){var i={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded"},URL:{inplace:"embedded",explace:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded"}};if(!i.hasOwnProperty(A)){jQuery.sap.log.error(A+" is not a valid application type","expected one of "+Object.keys(i).join(", "),"sap.ushell.navigationMode");return null;}if(E!=="inplace"&&E!=="explace"){jQuery.sap.log.error(E+" is not a valid external navigation mode","expected one of 'inplace', 'explace'","sap.ushell.navigationMode");return null;}return i[A][E];};
e.getExternalNavigationMode=function(i){var E={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!E.hasOwnProperty(i)){jQuery.sap.log.error(i+" is not a recognized internal navigation mode","expected one of "+Object.keys(E).join(","),"sap.ushell.navigationMode");return null;}return E[i];};
var w=["NWBC","WDA","TR","WCF"];
e.getNavigationMode=function(r,c){var A=r.additionalInformation,s=r.applicationType,u,U;if(w.indexOf((c||{}).applicationType)>-1&&!(c||{}).explicitNavMode){return'newWindowThenEmbedded';}if((A===null||typeof A==="string"||typeof A==="undefined")&&(s==="URL"||s==="SAPUI5")){if(A&&A.indexOf("managed=")===0){if(A==="managed=FioriWave1"){return"embedded";}if(A==="managed="){return"newWindow";}return undefined;}if(A&&A.indexOf("SAPUI5.Component=")===0){u="[a-zA-Z0-9_]+";U=["^SAPUI5.Component=",u,"([.]",u,")*$"].join("");if(!(new RegExp(U)).test(A)){jQuery.sap.log.warning(["The UI5 component name in",A,"is not valid.","Please use names satisfying",U].join(" "));}return"embedded";}return"newWindow";}if(w.indexOf(s)>-1){return"newWindowThenEmbedded";}return undefined;};
e.computeNavigationModeForHomepageTiles=function(A,s,i){var r={applicationType:A,additionalInformation:s};if(w.indexOf(A)>-1&&i){return"embedded";}return this.getNavigationMode(r);};
return e;},true);
sap.ui.predefine('sap/ushell/override',["sap/m/GroupHeaderListItem","sap/ui/base/ManagedObject","sap/base/util/uid"],function(G,M,g){"use strict";var o={};
o.updateAggregation=function(n){if(this.isTreeBinding(n)){M.prototype.updateAggregation.apply(this,arguments);}else{var b=this.mBindingInfos[n],B=b.binding,a=B.getContexts(),f=b.factory,A=this.getMetadata().getJSONKeys()[n],s=A._sMutator+"Group",c=B.isGrouped()&&this[s],i=[],d=jQuery.proxy(function(C){var I=this.getId()+"-"+g(),e=f(I,C);e.setBindingContext(C,b.model);this[A._sMutator](e);},this);if(c){M.prototype.updateAggregation.apply(this,arguments);}else{i=this[A._sGetter]();o._adaptCurrentGroup(a,i);o._updateCurrentGroup(a,i,b.model,d);i.length=a.length;}}};
o._adaptCurrentGroup=function(b,I){var i,a,c;for(i=0;i<b.length;i++){a=!!(I[i]&&I[i].isA("sap.ui.integration.widgets.Card"));c=!!b[i].getProperty(b[i].sPath+"/isCard");if(a||c){var j=i;for(;j<I.length;j++){I[j].destroy();}break;}}};
o._updateCurrentGroup=function(b,I,B,a){var i;for(i=0;i<b.length;i++){if(i<I.length&&!I[i].bIsDestroyed){I[i].setBindingContext(b[i],B);}else{a(b[i]);}}for(;i<I.length;++i){I[i].destroy();}};
o.updateAggregationGrouped=function(n){var b=this.mBindingInfos[n],B=b.binding,f=b.factory,c,N=null,a=null,s=null,t=this,I=t.getItems(),l=0,L=0,i,d,T=[];a=B.isGrouped()&&this.addItemGroup;jQuery.each(B.getContexts(),function(e,C){if(a&&B.aSorters.length>0){N=B.aSorters[0].fnGroup(C);if(typeof N==="string"){N={key:N};}if(N.key!==s){var h,H;if(b.groupHeaderFactory){h=b.groupHeaderFactory(N);}H=h||new G({title:N.text||N.key}).addStyleClass("sapMListHdr");t.insertAggregation("items",H,L,true);L=L+1;s=N.key;}}I=t.getItems();for(i=L;i<I.length;i=i+1){if(I[i].constructor===G){T.push(t.removeItem(I[i]));I=t.getItems();}}if(L<I.length){I[L].setBindingContext(C,b.model);if(I[L].aDelegates){jQuery.each(I[L].aDelegates,function(i,v){v.vThis=C;});}}else{d=t.getId()+"-"+L;c=f(d,C);c.setBindingContext(C,b.model);t.addItem(c);}L=L+1;l=L;});for(i=I.length-1;i>=l;i=i-1){T.push(t.removeItem(I[i]));}setTimeout(function(){jQuery.each(T,function(i,v){v.destroy();});},1);};
o.updateAggregatesFactory=function(n){return function(){jQuery.proxy(o.updateAggregation,this,n)();};};
return o;},true);
sap.ui.predefine('sap/ushell/performance/FesrEnhancer',["sap/ui/performance/trace/FESR","sap/ushell/EventHub","sap/base/Log","sap/ushell/performance/ShellAnalytics"],function(F,E,U,S){"use strict";var a={HOME_INITIAL:"FLP@LOAD",FINDER_INITIAL:"FLP@LOAD_FINDER",APP_INITIAL:"FLP@DEEP_LINK",NAVIGATION:"NAVIGATION"};var f={_fnOriginalOnBeforeCreated:null,_lastTrackedRecord:null,init:function(){if(F.getActive()){S.enable();this._fnOriginalOnBeforeCreated=F.onBeforeCreated;F.onBeforeCreated=this._onBeforeCreatedHandler.bind(this);}},reset:function(){F.onBeforeCreated=this._fnOriginalOnBeforeCreated;S.disable();this._setLastTrackedRecord(null);},_getPerformanceEntries:function(e){return performance.getEntriesByName(e);},_getLastTrackedApplicationId:function(){var c=S.getCurrentApplication();if(c){return c.id;}return null;},_getLastTrackedRecord:function(){return this._lastTrackedRecord;},_setLastTrackedRecord:function(n){this._lastTrackedRecord=n;},_onBeforeCreatedHandler:function(u,o){var d=this._detectScenario(u,o),A=this._getLastTrackedApplicationId();if(A){u.appNameShort=A;}if(!d.scenario){return u;}return this._enhanceRecord(d.scenario,{stepName:u.stepName,appNameLong:u.appNameLong,appNameShort:u.appNameShort,timeToInteractive:u.timeToInteractive},d.relatedEvent);},_detectScenario:function(u,o){function c(s,e){var r={scenario:s};if(e){r.relatedEvent=e;}return r;}if(u.stepName==="undetermined_startup"){this._setLastTrackedRecord(S.getLastClosedRecord());switch(u.appNameLong){case"sap.ushell.components.homepage":return c(a.HOME_INITIAL);case"sap.ushell.components.appfinder":return c(a.FINDER_INITIAL);default:break;}return c(a.APP_INITIAL);}var l=this._getLastTrackedRecord(),n=S.getNextNavigationRecords(l);if(n.length===1){var N=n[0];if((N&&l&&!N.isEqual(l))||(!l&&N)){this._setLastTrackedRecord(N);return c(a.NAVIGATION,N);}}else if(n.length>1){this._setLastTrackedRecord(n.pop());return c(a.NAVIGATION,n[0]);}return c(null);},_enhanceRecord:function(d,i,r){switch(d){case a.HOME_INITIAL:return this._enhanceInitialStart(i,d,"FLP-TTI-Homepage");case a.FINDER_INITIAL:return this._enhanceInitialStart(i,d,"FLP-TTI-AppFinder");case a.APP_INITIAL:return this._enhanceInitialAppStart(i,d,null);case a.NAVIGATION:return this._enhanceNavigationRecord(i,r);default:break;}U.warning("Unknown scenario at the end of execution, unnecessary code executed",null,"sap.ushell.performance.FesrEnhancer");return i;},_enhanceInitialStart:function(i,s,p){var m,e={stepName:s,appNameLong:i.appNameLong,appNameShort:"",timeToInteractive:i.timeToInteractive};if(p){m=this._getPerformanceEntries(p)[0];if(m){e.timeToInteractive=m.startTime;return e;}U.warning("Scenario '"+s+"' detected but expected performance mark '"+p+"' does not exist",null,"sap.ushell.performance.FesrEnhancer");}return e;},_enhanceNavigationRecord:function(i,r){var e={stepName:r.step||i.stepName,appNameLong:i.appNameLong,appNameShort:r.targetApplication||"",timeToInteractive:i.timeToInteractive};if(e.stepName==="FLP@LOAD"){var m=this._getPerformanceEntries("FLP-TTI-Homepage")[0];if(m){if(m.startTime>r.getTimeStart()){e.timeToInteractive=m.startTime-r.getTimeStart();}}}return e;},_enhanceInitialAppStart:function(i,s,p){var e=this._enhanceInitialStart(i,s,p);e.appNameShort=i.appNameShort;return e;}};return f;},true);
sap.ui.predefine('sap/ushell/performance/ShellAnalytics',["sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/performance/StatisticalRecord"],function(E,A,S){"use strict";var s=[],d=[],o,c,l,i=false;var T={"dashboardTileClick":"HOMEPAGE_TILE","dashboardTileLinkClick":"HOMEPAGE_LINK","catalogTileClick":"FINDER_TILE"};var N={EXPLACE:"EXPLACE",INPLACE:"INPLACE"};var t=["dashboardTileClick","dashboardTileLinkClick","catalogTileClick"];
function _(){return sap.ui.getCore().getEventBus();}
function g(){return s;}
function a(){var C=g().filter(function(R){return R.isClosed();});if(C.length>0){return C[C.length-1];}return null;}
function b(L){if(!L){return g();}return g().filter(function(R){return L.getTimeStart()<R.getTimeStart()&&R.isClosed();});}
function e(){return c;}
function f(z){c=z;}
function h(){l=performance.now();}
function j(){if(!o){o=new S();s.push(o);}return o;}
function k(C,z){j().setTrigger(T[z]);}
function m(z){j().setTargetHash(z);j().setTimeStart(l||performance.now());}
function n(){return new Promise(function(z,B){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(C){var D=C.getCurrentApplication();if(!D){z({});return;}if(D.homePage){z({type:"UI5",id:"FLP_HOME"});return;}if(D.applicationType==="UI5"){D.getTechnicalParameter("sap-fiori-id").then(function(G){var H=G[0];if(!H&&D.componentInstance){var I=D.componentInstance.getManifest();if(I&&I["sap.app"]&&I["sap.app"].id){H=I["sap.app"].id;}}z({type:"UI5",id:H});});}else{var F=A.getMetadata().technicalName||A.getCurrentApplication().text||D.applicationType;z({type:D.applicationType,id:F});}});});}
function p(z,B,C){if(o){o.setSourceApplication(z);o.setTargetApplication(B);o.setNavigationMode(C);o.closeRecord();o=null;}}
function q(){n().then(function(z){var C=e();f(z);p(C?C.id:undefined,z.id,N.INPLACE);});}
function r(){var C=e();p(C?C.id:undefined,null,N.EXPLACE);}
function u(){if(o){var C=e();o.setSourceApplication(C?C.id:undefined);o.closeRecordWithError();o=null;}}
function v(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(z){z.hashChanger.attachEvent("hashChanged",h);z.hashChanger.attachEvent("shellHashChanged",h);});}
function w(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(z){z.hashChanger.detachEvent("hashChanged",h);z.hashChanger.detachEvent("shellHashChanged",h);});}
function x(){if(i){return;}i=true;t.forEach(function(z){_().subscribe("launchpad",z,k);});var D;D=E.once("ShellNavigationInitialized").do(v);d.push(D);D=E.on("trackHashChange").do(m);d.push(D);D=E.on("AppRendered").do(q);d.push(D);D=E.on("openedAppInNewWindow").do(r);d.push(D);D=E.on("firstSegmentCompleteLoaded").do(q);d.push(D);D=E.on("doHashChangeError").do(u);d.push(D);}
function y(){if(!i){return;}t.forEach(function(z){_().unsubscribe("launchpad",z,k);});d.forEach(function(D){D.off();});w();f(null);s=[];o=null;i=false;}
return{enable:x,disable:y,getAllRecords:g,getCurrentApplication:e,getLastClosedRecord:a,getNextNavigationRecords:b};},false);
sap.ui.predefine('sap/ushell/performance/StatisticalRecord',[],function(){"use strict";var S={OPEN:"OPEN",CLOSED:"CLOSED",ERROR:"ERROR"};
function a(){this.status=S.OPEN;this.targetHash=null;this.trigger=null;this.timeStart=null;this.timeEnd=null;this.duration=null;this.step=null;this.sourceApplication=undefined;this.targetApplication=undefined;this.navigationMode=null;}
a.prototype._calculateStep=function(){if(this.sourceApplication&&this.sourceApplication!=="FLP_HOME"&&this.targetApplication!=="FLP_HOME"){return"A2A@"+this.sourceApplication;}if(this.targetApplication==="FLP_HOME"){return"FLP@LOAD";}if(this.sourceApplication==="FLP_HOME"){return"FLP@HOMEPAGE_TILE";}if(this.sourceApplication===undefined&&this.targetApplication&&this.targetApplication!=="FLP_HOME"){return"FLP@DEEP_LINK";}return"";};
a.prototype.isEqual=function(o){return this.timeStart===o.timeStart;};
a.prototype.closeRecord=function(){this.step=this._calculateStep();this.status=S.CLOSED;this.timeEnd=performance.now();if(this.timeStart){this.duration=this.timeEnd-this.timeStart;}};
a.prototype.closeRecordWithError=function(){this.status=S.ERROR;this.timeEnd=performance.now();this.duration=this.timeEnd-this.timeStart;};
a.prototype.isClosed=function(){return this.status===S.CLOSED;};
a.prototype.getStep=function(){return this.step;};
a.prototype.setTrigger=function(t){this.trigger=t;};
a.prototype.setTargetHash=function(t){this.targetHash=t;};
a.prototype.setTimeStart=function(t){this.timeStart=t;};
a.prototype.getTimeStart=function(){return this.timeStart;};
a.prototype.getTimeEnd=function(){return this.timeEnd;};
a.prototype.setSourceApplication=function(s){this.sourceApplication=s;};
a.prototype.setTargetApplication=function(t){this.targetApplication=t;};
a.prototype.setNavigationMode=function(n){this.navigationMode=n;};
return a;},false);
sap.ui.predefine('sap/ushell/plugins/BaseRTAPlugin',["sap/ui/thirdparty/jquery","sap/ui/thirdparty/hasher","sap/ui/Device","sap/base/Log","sap/base/util/UriParameters","sap/ushell/plugins/BaseRTAPluginStatus","sap/ui/core/Component","sap/ui/core/BusyIndicator","sap/m/MessageBox","sap/base/util/ObjectPath"],function(q,h,D,L,U,P,C,B,M,O){"use strict";var S=P.STATUS_STARTING;var a=P.STATUS_STARTED;var b=P.STATUS_STOPPING;var c=P.STATUS_STOPPED;
var d=C.extend("sap.ushell.plugins.BaseRTAPlugin",{
sStatus:c,
sType:null,
oStartingPromise:null,
oStoppingPromise:null,
bValidateAppVersion:true,
_getRenderer:function(o){var e=new q.Deferred(),r;r=o.getRenderer();if(r){this.oRenderer=r;e.resolve(r);}else{this._onRendererCreated=function(E){r=E.getParameter("renderer");if(r){this.oRenderer=r;e.resolve(r);}else{e.reject("Illegal state: shell renderer not available after recieving 'rendererCreated' event.");}};o.attachRendererCreatedEvent(this._onRendererCreated,this);}return e.promise();},
init:function(m){this.mConfig=m;this.i18n=this.getModel("i18n").getResourceBundle();var f=this.getComponentData()&&this.getComponentData().config;if(f){if(typeof f.validateAppVersion==="boolean"){this.bValidateAppVersion=f.validateAppVersion;}}var o=this._getContainer();var A=o.getService("AppLifeCycle");if(this._checkUI5App()){this._checkRestartRTA();}o.registerDirtyStateProvider(this._dirtyStateProvider.bind(this));A.attachAppLoaded(this._onAppLoaded,this);this._getRenderer(o).fail(function(e){L.error(e,undefined,this.mConfig.sComponentName);}.bind(this)).done(function(r){r.addActionButton("sap.ushell.ui.launchpad.ActionItem",{id:this.mConfig.id,text:this.i18n.getText(this.mConfig.text),icon:this.mConfig.icon,press:this._onAdapt.bind(this),visible:this.mConfig.visible&&this._checkUI5App()},true,false,[r.LaunchpadState.App]);}.bind(this));},
exit:function(){var o=this._getContainer();o.getService("AppLifeCycle").detachAppLoaded(this._onAppLoaded,this);if(this._onRendererCreated){o.detachRendererCreatedEvent(this._onRendererCreated,this);}},
_onAppLoaded:function(){if(this._checkUI5App()){this._checkRestartRTA();this._adaptButtonVisibility(this.mConfig.id,true);}else{this._adaptButtonVisibility(this.mConfig.id,false);}},
_getContainer:function(){var o=O.get("sap.ushell.Container");if(!o){throw new Error("Illegal state: shell container not available; this component must be executed in a unified shell runtime context.");}return o;},
_getAppDescriptor:function(o){var e;if(o&&o.getMetadata){e=o.getMetadata();if(e&&e.getManifest){return e.getManifest();}}return{};},
_checkFlexEnabledOnStart:function(){var o=this._getCurrentRunningApplication(),r=o.componentInstance,A=this._getAppDescriptor(r),f=A["sap.ui5"]&&A["sap.ui5"].flexEnabled;return f!==false;},
_handleFlexDisabledOnStart:function(){sap.ui.require(["sap/ui/rta/util/showMessageBox","sap/m/MessageBox"],function(s,M){s(this.i18n.getText("MSG_FLEX_DISABLED"),{icon:M.Icon.INFORMATION,title:this.i18n.getText("HEADER_FLEX_DISABLED"),actions:[M.Action.OK],initialFocus:null,isCustomAction:false});}.bind(this));},
_onAdapt:function(){var s=((D.browser.msie&&D.browser.version>10)||D.browser.webkit||D.browser.firefox||D.browser.edge);var f=this._checkFlexEnabledOnStart();if(!s){M.error(this.i18n.getText("MSG_UNSUPPORTED_BROWSER"),{title:this.i18n.getText("ERROR_TITLE"),onClose:null});}else if(!f){this._handleFlexDisabledOnStart();}else{this._startRta();}},
_adaptButtonVisibility:function(v,V){if(typeof v==="string"){v=sap.ui.getCore().byId(v);}if(!v){return;}v.setVisible(V);},
_checkUI5App:function(){var o=this._getCurrentRunningApplication();var u=o&&o.applicationType==="UI5";return u;},
_checkRestartRTA:function(){var u=new U(window.location.href);var s=u.get("sap-ui-layer");var l=s||this.mConfig.layer;var r=!!window.sessionStorage.getItem("sap.ui.rta.restart."+l);if(r){window.sessionStorage.removeItem("sap.ui.rta.restart."+l);this._startRta();}},
_getCurrentRunningApplication:function(){var A=this._getContainer().getService("AppLifeCycle");var o=A.getCurrentApplication();return o;},
_switchToDefaultMode:function(){if(this._oRTA){this._oRTA.destroy();this.sStatus=c;this.oStartingPromise=null;this.oStoppingPromise=null;this._oRTA=null;}sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);},
_startRta:function(){var o=this._getCurrentRunningApplication();var r=o.componentInstance;var s=this.sStatus;switch(s){case S:this.oStartingPromise=this.oStartingPromise;break;case a:this.oStartingPromise=Promise.resolve();break;case b:this.oStartingPromise=this.oStoppingPromise.then(function(){return this._triggerStartRta(r);}.bind(this));break;case c:this.oStartingPromise=this._triggerStartRta(r);break;default:}if(s!==S){this.oStartingPromise.then(function(){this.oStartingPromise=null;}.bind(this));}return this.oStartingPromise;},
_triggerStartRta:function(r){this.sStatus=S;return new Promise(function(R){sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);B.show(0);sap.ui.getCore().loadLibraries(["sap.ui.rta"],{async:true}).then(function(){sap.ui.require(["sap/ui/rta/RuntimeAuthoring"],function(e){this.sOldHash=h.getHash();this._oRTA=new e({rootControl:r,validateAppVersion:this.bValidateAppVersion,flexSettings:{layer:this.mConfig.layer,developerMode:this.mConfig.developerMode}});this._oRTA.attachEvent("start",this._onStartHandler,this);this._oRTA.attachEvent("failed",this._errorHandler,this);this._oRTA.attachEvent("stop",this._switchToDefaultMode,this);this._loadPlugins(this._oRTA).then(function(){return this._oRTA.start().then(function(){B.hide();R();}).catch(this._errorHandler.bind(this));}.bind(this));}.bind(this));}.bind(this));}.bind(this)).then(function(){this.sStatus=a;}.bind(this));},
_stopRta:function(){var s=this.sStatus;switch(s){case S:this.oStoppingPromise=this.oStartingPromise.then(function(){return this._triggerStopRta.apply(this,arguments);}.bind(this));break;case a:this.oStoppingPromise=this._triggerStopRta.apply(this,arguments);break;case b:this.oStoppingPromise=this.oStoppingPromise;break;case c:this.oStoppingPromise=Promise.resolve();break;default:}if(s!==b){this.oStoppingPromise.then(function(){this.oStoppingPromise=null;}.bind(this));}return this.oStoppingPromise;},
_triggerStopRta:function(){this.sStatus=b;return this._oRTA.stop.apply(this._oRTA,arguments).then(function(){this._switchToDefaultMode();}.bind(this));},
_errorHandler:function(e){B.hide();if(e==="Reload triggered"){this.sStatus=c;}else{this._switchToDefaultMode();var E;var m;if(e instanceof Error){E=e.stack;m=this.i18n.getText("TECHNICAL_ERROR");}else if(typeof e==="string"){E=m=e;}L.error("Cannot start UI Adaptation: ",E);sap.ui.require(["sap/ui/rta/Utils"],function(f){M.error(m,{title:this.i18n.getText("ERROR_TITLE"),onClose:null,styleClass:f.getRtaStyleClassName()});}.bind(this));}},
_dirtyStateProvider:function(){if(this._oRTA&&this.sStatus===a){var u=this._getContainer();var o=u.getService("URLParsing");var H=h.getHash();var p=o.parseShellHash(H);var e=o.parseShellHash(this.sOldHash);this.sOldHash=H;if(p.semanticObject===e.semanticObject&&p.action===e.action&&p.appSpecificRoute!==e.appSpecificRoute){return false;}return this._oRTA.canUndo();}return false;},
_onStartHandler:function(){},
_loadPlugins:function(){return Promise.resolve();},
_onAppClosed:function(){this._stopRta(true,true);}
});
return d;},true);
sap.ui.predefine('sap/ushell/plugins/appwarmup/Component',["sap/ui/core/Component","sap/ui/core/mvc/Controller","sap/ui/core/service/ServiceFactory","sap/ui/core/service/ServiceFactoryRegistry","./ShellUIService","sap/base/Log"],function(C,a,S,b,c,L){"use strict";var g=sap.ui.require.toUrl("sap/ushell/plugins/ghostapp");var p={"name":"sap.ushell.plugins.ghostapp","manifest":true,"asyncHints":{"libs":[{"name":"sap.m"},{"name":"sap.ui.core"},{"name":"sap.f"},{"name":"sap.suite.ui.generic.template"},{"name":"sap.ui.comp"},{"name":"sap.ui.fl"},{"name":"sap.ui.generic.app"},{"name":"sap.ui.generic.template"},{"name":"sap.ui.table"},{"name":"sap.ui.unified"},{"name":"sap.uxap"},{"name":"sap.ui.layout"}],"cacheTokens":{"dataSources":{"/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/":"20180613155243"}},"requests":[{"name":"sap.ui.fl.changes","reference":"sap.ushell.plugins.ghostapp.Component"}],"waitFor":{}},"id":"sap.ushell.plugins.ghostapp","componentData":{"startupParameters":{},"technicalParameters":{}},"async":true};var s="sap.ushell.plugins.appwarmup.Component";return C.extend(s,{metadata:{version:"1.74.0",library:"sap.ushell"},doWarmUp:function(){var P=[];P.push(new Promise(function(r,d){sap.ui.require(["sap/ui/model/odata/ODataMetadata"],function(O){var o=O.prototype._loadMetadata;O.prototype._loadMetadata=function(u,e){if(this.sUrl&&this.sUrl.startsWith("/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/$metadata")){this.sUrl=g+"/metadata.xml";O.prototype._loadMetadata=o;}return o.call(this,u,e);};r();},d);}));Promise.all(P).then(function(){b.register("sap.ushell.plugins.appwarmup.ShellUIService",new S(c));return C.create(p);}).then(function(d){var h=document.createElement("div");h.style.visibility="hidden";document.body.appendChild(h);sap.ui.require(["sap/ui/core/ComponentContainer"],function(e){a.registerExtensionProvider();var f=new e();f.setComponent(d);f.placeAt(h);f.addEventDelegate({onAfterRendering:function(){setTimeout(function(){d.destroy();},5000);}});});}).catch(function(){L.error("GhostApp component could not be created",null,this);});},init:function(){this.doWarmUp();}});});
sap.ui.predefine('sap/ushell/plugins/rta-personalize/Component',["sap/base/util/UriParameters","sap/m/MessageBox","sap/m/MessageToast","sap/ui/core/Component","sap/ui/fl/Utils","sap/ui/fl/EventHistory","sap/ushell/plugins/BaseRTAPlugin"],function(U,M,a,C,F,E,B){"use strict";var b="PERSONALIZE_Plugin_ActionButton";
var R=B.extend("sap.ushell.plugins.rta-personalize.Component",{
sType:"rta-personalize",
metadata:{manifest:"json"},
init:function(){var c={sComponentName:"sap.ushell.plugins.rta-personalize",layer:"USER",developerMode:false,id:b,text:"PERSONALIZE_BUTTON_TEXT",icon:"sap-icon://edit",visible:false};B.prototype.init.call(this,c);this._checkForEnabledControls();},
removePersonalizableControl:function(c){var i=this._aPersonalizableControls.indexOf(c);this._aPersonalizableControls.splice(i,1);this._aOriginalFooterVisibility.splice(i,1);if(this._aPersonalizableControls.length===0){this._oObserver.disconnect();delete this._oObserver;this._adaptButtonVisibility(b,false);}},
_checkForEnabledControls:function(){this._aPersonalizableControls=[];this._aOriginalFooterVisibility=[];function c(d){if(this._aPersonalizableControls.indexOf(d)===-1){this._aPersonalizableControls.push(d);this._adaptButtonVisibility(b,this._checkUI5App());}}function o(s,d,v){if(F.checkControlId(v)){var f=this._getControlInstance(v);c.call(this,f);if(!this._oObserver){this._oObserver=new MutationObserver(function(m){this._aPersonalizableControls.forEach(function(p){if(!p.getDomRef()){this.removePersonalizableControl(p);}}.bind(this));}.bind(this));var O={attributes:true,childList:true,characterData:false,subtree:true,attributeFilter:["style","class"]};this._oObserver.observe(window.document,O);}}}sap.ui.getCore().getEventBus().subscribe("sap.ui","ControlForPersonalizationRendered",o,this);var e=E.getHistoryAndStop("ControlForPersonalizationRendered");e.forEach(function(d){o.call(this,d.channelId,d.eventId,d.parameters);}.bind(this));},
_getControlInstance:function(e){if(typeof e==="string"){var o=sap.ui.getCore().byId(e);return o||C.get(e);}return e;},
_onAppLoaded:function(){var l=this._aPersonalizableControls.length;for(var i=l;i>0;i--){this.removePersonalizableControl(this._aPersonalizableControls[i-1]);}},
_onStartHandler:function(e){var i=e.getParameter("editablePluginsCount");if(i!==undefined&&i<=0){M.information(this.i18n.getText("MSG_STARTUP_NO_OVERLAYS"),{onClose:function(){this._stopRta(true,true);}.bind(this)});}},
_loadPlugins:function(r){var p=new Promise(function(c){sap.ui.require(["sap/ui/rta/plugin/EasyAdd","sap/ui/rta/plugin/EasyRemove"],function(d,e){var P=r.getDefaultPlugins(),o=P.remove;P.remove=new e({commandFactory:o.getCommandFactory()});var A=P.additionalElements;P.additionalElements=new d({commandFactory:A.getCommandFactory(),analyzer:A.getAnalyzer(),dialog:A.getDialog()});P.contextMenu.setOpenOnClick(false);r.setPlugins(P);c();});});return p;},
_onAdapt:function(e){if(!this._checkFlexEnabledOnStart()){this._handleFlexDisabledOnStart();}else if(e.getSource().getText()===this.i18n.getText("PERSONALIZE_BUTTON_TEXT")){var u=U.fromURL(window.location.href),s=u.mParams["sap-ui-layer"]&&u.mParams["sap-ui-layer"][0];if(!s||s==="USER"){e.getSource().setText(this.i18n.getText("END_PERSONALIZE_BUTTON_TEXT"));this._adaptButtonVisibility("RTA_Plugin_ActionButton",false);this._aPersonalizableControls.forEach(function(c){if(c.setShowFooter){this._aOriginalFooterVisibility.push(c.getShowFooter());}else{this._aOriginalFooterVisibility.push(undefined);}}.bind(this));this._adaptFooterVisibility(false);var S=this._getFlpSearchButton();this._bOriginalSearchButtonVisibility=S&&S.getVisible();if(this._bOriginalSearchButtonVisibility){this._adaptButtonVisibility(S,false);}B.prototype._onAdapt.call(this,e);}else{M.information(this.i18n.getText("MSG_STARTUP_WRONG_LAYER"));}}else{this._stopRta(false,true);}},
_switchToDefaultMode:function(){sap.ui.getCore().byId(b).setText(this.i18n.getText("PERSONALIZE_BUTTON_TEXT"));this._adaptButtonVisibility("RTA_Plugin_ActionButton",true);this._adaptFooterVisibility(true);if(this._bOriginalSearchButtonVisibility!==undefined){this._adaptButtonVisibility(this._getFlpSearchButton(),this._bOriginalSearchButtonVisibility);delete this._bOriginalSearchButtonVisibility;}a.show(this.i18n.getText("SAVE_SUCCESSFUL"),{duration:4000,offset:"0 -50"});B.prototype._switchToDefaultMode.call(this);},
_checkRestartRTA:function(){},
_adaptFooterVisibility:function(v){this._aPersonalizableControls.forEach(function(c,i){if(this._aOriginalFooterVisibility[i]){c.setShowFooter(v);}}.bind(this));},
_getFlpSearchButton:function(){return this.oRenderer.getRootControl().getOUnifiedShell().getHeader().getHeadEndItems()[0];},
_getFLPViewPort:function(){return sap.ui.getCore().byId("viewPortContainer");}
});
return R;});
sap.ui.predefine('sap/ushell/plugins/rta/Component',["sap/ushell/plugins/BaseRTAPlugin"],function(B){"use strict";
var R=B.extend("sap.ushell.plugins.rta.Component",{
sType:"rta",
metadata:{manifest:"json"},
init:function(){var c={sComponentName:"sap.ushell.plugins.rta",layer:"CUSTOMER",developerMode:false,id:"RTA_Plugin_ActionButton",text:"RTA_BUTTON_TEXT",icon:"sap-icon://wrench",visible:true};B.prototype.init.call(this,c);}
});
return R;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/AccessKeysHandler',["sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/launchpad/ShortcutsHelpContainer","sap/ui/thirdparty/jquery","sap/m/Label","sap/m/Text","sap/m/Dialog","sap/m/Button"],function(D,C,E,r,S,q,L,T,a,B){"use strict";var A=function(){};A.prototype={bFocusOnShell:true,bFocusPassedToExternalHandlerFirstTime:true,isFocusHandledByAnotherHandler:false,fnExternalKeysHandler:null,sLastExternalKeysHandlerUrl:null,fnExternalShortcuts:null,isleftAltPressed:false,bForwardNavigation:true,aShortcutsDescriptions:[],appOpenedHandler:function(){var c=hasher.getHash();if(c!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null;}this.sLastExternalKeysHandlerUrl=c;},_focusItemInOverflowPopover:function(i,c){var o=sap.ui.getCore().byId("headEndItemsOverflow");if(o&&o.isOpen()){if(o.getContent().length){this._focusIteminPopover(i,o.getContent()[0].getItems());}}else if(c<10){var O=window.document.getElementById("endItemsOverflowBtn");if(O){O.click();var t=this;window.setTimeout(function(){t._focusItemInOverflowPopover(i,++c);},300);}}},_focusItemInUserMenu:function(i,c){var u=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(u&&u.isOpen()){if(u.getContent().length){this._focusIteminPopover(i,u.getContent()[0].getItems());}}else if(c<10){var t=this;E.emit("showMeArea",Date.now());window.setTimeout(function(){t._focusItemInUserMenu(i,++c);},300);}},_focusIteminPopover:function(I,c){for(var i=0;i<c.length;i++){var d=c[i].getId().split("-");if(d[d.length-1]===I){c[i].getDomRef().focus();return;}}},_handleAccessOverviewKey:function(c){var s=this.oModel.getProperty("/searchAvailable"),p=this.oModel.getProperty("/personalization"),e=C.last("/core/shell/model/enableNotifications");if(D.browser.msie){document.addEventListener("help",this._cancelHelpEvent);}var d=[];d=d.concat(this.aShortcutsDescriptions);var f,g;if(D.os.macintosh){f=r.i18n.getText("OptionKey");g=r.i18n.getText("CommandKey");}else{f=r.i18n.getText("AltKey");g=r.i18n.getText("ControlKey");}if(window.document.getElementById("shell-header")){if(p&&c){d.push({text:f+" + A",description:r.i18n.getText("hotkeyFocusOnAppFinderButton")});}if(s){d.push({text:f+" + F",description:r.i18n.getText("hotkeyFocusOnSearchButton")});}d.push({text:f+" + H",description:r.i18n.getText("hotkeyHomePage")});d.push({text:f+" + M",description:r.i18n.getText("hotkeyFocusOnUserActionMenu")});if(e){d.push({text:f+" + N",description:r.i18n.getText("hotkeyFocusOnNotifications")});}if(c){d.push({text:f+" + S",description:r.i18n.getText("hotkeyFocusOnSettingsButton")});d.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("CommaKey"),description:r.i18n.getText("hotkeyOpenSettings")});}if(p){d.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("EnterKey"),description:r.i18n.getText("hotkeySaveEditing")});}if(s){d.push({text:g+" + "+r.i18n.getText("ShiftKey")+" + F",description:r.i18n.getText("hotkeyFocusOnSearchField")});}}var o=new S();d.forEach(function(v){o.addContent(new L({text:v.description}));o.addContent(new T({text:v.text}));});var h=new a({id:"hotKeysGlossary",title:r.i18n.getText("hotKeysGlossary"),contentWidth:"29.6rem",content:o,afterClose:function(){h.destroy();}});h.setBeginButton(new B({text:r.i18n.getText("okBtn"),press:function(){h.close();}}));h.open();},_focusAppFinderButton:function(){var o=window.document.getElementById("openCatalogBtn");if(o){o.focus();return;}var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(c.moveAppFinderActionToShellHeader){this._focusItemInOverflowPopover("openCatalogBtn",0);return;}this._focusItemInUserMenu("openCatalogBtn",0);},_focusSettingsButton:function(){var s=window.document.getElementById("userSettingsBtn");if(s){s.focus();return;}var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(c.moveUserSettingsActionToShellHeader){this._focusItemInOverflowPopover("userSettingsBtn",0);return;}this._focusItemInUserMenu("userSettingsBtn",0);},_blockBrowserDefault:function(e){return new Promise(function(c){if(D.browser.name==="ie"){var s=window.document.getElementById("shell-header");if(s){s.setAttribute("accesskey",e.key);window.setTimeout(function(){s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");c();}},0);}}else{c();}e.preventDefault();});},_handleAltShortcutKeys:function(e,c){var s=sap.ui.getCore().byId("shell-header"),u=sap.ui.getCore().byId("sapUshellMeAreaPopover"),n=sap.ui.getCore().byId("shellNotificationsPopover");if(s){if(c){if(e.keyCode===65){this._blockBrowserDefault(e).then(this._focusAppFinderButton.bind(this));}else if(e.keyCode===83){this._blockBrowserDefault(e).then(this._focusSettingsButton.bind(this));}}if(e.keyCode===70){this._blockBrowserDefault(e).then(function(){var o=window.document.getElementById("sf"),d=window.document.getElementById("searchFieldInShell-button");if(o){o.focus();}else if(d){d.focus();}else{this._focusItemInOverflowPopover("sf",0);}}.bind(this));}else if(e.keyCode===72){this._blockBrowserDefault(e).then(function(){window.hasher.setHash(s.getHomeUri());if(u&&u.isOpen()){E.emit("showMeArea",false);}if(n&&n.isOpen()){E.emit("showNotifications",false);}var o=window.document.getElementById("shellAppTitle");if(o){o.focus();}});}else if(e.keyCode===77){this._blockBrowserDefault(e).then(function(){if(!(u&&u.isOpen())){E.emit("showMeArea",Date.now());}});}else if(e.keyCode===78){this._blockBrowserDefault(e).then(function(){if(!(n&&n.isOpen())){E.emit("showNotifications",Date.now());}});}}},_handleCtrlShortcutKeys:function(e,c){if(e.shiftKey){if(e.keyCode===70){var s=sap.ui.getCore().byId("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation();}}}else if(e.keyCode===188&&c){var o=sap.ui.getCore().byId("userSettingsBtn");if(o&&!q(window.document.activeElement).parents(".sapUiCompSmartTable, .sapUiMdcTable").length){o.firePress();e.preventDefault();e.stopPropagation();}}else if(e.keyCode===112){this._handleAccessOverviewKey(c);}else if(e.keyCode===83){var d=window.document.getElementById("appFinderSearch-I");if(d){d.focus();e.preventDefault();e.stopPropagation();}}else if(e.keyCode===13){var f=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(f&&f.getDomRef()){f.firePress();e.preventDefault();e.stopPropagation();}}},handleShortcuts:function(e,c){if(D.os.macintosh&&e.metaKey&&e.shiftKey&&e.keyCode===70){var s=window.document.getElementById("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation();}e.preventDefault();}else if(e.altKey&&!e.shiftKey&&!e.ctrlKey){this._handleAltShortcutKeys(e,c);}else if(e.ctrlKey&&!e.altKey){this._handleCtrlShortcutKeys(e,c);}},registerAppKeysHandler:function(h){this.fnExternalKeysHandler=h;this.sLastExternalKeysHandlerUrl=hasher.getHash();},resetAppKeysHandler:function(){this.fnExternalKeysHandler=null;},getAppKeysHandler:function(){return this.fnExternalKeysHandler;},registerAppShortcuts:function(h,s){this.fnExternalShortcuts=h;this.aShortcutsDescriptions=s;},_handleFocusBackToMe:function(e,i){this.bFocusOnShell=true;var f;if(i){f=window.document.getElementById(i);}else{this.fromOutside=true;if(e){e.preventDefault();this.bForwardNavigation=!e.shiftKey||e.key==="F6";}f=window.document.getElementById("sapUshellHeaderAccessibilityHelper");}if(f){f.focus();this.fromOutside=false;}this.bFocusPassedToExternalHandlerFirstTime=true;},setIsFocusHandledByAnotherHandler:function(h){this.isFocusHandledByAnotherHandler=h;},sendFocusBackToShell:function(p){var e,i;if(typeof p==="string"){i=p;}else if(typeof p==="object"){e=p;}this._handleFocusBackToMe(e,i);},_handleEventUsingExternalKeysHandler:function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(this.fnExternalKeysHandler&&q.isFunction(this.fnExternalKeysHandler)){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false;}}this.setIsFocusHandledByAnotherHandler(false);},_cancelHelpEvent:function(e){e.preventDefault();document.removeEventListener("help",this._cancelHelpEvent);},init:function(m){this.oModel=m;document.addEventListener("keydown",function(e){if(e.keyCode===16){return;}for(var o=window.document.activeElement;o!==window.document.body;o=o.parentElement){if(o.classList.contains("sapMDialog")){return;}}this.bForwardNavigation=!e.shiftKey;if(e.key==="Tab"||e.key==="F6"){setTimeout(function(){this._handleEventUsingExternalKeysHandler(e);}.bind(this),0);}else{this._handleEventUsingExternalKeysHandler(e);}if(e.keyCode===18){if(e.location===window.KeyboardEvent.DOM_KEY_LOCATION_LEFT){this.isleftAltPressed=true;}else{this.isleftAltPressed=false;}}if(this.isleftAltPressed||!e.altKey){var c=C.last("/core/shell/model/currentState/stateName");if(c!=="headerless"&&c!=="headerless-home"){var d=(c==="home"||c==="app"||c==="minimal");this.handleShortcuts(e,d);}if(this.fnExternalShortcuts){this.fnExternalShortcuts(e);}}}.bind(this),true);this._cancelHelpEvent=this._cancelHelpEvent.bind(this);}};var b=new A();E.on("AppRendered").do(A.prototype.appOpenedHandler.bind(b));return b;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/FlpMeasure',["sap/ui/thirdparty/jquery","sap/base/util/now"],function(q,n){"use strict";var P=function(){var p=false,b={};function M(h,a,s,i){this.hash=h;this.name=a;this.start=s;this.end=0;this.duration=0;this.info=i;}function B(h,a,s,c,d){this.hash=h;this.name=a;this.scenario=c;this.sequence=d;this.start=s;this.end=0;this.percent=null;this.duration=0;this.funcs={};}this.start=function(s,a,c){var t=n(),o;if(!p){return;}if(b[s]===undefined||b[s]===null){b[s]={};}if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]===null){o=new B(this.hash(),a,t,s,c);b[s][o.name]=o;}};this.startFunc=function(s,a,c,f,i){if(!p){return;}var t=n();var d=null;if(b[s]===undefined||b[s]===null){b[s]={};}if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]===null){d=new B(this.hash(),a,t,s,c);b[s][a]=d;}var e=new M(this.hash(),f,t,i);b[s][a].funcs[e.hash]=e;return e.hash;};this.end=function(s,a){if(!p){return;}var t=n();if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]!=null){b[s][a].end=t;b[s][a].duration=Math.round(b[s][a].end-b[s][a].start);}};this.endFunc=function(s,a,f){if(!p){return;}var t=n();if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]!=null){b[s][a].end=t;b[s][a].duration=Math.round(b[s][a].end-b[s][a].start);b[s][a].funcs[f].end=t;b[s][a].funcs[f].duration=Math.round(b[s][a].funcs[f].end-b[s][a].funcs[f].start);}};this.calc=function(){if(!p){return;}return b;};this.hash=function(){if(!p){return;}var v=(new Date()).valueOf().toString()+Math.random().toString();var h=5381;for(var i=0;i<v.length;i++){var c=v.charCodeAt(i);h=((h<<5)+h)+c;}return h;};this.getActive=function(){return p;};this.setActive=function(o,c){if(p===o){return;}p=o;document.addEventListener("keyup",function(e){if(e.shiftKey&&e.ctrlKey&&e.altKey&&e.keyCode==77){window.calc=JSON.stringify(q.sap.flpmeasure.calc());window.open(sap.ui.require.toUrl("sap/ushell/renderers/fiori2/stat")+".html");}},false);return p;};var m=location.href.match(/sap-flp-measure=([^&]*)/);if(m&&m[1]){if(m[1]==="true"||m[1]==="x"||m[1]==="X"){this.setActive(true);}else{this.setActive(true,m[1]);}}};q.sap.flpmeasure=q.sap.flpmeasure||new P();return q.sap.flpmeasure;});
sap.ui.predefine('sap/ushell/renderers/fiori2/History',function(){"use strict";var H=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={};};
H.prototype.hashChange=function(n){var h=this._history.indexOf(n);if(h===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1);}this._history.push(n);this._historyPosition+=1;this.backwards=false;this.forwards=false;}else{this.backwards=this._historyPosition>h;this.forwards=this._historyPosition<h;this._historyPosition=h;}};
H.prototype.pop=function(){var l;if(this._history.length>0){l=this._history.pop();this._historyPosition--;}return l;};
H.prototype.isVirtualHashchange=function(n,o){return this._virtual.hasOwnProperty(o)&&this.getCurrentHash()===n&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===o;};
H.prototype.setVirtualNavigation=function(h){this._virtual[h]=true;};
H.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null;};
H.prototype.getHashIndex=function(h){return this._history.indexOf(h);};
H.prototype.getHistoryLength=function(){return this._history.length;};
return H;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Renderer',["sap/ui/core/UIComponent","sap/ushell/ui/shell/ToolAreaItem","./FlpMeasure","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/services/AppConfiguration","sap/ushell/services/AppType","sap/ushell/resources","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/library","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","./RendererExtensions"],function(U,T,f,C,e,A,D,J,s,a,b,r,c,q,L,O,d,S,N){"use strict";var V=d.mvc.ViewType;
var R=U.extend("sap.ushell.renderers.fiori2.Renderer",{
metadata:{version:"1.74.0",dependencies:{version:"1.74.0",libs:["sap.ui.core","sap.m"],components:[]},routing:{config:{path:"sap.ushell.components",async:true,controlId:"viewPortContainer",clearAggregation:false,controlAggregation:"pages"},routes:[{name:"appfinder-legacy",pattern:"Shell-home&/appFinder/:menu:/:filter:"},{name:"home",pattern:["Shell-home?:hashParameters:","Shell-home&/:innerHash*:","Shell-home"],target:C.last("/core/spaces/enabled")?"pages":"home"},{name:"appfinder",pattern:["Shell-appfinder?:hashParameters:&/:innerHash*:","Shell-appfinder?:hashParameters*:","Shell-appfinder&/:innerHash*:","Shell-appfinder"],target:"appfinder"},{name:"openFLPPage",pattern:["Launchpad-openFLPPage?:hashParameters:","Launchpad-openFLPPage"],target:C.last("/core/spaces/enabled")?"pages":"home"}],targets:{home:{name:"homepage",type:"Component",title:r.i18n.getText("homeBtn_tooltip"),id:"Shell-home-component",options:{manifest:false,asyncHints:{preloadBundles:C.last("/core/home/featuredGroup/enable")?["sap/fiori/flp-controls.js","sap/ushell/components/homepage/cards-preload.js"]:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},appfinder:{name:"appfinder",type:"Component",id:"Shell-appfinder-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},pages:{name:"pages",type:"Component",id:"pages-component",componentData:{},options:{asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]}}}}}},
init:function(){U.prototype.init.apply(this,arguments);var t=this,o=this.getRouter();var p=function(){e.emit("trackHashChange","Shell-home");if(a.getCurrentApplication()){sap.ushell.Container.getService("ShellNavigation").setIsInitialNavigation(false);}var h=r.i18n.getText("homeBtn_tooltip");A.switchViewState("home",false,"Shell-home");t.setCurrentCoreView("home");a.setCurrentApplication(null);A.getShellUIService().setTitle(h);A.getShellUIService().setHierarchy();A.getShellUIService().setRelatedApps();A.getAppMeta().setAppIcons();s.initializeAccessKeys();};o.getRoute("home").attachMatched(p);o.getRoute("openFLPPage").attachMatched(p);o.getRoute("appfinder-legacy").attachMatched(function(E){o.navTo("appfinder",{},true);});o.getRoute("appfinder").attachMatched(function(E){e.emit("trackHashChange","Shell-appFinder");var h=sap.ui.getCore().getComponent(t.createId("Shell-appfinder-component")),i=E.getParameter("arguments");if(sap.ushell.Container.getRenderer("fiori2")){A.getShellUIService().setBackNavigation();sap.ushell.Container.getRenderer("fiori2").setCurrentCoreView("appFinder");}a.setCurrentApplication(null);var j=h.getRouter();h.getRootControl().loaded().then(function(){j.parse(i["innerHash*"]||"");});A.switchViewState("app",false,"Shell-appfinder");A.getAppMeta().setAppIcons();s.initializeAccessKeys();});var g=new J(D);g.setDefaultBindingMode("OneWay");this.setModel(g,"device");this.setModel(r.i18nModel,"i18n");}
});
R.prototype.createContent=function(){var p=new c(window.location.href).get("appState")||new c(window.location.href).get("sap-ushell-config"),w,v=this.getComponentData()||{},o={applications:{"Shell-home":{}},rootIntent:"Shell-home"},g;w=(p==="headerless-opt")?"headerless":p;if(w){if(!v.config){v.config={};}v.config.appState=w;v.config.appStateOrig=p;v.config.inHeaderLessOpt=(p==="headerless-opt");}if(v.config){if(v.config.rootIntent===undefined){v.config.migrationConfig=true;}v.config=q.extend(true,o,v.config);q.extend(v.config.applications["Shell-home"],C.last("/core/home"),C.last("/core/catalog"));if(v.config.appState==="headerless"||v.config.appState==="merged"||v.config.appState==="blank"){v.config.enablePersonalization=false;C.emit("/core/shell/enablePersonalization",false);}else{v.config.enablePersonalization=C.last("/core/shell/enablePersonalization");}if(!v.config.enablePersonalization){v.config.moveEditHomePageActionToShellHeader=false;v.config.moveAppFinderActionToShellHeader=false;}}f.start(0,"Creating Shell",0);if(v.config&&v.config.customViews){Object.keys(v.config.customViews).forEach(function(i){var g=v.config.customViews[i];sap.ui.view(i,{type:g.viewType,viewName:g.viewName,viewData:g.componentData});});}var h=C.createModel("/core/shell/model",J);v.shellModel=h;g=sap.ui.view("mainShell",{type:V.JS,viewName:"sap.ushell.renderers.fiori2.Shell",height:"100%",viewData:v});g.setModel(h);this._oShellView=g;this.oShellModel=A.getElementsModel();g.loaded().then(function(g){sap.ushell.renderers.fiori2.utils.init(g.getController());this.shellCtrl=g.oController;}.bind(this));return g;};
R.prototype.createExtendedShellState=function(g,h){return A.shellElements().createExtendedShellState(g,h);};
R.prototype.applyExtendedShellState=function(g,h){this.oShellModel.applyExtendedShellState(g,h);};
R.prototype.showLeftPaneContent=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("paneContent",typeof i==="string"?[i]:i);}else{this.oShellModel.addLeftPaneContent(typeof i==="string"?[i]:i,false,h);}};
R.prototype.showHeaderItem=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("headItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addHeaderItem(typeof i==="string"?[i]:i,false,h);}};
R.prototype.showRightFloatingContainerItem=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("RightFloatingContainerItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addRightFloatingContainerItem(typeof i==="string"?[i]:i,false,h);}};
R.prototype.showRightFloatingContainer=function(g){A.shellElements().setShellModelForApplications("showRightFloatingContainer",g);};
R.prototype.showToolAreaItem=function(i,g,h){this.oShellModel.addToolAreaItem(i,true,g,h);};
R.prototype.showActionButton=function(i,g,h){var B=[],j=[],o;if(typeof i==="string"){i=[i];}B=i.filter(function(I){o=sap.ui.getCore().byId(I);return o instanceof sap.m.Button&&!(o instanceof sap.ushell.ui.launchpad.ActionItem);});j=i.filter(function(I){o=sap.ui.getCore().byId(I);return o instanceof sap.ushell.ui.launchpad.ActionItem;});if(B.length){this.convertButtonsToActions(B,g,h);}if(j.length){if(g){A.shellElements().addShellModelForApplications("actions",i);}else{this.oShellModel.addActionButton(i,false,h);}}};
R.prototype.showFloatingActionButton=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("floatingActions",typeof i==="string"?[i]:i);}else{this.oShellModel.addFloatingActionButton(typeof i==="string"?[i]:i,false,h);}};
R.prototype.showHeaderEndItem=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("headEndItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addHeaderEndItem(typeof i==="string"?[i]:i,false,h);}};
R.prototype.setHeaderVisibility=function(v,g,h){if(g){A.shellElements().setShellModelForApplications("headerVisible",v);}else{this.oShellModel.setHeaderVisibility(v,false,h);}};
R.prototype.showSubHeader=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("subHeader",typeof i==="string"?[i]:i);}else{this.oShellModel.addSubHeader(typeof i==="string"?[i]:i,false,h);}};
R.prototype.showSignOutItem=function(g,h){if(g){A.shellElements().addShellModelForApplications("actions",["logoutBtn"],false);}else{this.oShellModel.showSignOutButton(g,h);}};
R.prototype.showSettingsItem=function(g,h){this.oShellModel.showSettingsButton(g,h);};
R.prototype.setFooter=function(F){this.shellCtrl.setFooter(F);};
R.prototype.setShellFooter=function(p){var o=new q.Deferred(),t=this,g,h,i=p.controlType,j=p.oControlProperties;if(j&&j.id&&sap.ui.getCore().byId(j.id)){h=sap.ui.getCore().byId(j.id);if(h){if(this.lastFooterId){this.removeFooter();}this.lastFooterId=oInnerControl.getId();this.shellCtrl.setFooter(h);o.resolve(h);}}if(i){g=i.replace(/\./g,"/");sap.ui.require([g],function(k){h=new k(j);if(t.lastFooterId){t.removeFooter();}t.lastFooterId=h.getId();t.shellCtrl.setFooter(h);o.resolve(h);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};
R.prototype.setFooterControl=function(g,o){var h=g.replace(/\./g,"/"),i=sap.ui.require(h),j,k,l=false;if(i){l=true;}else if(!O.get(g||"")){q.sap.require(g);}k=function(o){if(g){if(l){return new i(o);}var m=O.get(g||"");return new m(o);}L.warning("You must specify control type in order to create it");};j=this.createItem(o,undefined,k);if(this.lastFooterId){this.removeFooter();}this.lastFooterId=j.getId();this.shellCtrl.setFooter(j);return j;};
R.prototype.hideHeaderItem=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],g,h);}else{this.oShellModel.removeHeaderItem(i,g,h);}};
R.prototype.removeToolAreaItem=function(i,g,h){if(typeof i==="string"){i=[i];}this.oShellModel.removeToolAreaItem(i,g,h);};
R.prototype.removeRightFloatingContainerItem=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],g,h);}else{this.oShellModel.removeRightFloatingContainerItem(i,g,h);}};
R.prototype.hideActionButton=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeActionButton([i],g,h);}else{this.oShellModel.removeActionButton(i,g,h);}};
R.prototype.hideLeftPaneContent=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],g,h);}else{this.oShellModel.removeLeftPaneContent(i,g,h);}};
R.prototype.hideFloatingActionButton=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],g,h);}else{this.oShellModel.removeFloatingActionButton(i,g,h);}};
R.prototype.hideHeaderEndItem=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],g,h);}else{this.oShellModel.removeHeaderEndItem(i,g,h);}};
R.prototype.hideSubHeader=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],g,h);}else{this.oShellModel.removeSubHeader(i,g,h);}};
R.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){var F=sap.ui.getCore().byId(this.lastFooterId);if(F){F.destroy();}this.lastFooterId=undefined;}};
R.prototype.getCurrentViewportState=function(){return this.shellCtrl.getCurrentViewportState();};
R.prototype.addShellSubHeader=function(p){var o=new q.Deferred(),t=this,g,h,i=p.controlType,j=p.oControlProperties,I=p.bIsVisible,k=p.bCurrentState,l=p.aStates;if(j&&j.id&&sap.ui.getCore().byId(j.id)){h=sap.ui.getCore().byId(j.id);if(h){if(I){this.showSubHeader(h.getId(),k,l);}o.resolve(h);}}if(i){g=i.replace(/\./g,"/");sap.ui.require([g],function(m){h=new m(j);if(I){t.showSubHeader(h.getId(),k,l);t.oShellModel.addElementToManagedQueue(h);}o.resolve(h);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};
R.prototype.addSubHeader=function(g,o,i,h,j){var k=g.replace(/\./g,"/"),l=sap.ui.require(k),m,p,t=false;if(l){t=true;}else if(!O.get(g||"")){q.sap.require(g);}p=function(o){if(g){if(t){return new l(o);}var u=O.get(g||"");return new u(o);}L.warning("You must specify control type in order to create it");};m=this.createItem(o,h,p);if(i){this.showSubHeader(m.getId(),h,j);}return m;};
R.prototype.addUserAction=function(p){var o=new q.Deferred(),t=this,g,h,i=p.controlType,j=p.oControlProperties,I=p.bIsVisible,k=p.bCurrentState,m=k?A.shellElements().getStateModelToUpdate():this.oShellModel.getModelToUpdate(),l=p.aStates,u;if(j){h=sap.ui.getCore().byId(j.id);}if(h){o.resolve(h);}if(i){if(i==="sap.m.Button"){i="sap.ushell.ui.launchpad.ActionItem";}g=i.replace(/\./g,"/");sap.ui.require([g],function(v){var w;if(k){w=A.shellElements().getStateModelToUpdate();A.shellElements().setStateModelToUpdate(m);}else{w=t.oShellModel.getModelToUpdate();t.oShellModel.setModelToUpdate(m,true);}h=h||new v(j);if(!h.getActionType){h=new v(j);}if(I){t.showActionButton(h.getId(),k,l);t.oShellModel.addElementToManagedQueue(h);}if(k){A.shellElements().setStateModelToUpdate(w);}else{t.oShellModel.setModelToUpdate(w,false);}o.resolve(h);});}else{u="You must specify control type in order to create it";L.warning(u);o.reject(u);}return o.promise();};
R.prototype.addActionButton=function(g,o,i,h,j){var k,l,m,p,t=false;if(g==="sap.m.Button"){g="sap.ushell.ui.launchpad.ActionItem";}k=g.replace(/\./g,"/");l=sap.ui.require(k);if(l){t=true;}else if(!O.get(g||"")){q.sap.require(g);}p=function(o){if(g){if(t){return new l(o);}var u=O.get(g||"");return new u(o);}L.warning("You must specify control type in order to create it");};m=this.createItem(o,h,p);if(i){this.showActionButton(m.getId(),h,j);}return m;};
R.prototype.addFloatingButton=function(p){var o=new q.Deferred(),t=this,g,h,i=p.controlType,j=p.oControlProperties,I=p.bIsVisible,k=p.bCurrentState,l=p.aStates;if(j&&j.id&&sap.ui.getCore().byId(j.id)){h=sap.ui.getCore().byId(j.id);if(h){if(I){t.showFloatingActionButton(oItem.getId(),k,l);t.oShellModel.addElementToManagedQueue(h);}o.resolve(h);}}if(i){g=i.replace(/\./g,"/");}else{g="sap/m/Button";}sap.ui.require([g],function(m){h=new m(j);if(I){this.showFloatingActionButton(oItem.getId(),k,l);}o.resolve(h);});return o.promise();};
R.prototype.addFloatingActionButton=function(g,o,i,h,j){var k,l,m,p,t=false;if(!g){g="sap.m.Button";}k=g.replace(/\./g,"/");l=sap.ui.require(k);if(l){t=true;}else if(!O.get(g||"")){q.sap.require(g);}p=function(o){if(g){if(t){return new l(o);}var u=O.get(g||"");return new u(o);}L.warning("You must specify control type in order to create it");};m=this.createItem(o,h,p);if(i){this.showFloatingActionButton(m.getId(),h,j);}return m;};
R.prototype.addSidePaneContent=function(p){var o=new q.Deferred(),t=this,g,h,i=p.controlType,j=p.oControlProperties,I=p.bIsVisible,k=p.bCurrentState,l=p.aStates;if(j&&j.id&&sap.ui.getCore().byId(j.id)){h=sap.ui.getCore().byId(j.id);if(h){o.resolve(h);}}if(i){g=i.replace(/\./g,"/");sap.ui.require([g],function(m){h=new m(j);if(I){t.oShellModel.addElementToManagedQueue(h);t.showLeftPaneContent(oItem.getId(),k,l);}o.resolve(h);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};
R.prototype.addLeftPaneContent=function(g,o,i,h,j){var k=g.replace(/\./g,"/"),l=sap.ui.require(k),m,p,t;if(l){t=true;}else if(!O.get(g||"")){q.sap.require(g);}p=function(o){if(g){if(t){return new l(o);}var u=O.get(g||"");return new u(o);}L.warning("You must specify control type in order to create it");};m=this.createItem(o,h,p);if(i){this.showLeftPaneContent(m.getId(),h,j);}return m;};
R.prototype.addHeaderItem=function(g,o,i,h,j){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){o=arguments[0];i=arguments[1];h=arguments[2];j=arguments[3];}else{L.warning("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var p=o;p.showSeparator=false;var k=function(o){return new S(o);},I=this.createItem(p,h,k);if(i){this.showHeaderItem(I.getId(),h,j);}return I;};
R.prototype.addRightFloatingContainerItem=function(o,i,g,h){var j=function(o){return new N(o);},I=this.createItem(o,g,j);if(i){this.showRightFloatingContainerItem(I.getId(),g,h);}return I;};
R.prototype.addToolAreaItem=function(o,i,g,h){o.visible=!!i;var j=function(p){return new T(p);},I=this.createItem(o,g,j);this.oShellModel.addToolAreaItem(I.getId(),!!i,g,h);return I;};
R.prototype.addHeaderEndItem=function(g,o,i,h,j){var p=o;p.showSeparator=false;var k=function(o){return new S(o);},I=this.createItem(p,h,k);if(i){this.showHeaderEndItem(I.getId(),h,j);}return I;};
R.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration();};
R.prototype.addEndUserFeedbackCustomUI=function(o,g){this.shellCtrl.addEndUserFeedbackCustomUI(o,g);};
R.prototype.addUserPreferencesEntry=function(g){return this.shellCtrl.addUserPreferencesEntry(g);};
R.prototype.setHeaderTitle=function(t){this.shellCtrl.setHeaderTitle(t);};
R.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};
R.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};
R.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};
R.prototype.setFloatingContainerContent=function(o,g,h){this.shellCtrl.setFloatingContainerContent("floatingContainerContent",[o.getId()],g,h);};
R.prototype.setFloatingContainerVisibility=function(v){this.shellCtrl.setFloatingContainerVisibility(v);};
R.prototype.getFloatingContainerState=function(){return this.shellCtrl.getFloatingContainerState();};
R.prototype.getFloatingContainerVisiblity=function(){return this.shellCtrl.getFloatingContainerVisibility();};
R.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility();};
R.prototype.setFloatingContainerDragSelector=function(E){this.shellCtrl.setFloatingContainerDragSelector(E);};
R.prototype.makeEndUserFeedbackAnonymousByDefault=function(E){this.shellCtrl.makeEndUserFeedbackAnonymousByDefault(E);};
R.prototype.showEndUserFeedbackLegalAgreement=function(g){this.shellCtrl.showEndUserFeedbackLegalAgreement(g);};
R.prototype.LaunchpadState={App:"app",Home:"home"};
R.prototype.createTriggers=function(t,g,h){this.oShellModel.createTriggers(t,g,h);};
R.prototype.convertButtonsToActions=function(i,g,h){var p={},B,t=this;i.forEach(function(I){B=sap.ui.getCore().byId(I);p.id=B.getId();p.text=B.getText();p.icon=B.getIcon();p.tooltip=B.getTooltip();p.enabled=B.getEnabled();p.visible=B.getVisible();if(B.mEventRegistry&&B.mEventRegistry.press){p.press=B.mEventRegistry.press[0].fFunction;}B.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,g,h);});};
R.prototype.createItem=function(o,g,h){var i;if(o&&o.id){i=sap.ui.getCore().byId(o.id);}if(!i){i=h(o);if(g){this.oShellModel.addElementToManagedQueue(i);}}return i;};
R.prototype.addEntryInShellStates=function(g,h,i,j,o){this.oShellModel.addEntryInShellStates(g,h,i,j,o);};
R.prototype.removeCustomItems=function(g,i,h,j){if(typeof i==="string"){this.oShellModel.removeCustomItems(g,[i],h,j);}else{this.oShellModel.removeCustomItems(g,i,h,j);}};
R.prototype.addCustomItems=function(g,i,h,j){if(typeof i==="string"){this.oShellModel.addCustomItems(g,[i],h,j);}else{this.oShellModel.addCustomItems(g,i,h,j);}};
R.prototype.addRightViewPort=function(v){this.shellCtrl.getViewPortContainer().addRightViewPort(v,false);};
R.prototype.addLeftViewPort=function(v){this.shellCtrl.getViewPortContainer().addLeftViewPort(v,false);};
R.prototype.getShellController=function(){return this.shellCtrl;};
R.prototype.getViewPortContainerCurrentState=function(){return this.shellCtrl.getViewPortContainer().getCurrentState();};
R.prototype.ViewPortContainerNavTo=function(g,t,h){return this.shellCtrl.getViewPortContainer().navTo(g,t,h);};
function n(){}
R.prototype.switchViewPortStateByControl=n;R.prototype.ViewPortContainerAttachAfterSwitchStateAnimationFinished=n;
R.prototype.setMeAreaSelected=function(g){this.shellCtrl.setMeAreaSelected(g);};
R.prototype.getMeAreaSelected=function(){return this.shellCtrl.getMeAreaSelected();};
R.prototype.setNotificationsSelected=function(g){this.shellCtrl.setNotificationsSelected(g);};
R.prototype.getNotificationsSelected=function(){return this.shellCtrl.getNotificationsSelected();};
R.prototype.addShellDanglingControl=function(o){this.shellCtrl.getView().addDanglingControl(o);};
R.prototype.getShellConfig=function(){return(this.shellCtrl.getView().getViewData()?this.shellCtrl.getView().getViewData().config||{}:{});};
R.prototype.getEndUserFeedbackConfiguration=function(){return this.shellCtrl.oEndUserFeedbackConfiguration;};
R.prototype.reorderUserPrefEntries=function(g){return this.shellCtrl._reorderUserPrefEntries(g);};
R.prototype.addUserProfilingEntry=function(g){this.shellCtrl.addUserProfilingEntry(g);};
R.prototype.logRecentActivity=function(o){if(!o.appType){o.appType=b.APP;}if(!o.appId){o.appId=o.url;}return this.shellCtrl._logRecentActivity(o);};
R.prototype.setCurrentCoreView=function(g){this.currentCoreView=g;};
R.prototype.getCurrentCoreView=function(){return this.currentCoreView;};
return R;});
sap.ui.predefine('sap/ushell/renderers/fiori2/RendererExtensions',['sap/ushell/EventHub'],function(E){"use strict";
function _(C){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"});},0);E.emit("RendererLoaded",{rendererName:"fiori2"});}
function a(x,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",x,D);},0);}
sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=a;sap.ushell.renderers.fiori2.utils.init=_;
function b(I,L,x){sap.ushell.Container.getRenderer("fiori2").showSubHeader(I.getId(),false,[L,x]);}
function c(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideSubHeader(I.getId(),false,[L,x]);}
function d(I,L,x){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(I.getId(),false,[L,x]);}
function e(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(I.getId(),false,[L,x]);}
function f(B,L,x){sap.ushell.Container.getRenderer("fiori2").showActionButton(B.getId(),false,[L,x]);}
function g(B,L,x){sap.ushell.Container.getRenderer("fiori2").hideActionButton(B.getId(),false,[L,x]);}
function h(C,L,x){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(C.getId(),false,[L,x]);}
function i(L,x){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[L,x]);}
function j(I,L,x){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(I.getId(),false,[L,x]);}
function k(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(I.getId(),false,[L,x]);}
function l(I,L,x){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(I.getId(),false,[L,x]);}
function m(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(I.getId(),false,[L,x]);}
function n(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration();}
function o(I,L,T,x){var y=sap.ui.getCore().byId(I);if(x){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(y.getId(),T,[L]);}}
function p(C,S){sap.ushell.Container.getRenderer("fiori2").addEndUserFeedbackCustomUI(C,S);}
function q(x){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(x);}
function r(T){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(T);}
function s(L,V){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(L,V);}
function t(H){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(H);}
function u(F){sap.ushell.Container.getRenderer("fiori2").setFooter(F);}
function v(){sap.ushell.Container.getRenderer("fiori2").removeFooter();}
function R(){this.addHeaderItem=d;this.setHeaderItemVisibility=o;this.addSubHeader=b;this.removeSubHeader=c;this.addHeaderEndItem=l;this.removeHeaderItem=e;this.removeHeaderEndItem=m;this.addEndUserFeedbackCustomUI=p;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=g;this.setFooter=u;this.removeFooter=v;this.addUserPreferencesEntry=q;this.setHeaderTitle=r;this.setHeaderHiding=t;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=j;this.removeFloatingActionButton=k;this.setLeftPaneContent=h;this.removeLeftPaneContent=i;this.setLeftPaneVisibility=s;this.getConfiguration=n;}
var w=new R();return w;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.controller',["sap/ui/Device","sap/ushell/CanvasShapesManager","./AccessKeysHandler","./History","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/services/AppConfiguration","sap/ushell/services/AppType","sap/ushell/utils","sap/ushell/resources","sap/ushell/UserActivityLog","sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component","sap/ui/core/routing/History","sap/ui/core/routing/HashChanger","sap/ushell/components/HeaderManager","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/bootstrap/SchedulingAgent","sap/ui/core/library","sap/ushell/performance/FesrEnhancer","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/ui/util/Storage","sap/m/InstanceManager","sap/ushell/services/Message"],function(D,C,A,H,a,b,c,u,r,U,E,d,f,g,h,j,k,S,l,F,L,q,M,m,n,o,I,p){"use strict";var s=l.routing.HistoryDirection;var t=true,P=false,B=false,v,w=a.getElementsModel(),x,y={embedded:0,newWindowThenEmbedded:1,newWindow:1,replace:0},N={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"},z={};F.init();sap.ui.controller("sap.ushell.renderers.fiori2.Shell",{_aDoableObjects:[],onComponentTargetDisplay:function(e){var i=e.getParameters(),G=i.control,J=i.object;G.navTo("centerViewPort",J.getId(),"show");},onInit:function(){var e=this;var R=f.getOwnerComponentFor(this.getView()).getRouter();R.getTarget("home").attachDisplay(this.onComponentTargetDisplay);R.getTarget("appfinder").attachDisplay(this.onComponentTargetDisplay);R.getTarget("pages").attachDisplay(this.onComponentTargetDisplay);R.oHashChanger=h.getInstance();R.initialize(true);this.bEnableHashChange=true;B=false;t=true;var V=this.getView();var i=window.matchMedia("(min-width: 600px)"),G;var z=(V.getViewData()?V.getViewData().config:{})||{};a.parseStatefulContainerConfiguration(z.statefulApplicationContainer);var J=a.shellElements().model();j.init(z,J);this.oEndUserFeedbackConfiguration={showAnonymous:true,anonymousByDefault:true,showLegalAgreement:true,showCustomUIContent:true,feedbackDialogTitle:true,textAreaPlaceholder:true,customUIContent:undefined};z.enableBackGroundShapes=z.enableBackGroundShapes||true;this.initShellModel(z,J);var K=this.getView().updateShellAggregation;sap.ui.getCore().byId("shell-header").updateAggregation=K;sap.ui.getCore().byId("shell").updateAggregation=K;sap.ui.getCore().byId("right-floating-container").updateAggregation=K;sap.ui.getCore().byId("shell-split").updateAggregation=K;G=function(W){d.emit("/core/shell/model/isPhoneWidth",!W.matches);};if(i.addListener){i.addListener(G);G(i);}V.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appOpened",this.onAppOpened,this);sap.ui.getCore().getEventBus().subscribe("allSearchFinished",this._logSearchActivity,this);this._setConfigurationToModel();this._aDoableObjects=this._registerAndCreateEventHubDoables();sap.ushell.Container.getService("AppLifeCycle");v.addHeaderEndItem(["NotificationsCountButton"],false,["home","app","minimal"],true);v.addHeaderEndItem(["meAreaHeaderButton"],false,["home","app","minimal","standalone","embedded","embedded-home","lean"],true);sap.ushell.Container.getServiceAsync("Menu").then(function(W){return W.isMenuEnabled().then(function(X){if(X){var Y=sap.ui.getCore().byId("menuBarComponentContainer");f.create({name:"sap.ushell.components.shell.MenuBar"}).then(function(Z){Y.setComponent(Z);});}});});var O=[];if(z){if(!z.moveContactSupportActionToShellHeader){O.push("ContactSupportBtn");}if(!z.moveGiveFeedbackActionToShellHeader){O.push("EndUserFeedbackBtn");}}this.history=new H();this.oViewPortContainer=sap.ui.getCore().byId("viewPortContainer");a.init(z.appState,this.oViewPortContainer,z.rootIntent,z.disableHomeAppCache,{ownerComponent:this.getOwnerComponent()},O,z.cacheConfiguration);this.oNotificationsCountButton=sap.ui.getCore().byId("NotificationsCountButton");var Q=function(W){this.oShellNavigation=W;this.oShellNavigation.registerExtraRouter(R);this.oShellNavigation.registerNavigationFilter(this._handleEmptyHash.bind(this));this.oShellNavigation.init(this.doHashChange.bind(this));this.oShellNavigation.registerNavigationFilter(this._disableSourceAppRouter.bind(this));this.oShellNavigation.registerNavigationFilter(this.handleDataLoss.bind(this));this.oShellNavigation.hashChanger.attachEvent("hashChanged",function(X){if(X.mParameters&&e.oShellNavigation.hashChanger.isInnerAppNavigation(X.mParameters.newHash,X.mParameters.oldHash)){a.postMessageToIframeApp("sap.ushell.appRuntime","innerAppRouteChange",{oHash:X.mParameters});}a.postMessageToIframeApp("sap.ushell.appRuntime","hashChange",{sHash:X.mParameters.fullHash});});E.emit("ShellNavigationInitialized");}.bind(this);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("URLShortening")]).then(function(){return sap.ushell.Container.getServiceAsync("ShellNavigation");}).then(Q);sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());A.init(x);window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()){if(!r.browserI18n){r.browserI18n=r.getTranslationModel(window.navigator.language).getResourceBundle();}return r.browserI18n.getText("dataLossExternalMessage");}};if(d.last("/core/shell/model/contentDensity")){a.getAppMeta()._applyContentDensityClass();}D.media.attachHandler(this.handleNavMenuTitleVisibility,this,D.media.RANGESETS.SAP_STANDARD);this.handleNavMenuTitleVisibility(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD));this.initShellUIService();sap.ui.getCore().attachThemeChanged(this.redrawBackGroundShapes);if(!z.disableSignOut&&(z.sessionTimeoutTileStopRefreshIntervalInMinutes>0||z.sessionTimeoutReminderInMinutes>0)){var T=20000;setTimeout(function(){e._createSessionHandler(z);},T);}this.oViewPortContainer.onfocusin=function(){A.bFocusOnShell=false;A.bFocusPassedToExternalHandlerFirstTime=false;};this.oViewPortContainer.onfocusout=function(){A.bFocusOnShell=true;A.bFocusPassedToExternalHandlerFirstTime=true;};},shellUpdateAggItem:function(i,e){return sap.ui.getCore().byId(e.getObject());},getViewPortContainer:function(){return sap.ui.getCore().byId("viewPortContainer");},_registerAndCreateEventHubDoables:function(){var e=[E.once("CenterViewPointContentRendered").do(this._loadCoreExt.bind(this)),E.once("PagesRuntimeRendered").do(this._loadCoreExt.bind(this)),E.on("AppRendered").do(this.setBackGroundShapes.bind(this)),E.once("AppRendered").do(this._loadCoreExtNonUI5.bind(this)),E.on("toggleContentDensity").do(this.toggleContentDensity.bind(this)),E.on("ShellFloatingContainerDockedIsResized").do(this._onResizeWithDocking.bind(this)),E.on("LaunchpadCustomRouterRouteMatched").do(this._centerViewPort.bind(this)),E.once("CoreResourcesComplementLoaded").do(this._onCoreResourcesComplementLoaded.bind(this)),E.once("loadRendererExtensions").do(this._loadRendererExtensionPlugins.bind(this)),E.once("loadUsageAnalytics").do(this._loadUsageAnalytics.bind(this)),E.once("loadWarmupPlugins").do(this._loadWarmupPlugins.bind(this)),E.on("centerViewPort").do(this._centerViewPort.bind(this))];return e;},initShellModel:function(z,e){v=w;v.init(z,e);x=this.getView().getViewData().shellModel;d.emit("/core/shell/model/personalization",d.last("/core/shell/enablePersonalization"));},redrawBackGroundShapes:function(){if(z.enableBackGroundShapes){C.drawShapes();}},setBackGroundShapes:function(){if(!B&&z.enableBackGroundShapes){B=true;C.drawShapes();C.enableAnimationDrawing(false);}},initShellUIService:function(){a.initShellUIService({fnOnBackNavigationChange:this.onBackNavigationChange.bind(this)});if(z.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],function(e){this.oUserStatus=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"});}.bind(this));}},onBackNavigationChange:function(e){a.setBackNavigationChanged(true);var i=e.getParameters().data,G=d.last("/core/shell/model/currentState");if(i){a.service().setNavigateBack(i);if(G.stateName==="minimal"||G.stateName==="standalone"||G.stateName==="embedded"){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true);}}else{a.service().resetNavigateBack();}},toggleContentDensity:function(e){var i=e.contentDensity==="compact";a.getAppMeta()._applyContentDensityByPriority(i,true);},_handleEmptyHash:function(e){e=(typeof e==="string")?e:"";e=e.split("?")[0];if(e.length===0){var V=this.getView()?this.getView().getViewData():{};z=V.config||{};if(z.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue;}if(z.rootIntent){setTimeout(function(){window.hasher.setHash(z.rootIntent);},0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_setConfigurationToModel:function(){var V=this.getView().getViewData();if(V){z=V.config||{};}if(z){if(z.states){w.extendStates(z.states);j.extendStates(z.states);}if(z.changeEndUserFeedbackTitle!==undefined){this.oEndUserFeedbackConfiguration.feedbackDialogTitle=z.changeEndUserFeedbackTitle;}if(z.changeEndUserFeedbackPlaceholder!==undefined){this.oEndUserFeedbackConfiguration.textAreaPlaceholder=z.changeEndUserFeedbackPlaceholder;}if(z.showEndUserFeedbackAnonymousCheckbox!==undefined){this.oEndUserFeedbackConfiguration.showAnonymous=z.showEndUserFeedbackAnonymousCheckbox;}if(z.makeEndUserFeedbackAnonymousByDefault!==undefined){this.oEndUserFeedbackConfiguration.anonymousByDefault=z.makeEndUserFeedbackAnonymousByDefault;}if(z.showEndUserFeedbackLegalAgreement!==undefined){this.oEndUserFeedbackConfiguration.showLegalAgreement=z.showEndUserFeedbackLegalAgreement;}if(z.enableSetTheme!==undefined){x.setProperty("/setTheme",z.enableSetTheme);}x.setProperty("/contentDensity",z.enableContentDensity===undefined?true:z.enableContentDensity);if(z.migrationConfig!==undefined){x.setProperty("/migrationConfig",z.migrationConfig);}if(z.enableUserDefaultParameters!==undefined){x.setProperty("/userDefaultParameters",z.enableUserDefaultParameters);}if(z.disableHomeAppCache!==undefined){x.setProperty("/disableHomeAppCache",z.disableHomeAppCache);}x.setProperty("/enableHelp",d.last("/core/extension/enableHelp"));x.setProperty("/searchAvailable",(z.enableSearch!==false));this._getPersData({container:"flp.settings.FlpSettings",item:"userActivitesTracking"}).then(function(e){if(e===undefined){e=true;}x.setProperty("/enableTrackingActivity",e);}).catch(function(e){L.error("Failed to ltracking activities state state from the personalization",e,"sap.ushell.components.flp.settings.FlpSettings");});}},_getPreviousPageDirty:function(){return P;},_setPreviousPageDirty:function(e){P=e;},getModelConfiguration:function(){var V=this.getView().getViewData(),e,i;if(V){e=V.config||{};i=q.extend({},e);}delete i.applications;return i;},_getLogonFrameProvider:function(){var V=this.getView();return{create:function(){return V.createIFrameDialog();},show:function(){V.showIFrameDialog();},destroy:function(){V.destroyIFrameDialog();}};},onExit:function(){this._aDoableObjects.forEach(function(i){i.off();});sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().unsubscribe("allSearchFinished",this._logSearchActivity,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","appOpened",this.onAppOpened,this);D.media.detachHandler(this.handleNavMenuTitleVisibility,this,D.media.RANGESETS.SAP_STANDARD);if(this.oShellNavigation){this.oShellNavigation.hashChanger.destroy();}if(this.getView()&&this.getView().destroyDanglingControls){this.getView().destroyDanglingControls();}var e=sap.ui.getCore().byId("shell-header");if(e&&e.destroy){e.destroy();}j.destroy();k.destroy();U.deactivate();v.destroy();a.shellElements().clean();a.destroy();v=undefined;},_getCurrentAppRouter:function(){var e=sap.ushell.Container.getService("AppLifeCycle"),i=e&&e.getCurrentApplication&&e.getCurrentApplication(),G=i&&i.componentInstance;if(G){return G.getRouter();}return null;},_disableSourceAppRouter:function(e,i){if(!this.bEnableHashChange){return this.oShellNavigation.NavigationFilterStatus.Continue;}var G=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,i);if(!G){var J=this._getCurrentAppRouter();if(J){J.stop();}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_resumeAppRouterIgnoringCurrentHash:function(){var e=this._getCurrentAppRouter();if(e){e.initialize(true);}},handleDataLoss:function(e,i){if(!this.bEnableHashChange){this.bEnableHashChange=true;return this.oShellNavigation.NavigationFilterStatus.Custom;}if(sap.ushell.Container.getDirtyFlag()){if(!r.browserI18n){r.browserI18n=r.getTranslationModel(window.navigator.language).getResourceBundle();}if(confirm(r.browserI18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);a.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:false});P=true;return this.oShellNavigation.NavigationFilterStatus.Continue;}var G=g.getInstance().getHistoryStateOffset();var W=this.oShellNavigation.wasHistoryEntryReplaced();var R=this._getRestoreHashStrategy(G,W);this._resumeAppRouterIgnoringCurrentHash();return this._restorePreviousHash(i,R);}return this.oShellNavigation.NavigationFilterStatus.Continue;},_getRestoreHashStrategy:function(i,e){if(e){return{strategy:"replaceHash",stepCount:0};}return{strategy:i<0?"historyForward":"historyBack",stepCount:i===undefined?1:Math.abs(i)};},_restorePreviousHash:function(e,R){var i=null;switch(R.strategy){case"historyBack":this.bEnableHashChange=false;this._windowHistoryBack(R.stepCount);i=this.oShellNavigation.NavigationFilterStatus.Custom;break;case"replaceHash":i={status:this.oShellNavigation.NavigationFilterStatus.Custom,hash:e};break;case"historyForward":this.bEnableHashChange=false;this._windowHistoryForward(R.stepCount);i=this.oShellNavigation.NavigationFilterStatus.Custom;break;default:throw new Error("Cannot execute unknown navigation strategy");}return i;},_isColdStart:function(){var R=sap.ushell.Container.getRenderer("fiori2");var e=!R||!R.getCurrentCoreView();if(this.history.getHistoryLength()<=1&&e){return true;}this._isColdStart=function(){return false;};return false;},_setEnableHashChange:function(V){this.bEnableHashChange=V;},_logRecentActivity:function(R){if(d.last("/core/shell/model/enableTrackingActivity")){return b.addActivity(R);}return Promise.reject("Tracking is not enabled");},_logApplicationUsage:function(e){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("UserRecents").then(function(i){i.addAppUsage(e);});}},doHashChange:function(e,i,O,G,J){M.start("FLP:ShellController.doHashChange","doHashChange","FLP");u.addTime("ShellControllerHashChange");E.emit("trackHashChange",e);return this._doHashChange(this,e,i,O,G,J).then(function(){M.end("FLP:ShellController.doHashChange");},function(K){M.end("FLP:ShellController.doHashChange");E.emit("doHashChangeError",Date.now());});},_doHashChange:function(e,i,G,O,J,K){this._wasHistoryEntryReplaced=this.oShellNavigation.wasHistoryEntryReplaced();this.oShellNavigation.resetHistoryEntryReplaced();var Q,R,T;if(!this.bEnableHashChange){this.bEnableHashChange=true;return q.when();}if(K){e.hashChangeFailure(e.history.getHistoryLength(),K.message,null,"sap.ushell.renderers.fiori2.Shell.controller",false);return q.when();}if(I&&t){I.closeAllDialogs();I.closeAllPopovers();}t=true;R=e.history.getHistoryLength();T=e.fixShellHash(i);e.history.hashChange(T,O);e.currentAppBeforeNav=b.getCurrentApplication();q.sap.flpmeasure.end(0,"Creating Shell");q.sap.flpmeasure.start(0,"targetResolution",1);return e._resolveHashFragment(T).then(function(V,W){q.sap.flpmeasure.end(0,"targetResolution");q.sap.flpmeasure.start(0,"CreateComponent",3);var X=W?W.semanticObject+"-"+W.action:"",z=e._getConfig(),Y=!!(V&&V.componentHandle),Z=V&&V.ui5ComponentName;V=e._calculateNavigationMode(W,V);if(V&&(V.navigationMode===N.newWindow||u.isNativeWebGuiNavigation(V))){V.sFixedShellHash=T;e.logOpenAppAction(V,G);e._openAppInNewWindowAndRestore(V);return;}if(d.last("/core/shell/model/migrationConfig")){z.migrationConfig=false;e.getModel().setProperty("/migrationConfig",false);if(V&&T==="#"){z.rootIntent="";}else if(T==="#"){setTimeout(function(){window.hasher.setHash(z.rootIntent);},0);return;}}if(z&&z.applications&&z.applications[X]){V.applicationConfiguration=z.applications[X];}Q=a.getInMemoryInstance(X,T);if(Q.isInstanceSupported){e._initiateApplication(V,T,W,R,G);return;}if(Y||!Z){e._initiateApplication(V,T,W,R,G);return;}a.destroy(Q.appId,Q.container);a.removeApplication(X);b.setApplicationInInitMode();sap.ui.getCore().getEventBus().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:Z});M.start("FLP:ShellController.UI5createComponent","UI5 createComponent","FLP");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){a.createComponent(V,W).done(function(){M.end("FLP:ShellController.UI5createComponent");q.sap.flpmeasure.end(0,"CreateComponent");e._initiateApplication(V,T,W,R,G);}).fail(function($){var _=r.i18n.getText("cannot_load_ui5_component_details",[T]),a1="Failed to load UI5 component for navigation intent "+T;b.setCurrentApplication(e.currentAppBeforeNav);e.hashChangeFailure(R,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_ui5_component"),technicalMessage:a1},{info:_,technicalMessage:$.message+"\n"+$.stack},"sap.ushell.renderers.fiori2.Shell.controller",false);});});},function(V){var W=r.i18n.getText("cannot_resolve_navigation_target_details",[T]),X="Failed to resolve navigation target: "+T+". This is most likely caused by an incorrect SAP Fiori launchpad content configuration or by missing role assignment.";e.hashChangeFailure(R,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_app_missing_configuration_or_role_assignment"),technicalMessage:X},{info:W,fixedShellHash:T,technicalMessage:V},"sap.ushell.renderers.fiori2.Shell.controller",false);});},_initiateApplication:function(R,e,i,O){M.start("FLP:ShellController._initiateApplication","_initiateApplication","FLP");var G=b.getMetadata(R),J=d.last("/core/extension/SupportTicket"),K;if(G.title){window.document.title=G.title;}else{L.debug("Shell controller._initiateApplication: the title of the window is not changed because most probably the application was resolved with undefined");}if(J){setTimeout(function(){U.activate();},0);}try{K=this.oShellNavigation.isInitialNavigation();this.navigate(i,e,G,R);}catch(Q){if(Q.stack){L.error("Application initialization (Intent: \n"+e+"\n failed due to an Exception:\n"+Q.stack);}this.oShellNavigation.setIsInitialNavigation(K);this.hashChangeFailure(O,Q.name,Q.message,G?G.title:"",false);}M.end("FLP:ShellController._initiateApplication");},_resolveHashFragment:function(e){M.start("FLP:ShellController._resolveHashFragment","_resolveHashFragment","FLP");var R,i,G=sap.ushell.Container.getService("URLParsing").parseShellHash(e),J=new q.Deferred(),z=this._getConfig();i=G&&G.params||{};if(G&&G.contextRaw&&G.contextRaw==="navResCtx"&&i&&i.additionalInformation&&(i.additionalInformation[0]||i.additionalInformation[0]==="")&&i.applicationType&&i.applicationType[0]&&i.url&&i.url[0]&&i.navigationMode&&(i.navigationMode[0]||i.additionalInformation[0]==="")){i=G.params||{};R={additionalInformation:i.additionalInformation[0],applicationType:i.applicationType[0],url:i.url[0],navigationMode:i.navigationMode[0]};if(i.title){R.text=i.title[0];}J.resolve(R,G);}else{if(window["sap-ushell-async-libs-promise-directstart"]){window["sap-ushell-async-libs-promise-directstart"].then(function(K){J.resolve(K.resolvedHashFragment,G);delete window["sap-ushell-async-libs-promise-directstart"];},function(K){J.reject(K);delete window["sap-ushell-async-libs-promise-directstart"];});return J.promise();}sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment(e).done(function(R){b.setCurrentApplication(R);if(G&&(G.semanticObject+"-"+G.action)===z.rootIntent){R.navigationMode="embedded";}M.end("FLP:ShellController._resolveHashFragment");J.resolve(R,G);}).fail(function(K){J.reject(K);});}return J.promise();},_calculateNavigationMode:function(e,R){if(!R){return undefined;}var i=R.navigationMode;if(i===N.newWindowThenEmbedded){if(this._isColdStart()||(e.contextRaw&&e.contextRaw==="navResCtx")||g.getInstance().getDirection()===s.Backwards){R.navigationMode=N.embedded;}else{R.navigationMode=N.newWindow;if(!u.isNativeWebGuiNavigation(R)){R.url=this._getCurrentLocationHash();}}return R;}if(i===N.newWindow&&this._isColdStart()){R.navigationMode=N.replace;return R;}return R;},_usesNavigationRedirect:function(e){if(!e){return new q.Deferred().reject().promise();}var i=this,G=e.getInstance({});if(G&&typeof G.navigationRedirect==="function"){var J=new q.Deferred();var K=G.navigationRedirect();if(K&&typeof K.then==="function"){K.then(function(O){L.warning("Performing navigation redirect to hash "+O);G.destroy();i.history.pop();sap.ushell.Container.getService("ShellNavigation").toExternal({target:{shellHash:O}},undefined,false);J.resolve(true);},function(){J.reject();});return J.promise();}}return new q.Deferred().reject().promise();},navigate:function(e,i,G,R){M.start("FLP:ShellController.navigate","navigate","FLP");var J=(m(R)?R.navigationMode:null),K=this;if(J===null){if(this._isColdStart()){window.hasher.setHash("");return;}this.bEnableHashChange=false;this.history.pop();this._windowHistoryBack(1);return Promise.resolve();}R=this._calculateNavigationMode(e,R);J=(m(R)?R.navigationMode:null);if(J===N.embedded){if(!this._isColdStart()&&!this._wasHistoryEntryReplaced){this.oShellNavigation.setIsInitialNavigation(false);}var O=this._usesNavigationRedirect(R.componentHandle),Q=new Promise(function(T,V){O.then(null,function(){K._handleEmbeddedNavMode(i,e,G,R).then(function(){T();});if(e&&e.contextRaw==="navResCtx"){L.error(" This path will no longer be supported in 1.40");K.bEnableHashChange=false;if(e&&e.params&&e.params.original_intent&&e.params.original_intent[0]){window.hasher.replaceHash(e.params.original_intent[0]);K.history._history[0]=e.params.original_intent[0];}}});M.end("FLP:ShellController.navigate");});return Q;}if(J===N.replace){this.oShellNavigation.setIsInitialNavigation(false);this.bEnableHashChange=false;this._changeWindowLocation(R.url);return Promise.resolve();}if(J===N.newWindow){this._openAppInNewWindowAndRestore(R);return Promise.resolve();}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderers.fiori2.Shell.controller",false);return Promise.resolve();},_openAppInNewWindowAndRestore:function(R){this.bEnableHashChange=false;if(u.isNativeWebGuiNavigation(R)||R.nativeNWBCNavigation){try{var i=u.appendUserIdToUrl("sap-user",R.url);var G=u.appendSapShellParam(i);var J=u.getPrivateEpcm();var K=y[R.navigationMode];if(u.hasNavigationModeCapability()){J.doNavigate(G,K||y[N.embedded]);}else{J.doNavigate(G);}}catch(e){if(e.stack){L.error("Application initialization failed due to an Exception:\n"+e.stack);}this.hashChangeFailure(this.history.getHistoryLength(),e.name,e.message,R.text,false);}}else{this._openAppNewWindow(R.url);}this.history.pop();var V=R.componentHandle&&R.componentHandle.getInstance&&R.componentHandle.getInstance({});if(V){V.destroy();}this._resumeAppRouterIgnoringCurrentHash();this._windowHistoryBack(1);b.setCurrentApplication(this.currentAppBeforeNav);E.emit("openedAppInNewWindow",Date.now());return;},_handleEmbeddedNavMode:function(e,i,G,R){M.start("FLP:ShellController._handleEmbeddedNavMode","_handleEmbeddedNavMode","FLP");var J,K,O,Q;this.resetShellUIServiceHandlers();a.getAppMeta().setAppIcons(G);J="-"+i.semanticObject+"-"+i.action;O=e==="#"||(z.rootIntent&&z.rootIntent===i.semanticObject+"-"+i.action);Q=i?i.semanticObject+"-"+i.action:"";a.switchViewState(a.shellElements().calculateElementsState(O?"home":"app",R.applicationType,z.appState,R.explicitNavMode),undefined,J);if(O){a.getShellUIService().setBackNavigation();}K=a.handleControl(Q,J,i,R,this.getWrappedApplicationWithMoreStrictnessInIntention.bind(this),e);if(this.currentAppBeforeNav){var T=a.getStatefulContainer(this.currentAppBeforeNav.applicationType);if(T){T.onApplicationOpened(R.applicationType);}}M.end("FLP:ShellController._handleEmbeddedNavMode");return K;},_centerViewPort:function(){this.oViewPortContainer.switchState("Center");},_isShellHomeIntent:function(i){return i==="#"||i===z.rootIntent;},getWrappedApplicationWithMoreStrictnessInIntention:function(i,e,G,R,J,K,O){var Q,T=this;setTimeout(function(){setTimeout(function(){var V;if(d.last("/core/shell/model/currentState/stateName")==="app"){V="shellAppTitle";}A.sendFocusBackToShell(V);setTimeout(function(){T.readNavigationEnd();},500);},100);sap.ui.getCore().getEventBus().publish("launchpad","appOpening",R);L.info("app is being opened");},0);if(z.applications){R.applicationConfiguration=z.applications[i];}Q=a.getAppContainer(J,R,this._isColdStart(),G,O);R.sFixedShellHash=O;a.publishNavigationStateEvents(Q,R,this.onAppAfterRendering.bind(this,R));Q.addStyleClass("sapUshellApplicationPage");if(!K){Q.addStyleClass("sapUShellApplicationContainerLimitedWidth");}if(this._isDock()&&window.matchMedia("(min-width: 106.4rem)").matches){Q.addStyleClass("sapUShellDockingContainer");Q.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}else if(this._isDock()){Q.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}Q.toggleStyleClass("sapUshellDefaultBackground",!e.hideLightBackground);a.getAppMeta()._applyContentDensityByPriority();a.addControl(Q);M.end("FLP:ShellController.getWrappedApplication");return Q;},resetShellUIServiceHandlers:function(){a.getAppMeta().resetShellUIServiceHandlers();a.setBackNavigationChanged(false);},onAppAfterRendering:function(e){var i=a.getShellUIService();setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);L.info("app was opened");},0);var G=a._publicEventDataFromResolutionResult(e);E.emit("AppRendered",G);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",G);if(i){a.initAppMetaParams();}v.updateStateProperty("application/icon",a.getAppMeta().getAppIcon(),true);v.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_saveHomePageComponent:function(){if(this.oHomeApp){return;}var e=this,i="sap.ushell",G=function(J,K,O){e.oHomeApp=O.component;sap.ui.getCore().getEventBus().unsubscribe(i,"appComponentLoaded",G);};sap.ui.getCore().getEventBus().subscribe(i,"appComponentLoaded",G);},hashChangeFailure:function(i,e,G,J,K){if(u.isPlainObject(e)){this.reportError(e.technicalMessage,G.technicalMessage,J);sap.ushell.Container.getService("Message").show(p.Type.ERROR,e.message,{title:e.title,details:G});}else{this.reportError(e,G,J);this.delayedMessageError(r.i18n.getText("fail_to_start_app_try_later"));}t=false;this._resumeAppRouterIgnoringCurrentHash();if(i===0){window.hasher.setHash("");}else if((new n(window.location.href)).get("bFallbackToShellHome")){window.hasher.setHash("");}else{this.bEnableHashChange=K;sap.ushell.Container.setDirtyFlag(P);a.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:P});this._windowHistoryBack(1);}},reportError:function(e,i,G){L.error(e,i,G);},delayedMessageError:function(e){setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getService("Message").error(e);}},0);},fixShellHash:function(e){if(!e){e="#";}else if(e.charAt(0)!=="#"){e="#"+e;}return e;},_openAppNewWindow:function(e){if(e.trim().indexOf("sap-nwbc://")===0&&(D.browser.edge||D.browser.msie)){window.location.href=e;}else{var i=window.open(e);if(!i&&!D.browser.msie){var G=r.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(G);}}},_windowHistoryBack:function(i){window.history.go(-1*i);},_windowHistoryForward:function(i){window.history.go(i);},_changeWindowLocation:function(e){window.location.href=e;},onAppOpened:function(e,i,R){var G=sap.ui.getCore().byId("menuBarComponentContainer");G.setVisible(false);var J=this.oShellNavigation.hashChanger.getAppHash(),K=J?"&/"+J:null;this.logOpenAppAction(R,K);},externalSearchTriggered:function(e,i,G){d.emit("/core/shell/model/searchTerm",G.searchTerm);G.query=G.searchTerm;},onBeforeNavigate:function(e){var i=sap.ui.getCore().byId("menuBarComponentContainer");if(i.getComponent()){var G=this.getOwnerComponent().byId("pages-component-container");if(e.getParameter("to")===G){i.setVisible(true);}else{i.setVisible(false);}i.rerender();}},onAfterNavigate:function(e){var T=e.mParameters?e.mParameters.toId:undefined;u.addTime("ShellController.onAfterNavigate");a.onAfterNavigate(e.getParameter("fromId"),e.getParameter("from"),T,e.getParameter("to"));sap.ui.getCore().getEventBus().publish("sap.ushell","navigated",{});},logOpenAppAction:function(R,e){var i=d.last("/core/shell/enableRecentActivity")&&d.last("/core/shell/enableRecentActivityLogging");if(!i){return;}var G={};var J=b.getMetadata(R);var K=R.sFixedShellHash;var O=K;if(e){O+=e;}G.title=J.title;G.appType=c.APP;G.url=O;sap.ushell.Container.getServiceAsync("URLParsing").then(function(Q){var T=Q.parseShellHash(K);if(T){G.appId="#"+Q.constructShellHash({semanticObject:T.semanticObject,action:T.action});}else{G.appId=K;}if(K.indexOf("#Action-search")===-1){setTimeout(function(){this._logRecentActivity(G);}.bind(this),1500);}if(z.enableTilesOpacity){setTimeout(function(){this._logApplicationUsage(K);}.bind(this),1500);}}.bind(this));},_logSearchActivity:function(){if(d.last("/core/shell/enableRecentActivity")&&d.last("/core/shell/enableRecentActivityLogging")){var T="";try{T=sap.ui.getCore().byId("searchFieldInShell-input").getModel().getLastSearchTerm();}catch(e){L.error("Shell: last search term is not available to log a recent activity");}this._logRecentActivity({appId:"#Action-search",appType:c.SEARCH,title:T,url:"#"+window.hasher.getHash()});}},readNavigationEnd:function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=r.i18n.getText("loadingComplete");setTimeout(function(){e.setAttribute("aria-live","off");e.innerHTML="";},0);}},handleNavMenuTitleVisibility:function(e){this.bNavMenuTitleVisible=false;if(e.name!=="Desktop"){this.bNavMenuTitleVisible=true;}v.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_loadCoreExtNonUI5:function(e){if(e&&e.applicationType!=="SAPUI5"&&e.applicationType!=="URL"){this._loadCoreExt();}},_loadUsageAnalytics:function(e){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(i){i.init(r.i18n.getText("usageAnalytics"),r.i18n.getText("i_agree"),r.i18n.getText("i_disagree"),r.i18n.getText("remind_me_later"));E.emit("StepDone",e.stepName);},function(){E.emit("StepFailed",e.stepName);});},_onCoreResourcesComplementLoaded:function(){u.setPerformanceMark("SchedulingAgent-StartOfFlow");var V=this.getView();if(V){V.createPostCoreExtControls();}S._initialize();E.emit("startScheduler");},_loadRendererExtensionPlugins:function(e){var i=new n(window.location.href),G=i.get("sap-ushell-xx-pluginmode")==="delayed";function J(K){function O(){E.emit("StepDone",e.stepName);}function Q(){K.loadPlugins("RendererExtensions").always(O);}if(!z.inHeaderLessOpt){if(G){setTimeout(Q,5000);}else{Q();}}else{O();}}sap.ushell.Container.getServiceAsync("PluginManager").then(J.bind(this));},_loadWarmupPlugins:function(e){sap.ushell.Container.getService("PluginManager").loadPlugins("AppWarmup").always(function(){L.debug("WARMUP plugins loaded",null,"sap.ushell.renderers.fiori2.Shell");E.emit("StepDone",e.stepName);u.setPerformanceMark("SchedulingAgent-EndOfFlow");u.setPerformanceMeasure("SchedulingAgentTotalTime","SchedulingAgent-StartOfFlow","SchedulingAgent-EndOfFlow");});},_loadCoreExt:function(){M.end("FLP:Container.InitLoading");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){E.emit("loadCoreResourcesComplement");});},getCurrentViewportState:function(){return d.last("/core/shell/model/currentViewPortState");},makeEndUserFeedbackAnonymousByDefault:function(e){this.oEndUserFeedbackConfiguration.anonymousByDefault=e;},showEndUserFeedbackLegalAgreement:function(e){this.oEndUserFeedbackConfiguration.showLegalAgreement=e;},_activateFloatingUIActions:function(W){if(W<417){this.oFloatingUIActions.disable();}else{this.oFloatingUIActions.enable();}},setFloatingContainerDragSelector:function(e){q(e).addClass("sapUshellShellFloatingContainerSelector");sap.ui.require(["sap/ushell/UIActions"],function(i){if(!this.oFloatingUIActions){this.oFloatingUIActions=new i({containerSelector:".sapUiBody",wrapperSelector:".sapUshellShellFloatingContainerWrapper",draggableSelector:".sapUshellShellFloatingContainerWrapper",rootSelector:".sapUiBody",cloneClass:"sapUshellFloatingContainer-clone",dragCallback:this._handleFloatingContainerUIStart.bind(this),endCallback:this._handleFloatingContainerDrop.bind(this),moveTolerance:3,onDragStartUIHandler:this._onDragStartUI.bind(this),onDragEndUIHandler:this._setFloatingContainerHeight.bind(this),dragAndScrollCallback:this._doDock.bind(this),switchModeDelay:1000,isLayoutEngine:false,isTouch:false,elementToCapture:e,defaultMouseMoveHandler:function(){},debug:q.sap.debug()});}else{this.oFloatingUIActions.elementsToCapture=q(e);}this._activateFloatingUIActions(q(window).width());var G;q(window).bind("resize",function(){clearTimeout(G);G=setTimeout(this._activateFloatingUIActions(q(window).width()),300);}.bind(this));}.bind(this));},_doDock:function(e){M.start("FLP:Shell.controller._doDock","dragging co-pilot element","FLP");var i=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(i.name==="Desktop"){var W=q(window).width();if(e){e.docked={};var G=e.docked;if(e.moveX>=W-64){G.dockPos="right";G.setIsDockingAreaOpen=true;this._openDockingArea(e);}else if(e.moveX<64){G.dockPos="left";G.setIsDockingAreaOpen=true;this._openDockingArea(e);}else{if(this._isDockingAreaOpen()){this._closeDockingArea(e);}if(q("#canvas").hasClass("sapUshellContainerDocked")){this._handleCloseCanvas(e);}}}}M.end("FLP:Shell.controller._doDock");},_finishDoDock:function(e){this._openDockingArea(false);var i=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","docked:"+e.dockPos);this._handleOpenCanvas(e);var W=q("#sapUshellFloatingContainerWrapper");W.css("height","100%");q("#shell-floatingContainer").addClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsDocked");},_onResizeWithDocking:function(){this.handleNavMenuTitleVisibility(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD));setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appFinderWithDocking");},300);},_onDragStartUI:function(e){M.start("FLP:Shell.controller._onDragStartUI","start drag","FLP");if(this._isDock()){var i=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","floating");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDocked");q(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDocked");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");q("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedMinimizeCoPilot");q(q(".sapUshellContainerDockedMinimizeCoPilot")).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(false));this._handleCloseCanvas(e);}M.end("FLP:Shell.controller._onDragStartUI");},_handleAnimations:function(i){var e="sapUshellContainerDockedLaunchpad";var W=q("#sapUshellFloatingContainerWrapper");if(i){q("#canvas, #shell-header").addClass(e);W.addClass("sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();}else{q("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedExtendCoPilot");}},_openDockingArea:function(e){var i=e?e.docked:false;var G=i?i.setIsDockingAreaOpen:false;if(G&&q("#DockinaAreaDiv").length==0){var J=sap.ui.getCore().getConfiguration().getRTL();if((i.dockPos==="right"&&e.clone&&!J)||(i.dockPos==="left"&&e.clone&&J)){q("<div id=\"DockinaAreaDiv\"  class=\"sapUshellShellDisplayDockingAreaRight\">").appendTo(e.clone.parentElement);}else if((i.dockPos==="left"&&e.clone&&!J)||(i.dockPos==="right"&&e.clone&&J)){q("<div id=\"DockinaAreaDiv\"  class=\"sapUshellShellDisplayDockingAreaLeft\">").appendTo(e.clone.parentElement);}e.clone.oDockedProp={};e.clone.oDockedProp.dockPos=i.dockPos;}else if(!G){this._closeDockingArea();}},_closeDockingArea:function(){setTimeout(function(){q(".sapUshellShellDisplayDockingAreaRight").remove();q(".sapUshellShellDisplayDockingAreaLeft").remove();},150);},_isDock:function(){return q(".sapUshellContainerDocked").size()!==0;},_isDockingAreaOpen:function(){return q(".sapUshellShellDisplayDockingAreaRight").size()!==0||q(".sapUshellShellDisplayDockingAreaLeft").size()!==0;},_handleOpenCanvas:function(e){var i=q("#canvas");var G=q(".sapUshellShellHead");var J=sap.ui.getCore().getConfiguration().getRTL();if((e.dockPos==="right"&&!J)||(e.dockPos==="left"&&J)){i.addClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked ");G.addClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");}if((e.dockPos==="left"&&!J)||(e.dockPos==="right"&&J)){i.addClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked ");G.addClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");}var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}},_handleCloseCanvas:function(e){var i=q("#canvas");var G=q(".sapUshellShellHead");if(e){e.docked.setIsDockingAreaOpen=false;}if(i.hasClass("sapUshellContainer-Narrow-Right")){i.removeClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked sapUshellMoveCanvasRight");G.removeClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight();}if(i.hasClass("sapUshellContainer-Narrow-Left")){i.removeClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked sapUshellMoveCanvasLeft");G.removeClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight();}this._onResizeWithDocking();var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}},_setFloatingContainerHeight:function(e){var W=q(window).width();var i=q("#sapUshellFloatingContainerWrapper");if(this._isDock()){if(e&&(e.clientX>=W-64||e.clientX<64)){i.addClass(" sapUshellContainerDocked");i.addClass("sapUshellContainerDockedMinimizeCoPilot");q(i).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(true));}}else if(!this._isDock()){q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");}},_handleFloatingContainerDrop:function(e,i,G){M.start("FLP:Shell.controller._handleFloatingContainerDrop","drop floating container","FLP");var J=i.firstChild?sap.ui.getCore().byId(i.firstChild.id):undefined,K=new o(o.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"),W=q(window).width(),O=q(window).height(),Q=G.deltaX/W,R=G.deltaY/O,T=i.style.visibility,V=i.style.display,X=parseFloat(i.style.left.replace("%","")),Y=parseFloat(i.style.top.replace("%",""));i.style.visibility="hidden";i.style.display="block";if(typeof(X)==="number"){Q=X+100*G.deltaX/W;}if(typeof(Y)==="number"){R=Y+100*G.deltaY/O;}if(this._isDockingAreaOpen()){R=0;}i.setAttribute("style","left:"+Q+"%;top:"+R+"%;position:absolute;");i.visibility=T;i.display=V;K.put("floatingContainerStyle",i.getAttribute("style"));if(J){J.handleDrop();if(!!G.clone.oDockedProp&&this._isDockingAreaOpen()){this._finishDoDock(G.clone.oDockedProp);}}M.end("FLP:Shell.controller.handleFloatingContainerDrop");},_handleFloatingContainerUIStart:function(i,G){M.start("FLP:Shell.controller._handleFloatingContainerUIStart","starts dragging floating container","FLP");var J=G;J.style.display="none";if(window.getSelection){var K=window.getSelection();try{K.removeAllRanges();}catch(e){}}M.end("FLP:Shell.controller._handleFloatingContainerUIStart");},getFloatingContainerState:function(){var e=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");var i="floating";if(e!=null){i=e.get("lastState");if(i==null){i="floating";}}return i;},setFloatingContainerVisibility:function(V){var e=this.getFloatingContainerState();if(e){if(e=="floating"){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}else if(e.indexOf("docked")!=-1){var i=sap.ui.getCore().byId("viewPortContainer");if(V==true){var G=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(G.name=="Desktop"){var W=q("#sapUshellFloatingContainerWrapper");W.addClass("sapUshellContainerDocked");q("#canvas, .sapUshellShellHead").addClass("sapUshellContainerDocked");W.css("height","100%");sap.ui.getCore().byId("shell-floatingContainer").addStyleClass("sapUshellShellFloatingContainerFullHeight");if(i){i._handleSizeChange();}if(sap.ui.getCore().getConfiguration().getRTL()){if(e.indexOf("right")!=-1){q("#canvas").addClass("sapUshellContainer-Narrow-Left");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true);}else{q("#canvas").addClass("sapUshellContainer-Narrow-Right");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true);}}else if(e.indexOf("right")!=-1){q("#canvas").addClass("sapUshellContainer-Narrow-Right");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true);}else{q("#canvas").addClass("sapUshellContainer-Narrow-Left");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true);}setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}.bind(this),400);}else{new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState").put("lastState","floating");this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}}else{this._handleAnimations(false);if(i){i._handleSizeChange();}setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}.bind(this),400);q("#canvas, .sapUshellShellHead").removeClass("sapUshellContainerDocked sapUshellContainer-Narrow-Right sapUshellContainer-Narrow-Left");}q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();if(i){i._handleSizeChange();}}}},getFloatingContainerVisibility:function(){return this.getView().getOUnifiedShell().getFloatingContainerVisible();},setFloatingContainerContent:function(e,i,G,J){v.setFloatingContainerContent(e,i,G,J);},getRightFloatingContainerVisibility:function(){var R=this.getView().getOUnifiedShell().getRightFloatingContainer(),e=R&&R.getVisible();return e;},setHeaderTitle:function(T){j.updateStates({propertyName:"title",value:T||"",aStates:["home","app"],bCurrentState:false,bDoNotPropagate:false});},addEndUserFeedbackCustomUI:function(e,i){if(e){this.oEndUserFeedbackConfiguration.customUIContent=e;}if(i===false){this.oEndUserFeedbackConfiguration.showCustomUIContent=i;}},setFooter:function(e){var i=this.getView().getOUnifiedShell();if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid");}if(i.getFooter()!==null){q.sap.log.warning("You can only set one footer. Replacing existing footer: "+i.getFooter().getId()+", with the new footer: "+e.getId()+".");}i.setFooter(e);},removeFooter:function(){this.getView().getOUnifiedShell().setFooter(null);},addUserPreferencesEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateUserPrefModel(e);},addUserProfilingEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateProfilingModel(e);},_validateUserPrefEntryConfiguration:function(e){if((!e)||(typeof e!=="object")){throw new Error("object oConfig was not provided");}if(!e.title){throw new Error("title was not provided");}if(!e.value){throw new Error("value was not provided");}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid");}else if(e.entryHelpID===""){throw new Error("entryHelpID type is invalid");}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid");}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid");}if(e.onSave&&typeof e.onSave!=="function"){throw new Error("onSave type is invalid");}if(e.content&&typeof e.content!=="function"){throw new Error("content type is invalid");}if(e.onCancel&&typeof e.onCancel!=="function"){throw new Error("onCancel type is invalid");}},_createSessionHandler:function(z){var e=this;sap.ui.require(["sap/ushell/SessionHandler"],function(i){e.oSessionHandler=new i(a);e.oSessionHandler.init({sessionTimeoutReminderInMinutes:z.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:z.sessionTimeoutIntervalInMinutes,sessionTimeoutTileStopRefreshIntervalInMinutes:z.sessionTimeoutTileStopRefreshIntervalInMinutes,enableAutomaticSignout:z.enableAutomaticSignout});});},_getSessionHandler:function(){return this.oSessionHandler;},_navBack:function(){this.setMeAreaSelected(false);a.service().navigateBack();},_updateUserPrefModel:function(e){var i=this._getModelEntryFromEntryObject(e),G=d.last("/core/shell/model/userPreferences/entries");G.push(i);G=this._reorderUserPrefEntries(G);x.setProperty("/userPreferences/entries",G);},_updateProfilingModel:function(e){var i=this._getModelEntryFromEntryObject(e),G=d.last("/core/shell/model/userPreferences/profiling")||[];G.push(i);x.setProperty("/userPreferences/profiling",G);},_getModelEntryFromEntryObject:function(e){return{"entryHelpID":e.entryHelpID,"title":e.title,"editable":!!e.content,"valueArgument":e.value,"valueResult":null,"onSave":e.onSave,"onCancel":e.onCancel,"contentFunc":e.content,"contentResult":null,"icon":e.icon};},_reorderUserPrefEntries:function(e){var G,J;for(var i=0;i<e.length;i++){if(e[i].entryHelpID==="flpSettingsEntry"){G=i;}else if(e[i].entryHelpID==="themes"){J=i;}if(G!=undefined&&J!=undefined){var K=e.splice(G,1);e.splice(J+1,0,K[0]);break;}}return e;},getModel:function(){return x;},_getConfig:function(){return z||{};},_getPersData:function(e){var i=f.getOwnerComponentFor(this.getView());return new Promise(function(G,J){sap.ushell.Container.getServiceAsync("Personalization").then(function(K){var O={keyCategory:K.constants.keyCategory.FIXED_KEY,writeFrequency:K.constants.writeFrequency.LOW,clientStorageAllowed:true};var Q=K.getPersonalizer(e,O,i);Q.getPersData().then(G).fail(J);});});},_getCurrentLocationHash:function(){return window.location.hash;},setMeAreaSelected:function(e){E.emit("showMeArea",e);},getMeAreaSelected:function(){return d.last("/core/shell/model/currentViewPortState")==="LeftCenter";},setNotificationsSelected:function(e){E.emit("showNotifications",e);},getNotificationsSelected:function(){return d.last("/core/shell/model/currentViewPortState")==="RightCenter";}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.view',["sap/ui/Device","sap/ui/core/HTML","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/HeaderManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/Button","sap/m/Dialog","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/EventHub","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ui/core/library"],function(D,H,a,b,S,C,A,B,c,r,u,d,E,J,q,e){"use strict";var V=e.mvc.ViewType;
function s(i,o){return sap.ui.getCore().byId(o.getObject());}
sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{createContent:function(o){this.oController=o;this.oShellAppTitleStateEnum={SHELL_NAV_MENU_ONLY:0,ALL_MY_APPS_ONLY:1,SHELL_NAV_MENU:2,ALL_MY_APPS:3};var v=this.getViewData()||{},f=v.config||{};this.oConfig=f;this.aDanglingControls=[];this._allowUpToThreeActionInShellHeader(f);var U=sap.ui.xmlfragment("sap.ushell.ui.ShellLayout",o),g=this.createShellHeader(f,this.getViewData().shellModel);U.setHeader(g);g.setShellLayout(U);E.once("CreateToolArea").do(function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(T){var h=new T({id:"shell-toolArea",toolAreaItems:{path:"/currentState/toolAreaItems",factory:s}});h.updateAggregation=this.updateShellAggregation;h.addEventDelegate({onAfterRendering:function(){U.applySplitContainerSecondaryContentSize();}});U.setToolArea(h);}.bind(this));}.bind(this));this.setOUnifiedShell(U);this.setDisplayBlock(true);this.addDanglingControl(sap.ui.getCore().byId("viewPortContainer"));this.logonIFrameReference=null;u.setPerformanceMark("FLP - Shell.view rendering started!");return U;},_allowUpToThreeActionInShellHeader:function(o){if(Object.keys(o).length>3){var p=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveGiveFeedbackActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"],f=0,P;for(var i=0;i<5;i++){P=p[i];if(f===3){o[P]=false;}else if(o[P]){f++;}}}},createShellHeader:function(o,f){var g=d.createModel("/core/shellHeader",J),h=new S(),i;a.init(o,h,f);i=sap.ui.xmlfragment("sap.ushell.ui.ShellHeader",h);if(D.system.desktop){i.setAccessKeyHandler(sap.ushell.renderers.fiori2.AccessKeysHandler);var j=i.getAppTitle();j.addEventDelegate({onsapskipforward:function(k){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){k.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});}if(o.appState==="embedded"){i.setNoLogo();}i.setModel(g);i.setModel(r.i18nModel,"i18n");this.addEventDelegate({"onBeforeRendering":function(){i.createUIArea(this.getUIArea().getId());}},this);return i;},createPostCoreExtControls:function(){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ushell/ui/shell/ShellFloatingActions"],function(F,f){var o=sap.ui.getCore().byId("shell");if(!o){return;}var g=new F({id:"shell-floatingContainer",content:{path:"/currentState/floatingContainerContent",factory:s}});if(D.system.desktop){g.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));g.addEventDelegate({onsapskipforward:function(j){j.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(j);},onsapskipback:function(j){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){j.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});}g.setModel(o.getModel());this.addDanglingControl(g);var h=new f({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:s}});h.updateAggregation=this.updateShellAggregation;var i=this.getOUnifiedShell();i.setFloatingContainer(g);i.setFloatingActionsContainer(h);this._createAllMyAppsView();}.bind(this));},_createAllMyAppsView:function(){var m=this.getModel(),o=function(f){if(f.isEnabled()){this.oAllMyAppsView=sap.ui.view("allMyAppsView",{type:V.JS,viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps",viewData:{_fnGetShellModel:function(){return m;}},async:true,height:"100%",visible:{path:"/ShellAppTitleState",formatter:function(g){return g!==this.oShellAppTitleStateEnum.SHELL_NAV_MENU;}.bind(this)}}).addStyleClass("sapUshellAllMyAppsView");this.oAllMyAppsView.addCustomData(new A({key:"aria-label",value:r.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.getOUnifiedShell().getHeader().getAppTitle().setAllMyApps(this.oAllMyAppsView);}}.bind(this);sap.ushell.Container.getServiceAsync("AllMyApps").then(o);},getOUnifiedShell:function(){return this.oUnifiedShell;},setOUnifiedShell:function(U){this.oUnifiedShell=U;},updateShellAggregation:function(n){var o=this.mBindingInfos[n],f=this.getMetadata().getJSONKeys()[n],g;q.each(this[f._sGetter](),q.proxy(function(i,v){this[f._sRemoveMutator](v);},this));q.each(o.binding.getContexts(),q.proxy(function(i,v){g=o.factory(this.getId()+"-"+i,v)?o.factory(this.getId()+"-"+i,v).setBindingContext(v,o.model):"";this[f._sMutator](g);},this));},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell";},createIFrameDialog:function(){var o=null,l=this.logonIFrameReference,f;var _=function(){if(l){l.remove();}return q("<iframe id=\"SAMLDialogFrame\" src=\"\" frameborder=\"0\" height=\"100%\" width=\"100%\"></iframe>");};var g=function(){o.addStyleClass("sapUshellSamlDialogHidden");q("#sap-ui-blocklayer-popup").addClass("sapUshellSamlDialogHidden");};this.destroyIFrameDialog();var h=new B({text:r.i18n.getText("samlCloseBtn"),press:function(){sap.ushell.Container.cancelLogon();}});var i=new H("SAMLDialogFrame");this.logonIFrameReference=_();i.setContent(this.logonIFrameReference.prop("outerHTML"));o=new c({id:"SAMLDialog",title:r.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",rightButton:h}).addStyleClass("sapUshellIframeDialog");f=d.last("/core/extension/SupportTicket");if(f){var j=new C();j.setWidth("150px");j.setIcon("");o.setLeftButton(j);}o.addContent(i);o.open();g();this.logonIFrameReference=q("#SAMLDialogFrame");return this.logonIFrameReference[0];},destroyIFrameDialog:function(){var f=sap.ui.getCore().byId("SAMLDialog");if(f){f.destroy();}this.logonIFrameReference=null;},showIFrameDialog:function(){var o=sap.ui.getCore().byId("SAMLDialog");if(o){o.removeStyleClass("sapUshellSamlDialogHidden");q("#sap-ui-blocklayer-popup").removeClass("sapUshellSamlDialogHidden");}},addDanglingControl:function(o){this.aDanglingControls.push(o);},destroyDanglingControls:function(){if(this.aDanglingControls){this.aDanglingControls.forEach(function(o){if(o.destroyContent){o.destroyContent();}o.destroy();});}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/allMyApps/AllMyApps.controller',["sap/ushell/renderers/fiori2/allMyApps/AllMyAppsManager","sap/ushell/Config","sap/ui/Device","sap/ui/performance/Measurement","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ushell/resources"],function(A,C,D,M,K,q,J,r){"use strict";var s=false,a=function(v){this.init(v);};sap.ui.controller("sap.ushell.renderers.fiori2.allMyApps.AllMyApps",{oStateEnum:{FIRST_LEVEL:0,SECOND_LEVEL:1,DETAILS:2,FIRST_LEVEL_SPREAD:3},iNumberOfProviders:0,onInit:function(){this.bFirstLoadOfAllMyApps=true;var o=new J();o.setSizeLimit(10000);o.setProperty("/AppsData",[]);this.getView().setModel(o,"allMyAppsModel");sap.ui.getCore().getEventBus().subscribe("launchpad","allMyAppsFirstCatalogLoaded",this.updateMasterFocusAndDetailsContext,this);sap.ui.getCore().getEventBus().subscribe("launchpad","allMyAppsFirstCatalogLoaded",this.onDetailLoad,this);sap.ui.getCore().getEventBus().subscribe("launchpad","allMyAppsMasterLoaded",this.onMasterLoad,this);sap.ui.getCore().getEventBus().subscribe("launchpad","allMyAppsNoCatalogsLoaded",this.onNoCatalogsLoaded,this);},onExit:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","allMyAppsFirstCatalogLoaded",this.updateMasterFocusAndDetailsContext);sap.ui.getCore().getEventBus().unsubscribe("launchpad","allMyAppsFirstCatalogLoaded",this.onDetailLoad,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","allMyAppsMasterLoaded",this.onMasterLoad,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","allMyAppsNoCatalogsLoaded",this.onNoCatalogsLoaded,this);},onAfterRendering:function(){var t=this,v=this.getView(),o=v.getModel("allMyAppsModel"),S=v.oSplitApp;if(!this.bAfterInitialLoading){S.toMaster("allMyAppsMasterBusyIndicator","show");if(!D.system.phone){S.toDetail("allMyAppsDetailBusyIndicator","show");}}if(this.bFirstLoadOfAllMyApps){o.setProperty("/AppsData",[]);}else{var m=o.getProperty("/AppsData");o.setProperty("/AppsData",m);}setTimeout(function(){t._getAllMyAppsManager().loadAppsData(o,t._getPopoverObject(),t.bFirstLoadOfAllMyApps);s=t._isSingleDataSource();t.switchToInitialState();t.bFirstLoadOfAllMyApps=false;},0);},switchToInitialState:function(){var v=this.getView(),S;if(this._isSingleDataSource()){C.emit("/core/shell/model/allMyAppsMasterLevel",this.oStateEnum.FIRST_LEVEL_SPREAD);v.oDataSourceList.bindItems("allMyAppsModel>/AppsData/0/groups",v.oDataSourceListTemplate);}else{C.emit("/core/shell/model/allMyAppsMasterLevel",this.oStateEnum.FIRST_LEVEL);v.oDataSourceList.bindItems("allMyAppsModel>/AppsData",v.oDataSourceListTemplate);}if(D.system.phone){S=this.getView().oSplitApp;S.toMaster("sapUshellAllMyAppsMasterPage","show");}v.oDataSourceList.rerender();this.updateMasterFocusAndDetailsContext(undefined,undefined,{bFirstCatalogLoadedEvent:true});this._getPopoverHeaderLabel().setText(r.i18n.getText("allMyApps_headerTitle"));this.updateHeaderButtonsState();},handleSwitchToMasterAreaOnPhone:function(){var S=this.getView().oSplitApp,b=this._getDataSourcesSelectedPath(),p=b.split("/");S.toMaster("sapUshellAllMyAppsMasterPage","show");if(this._isSingleDataSource()){C.emit("/core/shell/model/allMyAppsMasterLevel",this.oStateEnum.FIRST_LEVEL_SPREAD);}else if(p.length===3){C.emit("/core/shell/model/allMyAppsMasterLevel",this.oStateEnum.FIRST_LEVEL);}else{C.emit("/core/shell/model/allMyAppsMasterLevel",this.oStateEnum.SECOND_LEVEL);}this.updateHeaderButtonsState();},handleMasterListItemPress:function(o){var c=this._getClickedDataSourceItemPath(o),v=this.getView(),b=v.getModel("allMyAppsModel"),d=b.getProperty(c+"/type"),e=C.last("/core/shell/model/allMyAppsMasterLevel"),i=(d===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG),B;this.lastPressedMasterItem=o.getParameter("listItem");if(i||(e===this.oStateEnum.FIRST_LEVEL_SPREAD)||(e===this.oStateEnum.SECOND_LEVEL)){B=this.handleMasterListItemPress_toDetails(o);}else{B=this.handleMasterListItemPress_toSecondLevel(o);}v.oCustomLabel.setBindingContext(B,"allMyAppsModel");v.oCustomLink.setBindingContext(B,"allMyAppsModel");v.oCustomPanel.setBindingContext(B,"allMyAppsModel");},handleMasterListItemPress_toSecondLevel:function(o){var c=this._getClickedDataSourceItemPath(o),v=this.getView(),b=v.getModel("allMyAppsModel"),d=b.getProperty(c+"/type"),e=b.getProperty(c+"/title"),S=this.getView().oSplitApp,B,f;if(!D.system.phone){S.toDetail("sapUshellAllMyAppsDetailsPage");}v.oDataSourceList.bindItems("allMyAppsModel>"+c+"/groups",v.oDataSourceListTemplate);C.emit("/core/shell/model/allMyAppsMasterLevel",this.oStateEnum.SECOND_LEVEL);B=this._setBindingContext(c+"/groups/0",v.oItemsContainer);v.oDataSourceList.rerender();v.oDataSourceList.setSelectedItem(v.oDataSourceList.getItems()[0]);f=v.oDataSourceList.getSelectedItem();if(f){f.focus();}if(d===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().HOME){this._getPopoverHeaderLabel().setText(r.i18n.getText("allMyApps_homeEntryTitle"));}else if(d===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().EXTERNAL){this._getPopoverHeaderLabel().setText(e);}this._getDetailsHeaderLabel().setText(b.getProperty(c+"/groups/0/title"));this.updateHeaderButtonsState();return B;},handleMasterListItemPress_toDetails:function(c){var b=this._getClickedDataSourceItemPath(c),v=this.getView(),o=v.getModel("allMyAppsModel"),S=v.oSplitApp,B=this._setBindingContext(b,v.oItemsContainer);this._getDetailsHeaderLabel().setText(o.getProperty(b+"/title"));if(D.system.phone){S.toDetail("sapUshellAllMyAppsDetailsPage");C.emit("/core/shell/model/allMyAppsMasterLevel",this.oStateEnum.DETAILS);}this.updateHeaderButtonsState();return B;},onMasterLoad:function(){var v=this.getView(),S=v.oSplitApp,b=this._getPopoverHeaderBackButton();this.bAfterInitialLoading=true;if(S.getCurrentMasterPage()==v.oMasterBusyIndicator){S.toMaster("sapUshellAllMyAppsMasterPage","show");}b.focus();s=this._isSingleDataSource();this.updateMasterFocusAndDetailsContext(undefined,undefined,{bFirstCatalogLoadedEvent:false});},onDetailLoad:function(){var v=this.getView(),S=v.oSplitApp;this.bAfterInitialLoading=true;if(!D.system.phone){S.toDetail("sapUshellAllMyAppsDetailsPage","show");}},onNoCatalogsLoaded:function(){var v=this.getView(),S=v.oSplitApp;if((!D.system.phone)&&(!s)){S.toDetail("sapUshellAllMyAppsEmptyDetailsPage","show");}else if((!D.system.phone)&&s){S.toDetail("sapUshellAllMyAppsDetailsPage");}},updateMasterFocusAndDetailsContext:function(c,e,d){var v=this.getView(),o=v.getModel("allMyAppsModel"),f=this._getInitialFirstLevelSelectionIndex(),b,B,S;if(s===true){b=o.createBindingContext("/AppsData/0/groups/0");B=o.getProperty(b.sPath);}else{b=o.createBindingContext("/AppsData/"+f);B=o.getProperty(b.sPath);}v.oItemsContainer.setBindingContext(b,"allMyAppsModel");v.oCustomLabel.setBindingContext(b,"allMyAppsModel");v.oCustomLink.setBindingContext(b,"allMyAppsModel");v.oCustomPanel.setBindingContext(b,"allMyAppsModel");if(B!==undefined){this._getDetailsHeaderLabel().setText(B.title);}if(d.bFirstCatalogLoadedEvent===true){v.oDataSourceList.rerender();}if(d.bFirstCatalogLoadedEvent===false&&f===0){this.onNoCatalogsLoaded();}v.oDataSourceList.setSelectedItem(v.oDataSourceList.getItems()[f]);S=v.oDataSourceList.getSelectedItem();if(S){S.focus();}if(d.bFirstCatalogLoadedEvent){M.end("FLP:ShellAppTitle.onClick");M.end("FLP:ShellNavMenu.footerClick");}},handleGroupPress:function(e){var d=this.getView().oCustomLink.getBindingContext("allMyAppsModel").getObject();if(d.handlePress){d.handlePress(e,d);}},updateHeaderButtonsState:function(){this._getShellAppTitleToggleListButton().setVisible(this.getToggleListButtonVisible());this._getPopoverHeaderBackButton().setVisible(this.getBackButtonVisible());},getToggleListButtonVisible:function(){var o=this.getCurrentState(),i=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name==="Phone",v=(i||D.system.phone)&&(o===this.getStateEnum().DETAILS);return v;},getBackButtonVisible:function(){var S=C.last("/core/shellHeader/ShellAppTitleState");if(S!==this._getShellAppTitleStateEnum().ALL_MY_APPS_ONLY){return true;}var o=this.getCurrentState();if(o===this.getStateEnum().SECOND_LEVEL||o===this.getStateEnum().DETAILS){return true;}return false;},onAppItemClick:function(c){var o=this.getView().getModel("allMyAppsModel"),b=c.getBindingContext("allMyAppsModel").sPath,u=o.getProperty(b+"/url");if(u){if(u[0]==="#"){hasher.setHash(u);setTimeout(function(){this.getView().getParent().close();}.bind(this),50);}else{window.open(u,"_blank");}}},getCurrentState:function(){return C.last("/core/shell/model/allMyAppsMasterLevel");},getStateEnum:function(){return this.oStateEnum;},_isSingleDataSource:function(){var o=sap.ushell.Container.getService("AllMyApps");if(o.isCatalogAppsEnabled()){return false;}if(!o.isExternalProviderAppsEnabled()&&o.isHomePageAppsEnabled()){return true;}if(o.isExternalProviderAppsEnabled()&&Object.keys(o.getDataProviders()).length===1&&!o.isHomePageAppsEnabled()){return true;}return false;},_getInitialFirstLevelSelectionIndex:function(){var v=this.getView(),o=v.getModel("allMyAppsModel"),d=o.getProperty("/AppsData"),i,t;for(i=0;i<d.length;i++){t=d[i];if(t.type===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG){return i;}}return 0;},_getPopoverHeaderBackButton:function(){if(!this._oPopoverHeaderBackButton){this._oPopoverHeaderBackButton=this._getPopoverHeaderContent(0);}return this._oPopoverHeaderBackButton;},_getShellAppTitleToggleListButton:function(){if(!this._oShellAppTitleToggleListButton){this._oShellAppTitleToggleListButton=this._getPopoverHeaderContent(1);}return this._oShellAppTitleToggleListButton;},_getPopoverHeaderContent:function(c){var o,h,b;o=this._getPopoverObject().getCustomHeader();h=o.getContentLeft();b=h[c];return b;},_getPopoverHeaderLabel:function(){var c,o;c=this._getPopoverObject().getCustomHeader();o=c.getContentMiddle();return o[0];},_getPopoverObject:function(){return this.getView().getParent();},_getDetailsHeaderLabel:function(){return this.getView().oDetailsHeaderLabel;},_setBindingContext:function(b,B){var o=this.getView().getModel("allMyAppsModel"),c=o.createBindingContext(b);B.setBindingContext(c,"allMyAppsModel");return c;},_getClickedDataSourceItemPath:function(o){var c=o.getParameter("listItem");return c.getBindingContext("allMyAppsModel").sPath;},_getAllMyAppsManager:function(){return A;},_getDataSourcesSelectedPath:function(){return this.lastPressedMasterItem.getBindingContextPath();},_getShellAppTitleStateEnum:function(){var S=sap.ui.getCore().byId("shellAppTitle");return S.getStateEnum();},initKeyBoardNavigationHandling:function(){if(this.keyboardNavigation){this.keyboardNavigation.destroy();}this.keyboardNavigation=new a(this.getView());}});
a.prototype.init=function(v){this.keyCodes=K;v.oDataSourceList.addEventDelegate({onsaptabnext:function(e){var d=q(".sapUshellAllMyAppsListItem");this.jqDetailAreaElement=v.oItemsContainer.$();this.jqDetailAreaElement.on("keydown.keyboardNavigation",this.keydownHandler.bind(this));this._setItemFocus(e,d[0]);}.bind(this)});v.oItemsContainer.addEventDelegate({onsaptabprevious:function(){var c=q(".sapUshellAllMyAppsListItem[tabindex=\"0\"]")[0];q(c).attr("tabindex",-1);},onsaptabnext:function(){var c=q(".sapUshellAllMyAppsCustomPanel"),o=q(".sapUshellAllMyAppsListItem[tabindex=\"0\"]")[0];if(c.length===0){q(o).attr("tabindex",-1);}}});v.oCustomPanel.addEventDelegate({onsaptabnext:function(e){var c=q(".sapUshellAllMyAppsListItem[tabindex=\"0\"]")[0];q(c).attr("tabindex",-1);}});};
a.prototype.keydownHandler=function(e){switch(e.keyCode){case this.keyCodes.ARROW_UP:this.arrowKeyHandler(e,-2);break;case this.keyCodes.ARROW_DOWN:this.arrowKeyHandler(e,2);break;case this.keyCodes.ARROW_LEFT:this.arrowKeyHandler(e,-1);break;case this.keyCodes.ARROW_RIGHT:this.arrowKeyHandler(e,1);break;default:break;}};
a.prototype.arrowKeyHandler=function(e,d){var b=q(".sapUshellAllMyAppsListItem").toArray(),c=q(".sapUshellAllMyAppsListItem[tabindex=\"0\"]")[0],i=b.indexOf(c),E=b[i+d];if(E){q(c).attr("tabindex",-1);this._setItemFocus(e,E);}};
a.prototype._setItemFocus=function(e,E){if(E){e.preventDefault();e.stopImmediatePropagation();q(E).attr("tabindex",0);E.focus();}};
a.prototype.destroy=function(){if(this.jqDetailAreaElement){this.jqDetailAreaElement.off(".keyboardNavigation");}delete this.jqDetailAreaElement;};
});
sap.ui.predefine('sap/ushell/renderers/fiori2/allMyApps/AllMyApps.view',["sap/ui/Device","sap/m/BusyIndicator","sap/m/SplitApp","sap/m/Label","sap/m/Link","sap/m/Text","sap/m/Page","sap/m/StandardListItem","sap/m/CustomListItem","sap/m/List","sap/m/VBox","sap/m/Bar","sap/m/ScrollContainer","sap/m/library","sap/ui/core/library","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources"],function(D,B,S,L,a,T,P,b,C,c,V,d,f,m,g,A,r){"use strict";var h=m.BarDesign,i=m.ListMode,j=m.ListType,k=m.SplitAppMode,l=g.TextAlign;sap.ui.jsview("sap.ushell.renderers.fiori2.allMyApps.AllMyApps",{createContent:function(o){this.oMasterBusyIndicator=new B("allMyAppsMasterBusyIndicator",{size:"1rem"}).addStyleClass("sapUshellAllMyAppsBusyIndicator");this.oDetailBusyIndicator=new B("allMyAppsDetailBusyIndicator",{size:"1rem"}).addStyleClass("sapUshellAllMyAppsBusyIndicator");this.oSplitApp=new S("sapUshellAllMyAppsMasterDetail",{masterPages:[this.oMasterBusyIndicator,this.getMasterPartContent(o)],detailPages:[this.oDetailBusyIndicator,this.getEmptyDetailsContent(),this.getDetailsPartContent(o)],mode:{path:"/isPhoneWidth",formatter:function(I){return I?k.ShowHideMode:k.StretchCompressMode;}}}).addStyleClass("sapUshellAllMyAppsView");this.bAfterOpenHandlerCalled=false;return this.oSplitApp;},getEmptyDetailsContent:function(){var t,e;t=new L({text:r.i18n.getText("AllMyAppsEmptyText"),textAlign:l.Center}).addStyleClass("sapUshellAllMyAppsEmptyDetailsPageText");e=new P("sapUshellAllMyAppsEmptyDetailsPage",{content:[t],showHeader:false,enableScrolling:false});return e;},getMasterPartContent:function(o){var e;if(!this.oDataSourceList){this.oDataSourceListTemplate=new b({type:{parts:["allMyAppsModel>type","/allMyAppsMasterLevel"],formatter:function(t,n){var s=D.system.phone||((n===this.getController().oStateEnum.FIRST_LEVEL)&&(t!==sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG));return s?j.Navigation:j.Active;}.bind(this)},title:"{allMyAppsModel>title}"});this._addCustomData(this.oDataSourceListTemplate,"aria-controls","sapUshellAllMyAppsDetailsPage");this.oDataSourceList=new c("sapUshellAllMyAppsDataSourcesList",{tooltip:"{i18n>catalogSelect_tooltip}",rememberSelections:true,mode:D.system.phone?i.None:i.SingleSelectMaster,items:{path:"allMyAppsModel>/AppsData",template:this.oDataSourceListTemplate},growingThreshold:100,showNoData:false,itemPress:[o.handleMasterListItemPress,o],selectionChange:[o.handleMasterListItemPress,o]});this._addCustomData(this.oDataSourceList,"role","navigation");}e=new P("sapUshellAllMyAppsMasterPage",{showHeader:false});e.addContent(this.oDataSourceList);return e;},getDetailsPartContent:function(o){var n=new V(),t=new L({text:"{allMyAppsModel>title}",tooltip:"{allMyAppsModel>title}"}),s=new L({text:"{allMyAppsModel>subTitle}",tooltip:"{allMyAppsModel>subTitle}",visible:{parts:["allMyAppsModel>subTitle"],formatter:function(e){return!!e;}}}),I,p,q;t.addStyleClass("sapUshellAllMyAppsItemTitle");s.addStyleClass("sapUshellAllMyAppsItemSubTitle");n.addItem(t);n.addItem(s);I=new C({content:n,type:j.Active,press:function(){o.onAppItemClick(this);}});I.addStyleClass("sapUshellAllMyAppsListItem");I.addEventDelegate({onsapenter:function(e){o.onAppItemClick(e.srcControl);},onsapspace:function(e){o.onAppItemClick(e.srcControl);}});this.oDetailsHeaderLabel=new L("sapUshellAllMyAppsDetailsHeaderLabel",{});p=new d("sapUshellDetailsPageHeaderBar",{contentLeft:this.oDetailsHeaderLabel,contentRight:[],contentMiddle:[],design:h.Header});this.oItemsContainerlist=new c("oItemsContainerlist",{items:{path:"allMyAppsModel>apps",template:I}});this.oItemsContainer=new f("allMyAppsScrollContainer",{horizontal:false,vertical:true,content:this.oItemsContainerlist}).addStyleClass("sapUshellAllMyAppsDetailsItemContainer");this.oCustomLink=new a({text:{path:"allMyAppsModel>sCustomLink"},press:function(e){o.handleGroupPress(e);}});this.oCustomLabel=new T({text:{path:"allMyAppsModel>sCustomLabel"}});this.oCustomPanel=new V({visible:{parts:[{path:"allMyAppsModel>numberCustomTiles"}],formatter:function(e){return!!e;}},items:[this.oCustomLabel,this.oCustomLink]});this.oCustomPanel.addStyleClass("sapUshellAllMyAppsCustomPanel");q=new P("sapUshellAllMyAppsDetailsPage",{content:[p,this.oItemsContainer,this.oCustomPanel],showHeader:false,enableScrolling:true});this._addCustomData(q,"role","applications");return q;},_afterOpen:function(){if(!this.bAfterOpenHandlerCalled){this.bAfterOpenHandlerCalled=true;if(D.system.desktop){this.getController().initKeyBoardNavigationHandling();}}},_addCustomData:function(I,K,v){I.addCustomData(new A({key:K,value:v,writeToDom:true}));},getControllerName:function(){return"sap.ushell.renderers.fiori2.allMyApps.AllMyApps";}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/allMyApps/AllMyAppsManager',["sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/services/Message"],function(q,r,M){"use strict";var A=function(){};
A.prototype.loadAppsData=function(m,p,l){var a=sap.ushell.Container.getService("AllMyApps");this.oPopover=p;if(!a.isEnabled()){return;}this.iNumberOfProviders=0;this.oModel=m;if(a.isHomePageAppsEnabled()){this._handleGroupsData();}if(a.isExternalProviderAppsEnabled()){this._handleExternalProvidersData(m);}if(a.isCatalogAppsEnabled()){this._handleCatalogs(l);}if(!a.isCatalogAppsEnabled()||(a.isCatalogAppsEnabled()&&l)){var e=sap.ui.getCore().getEventBus();e.publish("launchpad","allMyAppsMasterLoaded");}};
A.prototype._handleGroupsData=function(){var t=this,g=this._getGroupsData(),h={title:r.i18n.getText("allMyApps_homeEntryTitle")},p;g.done(function(G){h.groups=G;h.type=sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().HOME;if(G.length===0){return;}p=t.oModel.getProperty("/AppsData");if(p){var i=t._getIndexByType(p,h.type);if(i!==undefined){p[i]=h;}else{p.unshift(h);}}t.oModel.setProperty("/AppsData",p);t.iNumberOfProviders+=1;});};
A.prototype._getIndexByType=function(p,a){if(p.length<=0){return 0;}for(var i=0;i<p.length;i++){if(p[i].type===a){return i;}}};
A.prototype._getGroupsData=function(){var t=this,l=sap.ushell.Container.getService("LaunchPage"),d=new q.Deferred(),g=l.getGroups(),D=l.getDefaultGroup(),p=[],G=[],i,T,o,s,a,b,c,e,n;t.oDefaultGroup=undefined;p.push(D);p.push(g);q.when(p).then(function(){p[0].done(function(f){t.oDefaultGroup=f;});p[1].done(function(f){for(i=0;i<f.length;i++){n=0;T=f[i];if(l.isGroupVisible(T)===false){continue;}if(l.getGroupId(T)===l.getGroupId(t.oDefaultGroup)){s=r.i18n.getText("my_group");}else{s=l.getGroupTitle(T);}o={};o.title=s;o.apps=[];a=l.getGroupTiles(T);for(b=0;b<a.length;b++){c=a[b];if(l.isTileIntentSupported(c)){e=t._getAppEntityFromTile(c);if(e){o.apps.push(e);}else{n++;}}}o.numberCustomTiles=n;if(n===1){o.sCustomLabel=r.i18n.getText("allMyApps_customStringSingle");o.sCustomLink=r.i18n.getText("allMyApps_customLinkHomePageSingle");}else{o.sCustomLabel=r.i18n.getText("allMyApps_customString",[n]);o.sCustomLink=r.i18n.getText("allMyApps_customLinkHomePage");}o.handlePress=function(h,j){window.hasher.setHash("#Shell-home");this.oPopover.close();var B=sap.ui.getCore().getEventBus();B.subscribe("launchpad","dashboardModelContentLoaded",function(){B.publish("launchpad","scrollToGroupByName",{groupName:j.title,isInEditTitle:false});},this);B.publish("launchpad","scrollToGroupByName",{groupName:j.title,isInEditTitle:false});}.bind(t);if(o.apps.length>0||o.numberCustomTiles>0){G.push(o);}}d.resolve(G);});});return d.promise();};
A.prototype._handleExternalProvidersData=function(){var t=this,e=sap.ushell.Container.getService("AllMyApps").getDataProviders(),E=Object.keys(e),s,o,a,b,i,c;if(E.length>0){for(i=0;i<E.length;i++){s=E[i];o=e[s];a=o.getTitle();b={};b.title=a;c=o.getData();c.done(function(p){if(p&&(p.length>0)){b.groups=p;b.type=sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().EXTERNAL;t.oModel.setProperty("/AppsData/"+t.iNumberOfProviders,b);t.iNumberOfProviders+=1;var d=sap.ui.getCore().getEventBus();d.publish("launchpad","allMyAppsMasterLoaded");}});}}};
A.prototype._handleNotFirstCatalogsLoad=function(){var m=this.oModel.getProperty("/AppsData"),c=sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG;if(m.length&&m[m.length-1].type===c){this.bFirstCatalogLoaded=true;sap.ui.getCore().getEventBus().publish("launchpad","allMyAppsFirstCatalogLoaded",{bFirstCatalogLoadedEvent:true});}};
A.prototype._handleCatalogs=function(l){if(!l){this._handleNotFirstCatalogsLoad();}else{this.bFirstCatalogLoaded=false;this.aPromises=[];sap.ushell.Container.getService("LaunchPage").getCatalogs().done(function(){q.when.apply(q,this.aPromises).then(this._onDoneLoadingCatalogs.bind(this));}.bind(this)).fail(function(){this._onGetCatalogsFail(r.i18n.getText("fail_to_load_catalog_msg"));}.bind(this)).progress(this._addCatalogToModel.bind(this));}};
A.prototype._addCatalogToModel=function(c){var p={apps:[],numberCustomTiles:0,type:sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG},t=this,P,i,a,o,l=sap.ushell.Container.getService("LaunchPage"),C=l.getCatalogTiles(c);this.aPromises.push(C);C.done(function(b){if(b.length===0){return;}var s=l.getCatalogTitle(c);P=t.oModel.getProperty("/AppsData");for(i=0;i<P.length;i++){if((P[i].type===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG)&&(P[i].title===s)){p=P[i];break;}}p.title=l.getCatalogTitle(c);for(a=0;a<b.length;a++){if(l.isTileIntentSupported(b[a])){o=t._getAppEntityFromTile(b[a]);if(o){p.apps.push(o);}else{p.numberCustomTiles++;}}}if(p.numberCustomTiles===1){p.sCustomLabel=r.i18n.getText("allMyApps_customStringSingle");p.sCustomLink=r.i18n.getText("allMyApps_customLinkAppFinderSingle");}else{p.sCustomLabel=r.i18n.getText("allMyApps_customString",[p.numberCustomTiles]);p.sCustomLink=r.i18n.getText("allMyApps_customLinkAppFinder");}p.handlePress=function(e,d){this.oPopover.close();window.hasher.setHash("#Shell-home&/appFinder/catalog/"+JSON.stringify({catalogSelector:d.title,tileFilter:"",tagFilter:"[]",targetGroup:""}));}.bind(t);if(p.apps.length>0||p.numberCustomTiles>0){t.oModel.setProperty("/AppsData/"+i,p);if(t.bFirstCatalogLoaded===false){sap.ui.getCore().getEventBus().publish("launchpad","allMyAppsFirstCatalogLoaded",{bFirstCatalogLoadedEvent:true});t.bFirstCatalogLoaded=true;}t.iNumberOfProviders+=1;}});};
A.prototype._onGetCatalogsFail=function(m){sap.ushell.Container.getService("Message").show(M.Type.INFO,m);};
A.prototype._onDoneLoadingCatalogs=function(){var e=sap.ui.getCore().getEventBus();if(!this.bFirstCatalogLoaded){e.publish("launchpad","allMyAppsNoCatalogsLoaded");}};
A.prototype._getAppEntityFromTile=function(c){var a,l=sap.ushell.Container.getService("LaunchPage"),t=l.getCatalogTilePreviewTitle(c),T=l.getCatalogTilePreviewSubtitle(c),s=l.getCatalogTileTargetURL(c);if(s&&(t||T)){a={};a.url=s;if(t){a.title=t;a.subTitle=T;}else{a.title=T;}return a;}};
return new A();},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/search/HashChangeHandler',['sap/ushell/renderers/fiori2/search/SearchModel','sap/ushell/renderers/fiori2/search/SearchHelper'],function(S,a){"use strict";var m=sap.ushell.renderers.fiori2.search.HashChangeHandler={};jQuery.extend(m,{handle:function(h){if(!a.isLoggingEnabled()){return;}var t=this;t.sourceUrlArray=[];if(h.oldShellHash!==null){t.sourceUrlArray.push(h.oldShellHash);}if(h.oldAppSpecificRoute!==null){if(h.oldAppSpecificRoute.substring(0,2)==="&/"){t.sourceUrlArray.push(h.oldAppSpecificRoute.substring(2));}else{t.sourceUrlArray.push(h.oldAppSpecificRoute);}}t._createSearchModel().then(function(){var e={type:"ITEM_NAVIGATE",sourceUrlArray:this.sourceUrlArray,targetUrl:"#"+h.newShellHash,systemAndClient:this._getSID()};if(e.targetUrl.indexOf("=")!==-1){this.searchModel.sinaNext.logUserEvent(e);}}.bind(this));},_createSearchModel:function(){var t=this;if(t.initializedDeferred){return t.initializedDeferred;}t.searchModel=sap.ushell.renderers.fiori2.search.getModelSingleton();t.initializedDeferred=t.searchModel.initBusinessObjSearch();return t.initializedDeferred;},_getSID:function(){var s={"systemId":"","client":""};var u=window.location.href;var b=u.indexOf("sap-system=sid(");if(b!==-1){var c=u.substring(b).indexOf(")");if(c!==-1){var d=u.substring(b+15,b+c);if(d.split(".").length===2){s.systemId=d.split(".")[0];s.client=d.split(".")[1];}}}return s;}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchFacetDialogHelper',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchFacetDialogHelper');var m=sap.ushell.renderers.fiori2.search.SearchFacetDialogHelper={};jQuery.extend(m,{init:function(d){var t=this;t.POS_FACET_LIST=0;t.POS_TOOLBAR_SEARCHFIELD=0;t.POS_TOOLBAR_TOGGLEBUTTON=1;t.POS_SETTING_CONTAINER=0;t.POS_ATTRIBUTE_LIST_CONTAINER=1;t.POS_ICONTABBAR=0;t.POS_TABBAR_LIST=0;t.POS_TABBAR_CONDITION=1;t.POS_SORTING_SELECT=0;t.POS_SHOWONTOP_CHECKBOX=1;t.POS_ADVANCED_CHECKBOX=0;t.POS_ADVANCED_INPUT_LAYOUT=1;t.POS_ADVANCED_BUTTON=2;t.bResetFilterIsActive=false;var n={"decimals":2};t.oFloatNumberFormat=sap.ui.core.format.NumberFormat.getFloatInstance(n);t.oIntegernumberFormat=sap.ui.core.format.NumberFormat.getIntegerInstance();t.oDateFormatOptions={"pattern":"yyyy/MM/dd","UTC":false};t.oTimestampFormatOptions={"pattern":"yyyy-MM-dd HH:mm:ss.SSSSSSS","UTC":true};t.oDateFormat=sap.ui.core.format.DateFormat.getDateTimeInstance(t.oDateFormatOptions);t.oTimestampFormat=sap.ui.core.format.DateFormat.getDateTimeInstance(t.oTimestampFormatOptions);t.dialog=d;},getFacetList:function(){var t=this;return t.dialog.oSplitContainer.getMasterPages()[0].getContent()[t.POS_FACET_LIST];},updateDetailPage:function(l,f,i){var t=this;var M=t.dialog.getModel();var s=t.dialog.getModel('searchModel');var b=l.getBindingContext().sPath;var S=M.getProperty(b);var d=M.getAttributeDataType(S);var a=this.getFacetList().indexOfAggregation("items",l);var D=t.dialog.oSplitContainer.getDetailPages()[a];var o,c,A,e;if(d==="string"||d==="text"){o=D.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER];c=D.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];A=D.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_CONDITION].getContent()[0];e=D.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getContent()[t.POS_SETTING_CONTAINER];}else{o=D.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER];c=D.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];A=D.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER];e=D.getContent()[t.POS_SETTING_CONTAINER];}var n=D.getId();t.dialog.oSplitContainer.toDetail(n,"show");t.dialog.resetIcons(M,b,t.dialog);o.setBusy(true);var p={sAttribute:S.dimension,sBindingPath:b,sAttributeLimit:1000,bInitialFilters:i};if(d==="number"){p.sAttributeLimit=20;}if(!M.chartQuery){M.chartQuery=M.sinaNext.createChartQuery({filter:M.getProperty("/uiFilter").clone(),dimension:S.dimension,top:1000});}t.applyChartQueryFilter(a);if(f){var g=M.sinaNext.createSimpleCondition({attribute:S.dimension,operator:M.sinaNext.ComparisonOperator.Bw,value:f});if(!t.bResetFilterIsActive){M.chartQuery.filter.autoInsertCondition(g);}}else{if(f===undefined&&(d==="string"||d==="text")){D.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getSubHeader().getContent()[t.POS_TOOLBAR_SEARCHFIELD].setValue('');}}M.chartQuery.filter.searchTerm=s.getSearchBoxTerm();M.facetDialogSingleCall(p).then(function(){var I=M.getProperty(D.getBindingContext().sPath).items;if(A.data('initial')){t.initiateAdvancedConditions(A,I,A.data('dataType'));}var C=e.getItems()[t.POS_SHOWONTOP_CHECKBOX];if(c.getSelectedContexts().length>0){C.setEnabled(true);}t.updateDetailPageListItemsSelected(c,A);t.dialog.updateDetailPageCharts(I,M);});},applyChartQueryFilter:function(e){var t=this;t.dialog.getModel().resetChartQueryFilterConditions();var d=t.dialog.oSplitContainer.getDetailPages();for(var i=0;i<d.length;i++){if(i===e||d[i].getContent().length===0){continue;}var l;if(!d[i].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER]){l=d[i].getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];}else{l=d[i].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];}for(var j=0;j<l.getItems().length;j++){var L=l.getItems()[j];var o=L.getBindingContext().getObject();var f=o.filterCondition;if(f.attribute||f.conditions){if(L.getSelected()&&!t.bResetFilterIsActive){t.dialog.getModel().chartQuery.filter.autoInsertCondition(f);}}}t.applyAdvancedCondition(d[i],t.getFacetList().getItems()[i].getBindingContext().getObject(),t.dialog.getModel());}},resetChartQueryFilters:function(){var t=this;t.dialog.getModel().resetChartQueryFilterConditions();var d=t.dialog.oSplitContainer.getDetailPages();for(var i=0;i<d.length;i++){if(d[i].getContent().length===0){continue;}var l;if(!d[i].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER]){l=d[i].getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_LIST].getContent()[0].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];}else{l=d[i].getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];}for(var j=0;j<l.getItems().length;j++){var L=l.getItems()[j];var o=L.getBindingContext().getObject();var f=o.filterCondition;if(f.attribute||f.conditions){if(L.getSelected()){L.setSelected(false);}}}}},applyAdvancedCondition:function(d,f,a){var t=this;var b=t.dialog.getModel();var D,A,k,o,c,e,g,C;if(d.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER]){var l=d.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER];D=l.data('dataType');A=l.getContent();switch(D){case'timestamp':case'date':t.oDateTimeFormat=(D==='timestamp')?t.oTimestampFormat:t.oDateFormat;for(k=1;k<A.length;k++){o=A[k];c=o.getContent()[t.POS_ADVANCED_CHECKBOX];var h=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT];if(c.getSelected()&&h.getDateValue()&&h.getSecondDateValue()){var s=new Date(h.getSecondDateValue().getFullYear(),h.getSecondDateValue().getMonth(),h.getSecondDateValue().getDate(),23,59,59);var i=t.oDateTimeFormat.format(h.getDateValue());var j=t.oDateTimeFormat.format(s);e=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:b.sinaNext.ComparisonOperator.Ge,value:(D==='timestamp')?h.getDateValue():i,valueLabel:i});g=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:b.sinaNext.ComparisonOperator.Le,value:(D==='timestamp')?s:j,valueLabel:j});C=b.sinaNext.createComplexCondition({valueLabel:h.getValue(),operator:b.sinaNext.LogicalOperator.And,conditions:[e,g],userDefined:true});if(!t.bResetFilterIsActive){a.addFilterCondition(C,false);}}}break;case'integer':case'number':t.oNumberFormat=(D==='integer')?t.oIntegernumberFormat:t.oFloatNumberFormat;for(k=1;k<A.length;k++){o=A[k];c=o.getContent()[t.POS_ADVANCED_CHECKBOX];var n=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[0];var p=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[2];var q=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[1];var r=t.oNumberFormat.parse(n.getValue());var u=t.oNumberFormat.parse(p.getValue());if(c.getSelected()){if(r!==NaN&&u!==NaN&&u>=r){e=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:b.sinaNext.ComparisonOperator.Ge,value:r,valueLabel:t.oNumberFormat.format(r),userDefined:true});g=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:b.sinaNext.ComparisonOperator.Le,value:u,valueLabel:t.oNumberFormat.format(u),userDefined:true});C=b.sinaNext.createComplexCondition({valueLabel:t.oNumberFormat.format(r)+q.getText()+t.oNumberFormat.format(u),operator:b.sinaNext.LogicalOperator.And,conditions:[e,g],userDefined:true});if(!t.bResetFilterIsActive){a.addFilterCondition(C,false);}}else{t.dialog.getModel('searchModel').pushError({type:"error",title:sap.ushell.resources.i18n.getText('filterInputErrorTitle'),description:sap.ushell.resources.i18n.getText('filterInputError')});t.dialog.bConditionValidateError=true;}}}break;default:break;}}else{var v=d.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_CONDITION].getContent()[0];D=v.data('dataType');A=v.getContent();var w,x,y,F,O;switch(D){case'string':for(k=0;k<A.length-1;k++){o=A[k];w=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[0];x=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[1];y=x.getValue();switch(w.getSelectedKey()){case'eq':O=b.sinaNext.ComparisonOperator.Eq;break;case'ew':O=b.sinaNext.ComparisonOperator.Ew;break;case'bw':O=b.sinaNext.ComparisonOperator.Bw;break;case'co':O=b.sinaNext.ComparisonOperator.Co;break;default:O=b.sinaNext.ComparisonOperator.Eq;break;}if(x.getValue()){F=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:O,value:y,valueLabel:y,userDefined:true});if(!t.bResetFilterIsActive){a.addFilterCondition(F,false);}}}break;case'text':for(k=0;k<A.length-1;k++){o=A[k];w=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[0];x=o.getContent()[t.POS_ADVANCED_INPUT_LAYOUT].getContent()[1];y=x.getValue();switch(w.getSelectedKey()){case'co':O=b.sinaNext.ComparisonOperator.Co;break;default:O=b.sinaNext.ComparisonOperator.Eq;}if(x.getValue()){F=b.sinaNext.createSimpleCondition({attribute:f.dimension,attributeLabel:f.title,operator:O,value:y,valueLabel:y,userDefined:true});if(!t.bResetFilterIsActive){a.addFilterCondition(F,false);}}}break;default:break;}}},initiateAdvancedConditions:function(a,I,t){var b=this;var c,C,o,d,e;for(var i=I.length;i>0;i--){var f=I[i-1];if(f.advanced){c=a.getContent();if(t==="string"||t==="text"){C=c[c.length-2];}else{C=c[c.length-1];}o=C.getContent()[b.POS_ADVANCED_CHECKBOX];o.setSelected(true);d=C.getContent()[b.POS_ADVANCED_INPUT_LAYOUT];switch(t){case'integer':case'number':var g=d.getContent()[0];var h=d.getContent()[2];if(f.filterCondition.conditions){for(var j=0;j<f.filterCondition.conditions.length;j++){var k=f.filterCondition.conditions[j];if(k.operator==="Ge"){g.setValue(k.valueLabel||b.oNumberFormat.format(k.value));}if(k.operator==="Le"){h.setValue(k.valueLabel||b.oNumberFormat.format(k.value));}}}break;case'string':e=f.filterCondition.operator;if(e==="Co"){d.getContent()[0].setSelectedKey('co');}else if(e==="Ew"){d.getContent()[0].setSelectedKey('ew');}else if(e==="Bw"){d.getContent()[0].setSelectedKey('bw');}d.getContent()[1].setValue(f.filterCondition.valueLabel);break;case'text':e=f.filterCondition.operator;if(e==="Co"){d.getContent()[0].setSelectedKey('co');}d.getContent()[1].setValue(f.filterCondition.valueLabel);break;default:d.setValue(f.label);break;}b.insertNewAdvancedCondition(C,t);b.dialog.getModel().changeFilterAdvaced(f,true);}}a.data('initial',false);},updateDetailPageListItemsSelected:function(d,a){var t=this;var D=a.data('dataType');t.sortingAttributeList(d.getParent().getParent());d.getParent().setBusy(false);if(D==="date"||D==="timestamp"||D==="number"||D==="integer"){d.focus();}},removeAdvancedCondition:function(a,l,t){var b=this;var c=a.getContent();var C,I,d;if(t==="string"||t==="text"){for(var i=0;i<c.length-1;i++){C=c[i];I=C.getContent()[b.POS_ADVANCED_INPUT_LAYOUT].getContent()[1];if(I.getProperty('value')){var v=I.getValue();var L=l.getBindingContext().getObject();if(v===L.filterCondition.value){d=i;break;}}}}a.removeContent(d);},sortingAttributeList:function(d){var t=this;var s=d.getContent()[t.POS_SETTING_CONTAINER];var S=s.getItems()[t.POS_SORTING_SELECT].getItems()[0];var c=s.getItems()[t.POS_SHOWONTOP_CHECKBOX];var l=d.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER].getContent()[0];var D=l.data('dataType');var b=l.getBinding("items");var a=[];if(c.getSelected()){a.push(new sap.ui.model.Sorter("selected",true,false));}switch(S.getSelectedKey()){case"sortName":a.push(new sap.ui.model.Sorter("label",false,false));break;case"sortCount":a.push(new sap.ui.model.Sorter("value",true,false));if(D==="string"||D==="text"){a.push(new sap.ui.model.Sorter("label",false,false));}break;default:break;}b.sort(a);},insertNewAdvancedCondition:function(a,t){var A=a.getParent();var n=new sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition({type:t});if(t==="string"||t==="text"){var i=A.getAggregation("content").length-1;A.insertAggregation("content",n,i);}else{var b=A.indexOfAggregation("content",a);if(b===(A.getAggregation("content").length-1)){A.addContent(n);}}},deleteAdvancedCondition:function(a){var t=this;var A=a.getParent();var d=a.getParent().getParent().getParent().getParent().getParent();A.removeAggregation("content",a);t.updateCountInfo(d);},updateCountInfo:function(d){var t=this;var M=t.getFacetList();var o=M.getSelectedItem();if(!o){o=M.getItems()[0];}var a=o.getBindingContext().oModel;var s=o.getBindingContext().sPath;var D=a.getProperty(s).dimension;var f=t.dialog.getModel().aFilters;var c=0;for(var j=0;j<f.length;j++){if(!f[j].advanced&&f[j].facetAttribute===D){c++;}}var b=a.getAttributeDataType(a.getProperty(s));var A,e,i,C,g;var h=0;if(b==="string"||b==="text"){A=d.getContent()[t.POS_ICONTABBAR].getItems()[t.POS_TABBAR_CONDITION].getContent()[0];e=A.getContent().length-1;for(i=0;i<e;i++){C=A.getContent()[i];g=C.getContent()[0];if(g.getSelected()){h++;}}}else{A=d.getContent()[t.POS_ATTRIBUTE_LIST_CONTAINER];e=A.getContent().length;for(i=1;i<e;i++){C=A.getContent()[i];g=C.getContent()[0];if(g.getSelected()){h++;}}}var F=a.getProperty(s).facetType;if(F==="attribute"){var k=c+h;a.setProperty(s+"/count",k);t.dialog.resetEnabledForFilterResetButton();}}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchFacetDialogHelperCharts',['sap/base/Log'],function(L){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchFacetDialogHelperCharts');var m=sap.ushell.renderers.fiori2.search.SearchFacetDialogHelperCharts={};jQuery.extend(m,{init:function(d){this.dialog=d;},getBarChartPlaceholder:function(){var t=this;var c;c=new sap.suite.ui.microchart.ComparisonMicroChart({height:"90%",width:"100%",colorPalette:"",tooltip:""});c.addStyleClass('largeChart1barchart');var b=new sap.ui.model.Filter("value",sap.ui.model.FilterOperator.GT,0);var B={path:"items",factory:function(i,C){var o=new sap.suite.ui.microchart.ComparisonMicroChartData({title:'{label}',value:'{value}',color:{path:'selected',formatter:function(v){var r=sap.m.ValueColor.Good;if(!v){r=sap.m.ValueColor.Neutral;}return r;}},displayValue:'{valueLabel}',press:function(e){t.dialog.onDetailPageSelectionChangeCharts(e);}});return o;},filters:[b]};c.bindAggregation("data",B);c.setBusyIndicatorDelay(0);return c;},testWhetherPieWedgeOrLabelIsDummy:function(E){var r=false;var l="";var p=0,a=0;try{l=JSON.stringify(E.getParameters().data[0].data).split("\"")[3];p=l.match(/\d+/g)[0];a=l.match(/\d+/g)[1];if(l===sap.ushell.resources.i18n.getText("facetPieChartOverflowText2",[p,a])){r=true;}else if(l===sap.ushell.resources.i18n.getText("facetPieChartOverflowText2",[a,p])){r=true;}}catch(e){}return r;},getPieChartPlaceholder2:function(){var t=this;var c;c=new sap.viz.ui5.controls.VizFrame({width:"100%",vizType:"info/pie",selectData:function(e){if(!t.testWhetherPieWedgeOrLabelIsDummy(e)){t.dialog.onDetailPageSelectionChangeCharts(e);}},deselectData:function(e){if(!t.testWhetherPieWedgeOrLabelIsDummy(e)){t.dialog.onDetailPageSelectionChangeCharts(e);}}});c.attachRenderComplete(function(e){var b=[];var I;var s=this.getBindingContext().getObject().items4pie;if(!s){return c;}for(var i=0;i<s.length;i++){I=s[i];if(I.selected===true){b.push({data:{Label:(I.label)}});}}var g={clearSelection:true};c.vizSelection(b,g);var h,k,l;var n,o,q,r;h=e.getSource().sId;n=$("#"+h+" .v-legend-marker").last();o=$("#"+h+" .v-legend-item").last();if(this.getBindingContext().getObject().items4pie[0].percentageMissingInBigPie>0){q=$("#"+h+" .v-legend-item").length-1;r=$("#"+h+" .v-datapoint-group").children();for(var j=0;j<r.length;j++){l=r[j];k=l.getAttribute("data-id");k=parseInt(k,10);if(k===q){l.remove();break;}}n.attr("fill-opacity","0");n.attr("stroke-opacity","1");n.attr("stroke","black");n.attr("stroke-width","0.5");o.unbind();o.off();}var u=$("#"+h+" .v-background-body");u.unbind();u.off();});c.setVizProperties({legendGroup:{linesOfWrap:0,layout:{maxWidth:0.5}},title:{visible:false},interaction:{selectability:{mode:"multiple"}}});c.addStyleClass('largeChart2piechart');var p=new sap.ui.model.Filter("pieReady",sap.ui.model.FilterOperator.EQ,true);var d=new sap.viz.ui5.data.FlattenedDataset({dimensions:[{name:'Label',value:"{label}"}],measures:[{name:'Value',value:'{valueLabel}'}],data:{path:"items4pie",filters:[p]}});var f=new sap.viz.ui5.controls.common.feeds.FeedItem({uid:"size",type:"Measure",values:["Value"]});var a=new sap.viz.ui5.controls.common.feeds.FeedItem({uid:"color",type:"Dimension",values:["Label"]});c.setDataset(d);c.addFeed(f);c.addFeed(a);return c;},getPieChartPlaceholder:function(){var t=this;var c;var p={};p.oSearchFacetDialog=t.dialog;c=new sap.ushell.renderers.fiori2.search.controls.SearchFacetPieChart(p);c.addStyleClass('largeChart2piechart');sap.ui.core.ResizeHandler.register(c,function(e){var s=0;var a=0;if(e.target.firstChild){s=parseInt(window.getComputedStyle(e.target.firstChild,null).getPropertyValue("transform-origin").split(" ")[0],10);a=(e.size.width/2)-s;e.target.firstChild.style.marginLeft=a+"px";}});return c;},getHeaderWithDropDown:function(t){var a=this;var c=a.getDropDownButton();var l=new sap.m.Label({text:t});var h=new sap.m.Bar({translucent:true,design:sap.m.BarDesign.Header,contentMiddle:[l,c]});h.addStyleClass("sapUshellSearchFacetDialogTabBarHeader");return h;},setDummyTabBarItems:function(c){c.tabBarItems=[new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetList"),icon:"sap-icon://list",key:'list'+arguments[0]}),new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetBarChart"),icon:"sap-icon://horizontal-bar-chart",key:'barChart'+arguments[0]}),new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetPieChart"),icon:"sap-icon://pie-chart",key:'pieChart'+arguments[0]})];c.chartOnDisplayIndex=0;},getDropDownButton:function(c){var b=[];var B;var d=new sap.m.Button({icon:c.tabBarItems[c.chartOnDisplayIndex].getIcon()});for(var i=0;i<c.tabBarItems.length;i++){B=new sap.m.Button({text:c.tabBarItems[i].getText(),icon:c.tabBarItems[i].getIcon(),press:function(E){var g,h;h=E.getSource().sId;g=document.getElementById(h).dataset.facetViewIndex;g=parseInt(g,10);c.chartOnDisplayIndex=g;if(c.chartOnDisplayIndex===0){$(".sapUshellSearchFacetDialogSettingsContainer").css('display','block');}else{$(".sapUshellSearchFacetDialogSettingsContainer").css('display','none');}c.chartOnDisplayIndexByFilterArray[c.facetOnDisplayIndex]=g;var j=c.tabBarItems[c.chartOnDisplayIndex].getIcon();d.setIcon(j);var e=c.tabBarItems[c.chartOnDisplayIndex].getText();var f=sap.ushell.resources.i18n.getText('displayAs',[e]);d.setTooltip(f);var k=$(".sapUshellSearchFacetDialogFacetList")[0];if(k){var F=sap.ui.getCore().byId(k.id);if(!F.getSelectedItem()){F.setSelectedItem(F.getItems()[0]);}F.fireSelectionChange({listItem:F.getSelectedItem()});}c.controlChartVisibility(c,g);}});B.data("facet-view-index",""+i,true);b.push(B);}var a=new sap.m.ActionSheet({showCancelButton:true,buttons:b,placement:sap.m.PlacementType.Bottom,cancelButtonPress:function(){L.info("sap.m.ActionSheet: cancelButton is pressed");}});d.addStyleClass("sapUshellSearchFacetDialogTabBarButton");var e=c.tabBarItems[c.chartOnDisplayIndex].getText();var f=sap.ushell.resources.i18n.getText('displayAs',[e]);d.setTooltip(f);d.attachPress(function(E){a.openBy(this);});return d;},getListContainersForDetailPage:function(){var t,b,p;var r=[];var a=0;var c=440;var s=$(".searchFacetLargeChartContainer");for(var i=0;i<s.length;i++){if(s[i].clientHeight>0){c=s[i].offsetParent.offsetParent.offsetParent.clientHeight;a=i;break;}}var d=$(".searchFacetLargeChartContainer")[a];if(d){var l=sap.ui.getCore().byId(d.id);var S,I,P;I=$('.sapUshellSearchFacetDialogSubheaderToolbar .sapMSF');S=$('.sapUshellSearchFacetDialogSortButton');P=d.firstChild.children;for(var j=0;j<P.length;j++){if(P[j].className){if(P[j].className.match(/sapMList/)){t=P[j];}else if(P[j].className.match(/barchart/)){b=P[j];}else if(P[j].className.match(/piechart/)){p=P[j];}}}r.push(d);r.push(l);r.push(c);r.push(t);r.push(b);r.push(p);r.push(S);r.push(I);}return r;}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchFacetsFormatter',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchFacetsFormatter');var c=sap.ushell.renderers.fiori2.search.SearchFacetsFormatter=function(){this.init.apply(this,arguments);};jQuery.sap.declare('sap.ushell.renderers.fiori2.search.Facet');var F=sap.ushell.renderers.fiori2.search.Facet=function(){this.init.apply(this,arguments);};jQuery.sap.declare('sap.ushell.renderers.fiori2.search.FacetItem');var d=sap.ushell.renderers.fiori2.search.FacetItem=function(){this.init.apply(this,arguments);};F.prototype={init:function(p){this.title=p.title;this.facetType=p.facetType;this.dimension=p.dimension;this.dataType=p.dataType;this.matchingStrategy=p.matchingStrategy;this.items=p.items||[];this.totalCount=p.totalCount;},hasFilterCondition:function(f){for(var i=0,l=this.items.length;i<l;i++){var a=this.items[i].filterCondition||this.items[i];if(a.equals&&a.equals(f)){return true;}}return false;},hasFilterConditions:function(){for(var i=0,l=this.items.length;i<l;i++){if(this.items[i].filterCondition){return true;}}return false;},removeItem:function(f){for(var i=0,l=this.items.length;i<l;i++){var a=this.items[i].filterCondition||this.items[i];if(a.equals&&f.filterCondition&&a.equals(f.filterCondition)){return this.items.splice(i,1);}}}};d.prototype={init:function(p){p=p||{};this.selected=p.selected||false;this.level=p.level||0;this.filterCondition=p.filterCondition;this.value=p.value||"";this.label=p.label||"";this.facetTitle=p.facetTitle||"";this.facetAttribute=p.facetAttribute||"";this.valueLabel=this.value;this.advanced=p.advanced||false;this.listed=p.listed||false;},equals:function(o){return(this.facetTitle===o.facetTitle&&this.label===o.label&&this.value===o.value&&this.filterCondition.equals(o.filterCondition));},clone:function(){var n=new sap.ushell.renderers.fiori2.search.FacetItem();n.facetTitle=this.facetTitle;n.selected=this.selected;n.label=this.label;n.level=this.level;n.value=this.value;n.valueLabel=this.valueLabel;n.filterCondition=this.filterCondition.clone();return n;}};c.prototype={init:function(m){this.model=m;},_getAncestorDataSources:function(s){var r=[];var a=s.dataSourceTree.findNode(s.getProperty("/uiFilter/dataSource")).getAncestors().reverse();for(var i=0;i<a.length;i++){var b=a[i].dataSource;var e=new d({label:b.labelPlural,filterCondition:b,level:0,value:a[i].count});r.push(e);}return r;},_getSiblingDataSources:function(s,l){var S=[];var a=s.getProperty("/uiFilter/dataSource");var b=s.dataSourceTree.findNode(a);var e;if(b.parent&&!b.unsureWhetherNodeisBelowRoot){e=b.parent.getChildren();}else{e=[];}if(e.length===0){e.push(b);}for(var j=0,f=e.length;j<f;j++){var g=e[j].dataSource;var h=new d({label:g.labelPlural,value:e[j].count,filterCondition:g,selected:a===g,level:l});S.push(h);if(h.selected){S.push.apply(S,this._getChildrenDataSources(s,l+1));}}return S;},_getChildrenDataSources:function(s,l){var C=[];var a=s.getProperty("/uiFilter/dataSource");var b=s.dataSourceTree.findNode(a).getChildren();for(var j=0,e=b.length;j<e;j++){var f=b[j].dataSource;var g=new d({label:f.labelPlural,value:b[j].count,filterCondition:f,selected:false,level:l});C.push(g);}return C;},getDataSourceFacetFromTree:function(s){var D=new F({facetType:"datasource",title:"Search In"});var a=s.getProperty("/uiFilter/dataSource");var A=this._getAncestorDataSources(s);D.items.push.apply(D.items,A);var S=this._getSiblingDataSources(s,s.allDataSource===a?0:1);D.items.push.apply(D.items,S);return D;},_createFacetItemsFromConditionGroup:function(r){var f=[];for(var i=0;i<r.conditions.length;i++){var a=r.conditions[i];for(var j=0;j<a.conditions.length;j++){var b=a.conditions[j];if(b.type===this.model.sinaNext.ConditionType.Simple){f.push(new d({facetAttribute:b.attribute,label:this._formatLabel(b.valueLabel,b.operator),filterCondition:b,selected:true}));}else{f.push(new d({facetAttribute:b.conditions[0].attribute,label:b.valueLabel,filterCondition:b,selected:true}));}}}return f;},_formatLabel:function(l,o){var a;switch(o){case'Bw':a=l+'*';break;case'Ew':a='*'+l;break;case'Co':a='*'+l+'*';break;default:a=l;break;}return a;},getAttributeFacetsFromPerspective:function(r,s){var D=s.getDataSource();if(D.type===s.sinaNext.DataSourceType.Category){return $.when([]);}var S=r.facets.filter(function(A){return A.type===s.sinaNext.FacetType.Chart;});var C=[];var a={};for(var i=0,l=S.length;i<l;i++){var o=S[i];var b=new F({title:o.title,facetType:'attribute',dimension:o.query.dimension,totalCount:r.totalCount});if(o.items.length===0){continue;}for(var j=0;j<o.items.length;j++){var f=o.items[j];var e=new d({facetAttribute:o.query.dimension,label:this._formatLabel(f.dimensionValueFormatted,f.filterCondition.operator),value:f.measureValue,filterCondition:f.filterCondition});e.facetTitle=o.title;e.serverSideItem=true;b.items.push(e);}a[o.query.dimension]=b;C.push(b);}this.addDataTypeToClientSideFacets(C,s);var g={};var h=this._createFacetItemsFromConditionGroup(s.getProperty("/uiFilter/rootCondition"));for(var k=0,p=h.length;k<p;k++){var q=h[k];var t=a[q.facetAttribute];if(t){var u=C.indexOf(t);if(u>0){C.splice(u,1);C.splice(0,0,t);}for(var m=0,v=t.items.length;m<v;m++){var w=t.items[m];if(q.filterCondition.equals(w.filterCondition)){w.selected=true;if(!s.config.multiSelect){w.value=null;w.valueLabel=null;}}}}g[q.facetAttribute]=t;}if(!s.config.multiSelect){for(var x in g){if(g.hasOwnProperty(x)){var y=g[x];for(var n=y.items.length-1;n>=0;n--){var z=y.items[n];if(!z.selected){y.items.splice(n,1);}}}}}return $.when(C);},addDataTypeToClientSideFacets:function(C,s){var D=s.getDataSource();for(var i=0;i<C.length;i++){var f=C[i];var m=D.getAttributeMetadata(f.dimension);f.dataType=m.type;}},getFacets:function(D,i,s){var f=[this.getDataSourceFacetFromTree(s)];if(D===s.appDataSource||D.type===s.sinaNext.DataSourceType.Category){return $.when(f);}if(!i){return $.when(f);}var a=this.getAttributeFacetsFromPerspective(i,s);var r=a.then(function(A){if(A.length>0){f.push.apply(f,A);}return f;});return r;},getFacetItemsWithFilterConditions:function(s){return this._createFacetItemsFromConditionGroup(s.getProperty("/uiFilter/rootCondition"));},getDialogFacetsFromMetaData:function(m,s){var S=jQuery.map(m.attributeMetadataMap,function(a){return a;});var C=[];for(var i=0,l=S.length;i<l;i++){var o=S[i];if(o.usage.Facet||o.usage.AdvancedSearch){var e=new F({title:o.label,facetType:"attribute",dimension:o.id,dataType:o.type,matchingStrategy:o.matchingStrategy});var f=this._createFacetItemsFromConditionGroup(s.getProperty("/uiFilter/rootCondition"));var g=0;for(var k=0,h=f.length;k<h;k++){var j=f[k];if(j.facetAttribute===e.dimension){g++;e.items.splice(0,0,j);}}e.count=g;C.push(e);}}C.sort(function(a,b){return a.title.localeCompare(b.title);});return C;},getDialogFacetsFromChartQuery:function(r,s,i){var C=new F({dimension:s.chartQuery.dimension});if(r){for(var j=0;j<r.items.length;j++){var f=r.items[j];var a=new d({value:f.measureValue,filterCondition:f.filterCondition,label:f.dimensionValueFormatted,facetAttribute:r.query.dimension});C.items.push(a);}var b;if(i){b=this._createFacetItemsFromConditionGroup(s.getProperty("/uiFilter/rootCondition"));}else{b=s.aFilters;}for(var k=0,l=b.length;k<l;k++){var S=b[k];if(S.facetAttribute===C.dimension){var e=false;for(var m=0,g=C.items.length;m<g;m++){var h=C.items[m];if(S.filterCondition.equals(h.filterCondition)){h.selected=true;e=true;}}if(!e){C.items.splice(C.items.length,0,S);if(S.filterCondition.userDefined){S.advanced=true;}else{S.listed=true;S.value="";S.valueLabel="";}}else{S.listed=true;}}}}return C;},hasDialogFacetsFromMetaData:function(s){var m=s.getDataSource();var S=jQuery.map(m.attributeMetadataMap,function(e){return e;});var h=false;for(var i=0,l=S.length;i<l;i++){var o=S[i];if(o.usage){if(o.usage.Facet||o.usage.AdvancedSearch){h=true;break;}}}return h;}};return c;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchHelper',['sap/m/MessageBox','sap/ui/core/format/NumberFormat','sap/ui/core/format/FileSizeFormat','jquery.sap.storage'],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchHelper');var m=sap.ushell.renderers.fiori2.search.SearchHelper={};
m.Tester=function(){this.init.apply(this,arguments);};
m.Tester.prototype={init:function(s,h,a,d){this.alphaNumeric='[a-zA-Z0-9]';this.nonAlphaNumeric='[^a-zA-Z0-9]';this.PL='(?:[\0-@\[-`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u0560\u0588-\u05CF\u05EB-\u05EF\u05F3-\u061F\u064B-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07C9\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u089F\u08B5\u08BE-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09EF\u09F2-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B70\u0B72-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B-\u0C5F\u0C62-\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDD\u0CDF\u0CE2-\u0CF0\u0CF3-\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57-\u0D5E\u0D62-\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0EDB\u0EE0-\u0EFF\u0F01-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u1040-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16F0\u16F9-\u16FF\u170D\u1712-\u171F\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u181F\u1878-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u194F\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19FF\u1A17-\u1A1F\u1A55-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4C-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BFF\u1C24-\u1C4C\u1C50-\u1C59\u1C7E\u1C7F\u1C89-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u2182\u2185-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u3004\u3007-\u3030\u3036-\u303A\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u312E-\u3130\u318F-\u319F\u31BB-\u31EF\u3200-\u33FF\u4DB6-\u4DFF\u9FD6-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA620-\uA629\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6E6-\uA716\uA720\uA721\uA789\uA78A\uA7AF\uA7B8-\uA7F6\uA802\uA806\uA80B\uA823-\uA83F\uA874-\uA881\uA8B4-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FE-\uA909\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9D0-\uA9DF\uA9E5\uA9F0-\uA9F9\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB66-\uAB6F\uABE3-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEFF\uDF20-\uDF2F\uDF41\uDF4A-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0-\uDFFF]|\uD801[\uDC9E-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE01-\uDE0F\uDE14\uDE18\uDE34-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE5-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC82\uDCB0-\uDCCF\uDCE9-\uDD02\uDD27-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDD9\uDDDB\uDDDD-\uDDFF\uDE12\uDE2C-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE7F\uDEAB-\uDEFF\uDF1A-\uDFFF]|\uD806[\uDC00-\uDC9F\uDCE0-\uDCFE\uDD00-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC71\uDC90-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC00-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD823-\uD82B\uD82D\uD82E\uD830-\uD834\uD836-\uD839\uD83C-\uD83F\uD874-\uD87D\uD87F-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDEFF\uDF45-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE1-\uDFFF]|\uD821[\uDFED-\uDFFF]|\uD822[\uDEF3-\uDFFF]|\uD82C[\uDC02-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC-\uDFFF]|\uD83A[\uDCC5-\uDCFF\uDD44-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD869[\uDED7-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])';this.nonepL='(?:[^A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D])';this.pL='(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D])';s=s||"*";if(this.onlyAsteriskRegExp.test(s)){this.onlyAsterisk=true;}s=s.replace(/([.^=!:${}()|\+\-\[\]\/\\])/g,"\\$1");this.aSearchTerms=this.tokenizeSearchTerms(s);for(var j=0;j<this.aSearchTerms.length;++j){var b=this.aSearchTerms[j];b=b.replace(/\?/g,".");b=b.replace(/\*/g,".*?");var i=b.match(/[\u3400-\u9faf]/)!==null;if(i||a){b=new RegExp(b,'gi');}else{if(b.substr(-3)==='.*?'){b=b.substr(0,b.length-3)+this.pL+'*';}b=new RegExp('('+this.nonepL+'|^|\\s)('+b+')()','gi');}this.aSearchTerms[j]=b;}this.highlightStyle=h;if(!d){d='and';}this.bDisjunctionType=d;},onlyAsteriskRegExp:new RegExp('^[\\s*]*$'),test:function(t){var r={bMatch:false,sHighlightedText:''};if(!t){return r;}this.initializeBoldArray(t);this.globalBold=false;var R;var M;for(var j=0;j<this.aSearchTerms.length;++j){R=this.aSearchTerms[j];var l=-1;var L=false;while((M=R.exec(t))!==null){L=true;if(R.lastIndex===l){break;}l=R.lastIndex;var s=this.calStartIndex(t,M.index);if(s<0){continue;}l=this.calLastIndex(t,s,R.lastIndex);this.markBoldArray(s,l);}switch(this.bDisjunctionType){case'or':if(L){r.bMatch=true;}break;case'and':default:if(!L){return r;}break;}}r.bMatch=true;if(this.onlyAsterisk){r.sHighlightedText=t;}else{r.sHighlightedText=this.render(t);}return r;},calStartIndex:function(t,s){t=t.substring(s);var r=new RegExp(this.pL);var a=r.exec(t);if(!a){return s;}return a.index+s;},calLastIndex:function(t,s,l){t=t.substring(l,l);var r=new RegExp(this.nonepL);var a=r.exec(t);if(!a){return l;}return l-1;},tokenizeSearchTerms:function(t){var a=t.split(" ");var n=[];$.each(a,function(i,b){b=$.trim(b);if(b.length>0&&b!=='.*'){n.push(b);}});return n;},initializeBoldArray:function(t){this.bold=new Array(t.length);for(var i=0;i<this.bold.length;++i){this.bold[i]=false;}},markBoldArray:function(n,a){for(var i=n;i<a;i++){this.bold[i]=true;this.globalBold=true;}},render:function(o){if(!this.globalBold){return o;}var b=false;var r=[];var s=0;var i;for(i=0;i<o.length;++i){if((!b&&this.bold[i])||(b&&!this.bold[i])){r.push(o.substring(s,i));if(b){r.push("</b>");}else{if(this.highlightStyle){r.push('<b class="'+this.highlightStyle+'">');}else{r.push("<b>");}}b=!b;s=i;}}r.push(o.substring(s,i));if(b){r.push("</b>");}return r.join("");}};
m.delayedExecution=function(o,d){var t=null;var a=function(){var b=arguments;var c=this;if(t){window.clearTimeout(t);}t=window.setTimeout(function(){t=null;o.apply(c,b);},d);};a.abort=function(){if(t){window.clearTimeout(t);}};return a;};
m.refuseOutdatedRequests=function(o,r){var l=0;var d=function(){var a=arguments;var t=this;var b=++l;var c=new jQuery.Deferred();o.apply(t,a).done(function(){if(b!==l){return;}c.resolve.apply(c,arguments);}).fail(function(){if(b!==l){return;}c.reject.apply(c,arguments);});return c;};d.abort=function(){++l;};if(r){m.outdatedRequestAdministration.registerDecorator(r,d);}return d;};
m.abortRequests=function(r){var d=m.outdatedRequestAdministration.getDecorators(r);for(var i=0;i<d.length;++i){var a=d[i];a.abort();}};
m.outdatedRequestAdministration={decoratorMap:{},registerDecorator:function(r,d){var a=this.decoratorMap[r];if(!a){a=[];this.decoratorMap[r]=a;}a.push(d);},getDecorators:function(r){var d=this.decoratorMap[r];if(!d){d=[];}return d;}};
m.boldTagUnescaper=function(d,h){var i=d.innerHTML;var b='';var a='';if(h){b='&lt;b class="'+h+'"&gt;';a='<b class="'+h+'">';}else{b='&lt;b&gt;';a='<b>';}var c='&lt;/b&gt;';var e='</b>';while(i.indexOf(b)+i.indexOf(c)>=-1){i=i.replace(b,a);i=i.replace(c,e);}while(i.indexOf('&lt;i&gt;')+i.indexOf('&lt;/i&gt;')>=-1){i=i.replace('&lt;i&gt;','<i>');i=i.replace('&lt;/i&gt;','</i>');}while(i.indexOf('&lt;span&gt;')+i.indexOf('&lt;/span&gt;')>=-1){i=i.replace('&lt;span&gt;','<span>');i=i.replace('&lt;/span&gt;','</span>');}d.innerHTML=i;};
m.boldTagUnescaperByText=function(d){var a=$(d);var s=a.text().replace(/<b>/gi,'').replace(/<\/b>/gi,'');if(s.indexOf('<')===-1){a.html(a.text());}};
m.forwardEllipsis4Whyfound=function(d){var a=$(d);var w=d.offsetWidth;var o=d.offsetLeft;var b=d.scrollWidth;if(b>w){a.find("b").each(function(){var p=this.offsetLeft-o;var c=this.offsetWidth;var t;if(p+c>w){var i=d.innerHTML.indexOf(this.outerHTML);if(c>w){if(d.innerHTML.substring(0,i).trim().length>0){t="... "+d.innerHTML.substring(i);a.html(t);}}else{var l;var e=d.innerHTML.substring(0,i).trim();t=d.innerHTML.substring(i).trim();var f=[];while(e.length>0){l=e.match(/\S+$/);if(l.length==0){break;}f.push(t);t=l[0]+" "+t;d.innerHTML="... "+t;if(d.scrollWidth<w){e=e.substring(0,e.length-l[0].length).trim();}else{while(d.scrollWidth>w&&f.length>0){var g=f.pop();d.innerHTML="... "+g;}break;}}}}return false;});}};
m.getHashFromUrl=function(){return window.location.href.substring(window.location.href.indexOf("#"))||"#";};
m.getUrlParameter=function(n){if(typeof window!=="undefined"){var s=window.location.href;var v=(new RegExp(n+'=(.+?)(&|$|#)','i').exec(s)||[null])[1];if(!v){return v;}v=decodeURIComponent(v.replace(/\+/g,' '));return v;}return"";};
m.getUrlParameters=function(){var u;if(sap&&sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("URLParsing")){var U=sap.ushell.Container.getService("URLParsing");var a=U.splitHash(m.getHashFromUrl()).appSpecificRoute;u=a?a.substring(2):"";}else{u=m.getHashFromUrl();}var b=m.parseUrlParameters(u);return b;};
m.parseUrlParameters=function(u){var p={};var k=[{"name":"filter","pos":-1,"value":""},{"name":"top","pos":-1,"value":""},{"name":"datasource","pos":-1,"value":""},{"name":"searchterm","pos":-1,"value":""}];for(var i=0;i<k.length;i++){k[i].pos=u.toLowerCase().indexOf(k[i].name+"=");}k.sort(function(a,b){return a.pos-b.pos;});for(var j=0;j<k.length;j++){if(k[j].pos!==-1){if(k[j+1]&&k[j+1].pos!==-1){k[j].value=u.substring(k[j].pos,k[j+1].pos);}else{k[j].value=u.substring(k[j].pos);}k[j].value=k[j].value.substring(k[j].name.length+1);if(k[j].value.charAt(k[j].value.length-1)==="&"){k[j].value=k[j].value.substring(0,k[j].value.length-1);}k[j].value=decodeURIComponent(k[j].value);p[k[j].name]=k[j].value;}}return p;};
m.isSearchAppActive=function(){if(m.getHashFromUrl().substr(1,13)==='Action-search'){return true;}return false;};
m.hasher={hash:null,setHash:function(h){if(decodeURIComponent(m.getHashFromUrl())!==decodeURIComponent(h)){try{window.location.hash=h;}catch(e){this.showUrlUpdateError(e);}}this.hash=h;},init:function(){this.hash=m.getHashFromUrl();},reset:function(){this.hash=null;},hasChanged:function(){if(decodeURIComponent(this.hash)!==decodeURIComponent(m.getHashFromUrl())){return true;}return false;},showUrlUpdateError:function(e){if(this.urlError){return;}this.urlError=true;var a=sap.ushell.resources.i18n.getText('searchUrlErrorMessage');sap.m.MessageBox.alert(a,{title:sap.ushell.resources.i18n.getText('searchUrlErrorTitle'),icon:sap.m.MessageBox.Icon.WARNING});}};
m.loadResultViewType=function(){if(jQuery.sap.storage&&jQuery.sap.storage.isSupported()){var r=jQuery.sap.storage.get("resultViewType");if(!r||r!=="searchResultTable"){return"searchResultList";}return"searchResultTable";}return"searchResultList";};
m.saveResultViewType=function(r){if(jQuery.sap.storage.isSupported()){jQuery.sap.storage.put("resultViewType",r);}};
m.idMap={};
m.subscribeOnlyOnce=function(i,e,c,s){if(m.idMap[i]){m.idMap[i].unsubscribe();}var w=function(){c.apply(s);sap.ui.getCore().getEventBus().unsubscribe(e,w,s);};sap.ui.getCore().getEventBus().subscribe(e,w,s);m.idMap[i]={unsubscribe:function(){sap.ui.getCore().getEventBus().unsubscribe(e,w,s);}};};
m._isDisplayed=function(e){if(e&&e.nodeType){if(jQuery(e).is(':visible')){return true;}}if(e&&e.getMetadata()&&e.getMetadata().getName()){if(e.getDomRef&&e.getDomRef()){return true;}}return false;};
m.SearchFocusHandler=function(){this.init.apply(this,arguments);};
m.SearchFocusHandler.prototype={init:function(s){this.oSearchView=s;},get2BeFocusedControlDomRef:function(){if(!this.oModel){this.oModel=this.oSearchView.getModel();}var i=0;var c=null;var a=null;var b=false;var d=false;var e=false;if(this.oModel.getDataSource()!==this.oModel.appDataSource){if(this.oModel.getProperty('/boCount')>0&&this.oModel.getProperty('/appCount')>0){i=this.oModel.getProperty('/focusIndex');i=(i>0)?i+1:i;c=this.oSearchView.resultList.getItems()[i];if(c&&c.getDomRef){a=c.getDomRef();}}else if(this.oModel.getProperty('/boCount')>0&&this.oModel.getProperty('/appCount')===0){i=this.oModel.getProperty('/focusIndex');b=this.oModel.getResultToDisplay()==="searchResultList";d=this.oModel.getResultToDisplay()==="searchResultTable";e=this.oModel.getResultToDisplay()==="searchResultMap";if(b){c=this.oSearchView.resultList.getItems()[i];}else if(d){c=this.oSearchView.searchResultTable.getItems()[i];}else if(e){c=this.oSearchView.searchResultMap;}if(c&&c.getDomRef){a=c.getDomRef();}}else if(this.oModel.getProperty('/boCount')===0&&this.oModel.getProperty('/appCount')>0){c=this.oSearchView.resultList.getItems()[0];if(m._isDisplayed(c)){a=m.getFocusableTileDomRef($(c.getDomRef()));}}}else{var t=this.oSearchView.appSearchResult;if(t.getDomRef()===null){return null;}i=this.oModel.getProperty('/focusIndex');var f=jQuery(t.getDomRef()).find('.sapUshellSearchTileWrapper')[i];if(m._isDisplayed(f)){a=m.getFocusableTileDomRef(f);}}return a;},setFocus:function(){var t=this;var r=20;var d=function(){t.focusSetter=null;var c=t.get2BeFocusedControlDomRef();if(r===20){c=null;}if(!c||sap.ui.getCore().getUIDirty()||jQuery('.sapUshellSearchTileContainerDirty').length>0||jQuery('.sapMBusyDialog').length>0){if(--r){t.focusSetter=setTimeout(d,100);}return;}c.focus();if(t.oModel.getProperty('/focusIndex')===0){var a=sap.ui.getCore().byId(c.getAttribute('id'));if(a&&a.getContent&&a.getContent()[0]){var b=a.getContent()[0];if(b.showDetails){b.showDetails();}}}t.oSearchView.resultList.collectListItemsForNavigation();};if(this.focusSetter){clearTimeout(this.focusSetter);this.focusSetter=null;}d();}};
m.getFocusableTileDomRef=function(t){return jQuery(t).find('[tabindex], button')[0];};
m.formatInteger=function(v){if(!m._integerShortFormatter){m._integerShortFormatter=sap.ui.core.format.NumberFormat.getIntegerInstance({style:'short',precision:3,groupingEnabled:true},sap.ui.getCore().getConfiguration().getLocale());}if(!m._integerStandardFormatter){m._integerStandardFormatter=sap.ui.core.format.NumberFormat.getIntegerInstance({style:'standard',precision:3,groupingEnabled:true},sap.ui.getCore().getConfiguration().getLocale());}if(Math.abs(v)>=99950){return m._integerShortFormatter.format(v);}return m._integerStandardFormatter.format(v);};
m.formatFileSize=function(v){if(!m._fileSizeFormatter){m._fileSizeFormatter=sap.ui.core.format.FileSizeFormat.getInstance({style:'short',precision:3,groupingEnabled:true,binaryFilesize:true},sap.ui.getCore().getConfiguration().getLocale());}return m._fileSizeFormatter.format(v);};
m.getUrlParameterByUi2Service=function(p){var P=sap.ui2.srvc.getParameterMap();var v=P[p];return v;};
m.attachEventHandlersForTooltip=function(e){var a=$(e);a.find('.sapUshellSearchResultListItem-MightOverflow').on('mouseenter',function(){var b=$(this);var t=b.text();var c=b.attr('title');var d;var f=b.attr("data-tooltippedby");if(f){var g=a.find("#"+f);d=g.text();}if(!b.attr('title')&&(this.offsetWidth<this.scrollWidth||this.offsetHeight<this.scrollHeight)||d&&t!==d){if(!d){d=b.text();}b.attr("title",d);}else if(c===b.text()){b.removeAttr('title');}}).on('mouseout',function(){var b=$(this);var t;var c=b.attr("data-tooltippedby");if(c){var d=a.find("#"+c);t=d.text();}if(!t){t=b.text();}var f=b.attr('title');if(f===t){b.removeAttr('title');}});};
m.convertPromiseTojQueryDeferred=function(p){var d=new jQuery.Deferred();p.then(function(){d.resolve.apply(d,arguments);},function(){d.reject.apply(d,arguments);});return d;};
m.isLoggingEnabled=function(){if(this.isLoggingEnabledFlag!==undefined){return this.isLoggingEnabledFlag;}this.isLoggingEnabledFlag=true;try{var p=this.getUrlParameter("searchLogging");if(p==="false"){this.isLoggingEnabledFlag=false;}if(p===undefined){if(window['sap-ushell-config']!==undefined){var c=window['sap-ushell-config'].renderers.fiori2.componentData.config;if(c!==undefined){if(c.enableSearchLogging===false){this.isLoggingEnabledFlag=false;}}}}}catch(e){}return this.isLoggingEnabledFlag;};
return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchNavigationObject',['sap/ushell/renderers/fiori2/search/eventlogging/EventLogger'],function(E){"use strict";return sap.ui.base.Object.extend("sap.ushell.renderers.fiori2.search.SearchNavigationObject",{constructor:function(p){this._model=sap.ushell.renderers.fiori2.search.getModelSingleton();if(p){this.setHref(p.href);this.setText(p.text);this.setTarget(p.target);this.setLoggingType(p.loggingType);this.setPositionInList(p.positionInList);}if(this._model.eventLogger===undefined){this._model.eventLogger=E.newInstance({sinaNext:this._model.sinaNext});}if(typeof this._loggingType==='undefined'){this.setLoggingType(this._model.eventLogger.RESULT_LIST_ITEM_NAVIGATE);}},getPositionInList:function(){return this._positionInList;},setPositionInList:function(p){this._positionInList=p;},getHref:function(){return this._href;},setHref:function(h){this._href=h;},getText:function(){return this._text;},setText:function(t){this._text=t;},getTarget:function(){return this._target;},setTarget:function(t){this._target=t;},getLoggingType:function(){return this._loggingType;},setLoggingType:function(l){this._loggingType=l;},performNavigation:function(p){this.trackNavigation(p);if(!this._target){window.open(this._href);}else{window.open(this._href,this._target);}},trackNavigation:function(p){this._model.eventLogger.logEvent({type:(p&&p.loggingType)||this.getLoggingType(),targetUrl:this.getHref(),positionInList:this.getPositionInList(),executionId:this.getResultSetId()});},getResultSetId:function(){return'';},isEqualTo:function(o){if(!o){return false;}return this.getHref()==o.getHref();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchNavigationObjectForSinaNavTarget',['sap/ushell/renderers/fiori2/search/SearchNavigationObject'],function(S){"use strict";return S.extend("sap.ushell.renderers.fiori2.search.SearchNavigationObjectForSinaNavTarget",{constructor:function(s){S.prototype.constructor.apply(this,arguments);this._sinaNavigationTarget=s;this.setHref(s.targetUrl);this.setText(s.label);this.setTarget(s.target);this.sina=this._sinaNavigationTarget.sina;},performNavigation:function(p){this.trackNavigation();this._sinaNavigationTarget.performNavigation(p);},getResultSet:function(){return this.getResultSetItem().parent;},getResultSetItem:function(){var p=this._sinaNavigationTarget.parent;if(p instanceof this.sina.SearchResultSetItemAttribute){p=p.parent;}if(!(p instanceof this.sina.SearchResultSetItem)){throw'programm error';}if(p.parent instanceof this.sina.ObjectSuggestion){p=p.parent;}return p;},getResultSetId:function(){return this.getResultSet().id;},getPositionInList:function(){var r=this.getResultSet();var a=this.getResultSetItem();return r.items.indexOf(a);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchResultListFormatter',['sap/ushell/renderers/fiori2/search/SearchConfiguration','sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/SearchNavigationObject','sap/ushell/renderers/fiori2/search/SearchNavigationObjectForSinaNavTarget'],function(S,a,b,c){"use strict";var m=sap.ushell.renderers.fiori2.search.SearchResultListFormatter=function(){this.init.apply(this,arguments);};m.prototype={init:function(){},format:function(s,t,o){o=o||{};o.suppressHighlightedValues=o.suppressHighlightedValues||false;var d=s.sina;var l={};var f=[];var r=s.items;var i,z;for(i=0;i<r.length;i++){var e=r[i];var g={};var I=[];for(z=0;z<e.detailAttributes.length;z++){var h=e.detailAttributes[z];var k=h.value;switch(h.metadata.type){case d.AttributeType.ImageBlob:if(k&&k.trim().length>0){k="data:;base64,"+k;}case d.AttributeType.ImageUrl:g.imageUrl=k;g.imageFormat=h.metadata.format?h.metadata.format.toLowerCase():undefined;if(h.defaultNavigationTarget){g.imageNavigation=new c(h.defaultNavigationTarget);}break;case d.AttributeType.GeoJson:g.geoJson={value:k,label:(e.title||h.label)};break;case d.AttributeType.Group:var n=this._formatAttributeGroup(h,o,z);I.push(n);break;case d.AttributeType.Double:case d.AttributeType.Integer:case d.AttributeType.String:case d.AttributeType.Date:case d.AttributeType.Time:case d.AttributeType.Timestamp:var p=this._formatSingleAttribute(h,o,z);I.push(p);break;}}g.key=e.key;g.keystatus=e.keystatus;g.dataSource=e.dataSource;g.dataSourceName=e.dataSource.label;if(e.titleAttributes){var q,u,v;var w=[];for(z=0;z<e.titleAttributes.length;z++){q=e.titleAttributes[z];if(q.metadata.type===d.AttributeType.Group){u=this._formatAttributeGroup(q,o,z);}else{u=this._formatSingleAttribute(q,o,z);}v=u.value;w.push(v);}g.title=w.join(' ');}else{g.title=o.suppressHighlightedValues?e.title:e.titleHighlighted;}if(e.titleDescriptionAttributes){var x,y,A;var B=[];var C=[];for(z=0;z<e.titleDescriptionAttributes.length;z++){x=e.titleDescriptionAttributes[z];if(x.metadata.type===d.AttributeType.Group){y=this._formatAttributeGroup(x,o,z);}else{y=this._formatSingleAttribute(x,o,z);}A=y.value;B.push(A);C.push(y.name);}g.titleDescription=B.join(' ');g.titleDescriptionLabel=C.join(' ');}g.itemattributes=I;if(e.defaultNavigationTarget){g.titleNavigation=new c(e.defaultNavigationTarget);if(!g.title||g.title.length===0){g.title=e.defaultNavigationTarget.label;}}if(e.navigationTargets&&e.navigationTargets.length>0){g.navigationObjects=[];for(var j=0;j<e.navigationTargets.length;j++){var D=new c(e.navigationTargets[j]);D.setLoggingType('RESULT_LIST_ITEM_NAVIGATE_CONTEXT');g.navigationObjects.push(D);}}var E=l[e.dataSource.id]||{};l[e.dataSource.id]=E;g.layoutCache=E;g.selected=g.selected||false;g.expanded=g.expanded||false;var F={};this._formatResultForDocuments(e,F);this._formatResultForNotes(e,F);g.additionalParameters=F;g.positionInList=i;g.resultSetId=s.id;f.push(g);}return f;},_formatAttributeGroup:function(d,o,e){var f={};var g={};f.name=d.label;var h=false;var j=false;var p=d.metadata._private;var k,l;for(var i=0;i<d.attributes.length;i++){var n=d.attributes[i];var _=n.attribute;var q=n.metadata.nameInGroup;var r;if(_.metadata.type===_.sina.AttributeType.Group){r=this._formatAttributeGroup(_,o,e);}else{r=this._formatSingleAttribute(_,o,e);}if(p){if(p.parentAttribute===_.metadata){k=r;}else if(p.childAttribute===_.metadata){l=r;}}if(r.value!==undefined&&r.value.length>0){g[q]=r;h=h||r.whyfound;j=j||r.longtext!==undefined;}}f.value="";f.valueRaw=undefined;f.valueWithoutWhyfound="";f.whyfound=false;if(Object.keys(g).length>0){var s=true;if(p&&k&&l&&(p.isUnitOfMeasure||p.isCurrency||p.isDescription)){var t=k.value;var u=l.value;t=t!==undefined&&t.trim().length>0?t:undefined;u=u!==undefined&&u.trim().length>0?u:undefined;if(!(t&&u)){if(p.isUnitOfMeasure||p.isCurrency){if(t&&!u){f.value=k.value;f.valueRaw=k.valueRaw;f.valueWithoutWhyfound=k.valueWithoutWhyfound;s=false;}}else if(p.isDescription){var v=p.textArrangement;var w=d.sina;if(v===w.AttributeGroupTextArrangement.TextFirst){if(!t&&u){f.value=l.value;f.valueRaw=l.valueRaw;f.valueWithoutWhyfound=l.valueWithoutWhyfound;s=false;}}else if(v===w.AttributeGroupTextArrangement.TextLast){if(t&&!u){f.value=k.value;f.valueRaw=k.valueRaw;f.valueWithoutWhyfound=k.valueWithoutWhyfound;s=false;}}else if(v===w.AttributeGroupTextArrangement.TextOnly){if(!u){s=false;}}}}}if(s){f.value=this._formatBasedOnGroupTemplate(d.template,g,"value");f.valueRaw=this._formatBasedOnGroupTemplate(d.template,g,"valueRaw");f.valueWithoutWhyfound=this._formatBasedOnGroupTemplate(d.template,g,"valueWithoutWhyfound");}f.whyfound=h;}f.key=d.id;f.isTitle=false;f.isSortable=d.metadata.isSortable;f.attributeIndex=e;f.displayOrder=d.metadata.usage.Detail&&d.metadata.usage.Detail.displayOrder;if(j){f.longtext=f.value;}return f;},_formatSingleAttribute:function(d,o,i){var I={};var s=d.sina;I.name=d.label;I.valueRaw=d.value;I.value=o.suppressHighlightedValues?d.valueFormatted:d.valueHighlighted;I.valueWithoutWhyfound=d.valueFormatted;I.key=d.id;I.isTitle=false;I.isSortable=d.metadata.isSortable;I.attributeIndex=i;I.displayOrder=d.metadata.usage.Detail&&d.metadata.usage.Detail.displayOrder;I.whyfound=d.isHighlighted;if(d.defaultNavigationTarget){I.defaultNavigationTarget=new c(d.defaultNavigationTarget);}if(d.metadata.format&&(d.metadata.format===s.AttributeFormatType.MultilineText||d.metadata.format===s.AttributeFormatType.Longtext)){I.longtext=d.value;}return I;},_formatBasedOnGroupTemplate:function(t,d,v){if(!(t&&d&&v)){return"";}var e="",p=0;var f,r=/{\w+}/gi;while((f=r.exec(t))!==null){e+=t.substring(p,f.index);var g=f[0].slice(1,-1);e+=d[g]&&d[g][v]||"";p=r.lastIndex;}e+=t.substring(p);return e;},_formatResultForDocuments:function(r,d){var k='';d.isDocumentConnector=false;var j,e;for(j=0;j<r.detailAttributes.length;j++){e=r.detailAttributes[j];if(e.metadata.id==='FILE_PROPERTY'){d.isDocumentConnector=true;}if(e.metadata.isKey===true){if(k.length>0){k+=';';}k=k+e.metadata.id+'='+e.value;}}if(d.isDocumentConnector===true){var s=';o=sid('+r.dataSource.system+'.'+r.dataSource.client+')';var f=r.dataSource.id;d.imageUrl="/sap/opu/odata/SAP/ESH_SEARCH_SRV"+s+"/FileLoaderFiles(ConnectorId='"+f+"',FileType='ThumbNail',SelectionParameters='"+k+"')/$value";d.titleUrl="/sap/opu/odata/SAP/ESH_SEARCH_SRV"+s+"/FileLoaderFiles(ConnectorId='"+f+"',FileType='BinaryContent',SelectionParameters='"+k+"')/$value";var g="/sap/opu/odata/SAP/ESH_SEARCH_SRV"+s+"/FileLoaderFiles(ConnectorId='"+f+"',FileType='SUVFile',SelectionParameters='"+k+"')/$value";d.suvlink='/sap/bc/ui5_ui5/ui2/ushell/resources/sap/fileviewer/viewer/web/viewer.html?file='+encodeURIComponent(g);if(!r.navigationObjects){r.navigationObjects=[];}var n=new b({text:"Show Document",href:d.suvlink,target:"_blank"});r.navigationObjects.push(n);for(j=0;j<r.detailAttributes.length;j++){e=r.detailAttributes[j];if(e.id==="PHIO_ID_THUMBNAIL"&&e.value){d.containsThumbnail=true;}if(e.id==="PHIO_ID_SUV"&&e.value){d.containsSuvFile=true;}}}},_formatResultForNotes:function(r,d){}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchShellHelper',['sap/ushell/renderers/fiori2/search/controls/SearchFieldGroup','sap/ushell/renderers/fiori2/search/SearchHelper','sap/base/Log'],function(S,a,L){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchShellHelper');var m=sap.ushell.renderers.fiori2.search.SearchShellHelper={};var s="sapUshellShellShowSearchOverlay";var b;
m.injectSearchModel=function(_){b=b||_;};
jQuery.extend(m,{init:function(){var t=this;sap.ushell.Container.getService("Search").prefetch();sap.ui.require('sap/ushell/renderers/fiori2/search/SearchModel');t.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();t.oShellHeader=sap.ui.getCore().byId('shell-header');t.oSearchFieldGroup=new S("searchFieldInShell");t.oSearchFieldGroup.setModel(t.oModel);t.oShellHeader.setSearch(t.oSearchFieldGroup);t.setSearchState('COL');this.setSearchStateSync=this.setSearchState;this.setSearchState=a.delayedExecution(this.setSearchState,500);t.oSearchInput=t.oSearchFieldGroup.input;t.oSearchInput.setMaxSuggestionWidth("30rem");t.oSearchInput.setValue(t.oModel.getSearchBoxTerm());t.oSearchSelect=t.oSearchFieldGroup.select;var l=new sap.ui.core.InvisibleText("selectLabel",{text:sap.ushell.resources.i18n.getText("searchIn")});if(l){t.oSearchSelect.addAriaLabelledBy("selectLabel");}t.oSearchSelect.setTooltip(sap.ushell.resources.i18n.getText("searchInTooltip"));t.oSearchSelect.addEventDelegate({onAfterRendering:function(e){jQuery('#searchFieldInShell-select-icon').attr('title',sap.ushell.resources.i18n.getText("searchIn"));}},t.oSearchSelect);t.oSearchSelect.setTooltip(sap.ushell.resources.i18n.getText("searchIn"));t.oSearchSelect.attachChange(function(e){t.focusInputField({selectContent:true});});t.oSearchButton=t.oSearchFieldGroup.button;t.oSearchButton.bindProperty("type",{parts:[{path:'/searchButtonStatus'}],formatter:function(c){if(c==='search'){return sap.m.ButtonType.Emphasized;}return sap.m.ButtonType.Default;}});t.oSearchButton.attachPress(function(){t.handleClickSearchButton();});t.oSearchButton.addEventDelegate({onAfterRendering:function(){var c=jQuery("div.sapUshellShellSearchHidden").length===0;var d=t.oModel.getProperty("/searchButtonStatus")==="close";var $=jQuery(t.oSearchButton.getDomRef());if(c){if(d){$.attr("aria-pressed",true);}else{$.removeAttr("aria-pressed");}}else{$.attr("aria-pressed",false);}}});t.oSearchCancelButton=t.oSearchFieldGroup.cancelButton;t.oSearchCancelButton.attachPress(function(){t.setSearchState('COL');window.setTimeout(function(){sap.ui.getCore().byId('sf').focus();},1000);});this.oSearchFieldGroup.setCancelButtonActive(false);t.registerFocusHandler();jQuery(document).on('keydown',function(e){if(e.keyCode===27){e.preventDefault();if(a.isSearchAppActive()){return;}if(t.oSearchInput){if(t.oSearchInput.getValue()===""){t.setSearchState('COL');window.setTimeout(function(){sap.ui.getCore().byId('sf').focus();},1000);}else if(t.oSearchInput.getValue()===" "){t.oSearchInput.setValue("");}}}});sap.ui.getCore().getEventBus().subscribe("shell","searchCompLoaded",t.onSearchComponentLoaded,t);sap.ui.getCore().getEventBus().subscribe("allSearchFinished",t.onAllSearchFinished,t);sap.ui.getCore().byId('viewPortContainer').attachAfterNavigate(t.onAfterNavigate,t);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appComponentLoaded",function(){var o=sap.ui.getCore().byId('searchContainerResultsView');if(o&&o.oFocusHandler){o.oFocusHandler.setFocus();}});t.oShellHeader.attachSearchSizeChanged(this.sizeSearchFieldChanged.bind(this));},sizeSearchFieldChanged:function(e){var c=e.mParameters.remSize;var l=24;if(c<=l){this.oSearchSelect.setDisplayMode('icon');}else{this.oSearchSelect.setDisplayMode('default');}l=9;if(c<l){this.oSearchButton.setVisible(false);}else{this.oSearchButton.setVisible(true);}if(e.getParameter('isFullWidth')){this.oSearchFieldGroup.setCancelButtonActive(true);this.oSearchFieldGroup.addStyleClass('sapUshellSearchInputFullWidth');}else{this.oSearchFieldGroup.setCancelButtonActive(false);this.oSearchFieldGroup.removeStyleClass('sapUshellSearchInputFullWidth');}},sizeChanged:function(p){switch(p.name){case"Phone":this.oSearchFieldGroup.setCancelButtonActive(true);break;case"Tablet":this.oSearchFieldGroup.setCancelButtonActive(false);break;case"Desktop":this.oSearchFieldGroup.setCancelButtonActive(false);break;default:break;}},registerFocusHandler:function(){var r=true;if(!r){return;}var t=this;var c=t.oSearchInput.getModel();t.oSearchInput.addEventDelegate({onAfterRendering:function(){var i=jQuery(t.oSearchInput.getDomRef()).find('input')[0];var $=jQuery(i);$.on('focus',function(e){t.log('raw_in',document.activeElement);if(!t.isFocusHandlerActive){return;}t.setSearchState('EXP');});$.on('blur',function(e){t.log('raw_out',document.activeElement);if(!t.isFocusHandlerActive){return;}var p=t.oSearchSelect.getPicker();if(p&&p.oPopup&&p.oPopup.eOpenState==="OPENING"){return;}if(!a.isSearchAppActive()&&t.oSearchInput.getValue().length===0&&c.getDataSource()===c.getDefaultDataSource()){t.setSearchState('COL');}else{t.setSearchState('EXP_S');}});}});t.oSearchSelect.addEventDelegate({onAfterRendering:function(){var d=t.oSearchSelect.getDomRef();d.addEventListener('focus',function(e){t.log('raw_in_select',document.activeElement);if(!t.isFocusHandlerActive){return;}if(t.oShellHeader.getSearchState()==='EXP_S'&&!t.isNoSearchResultsScreen()){t.setSearchState('EXP_S',true);return;}t.setSearchState.abort();});d.addEventListener('blur',function(e){t.log('raw_out_select',document.activeElement);if(!t.isFocusHandlerActive){return;}var p=t.oSearchSelect.getPicker();if(p&&p.oPopup&&p.oPopup.eOpenState==="OPENING"){return;}if(!a.isSearchAppActive()&&t.oSearchInput.getValue().length===0&&c.getDataSource()===c.getDefaultDataSource()){t.setSearchState('COL');}else{t.setSearchState('EXP_S');}});}});t.oSearchButton.addEventDelegate({onAfterRendering:function(){var d=t.oSearchButton.getDomRef();d.addEventListener('focus',function(e){t.log('raw_in_button',document.activeElement);if(!t.isFocusHandlerActive){return;}t.setSearchState.abort();});d.addEventListener('blur',function(e){t.log('raw_out_button',document.activeElement);if(!t.isFocusHandlerActive){return;}if(!a.isSearchAppActive()&&t.oSearchInput.getValue().length===0&&c.getDataSource()===c.getDefaultDataSource()){t.setSearchState('COL');}else{t.setSearchState('EXP_S');}});}});this.enableFocusHandler(true);},enableFocusHandler:function(c){this.isFocusHandlerActive=c;if(!c&&this.setSearchState.abort){this.setSearchState.abort();}},isOverlayShown:function(){var c=this.oShellHeader.getShellLayoutControl();return c.hasStyleClass(s);},setSearchState:function(c,d){var e=sap.ui.getCore().byId('sf');if(!e){return;}if(typeof d==='undefined'){switch(c){case'EXP':d=true;break;case'EXP_S':d=false;break;case'COL':d=false;break;}if(this.isNoSearchResultsScreen()){d=false;}}if(sap.ui.getCore().byId('searchFieldInShell')===undefined){return;}if(this.oShellHeader.getSearchState()===c&&d===this.isOverlayShown()){return;}if(c==='COL'){this.enableFocusHandler(false);}else{this.enableFocusHandler(true);}this.log('set search state',c,document.activeElement);switch(c){case'COL':this.oModel.abortSuggestions();this.oShellHeader.setSearchState(c,35,d);this.oSearchCancelButton.setVisible(false);e.setVisible(true);break;case'EXP_S':this.oShellHeader.setSearchState(c,35,d);this.oSearchCancelButton.setVisible(true);e.setVisible(false);break;case'EXP':this.oShellHeader.setSearchState(c,35,d);this.oSearchCancelButton.setVisible(true);e.setVisible(false);this.focusInputField({selectContent:false});break;default:break;}},isNoSearchResultsScreen:function(){return a.isSearchAppActive()&&this.oModel.getProperty("/boCount")===0&&this.oModel.getProperty("/appCount")===0;},onShellSearchButtonPressed:function(e){if(sap.ui.getCore().byId('searchFieldInShell')===undefined){this.init();}else if(!a.isSearchAppActive()&&this.oShellHeader.getSearchState()==='COL'){this.resetModel();}this.setSearchState('EXP');},handleClickSearchButton:function(){if(this.oSearchInput.getValue()===""&&this.oModel.getDataSource()===this.oModel.getDefaultDataSource()){this.setSearchState('COL');window.setTimeout(function(){sap.ui.getCore().byId('sf').focus();},1000);}},focusInputField:function(o){o=o||{};var t=this;if(t.focusInputFieldTimeout){window.clearTimeout(t.focusInputFieldTimeout);t.focusInputFieldTimeout=null;}var d=function(r){if(!t.oSearchInput){return;}t.focusInputFieldTimeout=null;var c=t.oSearchInput.getDomRef();if(c&&jQuery(c).is(':visible')&&!sap.ui.getCore().getUIDirty()){if(t.oSearchInput.getEnabled()){t.oSearchInput.focus();if(o.selectContent){t.oSearchInput.selectText(0,9999);}return;}}if(r>0){t.focusInputFieldTimeout=window.setTimeout(function(){if(!t.oModel.getProperty('/initializingObjSearch')){r--;}d(r);},100);}};d(10);},getDefaultOpen:function(){return this.defaultOpen;},setDefaultOpen:function(d){this.defaultOpen=d;},getSearchInput:function(){return this.oSearchFieldGroup?this.oSearchFieldGroup.input:null;},onAfterNavigate:function(e){if(e.getParameter('toId')!=='shellPage-Action-search'&&e.getParameter('toId')!=='applicationShellPage-Action-search'&&e.getParameter('toId')!=='application-Action-search'){return;}var o=sap.ui.getCore().byId('searchContainerResultsView');if(o&&o.oFocusHandler){o.oFocusHandler.setFocus();}sap.ui.getCore().getEventBus().publish("searchLayoutChanged");},onAllSearchFinished:function(){this.oSearchInput.setValue(this.oModel.getSearchBoxTerm());this.log('search finished');this.setSearchState('EXP_S');},onSearchComponentLoaded:function(){if(!a.isSearchAppActive()){return;}this.setSearchState('EXP_S');},resetModel:function(){this.oSearchInput.setValue('');this.oModel.resetQuery();},logSwitch:true,log:function(){if(!this.logSwitch){return;}var l=function(e){var f=e.getAttribute('id');if(f){return f;}return'unknown_id';};var c=function(e){var r=[];for(var i=0;i<e.classList.length;++i){r.push(e.classList.item(i));}return r.join(',');};var p=['xx'];for(var i=0;i<arguments.length;++i){var d=arguments[i];if(d&&d.getAttribute){p.push(l(d)+','+c(d));continue;}if(d){p.push(d);continue;}p.push('undef');}L.debug(p.join(' | '),undefined,"sap.ushell.renderers.fiori2.search.SearchShellHelper");}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader',['./SearchModel','./SearchShellHelper'],function(S,a){"use strict";S.injectSearchShellHelper(a);a.injectSearchModel(S);return{SearchModel:S,SearchShellHelper:a};});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchTabStripsFormatter',[],function(){"use strict";var m={};
m.Node=function(){this.init.apply(this,arguments);};
m.Node.prototype={init:function(d,c){this.dataSource=d;this.children=[];this.parent=null;this.count=c;},equals:function(o){return this===o;},setCount:function(c){this.count=c;},getAncestors:function(){var a=[],c=this;while(c.parent){a.push(c.parent);c=c.parent;}return a;},getChildren:function(){var c=[];for(var i=0;i<this.children.length;++i){var a=this.children[i];if(a.unsureWhetherNodeisBelowRoot){continue;}c.push(a);}return c;},getChildrenSortedByCount:function(){var c=this.getChildren();c.sort(function(a,b){return b.count-a.count;});return c;},clearChildren:function(){for(var i=0;i<this.children.length;++i){var c=this.children[i];c.parent=null;}this.children=[];},appendNode:function(n){n.parent=this;this.children.push(n);},appendNodeAtIndex:function(n,i){n.parent=this;this.children.splice(i,0,n);},removeChildNode:function(n){var i=this.children.indexOf(n);if(i<0){return;}this.children.splice(i,1);n.parent=null;},hasChild:function(n){return this.children.indexOf(n)>-1;},hasSibling:function(n){if(this.equals(n)){return false;}var p=this.parent;if(!p){return false;}if(p.hasChild(n)){return true;}return false;},_findNode:function(d,r){if(this.dataSource===d){r.push(this);return;}for(var i=0;i<this.children.length;++i){var c=this.children[i];c._findNode(d,r);if(r.length>0){return;}}}};
m.Tree=function(){this.init.apply(this,arguments);};
m.Tree.prototype={init:function(r){this.rootNode=new m.Node(r,null);},reset:function(){this.rootNode=null;},invalidate:function(d){var n=this.findNode(d);if(!n){this.rootNode.children=[];this.rootNode.count=0;return;}var c=null;while(n){n.children=c?[c]:[];n.count=null;if(c){c.count=null;}c=n;n=n.parent;}},findNode:function(d){if(!this.rootNode){return null;}var r=[];this.rootNode._findNode(d,r);return r.length>0?r[0]:null;},hasChild:function(d,a){if(a.equals(this.rootNode.dataSource)){return false;}var n=this.findNode(d);if(!n){return false;}var b=this.findNode(a);if(!b){return false;}return n.hasChild(b);},hasSibling:function(d,a){if(a.equals(this.rootNode.dataSource)){return false;}var n=this.findNode(d);if(!n){return false;}var b=this.findNode(a);if(!b){return false;}return n.hasSibling(b);},updateFromPerspective:function(d,p,a){var c;if(p){c=p.totalCount;}var b=this.findNode(d);if(!b){b=new m.Node(d,c);b.unsureWhetherNodeisBelowRoot=true;this.rootNode.appendNode(b);}b.setCount(c);if(d===a.allDataSource){b.setCount(b.count+a.getProperty('/appCount'));}this.updateFromPerspectiveChildDataSources(b,p,a);this.updateAppTreeNode(d,a);},updateAppTreeNode:function(d,a){if(d!==a.allDataSource&&d!==a.appDataSource){return;}var b=this.findNode(a.appDataSource);if(b){this.rootNode.removeChildNode(b);}var c=a.getProperty('/appCount');if(c===0&&d!==a.appDataSource){return;}b=new m.Node(a.appDataSource,c);this.rootNode.appendNodeAtIndex(b,0);},updateFromPerspectiveChildDataSources:function(c,p,a){if(!p||c.dataSource===a.appDataSource){return;}var f=p.facets;if(f.length===0){return;}var d=f[0];if(d.type!==a.sinaNext.FacetType.DataSource){return;}var b=d.items;c.clearChildren();for(var i=0;i<b.length;++i){var e=b[i];var g=e.dataSource;var h=this.findNode(g);if(!h){h=new m.Node(g,e.measureValue);}if(h.unsureWhetherNodeisBelowRoot){h.unsureWhetherNodeisBelowRoot=false;this.rootNode.removeChildNode(h);}if(h.parent){h.parent.removeChildNode(h);}h.setCount(e.measureValue);c.appendNode(h);}}};
m.Formatter=function(){this.init.apply(this,arguments);};
m.Formatter.prototype={init:function(r){this.tree=new m.Tree(r);},format:function(d,p,a){this.tree.updateFromPerspective(d,p,a);var t=this.generateTabStrips(d,a);return t;},invalidate:function(d){if(this.tree){this.tree.invalidate(d);}},generateTabStrips:function(d,a){var t=9999;var i,c,b;var e={strips:[],selected:null};var n=this.tree.findNode(d);if(!n){if(d!==a.allDataSource){e.strips.push(a.allDataSource);}e.strips.push(d);e.selected=d;return e;}if(n.dataSource===a.allDataSource){e.strips.push(a.allDataSource);b=n.getChildrenSortedByCount();for(i=0;i<b.length&&e.strips.length<t;++i){c=b[i];e.strips.push(c.dataSource);}e.selected=a.allDataSource;return e;}if(n.parent===this.tree.rootNode&&!n.unsureWhetherNodeisBelowRoot){e.strips.push(a.allDataSource);var f=false;b=this.tree.rootNode.getChildrenSortedByCount();for(i=0;i<b.length;++i){c=b[i];if(f){if(e.strips.length>=t){break;}e.strips.push(c.dataSource);}else{if(e.strips.length<t-1||n===c){e.strips.push(c.dataSource);if(n===c){f=true;}}}}if(b.length===0){e.strips.push(n.dataSource);}e.selected=n.dataSource;return e;}e.strips.push(a.allDataSource);e.strips.push(n.dataSource);e.selected=n.dataSource;return e;}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchUrlParser',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/SearchUrlParserInav2'],function(S,a){"use strict";var b=function(){this.init.apply(this,arguments);};b.prototype={init:function(p){this.model=p.model;this.urlParserInav2=new a(p);},parse:function(){if(S.getHashFromUrl().indexOf('#Action-search')!==0){return jQuery.when(undefined);}if(!S.hasher.hasChanged()){return jQuery.when(undefined);}return this.model.initBusinessObjSearch().then(function(){var p=S.getUrlParameters();if($.isEmptyObject(p)){return undefined;}if(p.datasource||p.searchterm){return this.urlParserInav2.parseUrlParameters(p);}return this.parseUrlParameters(p);}.bind(this)).then(function(){this.model.setProperty("/searchTermPlaceholder",this.model.calculatePlaceholder());this.model.calculateSearchButtonStatus();this.model._firePerspectiveQuery(true);}.bind(this));},parseUrlParameters:function(p){if(p.top){var t=parseInt(p.top,10);this.model.setTop(t,false);}var f;if(p.filter){var c=JSON.parse(p.filter);try{f=this.model.sinaNext.parseFilterFromJson(c);}catch(e){f=this.model.sinaNext.createFilter();if(c.searchTerm){f.setSearchTerm(c.searchTerm);}sap.m.MessageBox.show(sap.ushell.resources.i18n.getText('searchUrlParsingErrorLong')+'\n('+e.toString()+')',{icon:sap.m.MessageBox.Icon.ERROR,title:sap.ushell.resources.i18n.getText('searchUrlParsingError'),actions:[sap.m.MessageBox.Action.OK]});}this.model.setProperty("/uiFilter",f);this.model.setDataSource(f.dataSource,false,false);}},render:function(){return this.renderFromParameters(this.model.getTop(),this.model.getProperty('/uiFilter'),true);},renderFromParameters:function(t,f,e){var h="#Action-search";h+="&/top="+t;if(e){h+="&filter="+encodeURIComponent(JSON.stringify(f.toJson()));}else{h+="&filter="+JSON.stringify(f.toJson());}return h;}};return b;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/SearchUrlParserInav2',['./SearchHelper'],function(S){"use strict";var a=function(){this.init.apply(this,arguments);};a.prototype={init:function(p){this.model=p.model;},parseUrlParameters:function(p){if(p.top){var t=parseInt(p.top,10);this.model.setTop(t,false);}var d=this.model.sinaNext.allDataSource;if(p.datasource){var b=JSON.parse(p.datasource);var c=b.ObjectName.value;switch(b.Type){case'Category':if(c==='$$ALL$$'){d=this.model.sinaNext.allDataSource;}else{d=this.model.sinaNext.getDataSource(c);if(!d){d=this.model.sinaNext._createDataSource({type:this.model.sinaNext.DataSourceType.Category,id:c,label:b.label,labelPlural:b.labelPlural});}}break;case'BusinessObject':d=this.model.sinaNext.getDataSource(c);if(!d){d=this.model.sinaNext.allDataSource;delete p.filter;sap.m.MessageBox.show(sap.ushell.resources.i18n.getText('searchUrlParsingErrorLong')+'\n(Unknow datasource '+c+')',{icon:sap.m.MessageBox.Icon.ERROR,title:sap.ushell.resources.i18n.getText('searchUrlParsingError'),actions:[sap.m.MessageBox.Action.OK]});}break;default:throw'unknown datasource type '+b.Type;}}return S.convertPromiseTojQueryDeferred(this.model.sinaNext.loadMetadata(d)).then(function(){var e={dataSource:d};var r;if(p.filter){var f=JSON.parse(p.filter);r=this.parseCondition(e,f);}else{r=this.model.sinaNext.createComplexCondition();}var g=this.model.sinaNext.createFilter({dataSource:d,searchTerm:p.searchterm,rootCondition:r});this.model.setProperty("/uiFilter",g);this.model.setDataSource(g.dataSource,false);}.bind(this));},parseCondition:function(c,b){if(b.conditions){return this.parseComplexCondition(c,b);}return this.parseSimpleCondition(c,b);},parseComplexCondition:function(c,b){var s=[];for(var i=0;i<b.conditions.length;++i){var d=b.conditions[i];s.push(this.parseCondition(c,d));}return this.model.sinaNext.createComplexCondition({operator:b.operator,conditions:s,valueLabel:b.label});},parseSimpleCondition:function(c,b){c.attribute=b.attribute;return this.model.sinaNext.createSimpleCondition({attribute:b.attribute,attributeLabel:b.attributeLabel,value:this.parseValue(c,b.value),valueLabel:b.valueLabel||b.label,operator:this.parseOperator(c,b.operator)});},parseValue:function(c,v){var m=c.dataSource.getAttributeMetadata(c.attribute);return this.model.sinaNext.inav2TypeConverter.ina2Sina(m.type,v);},parseOperator:function(c,o){switch(o){case'=':return this.model.sinaNext.ComparisonOperator.Eq;case'>':return this.model.sinaNext.ComparisonOperator.Gt;case'>=':return this.model.sinaNext.ComparisonOperator.Ge;case'<':return this.model.sinaNext.ComparisonOperator.Lt;case'<=':return this.model.sinaNext.ComparisonOperator.Le;default:throw'Unknown operator '+o;}}};return a;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/UXLog',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.UXLog');var m=sap.ushell.renderers.fiori2.search.UXLog={};jQuery.extend(m,{logLines:[],log:function(){this._log.apply(this,arguments);},_log:function(t){this.logLines.push(t);this._save();},_save:function(){jQuery.ajax({type:'PUT',url:'/uxlog.txt',data:this.logLines.join('\n')+'\n',contentType:'text/plain'});this.logLines=[];}});m._save=S.delayedExecution(m._save,2000);return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/appsearch/AppSearch',['sap/ushell/renderers/fiori2/search/appsearch/CatalogSearch','sap/ushell/renderers/fiori2/search/appsearch/TransactionSearch'],function(C,T){"use strict";var A=function(){this.init.apply(this,arguments);};A.prototype={init:function(p){this.catalogSearch=new C(p);this.transactionSearch=new T(p);this.searchProviders=[this.catalogSearch,this.transactionSearch];},prefetch:function(){for(var i=0;i<this.searchProviders.length;i++){var s=this.searchProviders[i];s.prefetch();}},search:function(q){var a=[];for(var i=0;i<this.searchProviders.length;i++){var s=this.searchProviders[i];a.push(s.search(q));}return jQuery.when.apply(null,a).then(function(){var b=arguments;var r={totalCount:0,tiles:[]};for(var i=0;i<b.length;i++){var c=b[i];r.totalCount+=c.totalCount;r.tiles.push.apply(r.tiles,c.tiles);}return r;});}};return A;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/appsearch/CatalogSearch',['sap/ushell/renderers/fiori2/search/appsearch/JsSearchFactory','sap/base/Log'],function(c,L){"use strict";var C=function(){this.init.apply(this,arguments);};C.prototype={init:function(p){this.launchPageService=sap.ushell.Container.getService("LaunchPage");this.optimizedAppSearch=p.optimizedAppSearch;this.searchEngines={};},prefetch:function(){return this._getTiles();},search:function(q){q.scope=q.scope||'allTiles';return this._getSearchEngine(q.scope).then(function(s){var a;try{a=s.search({searchFor:q.searchTerm,top:q.top,skip:q.skip});}catch(e){var b=new jQuery.Deferred();b.reject(e);return b;}var r=[];for(var i=0;i<a.results.length;++i){var d=a.results[i];var t=d.object;var h=d.highlighted.label;r.push(this._formatTile(t,h));}return{totalCount:a.totalCount,tiles:r};}.bind(this));},_getView:function(t){try{var a=t.tile.getContract('types');a.setType('tile');}catch(e){}var v=sap.ushell.Container.getService('LaunchPage').getCatalogTileView(t.tile);var b='app';if(t.tile.getTitle){b=t.tile.getTitle();}v.eventLoggingData={targetUrl:t.url,title:b};return v;},_getTiles:function(){var t=this;if(this.loadDeferred){return this.loadDeferred;}this.loadDeferred=this.launchPageService.getCatalogs().then(function(a){var b=[];for(var i=0;i<a.length;i++){b.push(this.launchPageService.getCatalogTiles(a[i]));}b.push(this._getPersonalizedGroupTiles());return jQuery.when.apply(jQuery,b).then(function(){var d=Array.prototype.slice.call(arguments);var a=d.slice(0,-1);var p=d.slice(-1);var f,g,h;try{h=[];return t._collectTilesOfCatalogs(a).then(function(r){f=[];for(var i=0;i<r.length;i++){f=f.concat(r[i]);}t._sortTiles(f);h.push.apply(h,f);h=t._removeDuplicateTiles(h);return t._collectTilesOfCatalogs(p);}).then(function(r){g=[];for(var j=0;j<r.length;j++){g=g.concat(r[j]);}t._sortTiles(g);h.push.apply(h,g);h=t._removeDuplicateTiles(h);t._sortTiles(h);return{catalogTiles:f,personalizedTiles:g,allTiles:h};});}catch(e){return jQuery.Deferred().reject(e);}});}.bind(this));return this.loadDeferred;},_getSearchEngine:function(s){return this._getTiles().then(function(t){var a=this.searchEngines[s];if(a){return a;}a=c.createJsSearch({objects:t[s],fields:['label','keywords']});this.searchEngines[s]=a;return a;}.bind(this));},_formatTile:function(t,h){var a=this;var r=jQuery.extend({},t);if(h){r.label=h;}r.type="catalog";r.getView=function(){return a._getView(this);};return r;},_isTileViewNeeded:function(t){if(this.optimizedAppSearch){return false;}return!this.launchPageService.getCatalogTilePreviewTitle(t);},_collectTilesOfCatalogs:function(a){var p=[];for(var i=0;i<a.length;i++){p.push(this._collectTilesOfCatalog(a[i]));}return jQuery.when.apply(null,p).then(function(){var t=[];for(var i=0;i<arguments.length;i++){if(arguments[i].length!==0){t.push(arguments[i]);}}return t;},function(e){});},_collectTilesOfCatalog:function(a){var p=[];for(var i=0;i<a.length;i++){p.push(this._getTileAsync(a[i]));}return jQuery.when.apply(null,p).then(function(){var t=[];for(var i=0;i<arguments.length;i++){if(arguments[i]!==null){t.push(arguments[i]);}}return t;},function(e){});},_getTileAsync:function(t){var p=new jQuery.Deferred();var a,b,k,d,s,f,i;try{a=null;if(this._isTileViewNeeded(t)){a=this.launchPageService.getCatalogTileView(t);}k=this.launchPageService.getCatalogTileKeywords(t);d=this.launchPageService.getCatalogTileTargetURL(t);b=this.launchPageService.getCatalogTilePreviewTitle(t)||this.launchPageService.getCatalogTileTitle(t);s=this.launchPageService.getCatalogTilePreviewSubtitle(t);f=this.launchPageService.getCatalogTileSize(t);i=this.launchPageService.getCatalogTilePreviewIcon(t)||"sap-icon://business-objects-experience";if(a){if(!a.destroy){var g=new Error('The tileview "'+b+'" with target url "'+d+'" does not implement mandatory function destroy!');g.name='Missing Impementation';throw g;}a.destroy();}if(t.getContract){var h=t.getContract("preview");if(h){h.setEnabled(false);}}if(!this._isValid(t)){p.resolve(null);}if(!d){p.resolve(null);}var l=b;if(s){l+=' - '+s;}p.resolve({tile:t,keywords:(k instanceof Array)?k.join(' '):k,url:d,label:l,title:b||'',subtitle:s||'',tooltip:b||'',icon:i,size:f});}catch(e){p.resolve(null);L.error(e);if(e.toString().indexOf('does not implement mandatory function destroy')>=0){throw e;}}return p;},_isValid:function(t){if(this.launchPageService.isTileIntentSupported){return this.launchPageService.isTileIntentSupported(t);}return true;},_getPersonalizedGroupTiles:function(){return this.launchPageService.getGroups().then(function(g){var r=[];for(var j=0;j<g.length;j++){var t=this.launchPageService.getGroupTiles(g[j])||[];r.push.apply(r,t);}return r;}.bind(this));},_calcKey:function(t){return t.title+'$$'+t.subtitle+'$$'+t.url+'$$'+t.icon;},_removeDuplicateTiles:function(t){var a={};var r=[];for(var i=0;i<t.length;++i){var b=t[i];var k=this._calcKey(b);if(a[k]){continue;}a[k]=b;r.push(b);}return r;},_sortTiles:function(t){t.sort(function(a,b){if(a.title.toUpperCase()<b.title.toUpperCase()){return-1;}if(a.title.toUpperCase()>b.title.toUpperCase()){return 1;}return 0;});}};return C;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/appsearch/JsSearch',[],function(){"use strict";return function JsSearch(o){var d=this;if(!o){throw new Error('You must specify search options');}if(!o.algorithm||!o.algorithm.id||!Array.isArray(o.algorithm.options)||typeof o.algorithm.options[0]!=='number'||typeof o.algorithm.options[1]!=='number'||typeof o.algorithm.options[2]!=='number'||typeof o.algorithm.options[3]!=='number'||typeof o.algorithm.options[4]!=='number'||typeof o.algorithm.options[5]!=='number'||typeof o.algorithm.options[6]!=='number'){throw new Error('You must specify a supported search algorithm with all options');}var e=_(o.algorithm.id,o.algorithm.options);if(e===undefined){throw new Error('You must specify a supported search algorithm');}var h=[];if(Array.isArray(o.fields)){o.fields.forEach(function(f){if(typeof f==='string'){h.push({field:f,weight:3});}});}else if(o.fields){if(Array.isArray(o.fields.groups)){var l=parseFloat(o.fields.scale);if(isNaN(l)){l=1;}else{l=Math.max(1,l);}o.fields.groups.forEach(function(g,i){var w=((o.fields.groups.length-1)-i)/(o.fields.groups.length-1)*(l-1)+1;if(Array.isArray(g)){g.forEach(function(f){if(typeof f==='string'){h.push({field:f,weight:w});}});}else if(typeof g==='string'){h.push({field:g,weight:w});}});}}if(h.length<1){throw new Error('You must specify fields to search in');}var n;var p=[];var q;this.setObjects=function(O){if(!Array.isArray(O)){throw new Error('You must give an array of objects');}q=O;n=undefined;};if(o.objects){this.setObjects(o.objects);}function u(s,m){var t=s;t=t.replace(/\[(\^?)(\\s)?a0\]/g,'[$1$2\\p{Letter}\\p{Number}]');t=t.replace(/\[(\^?)(\\s)?a\]/g,'[$1$2\\p{Letter}]');t=t.replace(/\[(\^?)(\\s)?0\]/g,'[$1$2\\p{Number}]');t=t.replace(/\[(\^?)(\\s)?a0\]/g,'[$1$2\\p{Number}]');t=t.replace(/\[\^\\p{Letter}\]/g,'(?:[\0-@\[-`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u0560\u0588-\u05CF\u05EB-\u05EF\u05F3-\u061F\u064B-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07C9\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u089F\u08B5\u08BE-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09EF\u09F2-\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B70\u0B72-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B-\u0C5F\u0C62-\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDD\u0CDF\u0CE2-\u0CF0\u0CF3-\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57-\u0D5E\u0D62-\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0EDB\u0EE0-\u0EFF\u0F01-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u1040-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16F0\u16F9-\u16FF\u170D\u1712-\u171F\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u181F\u1878-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u194F\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19FF\u1A17-\u1A1F\u1A55-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4C-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BFF\u1C24-\u1C4C\u1C50-\u1C59\u1C7E\u1C7F\u1C89-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u2182\u2185-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u3004\u3007-\u3030\u3036-\u303A\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u312F\u3130\u318F-\u319F\u31BB-\u31EF\u3200-\u33FF\u4DB6-\u4DFF\u9FEB-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA620-\uA629\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6E6-\uA716\uA720\uA721\uA789\uA78A\uA7AF\uA7B8-\uA7F6\uA802\uA806\uA80B\uA823-\uA83F\uA874-\uA881\uA8B4-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FE-\uA909\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9D0-\uA9DF\uA9E5\uA9F0-\uA9F9\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB66-\uAB6F\uABE3-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEFF\uDF20-\uDF2C\uDF41\uDF4A-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0-\uDFFF]|\uD801[\uDC9E-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE01-\uDE0F\uDE14\uDE18\uDE34-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE5-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC82\uDCB0-\uDCCF\uDCE9-\uDD02\uDD27-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDD9\uDDDB\uDDDD-\uDDFF\uDE12\uDE2C-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE7F\uDEAB-\uDEFF\uDF1A-\uDFFF]|\uD806[\uDC00-\uDC9F\uDCE0-\uDCFE\uDD00-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE84\uDE85\uDE8A-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC00-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD823-\uD82B\uD82D\uD82E\uD830-\uD834\uD836-\uD839\uD83C-\uD83F\uD87B-\uD87D\uD87F-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDEFF\uDF45-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2-\uDFFF]|\uD821[\uDFED-\uDFFF]|\uD822[\uDEF3-\uDFFF]|\uD82C[\uDD1F-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC-\uDFFF]|\uD83A[\uDCC5-\uDCFF\uDD44-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD869[\uDED7-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])');t=t.replace(/\[\^\\p{Number}\]/g,'(?:[\0-\/:-\xB1\xB4-\xB8\xBA\xBB\xBF-\u065F\u066A-\u06EF\u06FA-\u07BF\u07CA-\u0965\u0970-\u09E5\u09F0-\u09F3\u09FA-\u0A65\u0A70-\u0AE5\u0AF0-\u0B65\u0B70\u0B71\u0B78-\u0BE5\u0BF3-\u0C65\u0C70-\u0C77\u0C7F-\u0CE5\u0CF0-\u0D57\u0D5F-\u0D65\u0D79-\u0DE5\u0DF0-\u0E4F\u0E5A-\u0ECF\u0EDA-\u0F1F\u0F34-\u103F\u104A-\u108F\u109A-\u1368\u137D-\u16ED\u16F1-\u17DF\u17EA-\u17EF\u17FA-\u180F\u181A-\u1945\u1950-\u19CF\u19DB-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1B4F\u1B5A-\u1BAF\u1BBA-\u1C3F\u1C4A-\u1C4F\u1C5A-\u206F\u2071-\u2073\u207A-\u207F\u208A-\u214F\u2183\u2184\u218A-\u245F\u249C-\u24E9\u2500-\u2775\u2794-\u2CFC\u2CFE-\u3006\u3008-\u3020\u302A-\u3037\u303B-\u3191\u3196-\u321F\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\uA61F\uA62A-\uA6E5\uA6F0-\uA82F\uA836-\uA8CF\uA8DA-\uA8FF\uA90A-\uA9CF\uA9DA-\uA9EF\uA9FA-\uAA4F\uAA5A-\uABEF\uABFA-\uD7FF\uE000-\uFF0F\uFF1A-\uFFFF]|\uD800[\uDC00-\uDD06\uDD34-\uDD3F\uDD79-\uDD89\uDD8C-\uDEE0\uDEFC-\uDF1F\uDF24-\uDF40\uDF42-\uDF49\uDF4B-\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC00-\uDC9F\uDCAA-\uDFFF]|\uD802[\uDC00-\uDC57\uDC60-\uDC78\uDC80-\uDCA6\uDCB0-\uDCFA\uDD00-\uDD15\uDD1C-\uDDBB\uDDBE\uDDBF\uDDD0\uDDD1\uDE00-\uDE3F\uDE48-\uDE7C\uDE7F-\uDE9C\uDEA0-\uDEEA\uDEF0-\uDF57\uDF60-\uDF77\uDF80-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC00-\uDCF9\uDD00-\uDE5F\uDE7F-\uDFFF]|\uD804[\uDC00-\uDC51\uDC70-\uDCEF\uDCFA-\uDD35\uDD40-\uDDCF\uDDDA-\uDDE0\uDDF5-\uDEEF\uDEFA-\uDFFF]|[\uD805\uD807][\uDC00-\uDC4F\uDC5A-\uDCCF\uDCDA-\uDE4F\uDE5A-\uDEBF\uDECA-\uDF2F\uDF3C-\uDFFF]|\uD806[\uDC00-\uDCDF\uDCF3-\uDFFF]|[\uD808\uD80A-\uD819\uD81B-\uD833\uD836-\uD839\uD83B\uD83D-\uDBFF][\uDC00-\uDFFF]|\uD809[\uDC6F-\uDFFF]|\uD81A[\uDC00-\uDE5F\uDE6A-\uDF4F\uDF5A\uDF62-\uDFFF]|\uD834[\uDC00-\uDF5F\uDF72-\uDFFF]|\uD835[\uDC00-\uDFCD]|\uD83A[\uDC00-\uDCC6\uDCD0-\uDD4F\uDD5A-\uDFFF]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])');t=t.replace(/\[\^\\p{Letter}\\p{Number}\]/g,'(?:[\0-\/:-@\[-`\{-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u0560\u0588-\u05CF\u05EB-\u05EF\u05F3-\u061F\u064B-\u065F\u066A-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07BF\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u089F\u08B5\u08BE-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0965\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09E5\u09F2\u09F3\u09FA\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A65\u0A70\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AE5\u0AF0-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B65\u0B70\u0B78-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0BE5\u0BF3-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B-\u0C5F\u0C62-\u0C65\u0C70-\u0C77\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDD\u0CDF\u0CE2-\u0CE5\u0CF0\u0CF3-\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57\u0D62-\u0D65\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DE5\u0DF0-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F1F\u0F34-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u104A-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u1368\u137D-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1712-\u171F\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u17DF\u17EA-\u17EF\u17FA-\u180F\u181A-\u181F\u1878-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A17-\u1A1F\u1A55-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4C-\u1B4F\u1B5A-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BFF\u1C24-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u206F\u2072\u2073\u207A-\u207E\u208A-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A-\u245F\u249C-\u24E9\u2500-\u2775\u2794-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFC\u2CFE\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u312F\u3130\u318F-\u3191\u3196-\u319F\u31BB-\u31EF\u3200-\u321F\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DB6-\u4DFF\u9FEB-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6F0-\uA716\uA720\uA721\uA789\uA78A\uA7AF\uA7B8-\uA7F6\uA802\uA806\uA80B\uA823-\uA82F\uA836-\uA83F\uA874-\uA881\uA8B4-\uA8CF\uA8DA-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FE\uA8FF\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9DA-\uA9DF\uA9E5\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB66-\uAB6F\uABE3-\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD06\uDD34-\uDD3F\uDD79-\uDD89\uDD8C-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEE0\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC57\uDC77\uDC78\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE01-\uDE0F\uDE14\uDE18\uDE34-\uDE3F\uDE48-\uDE5F\uDE7F\uDEA0-\uDEBF\uDEC8\uDEE5-\uDEEA\uDEF0-\uDEFF\uDF36-\uDF3F\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD00-\uDE5F\uDE7F-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC51\uDC70-\uDC82\uDCB0-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDD02\uDD27-\uDD35\uDD40-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDCF\uDDDB\uDDDD-\uDDE0\uDDF5-\uDDFF\uDE12\uDE2C-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDEEF\uDEFA-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC4F\uDC5A-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEAB-\uDEBF\uDECA-\uDEFF\uDF1A-\uDF2F\uDF3C-\uDFFF]|\uD806[\uDC00-\uDC9F\uDCF3-\uDCFE\uDD00-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE84\uDE85\uDE8A-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC4F\uDC6D-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD4F\uDD5A-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD823-\uD82B\uD82D\uD82E\uD830-\uD833\uD836-\uD839\uD83D-\uD83F\uD87B-\uD87D\uD87F-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDEFF\uDF45-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2-\uDFFF]|\uD821[\uDFED-\uDFFF]|\uD822[\uDEF3-\uDFFF]|\uD82C[\uDD1F-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD834[\uDC00-\uDF5F\uDF72-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD83A[\uDCC5\uDCC6\uDCD0-\uDCFF\uDD44-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDFFF]|\uD869[\uDED7-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])');t=t.replace(/\[\^\\s\\p{Letter}\\p{Number}\]/g,'(?:[\0-\x08\x0E-\x1F!-\/:-@\[-`\{-\x9F\xA1-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u0560\u0588-\u05CF\u05EB-\u05EF\u05F3-\u061F\u064B-\u065F\u066A-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07BF\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u089F\u08B5\u08BE-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0965\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09E5\u09F2\u09F3\u09FA\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A65\u0A70\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AE5\u0AF0-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B65\u0B70\u0B78-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0BE5\u0BF3-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B-\u0C5F\u0C62-\u0C65\u0C70-\u0C77\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDD\u0CDF\u0CE2-\u0CE5\u0CF0\u0CF3-\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57\u0D62-\u0D65\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DE5\u0DF0-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F1F\u0F34-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u104A-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u1368\u137D-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1712-\u171F\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u17DF\u17EA-\u17EF\u17FA-\u180F\u181A-\u181F\u1878-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A17-\u1A1F\u1A55-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4C-\u1B4F\u1B5A-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BFF\u1C24-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u206F\u2072\u2073\u207A-\u207E\u208A-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A-\u245F\u249C-\u24E9\u2500-\u2775\u2794-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFC\u2CFE\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u312F\u3130\u318F-\u3191\u3196-\u319F\u31BB-\u31EF\u3200-\u321F\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DB6-\u4DFF\u9FEB-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6F0-\uA716\uA720\uA721\uA789\uA78A\uA7AF\uA7B8-\uA7F6\uA802\uA806\uA80B\uA823-\uA82F\uA836-\uA83F\uA874-\uA881\uA8B4-\uA8CF\uA8DA-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FE\uA8FF\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9DA-\uA9DF\uA9E5\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB66-\uAB6F\uABE3-\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD\uFEFE\uFF00-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD06\uDD34-\uDD3F\uDD79-\uDD89\uDD8C-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEE0\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC57\uDC77\uDC78\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE01-\uDE0F\uDE14\uDE18\uDE34-\uDE3F\uDE48-\uDE5F\uDE7F\uDEA0-\uDEBF\uDEC8\uDEE5-\uDEEA\uDEF0-\uDEFF\uDF36-\uDF3F\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD00-\uDE5F\uDE7F-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC51\uDC70-\uDC82\uDCB0-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDD02\uDD27-\uDD35\uDD40-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDCF\uDDDB\uDDDD-\uDDE0\uDDF5-\uDDFF\uDE12\uDE2C-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDEEF\uDEFA-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC4F\uDC5A-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEAB-\uDEBF\uDECA-\uDEFF\uDF1A-\uDF2F\uDF3C-\uDFFF]|\uD806[\uDC00-\uDC9F\uDCF3-\uDCFE\uDD00-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE84\uDE85\uDE8A-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC4F\uDC6D-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD4F\uDD5A-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD823-\uD82B\uD82D\uD82E\uD830-\uD833\uD836-\uD839\uD83D-\uD83F\uD87B-\uD87D\uD87F-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDEFF\uDF45-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2-\uDFFF]|\uD821[\uDFED-\uDFFF]|\uD822[\uDEF3-\uDFFF]|\uD82C[\uDD1F-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD834[\uDC00-\uDF5F\uDF72-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD83A[\uDCC5\uDCC6\uDCD0-\uDCFF\uDD44-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDFFF]|\uD869[\uDED7-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])');t=t.replace(/\[\\p{Letter}\]/g,'(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])');t=t.replace(/\[\\p{Number}\]/g,'(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE47\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDE60-\uDE7E]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD834[\uDF60-\uDF71]|\uD835[\uDFCE-\uDFFF]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83C[\uDD00-\uDD0C])');t=t.replace(/\[\\p{Letter}\\p{Number}\]/g,'(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u3192-\u3195\u31A0-\u31BA\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE40-\uDE47\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDCFF\uDE60-\uDE7E]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEC0-\uDEC9\uDF00-\uDF19\uDF30-\uDF3B]|\uD806[\uDCA0-\uDCF2\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDF60-\uDF71]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])');t=t.replace(/\[\\s\\p{Letter}\\p{Number}\]/g,'(?:[\t-\r 0-9A-Za-z\xA0\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2000-\u200A\u2028\u2029\u202F\u205F\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3000\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u3192-\u3195\u31A0-\u31BA\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE40-\uDE47\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDCFF\uDE60-\uDE7E]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEC0-\uDEC9\uDF00-\uDF19\uDF30-\uDF3B]|\uD806[\uDCA0-\uDCF2\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDF60-\uDF71]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])');if(t.match(/\\p/)){throw new Error('JsSearch internal bug - Cannot convert RegExp');}else{return new RegExp(t,(m||''));}}var v={AlphaNum_atBegin:u('^[a0]'),Alpha_atBegin:u('^[a]'),Num_atBegin:u('^[0]'),AlphaNum_atEnd:u('[a0]$'),Alpha_atEnd:u('[a]$'),Num_atEnd:u('[0]$')};var A={};A.highlightChar='\u000f';A.regExpfillOneCharacterGaps=u(A.highlightChar+'(?!'+A.highlightChar+')[^a0]'+A.highlightChar,'g');A.initBitmap=function(s){return s;};A.calcBitmap=function(s,b,r){var a;var m;while(s!==a&&(m=s.match(r))&&m[0].length){a=s;s=m[1]+Array(m[2].length+1).join(A.highlightChar)+m[3];}if(a===s){throw new Error('JsSearch internal bug - Highlighting did not change');}for(var i=s.length-1;i>=0;i--){if(s[i]===A.highlightChar){b=b.substr(0,i)+A.highlightChar+b.substr(i+1);}}return b;};A.applyBitmap=function(s,b){var a=false;if(!b){return undefined;}b=b.replace(A.regExpfillOneCharacterGaps,A.highlightChar+A.highlightChar+A.highlightChar);for(var i=b.length-1;i>=0;i--){if(b[i]===A.highlightChar&&!a){s=s.substr(0,i+1)+'</b>'+s.substr(i+1);a=true;}if(b[i]!==A.highlightChar&&a){s=s.substr(0,i+1)+'<b>'+s.substr(i+1);a=false;}}if(a){s='<b>'+s;}return s;};function _(a,g){var t={'contains-ranked':{compileSearchTerm:function(j){var k={original:j.normalize?j.normalize('NFC'):j,parsed:[],hasTrailingWhitespace:false};function m(w){return w.children[0].cOriginal;}function C(w){return w.children[w.children.length-1].cOriginal;}function D(c){if(c.match(v.Alpha_atEnd)){return'(|[^a].*)';}else if(c.match(v.Num_atEnd)){return'(|[^0].*)';}return'(.*)';}function E(a,c,f){return a.map(function(b,i){if(b.type!==c){if(b.children){b.children=E(b.children,c,f);return b;}return b;}return f(b,i,a[i-1],a[i+1]);});}k.hasTrailingWhitespace=(k.original.substr(-1)===' ');var a=k.original.replace(/\\\"/g,"\u0010").split('"');var b=[];for(var i=0;i<a.length;i++){a[i]=a[i].replace(/\u0010/g,'\\"');var F=a[i].split(' ').map(function(x){var c={type:'word',wOriginal:x,children:[]};return c;});F=F.filter(function(w){return w.wOriginal.length>0;});if(a[i].length){if(i%2){b.push({type:'phrase',children:F});}else{b=b.concat(F);}}}k.parsed=b;k.parsed=E(k.parsed,'word',function(w){var b=[];var c=false;var f=w.wOriginal.split('');for(var i=0;i<f.length;i++){if(c){c=false;b.push({type:'character',cOriginal:'\\'+f[i]});}else if(f[i]==='\\'){c=true;}else{b.push({type:'character',cOriginal:f[i]});}}w.children=b;return w;});k.parsed=E(k.parsed,'character',function(c,i,f,s){var r=c.cOriginal;if(r==='*'){r='[^\\s]*?';}else if(r==='?'){r='[^\\s]';}else if(r.match(/\\[*?"\\]/)){}else{r=r.replace(/[\[\]\/\{\}\(\)\+\.\\\^\$\|]/,"\\$&");r=r.replace(/a/i,'(?:a|ae)');r=r.replace(/o/i,'(?:o|oe)');r=r.replace(/u/i,'(?:u|ue)');r=r.replace(//i,'(?:ae|a)');r=r.replace(//i,'(?:oe|o)');r=r.replace(//i,'(?:ue|u)');r=r.replace(//i,'ss');r=r.replace(//i,'ae');r=r.replace(//i,'oe');if(r.normalize){r=r.normalize('NFKD');r=r.replace(/[\u0300-\u036f]/g,"");}}c.cRegExp=r;return c;});E(k.parsed,'word',function(w){w.containsWildcard=false;var f='';var s='';for(var i=0;i<w.children.length;i++){if(i>0&&w.children[i].cOriginal.match(v.AlphaNum_atBegin)&&w.children[i-1].cOriginal.match(v.AlphaNum_atBegin)){s+='[^a0]*';}if(i<w.children.length-1){f+=w.children[i].cRegExp;s+=w.children[i].cRegExp;}if(w.children[i].cOriginal==='*'||w.children[i].cOriginal==='?'){w.containsWildcard=true;}}var c=w.children[w.children.length-1];var x='';if(c.cOriginal==='*'){x='(?:[a]+(?=[^a]|$)|[0]+(?=[^0]|$)|[^\\s]*?|)';}else if(c.cOriginal==='?'){x='(?:[a](?=[^a]|$)|[0](?=[^0]|$)|[^\\sa0](?=[\\sa0]))';}else{x=c.cRegExp;}w.wRegExp=f+x;w.wRegExp2=s+x;return w;});var G=true;var H=k.parsed.map(function(s){var c=[];if(s.type==='phrase'){G=false;s.children=s.children.filter(function(y,i){return(i===s.children.length-1||!s.children[i].wOriginal.match(/^\*+$/)||!s.children[i+1].wOriginal.match(/^\*+$/));});s.children=s.children.filter(function(y,i){return((i!==0&&i!==s.children.length-1)||!y.wOriginal.match(/^\*+$/));});if(!s.children.length){c.push({r:'^',score:g[0],applyHighlighting:false});}else{var f='';E(s.children,'word',function(w,i,x,y){if(w.wOriginal!=='*'){if(i!==0&&x.wOriginal!=='*'&&(!y||y.wOriginal!=='*')){if(!(x.wOriginal.match(v.Alpha_atEnd)&&w.wOriginal.match(v.Alpha_atBegin))&&!(x.wOriginal.match(v.Num_atEnd)&&w.wOriginal.match(v.Num_atEnd))){f+='[^a0]*';}else{f+='[^a0]+';}}f+=w.wRegExp;}else if(C(x).match(v.Alpha_atBegin)&&m(y).match(v.Alpha_atBegin)){f+='(?:[^a]|[^a].*?[^a])';}else if(C(x).match(v.Num_atEnd)&&m(y).match(v.Num_atEnd)){f+='(?:[^0]|[^0].*?[^0])';}else if(C(x).match(v.Alpha_atBegin)&&m(y).match(v.Num_atEnd)){f+='.*?';}else if(C(x).match(v.Num_atEnd)&&m(y).match(v.Alpha_atBegin)){f+='.*?';}else if(C(x)==='*'&&y&&m(y).match(v.Alpha_atBegin)){f+='.*?';}else if(C(x)==='*'&&y&&m(y).match(v.Num_atEnd)){f+='.*?';}else{f+='(?:[^a0]|[^a0].*?[^a0])';}});var z=s.children[s.children.length-1];c.push({r:'^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)('+f+')'+D(z.wOriginal)+'$',score:g[0],applyHighlighting:true});}}else if(s.type==='word'){if(s.wOriginal.match('^\\*+$')){G=false;c.push({r:'^',score:g[0],applyHighlighting:false});}else{c.push({r:'^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)('+s.wRegExp+')'+D(s.wOriginal)+'$',score:g[0],applyHighlighting:true});c.push({r:'^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)('+s.wRegExp2+')'+D(s.wOriginal)+'$',score:g[1],applyHighlighting:true});}}if(s.type==='word'&&s.containsWildcard===false){c.push({r:'^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)('+s.wRegExp+')(.*?)$',score:g[2],applyHighlighting:true});c.push({r:'^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)('+s.wRegExp2+')(.*?)$',score:g[3],applyHighlighting:true});}if(s.type==='word'&&s.containsWildcard===false){c.push({r:'^(.*)('+s.wRegExp+')(.*?)$',score:g[4],applyHighlighting:true});c.push({r:'^(.*)('+s.wRegExp2+')(.*?)$',score:g[5],applyHighlighting:true});}for(var i=0;i<c.length;i++){c[i].r=u(c[i].r,'i');}return{type:'mandatory',r:c};});if(G&&k.parsed.length>1){var r=[];k.parsed.forEach(function(s){r.push(s.wRegExp);});H.push({type:'optional',r:[{r:u('^(.*[^a0]|.*[a](?=[0])|.*[0](?=[a])|)'+r.join('\\s+'),'i'),score:g[6],applyHighlighting:false}]});}return H;},compileTestTerm:function(b){var c={original:'',normalizationMap:[],useNormalizationMap:false,normalized:''};c.original=b.normalize?b.normalize('NFC'):b;c.normalized=c.original.split('').map(function(r){r=r.replace(//i,'ae');r=r.replace(//i,'oe');r=r.replace(//i,'ue');r=r.replace(//i,'ss');r=r.replace(//i,'ae');r=r.replace(//i,'oe');if(r.normalize){r=r.normalize('NFKD');r=r.replace(/[\u0300-\u036f]/g,"");}c.normalizationMap.push(r.length);if(r.length!==1){c.useNormalizationMap=true;}return r;}).join('');return c;}}};return t[a];}function B(s,t){var a=true;var b=0;var c=0;var f=0;var g={};var m={};var i,j,k;for(j in t){g[j]=A.initBitmap(t[j].normalized);}for(i=0;i<s.length;i++){var r=s[i];var w=false;var x=0;for(j in t){var y=false;var z=false;var C=0;for(k=0;k<r.r.length;k++){var D=r.r[k];if(t[j].normalized.match(D.r)){y=true;if(D.applyHighlighting){z=true;g[j]=A.calcBitmap(t[j].normalized,g[j],D.r);}C=Math.max(C,D.score*t[j].weight);}}x+=C;if(y){w=true;}if(z){m[j]=true;}}if(r.type==='mandatory'){f++;if(w){b+=x;}else{a=false;}}else{c+=x;}}var E=b/f+c;if(!a){E=-1;}for(j in m){if(t[j].useNormalizationMap){for(k=0;k<t[j].normalizationMap.length;k++){g[j]=g[j].substr(0,k+1)+g[j].substr(k+t[j].normalizationMap[k]);}}m[j]=A.applyBitmap(t[j].original,g[j]);}return{score:E,highlighted:m};}this.search=function(f){if(!Array.isArray(q)){throw new Error("You must specify objects to search in");}var s;if(typeof f==='string'){s=f;}if(f&&typeof f.searchFor==='string'){s=f.searchFor;}if(s===undefined){throw new Error("You must specify search terms");}var t=parseInt(f.top,10);var g=parseInt(f.skip,10);if(n!==s){var k=e.compileSearchTerm(s);p=[];for(var i=0;i<q.length;i++){var m={};var a;for(var j=0;j<h.length;j++){a=undefined;try{a=q[i][h[j].field];}finally{}if(typeof a==='string'){var c=e.compileTestTerm(a);c.weight=h[j].weight;m[h[j].field]=c;}}var b=B(k,m);if(b.score>-1){p.push({object:q[i],highlighted:b.highlighted,score:b.score});}}p=p.sort(function(a,b){return b.score-a.score;});if(!d.debug){p.forEach(function(a){delete a.score;});}n=s;}var r;if(isNaN(t)&&!isNaN(g)){r=p.slice(g);}else if(!isNaN(t)&&isNaN(g)){r=p.slice(0,t);}else if(!isNaN(t)&&!isNaN(g)){r=p.slice(g,g+t);}else{r=p;}return{totalCount:p.length,results:r};};};});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/appsearch/JsSearchFactory',['sap/ushell/renderers/fiori2/search/appsearch/JsSearch'],function(J){"use strict";return{createJsSearch:function(o){o.algorithm=o.algorithm||{id:'contains-ranked',options:[50,49,40,39,5,4,51]};return new J(o);}};});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/appsearch/TransactionSearch',["sap/ushell/renderers/fiori2/search/SearchHelper"],function(S){"use strict";var T=function(){this.init.apply(this,arguments);};T.prototype={init:function(p){var t=this;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(c){t.corssAppNavigator=c;});},prefetch:function(){},search:function(q){var t=this;var r={totalCount:0,tiles:[]};t.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();var a=t.oModel.getProperty('/appSearchDataSource');if(a===null){return r;}var s=t.oModel.sinaNext.createSearchQuery();s.skip=q.skip;s.top=q.top;s.filter.searchTerm=t._normalizeSearchTerm(q.searchTerm);s.filter.dataSource=a;return S.convertPromiseTojQueryDeferred(t.oModel.sinaNext.provider.executeSearchQuery(s)).then(function(b){r.totalCount=b.totalCount;return jQuery.when.apply(null,jQuery.map(b.items,this._formatTileAsync.bind(this)));}.bind(this)).then(function(){r.tiles=[].slice.call(arguments);return r;});},_getView:function(t){var v=new sap.m.GenericTile({header:t.title,subheader:t.subtitle,tileContent:new sap.m.TileContent({content:new sap.m.ImageContent({src:t.icon}),footer:sap.ushell.resources.i18n.getText("transactionText")})});if(t.isUshellSupported===false&&t.url.length===0){v.attachPress(function(){sap.m.MessageBox.information(sap.ushell.resources.i18n.getText("NavigationUnsupported"),{actions:[sap.m.MessageBox.Action.OK]});});}else{v.attachPress(function(){window.open(t.url,"_target");});}v.eventLoggingData={targetUrl:t.url,title:t.title};return v;},_formatTileAsync:function(i){var t=this;var a={};var c=t._getTcode(i).value;var b=t._getTcode(i).valueHighlighted;var d=t._getTitle(i).value;var e=t._getTitle(i).valueHighlighted+" - "+b;var u=t._getUshellUrl(i);var f=t._getBackendUrl(i);a={type:"transaction",icon:"sap-icon://action",title:d,label:e,subtitle:c,isUshellSupported:false,url:"",getView:function(){return t._getView(this);}};return t.corssAppNavigator.isIntentSupported([u]).then(function(g){a.isUshellSupported=g[u].supported;if(a.isUshellSupported){a.url=u;}else{a.url=f;}return a;},function(g){a.url=f;return jQuery.resolve(a);});},_normalizeSearchTerm:function(s){if(s==="*"){return s;}var f="";s=s.replace('*',' ');var a=s.split(' ');a.forEach(function(e){e=" *"+e+"* ";f=f+e;});return f;},_getTitle:function(a){var b=a.detailAttributes;var t={value:"",valueHighlighted:""};for(var i=0;i<b.length;i++){if(b[i].id==="TTEXT"){t.value=b[i].value||sap.ushell.resources.i18n.getText("transactionText");t.valueHighlighted=b[i].valueHighlighted||t.value;break;}}return t;},_getTcode:function(a){var b=a.titleAttributes;var t={value:"",valueHighlighted:""};for(var i=0;i<b.length;i++){if(b[i].id==="TCODE"){t.value=b[i].value;t.valueHighlighted=b[i].valueHighlighted||t.value;break;}}return t;},_getUshellUrl:function(i){var t=this;var s="";var a="";if(this.oModel.sinaNext.provider.serverInfo){s="sap-system="+t.oModel.sinaNext.provider.serverInfo.SystemId;}if(t._getTcode(i)!==""){a="&sap-ui2-tcode="+t._getTcode(i).value;}return"#Shell-startGUI?"+s+a;},_getBackendUrl:function(i){var t=this;var u="";if(this.oModel.sinaNext.provider.serverInfo){var h=t.oModel.sinaNext.provider.serverInfo.URL;var p=t.oModel.sinaNext.provider.serverInfo.Port;var c=t.oModel.sinaNext.provider.serverInfo.Client;var a=t._getTcode(i).value;if(h&&p&&c&&a.length!==""){u=h+":"+p+"/sap/bc/gui/sap/its/webgui/?sap-client="+c+"&~transaction="+a;}}return u;}};return T;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/App.controller',['sap/m/MessageToast','sap/ushell/renderers/fiori2/search/SearchShellHelper'],function(M,S){"use strict";return sap.ui.controller("sap.ushell.renderers.fiori2.search.container.App",{onInit:function(){this.oShellNavigation=sap.ushell.Container.getService("ShellNavigation");this.oShellNavigation.hashChanger.attachEvent("hashChanged",this.hashChanged);if(S.oSearchFieldGroup===undefined){S.init();}S.setSearchState('EXP_S');},hashChanged:function(e){var m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.parseURL();},onExit:function(){this.oShellNavigation.hashChanger.detachEvent("hashChanged",this.hashChanged);if(sap.ui.getCore().byId('searchContainerResultsView')&&sap.ui.getCore().byId('searchContainerResultsView').oTablePersoController&&sap.ui.getCore().byId('searchContainerResultsView').oTablePersoController.getTablePersoDialog()){sap.ui.getCore().byId('searchContainerResultsView').oTablePersoController.getTablePersoDialog().destroy();}if(S.getDefaultOpen()!==true){S.setSearchStateSync('COL');}else{S.setSearchState('EXP');}if(this.oView.oPage.oFacetDialog){this.oView.oPage.oFacetDialog.destroy();}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/App.view',['sap/ushell/renderers/fiori2/search/SearchModel','sap/ushell/renderers/fiori2/search/SearchShellHelper','sap/m/Bar','sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/controls/SearchFilterBar'],function(S,a,B,b,c){"use strict";return sap.ui.jsview("sap.ushell.renderers.fiori2.search.container.App",{createContent:function(){var t=this;if(!this.oModel){this.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();}this.setModel(sap.ushell.resources.i18nModel,"i18n");this.oSearchResults=sap.ui.view({id:"searchContainerResultsView",tooltip:"{i18n>searchResultsView_tooltip}",viewName:"sap.ushell.renderers.fiori2.search.container.Search",type:sap.ui.core.mvc.ViewType.JS});this.oSearchResults.setModel(t.oModel);this.oSearchResults.setAppView(t);var s=new sap.m.Bar({contentLeft:[t.oSearchResults.assembleFilterButton(),t.oSearchResults.assembleDataSourceTapStrips()],contentRight:t.oSearchResults.assembleSearchToolbar()});s.addStyleClass('sapUshellSearchBar');var f=new sap.ushell.renderers.fiori2.search.controls.SearchFilterBar({visible:{parts:[{path:'/facetVisibility'},{path:'/uiFilter/rootCondition'}],formatter:function(d,r){if(!d&&r&&r.hasFilters()){return true;}return false;}}});this.oModel.parseURL();this.oPage=this.pageFactory("searchPage",this.oSearchResults,s,f);this.oSearchResults.reorgTabBarSequence();this.oPage.addEventDelegate({onAfterRendering:function(e){window.onbeforeunload=function(){t.oModel.eventLogger.logEvent({type:t.oModel.eventLogger.LEAVE_PAGE});};}});return this.oPage;},beforeExit:function(){},pageFactory:function(i,C,h,s){var t=this;var p=new sap.m.Page({id:i,customHeader:h,subHeader:s,content:[C],enableScrolling:true,showFooter:{parts:['/multiSelectionAvailable','/multiSelectionActions','/errors/length'],formatter:function(m,f,n){return m||n>0;}},showHeader:true,showSubHeader:{parts:[{path:'/facetVisibility'},{path:'/uiFilter/rootCondition'}],formatter:function(f,r){if(!f&&r&&r.hasFilters()){return true;}return false;}}});p.setModel(t.oModel);var e=["onAfterHide","onAfterShow","onBeforeFirstShow","onBeforeHide","onBeforeShow"];var d={};t.createFooter(p);jQuery.each(e,function(I,E){d[E]=jQuery.proxy(function(f){jQuery.each(this.getContent(),function(I,C){C._handleEvent(f);});},p);});p.addEventDelegate(d);if(!sap.ui.Device.system.desktop){p._bUseIScroll=true;}return p;},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.container.App";},createFooter:function(p){var t=this;if(jQuery.device.is.phone){return;}var m=new sap.m.ToggleButton({icon:"sap-icon://multi-select",tooltip:sap.ushell.resources.i18n.getText("toggleSelectionModeBtn"),press:function(){var d=t.oBar.getContent();var i,f;if(this.getPressed()){t.oSearchResults.resultList.enableSelectionMode();t.oModel.setProperty("/multiSelectionEnabled",true);for(i=0;i<d.length;i++){f=d[i];if(f.hasStyleClass("sapUshellSearchResultList-multiSelectionActionButton")){t.oBar.removeContent(f);}}var g=t.oModel.getDataSource();var h=t.oModel.config.getDataSourceConfig(g);var s=new h.searchResultListSelectionHandlerControl();var k=s.actionsForDataSource();t.oModel.setProperty("/multiSelectionActions",k);for(i=0;i<k.length;i++){var l=k[i];var n=new sap.m.Button({text:l.text,press:function(){var r=t.oModel.getProperty("/results");var j=[];for(var i=0;i<r.length;i++){var q=r[i];if(q.selected){j.push(q);}}l.action(j);},visible:{parts:[{path:'/multiSelectionEnabled'}],mode:sap.ui.model.BindingMode.OneWay}});n.setModel(t.oModel);n.addStyleClass("sapUshellSearchResultList-multiSelectionActionButton");t.oBar.insertContent(n,2);}}else{var o=t.oSearchResults.resultList.disableSelectionMode();o.done(function(){t.oModel.setProperty("/multiSelectionEnabled",false);t.oModel.setProperty("/multiSelectionActions",undefined);var r=t.oModel.getProperty("/boResults");if(r){for(var j=0;j<r.length;j++){var q=r[j];q.selected=false;}}for(i=0;i<d.length;i++){f=d[i];if(f.hasStyleClass("sapUshellSearchResultList-multiSelectionActionButton")){t.oBar.removeContent(f);}}});}},visible:{parts:[{path:'/multiSelectionAvailable'}],mode:sap.ui.model.BindingMode.OneWay}});m.setModel(this.oModel);m.addStyleClass("sapUshellSearchResultList-toggleMultiSelectionButton");var e=new sap.m.MessagePopover({placement:"Top"});e.setModel(this.oModel);t.oModel.setProperty("/errorPopoverControlId",e.getId());e.bindAggregation("items","/errors",function(i,C){var f=new sap.m.MessagePopoverItem({title:"{title}",description:"{description}"});switch(C.oModel.getProperty(C.sPath).type.toLowerCase()){case"error":f.setType(sap.ui.core.MessageType.Error);break;case"warning":f.setType(sap.ui.core.MessageType.Warning);break;default:f.setType(sap.ui.core.MessageType.Information);}return f;});var E=new sap.m.Button("searchErrorButton",{icon:sap.ui.core.IconPool.getIconURI("alert"),text:{parts:[{path:'/errors/length'}],formatter:function(l){return l;}},visible:{parts:[{path:'/errors/length'}],formatter:function(l){return l>0;},mode:sap.ui.model.BindingMode.OneWay},type:sap.m.ButtonType.Emphasized,tooltip:sap.ushell.resources.i18n.getText('errorBtn'),press:function(){e.setVisible(true);e.openBy(E);}});E.addDelegate({onAfterRendering:function(){if(!t.oModel.getProperty('/isErrorPopovered')){E.firePress();t.oModel.setProperty('/isErrorPopovered',true);}}});E.setLayoutData(new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow}));m.setLayoutData(new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow}));var d=[E,new sap.m.ToolbarSpacer(),m];t.oBar=new sap.m.OverflowToolbar({content:d}).addStyleClass("MyBar");p.setFooter(t.oBar);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/Component',['sap/ui/core/UIComponent'],function(U){"use strict";return U.extend("sap.ushell.renderers.fiori2.search.container.Component",{metadata:{version:"1.74.0",library:"sap.ushell.renderers.fiori2.search.container",includes:[],dependencies:{libs:["sap.m"],components:[]},config:{title:sap.ushell.resources.i18n.getText("searchAppTitle"),compactContentDensity:true,cozyContentDensity:true}},createContent:function(){return sap.ui.view({id:"searchContainerApp",viewName:"sap.ushell.renderers.fiori2.search.container.App",type:sap.ui.core.mvc.ViewType.JS});}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/ComponentControl',['sap/ushell/renderers/fiori2/search/controls/SearchFieldGroup','sap/ushell/renderers/fiori2/search/controls/SearchFilterBar'],function(S,a){"use strict";var m=sap.ushell.renderers.fiori2.search.container.ComponentControl={};jQuery.extend(m,{init:function(){this.oSearchFieldGroup=new S("searchFieldInShell");this.oSearchResults=sap.ui.view({id:"searchContainerResultsView",viewName:"sap.ushell.renderers.fiori2.search.container.Search",type:sap.ui.core.mvc.ViewType.JS});this.oSearchBar=new sap.m.Bar({visible:{parts:[{path:'/count'},{path:'/facetVisibility'}],formatter:function(c,f){if(f){return c!==0;}return c!==0;}},contentLeft:[this.oSearchResults.assembleFilterButton(),this.oSearchResults.assembleDataSourceTapStrips()],contentRight:this.oSearchResults.assembleSearchToolbar(true)});this.oSearchBar.addStyleClass('sapUshellSearchBar');this.oFilterBar=new sap.ushell.renderers.fiori2.search.controls.SearchFilterBar({visible:{parts:[{path:'/facetVisibility'},{path:'/uiFilter/rootCondition'}],formatter:function(f,r){if(!f&&r&&r.hasFilters()){return true;}return false;}}});this.oSearchPage=new sap.m.Page({id:'searchPage',customHeader:this.oSearchBar,subHeader:this.oFilterBar,content:[this.oSearchResults],enableScrolling:true,showFooter:{parts:['/errors/length'],formatter:function(n){return n>0;}},showHeader:true,showSubHeader:{parts:[{path:'/facetVisibility'},{path:'/uiFilter/rootCondition'}],formatter:function(f,r){if(!f&&r&&r.hasFilters()){return true;}return false;}}});},createFooter:function(p){var t=this;t.oModel=p.getModel();if(jQuery.device.is.phone){return;}var e=new sap.m.MessagePopover({placement:"Top"});e.setModel(t.oModel);t.oModel.setProperty("/errorPopoverControlId",e.getId());e.bindAggregation("items","/errors",function(i,C){var b=new sap.m.MessagePopoverItem({title:"{title}",description:"{description}"});switch(C.oModel.getProperty(C.sPath).type.toLowerCase()){case"error":b.setType(sap.ui.core.MessageType.Error);break;case"warning":b.setType(sap.ui.core.MessageType.Warning);break;default:b.setType(sap.ui.core.MessageType.Information);}return b;});var E=new sap.m.Button("searchErrorButton",{icon:sap.ui.core.IconPool.getIconURI("alert"),text:{parts:[{path:'/errors/length'}],formatter:function(l){return l;}},visible:{parts:[{path:'/errors/length'}],formatter:function(l){return l>0;},mode:sap.ui.model.BindingMode.OneWay},type:sap.m.ButtonType.Emphasized,tooltip:sap.ushell.resources.i18n.getText('errorBtn'),press:function(){e.setVisible(true);e.openBy(E);}});E.addDelegate({onAfterRendering:function(){if(!t.oModel.getProperty('/isErrorPopovered')){E.firePress();t.oModel.setProperty('/isErrorPopovered',true);}}});E.setLayoutData(new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow}));var c=[E];t.oBar=new sap.m.OverflowToolbar({content:c}).addStyleClass("MyBar");p.setFooter(t.oBar);}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/ComponentIndexScript',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.ComponentIndexScript');sap.ui.getCore().attachInit(function(){sap.ui.require(['sap/ushell/renderers/fiori2/search/container/ComponentService'],function(C){C.init();sap.ui.require(['sap/ushell/renderers/fiori2/search/personalization/PersonalizationStorage','sap/ushell/renderers/fiori2/search/SearchModel','sap/ushell/renderers/fiori2/search/container/ComponentControl'],function(P,S,a){P.getInstance();if(!this.oModel){this.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();}a.init();this.oSearchFieldGroup=a.oSearchFieldGroup;this.oSearchFieldGroup.setCancelButtonActive(false);this.oSearchFieldGroup.setModel(this.oModel);this.oSearchFieldGroup.addStyleClass('sapSearchFieldGroup');this.oSearchBar=new sap.ui.layout.HorizontalLayout();this.oSearchBar.addContent(this.oSearchFieldGroup);this.oSearchBar.addStyleClass('sapSearchBar');this.oSearchBar.placeAt("content","first");});});});var r=function(){if(window.location.hash.indexOf("#Action-search")===0){window.location.href=window.location.origin+window.location.pathname.slice(0,window.location.pathname.indexOf('/sap/ushell/renderers/fiori2/search/container/'))+"/sap/ushell/renderers/fiori2/search/container/Component.html"+window.location.search+window.location.hash;}};$(window).bind('hashchange',function(){r();});$(document).ready(function(){r();});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/ComponentScript',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.ComponentScript');if(!window.location.hash){window.location.hash="#Action-search&/searchterm=*";}sap.ui.getCore().attachInit(function(){sap.ui.require(['sap/ushell/renderers/fiori2/search/container/ComponentService'],function(C){C.init();sap.ui.require(['sap/ushell/renderers/fiori2/search/personalization/PersonalizationStorage','sap/ushell/renderers/fiori2/search/SearchModel','sap/ushell/renderers/fiori2/search/container/ComponentControl'],function(P,S,a){P.getInstance();if(!this.oModel){this.oModel=sap.ushell.renderers.fiori2.search.getModelSingleton();}this.oModel.searchUrlParser.parse().then(function(){a.init();this.oSearchFieldGroup=a.oSearchFieldGroup;this.oSearchFieldGroup.setCancelButtonActive(false);this.oSearchFieldGroup.setModel(this.oModel);this.oSearchFieldGroup.addStyleClass('sapSearchFieldGroup');this.oSearchFieldGroup.input.setValue(this.oModel.getSearchBoxTerm());this.oLogo=new sap.m.Image({src:'/logo.png',press:function(){window.location='index.html';}});this.oLogout=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("log"),press:function(){window.location='index.html';}}).addStyleClass('sapSearchLogout');var l=sap.ui.getCore().byId("logoutLabel");if(!l){l=new sap.ui.core.InvisibleText("logoutLabel",{text:sap.ushell.resources.i18n.getText("logoutBtn_title")});}this.oLogout.addAriaLabelledBy("logoutLabel");this.oSearchBar=new sap.ui.layout.HorizontalLayout();this.oSearchBar.addContent(this.oLogo);this.oSearchBar.addContent(this.oSearchFieldGroup);this.oSearchBar.addContent(this.oLogout);this.oSearchBar.addStyleClass('sapSearchBar');this.oSearchBar.placeAt("content","first");this.oSearchPage=a.oSearchPage;this.oSearchPage.setModel(this.oModel);this.oSearchPage.setModel(sap.ushell.resources.i18nModel,"i18n");this.oSearchPage.placeAt("content","last");this.oSearchPage.addStyleClass('sapSearchPage');a.createFooter(this.oSearchPage);}.bind(this));});});});$(window).bind('hashchange',function(){if(this.oModel){this.oModel.parseURL();this.oSearchFieldGroup.input.setValue(this.oModel.getSearchBoxTerm());}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/ComponentService',["sap/ushell/renderers/fiori2/search/SearchConfiguration","jquery.sap.storage"],function(S){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.container.ComponentService');var m=sap.ushell.renderers.fiori2.search.container.ComponentService={};jQuery.extend(m,{init:function(){sap.ushell.Container={getService:function(n){if(n==="Search"){return{queryApplications:function(p){return jQuery.when().then(function(){return{totalResults:0,searchTerm:p.searchTerm,getElements:function(){return[];}};});}};}else if(n==="URLParsing"){return{parseParameters:function(s){s=s.substr(1);var r={};var p=s.split("&");for(var i=0;i<p.length;i++){var b=p[i].split("=");if(!b[1]){b[1]="";}r[b[0]]=[b[1]];}return r;},splitHash:function(h){var r={};r.appSpecificRoute=h.substr(14);return r;}};}},getLogonSystem:function(n){return{getName:function(){return;},getClient:function(){return;}};}};sap.ushell.resources={};var u=navigator.language||navigator.userLanguage;var a=sap.ui.require.toUrl("sap/ushell/renderers/fiori2/resources/resources.properties");sap.ushell.resources.i18nModel=new sap.ui.model.resource.ResourceModel({bundleUrl:a,bundleLocale:u});sap.ushell.resources.i18n=sap.ushell.resources.i18nModel.getResourceBundle();}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/Search.controller',["sap/ushell/renderers/fiori2/search/SearchModel"],function(S){"use strict";return sap.ui.controller("sap.ushell.renderers.fiori2.search.container.Search",{onInit:function(){var t=this;sap.ui.getCore().getEventBus().subscribe("allSearchStarted",t.getView().onAllSearchStarted,t.getView());sap.ui.getCore().getEventBus().subscribe("allSearchFinished",t.getView().onAllSearchFinished,t.getView());},onExit:function(){var t=this;sap.ui.getCore().getEventBus().unsubscribe("allSearchStarted",t.getView().onAllSearchStarted,t.getView());sap.ui.getCore().getEventBus().unsubscribe("allSearchFinished",t.getView().onAllSearchFinished,t.getView());}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/container/Search.view',['sap/ushell/renderers/fiori2/search/controls/SearchLayout','sap/ushell/renderers/fiori2/search/controls/SearchResultListContainer','sap/ushell/renderers/fiori2/search/controls/SearchResultList','sap/ushell/renderers/fiori2/search/controls/SearchResultTable','sap/ushell/renderers/fiori2/search/controls/SearchSpreadsheet','sap/ushell/renderers/fiori2/search/controls/SearchNoResultScreen','sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/controls/SearchLabel','sap/ushell/renderers/fiori2/search/controls/SearchLink','sap/ushell/renderers/fiori2/search/controls/SearchResultMap','sap/ushell/renderers/fiori2/search/controls/SearchResultListItem','sap/ushell/renderers/fiori2/search/controls/CustomSearchResultListItem','sap/ushell/renderers/fiori2/search/controls/SearchFacetFilter','sap/ushell/renderers/fiori2/search/controls/DivContainer','sap/ushell/renderers/fiori2/search/controls/SearchTilesContainer','sap/ushell/renderers/fiori2/search/controls/SearchFilterBar','sap/ushell/services/Personalization','sap/m/TablePersoController','sap/ui/vbm/AnalyticMap','sap/ui/vbm/Spot','sap/m/BusyDialog'],function(S,a,b,c,d,f,g,h,j,k,l,C){"use strict";return sap.ui.jsview("sap.ushell.renderers.fiori2.search.container.Search",{createContent:function(o){var t=this;t.totalCountHiddenElement=t.assembleCountHiddenElement();t.centerArea=t.assembleCenterArea();var r=new a({centerArea:t.centerArea,totalCountBar:t.assembleCountLabel(),noResultScreen:new f({searchBoxTerm:{parts:[{path:'/queryFilter/searchTerm'}],formatter:function(s){return s;}},visible:{parts:[{path:'/count'},{path:'/isBusy'},{path:'/firstSearchWasExecuted'}],formatter:function(e,i,m){return e===0&&!i&&m;}}}),totalCountHiddenElement:t.totalCountHiddenElement});t.searchLayout=new S({resultListContainer:r,busyIndicator:new sap.m.BusyDialog(),isBusy:'{/isBusy}',busyDelay:'{/busyDelay}',showFacets:{parts:[{path:'/count'},{path:'/facetVisibility'},{path:'/uiFilter/rootCondition'},{path:'/isBusy'}],formatter:function(e,i,m,n){if(!i){return false;}var p=m&&m.conditions&&m.conditions.length>0;if(e===0&&!p&&!n){return false;}return true;}},vertical:false,facets:new sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter()});t.searchLayout.addStyleClass('sapUshellSearchLayout');t.searchContainer=new sap.ushell.renderers.fiori2.search.controls.DivContainer({content:[t.searchLayout],cssClass:'sapUshellSearchContainer'});t.oFocusHandler=new g.SearchFocusHandler(t);return t.searchContainer;},assembleFilterButton:function(){var t=this;var e=new sap.m.ToggleButton({icon:sap.ui.core.IconPool.getIconURI("filter"),tooltip:{parts:[{path:'/facetVisibility'}],formatter:function(i){return i?sap.ushell.resources.i18n.getText("hideFacetBtn_tooltip"):sap.ushell.resources.i18n.getText("showFacetBtn_tooltip");}},pressed:'{/facetVisibility}',press:function(){if(this.getPressed()){t.searchLayout.setAnimateFacetTransition(true);t.getModel().setFacetVisibility(true);t.searchLayout.setAnimateFacetTransition(false);}else{t.searchLayout.setAnimateFacetTransition(true);t.getModel().setFacetVisibility(false);t.searchLayout.setAnimateFacetTransition(false);}},visible:{parts:[{path:'/businessObjSearchEnabled'},{path:'/count'}],formatter:function(i,m){if(m===0){return false;}return!sap.ui.Device.system.phone&&i;}}});e.addStyleClass('searchBarFilterButton');return e;},searchToolbarEntryVisibility:{parts:[{path:'/count'}],formatter:function(e){return e!==0&&!sap.ui.Device.system.phone;}},assembleCountLabel:function(){var e=new sap.m.Label({visible:{parts:[{path:'/count'}],formatter:function(i){return i!==0;}},text:{parts:[{path:'/count'},{path:'/nlqSuccess'},{path:'/nlqDescription'}],formatter:function(i,n,m){if(n){return m;}if(typeof i!=='number'){return"";}var o=g.formatInteger(i);return sap.ushell.resources.i18n.getText("results")+' ('+o+')';}}});e.addStyleClass('sapUshellSearchTotalCountSelenium');return e;},assembleCountHiddenElement:function(){var t=new sap.ui.core.InvisibleText({text:{parts:[{path:'/count'},{path:'/nlqSuccess'},{path:'/nlqDescription'}],formatter:function(e,n,i){if(n){return i;}if(typeof e!=='number'){return"";}return sap.ushell.resources.i18n.getText("results_count_for_screenreaders",[e]);}}});return t;},assembleSearchToolbar:function(w){var t=this;var e=t.assembleDisplaySwitchTapStrips();var i=new sap.m.Button({icon:"sap-icon://sort",tooltip:"{i18n>sortTable}",type:sap.m.ButtonType.Transparent,visible:{parts:[{path:'/displaySwitchVisibility'},{path:'/count'},{path:'/tableSortableColumns'}],formatter:function(o,p,q){return o&&p!==0&&q.length>1;}},press:function(o){t.tableSortDialog.open();}});e.addEventDelegate({onAfterRendering:function(E){var D=E.srcControl;if(D.getItems().length===2&&t.determineIfMaps(t)){D.addItem(new sap.m.SegmentedButtonItem({icon:"sap-icon://map",tooltip:sap.ushell.resources.i18n.getText("displayMap"),key:"map"}));}else if(D.getItems().length===3&&!t.determineIfMaps(t)){D.removeItem(D.getItems()[2]);if(t.getModel().getProperty('/resultToDisplay')==="searchResultMap"){t.getModel().setProperty('/resultToDisplay',"searchResultList");}}}});e.addStyleClass("sapUshellSearchResultDisplaySwitch");i.addStyleClass("sapUshellSearchTableSortButton");var m=new sap.m.Button("tablePersonalizeButton",{icon:"sap-icon://action-settings",tooltip:"{i18n>personalizeTable}",type:sap.m.ButtonType.Transparent,visible:{parts:[{path:'/resultToDisplay'}],formatter:function(r){return r==="searchResultTable";}},press:function(o){t.oTablePersoController.openDialog();}});m.addStyleClass("sapUshellSearchTablePersonalizeButton");var n=new sap.m.Button("dataExportButton",{icon:"sap-icon://download",tooltip:"{i18n>exportData}",type:sap.m.ButtonType.Transparent,visible:{parts:[{path:'/displaySwitchVisibility'},{path:'/count'}],formatter:function(o,p){return o&&p!==0;}},press:function(){if(t.searchSpreadsheet===undefined){t.searchSpreadsheet=new d("ushell-search-spreadsheet");}t.searchSpreadsheet.onExport();}});if(!w){var s=this.assembleShareButton();return[n,m,i,s,e];}return[n,m,i,e];},assembleShareButton:function(){var t=this;var B=new sap.ushell.ui.footerbar.AddBookmarkButton({beforePressHandler:function(){var o={url:document.URL,title:t.getModel().getDocumentTitle(),icon:sap.ui.core.IconPool.getIconURI("search")};B.setAppData(o);}});B.setWidth('auto');var e=new sap.m.Button();e.setIcon("sap-icon://email");e.setText(sap.ushell.resources.i18n.getText("eMailFld"));e.attachPress(function(){sap.m.URLHelper.triggerEmail(null,t.getModel().getDocumentTitle(),document.URL);});e.setWidth('auto');var A=new sap.m.ActionSheet({placement:'Bottom',buttons:[B,e]});var s=new sap.m.Button({icon:'sap-icon://action',tooltip:sap.ushell.resources.i18n.getText('shareBtn'),press:function(){A.openBy(s);}});return s;},assembleDataSourceTapStrips:function(){var t=this;var e=new sap.m.OverflowToolbar({design:sap.m.ToolbarDesign.Transparent,visible:{parts:[{path:'/facetVisibility'},{path:'/count'},{path:'/businessObjSearchEnabled'}],formatter:function(i,n,o){return!i&&n>0&&o;}}});e.data("sap-ui-fastnavgroup","false",true);e.addStyleClass('searchTabStrips');t.tabBar=e;var m=new sap.ui.core.InvisibleText({text:"Data Sources"}).toStatic();e.addDependent(m);e.addAriaLabelledBy(m);e.bindAggregation('content','/tabStrips/strips',function(I,o){var n=new sap.m.ToggleButton({text:'{labelPlural}',type:{parts:[{path:'/tabStrips/selected'}],formatter:function(s){var i=this.getBindingContext().getObject();if(i===s){return sap.m.ButtonType.Transparent;}return sap.m.ButtonType.Transparent;}},pressed:{parts:[{path:'/tabStrips/selected'}],formatter:function(s){var i=this.getBindingContext().getObject();return i===s;}},press:function(q){if(t.getModel().config.searchScopeWithoutAll){return;}this.setType(sap.m.ButtonType.Transparent);if(this.getBindingContext().getObject()===t.getModel().getProperty('/tabStrips/selected')){this.setPressed(true);return;}var B=t.tabBar.getContent();for(var i=0;i<B.length;i++){if(B[i].getId()!==this.getId()){B[i].setType(sap.m.ButtonType.Transparent);if(B[i].getPressed()===true){B[i].setPressed(false);}}}t.getModel().setDataSource(this.getBindingContext().getObject());}});var p=new sap.ui.core.InvisibleText({text:o.getProperty("labelPlural")+", "+sap.ushell.resources.i18n.getText("dataSource")}).toStatic();n.addAriaLabelledBy(p);n.addDependent(p);return n;});e._setupItemNavigation=function(){if(!this.theItemNavigation){this.theItemNavigation=new sap.ui.core.delegate.ItemNavigation();this.addDelegate(this.theItemNavigation);}this.theItemNavigation.setCycling(false);this.theItemNavigation.setRootDomRef(this.getDomRef());var n=[];var o=this.getContent();for(var i=0;i<o.length;i++){if(!$(o[i].getDomRef()).attr("tabindex")){var p="-1";if(o[i].getPressed&&o[i].getPressed()){p="0";}$(o[i].getDomRef()).attr("tabindex",p);}n.push(o[i].getDomRef());}var q=this.getAggregation("_overflowButton");if(q&&q.getDomRef){var _=q.getDomRef();n.push(_);$(_).attr("tabindex","-1");}this.theItemNavigation.setItemDomRefs(n);};e.addEventDelegate({onAfterRendering:function(E){var t=this;t.getAggregation("_overflowButton").addEventDelegate({onAfterRendering:function(E){t._setupItemNavigation();}},t.getAggregation("_overflowButton"));var i=$(t.getDomRef());i.attr("role","tablist");i.children("button").attr("role","tab");t._setupItemNavigation();}},e);return e;},reorgTabBarSequence:function(){if(!this.tabBar){return;}var e=new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.High});var n=new sap.m.OverflowToolbarLayoutData({priority:sap.m.OverflowToolbarPriority.NeverOverflow});var B=this.tabBar.getContent();for(var i=0;i<B.length;i++){if(this.getModel().getProperty('/tabStrips/selected')===B[i].getBindingContext().getObject()){B[i].setLayoutData(n);}else{B[i].setLayoutData(e);}}},determineIfMaps:function(o){var I=false;if(o.getModel()){var e=o.getModel().getDataSource();if(typeof e!=='undefined'&&e.attributesMetadata){var m=e.attributesMetadata;for(var i=0;i<m.length;i++){var t=m[i].type;if(t==="GeoJson"){I=true;break;}}}if(o.getModel().config.maps===true){I=true;}else if(o.getModel().config.maps===false){I=false;}}return I;},assembleDisplaySwitchTapStrips:function(){var t=this;var i=[new sap.m.SegmentedButtonItem({icon:"sap-icon://list",tooltip:sap.ushell.resources.i18n.getText("displayList"),key:"list"}),new sap.m.SegmentedButtonItem({icon:"sap-icon://table-view",tooltip:sap.ushell.resources.i18n.getText("displayTable"),key:"table"})];if(t.determineIfMaps(t)){i.push(new sap.m.SegmentedButtonItem({icon:"sap-icon://map",tooltip:sap.ushell.resources.i18n.getText("displayMap"),key:"map"}));}var s=new sap.m.SegmentedButton('ResultViewType',{selectedKey:{parts:[{path:'/resultToDisplay'}],formatter:function(r){var e="list";if(r==="searchResultTable"){e="table";}else if(r==="searchResultList"){e="list";}else if(r==="searchResultMap"){e="map";}return e;}},items:i,visible:{parts:[{path:'/displaySwitchVisibility'},{path:'/count'}],formatter:function(e,m){return e&&m!==0;}},select:function(e){var m=e.mParameters.key;var n=t.getModel();switch(m){case"list":n.setProperty('/resultToDisplay',"searchResultList");t.showMoreFooter.setVisible(t.isShowMoreFooterVisible());t.searchResultMap.setVisible(false);break;case"table":n.setProperty('/resultToDisplay',"searchResultTable");t.showMoreFooter.setVisible(t.isShowMoreFooterVisible());t.searchResultMap.setVisible(false);break;case"map":n.setProperty('/resultToDisplay',"searchResultMap");t.showMoreFooter.setVisible(t.isShowMoreFooterVisible());break;default:n.setProperty('/resultToDisplay',"searchResultList");t.showMoreFooter.setVisible(t.isShowMoreFooterVisible());}n.enableOrDisableMultiSelection();}.bind(this)});s.addStyleClass("sapUshellSearchDisplaySwitchTapStrips");return s;},isShowMoreFooterVisible:function(){var m=this.getModel();return m.getProperty("/boCount")>m.getProperty("/boResults").length;},assembleCenterArea:function(){var t=this;t.tableSortDialog=t.assembleSearchResultSortDialog();var s=t.assembleSearchResultList();t.searchResultTable=t.assembleSearchResultTable();t.searchResultTable.addDelegate({onBeforeRendering:function(){t.updateTableLayout();},onAfterRendering:function(){var e=$(t.searchResultTable.getDomRef()).find("table > thead > tr:first");if(e){e.attr("aria-labelledby",t.totalCountHiddenElement.getId());}}});t.searchResultMap=t.assembleSearchResultMap();t.searchResultMap.setVisible(false);t.appSearchResult=t.assembleAppSearch();t.showMoreFooter=t.assembleShowMoreFooter();return[t.tableSortDialog,s,t.searchResultTable,t.searchResultMap,t.appSearchResult,t.showMoreFooter,t.totalCountHiddenElement];},assembleSearchResultSortDialog:function(){var t=this;var e=new sap.m.ViewSettingsDialog({sortDescending:{parts:[{path:"/orderBy"}],formatter:function(o){return jQuery.isEmptyObject(o)||o.sortOrder==="DESC";}},confirm:function(i){var p=[];p=i.getParameters();if(p.sortItem){var o=t.getModel();if(p.sortItem.getKey()==="searchSortableColumnKeyDefault"){o.resetOrderBy();e.setSortDescending(true);}else{o.setOrderBy({orderBy:p.sortItem.getBindingContext().getObject().attributeId,sortOrder:p.sortDescending===true?"DESC":"ASC"});}}},cancel:function(i){var m=t.getModel().getOrderBy().orderBy===undefined?"searchSortableColumnKeyDefault":t.getModel().getOrderBy().orderBy;this.setSelectedSortItem(m);}});e.bindAggregation("sortItems","/tableSortableColumns",function(p,D){return new sap.m.ViewSettingsItem({key:"{key}",text:"{name}",selected:"{selected}"});});return e;},assembleSearchResultTable:function(){var t=this;var r=new c("ushell-search-result-table",{mode:{parts:[{path:'/multiSelectionEnabled'}],formatter:function(m){return m===true?sap.m.ListMode.MultiSelect:sap.m.ListMode.None;}},noDataText:'{i18n>noCloumnsSelected}',visible:{parts:[{path:'/resultToDisplay'},{path:'/count'}],formatter:function(e,i){return e==="searchResultTable"&&i!==0;}},popinLayout:sap.m.PopinLayout.GridLarge,rememberSelections:false});r.bindAggregation("columns","/tableColumns",function(p,D){var e=D.getObject();var i=new sap.m.Column(e.key,{header:new sap.m.Label({text:"{name}",tooltip:"{name}"}),visible:{parts:[{path:'index'}],formatter:function(m){return m<6;}}});return i;});r.bindAggregation("items","/tableResults",function(p,D){return t.assembleTableItems(D);});r.addEventDelegate({onAfterRendering:function(){t.updatePersoServiceAndController();var e=$(this.getDomRef());e.find("table tbody tr").each(function(){var i=$(this);var m=sap.ui.getCore().byId(i.attr("id"));if(m){var n=m.getAriaLabelledBy();if($.inArray(t.totalCountHiddenElement.getId(),n)===-1){m.addAriaLabelledBy(t.totalCountHiddenElement);}}return false;});}.bind(r)});return r;},assembleTableItems:function(D){var t=this;var o=D.getObject();if(o.type==='footer'){return new sap.m.CustomListItem({visible:false});}return t.assembleTableMainItems(o,D.getPath());},assembleTableMainItems:function(D,p){var s=p+"/cells";var e=new sap.m.ColumnListItem({selected:"{selected}"});e.bindAggregation("cells",s,function(s,m){if(m.getObject().isTitle){var t="";var n;var o=m.getObject().titleNavigation;if(o){t=o.getHref();n=o.getTarget();}var q=!!((t&&t.length>0));var r=new j({text:"{value}",enabled:q,href:t,press:function(){var o=m.getObject().titleNavigation;if(o){o.performNavigation({trackingOnly:true});}}});r.addStyleClass("sapUshellSearchResultListItem-MightOverflow");if(n){r.setTarget(n);}return r;}else if((m.getObject().isRelatedApps)){var u=m.getObject().navigationObjects;var v=[];var w={};var x=function(z,y){y.performNavigation();};for(var i=0;i<u.length;i++){var y=u[i];w=new sap.m.Button({text:y.getText(),tooltip:y.getText()});w.attachPress(y,x);v.push(w);}return new sap.m.Button({icon:"sap-icon://action",press:function(){var z=new sap.m.ActionSheet({buttons:v,placement:sap.m.PlacementType.Auto});z.openBy(this);}});}return new h({text:"{value}"}).addStyleClass("sapUshellSearchResultListItem-MightOverflow");});return e;},onRegionClick:function(e){},onRegionContextMenu:function(e){},assembleSearchResultMap:function(){var s=new k({visible:{parts:[{path:'/resultToDisplay'},{path:'/count'}],formatter:function(r,e){return r==="searchResultMap"&&e!==0;}}});return s;},assembleShowMoreFooter:function(){var t=this;var e=new sap.m.Button({text:"{i18n>showMore}",type:sap.m.ButtonType.Transparent,press:function(){var o=t.getModel();o.setProperty('/focusIndex',o.getTop());var n=o.getTop()+o.pageSize;o.setTop(n);o.eventLogger.logEvent({type:o.eventLogger.SHOW_MORE});}});e.addStyleClass('sapUshellResultListMoreFooter');var i=new sap.m.FlexBox({visible:{parts:[{path:'/boCount'},{path:'/boResults'}],formatter:function(m,n){return n.length<m;}},justifyContent:sap.m.FlexJustifyContent.Center});i.addStyleClass('sapUshellResultListMoreFooterContainer');i.addItem(e);return i;},assembleSearchResultList:function(){var t=this;t.resultList=new b({mode:sap.m.ListMode.None,width:"auto",showNoData:false,visible:{parts:[{path:'/resultToDisplay'},{path:'/count'}],formatter:function(r,e){return r==="searchResultList"&&e!==0;}}});t.resultList.bindAggregation("items","/results",function(p,o){return t.assembleListItem(o);});return t.resultList;},assembleAppSearch:function(){var t=this;var e=new sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer("AppSearchContainer",{addAccInformation:true,maxRows:99999,totalLength:'{/appCount}',visible:{parts:[{path:'/resultToDisplay'},{path:'/count'}],formatter:function(r,i){return r==="appSearchResult"&&i!==0;}},highlightTerms:'{/uiFilter/searchTerm}',showMore:function(){var m=t.getModel();m.setProperty('/focusIndex',e.getNumberDisplayedTiles()-1);var n=m.getTop()+m.pageSize*e.getTilesPerRow();m.setTop(n);}});e.bindAggregation('tiles','/appResults',function(i,o){if(t.getModel().getResultToDisplay()==="appSearchResult"){return o.getObject().getView();}return new sap.m.Text({text:""});});e.addStyleClass('sapUshellSearchTileResultList');return e;},assembleTitleItem:function(D){var i=new sap.m.CustomListItem();var t=new sap.m.Label({text:"{title}"});t.addStyleClass('bucketTitle');i.addStyleClass('bucketTitleContainer');i.addContent(new sap.m.HBox({items:[t]}));return i;},assembleAppContainerResultListItem:function(D,p){var t=this;var e=new sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer("AppSearchContainerResultListItem",{maxRows:sap.ui.Device.system.phone?2:1,totalLength:'{/appCount}',highlightTerms:'{/uiFilter/searchTerm}',enableKeyHandler:false,resultList:t.resultList,showMore:function(){var m=t.getModel();m.setDataSource(m.appDataSource);}});e.bindAggregation('tiles','tiles',function(I,o){if(t.getModel().getResultToDisplay()!=="appSearchResult"){return o.getObject().getView();}return new sap.m.Text({text:""});});var i=new sap.m.CustomListItem({content:e});i.addStyleClass('sapUshellSearchResultListItem');i.addStyleClass('sapUshellSearchResultListItemApps');i.addEventDelegate({onAfterRendering:function(E){var m=$(i.getDomRef());m.removeAttr("tabindex");m.removeAttr("role");m.attr("aria-hidden","true");}},i);return i;},assembleResultListItem:function(D,p){var t=this;var e=this.getModel().config.getDataSourceConfig(D.dataSource);var s={dataSource:D.dataSource,title:"{title}",titleDescription:"{titleDescription}",titleNavigation:"{titleNavigation}",type:"{dataSourceName}",imageUrl:"{imageUrl}",imageFormat:"{imageFormat}",imageNavigation:"{imageNavigation}",geoJson:"{geoJson}",attributes:"{itemattributes}",navigationObjects:"{navigationObjects}",selected:"{selected}",expanded:"{expanded}",positionInList:"{positionInList}",resultSetId:"{resultSetId}",layoutCache:"{layoutCache}"};var i;if(e.searchResultListItemControl){i=new e.searchResultListItemControl(s);}else if(e.searchResultListItemContentControl){s.content=new e.searchResultListItemContentControl();i=new C(s);}else{i=new l(s);}if(i.setTotalCountHiddenElement){i.setTotalCountHiddenElement(t.totalCountHiddenElement);}var m=new sap.m.CustomListItem({content:i,type:sap.m.ListType.Inactive});m.addStyleClass('sapUshellSearchResultListItem');if(i.setParentListItem){i.setParentListItem(m);}return m;},assembleListItem:function(o){var t=this;var D=o.getObject();if(D.type==='title'){return t.assembleTitleItem(D);}else if(D.type==='footer'){return new sap.m.CustomListItem();}else if(D.type==='appcontainer'){return t.assembleAppContainerResultListItem(D,o.getPath());}return t.assembleResultListItem(D,o.getPath());},onAllSearchStarted:function(){},onAllSearchFinished:function(){var t=this;t.reorgTabBarSequence();t.oFocusHandler.setFocus();var v=sap.ui.getCore().byId('viewPortContainer');if(v&&v.switchState){v.switchState('Center');}},updatePersoServiceAndController:function(){var t=this;var m=t.getModel();var e=m.getDataSource().id;var s='search-result-table-state-'+e;if(!t.oTablePersoController){var p=m.getPersonalizationStorageInstance();t.oTablePersoController=new sap.m.TablePersoController({table:sap.ui.getCore().byId("ushell-search-result-table"),persoService:p.getPersonalizer(s)}).activate();t.oTablePersoController.refresh();}if(t.oTablePersoController&&t.oTablePersoController.getPersoService().getKey()!==s){t.oTablePersoController.setPersoService(m.getPersonalizationStorageInstance().getPersonalizer(s));t.oTablePersoController.refresh();}},updateTableLayout:function(){var t=this;if(t.searchResultTable&&t.oTablePersoController){var e=t.getModel().getDataSource().id;var s='search-result-table-state-'+e;t.oTablePersoController.getPersoService(s).getPersData().then(function(p){if(p&&p.aColumns){var m=p.aColumns;var n=this.searchResultTable.getColumns();var v=0;for(var i=0;i<m.length;i++){var o=m[i].id.split('table-searchColumnKey').pop();var q=n[parseInt(o,10)];if(q){q.setDemandPopin(false);if(m[i].visible){v++;q.setDemandPopin(true);q.setPopinDisplay(sap.m.PopinDisplay.Inline);var r=12*v;q.setMinScreenWidth(r+"rem");}}}if(v<=3){this.searchResultTable.setFixedLayout(false);}else{this.searchResultTable.setFixedLayout(true);}}}.bind(this));}},setAppView:function(A){var t=this;t.oAppView=A;if(t.oTilesContainer){t.oTilesContainer.setAppView(A);}},getControllerName:function(){return"sap.ushell.renderers.fiori2.search.container.Search";}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/CustomSearchResultListItem',['sap/ushell/renderers/fiori2/search/controls/SearchResultListItem','sap/ushell/renderers/fiori2/search/controls/CustomSearchResultListItemContent'],function(){"use strict";return sap.ushell.renderers.fiori2.search.controls.SearchResultListItem.extend("sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItem",{metadata:{properties:{content:{type:"sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItemContent"}}},init:function(){sap.ushell.renderers.fiori2.search.controls.SearchResultListItem.prototype.init.apply(this,arguments);},setupCustomContentControl:function(){var c=this.getContent();c.setTitle(this.getTitle());c.setTitleUrl(this.getTitleUrl());c.setType(this.getType());c.setImageUrl(this.getImageUrl());c.setAttributes(this.getAttributes());},renderer:function(r,c){c.setupCustomContentControl();sap.ushell.renderers.fiori2.search.controls.SearchResultListItemRenderer.render.apply(this,arguments);},onAfterRendering:function(){sap.ushell.renderers.fiori2.search.controls.SearchResultListItem.prototype.onAfterRendering.apply(this,arguments);this.getContent().getTitleVisibility();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/CustomSearchResultListItemContent',[],function(){"use strict";return sap.ui.base.ManagedObject.extend("sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItemContent",{metadata:{properties:{title:"string",titleUrl:"string",type:"string",imageUrl:"string",attributes:{type:"object",multiple:true},intents:{type:"object",multiple:true}}},init:function(){},getContent:function(){return undefined;},getTitleVisibility:function(){return true;}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/DivContainer',[],function(){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.DivContainer",{metadata:{properties:{"cssClass":"string"},aggregations:{"content":{singularName:"content",multiple:true}}},renderer:function(r,c){r.write('<div');r.writeControlData(c);r.addClass(c.getCssClass());r.writeClasses();r.write('>');var C=c.getContent();for(var i=0;i<C.length;i++){r.renderControl(C[i]);}r.write('</div>');}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchAdvancedCondition',['sap/ui/layout/HorizontalLayout','sap/ushell/renderers/fiori2/search/SearchFacetDialogHelper'],function(H,S){"use strict";return sap.ui.layout.HorizontalLayout.extend('sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition',{metadata:{properties:{"type":""}},constructor:function(o){var t=this;o=jQuery.extend({},{allowWrapping:true,content:t.contentFactory(o)},o);sap.ui.layout.HorizontalLayout.prototype.constructor.apply(this,[o]);t.addStyleClass('sapUshellSearchFacetDialogDetailPageCondition');},renderer:'sap.ui.layout.HorizontalLayoutRenderer',contentFactory:function(o){var t=this;var a=new sap.m.CheckBox({select:function(e){if(o.type==="string"||o.type==="text"){S.updateCountInfo(e.getSource().getParent().getParent().getParent().getParent().getParent().getParent());}else{S.updateCountInfo(e.getSource().getParent().getParent().getParent());}}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionCheckBox');var A=sap.ui.getCore().byId("advancedCheckBoxLabel");if(!A){A=new sap.ui.core.InvisibleText("advancedCheckBoxLabel",{text:sap.ushell.resources.i18n.getText("checkBox")});}a.addAriaLabelledBy("advancedCheckBoxLabel");var O=sap.ui.getCore().byId("operatorLabel");if(!O){O=new sap.ui.core.InvisibleText("operatorLabel",{text:sap.ushell.resources.i18n.getText("operator")});}var i,b,I,s;switch(o.type){case'timestamp':case'date':i=new sap.m.DateRangeSelection({width:'86%',change:function(e){t.onDateRangeSelectionChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');i.onAfterRendering=function(){var e=$(this.getDomRef());$('input',e).attr('readonly','readonly');};break;case'string':a.setVisible(false);I=new sap.m.Input({width:'57%',placeholder:sap.ushell.resources.i18n.getText("filterCondition"),liveChange:function(e){t.onAdvancedInputChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');s=new sap.m.Select({width:'40%',tooltip:sap.ushell.resources.i18n.getText("operator"),items:[new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("equals"),key:'eq'}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("beginsWith"),key:'bw'}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("endsWith"),key:'ew'}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("contains"),key:'co'})]}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionSelect');s.addAriaLabelledBy("operatorLabel");i=new sap.ui.layout.HorizontalLayout({allowWrapping:true,content:[s,I]});b=new sap.m.Button({icon:"sap-icon://sys-cancel",type:sap.m.ButtonType.Transparent,tooltip:sap.ushell.resources.i18n.getText("removeButton"),press:function(e){t.onDeleteButtonPress(e);}});break;case'text':a.setVisible(false);I=new sap.m.Input({width:'57%',placeholder:sap.ushell.resources.i18n.getText("filterCondition"),liveChange:function(e){t.onAdvancedInputChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');s=new sap.m.Select({width:'40%',tooltip:sap.ushell.resources.i18n.getText("operator"),items:[new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("containsWords"),key:'co'})]}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionSelect');s.addAriaLabelledBy("operatorLabel");i=new sap.ui.layout.HorizontalLayout({allowWrapping:true,content:[s,I]});b=new sap.m.Button({icon:"sap-icon://sys-cancel",type:sap.m.ButtonType.Transparent,tooltip:sap.ushell.resources.i18n.getText("removeButton"),press:function(e){t.onDeleteButtonPress(e);}});break;case'integer':case'number':var c=new sap.m.Input({width:'46.5%',placeholder:sap.ushell.resources.i18n.getText("fromPlaceholder"),liveChange:function(e){t.onAdvancedNumberInputChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');var d=new sap.m.Input({width:'46.5%',placeholder:sap.ushell.resources.i18n.getText("toPlaceholder"),liveChange:function(e){t.onAdvancedNumberInputChange(e);}}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionInput');var l=new sap.m.Label({text:'...'}).addStyleClass('sapUshellSearchFacetDialogDetailPageConditionLabel');i=new sap.ui.layout.HorizontalLayout({allowWrapping:true,content:[c,l,d]});i.addEventDelegate({onAfterRendering:function(e){var f=e.srcControl.getParent().getParent().getContent().length;var g=e.srcControl.getParent().getParent().indexOfAggregation("content",e.srcControl.getParent());if(g===f-2){var v=e.srcControl.getContent()[2].getValue();e.srcControl.getContent()[2].setValue();e.srcControl.getContent()[2].setValue(v);}}});break;default:break;}return[a,i,b];},onDateRangeSelectionChange:function(e){var d=e.getSource();var a=d.getParent();var A=a.getContent()[0];if(d.getDateValue()&&d.getSecondDateValue()){A.setSelected(true);S.insertNewAdvancedCondition(a,"date");S.updateCountInfo(a.getParent().getParent());}else{A.setSelected(false);}},onAdvancedInputChange:function(e){var i=e.getSource();var a=i.getParent().getParent();var A=a.getContent()[0];if(i.getValue()){A.setSelected(true);S.updateCountInfo(a.getParent().getParent().getParent().getParent().getParent());}else{A.setSelected(false);}},onDeleteButtonPress:function(e){var a=e.getSource().getParent();S.deleteAdvancedCondition(a);},onAdvancedNumberInputChange:function(e){var i=e.getSource();var a=i.getParent().getParent();var A=a.getContent()[0];if(i.getParent().getContent()[0].getValue()&&i.getParent().getContent()[2].getValue()){A.setSelected(true);S.insertNewAdvancedCondition(a,"number");S.updateCountInfo(a.getParent().getParent());}else{A.setSelected(false);}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchButton',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/m/Button'],function(S){"use strict";
sap.m.Button.extend('sap.ushell.renderers.fiori2.search.controls.SearchButton',{
constructor:function(i,o){o=jQuery.extend({},{icon:sap.ui.core.IconPool.getIconURI("search"),tooltip:sap.ushell.resources.i18n.getText("search"),enabled:{parts:[{path:"/initializingObjSearch"}],formatter:function(a){return!S.isSearchAppActive()||!a;}}},o);sap.m.Button.prototype.constructor.apply(this,[i,o]);this.addStyleClass('searchBtn');},
renderer:'sap.m.ButtonRenderer'
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacet',['sap/ushell/renderers/fiori2/search/controls/SearchFacetItem','sap/m/List'],function(){"use strict";
sap.m.List.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacet',{
metadata:{properties:{eshRole:{type:"string",defaultValue:"datasource"}}},
init:function(){this.data("sap-ui-fastnavgroup","false",true);},
constructor:function(i,o){o=jQuery.extend({},{mode:sap.m.ListMode.SingleSelectMaster,showSeparators:sap.m.ListSeparators.None,includeItemInSelection:true,selectionChange:function(e){if(this.getEshRole()==="attribute"){this.handleItemPress(e);}},itemPress:function(e){if(this.getModel().config.searchScopeWithoutAll){return;}if(this.getEshRole()==="datasource"){this.handleItemPress(e);}}},o);sap.m.List.prototype.constructor.apply(this,[i,o]);this.addStyleClass('sapUshellSearchFacet');},
handleItemPress:function(e){var l=e.mParameters.listItem;var s=l.getBindingContext().getObject();if(l.getSelected()){this.getModel().addFilterCondition(s.filterCondition);this.getModel().eventLogger.logEvent({type:this.getModel().eventLogger.FACET_FILTER_ADD,referencedAttribute:s.facetAttribute,clickedValue:s.value,clickedPosition:l.getList().getItems().indexOf(l)});}else{this.getModel().removeFilterCondition(s.filterCondition);this.getModel().eventLogger.logEvent({type:this.getModel().eventLogger.FACET_FILTER_DEL,referencedAttribute:s.facetAttribute,clickedValue:s.value,clickedPosition:l.getList().getItems().indexOf(l)});}},
renderer:'sap.m.ListRenderer',
onAfterRendering:function(){var i=jQuery(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];if(i){var I=sap.ui.getCore().byId(i.id);I.setVisible(false);}},
setEshRole:function(r){var t=this;var i={path:"items",template:new sap.ushell.renderers.fiori2.search.controls.SearchFacetItem(),groupHeaderFactory:function(g){var a=new sap.m.GroupHeaderListItem({title:g.key,upperCase:false});if(t.getModel().config.charts){a.setVisible(false);}return a;}};switch(r.toLowerCase()){case"attribute":this.setMode(sap.m.ListMode.MultiSelect);this.setHeaderText("");break;default:this.setMode(sap.m.ListMode.SingleSelectMaster);this.setHeaderText(sap.ushell.resources.i18n.getText("searchIn"));break;}this.bindAggregation("items",i);this.setProperty("eshRole",r);return this;},
setModel:function(){return sap.m.List.prototype.setModel.apply(this,arguments);}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetBarChart',['sap/suite/ui/microchart/ComparisonMicroChart'],function(H){"use strict";
sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetBarChart',{
metadata:{properties:{lastUpdated:{type:"string"},aItems:{type:"object"}},aggregations:{'items':{type:'sap.suite.ui.microchart.ComparisonMicroChartData',multiple:true}}},
constructor:function(o){var t=this;t.options=o;sap.ui.core.Control.prototype.constructor.apply(this);this.bindAggregation('items','items',function(){var c=new sap.suite.ui.microchart.ComparisonMicroChartData({title:'{label}',value:'{value}',color:{path:'selected',formatter:function(v){var r=sap.m.ValueColor.Good;if(!v){r=sap.m.ValueColor.Neutral;}return r;}},displayValue:'{valueLabel}',press:function(e){var a=e.getSource().getBindingContext();var m=a.getModel();var d=a.getObject();var i=d.selected;var f=d.filterCondition;if(i){if(t.options.oSearchFacetDialog){t.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(e);}else{m.removeFilterCondition(f,true);}}else if(t.options.oSearchFacetDialog){t.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(e);}else{m.addFilterCondition(f,true);}}});return c;});},
renderer:function(r,c){r.write('<div');r.writeControlData(c);r.writeClasses();r.write('>');var C=new sap.suite.ui.microchart.ComparisonMicroChart({width:"90%",colorPalette:"",press:function(e){},tooltip:"",shrinkable:true});if(c.options.oSearchFacetDialog){C.setWidth("95%");C.addStyleClass("sapUshellSearchFacetBarChartLarge");}else{C.addStyleClass("sapUshellSearchFacetBarChart");}C.addEventDelegate({onAfterRendering:function(e){$('#'+this.sId).has('.Good').addClass("sapUshellSearchFacetBarChartSelected");}});var a=c.getItems();var b=c.getAItems();if(a.length===0&&b){a=b;}var m=0;for(var i=0;i<a.length;++i){var d=a[i];if(!c.options.oSearchFacetDialog){if(d.mProperties&&d.mProperties.value){C.addData(d);}else if(d.mProperties&&!d.mProperties.value){m++;}}else{C.addData(d);}}c.iMissingCnt=m;r.renderControl(C);r.write('</div>');},
onAfterRendering:function(){var t=this;var a=$(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];var I=sap.ui.getCore().byId(a.id);if(t.iMissingCnt>0){I.setVisible(true);var m=sap.ushell.resources.i18n.getText("infoZeileNumberMoreSelected",[t.iMissingCnt]);I.setText(m);I.rerender();}else{I.setVisible(false);}var A=$(".sapSuiteUiMicroChartPointer");for(var i=0;i<A.length;i++){var b=A[i];var s=b.title;if(s&&s.indexOf(":")===-1){b.title=s.replace(/( \d+) *$/,':$1');}}},
setEshRole:function(){}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetDialog',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/SearchFacetDialogHelper','sap/ushell/renderers/fiori2/search/SearchFacetDialogHelperCharts','sap/ushell/renderers/fiori2/search/controls/SearchAdvancedCondition','sap/m/Dialog'],function(s,a,b){"use strict";
sap.m.Dialog.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog',{
constructor:function(o){var t=this;t.bConditionValidateError=false;t.bShowCharts=true;t.bOldPieChart=true;if(jQuery.sap.getUriParameters().mParams.newpie&&jQuery.sap.getUriParameters().get("newpie")!=="false"){t.bOldPieChart=false;}t.chartOnDisplayIndex=o.selectedTabBarIndex;t.facetOnDisplayIndex=0;t.chartOnDisplayIndexByFilterArray=[];t.aItemsForBarChart=[];t.tabBarItems=o.tabBarItems;t.searchFacetDialogHelperCharts=b;if(!t.tabBarItems){b.setDummyTabBarItems(t);}o=jQuery.extend({},{showHeader:false,horizontalScrolling:false,verticalScrolling:false,contentHeight:'35rem',beginButton:new sap.m.Button({text:sap.ushell.resources.i18n.getText("okDialogBtn"),type:sap.m.ButtonType.Emphasized,press:function(e){t.onOkClick(e);t.close();t.destroy();}}),endButton:new sap.m.Button({text:sap.ushell.resources.i18n.getText("cancelDialogBtn"),press:function(e){t.onCancelClick(e);t.close();t.destroy();}}),content:[t.createContainer()]},o);t.selectedAttribute=o.selectedAttribute?o.selectedAttribute:"";delete o.selectedAttribute;delete o.selectedTabBarIndex;delete o.tabBarItems;sap.m.Dialog.prototype.constructor.apply(this,[o]);a.init(t);b.init(t);t.addStyleClass('sapUshellSearchFacetDialog');t.onSearchFieldLiveChange=s.delayedExecution(t.onSearchFieldLiveChange,1000);},
renderer:'sap.m.DialogRenderer',
createContainer:function(){var t=this;t.oSplitContainer=new sap.m.SplitContainer({masterPages:t.createMasterPages()});t.oSplitContainer.bindAggregation("detailPages","/facetDialog",function(i,c){return t.createDetailPages(i,c);});t.oSplitContainer.addStyleClass('sapUshellSearchFacetDialogContainer');return t.oSplitContainer;},
createMasterPages:function(){var t=this;var f=new sap.m.List({mode:sap.m.ListMode.SingleSelectMaster,selectionChange:function(e){t.onMasterPageSelectionChange(e);}});f.addStyleClass('sapUshellSearchFacetDialogFacetList');f.bindAggregation("items","/facetDialog",function(i,c){var l=new sap.m.StandardListItem({title:"{title}",counter:"{count}"});return l;});var r=new sap.m.Button({icon:"sap-icon://clear-filter",tooltip:sap.ushell.resources.i18n.getText("resetFilterButton_tooltip"),type:'Transparent',enabled:false,press:function(e){t.resetAllFilters(e);}});r.addStyleClass("sapUshellSearchFacetDialogFilterResetButton");var m=new sap.m.Page({title:sap.ushell.resources.i18n.getText("filters"),headerContent:r,content:[f]}).addStyleClass('sapUshellSearchFacetDialogMasterContainer');m.addEventDelegate({onAfterRendering:function(e){if(t.selectedAttribute){for(var i=0;i<f.getItems().length;i++){var l=f.getItems()[i];var B=l.getBindingContext().getObject();if(t.selectedAttribute===B.dimension){f.setSelectedItem(l);t.facetOnDisplayIndex=i;t.chartOnDisplayIndexByFilterArray.push(t.chartOnDisplayIndex);}else{var n=0;var c=l.getBindingContext().getModel().oData.facets;for(var j=0;j<c.length;j++){if(c[j].chartIndex&&c[j].dimension===B.dimension&&!isNaN(c[j].chartIndex)){n=c[j].chartIndex;}}t.chartOnDisplayIndexByFilterArray.push(n);}}}if(!f.getSelectedItem()){f.setSelectedItem(f.getItems()[0]);}var S=f.getSelectedItem();a.updateDetailPage(S,null,true);t.resetEnabledForFilterResetButton();}});var M=[m];return M;},
resetAllFilters:function(e){var c=$(".sapUshellSearchFacetDialogSettingsContainer").find(".sapMCbBg.sapMCbHoverable.sapMCbMark");if(c.length===1){var i=c[0].parentNode.id;var C=sap.ui.getCore().byId(i);C.setSelected(false);C.setEnabled(false);}var m=this.getModel();m.aFilters=[];a.bResetFilterIsActive=true;var M=a.getFacetList();var f=M.getItems();for(var j=0;j<f.length;j++){f[j].setCounter(0);}this.resetAdvancedConditionFilters();a.resetChartQueryFilters();a.updateDetailPage(M.getSelectedItem());this.resetEnabledForFilterResetButton();a.bResetFilterIsActive=false;},
resetAdvancedConditionFilters:function(){var t=this;var A,c,n,d,p,C,j;var D=t.oSplitContainer.getDetailPages();for(var i=0;i<D.length;i++){var o=D[i];n=a.POS_ATTRIBUTE_LIST_CONTAINER;A=o.getContent()[n];if(A){for(j=A.getContent().length-2;j>0;j--){c=A.getContent()[j];p=c.getParent();C=c;p.removeContent(C);}}else{n=a.POS_ICONTABBAR;d=a.POS_TABBAR_CONDITION;A=o.getContent()[n].getItems()[d].getContent()[0];if(A){for(j=A.getContent().length-1;j>-1;j--){c=A.getContent()[j];if(c.getContent&&c.getContent()[1]){var e=c.getContent()[1].getContent()[1];var f=e.getValue();if(f&&(""+f).length>0){p=c.getParent();C=c;p.removeContent(C);}}}}}}},
resetEnabledForFilterResetButton:function(f){var F=false;var o=0;var m=a.getFacetList();var c=m.getItems();for(var i=0;i<c.length;i++){o+=c[i].getCounter();}var M=this.getModel();if(M.aFilters&&M.aFilters.length>0||f||o>0){F=true;}var d=$('.sapUshellSearchFacetDialogFilterResetButton')[0].id;var r=sap.ui.getCore().byId(d);r.setEnabled(F);},
onMasterPageSelectionChange:function(e){var t=this;var l=e.mParameters.listItem;t.facetOnDisplayIndex=l.getParent().indexOfItem(l.getParent().getSelectedItem());t.setChartOnDisplayIndexForFacetListItem(t.facetOnDisplayIndex);var m=l.getParent().getModel();var B=l.getBindingContext().sPath;t.resetIcons(m,B,t);a.updateDetailPage(l);if(t.oSplitContainer.getMode()==="ShowHideMode"){t.oSplitContainer.hideMaster();}t.controlChartVisibility(t,t.chartOnDisplayIndex);},
createDetailPages:function(i,c){var t=this;var f=c.oModel.getProperty(c.sPath).facetType;var d=c.oModel.getAttributeDataType(c.oModel.getProperty(c.sPath));var S=new sap.m.Select({items:[new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("notSorted"),key:"notSorted"}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("sortByCount"),key:"sortCount"}),new sap.ui.core.Item({text:sap.ushell.resources.i18n.getText("sortByName"),key:"sortName"})],selectedKey:(d==="string"||d==="text")?"sortCount":"notSorted",change:function(E){t.onSelectChange(E);}}).addStyleClass('sapUshellSearchFacetDialogSettingsSelect');var h=new sap.m.HBox({alignItems:sap.m.FlexAlignItems.End,justifyContent:sap.m.FlexJustifyContent.End,items:[S]});var C=new sap.m.CheckBox({text:sap.ushell.resources.i18n.getText("showSelectedOnTop"),enabled:false,select:function(E){t.onCheckBoxSelect(E);}});var o=new sap.m.VBox({items:[h,C]}).addStyleClass('sapUshellSearchFacetDialogSettingsContainer');o.setVisible(false);var l=new sap.m.List({backgroundDesign:sap.m.BackgroundDesign.Transparent,includeItemInSelection:true,showNoData:false,showSeparators:sap.m.ListSeparators.None,selectionChange:function(E){t.onDetailPageSelectionChange(E);}});l.addStyleClass('sapUshellSearchFacetDialogDetailPageList');l.addStyleClass('largeChart0');if(f==="attribute"){l.setMode(sap.m.ListMode.MultiSelect);}var B={path:"items",factory:function(i,c){var q=c.oModel.getProperty(c.sPath);var r=new sap.m.StandardListItem({title:"{label}",tooltip:sap.ushell.resources.i18n.getText("facetListTooltip",["{label}","{value}"]),info:"{valueLabel}",selected:"{selected}"});if(q.selected){c.oModel.addFilter(q);}return r;}};if(d==="number"||d==="integer"){S.removeItem(2);}B.filters=new sap.ui.model.Filter("advanced",sap.ui.model.FilterOperator.NE,true);l.bindAggregation("items",B);l.data('dataType',d);if(t.bShowCharts){l.addEventDelegate({onAfterRendering:function(E){t.hideSelectively(E,t,0);}});}var L,e,g;e=b.getBarChartPlaceholder();e.addEventDelegate({onAfterRendering:function(E){t.hideSelectively(E,t,1);}});e.data('dataType',d);if(t.bOldPieChart){g=b.getPieChartPlaceholder();}else{g={};}g.addEventDelegate({onAfterRendering:function(E){t.hideSelectively(E,t,2);}});if(t.bShowCharts&&(d==="string"||d==="text")){L=new sap.m.ScrollContainer({height:'67.2%',horizontal:false,vertical:true,content:[l,e,g]});}else{L=new sap.m.ScrollContainer({height:'calc(100% - 0.25rem)',horizontal:false,vertical:true,content:[l]});}L.addStyleClass('sapUshellSearchFacetDialogDetailPageListContainer');L.addStyleClass('searchFacetLargeChartContainer');L.setBusyIndicatorDelay(0);var A=new sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition({type:d});var p;if(d==="string"||d==="text"){var j=new sap.m.ScrollContainer({horizontal:false,vertical:true,content:[A]});j.addStyleClass('sapUshellSearchFacetDialogDetailPageAdvancedContainer');var P=new sap.m.Button({icon:"sap-icon://add",type:sap.m.ButtonType.Transparent,press:function(E){t.onPlusButtonPress(E,d);}});j.addContent(P);j.data('dataType',d);j.data('initial',true);L.setHeight('calc(100% - 0.25rem)');j.setHeight('100%');var k=b.getDropDownButton(t);var m=new sap.m.Toolbar({content:[new sap.m.SearchField({placeholder:sap.ushell.resources.i18n.getText("filterPlaceholder"),liveChange:function(E){t.onSearchFieldLiveChange(E.oSource.getValue());}}),new sap.m.ToggleButton({icon:"sap-icon://sort",press:function(E){t.onSettingButtonPress(E);}}).addStyleClass('sapUshellSearchFacetDialogSortButton')]}).addStyleClass('sapUshellSearchFacetDialogSubheaderToolbar');m.addEventDelegate({onAfterRendering:function(E){$('.sapUshellSearchFacetDialogSubheaderToolbar').removeClass("sapContrastPlus");}});if(t.bShowCharts){m.addContent(k);}var T=new sap.m.Page({showHeader:false,subHeader:m,content:[o,L]}).addStyleClass('sapUshellSearchFacetDialogDetailPage');var I=new sap.m.IconTabBar({expandable:false,stretchContentHeight:true,backgroundDesign:sap.m.BackgroundDesign.Transparent,applyContentPadding:false,select:function(E){t.controlChartVisibility(t,t.chartOnDisplayIndex);},items:[new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("selectFromList"),content:[T]}),new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("defineCondition"),content:[j]})]});I.addStyleClass('sapUshellSearchFacetDialogIconTabBar');p=new sap.m.Page({showHeader:true,title:c.oModel.getProperty(c.sPath).title,content:[I]});p.addStyleClass('sapUshellSearchFacetDialogDetailPageString');}else{L.addContent(A);L.data('dataType',d);L.data('initial',true);if(t.bShowCharts){var n=c.oModel.getProperty(c.sPath).title;p=new sap.m.Page({title:n,showHeader:true,content:[o,L]});}else{p=new sap.m.Page({showHeader:true,title:c.oModel.getProperty(c.sPath).title,content:[o,L]});}p.addStyleClass('sapUshellSearchFacetDialogDetailPage');}p.addEventDelegate({onAfterRendering:function(E){t.controlChartVisibility(t,t.chartOnDisplayIndex);}});return p;},
onDetailPageSelectionChange:function(e){var t=this;var S=e.mParameters.listItem;var B=S.getBindingContext().getObject();if(S.getSelected()){B.listed=true;t.getModel().addFilter(B);}else{B.listed=false;t.getModel().removeFilter(B);}var l=e.oSource;var d;if(l.data('dataType')==="string"||l.data('dataType')==="text"){d=l.getParent().getParent().getParent().getParent().getParent().getParent();}else{d=l.getParent().getParent();}a.updateCountInfo(d);var o=l.getParent().getParent().getContent()[a.POS_SETTING_CONTAINER];var c=o.getItems()[a.POS_SHOWONTOP_CHECKBOX];var f=o.getItems()[a.POS_SORTING_SELECT].getItems()[0];if(c.getSelected()){c.setSelected(false);f.setSelectedKey("notSorted");}if(l.getSelectedContexts().length>0){c.setEnabled(true);}else{c.setEnabled(false);}},
onSearchFieldLiveChange:function(v){var S=a.getFacetList().getSelectedItem();a.updateDetailPage(S,v);},
onSettingButtonPress:function(e){var p=e.oSource.getPressed();var S=e.oSource.getParent().getParent().getContent()[a.POS_SETTING_CONTAINER];var l=e.oSource.getParent().getParent().getContent()[a.POS_ATTRIBUTE_LIST_CONTAINER];if(p){S.setVisible(true);l.setHeight('calc(100% - 4.25rem)');}else{S.setVisible(false);l.setHeight('calc(100% - 0.25rem)');}},
onSelectChange:function(e){a.sortingAttributeList(e.oSource.getParent().getParent().getParent());},
onCheckBoxSelect:function(e){a.sortingAttributeList(e.oSource.getParent().getParent());},
onPlusButtonPress:function(e,t){var A=e.getSource().getParent();var n=new sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition({type:t});var i=A.getAggregation("content").length-1;A.insertAggregation("content",n,i);},
onOkClick:function(e){var t=this;var M=t.getModel();var S=t.getModel('searchModel');S.resetFilterConditions(false);var d=t.oSplitContainer.getDetailPages();for(var m=0;m<M.aFilters.length;m++){var c=M.aFilters[m];if(!c.advanced||c.listed){S.addFilterCondition(c.filterCondition,false);}}for(var i=0;i<d.length;i++){if(a.getFacetList().getItems()[i]){a.applyAdvancedCondition(d[i],a.getFacetList().getItems()[i].getBindingContext().getObject(),S);}}if(!t.bConditionValidateError){S.filterChanged=true;S._firePerspectiveQuery();}S.eventLogger.logEvent({type:S.eventLogger.FACET_SHOW_MORE_CLOSE});},
onCancelClick:function(e){var S=this.getModel('searchModel');S.eventLogger.logEvent({type:S.eventLogger.FACET_SHOW_MORE_CLOSE});},
setChartOnDisplayIndexForFacetListItem:function(f){var t=this;var r=0;try{r=t.chartOnDisplayIndexByFilterArray[f];}catch(e){r=0;}if(r===undefined){r=0;}t.chartOnDisplayIndex=r;},
resetIcons:function(m,p,c){var t=this;var d=false;var D=m.getAttributeDataType(m.getProperty(p));if(t.bShowCharts&&(D==="string"||D==="text")){d=true;}var e=$('.sapUshellSearchFacetDialogTabBarButton');if(d){e.css("display","block");for(var i=0;i<e.length;i++){var f=e[i].id;var o=sap.ui.getCore().byId(f);var g=c.tabBarItems[c.chartOnDisplayIndex].getIcon();o.setIcon(g);var h=c.tabBarItems[c.chartOnDisplayIndex].getText();var j=sap.ushell.resources.i18n.getText('displayAs',[h]);o.setTooltip(j);}}else{e.css("display","none");}},
onDetailPageSelectionChangeCharts:function(e){var t=this;var c=0;var d,m,f,g,h,S,k,B,p,M;var l,j,n,N,i,o;if(e.getSource&&e.sId==="press"){d=e.getSource().getBindingContext();m=d.getModel();f=d.getObject();g=f.selected;h=!g;S=e.getSource();k=S.getBindingContext().sPath+"/selected";m.setProperty(k,h);B=S.getBindingContext().getObject();if(h){m.addFilter(B);}else{m.removeFilter(B);}p=k.replace(/\/items.+/,'');p+="/items";n=m.getProperty(p);c=0;for(i=0;i<n.length;i++){N=n[i];if(N.selected===true){c++;}}}else if(e.getSource&&(e.sId==="selectData"||e.sId==="deselectData")){d=e.getSource().getBindingContext();m=d.getModel();f=d.getObject();h=(e.sId==="selectData");S=e.getSource();k=S.getBindingContext().sPath+"/items/";for(j=0;j<e.getParameters().data.length;j++){l=e.getParameters().data[j].data._context_row_number;k+=l+"/selected";m.setProperty(k,h);B=S.getBindingContext().getObject().items[l];if(h){m.addFilter(B);}else{m.removeFilter(B);}}p=k.replace(/\/items.+/,'');p+="/items";n=m.getProperty(p);c=0;for(i=0;i<n.length;i++){if(n[i].selected===true){c++;}}var q=e.mParameters.data.length;if(!h&&q>1){c=0;for(i=0;i<n.length;i++){n[i].selected=false;}}}else{f=e.dataObject;g=f.selected;h=!g;c=e.cnt;m=e.model;B=new sap.ushell.renderers.fiori2.search.FacetItem();B.facetAttribute=f.dimension;B.filterCondition=f.filterCondition;B.label=f.label;B.selected=f.selected;B.listed=f.selected;B.value=f.value;B.valueLabel=f.valueLabel;for(j=0;j<t.aItemsForBarChart.length;j++){var r=t.aItemsForBarChart[j];if(r.label===f.label){r.selected=f.selected;}}if(g){t.getModel().addFilter(B);}else{t.getModel().removeFilter(B);}}M=a.getFacetList();o=M.getSelectedItem();if(!o){o=M.getItems()[0];}o.setCounter(c);this.resetEnabledForFilterResetButton();},
updateDetailPageCharts:function(i,m){var t=this;if(t.bShowCharts===false){return;}t.aItemsForBarChart=i;var l=b.getListContainersForDetailPage();var L=l[1];var c=L.getContent();if(c&&t.chartOnDisplayIndex===2){var p=c[2];var e=l[5];var r=l[2];r=0.9*r;if(p.directUpdate){var d={};d.relevantContainerHeight=r;d.oSearchFacetDialog=t;var M=new sap.ui.model.json.JSONModel();M.setData(i);$("#"+e.id).empty();p.directUpdate(i,e,M,d);}}var f,g;if(c&&t.chartOnDisplayIndex===1){f=c[2].getDomRef();if(f){g=$("#"+f.id);g.css("display","none");}}if(c&&t.chartOnDisplayIndex===2){f=c[1].getDomRef();if(f){g=$("#"+f.id);g.css("display","none");}}},
controlChartVisibility:function(c,d,f){var t=this;var e,g,h,j;if(t.bShowCharts===false){return;}var l=c.searchFacetDialogHelperCharts.getListContainersForDetailPage();var L=l[1];if(!L||!L.getContent){return;}var k=L.getContent();for(var i=0;i<k.length;i++){e=k[i].getDomRef();if(!e){return;}h=e.className;j=false;if(h.indexOf("largeChart")>-1){j=true;}g=$("#"+e.id);if(j&&i!==d){g.css("display","none");}else{g.css("display","block");}}if(c.bOldPieChart){if(j&&d===2&&f){var I=t.aItemsForBarChart;var m=t.getModel();t.updateDetailPageCharts(I,m);}if(j&&d===2){L.setVertical(false);}else{L.setVertical(true);}}var S=l[6];var o=l[7];if(S){if(d===0){S.css("display","block");o.css('visibility','visible');}else{S.css("display","none");o.css('visibility','hidden');}}},
hideSelectively:function(e,c,d){var f=$("#"+e.srcControl.sId);var g=c.chartOnDisplayIndex;var l=c.searchFacetDialogHelperCharts.getListContainersForDetailPage();var L=l[1];if(l[0].firstChild.children.length!=3){return;}if(g!==undefined){if(c.chartOnDisplayIndex!==d){f.css("display","none");}else{f.css("display","block");}}else{f.css("display","block");}if(g===2){if(!l[0].firstChild.children[2]||!l[0].firstChild.children[2].firstChild){c.controlChartVisibility(c,c.chartOnDisplayIndex,true);}if(c.bOldPieChart){L.setVertical(false);}}else{L.setVertical(true);}var S=l[6];if(S){var h=$("#"+S.sId);if(g===0){h.css("display","block");}else{h.css("display","none");}}}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetFilter',["sap/ushell/renderers/fiori2/search/controls/SearchFacet","sap/ushell/renderers/fiori2/search/controls/SearchFacetTabBar","sap/ushell/renderers/fiori2/search/controls/SearchFacetBarChart","sap/ushell/renderers/fiori2/search/controls/SearchFacetPieChart","sap/ushell/renderers/fiori2/search/controls/SearchFacetDialog","sap/ushell/renderers/fiori2/search/SearchFacetDialogModel"],function(){"use strict";
sap.ushell.renderers.fiori2.search.controls.SearchFacetTabBar.extend('my.IconTabBar',{
renderer:'sap.ushell.renderers.fiori2.search.controls.SearchFacetTabBarRenderer',
setEshRole:function(){var a=this.getItems();for(var i=0;i<a.length;++i){var b=a[i];var f=b.getContent()[0];f.setEshRole.apply(f,arguments);}},
getEshRole:function(){var i=this.getItems();var a=i[0];var f=a.getContent()[0];return f.getEshRole.apply(f,arguments);},
attachSelectionChange:function(){}
});
return sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter',{metadata:{properties:{title:"string"},aggregations:{"facets":{multiple:true}}},init:function(){this.data("sap-ui-fastnavgroup","true",true);},constructor:function(o){var t=this;o=jQuery.extend({},{},o);sap.ui.core.Control.prototype.constructor.apply(this,[o]);this.bindAggregation('facets','/facets',function(){if(t.getModel().config.charts){if(arguments[1].sPath!=="/facets/0"){var b={};b.id='barChart'+arguments[0];var i=new my.IconTabBar({items:[new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetList"),icon:"sap-icon://list",key:'list'+arguments[0],content:new sap.ushell.renderers.fiori2.search.controls.SearchFacet('list'+arguments[0])}),new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetBarChart"),icon:"sap-icon://horizontal-bar-chart",key:'barChart'+arguments[0],content:new sap.ushell.renderers.fiori2.search.controls.SearchFacetBarChart(b)}),new sap.m.IconTabFilter({text:sap.ushell.resources.i18n.getText("facetPieChart"),icon:"sap-icon://pie-chart",key:'pieChart'+arguments[0],content:new sap.ushell.renderers.fiori2.search.controls.SearchFacetPieChart('pieChart'+arguments[0])})]});i.addStyleClass("sapUshellSearchFacetIconTabBar");return i;}return new sap.ushell.renderers.fiori2.search.controls.SearchFacet(arguments[0]);}return new sap.ushell.renderers.fiori2.search.controls.SearchFacet(arguments[0]);});},fireReset:function(){this.getModel().resetFilterConditions(false);this.getModel().setDataSource(this.getModel().allDataSource,true);},renderer:function(r,c){var a=function(d){return function(e){var f=sap.ui.getCore().byId($($(this.getDomRef()).closest(".sapUshellSearchFacet")[0]).attr("id"));var F=new sap.ushell.renderers.fiori2.search.SearchFacetDialogModel(c.getModel());F.initBusinessObjSearch().then(function(){F.setData(c.getModel().getData());F.sinaNext=c.getModel().sinaNext;F.prepareFacetList();var d=null;if(f&&f.getBindingContext()&&f.getBindingContext().getObject()&&f.getBindingContext().getObject().dimension){d=f.getBindingContext().getObject().dimension;}var D=new sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog({selectedAttribute:d});D.setModel(F);D.setModel(c.getModel(),'searchModel');D.open();var p=c.getParent().getParent().getParent().getParent();p.oFacetDialog=D;c.getModel().eventLogger.logEvent({type:c.getModel().eventLogger.FACET_SHOW_MORE});});};};r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchFacetFilter");r.writeClasses();r.write('>');for(var i=0,l=c.getFacets().length;i<l;i++){var f=c.getFacets()[i];if(i===0){f.setEshRole("datasource");}else{f.setEshRole("attribute");f.attachSelectionChange(null,function(){jQuery(c.showAllBtn.getDomRef()).hide();});if(i===1){f.setHeaderText(sap.ushell.resources.i18n.getText("filterBy"));}var s=new sap.m.Link({text:"{i18n>showMore}",press:a(),visible:{parts:[{path:'/uiFilter/dataSource'}],formatter:function(d){return d.type!==this.getModel().sinaNext.DataSourceType.Category;}}});s.setModel(c.getModel());if(!c.getModel().config.charts){var b=new sap.m.CustomListItem({content:s});b.addStyleClass('sapUshellSearchFacetShowMoreLink');b.addEventDelegate({onAfterRendering:function(e){var d=jQuery(jQuery(e.srcControl.getDomRef()).find(".sapMLIBSelectM:first"));d.remove();}});f.addItem(b);}}r.renderControl(f);}if(c.getModel().getDataSource()&&c.getModel().getDataSource().type==='BusinessObject'){var h=c.getModel().oFacetFormatter.hasDialogFacetsFromMetaData(c.getModel());if(h){r.write("<div>");c.showAllBtn=new sap.m.Button({text:"{showAllFilters}",press:a(),visible:true});c.showAllBtn.setModel(c.getModel("i18n"));c.showAllBtn.addStyleClass("sapUshellSearchFacetFilterShowAllFilterBtn");r.renderControl(c.showAllBtn);r.write("</div>");}}r.write("</div>");},onAfterRendering:function(){var a=$('.searchFacetFilter .searchFacet').first().find('ul');var b=a.find('li');a.attr('role','tree');b.attr('role','treeitem');}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetItem',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ui/core/format/NumberFormat','sap/m/StandardListItem'],function(S){"use strict";return sap.m.StandardListItem.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetItem',{constructor:function(i,o){var t=this;t.options=jQuery.extend({},{type:sap.m.ListType.Active,title:"{label}",tooltip:"{label}: {valueLabel}",info:{parts:[{path:'value'}],formatter:function(v){return typeof v==="number"?S.formatInteger(v):"";}},selected:"{selected}"},o);sap.m.StandardListItem.prototype.constructor.apply(this,[i,t.options]);this.addStyleClass('sapUshellSearchFacetItem');this.addEventDelegate({onAfterRendering:function(){if(t.getBindingContext()&&t.getBindingContext().getObject()){var l=t.getBindingContext().getObject().level;if(jQuery("html").attr("dir")==='rtl'){jQuery(t.getDomRef()).children(".sapMLIBContent").css("padding-right",l+"rem");}else{jQuery(t.getDomRef()).children(".sapMLIBContent").css("padding-left",l+"rem");}}}});},renderer:'sap.m.StandardListItemRenderer'});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetPieChart',["sap/ui/thirdparty/d3"],function(){"use strict";
sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchFacetPieChart",{
setEshRole:function(r){},
metadata:{properties:{oSearchFacetDialog:{}},aggregations:{items:{type:"sap.ushell.renderers.fiori2.search.FacetItem",multiple:true}}},
renderer:function(R,C){R.write("<div");R.writeControlData(C);R.writeClasses();R.write(">");var f=function(){if(navigator.appName==="Microsoft Internet Explorer"){return true;}return false;};var P=function(){this.init.apply(this,arguments);};P.Labelposition=(function(){var a=function(){this.init.apply(this,arguments);};a.prototype={init:function(b,c,s,e,r,d,g,h,t,i){this.backgroundWidth=b;this.backgroundHeight=c;this.startAngle=s;this.endAngle=e;this.r=r;this.labelPaddingX=3;this.labelPaddingY=3;this.radiusPadding=4.24;this.labelWidth=d+2*this.labelPaddingX;this.labelHeight=g;this.outsetMin=0.3;this.outsetMax=1.2;this.outsetStep=0.025;this.apexAngle=e-s;this.startLabelWidth=this.labelWidth;this.d3centroid=h;this.text=t;this.svgBackground=i;this.debug=false;this.labelHeight=this.labelHeight+2*this.labelPaddingY;var x=Math.round(this.backgroundWidth/2);var y=Math.round(this.backgroundHeight/2);this.translateStr="translate("+x+","+y+")";},update:function(){var o=Math.max(this.outsetMin,((Math.sin(this.apexAngle/2)/(this.apexAngle/2))*2)/3);var p=true;var i=Math.max(100,this.labelWidth*2,1/this.outsetStep);var b=0;var c;do{p=true;c=this.calc(o,this.labelWidth,this.labelHeight);if(o>this.outsetMax||o<this.outsetMin){break;}if(this.labelWidth<0){break;}var d,e,g,h;if(b===0){d=this.calc(o+this.outsetStep,this.labelWidth,this.labelHeight);e=this.calc(o-this.outsetStep,this.labelWidth,this.labelHeight);g=this.value(d,c);h=this.value(e,c);if(g<h&&h>0.5){b=-1;o+=this.outsetStep*b;p=false;}else if(g>0.5||c.labelWidth<=0){b=1;o+=this.outsetStep*b;p=false;}}else{d=this.calc(o+this.outsetStep*b,this.labelWidth,this.labelHeight);g=this.value(d,c);if(g>0.5||c.labelWidth<=0){o+=this.outsetStep*b;p=false;}}i--;}while(!p&&i>0&&!isNaN(o));c=this.calc(o,this.labelWidth,this.labelHeight);this.labelWidth=c.labelWidth;var x=c.x;var y=c.y;this.svgBackground.select("circle.centroid").remove();if(this.debug){this.svgBackground.append("svg:circle").attr("class","centroid").attr("cx",c.centroidX).attr("cy",c.centroidY).attr("r",2).style("fill","blue");}this.svgBackground.selectAll("line.helper").remove();if(this.debug){this.svgBackground.append("svg:line").attr("class","helper helper2").attr("x1",-this.backgroundWidth/2).attr("x2",this.backgroundWidth/2).attr("y1",y-this.labelHeight/2).attr("y2",y-this.labelHeight/2);this.svgBackground.append("svg:line").attr("class","helper helper2").attr("x1",-this.backgroundWidth/2).attr("x2",this.backgroundWidth/2).attr("y1",y+this.labelHeight/2).attr("y2",y+this.labelHeight/2);this.svgBackground.append("svg:line").attr("class","helper").attr("x1",0).attr("y1",0).attr("x2",Math.sin(this.startAngle)*(this.r+this.radiusPadding)).attr("y2",-Math.cos(this.startAngle)*(this.r+this.radiusPadding));this.svgBackground.append("svg:line").attr("class","helper").attr("x1",0).attr("y1",0).attr("x2",Math.sin(this.endAngle)*(this.r+this.radiusPadding)).attr("y2",-Math.cos(this.endAngle)*(this.r+this.radiusPadding));this.svgBackground.append("svg:line").attr("class","helper").attr("x1",Math.sin(this.startAngle)*(this.r+this.radiusPadding)).attr("y1",-Math.cos(this.startAngle)*(this.r+this.radiusPadding)).attr("x2",this.isStartAngleOnRight()?this.backgroundWidth/2:-this.backgroundWidth/2).attr("y2",-Math.cos(this.startAngle)*(this.r+this.radiusPadding));this.svgBackground.append("svg:line").attr("class","helper").attr("x1",Math.sin(this.endAngle)*(this.r+this.radiusPadding)).attr("y1",-Math.cos(this.endAngle)*(this.r+this.radiusPadding)).attr("x2",this.isEndAngleOnRight()?this.backgroundWidth/2:-this.backgroundWidth/2).attr("y2",-Math.cos(this.endAngle)*(this.r+this.radiusPadding));}if(this.labelWidth<2*this.labelPaddingX){this.labelWidth=0;}else if(this.labelWidth<this.startLabelWidth){this.labelWidth=this.labelWidth-2*this.labelPaddingX;}this.x=isNaN(x)?0:x;this.y=isNaN(x)?0:y;},calc:function(o,b,c){var d,e,g,r,p,h;if(this.startAngle-this.endAngle+2*Math.PI<1e-9){d=0;e=0;r=this.backgroundWidth/2;g=-this.backgroundWidth/2;h=-this.r;p=this.r;}else{d=Math.sin(this.apexAngle/2)*this.r*o;e=Math.cos(this.apexAngle/2)*-this.r*o;var t=d*Math.cos(this.startAngle)-e*Math.sin(this.startAngle);e=d*Math.sin(this.startAngle)+e*Math.cos(this.startAngle);d=t;var u=e-this.labelHeight/2;var i=e+this.labelHeight/2;g=Math.max(this.calcLeftBorder(d,u),this.calcLeftBorder(d,i),-this.backgroundWidth/2);if(Math.abs(this.startAngle-(this.endAngle%(2*Math.PI)))>1e-9&&d>0&&u<=0&&i>=0){g=Math.max(g,0);}if(!this.doesFitHeight(g,u,i,d<0,true)){g=this.backgroundWidth/2;}r=Math.min(this.calcRightBorder(d,u),this.calcRightBorder(d,i),this.backgroundWidth/2);if(Math.abs(this.startAngle-(this.endAngle%(2*Math.PI)))>1e-9&&d<0&&u<=0&&i>=0){r=Math.min(r,0);}if(!this.doesFitHeight(r,u,i,d<0,false)){r=-this.backgroundWidth/2;}var j=this.calcPerimeterBorder(1,e-this.labelHeight/2);if(j<d){j=this.backgroundWidth/2;}var k=this.calcPerimeterBorder(1,e+this.labelHeight/2);if(k<d){k=this.backgroundWidth/2;}p=Math.min(j,k,r);var m=this.calcPerimeterBorder(-1,e-this.labelHeight/2);if(m>d){m=-this.backgroundWidth/2;}var n=this.calcPerimeterBorder(-1,e+this.labelHeight/2);if(n>d){n=-this.backgroundWidth/2;}h=Math.max(m,n,g);if(isNaN(p)){p=r;}if(isNaN(h)){h=g;}}this.svgBackground.select("line.left").remove();this.svgBackground.select("line.right").remove();this.svgBackground.select("line.perimeterLeft").remove();this.svgBackground.select("line.perimeterRight").remove();if(this.debug){this.svgBackground.append("svg:line").attr("class","left").attr("y1",-this.backgroundHeight/2).attr("y2",this.backgroundHeight/2).attr("x1",g).attr("x2",g);this.svgBackground.append("svg:line").attr("class","right").attr("y1",-this.backgroundHeight/2).attr("y2",this.backgroundHeight/2).attr("x1",r).attr("x2",r);this.svgBackground.append("svg:line").attr("class","perimeterLeft").attr("y1",-this.backgroundHeight/2).attr("y2",this.backgroundHeight/2).attr("x1",h).attr("x2",h);this.svgBackground.append("svg:line").attr("class","perimeterRight").attr("y1",-this.backgroundHeight/2).attr("y2",this.backgroundHeight/2).attr("x1",p).attr("x2",p);}var q=b;b=Math.min(b,Math.floor(r-g));var x=d;x=Math.max(x,h+b/2);x=Math.min(x,p-b/2);if(x-b/2<h-1e-9||x+b/2>p+1e-9){x=(h+p)/2;}if(d>=0){x=Math.max(x,g+b/2);x=Math.min(x,r-b/2);}else{x=Math.min(x,r-b/2);x=Math.max(x,g-b/2);}var y=e;return{x:x,y:y,labelWidth:b,labelShortened:b!==q,xSpace:r-g,centroidX:d,centroidY:e,asymmetry:Math.abs(x-d)};},value:function(c,b){if(c.labelWidth<0){return-10000;}if(c.labelWidth<b.labelWidth){return-100;}if(c.labelWidth>b.labelWidth){return(c.labelWidth-b.labelWidth)*1000;}if(b.labelShortened&&c.labelWidth===b.labelWidth){return(c.xSpace-b.xSpace)*100;}return 0;},doesFitHeight:function(b,u,c,i,d){var y=-Math.cos(this.startAngle)*(this.r+this.radiusPadding);var e=-Math.cos(this.endAngle)*(this.r+this.radiusPadding);if(Math.abs(this.startAngle-(this.endAngle%(2*Math.PI)))<1e-9){y=-this.backgroundHeight/2;e=this.backgroundHeight/2;}else if(b===0){y=-this.backgroundHeight/2;e=this.backgroundHeight/2;}else if(b>0){if(!this.isStartAngleOnRight()){y=-this.backgroundHeight/2;}else if(b<=Math.sin(this.startAngle)*(this.r+this.radiusPadding)){y=b/-Math.tan(this.startAngle);}if(!this.isEndAngleOnRight()){e=this.backgroundHeight/2;}else if(b<=Math.sin(this.endAngle)*(this.r+this.radiusPadding)){e=b/-Math.tan(this.endAngle);}if(i&&!d&&y>=c){y=-this.backgroundHeight/2;}if(i&&!d&&e<=u){e=this.backgroundHeight/2;}}else{if(this.isStartAngleOnRight()){y=this.backgroundHeight/2;}else if(b>Math.sin(this.startAngle)*(this.r+this.radiusPadding)){y=b/-Math.tan(this.startAngle);}if(this.isEndAngleOnRight()){e=-this.backgroundHeight/2;}else if(b>Math.sin(this.endAngle)*(this.r+this.radiusPadding)){e=b/-Math.tan(this.endAngle);}if(!i&&d&&e>=c){e=-this.backgroundHeight/2;}if(!i&&d&&y<=u){y=this.backgroundHeight/2;}}if(!d){this.svgBackground.selectAll(".rightBorder").remove();if(this.debug){this.svgBackground.append("svg:rect").attr("class","rightBorder").attr("x",b-3).attr("y",y-3).attr("width",6).attr("height",6).style("fill","green");this.svgBackground.append("svg:circle").attr("class","rightBorder").attr("cx",b).attr("cy",e).attr("this.r",3).style("fill","green");}}else{this.svgBackground.selectAll(".leftBorder").remove();if(this.debug){this.svgBackground.append("svg:rect").attr("class","leftBorder").attr("x",b-3).attr("y",y-3).attr("width",6).attr("height",6).style("fill","red");this.svgBackground.append("svg:circle").attr("class","leftBorder").attr("cx",b).attr("cy",e).attr("this.r",3).style("fill","red");}}return(u>=Math.min(y,e)-1e-9&&c<=Math.max(y,e)+1e-9);},calcLeftBorder:function(x,y){var b=-this.backgroundWidth/2;if(Math.abs(this.startAngle-(this.endAngle%(2*Math.PI)))<1e-9){return b;}if(y<=0){if(y>-Math.cos(this.startAngle)*(this.r+this.radiusPadding)){b=Math.tan(this.startAngle)*-y;}}else if(y<-Math.cos(this.endAngle)*(this.r+this.radiusPadding)){b=Math.tan(this.endAngle)*-y;}return b;},calcRightBorder:function(x,y){var b=this.backgroundWidth/2;if(Math.abs(this.startAngle-(this.endAngle%(2*Math.PI)))<1e-9){return b;}if(y>=0){if(-y>Math.cos(this.startAngle)*(this.r+this.radiusPadding)){b=Math.tan(this.startAngle)*-y;}}else if(-y<Math.cos(this.endAngle)*(this.r+this.radiusPadding)){b=Math.tan(this.endAngle)*-y;}return b;},calcPerimeterBorder:function(x,y){var b=x>0?this.backgroundWidth/2:-this.backgroundWidth/2;b=Math.sqrt(this.r*this.r-y*y);if(x<0){b*=-1;}return b;},isStartAngleOnRight:function(){return(this.startAngle>0&&this.startAngle<=((2*Math.PI)/360)*180);},isEndAngleOnRight:function(){return(this.endAngle%(2*Math.PI)<((2*Math.PI)/360)*180);}};return a;})();P.Tweens=(function(){var T={};T.tweenGenSimple=function(d,i,a,b,o,s){var c={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:b,outerRadius:o};var e={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:b,outerRadius:o};var j=d3.interpolate(c,e);return function(t){return s(j(t));};};T.tweenGenSimpleText=function(d,i,a,b,o,c,e){var g=" ";if(d.labelElement.childNodes[1]&&d.labelElement.childNodes[1].childNodes[0]&&d.labelElement.childNodes[1].childNodes[0].data){g=d.labelElement.childNodes[1].childNodes[0].data;}var h=new P.Labelposition(c.options.width,c.options.height,d.oldArc.startAngle,d.oldArc.endAngle,c.options.outerRadius,d.labelElement.childNodes[1].getBBox().width,d.labelElement.childNodes[1].getBBox().height,c.svgArcGen(d).centroid(d),g,c.svg);h.update();var k=[h.x,h.y];var m=new P.Labelposition(c.options.width,c.options.height,d.startAngle,d.endAngle,c.options.outerRadius,d.labelElement.childNodes[1].getBBox().width,d.labelElement.childNodes[1].getBBox().height,c.svgArcGen(d).centroid(d),g,c.svg);m.update();if(m.labelWidth<d.labelElement.childNodes[1].getBBox().width){c.adjustLabelWidth(d.labelElement,m.labelWidth);}var n=[m.x,m.y];var j=d3.interpolateArray(k,n);var p=function(q){var t;if(e){t=T.translateStr4Padding(d.startAngle,d.endAngle,c.options.padding4click,q[0],q[1]);}else{t="translate("+q+")";}return t;};return function(t){return p(j(t));};};T.translateStr4Padding=function(s,e,p,x,y){var a=e-s;var b=p*Math.sin(a/2);var c=-(p*Math.cos(a/2));var t=b*Math.cos(s)-c*Math.sin(s);c=b*Math.sin(s)+c*Math.cos(s);b=t;var d="translate("+(x+b)+", "+(y+c)+")";return d;};T.tweenGenEcstasy=function(d,i,a,b,o,s){var c=Math.round((b+o)/2);var e;var g;if(i%2){e=o;g=c;}else{e=c;g=b;}var h={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:b,outerRadius:o};var j={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:g,outerRadius:e};var k=d3.interpolate(h,j);h={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:g,outerRadius:e};j={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:g,outerRadius:e};var r=d3.interpolate(h,j);h={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:g,outerRadius:e};j={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:b,outerRadius:o};var u=d3.interpolate(h,j);return function(t){if(t<=0.25){return s(k(t*4));}if(t<=0.75){return s(r((t-0.25)*2));}return s(u((t-0.75)*4));};};T.tweenGenLSD=function(d,i,a,b,o,s){var c=Math.round((b+o)/2);var e;var g;if(i%2){e=o;g=c;}else{e=c;g=b;}var h={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:b,outerRadius:o};var j={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:g,outerRadius:e};var k=d3.interpolate(h,j);h={startAngle:d.oldArc.startAngle,endAngle:d.oldArc.endAngle,innerRadius:g,outerRadius:e};j={startAngle:d.startAngle,endAngle:d.startAngle+(d.oldArc.endAngle-d.oldArc.startAngle),innerRadius:g,outerRadius:e};var m=d3.interpolate(h,j);h={startAngle:d.startAngle,endAngle:d.startAngle+(d.oldArc.endAngle-d.oldArc.startAngle),innerRadius:g,outerRadius:e};j={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:g,outerRadius:e};var r=d3.interpolate(h,j);h={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:g,outerRadius:e};j={startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:b,outerRadius:o};var u=d3.interpolate(h,j);return function(t){if(t<=0.25){return s(k(t*4));}if(t<=0.5){return s(m((t-0.25)*4));}if(t<=0.75){return s(r((t-0.5)*4));}return s(u((t-0.75)*4));};};return T;})();var l={};l.debug=function(t){};P.prototype={init:function(p,o,a,m){this.application=a;this.parent=p;this.model=m;this.chartElements=[];var b=d3.select(p);var s=$(p).innerHeight();var c=$(p).innerWidth();if(o.height>s){s=o.height;}var r=Math.min(c,s)/2;this.options={"dimension-pie":"YEAR",backgroundWidth:c,backgroundHeight:s,width:c,height:s,innerRadius:0,outerRadius:r*0.8,tweenGen:P.Tweens.tweenGenSimple,tweenGenText:P.Tweens.tweenGenSimpleText,arcCalculator:P.generateHistoricalArcCalculator(),animationduration:1500,labelHideThreshold:0.05,easing:"linear",pieChartClass:"sap-piechart",pieChartParentClass:"sapUshellSearchFacetPieChart",color:"blue",strokewidth:1,strokewidthHover:3,padding4click:7,multipleselectable:true,oSearchFacetDialog:null};if(o){for(var d in o){this.options[d]=o[d];}}this.createAttributeService(P,"innerRadius",function(){this.init();});this.createAttributeService(P,"outerRadius",function(){this.init();});this.createAttributeService(P,"tweenGen",function(){this.init();});this.createAttributeService(P,"tweenGenText",function(){this.init();});this.createAttributeService(P,"width",function(){this.init();});this.createAttributeService(P,"height",function(){this.init();});this.createAttributeService(P,"animationduration");this.createAttributeService(P,"labelHideThreshold");this.createAttributeService(P,"arcCalculator");var x=Math.round(this.options.width/2);var y=Math.round(this.options.height/2);this.svg=b.append("svg:svg").attr("width",c).attr("height",s).attr("id",p.id+"_svg").append("svg:g").attr("transform","translate("+x+","+y+")");this.svgArcs=this.svg.append("svg:g");this.svgLabels=this.svg.append("svg:g");this.svg.attr("class",this.options.pieChartClass);this.inittween();this.oldArcs=[];this.clickedSegment={};this.firstUpdate=true;},getParent:function(){return this.parent;},createAttributeService:function(c,a,i){c.prototype[a]=function(v){if(v===null){return this.options[a];}this.options[a]=v;if(i){i.call(this);}return this;};},inittween:function(){var t=this;t.xOrigin=Math.round(t.options.width/2);t.yOrigin=Math.round(t.options.height/2);t.svg.attr("width",this.options.width).attr("height",this.options.height);this.tweenGenArc=function(d,i,a){return t.options.tweenGen(d,i,a,t.options.innerRadius,t.options.outerRadius,t.svgArcGen(d));};this.tweenGenText=function(d,i,a,b){return t.options.tweenGenText(d,i,a,t.options.innerRadius,t.options.outerRadius,t,b);};},update:function(d){this.notAnimatedUpdate(d);},notAnimatedUpdate:function(a){var t=this;var b=[];if(!a){return;}this.chartElements=a;t.svgArcs.selectAll("path").remove();t.svgLabels.selectAll("g").remove();var c=0;for(var i=0;i<a.length;++i){c+=a[i].value;}for(var j=0;j<a.length;++j){a[j].percentage=a[j].value/c;}b=this.options.arcCalculator.calculateNewArcsOnly(a);var s=this.svgArcs.selectAll("path").data(b,P.getIdOfArc);if(!s.exit().empty()){s.exit().remove();}if(!s.empty()){s.attr("d",function(d){var p=t.svgArcGen(d);return p(d);}).attr("transform",function(d){var e;if(d.data.selected){e=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,0,0);}else{e="translate(0,0)";}return e;}).style("stroke",function(d){var e;if(d.data.stroke==="none"){e=d.data.stroke;}else if(d.data.selected||d.data.hovered){e="#dadada";}else{e="white";}return e;}).style("stroke-width",function(d){var e;if(d.data.selected||d.data.hovered){e=t.options.strokewidthHover;}else{e=t.options.strokewidth;}return e;}).style("opacity",function(d){var o;if(d.data.selected||d.data.hovered){o="1";}else if(d.data.initial){o="0.75";}else{o="0.5";}return o;}).each(function(d,i){while(this.hasChildNodes()){this.removeChild(this.lastChild);}d3.select(this).append("svg:title").text(""+d.data.tooltip);});}s.enter().append("svg:path").attr("transform",function(d){var e;if(d.data.selected){t.clickedSegment[d.data.id]=this;e=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,0,0);}return e;}).attr("shape-rendering","geometricPrecision").attr("tabindex","0").style("stroke",function(d){var e;if(d.data.stroke==="none"){e=d.data.stroke;}else if(d.data.selected||d.data.hovered){e="#dadada";}else{e="white";}return e;}).style("stroke-width",function(d){var e;if(d.data.selected||d.data.hovered){e=t.options.strokewidthHover;}else{e=t.options.strokewidth;}return e;}).style("opacity",function(d){var o;if(d.data.selected||d.data.hovered){o="1";}else if(d.data.initial){o="0.75";}else{o="0.5";}return o;}).attr("fill",function(d,i){return d.data.fill;}).on("keydown",function(d,i){var e=d3.event;var h=e.keyCode||e.which;if(h==32){e.target.__onclick();}}).on("click",function(d,i){var e;if(d.data.click&&d.data.pieupdateuionly===false){var r=d.data.click(d,i);if(!t.options.multipleselectable&&!r){return;}}var h,k;var m;var n=t.getLabelElementtbyLabel(d.data.label);if(n){var o=" ";if(n.childNodes[1]&&n.childNodes[1].childNodes[0]&&n.childNodes[1].childNodes[0].data){o=n.childNodes[1].childNodes[0].data;}m=new P.Labelposition(t.options.width,t.options.height,d.startAngle,d.endAngle,t.options.outerRadius,n.childNodes[1].getBoundingClientRect().width,n.childNodes[1].getBoundingClientRect().height,t.svgArcGen(d).centroid(d),o,t.svg);m.update();if(m.labelWidth<n.childNodes[1].getBoundingClientRect().width){t.adjustLabelWidth(n,m.labelWidth);}}if(d.data.selected){if(!t.options.multipleselectable&&Object.keys(t.clickedSegment).length>0){delete t.clickedSegment[d.data.id];}h="translate(0,0)";if(n){k="translate("+m.x+","+m.y+")";}d.data.selected=false;if(t.options.oSearchFacetDialog){e={};e.cnt=t.getNumberOfClickedSegments();e.dataObject=d.data;t.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(e);}else{t.model.removeFilterCondition(d.data.filterCondition,true);}}else{if(!t.options.multipleselectable){if(Object.keys(t.clickedSegment).length>0){for(var p in t.clickedSegment){var q=t.clickedSegment[p];if(typeof q.__onclick==="function"){q.__data__.data.pieupdateuionly=true;q.__onclick.apply(q);}delete t.clickedSegment[p];}}if(Object.keys(t.clickedSegment).length<1){t.clickedSegment[d.data.id]=this;}}h=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,0,0);if(n){k=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,m.x,m.y);}d.data.selected=true;if(d.data.filterCondition){if(t.options.oSearchFacetDialog){e={};e.cnt=t.getNumberOfClickedSegments();e.dataObject=d.data;t.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(e);}else{t.model.addFilterCondition(d.data.filterCondition,true);}}}d3.select(this).transition().duration(1000).ease(d3.ease("elastic")).attr("transform",h).style("stroke",function(d){var v;if(d.data.stroke==="none"){v=d.data.stroke;}else if(d.data.selected){v="#dadada";}else{v="white";}return v;}).style("stroke-width",function(d){var v;if(d.data.selected){v=t.options.strokewidthHover;}else{v=t.options.strokewidth;}return v;}).style("opacity",function(d){var v;if(d.data.selected||d.data.hovered){v="1";}else if(d.data.initial){v="0.75";}else{v="0.5";}return v;});var u=t.getLabelElementtbyLabel(d.data.label);if(u){d3.select(u).transition().duration(1000).ease(d3.ease("elastic")).attr("transform",k);}}).on("mouseover",function(d,i){if(!t.options.multipleselectable&&Object.keys(t.clickedSegment).length>0){return;}if(d.data.selected||d.data.hovered){return;}if(d.data.mouseover){var r=d.data.mouseover(d,i);if(!t.options.multipleselectable&&!r){return;}}}).on("mouseout",function(d,i){if(d.data.selected){d3.select(this).style("opacity",1);}if(!t.options.multipleselectable&&Object.keys(t.clickedSegment).length>0){return;}if(d.data.selected){return;}if(d.data.mouseout){var r=d.data.mouseout(d,i);if(!t.options.multipleselectable&&!r){return;}}}).attr("d",function(d){var p=t.svgArcGen(d);return p(d);}).append("svg:title").text(function(d){return""+d.data.tooltip;});s=t.svgLabels.selectAll("g").data(b,P.getIdOfArc);if(!s.exit().empty()){s.exit().remove();}if(!s.empty()){s.style("opacity",function(d){if(d.removed||d.data.percentage<t.options.labelHideThreshold){return 0;}return 1;}).attr("transform",function(d){var e;var h;if(this.childNodes[1]&&this.childNodes[1].childNodes[0]){h=new P.Labelposition(t.options.width,t.options.height,d.startAngle,d.endAngle,t.options.outerRadius,this.getBoundingClientRect().width,this.getBoundingClientRect().height,t.svgArcGen(d).centroid(d),d.data.label,t.svg);}else{h=new P.Labelposition(t.options.width,t.options.height,d.startAngle,d.endAngle,t.options.outerRadius,this.getBoundingClientRect().width,this.getBoundingClientRect().height,t.svgArcGen(d).centroid(d)," ",t.svg);}h.update();if(h.labelWidth<this.childNodes[1].getBoundingClientRect().width){t.adjustLabelWidth(this,h.labelWidth);}if(d.data.selected){e=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,h.x,h.y);}else{e="translate("+h.x+","+h.y+")";}return e;});}if(!s.enter().empty()){var g=s.enter().append("svg:g").style("opacity",0);g.append("svg:text").attr("class","labelshadow").attr("text-anchor","middle").text(function(d){return""+d.data.label;}).style("pointer-events","none");g.append("svg:text").attr("class","label").attr("text-anchor","middle").text(function(d){return""+d.data.label;}).style("pointer-events","none");g.style("opacity",function(d){if(d.removed||d.data.percentage<t.options.labelHideThreshold){return 0;}return 1;}).attr("transform",function(d){var e;var h=new P.Labelposition(t.options.width,t.options.height,d.startAngle,d.endAngle,t.options.outerRadius,this.getBoundingClientRect().width,this.getBoundingClientRect().height,t.svgArcGen(d).centroid(d),d.data.label,t.svg);h.update();if(h.labelWidth<this.childNodes[1].getBoundingClientRect().width){t.adjustLabelWidth(this,h.labelWidth);}if(d.data.selected){e=P.translateStr4Padding(d.startAngle,d.endAngle,t.options.padding4click,h.x,h.y);}else{e="translate("+h.x+","+h.y+")";}return e;});}t.oldArcs=P.removeDeletedArcs(b);},getNumberOfClickedSegments:function(){var c=0;var a=this.chartElements;for(var i=0;i<a.length;i++){if(a[i].selected===true){c++;}}return c;},adjustLabelWidth:function(e,t){var s=e.childNodes[0];var a=e.childNodes[1];if(t<=0){s.childNodes[0].data="";a.childNodes[0].data="";return;}var b=s.childNodes[0].data.length;s.childNodes[0].data+="...";var c="";while(s.getBBox().width>t){c=s.childNodes[0].data;c=c.substr(0,b-1)+c.substr(b,3);s.childNodes[0].data=c;b--;if(b<=0){s.childNodes[0].data="";break;}}a.childNodes[0].data=s.childNodes[0].data;},getArcsWithLabel:function(a){var t=this;var b=[];for(var i=0;i<a.length;++i){var c=a[i];if(c.data.percentage>t.options.labelHideThreshold){b.push(c);}}return b;},svgArcGen:function(d){var t=this;var a=d3.svg.arc().innerRadius(function(d){return t.options.innerRadius;}).outerRadius(function(d){return t.options.outerRadius;}).startAngle(function(d){return d.startAngle;}).endAngle(function(d){return d.endAngle;});return a;},getArcElementtbyLabel:function(a){var t=this;t.svgArcs.selectAll("g").each(function(d,i){if(d.data.label===a){t=this;}return;});return t;},getLabelElementtbyLabel:function(a){var t=this;t.svgLabels.selectAll("g").each(function(d,i){if(d.data.label===a){t=this;}});return t;}};P.removeDeletedArcs=function(a){var t=[];for(var i=0;i<a.length;++i){var b=a[i];if(!b.removed){t.push(b);}}return t;};P.createZeroArc=function(a,e){return{startAngle:a,endAngle:a,data:e,removed:true};};P.insertAfter=function(a,i,b){var n;if(i>=0){var c=a[i];n=P.createZeroArc(c.endAngle,b.data);}else{n=P.createZeroArc(0,b.data);}n.oldArc=b;a.splice(i+1,0,n);};P.getIdOfArc=function(a){return a.data.id;};P.arcsGen=d3.layout.pie().value(function(d){return d.value;}).sort(null);P.getIndexById=function(a,b){for(var i=0;i<a.length;++i){var c=a[i];if(P.getIdOfArc(c)===b){return i;}}return null;};P.add2arcSequence=function(d,a){if(f()){var b=function(x){a.getIndex(x.id);};d.forEach(b);}return d;};P.translateStr4Padding=function(s,e,p,x,y){var a=e-s;var b=p*Math.sin(a/2);var c=-(p*Math.cos(a/2));var t=b*Math.cos(s)-c*Math.sin(s);c=b*Math.sin(s)+c*Math.cos(s);b=t;var d="translate("+(x+b)+", "+(y+c)+")";return d;};P.Sequence=function(){this.init.apply(this,arguments);};P.Sequence.prototype={init:function(){this.maxIndex=0;this.objectMap={};},getIndex:function(o){var i=this.objectMap[o];if(typeof i!=="undefined"){return i;}i=this.maxIndex;this.maxIndex++;this.objectMap[o]=i;return i;}};P.generateDefaultArcCalculator=function(){return new P.DefaultArcCalculator();};P.DefaultArcCalculator=function(){this.init.apply(this,arguments);};P.DefaultArcCalculator.prototype={init:function(){this.arcSequence=new P.Sequence();},calculateNewArcsOnly:function(d){var t=this;d=d.slice();P.add2arcSequence(d,t.arcSequence);d.sort(function(a,b){return(t.arcSequence.getIndex(a.id)-t.arcSequence.getIndex(b.id));});var n=P.arcsGen(d);return n;},calculateArcs:function(o,d){var n=P.arcsGen(d);this.insertMissingArcs(o,n,true);this.insertMissingArcs(n,o,false);return n;},insertMissingArcs:function(a,b,i){var c=-1;for(var d=0;d<b.length;++d){var e=b[d];var g=P.getIndexById(a,e.data.id);var h;if(g!==null){h=a[g];h.oldArc=e;c=g;continue;}else{if(i){c=this.determineInsertIndex(a,c,b,d);}var n;if(c>=0){var j=a[c];n=P.createZeroArc(j.endAngle,e.data);}else{n=P.createZeroArc(0,e.data);}n.oldArc=e;a.splice(c+1,0,n);c++;}}},determineInsertIndex:function(a,b,c,d){var e=c[d];var s=this.arcSequence.getIndex(e.data.id);var i;for(i=b+1;i<a.length;++i){var g=this.arcSequence.getIndex(a[i].data.id);if(g>s){break;}if(P.getIndexById(c,a[i].data.id)!==null){break;}}return i-1;}};P.generateHistoricalArcCalculator=function(){return new this.HistoricalArcCalculator();};P.HistoricalArcCalculator=function(){this.init.apply(this,arguments);};P.HistoricalArcCalculator.prototype={init:function(){this.arcSequence=new P.Sequence();},calculateNewArcsOnly:function(d){var t=this;d=d.slice();P.add2arcSequence(d,t.arcSequence);var n=P.arcsGen(d);return n;},calculateArcs:function(o,d){var t=this;d=d.slice();P.add2arcSequence(d,t.arcSequence);d.sort(function(a,b){return(t.arcSequence.getIndex(a.id)-t.arcSequence.getIndex(b.id));});var n=P.arcsGen(d);this.insertMissingArcs(o,n);this.insertMissingArcs(n,o);return n;},insertMissingArcs:function(a,b){var t=this;var c=0;for(var d=0;d<b.length;++d){var e=b[d];var g=t.arcSequence.getIndex(e.data.id);var h;var i=false;for(;c<a.length;++c){h=a[c];var j=t.arcSequence.getIndex(h.data.id);if(j===g){i=true;break;}if(j>g){break;}}if(i){h.oldArc=e;}else{var n;if(c-1>=0&&c-1<a.length){var k=a[c-1];n=P.createZeroArc(k.endAngle,e.data);}else{n=P.createZeroArc(0,e.data);}a.splice(c,0,n);n.oldArc=e;}c++;}}};R.write("</div>");C.PieChart=P;},
getFacetIndexById:function(c){var a=-1;var t=$("#"+c).parent().parent().parent().parent().parent()[0];var b=t.id;var d=$(".sapUshellSearchFacetIconTabBar");for(var i=0;i<d.length;i++){var e=d[i].id;if(e===b){a=i;break;}}return a;},
getFacetIndexByIdForLargePieChart:function(c){var a=-1;var t=$("#"+c).parent().parent()[0];var b=t.id;var d=$(".searchFacetLargeChartContainer");for(var i=0;i<d.length;i++){var e=d[i].id;if(e===b){a=i;break;}}return a;},
getPieChartIndexByFacetIndex:function(f){var s;var a=-1;var p=0;for(var i=0;i<f;i++){s=$($(".sapUshellSearchFacetIconTabBar")[i]).find(".sapMLIBContent")[1].firstChild.id;if(s.match(/pieChart/)!==null){p++;}}a=p;return a;},
getSumSelected:function(d){var a;var b=0;if(d){for(var i=0;i<d.length;i++){if(d[i].facetType==="attribute"){for(var j=0;j<d[i].items.length;j++){a=d[i].items[j].value;if(a&&d[i].items[j].selected){b+=a;}}}}}return b;},
getDataForPieChart:function(d,m,f){var r=[];var g=[];var a={};var b=0;var c=-1;var e="";var s=m.oData.count;var o=s;var p=0;this.iMissingCnt=0;for(var i=0;i<d.length;i++){if(d[i].facetType==="attribute"){c++;if(d[i].totalCount){o=d[i].totalCount;}g=[];p=0;for(var j=0;j<d[i].items.length;j++){a={};b=d[i].items[j].value;if(b){e=""+b;p+=b;a.filterCondition=d[i].items[j].filterCondition;a.dimension=d[i].items[j].facetTitle;a.label=d[i].items[j].label;a.selected=d[i].items[j].selected;a.filterLabel=d[i].items[j].label;a.id=d[i].items[j].label;a.value=b;a.valueLabel=d[i].items[j].valueLabel;if(e){a.tooltip=d[i].items[j].label+": "+b;}else{a.tooltip=d[i].items[j].label;}a.filtered=false;a.removed=false;a.fill="#007CAA";a.maxLabelLength=30;g.push(a);}else if(c===f){this.iMissingCnt++;}}var h=Math.round((p/o)*100);var k=100-h;if(k>0){if(k===100){k=99;}var l=(18*p)/350;var n=""+k;a={};a.filterCondition=null;a.dimension="";a.label=n;a.id="perc_missing";a.value=l;a.valueLabel=n;a.tooltip=sap.ushell.resources.i18n.getText("facetPieChartOverflowText",[n]);a.filtered=false;a.removed=false;a.fill="transparent";a.stroke="none";a.maxLabelLength=30;g.push(a);}r.push(g);}}return r;},
getDataForPieChartLarge:function(d,m){var g=[];var i={};var a=0;var p=0;g=[];for(var j=0;j<d.length;j++){a=d[j].value;if(a){i={};p=p+a;i.filterCondition=d[j].filterCondition;i.dimension=d[j].facetAttribute;i.label=d[j].label;i.selected=d[j].selected;i.filterLabel=d[j].label;i.id=d[j].label;i.value=a;i.valueLabel=d[j].valueLabel;i.tooltip=d[j].label+"\t: "+a;i.filtered=false;i.removed=false;i.fill="#007CAA";i.maxLabelLength=30;g.push(i);}}return g;},
directUpdate:function(d,p,m,o){var c,a,b;var f=[];var e=20;a=null;b=this.getModel();if(!b){b=this.oParent.getModel();}o.pieChartParentClass="sapUshellSearchFacetPieChartLarge";o.height=o.relevantContainerHeight;o.labelHideThreshold=0.000001;$(p).parent().parent().height(o.height);o.width=$(p).parent().parent().width();this.chartElements=this.getDataForPieChartLarge(d,m);c=new this.PieChart(p,o,a,b);for(var i=0;i<e;i++){if(this.chartElements[i]){f.push(this.chartElements[i]);}}c.update(f);},
onAfterRendering:function(){var t=this;var d,c,a,m,b,p,f;var o={};if(typeof SVGElement.prototype.blur==="undefined"){SVGElement.prototype.blur=function(){};}b=null;m=this.getModel();if(!m){m=this.oParent.oModels.facets;}if(m){p=$("#"+this.sId)[0];if($(p).parent()[0].className==="sapMLIBContent"){o.pieChartParentClass="sapUshellSearchFacetPieChart";f=this.getFacetIndexById(this.sId);p.className=o.pieChartParentClass;d=this.getDataForPieChart(m.oData.facets,m,f);c=d[f];a=new this.PieChart(p,o,b,m);a.update(c);var i=$(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];var I=sap.ui.getCore().byId(i.id);if(t.iMissingCnt>0){I.setVisible(true);var e=sap.ushell.resources.i18n.getText("infoZeileNumberMoreSelected",[t.iMissingCnt]);I.setText(e);I.rerender();}else{I.setVisible(false);}}else if($(p)[0].className==="largeChart2piechart"){$(p).attr("tabindex","0");}}}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFacetTabBar',['sap/base/Log','sap/ushell/renderers/fiori2/search/SearchFacetDialogModel','sap/ushell/renderers/fiori2/search/controls/SearchFacetDialog','sap/m/GroupHeaderListItemRenderer','sap/m/ButtonRenderer'],function(L){"use strict";
sap.m.Button.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetDisplayModeDropDown',{renderer:'sap.ushell.renderers.fiori2.search.controls.SearchFacetDisplayModeDropDownRenderer'});
sap.ushell.renderers.fiori2.search.controls.SearchFacetDisplayModeDropDownRenderer=jQuery.extend(true,{},sap.m.ButtonRenderer);
sap.m.GroupHeaderListItemRenderer.extend('sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItemRenderer');
sap.m.GroupHeaderListItem.extend('sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItem',{
renderer:'sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItemRenderer',
metadata:{properties:{upperCase:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{button:{type:'sap.ushell.renderers.fiori2.search.controls.SearchFacetDisplayModeDropDown',multiple:false}}}
});
sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItemRenderer.renderCounter=function(r,l){var b=l.getButton();if(typeof b==='object'){this.renderCounterContent(r,l,b);}};
sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItemRenderer.renderCounterContent=function(r,l,b){r.write('<div>');r.renderControl(b);r.write('</div>');};
sap.m.SegmentedButtonItem.extend('my.SegmentedButtonItem',{aggregations:{"content1":{type:"sap.ui.core.Control",multiple:false}}});
sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchFacetTabBar',{
metadata:{properties:{"eshRole":"string","headerText":"string","selectedButtonParameters":{type:"object",defaultValue:null}},aggregations:{items:{type:"sap.m.IconTabFilter",multiple:true}}},
getSearchFacetTabBarAndDimensionById:function(b){var r={};r.index=0;var a=document.getElementById(b);var v=a.dataset.facetView;var c=a.dataset.facetViewIndex;var d=$("#"+b).parent()[0];var e=d.dataset.facetDimension;var f=$(".sapUshellSearchFacetTabBar");for(var i=0;i<f.length;i++){var g=$(".sapUshellSearchFacetTabBar .sapUshellSearchFacetTabBarHeader")[i];var h=g.dataset.facetDimension;if(h===e){r.index=i;r.control=sap.ui.getCore().byId(f[i].id);r.view=v;r.buttonIndex=c;r.dimension=e;break;}}return r;},
storeClickedTabInformation:function(e){var s,a,b,d,c;var t=e.getSource().sId;var f=this.getSearchFacetTabBarAndDimensionById(t);var p=f.control.getModel().getPersonalizationStorageInstance().getItem("search-facet-panel-chart-state");s=f.dimension;a=f.control;b=f.view;c=f.buttonIndex;d=a.getBindingContext().getObject().dimension;var g=e.getParameters().id;var h=[];var o={};o.tabId=t;o.searchFacetTabBarIndex=f.searchFacetTabBarIndex;o.buttonId=g;o.buttonIndex=c;o.dimension=d;o.view=b;h.push(o);if(p&&Object.prototype.toString.call(p)==='[object Array]'){for(var i=0;i<p.length;i++){var j=p[i];if(j.dimension!==s){h.push(j);}}}f.control.getModel().getPersonalizationStorageInstance().setItem("search-facet-panel-chart-state",h);a.getBindingContext().getObject().chartIndex=c;},
renderer:function(r,c){var a=function(y,T){return function(z){var d;var E=$(this.getDomRef()).closest(".sapUshellSearchFacetTabBar")[0];var J=sap.ui.getCore().byId($(E).attr("id"));var K=new sap.ushell.renderers.fiori2.search.SearchFacetDialogModel(c.getModel());K.initBusinessObjSearch().then(function(){K.setData(c.getModel().getData());K.sinaNext=c.getModel().sinaNext;K.prepareFacetList();if(J&&J.getBindingContext()&&J.getBindingContext().getObject()&&J.getBindingContext().getObject().dimension){d=J.getBindingContext().getObject().dimension;}var M=new sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog({selectedAttribute:d,selectedTabBarIndex:y,tabBarItems:T});M.setModel(K);M.setModel(c.getModel(),'searchModel');M.open();var P=c.getParent().getParent().getParent().getParent();P.oFacetDialog=M;c.getModel().eventLogger.logEvent({type:c.getModel().eventLogger.FACET_SHOW_MORE,referencedAttribute:d});});};};r.write('<div tabindex="0"');r.writeControlData(c);r.addClass("sapUshellSearchFacetTabBar");r.writeClasses();r.write('>');var d=c.getBindingContext().getObject().dimension;var b=c.getBindingContext().getObject().dataType;var t=c.getBindingContext().getObject().title;var e;var s;e=c.getModel().getPersonalizationStorageInstance().getItem("search-facet-panel-chart-state");if(e&&Object.prototype.toString.call(e)==='[object Array]'){for(var k=0;k<e.length;k++){if(e[k].dimension===d){s=e[k];break;}}}var f=[];var g=[];var C=null;var B=null;var h=0;if(s&&s.buttonIndex){h=s.buttonIndex;h=parseInt(h,10);}if(b!=c.getModel().sinaNext.AttributeType.String){h=0;}c.getBindingContext().getObject().chartIndex=h;var j=c.getItems();var D=new sap.ushell.renderers.fiori2.search.controls.SearchFacetDisplayModeDropDown({icon:j[h].getIcon(),type:'Transparent'});for(var i=0;i<j.length;i++){C=j[i].getContent()[0];B=new sap.m.Button({text:j[i].getText(),icon:j[i].getIcon(),press:function(E){c.storeClickedTabInformation(E);c.setSelectedButtonParameters(E.getParameters());}});B.data("facet-view",j[i].getText(),true);B.data("facet-view-index",""+i,true);B.data("dimension",d,true);f.push(B);g.push(C);}var A=new sap.m.ActionSheet({showCancelButton:false,buttons:f,placement:sap.m.PlacementType.Bottom,cancelButtonPress:function(y){L.info("sap.m.ActionSheet: cancelButton is pressed");},afterClose:function(y){var z=this;window.setTimeout(function(){var d=z.getFocusDomRef().getAttribute('data-facet-dimension');var E=$(".sapUshellSearchFacetTabBarButton");for(var i=0;i<E.length;i++){var J=E[i];var K=J.parentNode.parentNode.getAttribute('data-facet-dimension');if(K===d){J.focus();break;}}},100);L.info("=====================");L.info("sap.m.ActionSheet: closed");}});A.data("facet-dimension",d,true);D.addStyleClass("sapUshellSearchFacetTabBarButton");var l=j[h].getText();var m=sap.ushell.resources.i18n.getText('displayAs',[l]);D.setTooltip(m);D.attachPress(function(E){A.openBy(this);});D.onAfterRendering=function(){$(this.getDomRef()).attr("aria-label",sap.ushell.resources.i18n.getText('dropDown'));};if(c.getHeaderText()){var H=new sap.m.List({});H.setShowNoData(false);H.setShowSeparators(sap.m.ListSeparators.None);H.data("sap-ui-fastnavgroup","false",true);var F=false;var n=c.getModel().getProperty("/uiFilter/rootCondition");if(n.hasFilters()){F=true;}else{F=false;}var R=new sap.m.Button({icon:"sap-icon://clear-filter",tooltip:sap.ushell.resources.i18n.getText("resetFilterButton_tooltip"),type:'Transparent',enabled:F,press:function(E){var y=c.getModel();y.eventLogger.logEvent({type:y.eventLogger.CLEAR_ALL_FILTERS});y.resetFilterConditions(true);}});R.addStyleClass("sapUshellSearchFilterByResetButton");R.onAfterRendering=function(){$(this.getDomRef()).attr("aria-label",sap.ushell.resources.i18n.getText('resetFilterButton_tooltip'));};var o=new sap.m.Title({text:c.getHeaderText()});o.addStyleClass("sapUshellSearchFilterByResetButtonLabel");var S=new sap.m.ToolbarSpacer();var p=new sap.m.Toolbar({content:[o,S,R]});p.data("sap-ui-fastnavgroup","false",true);H.setHeaderToolbar(p);H.addStyleClass('sapUshellSearchFilterByHeaderList');H.onAfterRendering=function(){$(".sapUshellSearchFilterByHeaderList").find("ul").attr("tabindex","-1");};r.renderControl(H);}var q=new sap.m.CustomListItem({content:g[h]});q.setModel(c.getModel(),'facets');q.addStyleClass("sapUshellSearchFacetList");var G;if(b===c.getModel().sinaNext.AttributeType.String){G=new sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItem({title:t,button:D});}else{G=new sap.ushell.renderers.fiori2.search.controls.SearchGroupHeaderListItem({title:t});}G.data("facet-dimension",d,true);G.addStyleClass("sapUshellSearchFacetTabBarHeader");var u=new sap.m.Link({text:sap.ushell.resources.i18n.getText("showMore"),press:a(h,j)});u.setModel(c.getModel("i18n"));u.addStyleClass('sapUshellSearchFacetShowMoreLink');var I=new sap.m.Label({text:""});I.addStyleClass('sapUshellSearchFacetInfoZeile');var v=new sap.m.VBox({items:[I,u]});var w=new sap.m.CustomListItem({content:v,visible:{parts:[{path:'/uiFilter/dataSource'}],formatter:function(y){return y.type!==this.getModel().sinaNext.DataSourceType.Category;}}});w.addStyleClass('sapUshellSearchFacetShowMoreItem');var x=new sap.m.List({showSeparators:sap.m.ListSeparators.None,items:[G,q,w]});x.data("sap-ui-fastnavgroup","false",true);x.setModel(c.getModel());r.renderControl(x);c.getItems()[h].addContent(g[h]);r.write("</div>");},
onAfterRendering:function(){jQuery(this.getDomRef()).removeAttr("tabindex");}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFieldGroup',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/controls/SearchSelect','sap/ushell/renderers/fiori2/search/controls/SearchInput','sap/ushell/renderers/fiori2/search/controls/SearchButton'],function(){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup",{metadata:{properties:{"selectActive":{defaultValue:true,type:"boolean"},"inputActive":{defaultValue:true,type:"boolean"},"buttonActive":{defaultValue:true,type:"boolean"},"cancelButtonActive":{defaultValue:true,type:"boolean"}},aggregations:{"_flexBox":{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"},"_buttonAriaText":{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}},constructor:function(){sap.ui.core.Control.prototype.constructor.apply(this,arguments);var t=this;t.initSelect();t.initInput();t.initButton();t.initCancelButton();t.initFlexBox();},setCancelButtonActive:function(a){if(a===this.getProperty('cancelButtonActive')){return;}this.setProperty('cancelButtonActive',a);this.initFlexBox();},initFlexBox:function(){if(!this.select){return;}var a=[];if(this.getSelectActive()){this.select.setLayoutData(new sap.m.FlexItemData({growFactor:0}));a.push(this.select);}if(this.getInputActive()){this.input.setLayoutData(new sap.m.FlexItemData({growFactor:1}));a.push(this.input);}if(this.getButtonActive()){this.button.setLayoutData(new sap.m.FlexItemData({growFactor:0}));a.push(this.button);}if(this.getCancelButtonActive()){this.cancelButton.setLayoutData(new sap.m.FlexItemData({growFactor:0}));a.push(this.cancelButton);}var f=this.getAggregation('_flexBox');if(!f){f=new sap.m.FlexBox({alignItems:sap.m.FlexAlignItems.Start,items:a});this.setAggregation('_flexBox',f);}else{f.removeAllAggregation('items');for(var i=0;i<a.length;++i){f.addItem(a[i]);}}},initSelect:function(){var t=this;t.select=new sap.ushell.renderers.fiori2.search.controls.SearchSelect(t.getId()+'-select',{});t.select.attachChange(function(){if(t.getAggregation("input")){var i=t.getAggregation("input");i.destroySuggestionRows();}});},initInput:function(){var t=this;t.input=new sap.ushell.renderers.fiori2.search.controls.SearchInput(t.getId()+'-input',{});},initButton:function(){var t=this;t.button=new sap.ushell.renderers.fiori2.search.controls.SearchButton(t.getId()+'-button',{tooltip:"{i18n>searchbox_tooltip}",press:function(e){var m=t.button.getModel();if(!m.config.odataProvider&&m.config.isLaunchpad()){if(t.input.getValue()===""&&m.getDataSource()===m.getDefaultDataSource()){return;}}m.invalidateQuery();t.input.destroySuggestionRows();t.input.triggerSearch(e);}});t.setAggregation("_buttonAriaText",new sap.ui.core.InvisibleText(t.getId()+'-buttonAriaText',{text:"{i18n>searchbox_tooltip}"}));t.button.addAriaLabelledBy(t.getAggregation("_buttonAriaText"));},initCancelButton:function(){this.cancelButton=new sap.m.Button({text:'{i18n>cancelBtn}'});this.cancelButton.addStyleClass("sapUshellSearchCancelButton");},setModel:function(m){this.select.setModel(m);this.input.setModel(m);this.button.setModel(m);this.cancelButton.setModel(m);},renderer:function(r,c){r.write('<div');r.writeControlData(c);r.addClass("SearchFieldGroup");r.writeClasses();r.write('>');r.renderControl(c.getAggregation('_flexBox'));r.renderControl(c.getAggregation('_buttonAriaText'));r.write('</div>');}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchFilterBar',['sap/m/Toolbar'],function(){"use strict";return sap.m.Toolbar.extend("sap.ushell.renderers.fiori2.search.controls.SearchFilterBar",{constructor:function(o){var t=this;o=jQuery.extend({},{design:sap.m.ToolbarDesign.Info},o);sap.m.Toolbar.prototype.constructor.apply(t,[o]);t.addStyleClass('sapUshellSearchFilterContextualBar');t.filterFormatter=t.filterFormatter.bind(t);t.filterText=new sap.m.Text({text:{parts:[{path:"/uiFilter/rootCondition"},{path:"/facets"}],formatter:t.filterFormatter},tooltip:{parts:[{path:"/uiFilter/rootCondition"},{path:"/facets"}],formatter:t.filterFormatter}}).addStyleClass("sapUshellSearchFilterText");t.filterText.setMaxLines(1);t.filterText.clampText();t.addContent(t.filterText);t.addContent(new sap.m.ToolbarSpacer());t.resetButton=new sap.ui.core.Icon({src:"sap-icon://clear-filter",tooltip:sap.ushell.resources.i18n.getText("resetFilterButton_tooltip")}).addStyleClass("sapUshellSearchFilterResetButton");t.addContent(t.resetButton);},filterFormatter:function(r,f){if(!r||!r.hasFilters()){return'';}r=this.sortConditions(r,f);var l=[];for(var i=0;i<r.conditions.length;++i){var c=r.conditions[i];for(var j=0;j<c.conditions.length;++j){var a=c.conditions[j];l.push(this._formatLabel(a.valueLabel,a.operator));}}return sap.ushell.resources.i18n.getText("filtered_by",l.join(', '));},_formatLabel:function(l,o){var a;switch(o){case'Bw':a=l+'*';break;case'Ew':a='*'+l;break;case'Co':a='*'+l+'*';break;default:a=l;break;}return a;},sortConditions:function(r,f){if(f.length===0){return r;}var g=function(c){var b=c.conditions[0];if(b.attribute){return b.attribute;}return b.conditions[0].attribute;};var a=function(l,b,v){for(var i=0;i<l.length;++i){var e=l[i];if(e[b]===v){return i;}}};r=r.clone();r.conditions.sort(function(b,d){var e=g(b);var h=a(f,'dimension',e);var j=g(d);var k=a(f,'dimension',j);return h-k;});var s=function(c){var b=g(c);var d=a(f,'dimension',b);if(!d){return;}var e=f[d];var v=function(h,j){return a(e.items,'label',h.valueLabel)-a(e.items,'label',j.valueLabel);};c.conditions.sort(v);};for(var i=0;i<r.conditions.length;++i){var c=r.conditions[i];s(c);}return r;},renderer:'sap.m.ToolbarRenderer',onAfterRendering:function(){var t=this;t.resetButton.attachPress(function(){var m=t.getModel();m.eventLogger.logEvent({type:m.eventLogger.CLEAR_ALL_FILTERS});m.resetFilterConditions(true);});var $=jQuery('.sapUshellSearchFilterText');$.attr('aria-label',sap.ushell.resources.i18n.getText("filtered_by_aria_label"));}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchInput',["sap/ushell/Config",'sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/SearchConfiguration','sap/m/Input','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType','sap/ui/layout/HorizontalLayout','sap/ui/layout/VerticalLayout','sap/base/Log','sap/ushell/renderers/fiori2/search/controls/SearchObjectSuggestionImage',"sap/ushell/services/AppType",'sap/ui/base/Event'],function(C,S,a,I,b,H,V,L,c,A,E){"use strict";
sap.m.Input.extend('sap.ushell.renderers.fiori2.search.controls.SearchInput',{
constructor:function(i,o){var t=this;o=jQuery.extend({},{width:'100%',showValueStateMessage:false,showTableSuggestionValueHelp:false,enableSuggestionsHighlighting:false,showSuggestion:true,filterSuggests:false,suggestionColumns:[new sap.m.Column({})],autocomplete:false,tooltip:sap.ushell.resources.i18n.getText("search"),placeholder:{path:'/searchTermPlaceholder',mode:sap.ui.model.BindingMode.OneWay},liveChange:this.handleLiveChange.bind(this),suggestionItemSelected:this.handleSuggestionItemSelected.bind(this),enabled:{parts:[{path:"/initializingObjSearch"}],formatter:function(d){return!d;}}},o);var p=sap.ui.Device.system.phone;sap.ui.Device.system.phone=false;sap.m.Input.prototype.constructor.apply(this,[i,o]);sap.ui.Device.system.phone=p;this.bindAggregation("suggestionRows","/suggestions",function(i,d){return t.suggestionItemFactory(i,d);});this.addStyleClass('searchInput');this._bUseDialog=false;this._bFullScreen=false;this._ariaDescriptionIdNoResults=i+"-No-Results-Description";},
renderer:'sap.m.InputRenderer',
onsapenter:function(e){if(!(this._oSuggestionPopup&&this._oSuggestionPopup.isOpen()&&this._oSuggPopover._iPopupListSelectedIndex>=0)){this.getModel().invalidateQuery();this.triggerSearch(e);}sap.m.Input.prototype.onsapenter.apply(this,arguments);},
triggerSearch:function(e){var t=this;var f=sap.ui.getCore().byId(t.getModel().getProperty("/errorPopoverControlId"));if(t.getModel().getProperty("/errors").length>0&&f&&f.getVisible()){f.setVisible(false);}S.subscribeOnlyOnce('triggerSearch','allSearchFinished',function(){t.getModel().autoStartApp();},t);var s=t.getValue();if(s.trim()===''){s='*';}t.getModel().setSearchBoxTerm(s,false);t.navigateToSearchApp();t.destroySuggestionRows();t.getModel().abortSuggestions();},
handleLiveChange:function(e){this._oSuggPopover._isSuggestionItemSelectable=function(i){var d=i.getBindingContext().getObject();if(d.uiSuggestionType===b.Header||d.uiSuggestionType===b.BusyIndicator){return false;}return true;};var s=this.getValue();var m=this.getModel();m.setSearchBoxTerm(s,false);if(m.getSearchBoxTerm().length>0){m.doSuggestion();}else{this.destroySuggestionRows();m.abortSuggestions();}},
handleSuggestionItemSelected:function(e){var m=this.getModel();var s=m.getSearchBoxTerm();var d;if(e.getId()==="AutoSelectAppSuggestion"){d=e.getParameter("suggestion");}else{d=e.getParameter("selectedRow").getBindingContext().getObject();}var f=d.searchTerm||"";var g=d.dataSource||m.getDataSource();var t=d.url;var h=d.uiSuggestionType;m.eventLogger.logEvent({type:m.eventLogger.SUGGESTION_SELECT,suggestionType:h,suggestionTerm:f,searchTerm:s,targetUrl:t,dataSourceKey:g?g.id:""});this.selectText(0,0);switch(h){case b.App:this.destroySuggestionRows();m.abortSuggestions();if(t[0]==="#"){if(t.indexOf("#Action-search")===0&&t===decodeURIComponent(S.getHashFromUrl())){m.setSearchBoxTerm(m.getLastSearchTerm(),false);sap.ui.getCore().getEventBus().publish("allSearchFinished");return;}if(window.hasher){window.hasher.setHash(t);}else{window.location.href=t;}}else{var l=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(l){var r={title:d.title,appType:A.URL,url:d.url,appId:d.url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}window.open(t,"_blank");m.setSearchBoxTerm("",false);this.setValue("");}if(t.indexOf('#Action-search')!==0){sap.ui.require("sap/ushell/renderers/fiori2/search/SearchShellHelper").setSearchState('COL');}else{this.focus();}break;case b.DataSource:m.setDataSource(g,false);m.setSearchBoxTerm('',false);this.setValue('');this.focus();break;case b.SearchTermData:m.setDataSource(g,false);m.setSearchBoxTerm(f,false);this.getModel().invalidateQuery();this.navigateToSearchApp();this.setValue(f);break;case b.SearchTermHistory:m.setDataSource(g,false);m.setSearchBoxTerm(f,false);this.getModel().invalidateQuery();this.navigateToSearchApp();this.setValue(f);break;case b.Object:if(d.titleNavigation){d.titleNavigation.performNavigation();}break;default:break;}},
suggestionItemFactory:function(i,o){var s=o.getObject();switch(s.uiSuggestionType){case b.Object:return this.objectSuggestionItemFactory(i,o);case b.Header:return this.headerSuggestionItemFactory(i,o);case b.BusyIndicator:return this.busyIndicatorItemFactory(i,o);default:return this.regularSuggestionItemFactory(i,o);}},
busyIndicatorItemFactory:function(i,o){var d=new V({content:[new sap.m.BusyIndicator({size:'0.6rem'})]});d.getText=function(){return this.getValue();}.bind(this);var l=new sap.m.ColumnListItem({cells:[d],type:"Active"});l.addStyleClass('searchSuggestion');l.addStyleClass('searchBusyIndicatorSuggestion');return l;},
headerSuggestionItemFactory:function(i,o){var l=new sap.m.Label({text:'{label}'});var d=new V({content:[l]});d.getText=function(){return this.getValue();}.bind(this);var e=new sap.m.ColumnListItem({cells:[d],type:"Active"});e.addStyleClass('searchSuggestion');e.addStyleClass('searchHeaderSuggestion');return e;},
assembleObjectSuggestionLabels:function(s){var l=[];var d=new sap.m.Label({text:"{label1}"});d.addEventDelegate({onAfterRendering:function(){S.boldTagUnescaper(this.getDomRef());}},d);d.addStyleClass('sapUshellSearchObjectSuggestion-Label1');l.push(d);if(s.label2){var e=new sap.m.Label({text:"{label2}"});e.addEventDelegate({onAfterRendering:function(){S.boldTagUnescaper(this.getDomRef());}},e);e.addStyleClass('sapUshellSearchObjectSuggestion-Label2');l.push(e);}var v=new V({content:l});v.addStyleClass('sapUshellSearchObjectSuggestion-Labels');return v;},
objectSuggestionItemFactory:function(i,o){var s=o.getObject();var d=[];if(s.imageExists){d.push(new c({src:"{imageUrl}",isCircular:"{imageIsCircular}"}));}d.push(this.assembleObjectSuggestionLabels(s));var e=new H({content:d});e.addStyleClass('sapUshellSearchObjectSuggestion-Container');e.getText=function(){return this.getValue();}.bind(this);var l=new sap.m.ColumnListItem({cells:[e],type:"Active"});l.addStyleClass('searchSuggestion');l.addStyleClass('searchObjectSuggestion');return l;},
regularSuggestionItemFactory:function(i,o){var t=this;var d=new sap.ui.core.Icon({src:"{icon}"}).addStyleClass('suggestIcon').addStyleClass('sapUshellSearchSuggestAppIcon').addStyleClass('suggestListItemCell');var l=new sap.m.Text({text:"{label}",layoutData:new sap.m.FlexItemData({shrinkFactor:1,minWidth:"4rem"}),wrapping:false}).addStyleClass('suggestText').addStyleClass('suggestNavItem').addStyleClass('suggestListItemCell');l.addEventDelegate({onAfterRendering:function(){S.boldTagUnescaper(this.getDomRef());}},l);var f=new sap.m.CustomListItem({type:sap.m.ListType.Active,content:new sap.m.FlexBox({items:[d,l]})});var s=o.oModel.getProperty(o.sPath);f.getText=function(){return(typeof s.searchTerm)==='string'?s.searchTerm:t.getValue();};var g=new sap.m.ColumnListItem({cells:[f],type:"Active"});if(s.uiSuggestionType===b.App){if(s.title&&s.title.indexOf("combinedAppSuggestion")>=0){g.addStyleClass('searchCombinedAppSuggestion');}else{g.addStyleClass('searchAppSuggestion');}}if(s.uiSuggestionType===b.DataSource){g.addStyleClass('searchDataSourceSuggestion');}if(s.uiSuggestionType===b.SearchTermData){g.addStyleClass('searchBOSuggestion');}if(s.uiSuggestionType===b.SearchTermHistory){g.addStyleClass('searchHistorySuggestion');}g.addStyleClass('searchSuggestion');g.addEventDelegate({onAfterRendering:function(e){var h=g.$().find('.suggestListItemCell');var j=0;h.each(function(k){j+=$(this).outerWidth(true);});if(j>g.$().find('li').get(0).scrollWidth){g.setTooltip($(h[0]).text()+" "+$(h[2]).text());}}});return g;},
navigateToSearchApp:function(){if(S.isSearchAppActive()){this.getModel()._firePerspectiveQuery();}else{var h=this.getModel().renderSearchURL();window.location.hash=h;}},
getAriaDescriptionIdForNoResults:function(){return this._ariaDescriptionIdNoResults;},
onAfterRendering:function(e){var d=$(this.getDomRef()).find("#searchFieldInShell-input-inner");$(this.getDomRef()).find('input').attr('autocomplete','off');$(this.getDomRef()).find('input').attr('autocorrect','off');$(this.getDomRef()).find('input').attr('type','search');$(this.getDomRef()).find('input').attr('name','search');var f=jQuery('<form action=""></form>').on("submit",function(){return false;});$(this.getDomRef()).children('input').parent().append(f);$(this.getDomRef()).children('input').detach().appendTo(f);d.attr("aria-describedby",d.attr("aria-describedby")+" "+this._ariaDescriptionIdNoResults);},
onValueRevertedByEscape:function(v){if(S.isSearchAppActive()){return;}this.setValue(" ");}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchLabel',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";return sap.m.Label.extend('sap.ushell.renderers.fiori2.search.controls.SearchLabel',{renderer:'sap.m.LabelRenderer',onAfterRendering:function(){var d=this.getDomRef();S.boldTagUnescaper(d);S.forwardEllipsis4Whyfound(d);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchLayout',[],function(){"use strict";return sap.ui.layout.FixFlex.extend("sap.ushell.renderers.fiori2.search.controls.SearchLayout",{metadata:{properties:{isBusy:{type:"boolean",defaultValue:false},busyDelay:{type:"int",defaultValue:100},showFacets:{type:"boolean",defaultValue:false},animateFacetTransition:{type:"boolean",defaultValue:false}},aggregations:{"resultListContainer":{type:"sap.ui.core.Control",multiple:false},"facets":{type:"sap.ui.core.Control",multiple:false},"busyIndicator":{type:"sap.ui.core.Control",multiple:false}}},init:function(){var t=this;sap.ui.layout.FixFlex.prototype.init.apply(this);var r=new sap.m.ScrollContainer({height:'100%',vertical:true});t.setFlexContent(r);},constructor:function(o,i){var t=this;sap.ui.layout.FixFlex.prototype.constructor.apply(this,[o],i);t.setVertical(false);this.addEventDelegate({onAfterRendering:function(){var $=jQuery(".sapUiFixFlexFixed");if(t.getShowFacets()&&!sap.ui.Device.system.phone){$.addClass('sapUshellSearchFacetPanelOpen');}else{$.removeClass('sapUshellSearchFacetPanelOpen');}}});},getFacets:function(){return this.getFixContent();},setFacets:function(c){this.addFixContent(c);},getResultListContainer:function(){var r=this.getFlexContent();var c=r.getContent();if(c.length>0){return c[0];}return undefined;},setResultListContainer:function(c){var r=this.getFlexContent();r.destroyContent();r.addContent(c);},setAnimateFacetTransition:function(v){this.setProperty("animateFacetTransition",v,true);},setIsBusy:function(i){var t=this;if(i){if(this.busyFlag){return;}if(this.busyTimeout){return;}this.busyTimeout=setTimeout(function(){t.busyTimeout=null;t._setIsBusy(i);},this.getBusyDelay());}else{if(this.busyFlag){this._setIsBusy(i);return;}if(this.busyTimeout){clearTimeout(this.busyTimeout);this.busyTimeout=null;return;}}},setBusyDelay:function(b){this.setProperty("busyDelay",b,true);},_setIsBusy:function(i){if(i){this.getBusyIndicator().open();this.busyFlag=true;}else if(this.busyFlag){this.getBusyIndicator().close();this.busyFlag=false;}this.setProperty("isBusy",i,true);},setShowFacets:function(a){if(a===this.getShowFacets()){return undefined;}var $=jQuery(".sapUiFixFlexFixed");var b=jQuery(".sapUshellSearchResultListsContainer");if(this.getAnimateFacetTransition()){$.addClass("sapUshellSearchFacetAnimation");}else{$.removeClass("sapUshellSearchFacetAnimation");}if(!a){b.removeClass("sapUshellSearchFacetPanelOpen");$.removeClass("sapUshellSearchFacetPanelOpen");$.attr("aria-hidden","true");}else{b.addClass("sapUshellSearchFacetPanelOpen");$.addClass("sapUshellSearchFacetPanelOpen");$.attr("aria-hidden","false");}var h=function(e){sap.ui.getCore().getEventBus().publish("searchLayoutChanged");};$.one("transitionend",h);this.setProperty("showFacets",a,true);return this;},renderer:"sap.ui.layout.FixFlexRenderer"});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchLink',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";return sap.m.Link.extend('sap.ushell.renderers.fiori2.search.controls.SearchLink',{metadata:{aggregations:{icon:{type:"sap.ui.core.Icon",multiple:false}}},renderer:'sap.m.LinkRenderer',onAfterRendering:function(){var d=this.getDomRef();S.boldTagUnescaper(d);var i=this.getAggregation("icon");if(i){var r=sap.ui.getCore().createRenderManager();var a=$("<span></span");r.render(i,a);$(d).prepend("&nbsp;");$(d).prepend(a);r.destroy();}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchMultiSelectionControl',[],function(){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchMultiSelectionControl",{metadata:{properties:{resultList:"object"},aggregations:{actions:"object"}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchResultList-MultiSelectionControl");r.writeClasses();r.write(">");c._renderer(r);r.write("</div>");},_renderer:function(r){var t=this;var e=new sap.m.ToggleButton({icon:"sap-icon://multi-select",tooltip:sap.ushell.resources.i18n.getText("toggleSelectionModeBtn"),press:function(){if(this.getPressed()){t.getResultList.enableSelectionMode();t.getModel().setProperty("/multiSelectionEnabled",true);}else{t.getResultList.disableSelectionMode();t.getModel().setProperty("/multiSelectionEnabled",false);}},visible:false,pressed:{parts:[{path:'/multiSelectionEnabled'}],formatter:function(l){return l>0;},mode:sap.ui.model.BindingMode.OneWay}});e.setModel(t.getModel());e.addStyleClass("sapUshellSearchResultList-toggleMultiSelectionButton");r.renderControl(e);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchNoResultScreen',['sap/ushell/renderers/fiori2/search/SearchShellHelper','sap/ushell/renderers/fiori2/search/SearchConfiguration'],function(S,a){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchNoResultScreen",{metadata:{properties:{searchBoxTerm:"string"}},renderer:function(r,c){var s=S.getSearchInput();var b;if(s){b=s.getAriaDescriptionIdForNoResults();}var e=$('<div>').text(c.getSearchBoxTerm()).html();r.write('<div class="sapUshellSearch-no-result"');r.writeControlData(c);r.write('>');r.write('<div class="sapUshellSearch-no-result-icon">');r.writeIcon(sap.ui.core.IconPool.getIconURI("travel-request"));r.write('</div><div class="sapUshellSearch-no-result-text" role="alert">');r.write('<div ');if(b){r.write('id="'+b+'" ');}r.write('class="sapUshellSearch-no-result-info">'+sap.ushell.resources.i18n.getText("no_results_info",e).replace('<b>"&1"</b>','<b>"'+e+'"</b>'));r.write('</div>');c.renderAppFinderLink(r,c);r.write('<div class="sapUshellSearch-no-result-tips">'+sap.ushell.resources.i18n.getText("no_results_tips")+'</div> ');r.write('</div></div>');},renderAppFinderLink:function(r,c){if(!a.getInstance().isLaunchpad()){return;}var m=c.getModel();if(m.getDataSource()!==m.appDataSource){return;}var l=sap.ushell.resources.i18n.getText('no_results_link_appfinder','xxxx');var i=l.indexOf('xxxx');var p=l.slice(0,i);var s=l.slice(i+4);r.write('<div class="sapUshellSearch-no-result-info">');r.write(p);var b=new sap.m.Link({text:sap.ushell.resources.i18n.getText('appFinderTitle'),press:function(){var C=sap.ushell&&sap.ushell.Container&&(sap.ushell.Container.getService("SmartNavigation")||sap.ushell.Container.getService("CrossApplicationNavigation"));C.toExternal({target:{shellHash:'#Shell-home&/appFinder/catalog'}});}});r.renderControl(b);r.write(s);r.write('</div>');}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchObjectSuggestionImage',['sap/m/Image'],function(I){"use strict";return I.extend('sap.ushell.renderers.fiori2.search.controls.SearchObjectSuggestionImage',{metadata:{properties:{isCircular:'boolean'}},constructor:function(){I.prototype.constructor.apply(this,arguments);this.attachBrowserEvent('load',function(){this.wrapImage();}.bind(this));this.attachBrowserEvent('error',function(){this.wrapImage(true);}.bind(this));this.addStyleClass('sapUshellSearchObjectSuggestionImage-Initial');},wrapImage:function(i){var a=this.getDomRef();if(jQuery(a.parentNode).hasClass('sapUshellSearchObjectSuggestionImage-Wrapper-Portrait')||jQuery(a.parentNode).hasClass('sapUshellSearchObjectSuggestionImage-Wrapper-Landscape')){this.adaptContainer(i);}else{this.createContainer(i);}},createContainer:function(i){var c=document.createElement('div');var a=this.getDomRef();jQuery(c).addClass('sapUshellSearchObjectSuggestionImage-Wrapper');if(a.offsetHeight>a.offsetWidth){jQuery(c).addClass('sapUshellSearchObjectSuggestionImage-Wrapper-Portrait');}else{jQuery(c).addClass('sapUshellSearchObjectSuggestionImage-Wrapper-Landscape');}if(this.getIsCircular()){c.style.borderRadius='50%';}a.parentNode.insertBefore(c,a);a.parentNode.removeChild(a);c.appendChild(a);jQuery(a).removeClass('sapUshellSearchObjectSuggestionImage-Initial');if(i){jQuery(c).addClass('sapUshellSearchObjectSuggestionImage-Wrapper-Error');}},adaptContainer:function(i){var a=this.getDomRef();var c=a.parentNode;if(a.offsetHeight>a.offsetWidth){jQuery(c).addClass('sapUshellSearchObjectSuggestionImage-Wrapper-Portrait');jQuery(c).removeClass('sapUshellSearchObjectSuggestionImage-Wrapper-Landscape');}else{jQuery(c).addClass('sapUshellSearchObjectSuggestionImage-Wrapper-Landscape');jQuery(c).removeClass('sapUshellSearchObjectSuggestionImage-Wrapper-Protrait');}if(i){jQuery(c).addClass('sapUshellSearchObjectSuggestionImage-Wrapper-Error');}else{jQuery(c).removeClass('sapUshellSearchObjectSuggestionImage-Wrapper-Error');}},renderer:'sap.m.ImageRenderer'});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchRelatedObjectsToolbar',['sap/ushell/renderers/fiori2/search/SearchModel'],function(S){"use strict";
var m=sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar",{
metadata:{properties:{itemId:"string",navigationObjects:{type:"object",multiple:true},positionInList:"int"},aggregations:{_relatedObjectActionsToolbar:{type:"sap.m.Toolbar",multiple:false,visibility:"hidden"},_ariaDescriptionForLinks:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}},
init:function(){var t=this;if(sap.ui.core.Control.prototype.init){sap.ui.core.Control.prototype.init.apply(t,arguments);}sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar._allOfMyCurrentInstances.push(t);t.setAggregation("_relatedObjectActionsToolbar",new sap.m.Toolbar({design:sap.m.ToolbarDesign.Solid}).data("sap-ui-fastnavgroup","false",true).addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Toolbar"));t.setAggregation("_ariaDescriptionForLinks",new sap.ui.core.InvisibleText({text:sap.ushell.resources.i18n.getText("result_list_item_aria_has_more_links")}));if(typeof sap!=='undefined'&&sap.ui&&sap.ui.getCore){sap.ui.getCore().getEventBus().subscribe("searchLayoutChanged",t._layoutToolbarElements,t);}},
exit:function(){var t=this;if(sap.ui.core.Control.prototype.exit){sap.ui.core.Control.prototype.exit.apply(t,arguments);}var a=sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar._allOfMyCurrentInstances;for(var i=0;i<a.length;i++){if(a[i]===t){a.splice(i,1);break;}}if(typeof sap!=='undefined'&&sap.ui&&sap.ui.getCore){sap.ui.getCore().getEventBus().unsubscribe("searchLayoutChanged",t._layoutToolbarElements,t);}},
renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchResultListItem-RelatedObjectsToolbar");r.writeClasses();r.write(">");r.renderControl(c.getAggregation("_ariaDescriptionForLinks"));c._renderToolbar(r);r.write("</div>");},
_renderToolbar:function(r){var t=this;var i;var _=t.getAggregation("_relatedObjectActionsToolbar");_.destroyContent();var c=function(b){return function(){t._performNavigation(b,{trackingOnly:true});};};var n=t.getNavigationObjects();if(n.length>0){var a=[];for(i=0;i<n.length;i++){var b=n[i];var l=new sap.m.Link({text:b.getText(),href:b.getHref(),layoutData:new sap.m.ToolbarLayoutData({shrinkable:false}),press:c(b)});var d=b.getTarget();if(d){l.setTarget(d);}l.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Element");a.push(l);}var e=new sap.m.ToolbarSpacer();e.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Spacer");_.addContent(e);for(i=0;i<a.length;i++){_.addContent(a[i]);}t._overFlowButton=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("overflow")});t._overFlowButton.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-OverFlowButton");_.addContent(t._overFlowButton);t._overFlowSheet=new sap.m.ActionSheet({placement:sap.m.PlacementType.Top});t._overFlowButton.attachPress(function(){t._overFlowSheet.openBy(t._overFlowButton);});r.renderControl(_);}},
onAfterRendering:function(){var t=this;t._layoutToolbarElements();t._addAriaInformation();},
_layoutToolbarElements:function(){var t=this;var _=t.getAggregation("_relatedObjectActionsToolbar");if(!(t.getDomRef()&&_.getDomRef())){return;}var a=$(_.getDomRef());var b=a.width();if($(t.getDomRef()).css("display")==="none"||a.css("display")==="none"){return;}t.toolbarWidth=b;var c=$(t._overFlowButton.getDomRef());c.css("display","none");var d=0;var p=function(k,l){t._performNavigation(l);};var e=a.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar-Element");for(var i=0;i<e.length;i++){var f=$(e[i]);f.css("display","");var g=d+f.outerWidth(true);if(g>b){if(i<e.length){c.css("display","");var o=c.outerWidth(true);for(;i>=0;i--){f=$(e[i]);g-=f.outerWidth(true);if(g+o<=b){break;}}}var n=t.getNavigationObjects();t._overFlowSheet.destroyButtons();i=(i>=0)?i:0;for(;i<e.length;i++){f=$(e[i]);f.css("display","none");var h=n[i];var j=new sap.m.Button({text:h.getText()});j.attachPress(h,p);t._overFlowSheet.addButton(j);}break;}d=g;}t._setupItemNavigation();},
_setupItemNavigation:function(){var t=this;if(!t.theItemNavigation){t.theItemNavigation=new sap.ui.core.delegate.ItemNavigation();t.addDelegate(t.theItemNavigation);}t.theItemNavigation.setCycling(false);t.theItemNavigation.setRootDomRef(t.getDomRef());var a=[];var _=t.getAggregation("_relatedObjectActionsToolbar");var c=_.getContent();for(var i=0;i<c.length;i++){if(!c[i].hasStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Element")){continue;}if(!$(c[i].getDomRef()).attr("tabindex")){var b="-1";if(c[i].getPressed&&c[i].getPressed()){b="0";}$(c[i].getDomRef()).attr("tabindex",b);}a.push(c[i].getDomRef());}var d=t._overFlowButton.getDomRef();a.push(d);$(d).attr("tabindex","-1");t.theItemNavigation.setItemDomRefs(a);},
_addAriaInformation:function(){var t=this;var a=$(this.getAggregation("_relatedObjectActionsToolbar").getDomRef());var b=a.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar-Element");var c=$(t._overFlowButton.getDomRef());if(b.length>0||c.is(":visible")){var d=t.getAggregation("_ariaDescriptionForLinks").getId();b.each(function(){var f=$(this);var e=f.attr("aria-describedby")||"";e+=" "+d;f.attr("aria-describedby",e);});if(c.is(":visible")){var e=c.attr("aria-describedby")||"";e+=" "+d;c.attr("aria-describedby",e);}}},
_performNavigation:function(n,p){var t=p&&p.trackingOnly||false;n.performNavigation({trackingOnly:t});}
});
m._allOfMyCurrentInstances=[];$(window).on("resize",function(){for(var i=0;i<this._allOfMyCurrentInstances.length;i++){this._allOfMyCurrentInstances[i]._layoutToolbarElements();}}.bind(m));return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultList',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";return sap.m.List.extend('sap.ushell.renderers.fiori2.search.controls.SearchResultList',{init:function(){if(sap.m.List.prototype.init){sap.m.List.prototype.init.apply(this,arguments);}this.addStyleClass("searchResultList");},renderer:'sap.m.ListRenderer',onAfterRendering:function(){var t=this;sap.m.List.prototype.onAfterRendering.apply(t,arguments);var m=sap.ushell.renderers.fiori2.search.getModelSingleton();var a=m.getProperty("/multiSelectionEnabled");if(a){t.enableSelectionMode(false);}t._prepareResizeHandler();t.collectListItemsForNavigation();},collectListItemsForNavigation:function(){var t=this;var m=t.getItems();if(m.length===0){return;}var d=function(){t._doCollectListItemsForNavigation();};for(var i=0;i<m.length;i++){var M=m[i];if(M.hasStyleClass("sapUshellSearchResultListItemApps")){var c=M.getContent();if(c.length>0){c[0].addEventDelegate({onAfterRendering:d});}}}t._doCollectListItemsForNavigation();},_doCollectListItemsForNavigation:function(){var t=this;var i,j;var f=t.getDomRef();if(!f){return;}var I=t.getItemNavigation();if(!I){t._startItemNavigation();I=t.getItemNavigation();}if(!I){return;}t._bItemNavigationInvalidated=false;var r=f.getElementsByTagName("li");var d=[];var T=[];for(i=0;i<r.length;i++){var R=r[i];if($(R).hasClass("sapUshellSearchResultListItemApps")){var a=R.getElementsByClassName("sapUshellSearchTileWrapper");for(j=0;j<a.length;j++){var b=S.getFocusableTileDomRef(a[j]);if(!b||$(b).is(":hidden")){continue;}d.push(b);T.push(b);}$(R).removeAttr("tabindex");$(R).removeAttr("role");$(R).attr("aria-hidden","true");}else if($(R).hasClass("sapUshellSearchResultListFooter")){var s=R.getElementsByClassName("sapUshellResultListMoreFooter");for(j=0;j<s.length;j++){d.push(s[j]);T.push(s[j]);}}else if($(R).hasClass("sapUshellSearchResultListItem")){d.push(R);T.push(R);}}if(d.length>0){var c=$(d[0]).closest("ul");var e=c.length>0?c[0]:d[0].parentElement;I.setRootDomRef(e);}I.setItemDomRefs(d);I.setCycling(false);I.setPageSize(10);if(T.length>0){var g=$(T[0]).attr("id");for(i=1;i<T.length;i++){g+=" "+$(T[i]).attr("id");}$(t.getDomRef()).children("[role='listbox']").attr("aria-owns",g);}},_prepareResizeHandler:function(){var t=this;var r=[768,1151];var w=function(){var b=window.innerWidth;if(b<r[0]){return 0;}for(var i=0;i<r.length-1;i++){if(b>=r[i]&&b<r[i+1]){return i+1;}}return r.length;};var l=w();var a=function(e){var c=w();if(c!=l){l=c;var m=t.getItems();for(var i=0;i<m.length;i++){var M=m[i];if(M.getContent()&&M.getContent().length>0&&M.getContent()[0].resizeEventHappened){M.getContent()[0].resizeEventHappened();}}}};$(window).on("resize",a);},enableSelectionMode:function(a){var t=this;var d=jQuery.Deferred();a=a===undefined?true:a;var s=$(t.getDomRef());if(!a){s.addClass("sapUshellSearchResultList-ShowMultiSelection");d.resolve();return d.promise();}var b=200;var c=s.find(".sapUshellSearchResultListItem-CheckboxExpandContainer");var e=s.find(".sapUshellSearchResultListItem-Attributes");var f=parseFloat(e.css("padding-left"));var g=c.find(".sapUshellSearchResultListItem-CheckboxContainer");var h=g.width();if(!s.hasClass("sapUshellSearchResultList-ShowMultiSelection")){c.css("width","0");c.css("opacity","0");e.css("padding-left",f);s.addClass("sapUshellSearchResultList-ShowMultiSelection");var n=f+h;var i=c.animate({"width":h,"opacity":1},b,function(){$(this).css("width","");$(this).css("opacity","");});var j=e.animate({"padding-left":n},b,function(){$(this).css("padding-left","");});jQuery.when(i,j).done(function(){d.resolve();});}else{d.resolve();}return d.promise();},disableSelectionMode:function(a){var t=this;var d=jQuery.Deferred();a=a===undefined?true:a;var s=$(t.getDomRef());if(!a){s.removeClass("sapUshellSearchResultList-ShowMultiSelection");d.resolve();return d.promise();}var b=200;var c=s.find(".sapUshellSearchResultListItem-CheckboxExpandContainer");var e=s.find(".sapUshellSearchResultListItem-Attributes");var f=parseFloat(e.css("padding-left"));var g=c.find(".sapUshellSearchResultListItem-CheckboxContainer");var h=g.width();if(s.hasClass("sapUshellSearchResultList-ShowMultiSelection")){var n=f-h;var i=c.animate({"width":0,"opacity":0},b).promise();var j=e.animate({"padding-left":n},b).promise();jQuery.when(i,j).done(function(){s.removeClass("sapUshellSearchResultList-ShowMultiSelection");c.css("width","");c.css("opacity","");e.css("padding-left","");d.resolve();});}else{d.resolve();}return d.promise();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListContainer',[],function(){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListContainer",{init:function(){this.data("sap-ui-fastnavgroup","true",true);},metadata:{aggregations:{"filterBar":{type:"sap.ui.core.Control",multiple:false},"centerArea":{singularName:"content"},"totalCountBar":{type:"sap.ui.core.Control",multiple:false},"didYouMeanBar":{type:"sap.ui.core.Control",multiple:false},"noResultScreen":{type:"sap.ui.core.Control",multiple:false},"totalCountHiddenElement":{type:"sap.ui.core.InvisibleText",multiple:false}}},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellSearchResultListsContainer");r.addClass("sapUiResponsiveMargin");if(c.getModel()&&c.getModel().getFacetVisibility()===true){r.addClass("sapUshellSearchFacetPanelOpen");}r.writeClasses();r.write('>');r.renderControl(c.getNoResultScreen());r.renderControl(c.getDidYouMeanBar());r.write('<div class="sapUshellSearchTotalCountBar">');r.renderControl(c.getTotalCountBar());r.write("</div>");for(var i=0;i<c.getCenterArea().length;i++){r.renderControl(c.getCenterArea()[i]);}r.renderControl(c.getTotalCountHiddenElement());r.write("</div>");}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListItem',['sap/ushell/renderers/fiori2/search/controls/SearchText','sap/ushell/renderers/fiori2/search/controls/SearchLink','sap/ushell/renderers/fiori2/search/controls/twitter/SearchTweet','sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/controls/SearchRelatedObjectsToolbar','sap/ushell/renderers/fiori2/search/SearchModel'],function(S,a,b,c,e,f){"use strict";var n='\u2013';return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListItem",{metadata:{properties:{dataSource:"object",itemId:"string",title:"string",titleDescription:"string",titleNavigation:"object",geoJson:"object",type:"string",imageUrl:"string",imageFormat:"string",imageNavigation:"object",attributes:{type:"object",multiple:true},navigationObjects:{type:"object",multiple:true},selected:"boolean",expanded:"boolean",parentListItem:"object",additionalParameters:"object",positionInList:"int",resultSetId:"string",layoutCache:"object",totalCountHiddenElement:"object"},aggregations:{_titleLink:{type:"sap.ushell.renderers.fiori2.search.controls.SearchLink",multiple:false,visibility:"hidden"},_titleLinkDescription:{type:"sap.ushell.renderers.fiori2.search.controls.SearchText",multiple:false,visibility:"hidden"},_titleDelimiter:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_typeText:{type:"sap.ushell.renderers.fiori2.search.controls.SearchText",multiple:false,visibility:"hidden"},_typeLink:{type:"sap.ushell.renderers.fiori2.search.controls.SearchLink",multiple:false,visibility:"hidden"},_typeLinkAriaDescription:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"},_multiLineDescriptionText:{type:"sap.ushell.renderers.fiori2.search.controls.SearchText",multiple:false,visibility:"hidden"},_multiLineDescriptionTweet:{type:"sap.ushell.renderers.fiori2.search.controls.twitter.SearchTweet",multiple:false,visibility:"hidden"},_selectionCheckBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"},_expandButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_attributeLabels:{type:"sap.m.Label",multiple:true,visibility:"hidden"},_attributeValues:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},_attributeValuesWithoutWhyfoundHiddenTexts:{type:"sap.ui.core.InvisibleText",multiple:true,visibility:"hidden"},_relatedObjectActionsToolbar:{type:"sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar",multiple:false,visibility:"hidden"},_titleLabeledByText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"},_attributesLabeledByText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"},_expandStateLabeledByText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}},init:function(){var t=this;if(sap.ui.core.Control.prototype.init){sap.ui.core.Control.prototype.init.apply(this,arguments);}t.setAggregation("_titleLink",new a({}).addStyleClass("sapUshellSearchResultListItem-HeaderEntry").addStyleClass("sapUshellSearchResultListItem-Title").addStyleClass("sapUshellSearchResultListItem-MightOverflow").attachPress(function(E){var p=t._getPhoneSize();var w=$(window).width();if(w<=p){E.preventDefault();E.cancelBubble();t._performTitleNavigation();}else{t._performTitleNavigation({trackingOnly:true});}}));t.setAggregation("_titleLinkDescription",new S({}).addStyleClass("sapUshellSearchResultListItem-HeaderEntry").addStyleClass("sapUshellSearchResultListItem-TitleDescription").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));var d=new sap.m.Text({text:"|"});d.addEventDelegate({onAfterRendering:function(g){$(this.getDomRef()).attr("aria-hidden","true");}.bind(d)});t.setAggregation("_titleDelimiter",d.addStyleClass("sapUshellSearchResultListItem-HeaderEntry").addStyleClass("sapUshellSearchResultListItem-TitleDelimiter").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));t.setAggregation("_typeText",new S().addStyleClass("sapUshellSearchResultListItem-HeaderEntry").addStyleClass("sapUshellSearchResultListItem-TitleCategory").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));t.setAggregation("_typeLinkAriaDescription",new sap.ui.core.InvisibleText({text:sap.ushell.resources.i18n.getText("result_list_item_type_link_description")}));t.setAggregation("_typeLink",new sap.ushell.renderers.fiori2.search.controls.SearchLink({}).addStyleClass("sapUshellSearchResultListItem-HeaderEntry").addStyleClass("sapUshellSearchResultListItem-TitleCategoryLink").addStyleClass("sapUshellSearchResultListItem-MightOverflow").addAriaDescribedBy(t.getAggregation("_typeLinkAriaDescription")));t.setAggregation("_multiLineDescriptionText",new S({maxLines:5}).addStyleClass("sapUshellSearchResultListItem-MultiLineDescription").addStyleClass("sapUshellSearchResultListItem-MightOverflow").data("islongtext","true",true));t.setAggregation("_multiLineDescriptionTweet",new b({}).addStyleClass("sapUshellSearchResultListItem-MultiLineDescription").addStyleClass("sapUshellSearchResultListItem-MightOverflow").data("islongtext","true",true));t.setAggregation("_selectionCheckBox",new sap.m.CheckBox({select:function(E){t.setProperty("selected",E.getParameters().selected,true);}}));t.setAggregation("_expandButton",new sap.m.Button({type:sap.m.ButtonType.Transparent,press:function(E){t.toggleDetails();}}));t.setAggregation("_relatedObjectActionsToolbar",new e().addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar"));t.setAggregation("_titleLabeledByText",new sap.ui.core.InvisibleText());t.setAggregation("_attributesLabeledByText",new sap.ui.core.InvisibleText());t.setAggregation("_expandStateLabeledByText",new sap.ui.core.InvisibleText());},renderer:function(r,C){C._renderer(r);},_renderer:function(r){this._registerItemPressHandler();this._resetPrecalculatedValues();this._renderContainer(r);this._renderAccessibilityInformation(r);},_renderContainer:function(r){var t=this;r.write('<div');r.writeControlData(t);r.addClass("sapUshellSearchResultListItem-Container");if(t.getImageUrl()){r.addClass("sapUshellSearchResultListItem-WithImage");}if(t.getImageFormat()&&t.getImageFormat().toLowerCase()==="documentthumbnail"){r.addClass("sapUshellSearchResultListItem-Document");}r.writeClasses();r.write('>');t._renderContentContainer(r);t._renderExpandButtonContainer(r);r.write('</div>');},_renderContentContainer:function(r){r.write('<div class="sapUshellSearchResultListItem-Content">');this._renderTitleContainer(r);this._renderAttributesContainer(r);r.write('</div>');},_renderExpandButtonContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-ExpandButtonContainer">');r.write('<div class="sapUshellSearchResultListItem-ExpandButton">');var i,d;var g=t.getProperty("expanded");if(g){i=sap.ui.core.IconPool.getIconURI("slim-arrow-up");d=sap.ushell.resources.i18n.getText("hideDetailBtn_tooltip");}else{i=sap.ui.core.IconPool.getIconURI("slim-arrow-down");d=sap.ushell.resources.i18n.getText("showDetailBtn_tooltip");}var h=t.getAggregation("_expandButton");h.setIcon(i);h.setTooltip(d);h.addEventDelegate({onAfterRendering:function(){t.setAriaExpandedState();}});r.renderControl(h);r.write('</div>');r.write('</div>');},_renderTitleContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-TitleAndImageContainer">');r.write('<div class="sapUshellSearchResultListItem-TitleContainer">');t._renderCheckbox(r);var d="";var g;var h=t.getAggregation("_titleLink");var i=t.getTitle();if(!i||i.trim().length===0){i=n;}else{var j=t.getTitleNavigation();if(j){d=j.getHref();g=j.getTarget();}h.setHref(d);if(g){h.setTarget(g);}}h.setText(i);if(d.length===0){h.setEnabled(false);}h.addEventDelegate({onAfterRendering:function(){t.forwardEllipsis($(h.getDomRef()));}});r.renderControl(h);var k=t.getTitleDescription();if(k&&k.trim().length>0){var l=t.getAggregation("_titleLinkDescription");l.setText(k);r.renderControl(l);}var m=t.getAggregation("_titleDelimiter");r.renderControl(m);if(!t.getModel().config._eshClickableObjectType||t.getModel().getDataSource()===t.getDataSource()){var o=t.getAggregation("_typeText");o.setText(t.getType());r.renderControl(o);}else{var u=this.getModel().getProperty('/uiFilter').clone();u.setDataSource(t.getDataSource());var p=t.getModel().searchUrlParser.renderFromParameters(this.getModel().boTopDefault,u,true);var q=t.getAggregation("_typeLink");q.setText(t.getType());q.setHref(p);q.setTooltip(sap.ushell.resources.i18n.getText("searchInDataSourceTooltip",[t.getDataSource().labelPlural]));r.renderControl(t.getAggregation("_typeLinkAriaDescription"));r.renderControl(q);}r.write('</div>');t._renderImageForPhone(r);r.write('</div>');},_renderCheckbox:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-CheckboxExpandContainer">');r.write('<div class="sapUshellSearchResultListItem-CheckboxContainer">');r.write('<div class="sapUshellSearchResultListItem-CheckboxAlignmentContainer">');var d=t.getAggregation("_selectionCheckBox");var s=t.getProperty("selected");d.setSelected(s);r.renderControl(d);r.write('</div>');r.write('</div>');r.write('</div>');},_renderImageForPhone:function(r){var t=this;if(t.getImageUrl()){r.write('<div class="sapUshellSearchResultListItem-TitleImage');if(this.getImageFormat()==="round"){r.write(" sapUshellSearchResultListItem-ImageContainerRound");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');r.write('<img class="sapUshellSearchResultListItem-Image" src="');r.write(t.getImageUrl());r.write('">');r.write('</div>');}},_renderImageForDocument:function(r){var t=this;if(t.getImageFormat()&&t.getImageFormat().toLowerCase()==="documentthumbnail"){var i=this.getImageNavigation();var d=i?i.getHref():"";var g,h;if(d&&d.length>0){g='<a href="'+d+'"';h='</a>';}else{g='<div';h='</div>';}r.write('<div class="sapUshellSearchResultListItem-DocumentThumbnailContainer">');r.write(g+' class="sapUshellSearchResultListItem-DocumentThumbnailBorder">');r.write('<div class="sapUshellSearchResultListItem-DocumentThumbnail-DogEar"></div>');var z=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("search"),useIconTooltip:false});z.addStyleClass("sapUshellSearchResultListItem-DocumentThumbnailZoomIcon");r.renderControl(z);var j=t.getImageUrl();if(j&&j.length>0){r.write('<img class="sapUshellSearchResultListItem-DocumentThumbnail" src="');r.write(t.getImageUrl());r.write('">');}r.write(h);r.write('</div>');}},_cutDescrAttributeOutOfAttributeList:function(){var d=this.getAttributes();for(var i=0;i<d.length;i++){var g=d[i];if(g.longtext){d.splice(i,1);this.setAttributes(d);return g;}}return undefined;},_renderMultiLineDescription:function(r){var t=this;if(t.getImageFormat()&&t.getImageFormat().toLowerCase()==="documentthumbnail"){var d=this._cutDescrAttributeOutOfAttributeList();if(d&&d.value&&d.value.length>0){var g;if(this._isTweet(d)){g=t.getAggregation("_multiLineDescriptionTweet");}else{g=t.getAggregation("_multiLineDescriptionText");}g.setText(d.value);if(d.whyfound){g.data("ishighlighted","true",true);}else{g.data("ishighlighted","false",true);}if(d.valueWithoutWhyfound){var h=new sap.ui.core.InvisibleText({});h.setText(d.valueWithoutWhyfound);g.data("tooltippedBy",h.getId(),true);g.addEventDelegate({onAfterRendering:function(){var i=$(g.getDomRef());i.attr("aria-describedby",i.attr("data-tooltippedby"));}});t.addAggregation("_attributeValuesWithoutWhyfoundHiddenTexts",h,true);r.renderControl(h);}r.renderControl(g);}else{r.write('<div class="sapUshellSearchResultListItem-MultiLineDescription"></div>');}}},_renderAttributesContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-AttributesExpandContainer');var d=t.getProperty("expanded");if(d){r.write(" sapUshellSearchResultListItem-AttributesExpanded");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-AttributesAndActions">');t._renderImageForDocument(r);t._renderMultiLineDescription(r);r.write('<ul class="sapUshellSearchResultListItem-Attributes">');var i=t.getAttributes();t._renderImageAttribute(r,(i.length===0));t._renderAllAttributes(r,i);r.write('<li class="sapUshellSearchResultListItem-ExpandSpacerAttribute" aria-hidden="true"></li>');r.write('</ul>');t._renderRelatedObjectsToolbar(r);r.write('</div>');r.write('</div>');},_renderAllAttributes:function(r,d){var t=this;if(d.length===0){r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-MainAttribute sapUshellSearchResultListItem-EmptyAttributePlaceholder" aria-hidden="true"></li>');return;}var g;var l;var v;var h;var j,m,o;var p;var q=this.getLayoutCache()||{};this.setLayoutCache(q,true);if(!q.attributes){q.attributes={};}var i=0,k,s=0;var u=4;var w=3;var x=[0,0,0];var y=[0,0,0,0];var z=2;var A=2;var B;var C=t.getImageFormat()&&t.getImageFormat().toLowerCase()==="documentthumbnail";var D=t.getImageUrl()&&!C;if(C){u=w=2;x=y=[0,0];z=A=4;}var E=u*x.length;var F=w*y.length;if(D){E--;F--;x[0]++;y[0]++;}t.destroyAggregation("_attributeLabels");t.destroyAggregation("_attributeValues");t.destroyAggregation("_attributeValuesWithoutWhyfoundHiddenTexts");var G=function(M){return function(){var N=$(this.getDomRef());N.attr("aria-describedby",N.attr("data-tooltippedby"));}.bind(M);};for(;!(z<=0&&A<=0)&&i<d.length;i++){g=d[i];if(C&&s>=4){break;}if(g.isTitle){continue;}if(E<=0&&F<=0&&!g.whyfound){continue;}l=g.name;v=g.value;if(l===undefined||v===undefined){continue;}if(!v||v.trim().length===0){v=n;}if(g.longtext===undefined||g.longtext===null||g.longtext===''){o=false;}else{o=true;}h=g.valueWithoutWhyfound;var _=-1,H=-1,I={desktop:1,tablet:1};var J=q.attributes[g.key]||{};q.attributes[g.key]=J;r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-MainAttribute');if(o){B=J.longTextColumnNumber||t._howManyColumnsToUseForLongTextAttribute(h);J.longTextColumnNumber=B;I=B;r.write(' sapUshellSearchResultListItem-LongtextAttribute');}if(E<=0){if(g.whyfound&&z>0){r.write(' sapUshellSearchResultListItem-WhyFoundAttribute-Desktop');z--;}else{r.write(' sapUshellSearchResultListItem-DisplayNoneAttribute-Desktop');}}if(F<=0){if(g.whyfound&&A>0){r.write(' sapUshellSearchResultListItem-WhyFoundAttribute-Tablet');A--;}else{r.write(' sapUshellSearchResultListItem-DisplayNoneAttribute-Tablet');}}if(o&&D&&x[0]===1){H=0;B=J.longTextColumnNumber.desktop<u?J.longTextColumnNumber.desktop:u-1;x[0]+=B;E-=B;}else{for(k=0;k<x.length;k++){if(x[k]+I.desktop<=u){x[k]+=I.desktop;E-=I.desktop;H=k;break;}}}if(H<0){H=x.length;}if(o&&D&&y[0]===1){_=0;B=J.longTextColumnNumber.tablet<w?J.longTextColumnNumber.tablet:w-1;y[0]+=B;F-=B;}else{for(k=0;k<y.length;k++){if(y[k]+I.tablet<=w){y[k]+=I.tablet;F-=I.tablet;_=k;break;}}}if(_<0){_=y.length;}r.write(' sapUshellSearchResultListItem-OrderTablet-'+_);r.write(' sapUshellSearchResultListItem-OrderDesktop-'+H);r.write('"');if(o){r.write(' data-sap-searchresultitem-attributeweight-desktop="'+I.desktop+'"');r.write(' data-sap-searchresultitem-attributeweight-tablet="'+I.tablet+'"');}r.write('>');j=new sap.m.Label({displayOnly:true});j.setText(l);j.addStyleClass("sapUshellSearchResultListItem-AttributeKey");j.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(j);r.write('<span class="sapUshellSearchResultListItem-AttributeValueContainer">');if(g.defaultNavigationTarget){m=new a();m.setHref(g.defaultNavigationTarget.getHref());m.setTarget(g.defaultNavigationTarget.getTarget());m.addStyleClass("sapUshellSearchResultListItem-AttributeLink");}else if(this._isTweet(g)){m=new b();}else{m=new S();}m.setText(v);m.addStyleClass("sapUshellSearchResultListItem-AttributeValue");m.addStyleClass("sapUshellSearchResultListItem-MightOverflow");if(g.whyfound){m.data("ishighlighted","true",true);m.addStyleClass("sapUshellSearchResultListItem-AttributeValueHighlighted");}if(o){m.data("islongtext","true",true);}if(h){p=new sap.ui.core.InvisibleText({});p.addStyleClass("sapUshellSearchResultListItem-AttributeValueContainer-HiddenText");p.setText(h);m.data("tooltippedBy",p.getId(),true);m.addEventDelegate({onAfterRendering:G(m)});t.addAggregation("_attributeValuesWithoutWhyfoundHiddenTexts",p,true);r.renderControl(p);}r.renderControl(m);r.write('</span>');r.write('</li>');t.addAggregation("_attributeLabels",j,true);t.addAggregation("_attributeValues",m,true);s++;}if(D){var K=u-x[0];var L=w-y[0];if(K>0||L>0){r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-MainAttribute');r.write(' sapUshellSearchResultListItem-OrderTablet-0 sapUshellSearchResultListItem-OrderDesktop-0');r.write('"');r.write(' data-sap-searchresultitem-attributeweight-desktop="'+K+'"');r.write(' data-sap-searchresultitem-attributeweight-tablet="'+L+'"');r.write('></li>');}}},_isTweet:function(i){var m=sap.ushell.renderers.fiori2.search.getModelSingleton();return m.config._tweetAttribute===i.key;},_howManyColumnsToUseForLongTextAttribute:function(d){if(d.length<50){return{tablet:1,desktop:1};}if(d.length<85){return{tablet:2,desktop:2};}if(d.length<135){return{tablet:3,desktop:3};}return{tablet:3,desktop:4};},_renderImageAttribute:function(r,i){var t=this;if(!t.getImageUrl()||t.getImageFormat()&&t.getImageFormat().toLowerCase()==="documentthumbnail"){return;}r.write('<li class="sapUshellSearchResultListItem-GenericAttribute sapUshellSearchResultListItem-ImageAttribute');if(i){r.write(' sapUshellSearchResultListItem-LonelyImageAttribute');}r.write('">');r.write('<div class="sapUshellSearchResultListItem-ImageContainer');if(this.getImageFormat()==="round"){r.write(" sapUshellSearchResultListItem-ImageContainerRound");}r.write('">');if(t.getImageUrl()){r.write('<img class="sapUshellSearchResultListItem-Image');if(this.getImageFormat()==="round"){}r.write('" src="');r.write(t.getImageUrl());r.write('">');}if(this.getImageFormat()!=="round"){r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');}r.write('</div>');r.write('</li>');},_renderRelatedObjectsToolbar:function(r){var t=this;var d=t.getNavigationObjects();if(!d||d.length===0){return;}t._showExpandButton=true;var g=t.getAggregation("_relatedObjectActionsToolbar");g.setProperty("navigationObjects",d);g.setProperty("positionInList",this.getPositionInList());r.renderControl(g);},_renderAccessibilityInformation:function(r){var t=this;var p=t.getProperty("parentListItem");if(p){t._renderAriaDescriptionElementForTitle(r,true,true);t._renderAriaDescriptionElementForAttributes(r,true);t._renderAriaDescriptionElementForCollapsedOrExpandedState(r,true);p.addEventDelegate({onAfterRendering:function(d){var g=$(p.getDomRef());t._addAriaDescriptionToParentListElement(p,true);g.on("focusin",function(d){var h=$(d.relatedTarget);if(h.hasClass("sapUshellSearchResultListItem")||h.closest(".sapUshellSearchResultListItemApps").length>0&&!h.hasClass("sapUshellResultListMoreFooter")){t._renderAriaDescriptionElementForTitle(r,false,false);t._renderAriaDescriptionElementForAttributes(r,false);t._renderAriaDescriptionElementForCollapsedOrExpandedState(r,false);t._addAriaDescriptionToParentListElement(p,false);}else{t._renderAriaDescriptionElementForTitle(r,true,false);t._renderAriaDescriptionElementForAttributes(r,false);t._renderAriaDescriptionElementForCollapsedOrExpandedState(r,false);t._addAriaDescriptionToParentListElement(p,true);}});},onsapspace:function(E){if(E.target===E.currentTarget){t.toggleDetails();}},onsapenter:function(E){if(E.target===E.currentTarget){var d=t.getTitleNavigation();if(d){d.performNavigation();}}}});}},getAccessibilityInfo:function(){var d={};if(sap.ui.core.Control.prototype.getAccessibilityInfo){d=sap.ui.core.Control.prototype.getAccessibilityInfo.apply(this,arguments)||d;}d.description="";return d;},_renderAriaDescriptionElementForTitle:function(r,w,d){var t=this;t._searchResultListPrefix=t._searchResultListPrefix||sap.ushell.resources.i18n.getText("result_list_announcement_screenreaders");var l=t.getTitle()+", "+t.getType()+".";if(w){l=t._searchResultListPrefix+" "+l;}var g=t.getAggregation("_titleLabeledByText");g.setText(l);if(d&&r){r.renderControl(g);}},_renderAriaDescriptionElementForAttributes:function(r,d){var t=this;var g=t.getAggregation("_attributesLabeledByText");var h=$(t.getDomRef()).find(".sapUshellSearchResultListItem-Attributes").find(".sapUshellSearchResultListItem-MainAttribute");var l;if(h.length===0){l=sap.ushell.resources.i18n.getText("result_list_item_aria_no_attributes");}else{l=sap.ushell.resources.i18n.getText("result_list_item_aria_has_attributes");h.each(function(){var i=$(this);if(i.is(":visible")&&i.attr("aria-hidden")!=="true"){var j=i.find(".sapUshellSearchResultListItem-AttributeKey").text();var k=i.find(".sapUshellSearchResultListItem-AttributeValueContainer");var m=k.find(".sapUshellSearchResultListItem-AttributeValueContainer-HiddenText");if(m.length===0){m=k.find(".sapUshellSearchResultListItem-AttributeValue");}var o=m.text();l+=sap.ushell.resources.i18n.getText("result_list_item_aria_attribute_and_value",[j,o]);}});}g.setText(l);if(d&&r){r.renderControl(g);}},_renderAriaDescriptionElementForCollapsedOrExpandedState:function(r,d){var t=this;var g=t.getAggregation("_expandStateLabeledByText");var l;var h=t.getAggregation("_expandButton");var i=$(h.getDomRef());if(i.css("visibility")!=="hidden"){if(t.isShowingDetails()){l=sap.ushell.resources.i18n.getText("result_list_item_aria_expanded");var j=this.getNavigationObjects();if(j&&j.length>0){l=sap.ushell.resources.i18n.getText("result_list_item_aria_has_links")+l;}}else{l=sap.ushell.resources.i18n.getText("result_list_item_aria_collapsed");}}g.setText(l);if(d&&r){r.renderControl(g);}},_addAriaDescriptionToParentListElement:function(p,i){var t=this.getAggregation("_titleLabeledByText");var d=t.getId();if(i){var g=this.getTotalCountHiddenElement();if(g){d+=" "+g.getId();}}var h=this.getAggregation("_attributesLabeledByText");d+=" "+h.getId();var j=this.getAggregation("_expandStateLabeledByText");d+=" "+j.getId();var k=$(p.getDomRef());k.attr("aria-labelledby",d);},_getExpandAreaObjectInfo:function(){var t=this;var r=$(t.getDomRef());r.addClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");var d=r.find(".sapUshellSearchResultListItem-AttributesExpandContainer");var g=r.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var h=false;if(g.css("display")==="none"){g.css("display","block");h=true;}var i=d.height();var j=r.find(".sapUshellSearchResultListItem-AttributesAndActions").height();r.removeClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");if(h){g.css("display","");}var k=this._getElementsInExpandArea();var l=200;var m=l/10;var o={resultListItem:r,attributesExpandContainer:d,currentHeight:i,expandedHeight:j,elementsToFadeInOrOut:k,expandAnimationDuration:l,fadeInOrOutAnimationDuration:m,relatedObjectsToolbar:g};return o;},_getElementsInExpandArea:function(){var t=this;var d=$(t.getDomRef());var g=[];d.addClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");var h=d.find(".sapUshellSearchResultListItem-GenericAttribute:not(.sapUshellSearchResultListItem-ImageAttribute)");if(h.length>0){var i=h.position().top;h.each(function(){if($(this).position().top>i){g.push(this);}});}d.removeClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");return g;},isShowingDetails:function(){var d=this._getExpandAreaObjectInfo();if(d.currentHeight<d.expandedHeight){return false;}return true;},showDetails:function(d){var t=this;if(t.isShowingDetails()){return;}var g=this._getExpandAreaObjectInfo();g.relatedObjectsToolbar.css("opacity",0);g.relatedObjectsToolbar.css("display","block");var r=t.getAggregation("_relatedObjectActionsToolbar");if(r){r._layoutToolbarElements();}t.forwardEllipsis($(t.getDomRef()).find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));$(t.getDomRef()).addClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");var h,s=false;var i=g.attributesExpandContainer.animate({"height":g.expandedHeight},{"duration":g.expandAnimationDuration,"progress":function(j,p,k){if(!s&&p>0.5){h=g.relatedObjectsToolbar.animate({"opacity":1},k).promise();s=true;jQuery.when(i,h).done(function(){t.setProperty("expanded",true,true);$(this).addClass("sapUshellSearchResultListItem-AttributesExpanded");$(this).css("height","");$(g.elementsToFadeInOrOut).css("opacity","");$(t.getDomRef()).removeClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");var l=sap.ui.core.IconPool.getIconURI("slim-arrow-up");var m=t.getAggregation("_expandButton");m.setTooltip(sap.ushell.resources.i18n.getText("hideDetailBtn_tooltip"));m.setIcon(l);m.rerender();g.relatedObjectsToolbar.css("display","");g.relatedObjectsToolbar.css("opacity","");t._renderAriaDescriptionElementForAttributes(undefined,false);t._renderAriaDescriptionElementForCollapsedOrExpandedState(undefined,false);}.bind(this));}}}).promise();$(g.elementsToFadeInOrOut).animate({"opacity":1},g.fadeInOrOutAnimationDuration);},hideDetails:function(d){var t=this;var r=$(t.getDomRef());if(!t.isShowingDetails()){return;}var g=this._getExpandAreaObjectInfo();g.relatedObjectsToolbar.css("opacity",1);g.relatedObjectsToolbar.animate({"opacity":0},g.expandAnimationDuration/2);var h=r.find(".sapUshellSearchResultListItem-MainAttribute").outerHeight(true)+r.find(".sapUshellSearchResultListItem-ExpandSpacerAttribute").outerHeight(true);var s=false;var i=g.attributesExpandContainer.animate({"height":h},{"duration":g.expandAnimationDuration,"progress":function(j,p,k){if(!s&&k<=g.fadeInOrOutAnimationDuration){s=true;var l=$(g.elementsToFadeInOrOut).animate({"opacity":0},g.fadeInOrOutAnimationDuration).promise();jQuery.when(i,l).done(function(){t.setProperty("expanded",false,true);g.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(g.elementsToFadeInOrOut).css("opacity","");g.relatedObjectsToolbar.css("opacity","");var m=sap.ui.core.IconPool.getIconURI("slim-arrow-down");var o=t.getAggregation("_expandButton");o.setTooltip(sap.ushell.resources.i18n.getText("showDetailBtn_tooltip"));o.setIcon(m);o.rerender();t._renderAriaDescriptionElementForAttributes(undefined,false);t._renderAriaDescriptionElementForCollapsedOrExpandedState(undefined,false);});}}}).promise();},toggleDetails:function(d){var g;var m=sap.ushell.renderers.fiori2.search.getModelSingleton();if(this.isShowingDetails()){g=m.eventLogger.ITEM_HIDE_DETAILS;this.hideDetails(d);}else{g=m.eventLogger.ITEM_SHOW_DETAILS;this.showDetails(d);}m.eventLogger.logEvent({type:g,itemPosition:this.getPositionInList(),executionId:this.getResultSetId()});},isSelectionModeEnabled:function(){var t=this;var i=false;var s=$(t.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");if(s){i=s.css("opacity")>0;}return i;},enableSelectionMode:function(d){var t=this;var s=$(t.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-innerContainer");var g=s.find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");var h=200;var i=false;s.animate({width:"2rem"},{"duration":h,"progress":function(j,p,r){if(!i&&p>0.5){g.css("display","");g.animate({opacity:"1.0"},h/2);i=true;}}});},disableSelectionMode:function(d){var t=this;var s=$(t.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-innerContainer");var g=s.find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");var h=200;g.animate({opacity:"0.0"},h/2,function(){g.css("display","none");});s.animate({width:"0"},h);},toggleSelectionMode:function(d){if(this.isSelectionModeEnabled()){this.disableSelectionMode(d);}else{this.enableSelectionMode(d);}},onAfterRendering:function(){var t=this;var d=$(t.getDomRef());t._showOrHideExpandButton();t._setListItemStatusBasedOnWindowSize();t._renderAriaDescriptionElementForTitle(undefined,false);t._renderAriaDescriptionElementForAttributes(undefined,false);t._renderAriaDescriptionElementForCollapsedOrExpandedState(undefined,false);t.forwardEllipsis(d.find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));c.attachEventHandlersForTooltip(t.getDomRef());},resizeEventHappened:function(){var t=this;var d=$(t.getDomRef());t._showOrHideExpandButton();t._setListItemStatusBasedOnWindowSize();t.getAggregation("_titleLink").rerender();t.forwardEllipsis(d.find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));},_getPhoneSize:function(){return 767;},_resetPrecalculatedValues:function(){this._visibleAttributes=undefined;this._detailsArea=undefined;this._showExpandButton=false;},_setListItemStatusBasedOnWindowSize:function(){var w=window.innerWidth;var p=this.getParentListItem();if(this.getTitleNavigation()&&w<=this._getPhoneSize()){p.setType(sap.m.ListType.Active);}else{p.setType(sap.m.ListType.Inactive);}},_showOrHideExpandButton:function(){var t=this;var d=$(t.getDomRef());var g=d.find(".sapUshellSearchResultListItem-ExpandButtonContainer");var i=g.css("visibility")!=="hidden";var s=false;var h=t.getImageFormat()&&t.getImageFormat().toLowerCase()==="documentthumbnail";if(!h){var j=d.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");s=j.length>0;}if(!h&&!s){var k=t._getElementsInExpandArea();if(k.length>0){s=true;}}if(i&&!s){g.css("visibility","hidden");g.attr("aria-hidden","true");t.setAriaExpandedState();}else if(!i&&s){g.css("visibility","");g.removeAttr("aria-hidden");t.setAriaExpandedState();}},setAriaExpandedState:function(){var t=this;var d=t.getAggregation("_expandButton");var g=$(d.getDomRef());var h=$(t.getDomRef());var i=t.getParentListItem()?$(t.getParentListItem().getDomRef()):h.closest("li");var j=h.find(".sapUshellSearchResultListItem-ExpandButtonContainer");if(j.css("visibility")==="hidden"){g.removeAttr("aria-expanded");i.removeAttr("aria-expanded");}else{var k=t.getProperty("expanded");if(k){g.attr("aria-expanded","true");i.attr("aria-expanded","true");}else{g.attr("aria-expanded","false");i.attr("aria-expanded","false");}}},_registerItemPressHandler:function(){var t=this;var p=t.getParentListItem();if(p){p.attachPress(function(d){t._performTitleNavigation();});t._registerItemPressHandler=function(){};}},_performTitleNavigation:function(p){var t=p&&p.trackingOnly||false;var d=this.getTitleNavigation();if(d){d.performNavigation({trackingOnly:t});}},forwardEllipsis:function(o){var g=$(this.getDomRef());g.addClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");o.each(function(i,d){c.forwardEllipsis4Whyfound(d);});g.removeClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListItemDocument',['sap/ushell/renderers/fiori2/search/controls/SearchResultListItem','sap/ushell/renderers/fiori2/search/controls/SearchText','sap/ushell/renderers/fiori2/search/SearchHelper'],function(S,a,b){"use strict";var n='\u2013';return S.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListItemDocument",{renderer:function(r,c){c._renderer(r);},_renderContentContainer:function(r){r.write('<div class="sapUshellSearchResultListItem-Content">');this._renderTitleContainer(r);this._renderAttributesContainer(r);r.write('</div>');},_renderTitleContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-TitleAndImageContainer">');r.write('<div class="sapUshellSearchResultListItem-TitleContainer">');t._renderCheckbox(r);var c=t.getAdditionalParameters().titleUrl;var d=t.getAggregation("_titleLink");d.setHref(c);d.setText(t.getTitle());if(c.length===0){d.setEnabled(false);}r.renderControl(d);var e=t.getAggregation("_typeText");e.setText(t.getType());r.renderControl(e);r.write('</div>');t._renderImageForPhone(r);r.write('</div>');},_renderAttributesContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItemDoc-AttributesExpandContainer');var e=t.getProperty("expanded");if(e){r.write(" sapUshellSearchResultListItem-AttributesExpanded");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-AttributesAndActions">');r.write('<ul class="sapUshellSearchResultListItem-Attributes">');this._renderThumbnailSnippetContainer(r);this._renderDocAttributesContainer(r);r.write('<div class="sapUshellSearchResultListItem-ExpandSpacerAttribute" aria-hidden="true"></div>');r.write('</ul>');t._renderRelatedObjectsToolbar(r);r.write('</div>');r.write('</div>');},_renderThumbnailContainer:function(r){var t=this;if(!t.getImageUrl()){return;}if(t.getContainsThumbnail()===true){r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailContainer">');r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailContainerInner">');var z=new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("search"),useIconTooltip:false});if(t.getContainsSuvFile()===true){var p=function(){window.open(t.getSuvlink(),'_blank');};z.attachPress(p);}z.addStyleClass("sapUshellSearchResultListItemDoc-ThumbnailZoomIcon");r.renderControl(z);if(t.getContainsSuvFile()===true){r.write('<a target="_blank" href="'+t.getSuvlink()+'">');}else{r.write('<a target="_blank" >');}r.write('<img class="sapUshellSearchResultListItemDoc-Thumbnail" src="');r.write(t.getImageUrl());r.write('</a>');r.write('</div>');r.write('</div>');}else{r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailContainer-hidden">');r.write('</div>');}},_renderImageForPhone:function(r){var t=this;if(t.getImageUrl()&&t.getContainsThumbnail()===true){r.write('<div class="sapUshellSearchResultListItem-TitleImage">');r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');r.write('<img class="sapUshellSearchResultListItem-Image" src="');r.write(t.getImageUrl());r.write('">');r.write('</div>');}},_renderDocAttributesContainer:function(r){r.write('<div class="sapUshellSearchResultListItemDoc-AttributesContainer">');var i=this.getAttributes();this._renderAllAttributes(r,i);r.write('</div>');},_renderThumbnailSnippetContainer:function(r){r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailSnippetContainer">');this._renderThumbnailContainer(r);this._renderSnippetContainer(r);r.write('</div>');},_renderSnippetContainer:function(r){var c=this.getAttributes();for(var i=0;i<c.length;i++){var d=c[i];if(d.longtext){var v=new a();v.setText(d.value);v.addStyleClass("sapUshellSearchResultListItemDoc-Snippet");r.renderControl(v);}}},_renderAllAttributes:function(r,c){var t=this;var d;var l;var v;var e;var p;var i=0,j=0,k=0;var f=8;if(t.getImageUrl()){f--;}var g=function(h){var m;for(var i=0;i<h.length;i++){m=h[i];if(m.key==='FILE_PROPERTY'&&m.value){return true;}}return false;};var C=g(c);t.destroyAggregation("_attributeValues");for(;j<f&&i<c.length;i++){d=c[i];if(d.isTitle||d.longtext){continue;}if(C===true&&d.key!=='FILE_PROPERTY'){continue;}if(!d.value){continue;}if(C===true){var F=JSON.parse(d.value);for(;k<F.length&&k<10;k++){p=F[k];switch(p.type){case"date-time":var D=new Date(p.value);var o=sap.ui.core.format.DateFormat.getDateTimeInstance({style:"medium"},sap.ui.getCore().getConfiguration().getLocale());v=o.format(D);break;case"byte":v=b.formatFileSize(Number(p.value));break;case"integer":v=b.formatInteger(Number(p.value));break;default:v=p.value;}l=p.category+': '+p.name;if(v===undefined){continue;}if(!v||v===""){v=n;}e=new a();e.setText(v);e.addStyleClass("sapUshellSearchResultListItemDoc-AttributeValue");e.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(e);t.addAggregation("_attributeValues",e,true);}}else{l=d.name;v=d.value;if(l===undefined||v===undefined){continue;}if(!v||v===""){v=n;}e=new a();e.setText(v);e.addStyleClass("sapUshellSearchResultListItemDoc-AttributeValue");e.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(e);t.addAggregation("_attributeValues",e,true);}j++;}},_getExpandAreaObjectInfo:function(){var t=this;var r=$(t.getDomRef());var c=r.find(".sapUshellSearchResultListItemDoc-AttributesExpandContainer");var d=r.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var e=false;if(d.css("display")==="none"){d.css("display","block");e=true;}var f=c.height();var g=r.find(".sapUshellSearchResultListItem-AttributesAndActions").height();if(e){d.css("display","");}var h=[];r.find(".sapUshellSearchResultListItem-GenericAttribute").each(function(){var l=$(this);if(l.css("order")>2){h.push(this);}});var i=200;var j=i/10;var k={resultListItem:r,attributesExpandContainer:c,currentHeight:f,expandedHeight:g,elementsToFadeInOrOut:h,expandAnimationDuration:i,fadeInOrOutAnimationDuration:j,relatedObjectsToolbar:d};return k;},hideDetails:function(c){var t=this;var r=$(t.getDomRef());if(!t.isShowingDetails()){return;}var e=this._getExpandAreaObjectInfo();var d=r.find(".sapUshellSearchResultListItem-Attributes").outerHeight(true);var s=false;var f=e.attributesExpandContainer.animate({"height":d},{"duration":e.expandAnimationDuration,"progress":function(g,p,h){if(!s&&h<=e.fadeInOrOutAnimationDuration){s=true;var i=$(e.elementsToFadeInOrOut).animate({"opacity":0},e.fadeInOrOutAnimationDuration).promise();jQuery.when(f,i).done(function(){t.setProperty("expanded",false,true);e.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(e.elementsToFadeInOrOut).css("opacity","");var j=sap.ui.core.IconPool.getIconURI("slim-arrow-down");var k=t.getAggregation("_expandButton");k.setTooltip(sap.ushell.resources.i18n.getText("showDetailBtn_tooltip"));k.setIcon(j);k.rerender();});}}}).promise();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListItemNote',['sap/ushell/renderers/fiori2/search/controls/SearchResultListItem','sap/ushell/renderers/fiori2/search/controls/SearchText','sap/ushell/renderers/fiori2/search/SearchHelper'],function(S,a,b){"use strict";var n='\u2013';return S.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListItemNote",{renderer:function(r,c){c._renderer(r);},_renderContentContainer:function(r){r.write('<div class="sapUshellSearchResultListItem-Content">');this._renderTitleContainer(r);this._renderAttributesContainer(r);r.write('</div>');},_renderTitleContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-TitleAndImageContainer">');r.write('<div class="sapUshellSearchResultListItem-TitleContainer">');t._renderCheckbox(r);var c=t.getTitleUrl();var d=t.getAggregation("_titleLink");d.setHref(c);d.setText(t.getTitle());if(c.length===0){d.setEnabled(false);}r.renderControl(d);var e=t.getAggregation("_typeText");e.setText(t.getType());r.renderControl(e);r.write('</div>');t._renderImageForPhone(r);r.write('</div>');},_renderAttributesContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItemDoc-AttributesExpandContainer');var e=t.getProperty("expanded");if(e){r.write(" sapUshellSearchResultListItem-AttributesExpanded");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-AttributesAndActions">');r.write('<ul class="sapUshellSearchResultListItem-Attributes">');this._renderThumbnailSnippetContainer(r);this._renderDocAttributesContainer(r);r.write('<div class="sapUshellSearchResultListItem-ExpandSpacerAttribute" aria-hidden="true"></div>');r.write('</ul>');t._renderRelatedObjectsToolbar(r);r.write('</div>');r.write('</div>');},_renderImageForPhone:function(r){var t=this;if(t.getImageUrl()&&t.getContainsThumbnail()===true){r.write('<div class="sapUshellSearchResultListItem-TitleImage">');r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');r.write('<img class="sapUshellSearchResultListItem-Image" src="');r.write(t.getImageUrl());r.write('">');r.write('</div>');}},_renderDocAttributesContainer:function(r){r.write('<div class="sapUshellSearchResultListItemNote-AttributesContainer">');var i=this.getAttributes();this._renderAllAttributes(r,i);r.write('</div>');},_renderThumbnailSnippetContainer:function(r){r.write('<div class="sapUshellSearchResultListItemNote-ThumbnailSnippetContainer">');this._renderSnippetContainer(r);r.write('</div>');},_renderSnippetContainer:function(r){var c=this.getAttributes();for(var i=0;i<c.length;i++){var d=c[i];if(d.longtext){var v=new a();v.setText(d.value);v.addStyleClass("sapUshellSearchResultListItemDoc-Snippet");r.renderControl(v);}}},_renderAllAttributes:function(r,c){var t=this;var d;var l;var v;var e;var i=0,j=0;var f=4;if(t.getImageUrl()){f--;}t.destroyAggregation("_attributeValues");for(;j<f&&i<c.length;i++){d=c[i];if(d.isTitle||d.longtext){continue;}if(!d.value){continue;}l=d.name;v=d.value;if(l===undefined||v===undefined){continue;}if(!v||v===""){v=n;}e=new a();e.setText(v);e.addStyleClass("sapUshellSearchResultListItemNote-AttributeValue");e.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(e);t.addAggregation("_attributeValues",e,true);j++;}},_getExpandAreaObjectInfo:function(){var t=this;var r=$(t.getDomRef());var c=r.find(".sapUshellSearchResultListItemDoc-AttributesExpandContainer");var d=r.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var e=false;if(d.css("display")==="none"){d.css("display","block");e=true;}var f=c.height();var g=r.find(".sapUshellSearchResultListItem-AttributesAndActions").height();if(e){d.css("display","");}var h=[];r.find(".sapUshellSearchResultListItem-GenericAttribute").each(function(){var l=$(this);if(l.css("order")>2){h.push(this);}});var i=200;var j=i/10;var k={resultListItem:r,attributesExpandContainer:c,currentHeight:f,expandedHeight:g,elementsToFadeInOrOut:h,expandAnimationDuration:i,fadeInOrOutAnimationDuration:j,relatedObjectsToolbar:d};return k;},hideDetails:function(c){var t=this;var r=$(t.getDomRef());if(!t.isShowingDetails()){return;}var e=this._getExpandAreaObjectInfo();var d=r.find(".sapUshellSearchResultListItem-Attributes").outerHeight(true);var s=false;var f=e.attributesExpandContainer.animate({"height":d},{"duration":e.expandAnimationDuration,"progress":function(g,p,h){if(!s&&h<=e.fadeInOrOutAnimationDuration){s=true;var i=$(e.elementsToFadeInOrOut).animate({"opacity":0},e.fadeInOrOutAnimationDuration).promise();jQuery.when(f,i).done(function(){t.setProperty("expanded",false,true);e.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(e.elementsToFadeInOrOut).css("opacity","");var j=sap.ui.core.IconPool.getIconURI("slim-arrow-down");var k=t.getAggregation("_expandButton");k.setTooltip(sap.ushell.resources.i18n.getText("showDetailBtn_tooltip"));k.setIcon(j);k.rerender();});}}}).promise();}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListSelectionHandler',['sap/ui/base/Object'],function(){"use strict";return sap.ui.base.Object.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListSelectionHandler",{isMultiSelectionAvailable:function(d){return false;},actionsForDataSource:function(d){return[];}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultListSelectionHandlerNote',['./SearchResultListSelectionHandler'],function(S){"use strict";return S.extend("sap.ushell.renderers.fiori2.search.controls.SearchResultListSelectionHandlerNote",{isMultiSelectionAvailable:function(d){return true;},actionsForDataSource:function(d){var a=[{text:"Show Selected Items",action:function(s){var m="No Items were selected!";if(s.length>0){m="Following Items were selected:";for(var i=0;i<s.length;i++){m+="\n"+s[i].title;}}sap.m.MessageBox.show(m,{icon:sap.m.MessageBox.Icon.INFORMATION,title:"I'm a Custom Action for testing Multi-Selection",actions:[sap.m.MessageBox.Action.OK]});}}];return a;}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultMap',['sap/ushell/renderers/fiori2/search/SearchConfiguration','sap/base/Log'],function(S,L){"use strict";return sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchResultMap',{teststring:'',ContainerContent:null,MapContainer:null,minLat:0,minLon:0,maxLat:0,maxLon:0,centerLat:0,centerLon:0,iNrLocations:0,myMap:null,myMapContainer:null,metadata:{aggregations:{"_map":{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}}},init:function(){var t=this;var m={"MapProvider":[{"name":"OPENSTREETMAP","type":"","description":"","tileX":"256","tileY":"256","maxLOD":"19","copyright":" openstreetmap","Source":[{"id":"s1","url":"http://a.tile.openstreetmap.org/{LOD}/{X}/{Y}.png"},{"id":"s2","url":"http://b.tile.openstreetmap.org/{LOD}/{X}/{Y}.png"},{"id":"s3","url":"http://c.tile.openstreetmap.org/{LOD}/{X}/{Y}.png"}]}],"MapLayerStacks":[{"name":"DEFAULT","MapLayer":{"name":"Open Street Map Layer","refMapProvider":"OPENSTREETMAP","opacity":"1","colBkgnd":"RGB(255,255,255)"}}]};try{jQuery.sap.require("sap.ui.vk.MapContainer","sap.ui.vk.ContainerContent");t.MapContainer=sap.ui.vk.MapContainer;t.ContainerContent=sap.ui.vk.ContainerContent;}catch(e){}var a=S.getInstance().mapProvider;if(a!==undefined&&typeof(a)==="object"&&a.name&&a.name.length>0){m.MapProvider.push(a);m.MapLayerStacks[0].MapLayer.refMapProvider=a.name;}t.geoMap=new sap.ui.vbm.GeoMap("sapUshellSearchGeoMap",{legendVisible:false,scaleVisible:false,refMapLayerStack:'DEFAULT',mapConfiguration:m});if(t.MapContainer&&t.ContainerContent){var c=new t.ContainerContent({content:t.geoMap});this.myMapContainer=new t.MapContainer({content:[c],showRectangularZoom:true,showHome:true,showFullScreen:false,showSettings:false,showSelection:false});t.myMap=t.myMapContainer.getContent()[0].getAggregation('content');t.setAggregation('_map',this.myMapContainer);}else{t.setAggregation('_map',t.geoMap);t.myMap=t.getAggregation('_map');}},renderer:function(r,c){c.loadObjects(c);r.write('<div ');r.writeControlData(c);r.addClass('sapUshellSearchResultMap');r.writeClasses();r.write('>');if(c.MapContainer){r.renderControl(c.myMapContainer);}else{r.renderControl(c.myMap);}r.write('</div>');},deg2rad:function(d){return Math.PI*d/180;},getSpotList:function(){var t=this;var s=new sap.ui.vbm.Containers();var r=t.getModel().oData.boResults;var n=0;var R,l,T,c,a,b,d,m,e,f,g,i;for(i=0;i<r.length;i++){R=r[i];l={};if(!R.geoJson){continue;}if(typeof R.geoJson.value==='string'){l=JSON.parse(R.geoJson.value);}else{l.coordinates=R.geoJson.value.coordinates;}T=R.geoJson.label;if(T==="LOC_4326"||T==="LOCATION"||T===undefined){T=R.title;}if(T==="LOC_4326"||T==="LOCATION"||T===undefined){for(var j=0;j<R.itemattributes.length;j++){if(R.itemattributes[j].isTitle===true){T=R.itemattributes[j].value;break;}}}if(T===undefined||typeof T!=='string'){T="unlabeled location";}else{T=T.replace(/<[^>]*>/g,"");}c=l.coordinates;if(!c||c.length===0){continue;}a=c[0];b=c[1];if(isNaN(b)||isNaN(a)){continue;}n++;if(n===1){m=a;e=a;f=b;g=b;}else{if(a<m){m=a;}if(a>e){e=a;}if(b<f){f=b;}if(b>g){g=b;}}t.minLon=m;t.maxLon=e;t.minLat=f;t.maxLat=g;var o=new sap.m.Button({text:T});var B=new sap.m.Button({icon:"sap-icon://map",type:sap.m.ButtonType.Emphasized});var h=new sap.ui.layout.HorizontalLayout({content:[B,o]});d=new sap.ui.vbm.Container({position:a+';'+b+';0',item:h,alignment:6});s.addItem(d);}t.iNrLocations=n;if(n===0){s=t.getSpotList2();}return s;},getSpotList2:function(c){var t=this;var r=t.getModel().oData.origBoResults.elements;var R,l,T,C,a,b,s;var d=new sap.ui.vbm.Containers();var n=0;var m,f,g,h;var i=0;for(var k in r){if(!r.hasOwnProperty(k)){continue;}R=r[k];if(!R.LOC_4326){continue;}l=R.LOC_4326;for(var o in R){if(!R.hasOwnProperty(o)){continue;}var A=R[o];T="";var p=false;if(A.$$MetaData$$){var q=A.$$MetaData$$.presentationUsage;if(q&&typeof q.length!=="undefined"){for(var j=0;j<q.length;j++){if(q[j]=="Title"){T=A.value;T=T.replace(/<[^>]*>/g,"");p=true;break;}}}}if(p){break;}}C=null;try{C=JSON.parse(l.value).coordinates;}catch(e){}if(!C||C.length===0){continue;}n++;a=C[0];b=C[1];if(isNaN(b)||isNaN(a)){continue;}i++;if(i===1){m=a;f=a;g=b;h=b;}else{if(a<m){m=a;}if(a>f){f=a;}if(b<g){g=b;}if(b>h){h=b;}}t.minLon=m;t.maxLon=f;t.minLat=g;t.maxLat=h;var u=new sap.m.Button({text:T});var B=new sap.m.Button({icon:"sap-icon://map",type:sap.m.ButtonType.Emphasized});var v=new sap.ui.layout.HorizontalLayout({content:[B,u]});s=new sap.ui.vbm.Container({position:a+';'+b+';0',item:v,alignment:6});d.addItem(s);}t.iNrLocations=n;return d;},loadObjects:function(c){var t=this;var s=t.getSpotList();L.debug("++++++");L.debug("number of locations: "+t.iNrLocations);t.myMap.removeAllVos();t.myMap.addVo(s);var p=S.prototype.parseUrlParameters();for(var a in p){if(a==='box'&&p[a]!=="false"){t.showBoundariesAndCenter();}}},setVisualFrame:function(){var t=this;var v={};v.minLon=t.minLon*0.5;v.maxLon=t.maxLon*1.2;v.minLat=t.minLat*0.8;v.maxLat=t.maxLat*1.2;t.myMap.setVisualFrame(v);},showBoundariesAndCenter:function(){var t=this;var c=new sap.ui.vbm.Spots({items:[new sap.ui.vbm.Spot({type:"Error",text:"center",position:(t.centerLon+" ;  "+t.centerLat+";0")}),new sap.ui.vbm.Spot({type:"Error",text:"TLeft",position:(t.minLon+" ;  "+t.maxLat+";0")}),new sap.ui.vbm.Spot({type:"Error",text:"TRight",position:(t.maxLon+" ;  "+t.maxLat+";0")}),new sap.ui.vbm.Spot({type:"Error",text:"BLeft",position:(t.minLon+" ;  "+t.minLat+";0")}),new sap.ui.vbm.Spot({type:"Error",text:"BRight",position:(t.maxLon+" ;  "+t.minLat+";0")})]});t.myMap.addVo(c);},resizeMap:function(e){var h=$(".sapUshellSearchResultListsContainer").parent().parent().height();h=0.85*h;h=""+h+"px";sap.ui.getCore().byId("sapUshellSearchGeoMap").setHeight(h);var w=$(".sapUshellSearchResultListsContainer").parent().parent().width();w=""+w+"px";sap.ui.getCore().byId("sapUshellSearchGeoMap").setWidth(w);},onAfterRendering:function(e){var t=this;t.resizeMap();window.onresize=t.resizeMap;}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchResultTable',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";return sap.m.Table.extend('sap.ushell.renderers.fiori2.search.controls.SearchResultTable',{renderer:'sap.m.TableRenderer',onAfterRendering:function(){S.attachEventHandlersForTooltip(this.getDomRef());}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchSelect',['sap/m/Select'],function(){"use strict";return sap.m.Select.extend('sap.ushell.renderers.fiori2.search.controls.SearchSelect',{constructor:function(i,o){o=jQuery.extend({},{visible:"{/businessObjSearchEnabled}",autoAdjustWidth:true,items:{path:"/dataSources",template:new sap.ui.core.Item({key:"{id}",text:"{labelPlural}"})},selectedKey:{path:'/uiFilter/dataSource/id',mode:sap.ui.model.BindingMode.OneWay},tooltip:sap.ushell.resources.i18n.getText("searchIn")+" {/uiFilter/dataSource/labelPlural}",change:function(e){var a=this.getSelectedItem();var c=a.getBindingContext();var d=c.getObject();this.getModel().setDataSource(d,false);this.getModel().abortSuggestions();this.getModel().eventLogger.logEvent({type:this.getModel().eventLogger.DROPDOWN_SELECT_DS,dataSourceId:d.id});},enabled:{parts:[{path:"/initializingObjSearch"}],formatter:function(a){return!a;}}},o);sap.m.Select.prototype.constructor.apply(this,[i,o]);this.addStyleClass('searchSelect');},renderer:'sap.m.SelectRenderer',setDisplayMode:function(m){switch(m){case'icon':this.setType(sap.m.SelectType.IconOnly);this.setIcon('sap-icon://slim-arrow-down');break;case'default':this.setType(sap.m.SelectType.Default);break;default:break;}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchSpreadsheet',["sap/ui/core/mvc/Controller",'sap/ushell/renderers/fiori2/search/SearchResultListFormatter',"sap/ui/export/Spreadsheet"],function(C,S,c){"use strict";return C.extend("sap.ui.export.sample.table.Spreadsheet",{onExport:function(){var t=this;t.exportData={columns:[],rows:[]};if(t.table===undefined){t.table=sap.ui.getCore().byId('ushell-search-result-table');t.model=t.table.getModel();}sap.ui.getCore().byId('dataExportButton').setEnabled(false);var e=t.model.query.clone();e.setCalculateFacets(false);e.setTop(1000);var s=function(b){t._parseColumns(b.items[0]);var f=new S();var d=f.format(b,e.filter.searchTerm,{suppressHighlightedValues:true});for(var i=0;i<d.length;i++){b.items[i].title=d[i].title;b.items[i].titleDescription=d[i].titleDescription;}t._parseRows(b.items);t._doExport();};var a=function(b){t.model.normalSearchErrorHandling(b);sap.ui.getCore().byId('dataExportButton').setEnabled(true);t.model.setProperty("/isBusy",false);};if(t.model.getProperty("/boCount")>1000){sap.m.MessageBox.information(sap.ushell.resources.i18n.getText("exportDataInfo"),{actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],onClose:function(A){if(A==sap.m.MessageBox.Action.OK){t.model.setProperty("/isBusy",true);e.getResultSetAsync().then(s,a);}if(A==sap.m.MessageBox.Action.CANCEL){sap.ui.getCore().byId('dataExportButton').setEnabled(true);t.model.setProperty("/isBusy",false);}}});}else{t.model.setProperty("/isBusy",true);e.getResultSetAsync().then(s,a);}},_parseColumns:function(f){var t=this;var e=[];var i;var d={label:f.dataSource.labelPlural,property:'title_export_column',type:'string'};var g="";f.titleDescriptionAttributes.forEach(function(a){g=g+a.label+" ";});g=g+"("+sap.ushell.resources.i18n.getText("titleDescription")+")";var h={label:g,property:'title_description_export_column',type:'string'};var j=[];for(i=0;i<f.detailAttributes.length;i++){if(f.detailAttributes[i].metadata.type!==t.model.sinaNext.AttributeType.ImageUrl){j.push(f.detailAttributes[i]);}}if(t.model.getProperty("/resultToDisplay")!=="searchResultTable"){e.push(d);if(f.titleDescriptionAttributes.length>0){e.push(h);}var l=0;for(i=0;i<j.length&&l<12;i++){e=e.concat(t._getRelatedColumns(j[i]));l++;}}else{var v=[];t.table.getColumns().forEach(function(a){if(a.getVisible()){v.push(a);}});v.sort(function(a,b){if(a.getOrder()<b.getOrder()){return-1;}if(a.getOrder()>b.getOrder()){return 1;}return 0;});v.forEach(function(a){var b=a.getBindingContext().getObject().attributeId;if(b==="SEARCH_TABLE_TITLE_COLUMN"){e.push(d);return;}if(b==="SEARCH_TABLE_TITLE_DESCRIPTION_COLUMN"){e.push(h);return;}for(var i=0;i<j.length;i++){if(b===j[i].id){e=e.concat(t._getRelatedColumns(j[i]));}}});}t.exportData.columns=e;},_getRelatedColumns:function(a){var t=this;var b=[];if(a.hasOwnProperty("value")){b.push(t._getColumn(a));if(a.unitOfMeasure){b.push(t._getColumn(a.unitOfMeasure));}if(a.description){b.push(t._getColumn(a.description));}}if(a.attributes&&a.attributes.length>0){for(var i=0;i<a.attributes.length;i++){var d=a.attributes[i].attribute;if(d&&d.label&&d.id){b.push(t._getColumn(d));}}}return b;},_getColumn:function(a){var t=this;var b={label:a.label,property:a.id};if(a.metadata.type===undefined){b.type='string';return b;}switch(a.metadata.type){case t.model.sinaNext.AttributeType.Double:b.type='number';b.scale=2;break;case t.model.sinaNext.AttributeType.Integer:b.type='number';b.scale=0;break;default:b.type='string';}return b;},_parseRows:function(s){var t=this;var e=[];s.forEach(function(r){var a=r.detailAttributes;var b={};b.title_export_column=r.title;if(r.titleDescriptionAttributes.length>0){b.title_description_export_column=r.titleDescription;}for(var i=0;i<a.length;i++){b=t._getRelatedValues(b,a[i]);}e.push(b);});t.exportData.rows=e;},_getRelatedValues:function(r,a){if(a.value){r[a.id]=a.value;if(a.unitOfMeasure){r[a.unitOfMeasure.id]=a.unitOfMeasure.value;}if(a.description){r[a.description.id]=a.description.value;}}if(a.attributes){for(var i=0;i<a.attributes.length;i++){var b=a.attributes[i].attribute;if(b&&b.id&&b.valueFormatted){r[b.id]=b.valueFormatted;}}}return r;},_doExport:function(){var t=this;var s={workbook:{columns:t.exportData.columns},fileName:sap.ushell.resources.i18n.getText("exportFileName"),dataSource:t.exportData.rows};new c(s).build().then(function(){sap.ui.getCore().byId('dataExportButton').setEnabled(true);t.model.setProperty("/isBusy",false);},function(){sap.ui.getCore().byId('dataExportButton').setEnabled(true);t.model.setProperty("/isBusy",false);});}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchText',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";return sap.m.Text.extend('sap.ushell.renderers.fiori2.search.controls.SearchText',{renderer:'sap.m.TextRenderer',onAfterRendering:function(){var d=this.getDomRef();S.boldTagUnescaper(d);}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchTileHighlighter',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(H){"use strict";var T=H.Tester;var a=sap.ushell.renderers.fiori2.search.controls.SearchTileHighlighter=function(){this.init.apply(this,arguments);};a.prototype={init:function(){},setHighlightTerms:function(h){this.tester=new T(h,'sapUshellSearchHighlight',true,'or');},highlight:function(t){var n=t.getDomRef();if(!n){return;}var h=sap.ui.core.hyphenation.Hyphenation.getInstance();if(!h.isLanguageInitialized()){h.initialize().then(function(){this.doHighlight(n);}.bind(this));}else{this.doHighlight(n);}},doHighlight:function(n){if(n.nodeType===window.Node.TEXT_NODE){this.highlightTextNode(n);return;}for(var i=0;i<n.childNodes.length;++i){var c=n.childNodes[i];this.doHighlight(c);}},_softHyphenRegExp:new RegExp('[\u00ad]','g'),removeSoftHyphens:function(t){return t.replace(this._softHyphenRegExp,'');},highlightTextNode:function(n){var t=this.tester.test(this.removeSoftHyphens(n.textContent));if(!t.bMatch){return;}var s=document.createElement('span');s.innerHTML=jQuery.sap.encodeHTML(t.sHighlightedText);H.boldTagUnescaper(s,'sapUshellSearchHighlight');n.parentNode.insertBefore(s,n);n.parentNode.removeChild(n);}};return a;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchTilesContainer',['sap/ushell/renderers/fiori2/search/controls/SearchTilesContainerKeyHandler','sap/ushell/renderers/fiori2/search/controls/SearchTileHighlighter','sap/ushell/renderers/fiori2/search/controls/SearchResultList','sap/m/Button','sap/ushell/Config'],function(K,T,S,B,C){"use strict";
sap.ui.core.Control.extend('sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer',{
metadata:{properties:{'totalLength':{type:'int',defaultValue:0},'maxRows':{type:'int',defaultValue:1},'highlightTerms':{type:'string',defaultValue:''},'enableKeyHandler':{type:'boolean',defaultValue:true},'resultList':{type:'sap.ushell.renderers.fiori2.search.controls.SearchResultList'},'addAccInformation':{type:'boolean',defaultValue:false}},aggregations:{'tiles':{type:'sap.ui.core.Control',multiple:true}},events:{showMore:{}}},
PHONE_SIZE_STYLE:'sapMTileSmallPhone',
constructor:function(){sap.ui.core.Control.prototype.constructor.apply(this,arguments);if(this.getEnableKeyHandler()){this.addEventDelegate(new K(this));}this.tileHighlighter=new T();this._previousTabHandler={onsaptabprevious:function(e){var t;if(jQuery(this.control.getDomRef()).prop("tagName").toLowerCase()==="button"){t=this.control.getDomRef();}else{var b=jQuery(this.control.getDomRef()).find("[role='option']");if(b.length>0){t=b[0];}}if(e.isMarked()||!t||e.target!==t){return;}this.resultList.forwardTab(false);e.setMarked();}};},
init:function(){sap.ui.core.Control.prototype.init.apply(this,arguments);sap.ui.getCore().getEventBus().subscribe('searchLayoutChanged',this.delayedRerender,this);this.sizeBehaviorDoable=C.on("/core/home/sizeBehavior").do(function(){this.delayedRerender();}.bind(this));},
exit:function(){sap.ui.getCore().getEventBus().unsubscribe('searchLayoutChanged',this.delayedRerender,this);this.sizeBehaviorDoable.off();sap.ui.core.Control.prototype.exit.apply(this,arguments);},
setHighlightTerms:function(t){this.setProperty('highlightTerms',t,true);},
delayedRerender:function(){var t=this;setTimeout(function(){t.rerender();},0);},
renderer:function(r,c){var a=c.getModel().getProperty("/appResults");if(!a||a.length===0){return;}r.write('<div');r.writeControlData(c);r.addClass('sapUshellSearchTileContainer');r.writeClasses();r.write('>');c.renderTiles(r,c);r.write('</div>');},
logUsageAnalytics:function(t){var i,m,c;if(t.attachPress){t.attachPress(function(){m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.eventLogger.logEvent({type:m.eventLogger.TILE_NAVIGATE,tileTitle:t.eventLoggingData.title,targetUrl:t.eventLoggingData.targetUrl});});return;}if(t&&t.getContent){c=t.getContent();if(c.length!==1){return;}i=c[0];if(!i.attachPress){return;}i.attachPress(function(){m=sap.ushell.renderers.fiori2.search.getModelSingleton();m.eventLogger.logEvent({type:m.eventLogger.TILE_NAVIGATE,tileTitle:t.eventLoggingData.title,targetUrl:t.eventLoggingData.targetUrl});});}},
renderTiles:function(r,c){var t=c.getTiles();for(var i=0;i<t.length;i++){var a=t[i];c.logUsageAnalytics(a);c.registerAfterRenderingForTile(a);r.write('<div');r.addClass('sapUshellSearchTileWrapper');r.writeClasses();r.write('>');r.renderControl(a);r.write('</div>');a.addEventDelegate(this._previousTabHandler,{resultList:c.getResultList(),control:a});}c.renderPlusTile(r,c);c.tileHighlighter.setHighlightTerms(c.getHighlightTerms());},
renderPlusTile:function(r,c){r.write('<div');r.addClass('sapUshellSearchTileWrapper');r.addClass('sapUshellSearchShowMoreTile');r.writeClasses();r.writeAttribute('style','display:none');r.write('>');var b=new sap.m.Button({text:sap.ushell.resources.i18n.getText('showMoreApps'),tooltip:sap.ushell.resources.i18n.getText('showMoreApps'),press:function(){c.fireShowMore();}});b.addEventDelegate(this._previousTabHandler,{resultList:c.getResultList(),control:b});b.addStyleClass('sapUshellSearchShowMoreTileButton');b.addStyleClass('sapMGT');b.addStyleClass('OneByOne');r.renderControl(b);r.write('</div>');},
onAfterRendering:function(e){this.limitTileSize();while(this.getNumberRows()>this.getMaxRows()){this.removeLastTile();}var c=this.getDomRef();var n=c.children.length-1;if(this.getTotalLength()>n){this.makePlusTileVisible();this.cutAtRow();}else{c.removeChild(c.children.item(c.children.length-1));}this.getModel().getProperty("/appResults").forEach(function(a){if(a.tile&&typeof a.tile.refresh==='function'){a.tile.refresh();}});this.addAccessibilityInformation();},
addAccessibilityInformation:function(){if(!this.getAddAccInformation()){return;}var c=this.getDomRef();var a=c.children;for(var i=0;i<a.length;++i){var b=a[i];var f=b.querySelector('[tabindex]');if(!f){f=b.querySelector('button');}if(!f){continue;}var d=f.getAttribute('aria-label');if((typeof d)==='string'){f.setAttribute('aria-label',sap.ushell.resources.i18n.getText('tile')+' '+d);}f.setAttribute('role','option');f.setAttribute('aria-posinset',i+1);f.setAttribute('aria-setsize',a.length);}},
limitTileSize:function(){var a=this.isPhoneSize();var c=this.getDomRef();for(var i=0;i<c.children.length;++i){var t=c.children.item(i);if(!this.findElementByStyleClass(t,'sapMGT')||!this.findElementByStyleClass(t,'OneByOne')){t.classList.add('sapMGT');t.classList.add('OneByOne');}if(a){var b=this.findElementByStyleClass(t,'sapMGT');if(b){b.classList.add(this.PHONE_SIZE_STYLE);}}}},
isPhoneSize:function(){var c=this.getDomRef();for(var i=0;i<c.children.length;++i){var t=c.children.item(i);if(this.findElementByStyleClass(t,this.PHONE_SIZE_STYLE)){return true;}}return false;},
findElementByStyleClass:function(d,c){if(d.classList.contains(c)){return d;}if(d.children.length===1){return this.findElementByStyleClass(d.children.item(0),c);}return false;},
getNumberDisplayedTiles:function(){var c=this.getDomRef();return c.children.length;},
registerAfterRenderingForTile:function(t){var a=this;if(t.searchTilesContainerAfterRenderingRegistered){return;}t.addEventDelegate({onAfterRendering:function(){var e=t.getDomRef().querySelector(".TwoByOne","TwoThirds");if(e){e.classList.remove("TwoByOne","TwoThirds");e.classList.add("OneByOne");}a.tileHighlighter.highlight(t);}});t.searchTilesContainerAfterRenderingRegistered=true;},
makePlusTileVisible:function(){var c=this.getDomRef();var p=c.children.item(c.children.length-1);p.style.display='inline-block';},
removeLastTile:function(){var c=this.getDomRef();var l=c.children.item(c.children.length-2);l.parentNode.removeChild(l);},
cutAtRow:function(){var c=this.getDomRef();while(!this.isLastRowCompletelyFilled()||this.getNumberRows()>this.getMaxRows()){if(c.children.length<=2){break;}this.removeLastTile();}},
isLastRowCompletelyFilled:function(){var c=this.getDomRef();var t=this.getTilesPerRow();var a=-1;for(var i=0;i<t;++i){var b=c.children.item(c.children.length-1-i);if(b.style.display==='none'){t++;continue;}if(a<0){a=b.offsetLeft;continue;}if(b.offsetLeft>a){return false;}}return true;},
getNumberRows:function(){var c=this.getDomRef();var t=-1;var a=0;for(var i=0;i<c.children.length-1;++i){var b=c.children.item(i);if(b.style.display==='none'){continue;}if(t<0||b.offsetLeft<=t){a++;}t=b.offsetLeft;}return a;},
getTilesPerRow:function(){var c=this.getDomRef();var t=-1;var a=0;for(var i=0;i<c.children.length;++i){var b=c.children.item(i);if(b.style.display==='none'){continue;}if(b.offsetLeft<=t){return a;}a++;t=b.offsetLeft;}return a;}
});
});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/SearchTilesContainerKeyHandler',['sap/ushell/renderers/fiori2/search/SearchHelper'],function(S){"use strict";var d={getAncestorByClass:function(e,c){while(e){if(e.classList.contains(c)){return e;}e=e.parentElement;}return false;}};var T=function(){this.init.apply(this,arguments);};T.prototype={init:function(t,e){this.tilesContainer=t;this.tilesContainerElement=t.getDomRef();this.element=e;},getIndexInTilesContainer:function(){return Array.prototype.indexOf.call(this.tilesContainerElement.children,this.element);},next:function(){if((this.getIndexInTilesContainer()+1)%this.tilesContainer.getTilesPerRow()===0){return null;}if(this.element.nextElementSibling){return new T(this.tilesContainer,this.element.nextElementSibling);}return null;},previous:function(){if((this.getIndexInTilesContainer())%this.tilesContainer.getTilesPerRow()===0){return null;}if(this.element.previousElementSibling){return new T(this.tilesContainer,this.element.previousElementSibling);}return null;},upper:function(){var i=this.getIndexInTilesContainer()-this.tilesContainer.getTilesPerRow();if(i<0){return null;}return new T(this.tilesContainer,this.tilesContainerElement.children.item(i));},lower:function(){var i=this.getIndexInTilesContainer()+this.tilesContainer.getTilesPerRow();if(i>=this.tilesContainerElement.children.length){return null;}return new T(this.tilesContainer,this.tilesContainerElement.children.item(i));},focus:function(){var e=S.getFocusableTileDomRef(this.element);if(e){e.focus();}}};var K=sap.ushell.renderers.fiori2.search.controls.SearchTilesContainerKeyHandler=function(){this.init.apply(this,arguments);};K.prototype={init:function(t){this.tilesContainer=t;},getFocusedObject:function(e){var t=d.getAncestorByClass(e,'sapUshellSearchTileWrapper');if(!t){return null;}return new T(this.tilesContainer,t);},onsapdown:function(e){this.navigate('lower',e);},onsapup:function(e){this.navigate('upper',e);},onsapleft:function(e){this.navigate('previous',e);},onsapright:function(e){this.navigate('next',e);},navigate:function(m,e){e.stopPropagation();e.preventDefault();var o=this.getFocusedObject(e.target);if(!o){return;}var n=o[m].apply(o,[]);if(!n){return;}n.focus();}};return K;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/twitter/SearchTweet',['sap/ushell/renderers/fiori2/search/controls/twitter/TwitterRenderer'],function(t){"use strict";return sap.ui.core.Control.extend("sap.ushell.renderers.fiori2.search.controls.twitter.SearchTweet",{metadata:{properties:{"text":"string"}},renderer:function(r,c){r.write('<div');r.writeControlData(c);r.writeClasses();r.write('>');t.renderTweet(r,c.getText());r.write('</div>');}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/controls/twitter/TwitterRenderer',[],function(){"use strict";var m={};var e=function(u){return u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");};var a=function(o,h){for(var k in h){o[k]=h[k];}return o;};var d=function(h){var j=[['amp','&'],['apos','\''],['#x27','\''],['#x2F','/'],['#39','\''],['#47','/'],['lt','<'],['gt','>'],['nbsp',' '],['quot','"']];for(var i=0,k=j.length;i<k;++i){h=h.replace(new RegExp('&'+j[i][0]+';','g'),j[i][1]);}return h;};var b=function(s){return s.replace(/&#(\d+);/g,function(h,j){return String.fromCharCode(j);});};var c=function(h){return b(d(h));};
m.Token=function(){};
m.Token.prototype={init:function(){var h=arguments[0];if(h==='tokenize'){this.text=arguments[1];this.matches=[];this.startIndex=arguments[2];this.regExp.lastIndex=this.startIndex;var j=this.regExp.exec(this.text);this.endIndex=this.startIndex+j[0].length;}if(h==='set'){this.text=arguments[1];this.matches=arguments[2];this.startIndex=0;this.endIndex=this.text.length;}},match:function(h,j){this.regExp.lastIndex=0;return!!this.regExp.exec(h[j]);},getLength:function(){return this.endIndex-this.startIndex;},toString:function(){return this.text.slice(this.startIndex,this.endIndex);},toHighlightedString:function(){var p=[];var h=this.startIndex;for(var i=0;i<this.matches.length;++i){var j=this.matches[i];if(j[0]>h){p.push(e(this.text.slice(h,j[0])));}p.push('<b>'+e(this.text.slice(j[0],j[1]))+'</b>');h=j[1];}if(this.endIndex>h){p.push(e(this.text.slice(h,this.endIndex)));}return p.join('');}};
m.TextToken=function(){this.init.apply(this,arguments);};
m.TextToken.prototype=a(new m.Token(),{type:'Text',regExp:new RegExp('[\\w]+','g')});
m.SpecialCharactersTextToken=function(){this.init.apply(this,arguments);};
m.SpecialCharactersTextToken.prototype=a(new m.Token(),{type:'SpecialCharactersText',regExp:new RegExp('[^\\w\\s@#]+','g')});
m.UserToken=function(){this.init.apply(this,arguments);};
m.UserToken.prototype=a(new m.Token(),{type:'User',regExp:new RegExp('[@]+','g')});
m.HashToken=function(){this.init.apply(this,arguments);};
m.HashToken.prototype=a(new m.Token(),{type:'Hash',regExp:new RegExp('[#]+','g')});
m.WhitespaceToken=function(){this.init.apply(this,arguments);};
m.WhitespaceToken.prototype=a(new m.Token(),{type:'Whitespace',regExp:new RegExp('\\s+','g')});
m.MatchStartToken=function(){this.init.apply(this,arguments);};
m.MatchStartToken.prototype=a(new m.Token(),{type:'MatchStart',regExp:new RegExp('<b>','g'),match:function(h,j){return h.slice(j,j+3)==='<b>';}});
m.MatchEndToken=function(){this.init.apply(this,arguments);};
m.MatchEndToken.prototype=a(new m.Token(),{type:'MatchEnd',regExp:new RegExp('</b>','g'),match:function(h,j){return h.slice(j,j+4)==='</b>';}});var t=[m.WhitespaceToken,m.MatchStartToken,m.MatchEndToken,m.HashToken,m.UserToken,m.SpecialCharactersTextToken,m.TextToken];var f={};for(var i=0;i<t.length;++i){var g=t[i];f[g.prototype.type]=g;}
m.Tokenizer=function(){this.init.apply(this,arguments);};
m.Tokenizer.prototype={init:function(h){this.text=h;this.index=0;},getNextToken:function(){if(this.index>=this.text.length){return null;}for(var i=0;i<t.length;++i){var g=t[i];if(g.prototype.match(this.text,this.index)){var h=new g('tokenize',this.text,this.index);this.index+=h.getLength();return h;}}throw'tokenization error';},lookAhead:function(h){h=h||1;var p=this.getPosition();var j=[];for(var i=0;i<h;++i){var k=this.getNextToken();j.push(k);}this.setPosition(p);if(h===1){return j[0];}return j;},getPosition:function(){return this.index;},setPosition:function(p){this.index=p;}};
m.MatchTokenizer=function(){this.init.apply(this,arguments);};
m.MatchTokenizer.prototype={init:function(h){this.tokenizer=new m.Tokenizer(h);this.matchCounter=0;},getNextToken:function(){var h;var j=[];for(;;){var k=this.tokenizer.lookAhead(1);if(!k){break;}if(k.type==='MatchStart'||k.type==='MatchEnd'){this.tokenizer.getNextToken();switch(k.type){case'MatchStart':this.matchCounter++;break;case'MatchEnd':this.matchCounter--;break;}continue;}if(!h){this.tokenizer.getNextToken();h=k.type;k._match=this.matchCounter>0;j.push(k);continue;}if(h===k.type){this.tokenizer.getNextToken();k._match=this.matchCounter>0;j.push(k);continue;}break;}switch(j.length){case 0:return null;case 1:var r=j[0];if(r._match){r.matches=[[r.startIndex,r.endIndex]];}return r;default:return this.mergeTokens(h,j);}},mergeTokens:function(h,j){var k=[];var l=[];var n=0;for(var i=0;i<j.length;++i){var o=j[i];var p=o.toString();var q=p.length;k.push(p);if(o._match){l.push([n,n+q]);}n+=q;}var r=new f[h]('set',k.join(''),l);return r;},lookAhead:function(h){h=h||1;var p=this.getPosition();var j=[];for(var i=0;i<h;++i){var k=this.getNextToken();j.push(k);}this.setPosition(p);if(h===1){return j[0];}return j;},getPosition:function(){return{internalPosition:this.tokenizer.getPosition(),matchCounter:this.matchCounter};},setPosition:function(p){this.tokenizer.setPosition(p.internalPosition);this.matchCounter=p.matchCounter;}};
m.TwitterDocument=function(){this.init.apply(this,arguments);};
m.TwitterDocument.prototype={init:function(h){h=c(h);this.nodes=[];this.parse(h);},parse:function(h){var j=new m.MatchTokenizer(h);for(;;){var k=j.lookAhead(2);var l=k[0];var n=k[1];if(!l){break;}var o=null;switch(l.type){case'Whitespace':o=new m.TwitterTextNode();break;case'User':if(n&&n.type==='Text'){o=new m.TwitterUserNode();}else{o=new m.TwitterTextNode();}break;case'Hash':o=new m.TwitterHashNode();if(n&&n.type==='Text'){o=new m.TwitterHashNode();}else{o=new m.TwitterTextNode();}break;case'Text':o=new m.TwitterTextNode();if(l.toString().slice(0,4)==='http'){o=new m.TwitterLinkNode();}else{o=new m.TwitterTextNode();}break;case'SpecialCharactersText':o=new m.TwitterTextNode();break;}if(!o){throw'parse error '+l.toString();}o.parse(j);this.nodes.push(o);}},render:function(r){for(var i=0;i<this.nodes.length;++i){var n=this.nodes[i];n.render(r);}},log:function(){for(var i=0;i<this.nodes.length;++i){var n=this.nodes[i];n.log();}}};
m.TwitterTextNode=function(){};
m.TwitterTextNode.prototype={type:'TextNode',parse:function(h){var j=h.getNextToken();this.text=j.toString();this.textHighlighted=j.toHighlightedString();},render:function(r){r.write('<span style="display:inline" class="sapMText">');r.write(this.textHighlighted);r.write('</span>');},log:function(){}};
m.TwitterUserNode=function(){};
m.TwitterUserNode.prototype={type:'UserNode',parse:function(h){var j=h.getNextToken();this.at=j.toString();this.atHighlighted=j.toHighlightedString();var u=h.getNextToken();this.user=u.toString();this.userHighlighted=u.toHighlightedString();},render:function(r){r.write('<a target="_blank" style="display:inline" class="sapMLnk" href="https://twitter.com/'+this.user+'">');r.write(this.atHighlighted+this.userHighlighted);r.write('</a>');},log:function(){}};
m.TwitterHashNode=function(){};
m.TwitterHashNode.prototype={type:'HashNode',parse:function(h){var j=h.getNextToken();this.hash=j.toString();this.hashHighlighted=j.toHighlightedString();var k=h.getNextToken();this.tag=k.toString();this.tagHighlighted=k.toHighlightedString();},render:function(r){r.write('<a target="_blank" style="display:inline" class="sapMLnk" href="https://twitter.com/hashtag/'+this.tag+'?src=hash">');r.write(this.hashHighlighted+this.tagHighlighted);r.write('</a>');},log:function(){}};
m.TwitterLinkNode=function(){};
m.TwitterLinkNode.prototype={type:'LinkNode',parse:function(h){var p=[];var j=[];for(;;){var k=h.lookAhead();if(k&&(k.type==='Text'||k.type==='SpecialCharactersText')){h.getNextToken();p.push(k.toString());j.push(k.toHighlightedString());continue;}break;}this.url=p.join('');this.userHighlighted=j.join('');},render:function(r){},log:function(){}};
m.renderTweet=function(r,h){var j=new m.TwitterDocument(h);j.render(r);};
m.test1=function(){var h=new this.Tokenizer('this <b>i</b>s a #test');for(var i=0;i<20;++i){var j=h.getNextToken();if(!j){break;}}};
m.test2=function(){var h=new this.MatchTokenizer('this <b>i</b>s a #test');for(var i=0;i<20;++i){var j=h.getNextToken();if(!j){break;}}};
m.test=function(){var h=new m.TwitterDocument('this <b>@test1test2test3</b> is a h<b>tt</b>p://sap.com');h.log();};
return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/eventlogging/EventConsumer',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.eventlogging.EventConsumer');var m=sap.ushell.renderers.fiori2.search.eventlogging.EventConsumer=function(){this.init.apply(this,arguments);};m.prototype={init:function(){},logEvent:function(e){}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/eventlogging/EventLogger',['sap/ushell/renderers/fiori2/search/eventlogging/SinaLogConsumer','sap/ushell/renderers/fiori2/search/eventlogging/UsageAnalyticsConsumer','sap/ushell/renderers/fiori2/search/SearchHelper'],function(S,U,a){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.eventlogging.EventLogger');var m=sap.ushell.renderers.fiori2.search.eventlogging.EventLogger=function(){this.init.apply(this,arguments);};
m.newInstance=function(p){var l=new m();l.addConsumer(new S(p.sinaNext));l.addConsumer(new U());return l;};
m.prototype={ITEM_NAVIGATE:'ITEM_NAVIGATE',SUGGESTION_SELECT:'SUGGESTION_SELECT',SEARCH_REQUEST:'SEARCH_REQUEST',RESULT_LIST_ITEM_NAVIGATE_CONTEXT:'RESULT_LIST_ITEM_NAVIGATE_CONTEXT',SUGGESTION_REQUEST:'SUGGESTION_REQUEST',TILE_NAVIGATE:'TILE_NAVIGATE',SHOW_MORE:'SHOW_MORE',BROWSER_CLOSE:'BROWSER_CLOSE',LEAVE_PAGE:'LEAVE_PAGE',SESSION_START:'SESSION_START',RESULT_LIST_ITEM_NAVIGATE:'RESULT_LIST_ITEM_NAVIGATE',OBJECT_SUGGESTION_NAVIGATE:'OBJECT_SUGGESTION_NAVIGATE',DROPDOWN_SELECT_DS:'DROPDOWN_SELECT_DS',DATASOURCE_CHANGE:'DATASOURCE_CHANGE',FACET_FILTER_ADD:'FACET_FILTER_ADD',FACET_FILTER_DEL:'FACET_FILTER_DEL',ITEM_SHOW_DETAILS:'ITEM_SHOW_DETAILS',ITEM_HIDE_DETAILS:'ITEM_HIDE_DETAILS',CLEAR_ALL_FILTERS:'CLEAR_ALL_FILTERS',FACET_SHOW_MORE:'FACET_SHOW_MORE',FACET_SHOW_MORE_CLOSE:'FACET_SHOW_MORE_CLOSE',eventMetadata:{SESSION_START:{},ITEM_NAVIGATE:{systemAndClient:'string',sourceUrlArray:'string',targetUrl:'string'},RESULT_LIST_ITEM_NAVIGATE:{targetUrl:'string',positionInList:'integer',executionId:'string'},SUGGESTION_SELECT:{suggestionType:'string',suggestionTitle:'string',suggestionTerm:'string',searchTerm:'string',targetUrl:'string',dataSourceKey:'string'},SEARCH_REQUEST:{searchTerm:'string',dataSourceKey:'string'},RESULT_LIST_ITEM_NAVIGATE_CONTEXT:{systemAndClient:'string',sourceUrlArray:'string',targetUrl:'string'},SUGGESTION_REQUEST:{suggestionTerm:'string',dataSourceKey:'string'},TILE_NAVIGATE:{tileTitle:'string',targetUrl:'string'},SHOW_MORE:{},LEAVE_PAGE:{},BROWSER_CLOSE:{},DROPDOWN_SELECT_DS:{dataSourceId:'string'},DATASOURCE_CHANGE:{dataSourceId:'string'},FACET_FILTER_ADD:{referencedAttribute:'string',clickedValue:'string',clickedPosition:'integer'},FACET_FILTER_DEL:{referencedAttribute:'string',clickedValue:'string',clickedPosition:'integer'},FACET_SHOW_MORE:{referencedAttribute:'string'},FACET_SHOW_MORE_CLOSE:{}},init:function(){this.consumers=[];},addConsumer:function(c){this.consumers.push(c);c.eventLogger=this;},logEvent:function(b){if(!a.isLoggingEnabled()){return;}for(var i=0;i<this.consumers.length;++i){var c=this.consumers[i];try{c.logEvent(b);}catch(e){}}}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/eventlogging/SinaLogConsumer',['sap/ushell/renderers/fiori2/search/eventlogging/EventConsumer'],function(E){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.eventlogging.SinaLogConsumer');var m=sap.ushell.renderers.fiori2.search.eventlogging.SinaLogConsumer=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new E(),{init:function(s){this.sinaNext=s;},logEvent:function(e){this.sinaNext.logUserEvent(e);}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/eventlogging/UsageAnalyticsConsumer',['sap/ushell/renderers/fiori2/search/eventlogging/EventConsumer','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType'],function(E,S){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.eventlogging.UsageAnalyticsConsumer');var m=sap.ushell.renderers.fiori2.search.eventlogging.UsageAnalyticsConsumer=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new E(),{init:function(){try{this.analytics=sap.ushell.Container.getService("UsageAnalytics");}catch(e){}},logEvent:function(e){if(!this.analytics){return;}switch(e.type){case this.eventLogger.RESULT_LIST_ITEM_NAVIGATE:this.analytics.logCustomEvent('FLP: Search','Launch Object',[e.targetUrl]);break;case this.eventLogger.SUGGESTION_SELECT:switch(e.suggestionType){case S.APPS:this.analytics.logCustomEvent('FLP: Search','Suggestion Select App',[e.suggestionTitle,e.targetUrl,e.searchTerm]);this.analytics.logCustomEvent('FLP: Application Launch point','Search Suggestions',[e.suggestionTitle,e.targetUrl,e.searchTerm]);break;case S.DATASOURCE:this.analytics.logCustomEvent('FLP: Search','Suggestion Select Datasource',[e.dataSourceKey,e.searchTerm]);break;case S.OBJECTDATA:this.analytics.logCustomEvent('FLP: Search','Suggestion Select Object Data',[e.suggestionTerm,e.dataSourceKey,e.searchTerm]);break;case S.HISTORY:this.analytics.logCustomEvent('FLP: Search','Suggestion Select Object Data',[e.suggestionTerm,e.dataSourceKey,e.searchTerm]);break;}break;case this.eventLogger.SEARCH_REQUEST:this.analytics.logCustomEvent('FLP: Search','Search',[e.searchTerm,e.dataSourceKey]);break;case this.eventLogger.RESULT_LIST_ITEM_NAVIGATE_CONTEXT:this.analytics.logCustomEvent('FLP: Search','Launch Related Object',[e.targetUrl]);break;case this.eventLogger.SUGGESTION_REQUEST:this.analytics.logCustomEvent('FLP: Search','Suggestion',[e.suggestionTerm,e.dataSourceKey]);break;case this.eventLogger.TILE_NAVIGATE:this.analytics.logCustomEvent('FLP: Search','Launch App',[e.tileTitle,e.targetUrl]);this.analytics.logCustomEvent('FLP: Application Launch point','Search Results',[e.titleTitle,e.targetUrl]);break;}}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/personalization/BrowserPersonalizationStorage',['sap/ushell/renderers/fiori2/search/personalization/Personalizer'],function(P){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.personalization.BrowserPersonalizationStorage');var m=sap.ushell.renderers.fiori2.search.personalization.BrowserPersonalizationStorage=function(){this.init.apply(this,arguments);};var B=m;m.prototype={init:function(){},getItem:function(k){if(!this._isStorageSupported()){throw'not supported storage';}return this._getStorage(k);},setItem:function(k,d){if(!this._isStorageSupported()){throw'not supported storage';}this._putStorage(k,d);},getPersonalizer:function(k){return new P(k,this);},_isStorageSupported:function(){if(jQuery.sap.storage&&jQuery.sap.storage.isSupported()){return true;}return false;},_getStorage:function(k){return jQuery.sap.storage.get("Search.Personalization."+k);},_putStorage:function(k,s){if(typeof jQuery.sap.storage.setType==='function'){jQuery.sap.storage.setType(jQuery.sap.storage.Type.local);}jQuery.sap.storage.put("Search.Personalization."+k,s);}};
m.getInstance=function(){return new jQuery.Deferred().resolve(new B());};
return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/personalization/FLPPersonalizationStorage',['sap/ushell/renderers/fiori2/search/personalization/Personalizer','sap/ushell/renderers/fiori2/search/SearchHelper'],function(P,S){"use strict";var m=sap.ushell.renderers.fiori2.search.personalization.FLPPersonalizationStorage=function(){this.init.apply(this,arguments);};var F=m;m.prototype={init:function(c){this.container=c;this.save=S.delayedExecution(this.save,2000);},save:function(){this.container.save();},getItem:function(k){k=this.limitLength(k);if(!this._isStorageSupported()){throw'not supported storage';}return this.container.getItemValue(k);},setItem:function(k,d){k=this.limitLength(k);if(!this._isStorageSupported()){throw'not supported storage';}this.container.setItemValue(k,d);this.save();},limitLength:function(k){return k.slice(-40);},getPersonalizer:function(k){return new P(k,this);},_isStorageSupported:function(){if(jQuery.sap.storage&&jQuery.sap.storage.isSupported()){return true;}return false;}};
m.getInstance=function(){var p=sap.ushell.Container.getService("Personalization");return p.getContainer("ushellSearchPersoServiceContainer").then(function(c){return new F(c);});};
return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/personalization/MemoryPersonalizationStorage',['sap/ushell/renderers/fiori2/search/personalization/Personalizer'],function(P){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.personalization.MemoryPersonalizationStorage');var m=sap.ushell.renderers.fiori2.search.personalization.MemoryPersonalizationStorage=function(){this.init.apply(this,arguments);};var M=m;m.prototype={init:function(){this.dataMap={};},getItem:function(k){if(!this._isStorageSupported()){throw'not supported storage';}return this._getStorage(k);},setItem:function(k,d){if(!this._isStorageSupported()){throw'not supported storage';}this._putStorage(k,d);},getPersonalizer:function(k){return new P(k,this);},_isStorageSupported:function(){return true;},_getStorage:function(k){return this.dataMap[k];},_putStorage:function(k,s){this.dataMap[k]=s;}};
m.getInstance=function(){return new jQuery.Deferred().resolve(new M());};
return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/personalization/PersonalizationStorage',['sap/ushell/renderers/fiori2/search/personalization/FLPPersonalizationStorage','sap/ushell/renderers/fiori2/search/personalization/BrowserPersonalizationStorage','sap/ushell/renderers/fiori2/search/personalization/MemoryPersonalizationStorage','sap/ushell/renderers/fiori2/search/SearchConfiguration'],function(F,B,M,S){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.personalization.PersonalizationStorage');var c=S.getInstance();sap.ushell.renderers.fiori2.search.personalization.PersonalizationStorage={instance:null,isLaunchpad:function(){try{return!!sap.ushell.Container.getService("Personalization");}catch(e){return false;}},getInstance:function(){var t=this;if(this.instancePromise){return this.instancePromise;}switch(c.personalizationStorage){case'auto':if(this.isLaunchpad()){this.instancePromise=F.getInstance();}else{this.instancePromise=B.getInstance();}break;case'browser':this.instancePromise=B.getInstance();break;case'flp':this.instancePromise=F.getInstance();break;case'memory':this.instancePromise=M.getInstance();break;default:}this.instancePromise.then(function(i){t.instance=i;});return this.instancePromise;},getInstanceSync:function(){if(!this.instance){throw'No instance, call async method getInstance for getting the instance';}return this.instance;},isInitialized:function(){return!!this.instance;}};return sap.ushell.renderers.fiori2.search.personalization.PersonalizationStorage;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/personalization/Personalizer',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.personalization.Personalizer');var P=sap.ushell.renderers.fiori2.search.personalization.Personalizer=function(){this.init.apply(this,arguments);};P.prototype={init:function(k,p){this.key=k;this.personalizationStorageInstance=p;},getKey:function(){return this.key;},setPersData:function(d){return(new jQuery.Deferred()).resolve(this.personalizationStorageInstance.setItem(this.key,d));},getPersData:function(){return(new jQuery.Deferred()).resolve(this.personalizationStorageInstance.getItem(this.key));}};return P;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/AppSuggestionProvider',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/suggestions/SuggestionProvider','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType'],function(S,a,b){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.AppSuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.AppSuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new a(),{init:function(p){a.prototype.init.apply(this,arguments);this.suggestApplications=S.refuseOutdatedRequests(this.suggestApplications);},abortSuggestions:function(){this.suggestApplications.abort();},combineSuggestionsWithIdenticalTitle:function(s){var c;var d={};for(var i=0;i<s.length;i++){c=s[i];var f=d[c.title+c.subtitle];if(f){if(!f.combinedSuggestionExists){var e={title:'combinedAppSuggestion'+i,subtitle:c.subtitle,sortIndex:f.sortIndex,url:this.model.searchUrlParser.renderFromParameters(this.model.appTopDefault,this.model.sinaNext.createFilter({dataSource:this.model.appDataSource,searchTerm:c.title}),false),label:sap.ushell.resources.i18n.getText("suggestion_in_apps",c.label),icon:""};var g=sap.ushell.resources.i18n.getText("suggestion_in_apps",[""]);e.label=e.label.replace(g,"<i>"+g+"</i>");d[e.title+e.subtitle]=e;f.combinedSuggestionExists=true;}}else{c.sortIndex=i;d[c.title+c.subtitle]=c;}}s=[];for(var h in d){if(d.hasOwnProperty(h)){c=d[h];if(!c.combinedSuggestionExists){s.push(c);}}}s.sort(function(j,k){return j.sortIndex-k.sortIndex;});return s;},addAsterisk4ShowAllApps:function(s){var n=s;s=s.match(/\S+/g);if(s.length>0){var c;var d=[];for(var i=0;i<s.length;i++){c=s[i];if(c&&c.lastIndexOf('*')!==c.length-1){d.push(c+'*');}else{d.push(c);}}n=d.join(' ');}return n;},createShowMoreSuggestion:function(t){var c=sap.ushell.resources.i18n.getText("showAllNApps",t);c=c.replace(/"/g,"");var d=c;var l="<i>"+c+"</i>";return{title:c,tooltip:d,label:l,dataSource:this.model.appDataSource,labelRaw:this.model.getProperty("/uiFilter/searchTerm"),uiSuggestionType:b.SearchTermData,searchTerm:this.model.getProperty("/uiFilter/searchTerm")||''};},getSuggestions:function(){var t=this;var d=t.model.getDataSource();if(d!==t.model.allDataSource&&d!==t.model.appDataSource){return jQuery.when([]);}var s=t.model.getProperty('/uiFilter/searchTerm');return t.suggestApplications(s).then(function(r){var c=r.getElements();c=t.combineSuggestionsWithIdenticalTitle(c);jQuery.each(c,function(i,f){f.uiSuggestionType=b.App;f.dataSource=t.model.appDataSource;f.position=b.properties.App.position;f.key=b.App+f.url+f.icon;});var e=t.suggestionHandler.getSuggestionLimit(b.App);c=c.slice(0,e);if(r.totalResults>e&&d===t.model.appDataSource){c.push(t.createShowMoreSuggestion(r.totalResults));}return c;});},suggestApplications:function(s){return sap.ushell.Container.getService("Search").queryApplications({searchTerm:s,suggestion:true});}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SinaBaseSuggestionProvider',['sap/ushell/renderers/fiori2/search/suggestions/SuggestionProvider','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType'],function(S,a){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SinaBaseSuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.SinaBaseSuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new S(),{init:function(){S.prototype.init.apply(this,arguments);},prepareSuggestionQuery:function(f){var t=this;t.suggestionQuery.resetResultSet();t.suggestionQuery.setFilter(f);var s=t.assembleSinaSuggestionTypesAndCalcModes();t.suggestionQuery.setTypes(s.types);t.suggestionQuery.setCalculationModes(s.calculationModes);t.suggestionQuery.setTop(20);},assembleSinaSuggestionTypesAndCalcModes:function(){var b=function(l,e){if(l.indexOf(e)>=0){return;}l.push(e);};var r={types:[],calculationModes:[]};for(var i=0;i<this.suggestionTypes.length;++i){var s=this.suggestionTypes[i];switch(s){case a.SearchTermHistory:b(r.types,this.sinaNext.SuggestionType.SearchTerm);b(r.calculationModes,this.sinaNext.SuggestionCalculationMode.History);break;case a.SearchTermData:b(r.types,this.sinaNext.SuggestionType.SearchTerm);b(r.calculationModes,this.sinaNext.SuggestionCalculationMode.Data);break;case a.DataSource:b(r.types,this.sinaNext.SuggestionType.DataSource);b(r.calculationModes,this.sinaNext.SuggestionCalculationMode.Data);break;case a.Object:b(r.types,this.sinaNext.SuggestionType.Object);b(r.calculationModes,this.sinaNext.SuggestionCalculationMode.Data);break;}}return r;}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SinaObjectSuggestionFormatter',['sap/ushell/renderers/fiori2/search/SearchNavigationObjectForSinaNavTarget'],function(S){"use strict";var F=function(){this.init.apply(this,arguments);};F.prototype={init:function(){},assembleLabel1:function(s){var t=[];var a=false;var b;var c=s.object.titleAttributes;for(var i=0;i<c.length;++i){b=c[i];t.push(b.valueHighlighted);if(b.isHighlighted){a=true;}}return{label:t.join(' '),isHighlighted:a};},assembleLabel2:function(l,s){var d=s.object.detailAttributes;var a;if(d.length===0){return'';}if(!l){a=this.getFirstHighlightedAttribute(d);if(a){return a.valueHighlighted;}}a=this.getFirstStringAttribute(d);if(a){return a.label+': '+a.valueHighlighted;}return'';},getFirstHighlightedAttribute:function(a){for(var i=0;i<a.length;++i){var b=a[i];if(b.isHighlighted){return b;}}},getFirstStringAttribute:function(a){var s={"Date":40,"Double":70,"GeoJson":130,"ImageBlob":120,"ImageUrl":110,"Integer":60,"String":10,"Time":50,"Timestamp":30};if(a.length===0){return null;}a=a.slice();a.sort(function(c,d){return s[c.metadata.type]-s[d.metadata.type];});var b=a[0];if(s[b.metadata.type]>100){return null;}return b;},assembleNavigation:function(s){if(!s.object.defaultNavigationTarget){return null;}var n=new S(s.object.defaultNavigationTarget);n.setLoggingType('OBJECT_SUGGESTION_NAVIGATE');return n;},assembleImageUrl:function(s){var d=s.object.detailAttributes;for(var i=0;i<d.length;++i){var a=d[i];if(a.metadata.type===a.sina.AttributeType.ImageUrl){return{imageUrl:a.value,imageExists:true,imageIsCircular:a.metadata.format&&a.metadata.format===s.sina.AttributeFormatType.Round};}}return{exists:false};},format:function(s,a){var b={key:a.key,uiSuggestionType:a.uiSuggestionType,dataSource:a.object.dataSource};var l=this.assembleLabel1(a);b.label1=l.label;b.label2=this.assembleLabel2(l.isHighlighted,a);b.titleNavigation=this.assembleNavigation(a);var i=this.assembleImageUrl(a);a.sina.core.extend(b,i);b.position=a.position;s.addSuggestion(b);}};return F;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SinaSuggestionProvider',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/suggestions/SinaBaseSuggestionProvider','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType','sap/ushell/renderers/fiori2/search/suggestions/SinaObjectSuggestionFormatter','sap/ushell/renderers/fiori2/search/SearchConfiguration'],function(S,a,b,c,d){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SinaSuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.SinaSuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype=jQuery.extend(new a(),{suggestionLimit:jQuery.device.is.phone?5:7,suggestionStartingCharacters:d.getInstance().suggestionStartingCharacters,init:function(p){a.prototype.init.apply(this,arguments);this.dataSourceDeferred=null;this.suggestionQuery=this.sinaNext.createSuggestionQuery();this.sinaObjectSuggestionFormatter=new c(this);},abortSuggestions:function(){this.suggestionQuery.abort();},getSuggestions:function(f){var t=this;this.suggestions=[];this.firstObjectDataSuggestion=true;this.numberSuggestionsByType={};for(var i=0;i<b.types.length;++i){var s=b.types[i];this.numberSuggestionsByType[s]=0;}var e=f.searchTerm;if(this.suggestionTypes.length===1&&this.suggestionTypes.indexOf(b.SearchTermData)>=0&&e.length<this.suggestionStartingCharacters){return jQuery.when(this.suggestions);}if(this.suggestionTypes.length===1&&this.suggestionTypes.indexOf(b.Object)>=0&&e.length<this.suggestionStartingCharacters){return jQuery.when(this.suggestions);}if(this.suggestionTypes.length===1&&this.suggestionTypes.indexOf(b.DataSource)>=0&&t.model.getDataSource()!==t.model.sinaNext.allDataSource){return jQuery.when(this.suggestions);}t.createAllAndAppDsSuggestions();if(!t.model.config.searchBusinessObjects){return jQuery.when(this.suggestions);}if(t.model.getDataSource()===t.model.appDataSource){return jQuery.when(this.suggestions);}t.prepareSuggestionQuery(f);return t.suggestionQuery.getResultSetAsync().then(function(r){var g=r.items;t.formatSinaSuggestions(g);return t.suggestions;});},createAllAndAppDsSuggestions:function(){if(this.suggestionTypes.indexOf(b.DataSource)<0){return;}if(this.model.getDataSource()!==this.model.allDataSource){return;}var e=[];e.unshift(this.model.appDataSource);e.unshift(this.model.allDataSource);var s=this.model.getProperty('/uiFilter/searchTerm');var f=s.replace(/\*/g,'');var t=new S.Tester(f);for(var i=0;i<e.length;++i){var g=e[i];if(g.id===this.model.getDataSource().id){continue;}var T=t.test(g.label);if(T.bMatch===true){if(this.isSuggestionLimitReached(b.DataSource)){return;}var h={};h.label='<i>'+sap.ushell.resources.i18n.getText("searchInPlaceholder",[""])+'</i> '+T.sHighlightedText;h.dataSource=g;h.position=b.properties.DataSource.position;h.type=this.sinaNext.SuggestionType.DataSource;h.calculationMode=this.sinaNext.SuggestionCalculationMode.Data;h.uiSuggestionType=b.DataSource;h.uiSuggestionType=b.DataSource;this.addSuggestion(h);}}},isSuggestionLimitReached:function(s){var l=this.suggestionHandler.getSuggestionLimit(s);var n=this.numberSuggestionsByType[s];if(n>=l){return true;}return false;},preFormatSuggestions:function(s){for(var i=0;i<s.length;++i){var e=s[i];e.uiSuggestionType=this.getSuggestionType(e);e.position=b.properties[e.uiSuggestionType].position;this.assembleKey(e);if(e.childSuggestions){this.preFormatSuggestions(e.childSuggestions);}}},assembleKey:function(s){switch(s.uiSuggestionType){case b.DataSource:s.key=b.DataSource+s.dataSource.id;break;case b.SearchTermData:s.key=b.SearchTermData+s.searchTerm;if(s.dataSource){s.key+=s.dataSource.id;}break;case b.SearchTermHistory:s.key=b.SearchTermData+s.searchTerm;if(s.dataSource){s.key+=s.dataSource.id;}break;case b.Object:s.key=b.Object+s.object.title;break;}},formatSinaSuggestions:function(s){this.preFormatSuggestions(s);for(var i=0;i<s.length;++i){var e=s[i];if(this.isSuggestionLimitReached(e.uiSuggestionType)){continue;}switch(e.uiSuggestionType){case b.DataSource:if(this.model.getDataSource()!==this.model.allDataSource){continue;}this.addSuggestion(e);break;case b.SearchTermData:this.formatSearchTermDataSuggestion(e);break;case b.SearchTermHistory:this.addSuggestion(e);break;case b.Object:this.sinaObjectSuggestionFormatter.format(this,e);break;default:break;}}return this.suggestions;},addSuggestion:function(s){this.suggestions.push(s);this.numberSuggestionsByType[s.uiSuggestionType]+=1;},formatSearchTermDataSuggestion:function(s){if(this.model.getDataSource()===this.model.allDataSource){if(this.firstObjectDataSuggestion){this.firstObjectDataSuggestion=false;if(s.childSuggestions.length>0){s.label=this.assembleSearchInSuggestionLabel(s);s.grouped=true;this.addSuggestion(s);this.addChildSuggestions(s);}else{this.addSuggestion(s);}}else{this.addSuggestion(s);}}else{this.addSuggestion(s);}},addChildSuggestions:function(s){for(var i=0;i<Math.min(2,s.childSuggestions.length);++i){if(this.isSuggestionLimitReached(b.SearchTermData)){return;}var e=s.childSuggestions[i];e.label=this.assembleSearchInSuggestionLabel(e);e.grouped=true;this.addSuggestion(e);}},assembleSearchInSuggestionLabel:function(s){return sap.ushell.resources.i18n.getText("resultsIn",['<span>'+s.label+'</span>',s.filter.dataSource.labelPlural]);},getSuggestionType:function(s){switch(s.type){case this.sinaNext.SuggestionType.SearchTerm:if(s.calculationMode===this.sinaNext.SuggestionCalculationMode.History){return b.SearchTermHistory;}return b.SearchTermData;case this.sinaNext.SuggestionType.SearchTermAndDataSource:if(s.calculationMode===this.sinaNext.SuggestionCalculationMode.History){return b.SearchTermHistory;}return b.SearchTermData;case this.sinaNext.SuggestionType.DataSource:return b.DataSource;case this.sinaNext.SuggestionType.Object:return b.Object;}}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SuggestionHandler',['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/suggestions/SinaSuggestionProvider','sap/ushell/renderers/fiori2/search/suggestions/AppSuggestionProvider','sap/ushell/renderers/fiori2/search/suggestions/TimeMerger','sap/ushell/renderers/fiori2/search/suggestions/SuggestionType'],function(S,a,A,T,b){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SuggestionHandler');var s=sap.ushell.renderers.fiori2.search.suggestions;
s.SuggestionHandler=function(){this.init.apply(this,arguments);};
s.SuggestionHandler.prototype={init:function(p){var t=this;t.model=p.model;t.suggestionProviders=[];t.keyboardRelaxationTime=t.model.config.suggestionKeyboardRelaxationTime;t.uiUpdateInterval=500;t.uiClearOldSuggestionsTimeOut=1000;t.appSuggestionProvider=new A({model:t.model,suggestionHandler:this});t.doSuggestionInternal=S.delayedExecution(t.doSuggestionInternal,t.keyboardRelaxationTime);t.timeMerger=new T();},abortSuggestions:function(c){if(c===undefined||c===true){this.model.setProperty("/suggestions",[]);}if(this.clearSuggestionTimer){clearTimeout(this.clearSuggestionTimer);this.clearSuggestionTimer=null;}this.doSuggestionInternal.abort();this.getSuggestionProviders().done(function(d){for(var i=0;i<d.length;++i){var e=d[i];e.abortSuggestions();}});this.timeMerger.abort();},getSuggestionProviders:function(){var t=this;if(t.suggestionProvidersDeferred){return t.suggestionProvidersDeferred;}t.suggestionProvidersDeferred=t.model.initBusinessObjSearch().then(function(){t.sinaNext=t.model.sinaNext;var c=[t.appSuggestionProvider];if(!t.model.config.searchBusinessObjects){return jQuery.when(c);}c.push.apply(c,t.createSinaSuggestionProviders());return jQuery.when(c);});return t.suggestionProvidersDeferred;},createSinaSuggestionProviders:function(){var p=[{suggestionTypes:[b.SearchTermHistory]},{suggestionTypes:[b.SearchTermData]},{suggestionTypes:[b.DataSource]}];if(this.model.config.boSuggestions){p.push({suggestionTypes:[b.Object]});}var c=[];for(var k=0;k<p.length;++k){var d=p[k];c.push(new a({model:this.model,sinaNext:this.sinaNext,suggestionTypes:d.suggestionTypes,suggestionHandler:this}));}return c;},isSuggestionPopupVisible:function(){return jQuery('.searchSuggestion').filter(':visible').length>0;},doSuggestion:function(f){this.abortSuggestions(false);this.doSuggestionInternal(f);},autoSelectAppSuggestion:function(f){return this.appSuggestionProvider.getSuggestions(f).then(function(s){return s[0];});},doSuggestionInternal:function(f){var t=this;t.firstInsertion=true;t.busyIndicator=false;var c=t.model.getProperty("/uiFilter/searchTerm");if(c.length===0){t.insertSuggestions([],0);return;}if(c.trim()==='*'){t.insertSuggestions([],0);return;}t.model.eventLogger.logEvent({type:t.model.eventLogger.SUGGESTION_REQUEST,suggestionTerm:t.model.getProperty('/uiFilter/searchTerm'),dataSourceKey:t.model.getProperty('/uiFilter/dataSource').id});t.getSuggestionProviders().done(function(d){var p=[];var e=d.length;for(var i=0;i<d.length;++i){var g=d[i];p.push(g.getSuggestions(f));}if(t.isSuggestionPopupVisible()){if(t.clearSuggestionTimer){clearTimeout(t.clearSuggestionTimer);}t.clearSuggestionTimer=setTimeout(function(){t.clearSuggestionTimer=null;t.insertSuggestions([],e);},t.uiClearOldSuggestionsTimeOut);}else{t.insertSuggestions([],e);}t.timeMerger.abort();t.timeMerger=new T(p,t.uiUpdateInterval);t.timeMerger.process(function(r){e-=r.length;var s=[];for(var j=0;j<r.length;++j){var h=r[j];s.push.apply(s,h);}if(e>0&&s.length===0){return;}if(t.clearSuggestionTimer){clearTimeout(t.clearSuggestionTimer);t.clearSuggestionTimer=null;}t.insertSuggestions(s,e);});});},generateSuggestionHeader:function(i){var h={};switch(i.uiSuggestionType){case b.App:h.label=sap.ushell.resources.i18n.getText('label_apps');break;case b.DataSource:h.label=sap.ushell.resources.i18n.getText('searchIn');break;case b.SearchTermData:case b.SearchTermHistory:h.label=sap.ushell.resources.i18n.getText('searchFor');break;case b.Object:h.label=i.dataSource.labelPlural;h.dataSource=i.dataSource;break;}h.position=b.properties[i.uiSuggestionType].position;h.suggestionResultSetCounter=this.suggestionResultSetCounter;h.uiSuggestionType=b.Header;return h;},enableBusyIndicator:function(s,e){if(e){s.push({position:b.properties[b.BusyIndicator].position,uiSuggestionType:b.BusyIndicator});return;}for(var i=0;i<s.length;++i){var c=s[i];if(c.uiSuggestionType===b.BusyIndicator){s.splice(i,1);return;}}},checkDuplicate:function(s,c){var d=function(e){return c.uiSuggestionType===b.SearchTermHistory||(c.uiSuggestionType===b.SearchTermData&&!c.dataSource);};if(!d(c)){return{action:'append'};}for(var i=0;i<s.length;++i){var e=s[i];if(!d(e)){continue;}if(c.searchTerm===e.searchTerm){if(c.grouped&&c.uiSuggestionType===b.SearchTermData&&e.uiSuggestionType===b.SearchTermHistory){return{action:'replace',index:i};}return{action:'skip'};}}return{action:'append'};},insertSuggestions:function(i,p){var s=this.model.getProperty('/suggestions').slice();s=this.insertIntoSuggestionList(i,s);if(!this.busyIndicator&&p>0){this.enableBusyIndicator(s,true);this.busyIndicator=true;}if(this.busyIndicator&&p===0){this.enableBusyIndicator(s,false);this.busyIndicator=false;}this.sortSuggestions(s);this.limitSuggestions(s);this.updateSuggestions(s);},insertIntoSuggestionList:function(c,s){var f=false;if(this.firstInsertion){this.firstInsertion=false;f=true;}if(f){s=[];this.suggestionHeaders={};this.suggestionResultSetCounter=0;this.generatedPositions={maxPosition:b.properties[b.Object].position,position:{}};}this.suggestionResultSetCounter+=1;for(var i=0;i<c.length;++i){var d=c[i];if(d.uiSuggestionType===b.Object){var p=this.generatedPositions.position[d.dataSource.id];if(!p){this.generatedPositions.maxPosition+=1;p=this.generatedPositions.maxPosition;this.generatedPositions.position[d.dataSource.id]=p;}d.position=p;}d.suggestionResultSetCounter=this.suggestionResultSetCounter;d.resultSetPosition=i;var e=this.checkDuplicate(s,d);switch(e.action){case'append':s.push(d);break;case'skip':continue;case'replace':s.splice(e.index,1,d);break;}if(this.isHeaderGenerationEnabled()&&!this.suggestionHeaders[d.position]){s.push(this.generateSuggestionHeader(d));this.suggestionHeaders[d.position]=true;}}return s;},isHeaderGenerationEnabled:function(){if(this.model.getDataSource()===this.model.appDataSource){return false;}if(!this.model.config.boSuggestions&&this.model.getDataSource().type===this.sinaNext.DataSourceType.BusinessObject){return false;}return true;},sortSuggestions:function(s){s.sort(function(c,d){var e=c.position-d.position;if(e!==0){return e;}if(c.uiSuggestionType===b.Header){return-1;}if(d.uiSuggestionType===b.Header){return 1;}if(c.grouped&&!d.grouped){return-1;}if(!c.grouped&&d.grouped){return 1;}e=c.suggestionResultSetCounter-d.suggestionResultSetCounter;if(e!==0){return e;}e=c.resultSetPosition-d.resultSetPosition;return e;});},getSuggestionLimit:function(u){var c=b.properties[u];if(typeof c==='undefined'){return Infinity;}var l;if(this.model.getDataSource()===this.model.sinaNext.allDataSource){l=c.limitDsAll;}else{l=c.limit;}return l;},limitSuggestions:function(s){var n={};for(var i=0;i<s.length;++i){var c=s[i];var d=c.uiSuggestionType;if(d===b.SearchTermHistory){d=b.SearchTermData;}var l=this.getSuggestionLimit(d);var e=n[d];if(typeof e==='undefined'){e=0;n[d]=e;}if(e>=l){s.splice(i,1);--i;continue;}n[d]=e+1;}},updateSuggestions:function(s){var c=sap.ui.getCore().byId('searchFieldInShell-input');var d=c.getSuggestionRows();var e;for(var i=0;i<d.length;++i){var f=d[i];var g=f.getBindingContext().getObject();if(f.getSelected()){e=g.key;}}this.model.setProperty('/suggestions',s);if(!e){return;}window.setTimeout(function(){var d=c.getSuggestionRows();for(var j=0;j<d.length;++j){var f=d[j];var g=f.getBindingContext().getObject();if(g.key===e){c._oSuggPopover._iPopupListSelectedIndex=j;f.setSelected(true);f.rerender();}}},100);}};return s.SuggestionHandler;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SuggestionProvider',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SuggestionProvider');var m=sap.ushell.renderers.fiori2.search.suggestions.SuggestionProvider=function(){this.init.apply(this,arguments);};m.prototype={init:function(p){jQuery.extend(this,p);},abortSuggestions:function(){},getSuggestions:function(){}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/SuggestionType',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypeProps');var m=sap.ushell.renderers.fiori2.search.suggestions.SuggestionTypeProps={};m.App='App';m.DataSource='DataSource';m.SearchTermHistory='SearchTermHistory';m.SearchTermData='SearchTermData';m.Object='Object';m.Header='Header';m.BusyIndicator='BusyIndicator';m.types=[m.App,m.DataSource,m.SearchTermHistory,m.SearchTermData,m.Object];m.properties={App:{position:100,limitDsAll:3,limit:7},DataSource:{position:200,limitDsAll:2,limit:2},SearchTermHistory:{position:400,limitDsAll:7,limit:5},SearchTermData:{position:400,limitDsAll:7,limit:5},Object:{position:300,limitDsAll:3,limit:5},BusyIndicator:{position:900}};return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/suggestions/TimeMerger',[],function(){"use strict";jQuery.sap.declare('sap.ushell.renderers.fiori2.search.suggestions.TimeMerger');var T=sap.ushell.renderers.fiori2.search.suggestions.TimeMerger=function(){this.init.apply(this,arguments);};var c=0;T.prototype={init:function(p,t){this.promiseList=p||[];this.timeDelay=t||1000;this.pending=this.promiseList.length;this.returned=[];this.aborted=false;this.counter=++c;this.errorResult=[];},abort:function(){this.aborted=true;},process:function(p){this.processorCallback=p;this.start();return this;},start:function(){for(var i=0;i<this.promiseList.length;++i){var p=this.promiseList[i];p.then(this.assembleDoneCallback(i),this.assembleErrorCallback(i));}this.scheduleProcessorNotification();},scheduleProcessorNotification:function(){var t=this;if(t.processorNotificationSchedule){window.clearTimeout(t.processorNotificationSchedule);t.processorNotificationSchedule=null;}t.processorNotificationSchedule=window.setTimeout(function(){t.notifyProcessor();},this.timeDelay);},notifyProcessor:function(){if(this.aborted){return;}if(this.returned.length>0){this.processorCallback(this.returned);this.returned=[];}if(this.pending>0){this.scheduleProcessorNotification();}},assembleDoneCallback:function(i){var t=this;return function(r){t.pending--;t.returned.push(r);if(t.pending===0){if(t.processorNotificationSchedule){window.clearTimeout(t.processorNotificationSchedule);t.processorNotificationSchedule=null;}t.notifyProcessor();}};},assembleErrorCallback:function(i){var t=this;return function(e){t.pending--;t.returned.push(t.errorResult);if(t.pending===0){if(t.processorNotificationSchedule){window.clearTimeout(t.processorNotificationSchedule);t.processorNotificationSchedule=null;}t.notifyProcessor();}};}};return T;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/userpref/SearchPrefs',['sap/ushell/renderers/fiori2/search/userpref/SearchPrefsModel'],function(S){"use strict";var m=sap.ushell.renderers.fiori2.search.userpref.SearchPrefs={};jQuery.extend(m,{model:new S(),getEntry:function(){return{title:sap.ushell.resources.i18n.getText('sp.userProfiling'),editable:true,isSearchPrefsActive:this.model.isSearchPrefsActive.bind(this.model),value:this.model.shortStatus.bind(this.model),onSave:this.model.savePreferences.bind(this.model),onCancel:this.model.cancelPreferences.bind(this.model),content:function(){return this.model.asyncInit().then(function(){var u=sap.ui.view({id:'searchPrefsView',type:sap.ui.core.mvc.ViewType.JS,viewName:'sap.ushell.renderers.fiori2.search.userpref.SearchPrefsDialog'});u.setModel(this.model);return u;}.bind(this));}.bind(this)};}});return m;});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/userpref/SearchPrefsDialog.view',["sap/m/MessageBox"],function(){"use strict";return sap.ui.jsview("sap.ushell.renderers.fiori2.search.userpref.SearchPrefsDialog",{createContent:function(c){this.firstTimeBeforeRendering=true;var u=new sap.m.Label({text:sap.ushell.resources.i18n.getText("sp.userProfilingField")+':'});var s=new sap.m.Switch({state:{path:"/personalizedSearch",mode:sap.ui.model.BindingMode.TwoWay},ariaLabelledBy:u,enabled:'{/searchPrefsActive}'});this.resetButton=new sap.m.Button({text:sap.ushell.resources.i18n.getText("sp.clearCollectedData"),press:this.resetHistory.bind(this),enabled:{parts:['/searchPrefsActive','/resetButtonWasClicked'],formatter:function(b,r){return b&&!r;}}});var l=new sap.ui.layout.VerticalLayout({content:[new sap.m.Text({text:sap.ushell.resources.i18n.getText('sp.disclaimer')})]});var a=[u,s,l,this.resetButton];return a;},onBeforeRendering:function(){if(this.firstTimeBeforeRendering){this.firstTimeBeforeRendering=false;return;}this.getModel().reload();},resetHistory:function(){this.getModel().resetProfile().then(function(){},function(r){var e=sap.ushell.resources.i18n.getText('sp.resetFailed');e+='\n'+r;sap.m.MessageBox.show(e,{title:sap.ushell.resources.i18n.getText("sp.resetFailedTitle"),icon:sap.m.MessageBox.Icon.ERROR,actions:[sap.m.MessageBox.Action.OK]});});},formatErrorResponse:function(r){var p;try{p=JSON.parse(r);}catch(e){return r;}if(!p.ErrorDetails){return r;}var a=[];for(var i=0;i<p.ErrorDetails.length;++i){var b=p.ErrorDetails[i];a.push(b.Message+' ('+b.Code+')');}return a.join('\n');},switchChangeHandler:function(e){var s=e.getSource();if(s.getState()){return;}var i=sap.ushell.resources.i18n;var d=i.getText("sp.disable");sap.m.MessageBox.confirm(i.getText('sp.disablingUserProfilingMsg'),{title:sap.ushell.resources.i18n.getText("sp.disableUserProfiling"),icon:sap.m.MessageBox.Icon.QUESTION,actions:[d,sap.m.MessageBox.Action.CANCEL],onClose:function(a){if(a==sap.m.MessageBox.Action.CANCEL){s.setState(true);}}});},openMessageBox:function(){var t=this;var i=sap.ushell.resources.i18n;var c=i.getText("sp.clear");sap.m.MessageBox.confirm(i.getText('sp.profileWillBeReset'),{title:sap.ushell.resources.i18n.getText("sp.clearCollectedData"),icon:sap.m.MessageBox.Icon.QUESTION,actions:[c,sap.m.MessageBox.Action.CANCEL],onClose:function(a){if(a==c){t.getModel().resetProfile();}}});}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/userpref/SearchPrefsModel',['sap/ui/model/json/JSONModel','sap/ushell/renderers/fiori2/search/SearchModel','sap/ushell/renderers/fiori2/search/SearchConfiguration','sap/ushell/renderers/fiori2/search/SearchHelper'],function(J,S,a,b){"use strict";var p='sap.ushell.renderers.fiori2.search.userpref.SearchPrefsModel';return sap.ui.model.json.JSONModel.extend(p,{asyncInit:function(){var t=this;if(t.initializedDeferred){return t.initializedDeferred;}t.searchModel=sap.ushell.renderers.fiori2.search.getModelSingleton();t.initializedDeferred=t.searchModel.initBusinessObjSearch().then(function(){if(!t.searchModel.config.searchBusinessObjects){t.setProperty('/searchPrefsActive',false);t.setProperty('/personalizedSearch',false);t.setProperty('/resetButtonWasClicked',false);return undefined;}var s=t.searchModel.sinaNext;return b.convertPromiseTojQueryDeferred(s.getConfigurationAsync({forceReload:true})).then(function(c){t.configuration=c;t.setProperty('/searchPrefsActive',c.isPersonalizedSearchEditable);t.setProperty('/personalizedSearch',c.personalizedSearch);t.setProperty('/resetButtonWasClicked',false);});});return t.initializedDeferred;},reload:function(){this.initializedDeferred=false;return this.asyncInit();},shortStatus:function(){return this.asyncInit().then(function(){return this.getProperty('/personalizedSearch')?sap.ushell.resources.i18n.getText('sp.on'):sap.ushell.resources.i18n.getText('sp.off');}.bind(this));},isSearchPrefsActive:function(){return this.asyncInit().then(function(){return this.getProperty('/searchPrefsActive');}.bind(this));},savePreferences:function(){this.configuration.setPersonalizedSearch(this.getProperty('/personalizedSearch'));return b.convertPromiseTojQueryDeferred(this.configuration.saveAsync()).then(function(){this.setProperty('/resetButtonWasClicked',false);}.bind(this));},cancelPreferences:function(){this.setProperty('/personalizedSearch',this.configuration.personalizedSearch);this.setProperty('/resetButtonWasClicked',false);},resetProfile:function(){return b.convertPromiseTojQueryDeferred(this.configuration.resetPersonalizedSearchDataAsync()).then(function(){this.setProperty('/resetButtonWasClicked',true);}.bind(this));}});});
sap.ui.predefine('sap/ushell/resources',['sap/ui/model/resource/ResourceModel'],function(R){"use strict";var r={};
r.getTranslationModel=function(l){var t=new R({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties"),bundleLocale:l});return t;};
r.i18nModel=r.getTranslationModel(sap.ui.getCore().getConfiguration().getLanguage());r.i18n=r.i18nModel.getResourceBundle();return r;},true);
sap.ui.predefine('sap/ushell/services/AllMyApps',[],function(){"use strict";
function A(c,p,s){var S=s&&s.config,e=false,d={},P={HOME:0,EXTERNAL:1,CATALOG:2};this.isEnabled=function(){e=(!S||(S.enabled!==false))?true:false;return e;};this.isHomePageAppsEnabled=function(){return(!S||(S.showHomePageApps!==false))?true:false;};this.isCatalogAppsEnabled=function(){return(!S||(S.showCatalogApps!==false))?true:false;};this.isExternalProviderAppsEnabled=function(){return(!S||(S.showExternalProviders!==false))?true:false;};this.registerExternalProvider=function(a,o){if(!a||(a==="")){return;}if(!o.getTitle||!o.getData){return;}d[a]=o;};this.getDataProviders=function(){return d;};this.getProviderTypeEnum=function(){return P;};this.init=function(){};}
A.hasNoAdapter=true;return A;},true);
sap.ui.predefine('sap/ushell/services/AppConfiguration',["sap/ushell/utils","sap/ushell/EventHub","sap/base/Log","sap/ui/util/Mobile","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/i18n/ResourceBundle","sap/ushell/resources","sap/ui/core/IconPool","sap/m/library"],function(u,E,L,M,q,O,R,r,I,m){"use strict";var B=m.ButtonType;
function A(){var o={},a=true,c=null,b=[],d=[];E.on("AppRendered").do(e.bind(this));function e(){a=false;if(d.length){for(var i=0;i<d.length;i++){d[i]();}d.length=0;}}this.addActivity=function(g){var C=sap.ushell.Container;return C&&C.getService("UserRecents").addActivity(g);};this.setApplicationInInitMode=function(){a=true;};this.getApplicationRequestQueue=function(){return d;};this.getCurrentApplication=function(){return c;};this.getCurrentAppliction=this.getCurrentApplication;this.getMetadata=function(g){if(!g){g=c;}if(g){var h=hasher&&hasher.getHash?hasher.getHash():"",k=this._processKey(h);if(!(o.hasOwnProperty(k))||!o[k].complete){this.addMetadata(g,k);}if(!o[k]){o[k]={complete:false};}if(!o[k].title){o[k].title=g.text||r.i18n.getText("default_app_title");}return o[k];}return{};};this._processKey=function(C){var i=C.split("?")[0],p=C.split("?")[1],s,P={},S,g="",h="",j;if(p){s=p.split("&");s.forEach(function(k){var l=k.split("=");P[l[0]]=l[1];});S=Object.keys(P).sort();S.forEach(function(k,l){h=l?"&":"?";g+=h+k+"="+P[k];});return i+g;}j=sap.ushell.Container.getService("URLParsing").parseShellHash(C);i=j?j.semanticObject+"-"+j.action:"";return i;};this.setCurrentApplication=function(g){c=g;if(d.length){d.length=0;}};this.setHeaderHiding=function(){L.warning("Application configuration headerHiding property is deprecated and has no effect");};this.addApplicationSettingsButtons=function(g){if(a){d.push(function(){f(g);});}else{f(g);}};function f(g){var i,h=[],j=sap.ushell.Container.getRenderer("fiori2");for(i=0;i<g.length;i++){var C=g[i];h.push(C.getId());C.setIcon(C.getIcon()||I.getIconURI("customize"));if(r.i18n.getText("userSettings")===C.getProperty("text")){C.setProperty("text",r.i18n.getText("userAppSettings"));}C.setType(B.Unstyled);}if(sap.ushell.Container&&j){if(b.length){j.hideActionButton(b,true);}b=h;j.showActionButton(h,true,undefined,true);}}this.setWindowTitle=function(t){window.document.title=t;};this.setIcons=function(i){M.setIcons(i);};this.setApplicationFullWidth=function(v){sap.ushell.components.applicationIntegration.AppLifeCycle.setApplicationFullWidth(v);};this.getSettingsControlAsync=function(){var D=new q.Deferred();sap.ui.require(["sap/ushell/ui/footerbar/SettingsButton"],function(S){D.resolve(new S());});return D.promise();};this.getSettingsControl=function(){var s="sap/ushell/ui/footerbar/SettingsButton",g="sap.ushell.ui.footerbar.SettingsButton",S=sap.ui.require(s);if(S){return new S();}q.sap.require(g);S=O.get(g||"");return new S();};this.getApplicationName=function(g){var h,s=(g&&g.additionalInformation)||null;if(s){h=/^SAPUI5\.Component=(.+)$/i.exec(s);if(h){return h[1];}}return null;};this.getApplicationUrl=function(g){var U=(g&&g.url)||null,s="P_TCODE",i;if(U){if(g.applicationType==="NWBC"&&U.indexOf(s)){return U;}i=U.indexOf("?");if(i>=0){U=U.slice(0,i);}if(U.slice(-1)!=="/"){U+="/";}}return U;};this.getPropertyValueFromConfig=function(C,p,g){var v;if(g&&C.hasOwnProperty(p+"Resource")){v=g.getText(C[p+"Resource"]);}else if(C.hasOwnProperty(p)){v=C[p];}return v;};this.getPropertyValueFromManifest=function(l,p,P){var s=p[P].manifestEntryKey,g=p[P].path,h=l.getManifestEntry(s);return O.get(g||"",h);};this.addMetadata=function(g,k){try{var C=this.getApplicationName(g),U=this.getApplicationUrl(g),l,h,p={"fullWidth":{"manifestEntryKey":"sap.ui","path":"fullWidth"},"hideLightBackground":{"manifestEntryKey":"sap.ui","path":"hideLightBackground"},"title":{"manifestEntryKey":"sap.app","path":"title"},"icon":{"manifestEntryKey":"sap.ui","path":"icons.icon"},"favIcon":{"manifestEntryKey":"sap.ui","path":"icons.favIcon"},"homeScreenIconPhone":{"manifestEntryKey":"sap.ui","path":"icons.phone"},"homeScreenIconPhone@2":{"manifestEntryKey":"sap.ui","path":"icons.phone@2"},"homeScreenIconTablet":{"manifestEntryKey":"sap.ui","path":"icons.tablet"},"homeScreenIconTablet@2":{"manifestEntryKey":"sap.ui","path":"icons.tablet@2"},"startupImage320x460":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x920":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x1096":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x1096"},"startupImage768x1004":{"manifestEntryKey":"sap.ui","path":"icons.startupImage768x1004"},"startupImage748x1024":{"manifestEntryKey":"sap.ui","path":"icons.startupImage748x1024"},"startupImage1536x2008":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1536x2008"},"startupImage1496x2048":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1496x2048"},"compactContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.compact"},"cozyContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.cozy"}},i,s,j,n,P,t,v,w=g&&g.componentHandle;if(k){if(!(o.hasOwnProperty(k))){o[k]={complete:false};}if(!o[k].complete){if(w){l=w.getMetadata();}else if(C){L.warning("No component handle available for '"+C+"'; SAPUI5 component metadata is incomplete",null,"sap.ushell.services.AppConfiguration");return;}if(l){h=l.getConfig();n=(l.getManifest()!==undefined);o[k].complete=true;if(h){t=h.resourceBundle||"";if(t){if(t.slice(0,1)!=="/"){t=U+t;}v=R.create({url:t,locale:sap.ui.getCore().getConfiguration().getLanguage()});}}for(P in p){if(p.hasOwnProperty(P)){if(n){o[k][P]=this.getPropertyValueFromManifest(l,p,P);}if(h&&o[k][P]===undefined){o[k][P]=this.getPropertyValueFromConfig(h,P,v);}}}o[k].version=l.getVersion();o[k].technicalName=l.getComponentName();}else if(u.isApplicationTypeEmbeddedInIframe(g.applicationType)){var W="/~canvas;window=app/wda/",x=g.url.indexOf(W),y="/bc/gui/sap/its/webgui",z=g.url.indexOf(y);if(x>=0){o[k].technicalName=g.url.substring((x+W.length),g.url.indexOf("/",(x+W.length)));}o[k].complete=true;if(z>=0){var D="etransaction=",F=g.url.indexOf(D,z+y.length),G=g.url.indexOf("&",F),H=(G>=0)?G:g.url.length;o[k].technicalName=decodeURIComponent(g.url.substring(F+D.length,H))+" (TCODE)";}}else{L.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration");}}i=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];s=(U&&U[U.length-1]==="/")?U.substring(0,U.length-1):U;j=function(U){if(U.match(/^https?:\/\/.*/)){return false;}return U&&U[0]!=="/";};i.forEach(function(K){var N=o[k][K],Q=null;if(N){Q=j(N)?s+"/"+N:N;}o[k][K]=Q;});}}catch(J){L.warning("Application configuration could not be parsed");}};}
return new A();},true);
sap.ui.predefine('sap/ushell/services/AppLifeCycle',["sap/ui/base/EventProvider","sap/ushell/TechnicalParameters"],function(E,T){"use strict";var S="appLoaded";
function A(a,c,p,C){var o,e,v;this.getCurrentApplication=function(){return o;};this.attachAppLoaded=function(d,f,l){e.attachEvent(S,d,f,l);};this.detachAppLoaded=function(f,l){e.detachEvent(S,f,l);};e=new E();v=sap.ui.getCore().byId("viewPortContainer");if(!v||typeof v.attachAfterNavigate!=="function"){jQuery.sap.log.error("Error during instantiation of AppLifeCycle service","Could not attach to afterNavigate event","sap.ushell.services.AppLifeCycle");return;}v.attachAfterNavigate(function(b){var d,f,s,g,h,H=false;if(b.mParameters.toId.indexOf("applicationShellPage")===0){f=b.mParameters.to.getApp();}else if(b.mParameters.toId.indexOf("application")===0){f=b.mParameters.to;}if(f&&typeof f.getComponentHandle==="function"&&f.getComponentHandle()){g=f.getComponentHandle().getInstance();}else if(f){d=f.getAggregation("child");if(d){g=d.getComponentInstance();}}else{g=sap.ui.getCore().getComponent(b.mParameters.to.getComponent());}if(g){h=g.getId();H=h.indexOf("Shell-home-component")!==-1||h.indexOf("Shell-appfinder-component")!==-1;}s=f&&typeof f.getApplicationType==="function"&&f.getApplicationType();if((!s||s==="URL")&&g){s="UI5";}o={applicationType:s,componentInstance:g,homePage:H,getTechnicalParameter:function(P){return T.getParameterValue(P,g,f,s);},getIntent:function(){var i=hasher&&hasher.getHash();if(!i){return Promise.reject("Could not identify current application hash");}var j=sap.ushell.Container.getServiceAsync("URLParsing");return j.then(function(P){return P.parseShellHash(i);});}};setTimeout(function(){e.fireEvent(S,o);},0);});}
A.hasNoAdapter=true;return A;},true);
sap.ui.predefine('sap/ushell/services/AppState',["sap/ushell/services/_AppState/WindowAdapter","sap/ushell/services/_AppState/SequentializingAdapter","sap/ushell/services/_AppState/AppState","sap/ushell/services/_AppState/Sequentializer","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(W,S,A,a,b,u,q){"use strict";
function g(C){return u.isDefined(C)&&u.isDefined(C.transient)?!!C.transient:true;}
function c(o,C,p,d){this._oConfig=d&&d.config;this._sSessionKey="";this._oAdapter=new S(o);this._oAdapter=new W(this,this._oAdapter,d);}
c.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey();}return this._sSessionKey;};
c.prototype.getAppState=function(k){var d=new q.Deferred(),t=this,o;this._loadAppState(k).done(function(k,D,p,P){o=new A(t,k,false,D,undefined,undefined,undefined,p,P);d.resolve(o);}).fail(function(){o=new A(t,k);d.resolve(o);});return d.promise();};
c.prototype._getGeneratedKey=function(){var s=sap.ushell.Container.getService("Personalization").getGeneratedKey();s=("AS"+s).substring(0,40);return s;};
c.prototype.createEmptyAppState=function(C,t,p,P){var k=this._getGeneratedKey(),o,s="",d="",U=u.isDefined(t)?t:g(this._oConfig);if(p!==undefined&&!this.isPersistencyMethodSupported(p)){p=undefined;P=undefined;}if(C){if(!(C instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}if(C.getMetadata&&C.getMetadata()&&typeof C.getMetadata().getName==="function"){s=C.getMetadata().getName()||"";}if(!s&&C.getMetadata&&C.getMetadata().getComponentName){s=C.getMetadata().getComponentName();}if(C.getMetadata&&C.getMetadata()&&typeof C.getMetadata().getManifest==="function"&&typeof C.getMetadata().getManifest()==="object"&&typeof C.getMetadata().getManifest()["sap.app"]==="object"){d=C.getMetadata().getManifest()["sap.app"].ach||"";}}if(U===true){p=P=undefined;}else if(p===undefined&&this.isPersistencyMethodSupported(b.PersonalState)){p=b.PersonalState;P=undefined;}o=new A(this,k,true,undefined,s,d,U,p,P);return o;};
c.prototype.createEmptyUnmodifiableAppState=function(){var k=this._getGeneratedKey(),o;o=new A(this,k,false);return o;};
c.prototype._saveAppState=function(k,d,s,C,t,p,P){var e=this._getSessionKey(),U=u.isDefined(t)?t:g(this._oConfig);if(U){p=undefined;P=undefined;}else if(p!=undefined){if(!this.isPersistencyMethodSupported(p)){if(this.isPersistencyMethodSupported(b.PersonalState)){p=b.PersonalState;}else{p=undefined;}P=undefined;}}return this._oAdapter.saveAppState(k,e,d,s,C,U,p,P);};
c.prototype._loadAppState=function(k){return this._oAdapter.loadAppState(k);};
c.prototype.deleteAppState=function(k){return this._oAdapter.deleteAppState(k);};
c._getSequentializer=function(){return new a();};
c.prototype.getSupportedPersistencyMethods=function(){if(this._oAdapter.getSupportedPersistencyMethods){return this._oAdapter.getSupportedPersistencyMethods();}return[];};
c.prototype.isPersistencyMethodSupported=function(p){var s=this.getSupportedPersistencyMethods();if(s.length>0&&p!==undefined){return(s.indexOf(p)>=0);}else{return false;}};
c.prototype.makeStatePersistent=function(k,p,P){var d=new q.Deferred(),t=this;if(this.getSupportedPersistencyMethods().length===0){return d.resolve().promise();}if(this.isPersistencyMethodSupported(p)){t.getAppState(k).done(function(o){if(o._iPersistencyMethod!==p){o.bTransient=false;o._iPersistencyMethod=p;o._oPersistencySettings=P;t._saveAppState(k,o._sData,o._sAppName,o._sACHComponent,false,p,P).done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}});}else{d.reject("AppState.makeStatePersistent - adapter does not support persistence method: "+p);}return d.promise();};
c.WindowAdapter=W;c.hasNoAdapter=false;return c;},true);
sap.ui.predefine('sap/ushell/services/AppType',["sap/ushell/resources"],function(r){"use strict";return{OVP:"OVP",SEARCH:"Search",FACTSHEET:"FactSheet",COPILOT:"Co-Pilot",URL:"External Link",APP:"Application",getDisplayName:function(a){switch(a){case this.OVP:return r.i18n.getText("Apptype.OVP");case this.SEARCH:return r.i18n.getText("Apptype.SEARCH");case this.FACTSHEET:return r.i18n.getText("Apptype.FACTSHEET");case this.COPILOT:return r.i18n.getText("Apptype.COPILOT");case this.URL:return r.i18n.getText("Apptype.URL");default:return r.i18n.getText("Apptype.APP");}}};});
sap.ui.predefine('sap/ushell/services/Bookmark',["sap/ui/thirdparty/jquery","sap/ushell/Config"],function(q,C){"use strict";
function B(){var l=sap.ushell.Container.getService("LaunchPage");this._isMatchingRemoteCatalog=function(c,r){var o=l.getCatalogData(c);return o.remoteId===r.remoteId&&o.baseUrl.replace(/\/$/,"")===r.baseUrl.replace(/\/$/,"");};this.addBookmark=function(p,g){if(!C.last("/core/shell/enablePersonalization")){return new q.Deferred().resolve().promise();}var P=l.addBookmark(p,g);P.done(function(t){var d={tile:t,group:g};sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileAdded",d);});return P;};this.addBookmarkByGroupId=function(p,g){return l.getGroups().then(function(G){G=q.grep(G,function(e){return e.id===g;});var o=null;if(G.length>0){o=G[0];}return this.addBookmark(p,o);}.bind(this));};this.getShellGroupIDs=function(g){var d=new q.Deferred();l.getGroupsForBookmarks(g).done(function(G){G=G.map(function(a){var n={id:l.getGroupId(a.object),title:a.title};return n;});d.resolve(G);});return d;};this._doAddCatalogTileToGroup=function(d,c,o,g){var e,f=d.reject.bind(d);function i(c,b){var I=l.getCatalogTileId(b);if(I===undefined){return false;}return I.indexOf(c)===0;}function a(G){l.getCatalogTiles(o).fail(f).done(function(b){var g=l.getGroupId(G),t=b.some(function(h){if(i(c,h)){l.addTile(h,G).fail(f).done(function(){d.resolve();sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","catalogTileAdded",g);});return true;}});if(!t){e="No tile '"+c+"' in catalog '"+l.getCatalogId(o)+"'";q.sap.log.error(e,null,"sap.ushell.services.Bookmark");f(e);}});}if(g){l.getGroups().fail(f).done(function(G){var b=G.some(function(h){if(l.getGroupId(h)===g){a(h);return true;}});if(!b){e="Group '"+g+"' is unknown";q.sap.log.error(e,null,"sap.ushell.services.Bookmark");f(e);}});}else{l.getDefaultGroup().fail(f).done(a);}return d.promise();};this.addCatalogTileToGroup=function(c,g,o){var d=new q.Deferred(),e,f=d.reject.bind(d),m,L="X-SAP-UI2-HANA:hana?remoteId=HANA_CATALOG",t=this;function i(a){return l.getCatalogId(a)===L;}m=o?this._isMatchingRemoteCatalog:i;o=o||{id:L};l.onCatalogTileAdded(c);l.getCatalogs().fail(f).done(function(a){var s;a.forEach(function(b){if(m(b,o)){if(!s){s=b;}else{q.sap.log.warning("More than one matching catalog: "+JSON.stringify(o),null,"sap.ushell.services.Bookmark");}}});if(s){t._doAddCatalogTileToGroup(d,c,s,g);}else{e="No matching catalog found: "+JSON.stringify(o);q.sap.log.error(e,null,"sap.ushell.services.Bookmark");d.reject(e);}});return d.promise();};this.countBookmarks=function(u){return l.countBookmarks(u);};this.deleteBookmarks=function(u){var p=l.deleteBookmarks(u);p.done(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileDeleted",u);});return p;};this.updateBookmarks=function(u,p){return l.updateBookmarks(u,p);};}
B.hasNoAdapter=true;return B;},true);
sap.ui.predefine('sap/ushell/services/ClientSideTargetResolution',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/AppConfiguration","sap/ushell/services/_ClientSideTargetResolution/InboundProvider","sap/ushell/services/_ClientSideTargetResolution/InboundIndex","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Search","sap/ushell/services/_ClientSideTargetResolution/StagedLogger","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing","sap/ushell/navigationMode","sap/ushell/Config","sap/ushell/ApplicationType","sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/systemAlias","sap/ushell/TechnicalParameters","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject"],function(u,c,a,I,b,V,s,l,f,p,P,x,n,C,A,U,S,T,O,q,i){"use strict";
function d(o,e,g,h){this._init.apply(this,arguments);}
d.prototype._init=function(o,e,g,h){this._iLogId=0;sap.ui.lazyRequire("sap/ui/generic/app/navigation/service/SelectionVariant");if(!this._implementsServiceInterface(o)){q.sap.log.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return;}this._oInboundProvider=new I(o.getInbounds.bind(o));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._oServiceConfiguration=h;this._oAdapter=o;};
d.prototype._implementsServiceInterface=function(o){if(typeof o.getInbounds==="function"){return true;}return false;};
d.prototype._getURLParsing=function(){if(!this._oURLParsing){this._oURLParsing=sap.ushell.Container.getService("URLParsing");}return this._oURLParsing;};
d.prototype._extractInboundFilter=function(o){if(!this._oAdapter.hasSegmentedAccess){return undefined;}if(typeof o!=="string"){return undefined;}var F=o.indexOf("#")===0?o:"#"+o;var e=this._getURLParsing().parseShellHash(F);if(!e||!e.semanticObject||!e.action){return undefined;}return[{semanticObject:e.semanticObject,action:e.action}];};
d.prototype.resolveHashFragment=function(h){var t=this,D=new q.Deferred(),B=this._oAdapter.resolveHashFragmentFallback&&this._oAdapter.resolveHashFragmentFallback.bind(this._oAdapter),e=this._extractInboundFilter(h);this._oInboundProvider.getInbounds(e).then(function(g){t._resolveHashFragment(h,B,g).done(function(o){return D.resolve(o);}).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype.resolveTileIntent=function(h){var t=this,D=new q.Deferred(),e=this._extractInboundFilter(h);this._oInboundProvider.getInbounds(e).then(function(o){t._resolveTileIntent(h,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype.resolveTileIntentInContext=function(e,h){var o,D=new q.Deferred();o=b.createIndex(e.concat(V.getInbounds()));this._resolveTileIntent(h,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));return D.promise();};
d.prototype._resolveHashFragment=function(h,B,e){var g=this._getURLParsing(),t=this,D=new q.Deferred(),F=h.indexOf("#")===0?h:"#"+h,j=g.parseShellHash(F);if(j===undefined){q.sap.log.error("Could not parse shell hash '"+h+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject().promise();}j.formFactor=u.getFormFactor();this._getMatchingInbounds(j,e,{bExcludeTileInbounds:true}).fail(function(E){q.sap.log.error("Could not resolve "+h,"_getMatchingInbounds promise rejected with: "+E,"sap.ushell.services.ClientSideTargetResolution");D.reject(E);}).done(function(m){var M;if(m.length===0){q.sap.log.warning("Could not resolve "+h,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");D.reject("Could not resolve navigation target");return;}m=t._applySapNavigationScopeFilter(m,j);M=m[0];c.whenDebugEnabled(function(){function k(K,v){return this[K]===undefined?"<undefined>":v;}function r(v,w){return(v==="_original")?undefined:k.call(this,v,w);}var o=JSON.stringify(M,r,"   ");q.sap.log.debug("The following target will now be resolved",o,"sap.ushell.services.ClientSideTargetResolution");});t._resolveSingleMatchingTarget(M,B,F).done(function(o){D.resolve(o);}).fail(D.reject.bind(D));});return D.promise();};
d.prototype._applySapNavigationScopeFilter=function(m,o){var e=o&&o.params&&o.params["sap-navigation-scope-filter"];if(!e){return m;}var F=m.filter(function(M){var g=O.get("inbound.signature.parameters",M);var h=g&&g["sap-navigation-scope"];if(h){return e[0]===h.defaultValue.value;}});return F.length>0?F:m;};
d.prototype._resolveSingleMatchingTarget=function(m,B,F){var t=this,D=new q.Deferred(),o=this._getURLParsing(),e=o.parseShellHash(F),g=[e.semanticObject,e.action].join("-"),h=(m.inbound.resolutionResult||{}).applicationType;var E;if(this._oAdapter.resolveSystemAlias){E=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}var j=A.getEasyAccessMenuResolver(g,h);if(j){j(e,m,E).then(function(R){var N=n.compute(O.get("inbound.resolutionResult.applicationType",m),(m.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(m.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(a.getCurrentApplication()||{}).applicationType,C.last("/core/navigation/enableInPlaceForClassicUIs"));u.shallowMergeObject(R,N);R.inboundPermanentKey=m.inbound.permanentKey||m.inbound.id;D.resolve(R);},function(k){D.reject(k);});return D.promise();}var r=this._getReservedParameters(m);p.mapParameterNamesAndRemoveObjects(m);x.mixAppStateIntoResolutionResultAndRename(m,sap.ushell.Container.getService("AppState")).done(function(m){var R=function(){return t._constructFallbackResolutionResult.call(t,m,B,F);};if(A[h]){R=A[h].generateResolutionResult;}delete m.intentParamsPlusAllDefaults["sap-tag"];delete m.mappedIntentParamsPlusSimpleDefaults["sap-tag"];m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(v){return v!=="sap-tag";});var k=O.get("inbound.resolutionResult.url",m);P.executePrelaunchOperations(m,r["sap-prelaunch-operations"]).then(function(){return R(m,k,E);}).then(function(v){v.reservedParameters=r;v.inboundPermanentKey=m.inbound.permanentKey||m.inbound.id;return v;}).then(function(v){q.sap.log.debug("Intent was resolved to the following target",JSON.stringify(m.resolutionResult,null,3),"sap.ushell.services.ClientSideTargetResolution");u.shallowMergeObject(m.resolutionResult,v);D.resolve(m.resolutionResult);},function(M){if(typeof M==="string"&&M.indexOf("fallback:")>=0){t._constructFallbackResolutionResult.call(this,m,B,F).then(function(v){u.shallowMergeObject(m.resolutionResult,v);D.resolve(m.resolutionResult);},D.reject.bind(D));}else{D.reject(M);}});});return D.promise();};
d.prototype._getReservedParameters=function(m){var r=T.getParameters({injectFrom:"startupParameter"}).map(function(o){return o.name;});var R=c.extractParameters(r,m.intentParamsPlusAllDefaults);T.getParameters({injectFrom:"inboundParameter"}).forEach(function(o){var e=o.name;var g=m.inbound&&m.inbound.signature&&m.inbound.signature.parameters;if(g&&Object.keys(g).length>0){var h=g[e];var j=h&&h.defaultValue&&h.defaultValue.hasOwnProperty("value");var k=h&&h.filter&&h.filter.hasOwnProperty("value");if(h&&(k||j)){if(j){R[e]=h.defaultValue.value;}else{R[e]=h.filter.value;}}else{delete R[e];}delete m.intentParamsPlusAllDefaults[e];var t=m.defaultedParamNames.indexOf(e);if(t>=0){m.defaultedParamNames.splice(t,1);}}});return R;};
d.prototype._resolveTileIntent=function(h,B,o){var e=this._getURLParsing(),t=this,D=new q.Deferred(),F=h.indexOf("#")===0?h:"#"+h,g=e.parseShellHash(F);if(g===undefined){q.sap.log.error("Could not parse shell hash '"+h+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject("Cannot parse shell hash").promise();}g.formFactor=u.getFormFactor();this._getMatchingInbounds(g,o,{bExcludeTileInbounds:false}).fail(function(E){q.sap.log.error("Could not resolve "+h,"_getMatchingInbounds promise rejected with: "+E,"sap.ushell.services.ClientSideTargetResolution");D.reject(E);}).done(function(m){var M;if(m.length===0){q.sap.log.warning("Could not resolve "+h,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");D.reject("No matching targets found");return;}M=m[0];t._resolveSingleMatchingTileIntent(M,B,F).done(D.resolve.bind(D)).fail(D.reject.bind(D));});return D.promise();};
d.prototype._resolveSingleMatchingTileIntent=function(m,B,F){var D=new q.Deferred(),e=(m.inbound.resolutionResult||{}).applicationType,t=this;var E;if(this._oAdapter.resolveSystemAlias){E=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}p.mapParameterNamesAndRemoveObjects(m);x.mixAppStateIntoResolutionResultAndRename(m,sap.ushell.Container.getService("AppState")).done(function(m){var r=function(){return t._constructFallbackResolutionResult.call(t,m,B,F);};if(A[e]){r=A[e].generateResolutionResult;}delete m.intentParamsPlusAllDefaults["sap-tag"];delete m.mappedIntentParamsPlusSimpleDefaults["sap-tag"];m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(h){return h!=="sap-tag";});var g=O.get("inbound.resolutionResult.url",m);r(m,g,E).then(function(R){u.shallowMergeObject(m.resolutionResult,R);var o=q.extend(true,{},m.inbound.tileResolutionResult);o.startupParameters=m.effectiveParameters;o.navigationMode=m.resolutionResult.navigationMode;if(!o.navigationMode){o.navigationMode=n.getNavigationMode(m.resolutionResult);}D.resolve(o);q.sap.log.debug("Tile Intent was resolved to the following target",JSON.stringify(o,null,3),"sap.ushell.services.ClientSideTargetResolution");},function(M){D.reject(M);});});return D.promise();};
d.prototype._constructFallbackResolutionResult=function(m,B,F){var e={},D;Object.keys(m.intentParamsPlusAllDefaults).forEach(function(g){if(Array.isArray(m.intentParamsPlusAllDefaults[g])){e[g]=m.intentParamsPlusAllDefaults[g];}});D=m.mappedDefaultedParamNames||m.defaultedParamNames;if(D.length>0){e["sap-ushell-defaultedParameterNames"]=[JSON.stringify(D)];}if(typeof B!=="function"){q.sap.log.error("Cannot resolve hash fragment",F+" has matched an inbound that cannot be resolved client side and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter","sap.ushell.services.ClientSideTargetResolution");return Promise.reject("Cannot resolve hash fragment: no fallback provided.");}q.sap.log.warning("Cannot resolve hash fragment client side",F+" has matched an inbound that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");return new Promise(function(r,R){B(F,q.extend(true,{},m.inbound),e).done(function(o){var g={};["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(function(h){if(o.hasOwnProperty(h)){g[h]=o[h];}});r(g);}).fail(R.bind(null));});};
d.prototype.getDistinctSemanticObjects=function(){var D=new q.Deferred();this._oInboundProvider.getInbounds().then(function(o){var e={};o.getAllInbounds().forEach(function(g){if(typeof g.semanticObject==="string"&&g.semanticObject!=="*"&&!g.hideIntentLink&&g.semanticObject.length>0){e[g.semanticObject]=true;}});D.resolve(Object.keys(e).sort());},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype.getLinks=function(o){var N,t=this,e,m,g,D=new q.Deferred(),h;if(arguments.length===1&&i(arguments[0])){N=arguments[0];h=q.extend(true,{},N);["action","semanticObject"].forEach(function(j){if(N.hasOwnProperty(j)){h[j]=N[j];}});if(h.appStateKey){h.params=h.params||{};h.params["sap-xapp-state"]=[h.appStateKey];delete h.appStateKey;}}else if(arguments.length<=3){q.sap.log.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");e=arguments[0];m=arguments[1];g=arguments[2];h={semanticObject:e,params:m,ignoreFormFactor:g};}else{return D.reject("invalid arguments for getLinks").promise();}this._oInboundProvider.getInbounds().then(function(j){t._getLinks(h,j).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype._validateGetSemanticObjectLinksArgs=function(o){var e=o.semanticObject,g=o.action,h=!o.hasOwnProperty("action");if(typeof e!=="undefined"||h){if(typeof e!=="string"){q.sap.log.error("invalid input for _getLinks","the semantic object must be a string, got "+Object.prototype.toString.call(e)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(h&&e.match(/^\s+$/)){q.sap.log.error("invalid input for _getLinks","the semantic object must be a non-empty string, got '"+e+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(!h&&e.length===0){q.sap.log.error("invalid input for _getLinks","the semantic object must not be an empty string, got '"+e+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}}if(typeof g!=="undefined"){if(typeof g!=="string"){q.sap.log.error("invalid input for _getLinks","the action must be a string, got "+Object.prototype.toString.call(g)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}if(g.length===0){q.sap.log.error("invalid input for _getLinks","the action must not be an empty string, got '"+g+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}}return undefined;};
d.prototype._getLinks=function(o,e){var g=o.semanticObject,h=o.action,m=o.params,w=!!o.withAtLeastOneUsedParam,t=!!o.treatTechHintAsFilter,j=o.ignoreFormFactor,k=o.hasOwnProperty("sortResultsBy")?o.sortResultsBy:"intent";if(o.hasOwnProperty("sortResultOnTexts")){q.sap.log.warning("the parameter 'sortResultOnTexts' was experimantal and is no longer supported","getLinks results will be sorted by '"+k+"'","sap.ushell.services.ClientsideTargetResolution");}var r={bExcludeTileInbounds:true};var E=this._validateGetSemanticObjectLinksArgs(o);if(o.tags){r.tags=o.tags;}if(E){return new q.Deferred().reject(E).promise();}if(g==="*"){return q.when([]);}function v(y,m){var G=y.paramsToString(m);return G?"?"+G:"";}var y=this._getURLParsing(),D=new q.Deferred(),F=u.getFormFactor(),z=y.parseParameters(v(y,m)),B={semanticObject:(g===""?undefined:g),action:h,formFactor:(j?undefined:F),params:z};if(t){B.treatTechHintAsFilter=true;}this._getMatchingInbounds(B,e,r).done(function(M){var G={},R=M.map(function(K){var L=g||K.inbound.semanticObject,N="#"+L+"-"+K.inbound.action,Q;if(L==="*"){return undefined;}if(K.inbound.action==="*"){return undefined;}if(K.inbound&&K.inbound.hasOwnProperty("hideIntentLink")&&K.inbound.hideIntentLink===true){return undefined;}if(!G.hasOwnProperty(N)){G[N]={matchingInbound:K.inbound,count:1};if(K.inbound.signature.additionalParameters==="ignored"){Q=c.filterObjectKeys(z,function($){return($.indexOf("sap-")===0)||K.inbound.signature.parameters.hasOwnProperty($);},false);}else{Q=z;}if(w){var W=Object.keys(Q).some(function($){return $.indexOf("sap-")!==0;});if(!W){G[N].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined;}}var X=c.inboundSignatureMeetsParameterOptions(K.inbound.signature.parameters,o.paramsOptions||[]);if(!X){G[N].hideReason="inbound signature does not meet the requested parameter filter options";return undefined;}var Y={"intent":N+v(y,Q),"text":K.inbound.title};if(K.inbound.icon){Y.icon=K.inbound.icon;}if(K.inbound.subTitle){Y.subTitle=K.inbound.subTitle;}if(K.inbound.shortTitle){Y.shortTitle=K.inbound.shortTitle;}var Z=O.get("inbound.signature.parameters.sap-tag.defaultValue.value",K);if(Z){Y.tags=[Z];}return Y;}G[N].count++;return undefined;}).filter(function(K){return typeof K==="object";});if(k!=="priority"){R.sort(function(K,L){return K[k]<L[k]?-1:1;});}if(R.length===0){q.sap.log.debug("_getLinks returned no results");}else if(q.sap.log.getLevel()>=q.sap.log.Level.DEBUG){if(q.sap.log.getLevel()>=q.sap.log.Level.TRACE){var H=[];var J=[];R.forEach(function(K){var L=K.intent.split("?")[0];if(G[L].hideReason){J.push(["-",L+"("+G[L].hideReason+")\n"," text:",K.text+"\n"," full intent:",K.intent].join(" "));}else{H.push(["-",L,G[L].count>1?"("+(G[L].count-1)+" others matched)\n":"\n","text:",K.text+"\n","full intent:",K.intent].join(" "));}});q.sap.log.debug("_getLinks filtered to the following unique intents:","\n"+H.join("\n"),"sap.ushell.services.ClientSideTargetResolution");q.sap.log.debug("_getLinks would have also returned the following unique intents, but something prevented this:",J.join("\n"),"sap.ushell.services.ClientSideTargetResolution");}else{q.sap.log.debug("_getLinks filtered to unique intents.","Reporting histogram: \n - "+Object.keys(G).join("\n - "),"sap.ushell.services.ClientSideTargetResolution");}}D.resolve(R);}).fail(D.reject.bind(D));return D.promise();};
d.prototype._getMatchingInbounds=function(o,e,g){var t=this,h,j,L,k,m,E,r,D=new q.Deferred();if(g){h=g.tags;E=g.bExcludeTileInbounds;}c.whenDebugEnabled(function(){L=++t._iLogId;});l.begin(function(){function v(M){var y=M.action||(typeof M.action==="undefined"?"<any>":"<invalid-value>");var z=M.semanticObject||(typeof M.semanticObject==="undefined"?"<any>":"<invalid-value>");return t._getURLParsing().constructShellHash({semanticObject:z,action:y,params:M.params});}var w=v(o);return{logId:L,title:"Matching Intent '"+w+"' to inbounds (form factor: "+(o.formFactor||"<any>")+")",moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]};});m=o.semanticObject;j=o.action;this._oShellHash=o;k=h?e.getSegmentByTags(h):e.getSegment(m,j);if(E){r=k.filter(function(v){return!v.tileResolutionResult||!v.tileResolutionResult.isCustomTile;});}else{r=k;}s.match(o,r,{},c.isDebugEnabled()).then(function(v){l.log(function(){return{logId:L,stage:1,prefix:"\u2718",lines:Object.keys(v.noMatchReasons||{}).map(function(w){return w+" "+v.noMatchReasons[w];})};});l.log(function(){var w=v.matchResults.map(function(y){return f.formatInbound(y.inbound);});return{logId:L,stage:1,prefix:w.length>0?"\u2705":"\u2718",lines:w.length>0?w:["No inbound was matched"]};});var M=Object.keys(v.missingReferences||[]);if(M.length===0){l.log(function(){return{logId:L,stage:2,prefix:"\u2705",line:"No need to resolve references"};});return new q.Deferred().resolve({matchResults:v.matchResults,referencesToInclude:null}).promise();}l.log(function(){return{logId:L,stage:2,line:"@ Must resolve the following references:",prefix:"\u2022",lines:M};});var R=new q.Deferred();sap.ushell.Container.getService("ReferenceResolver").resolveReferences(M).done(function(w){l.log(function(){return{logId:L,stage:2,line:"\u2705 resolved references with the following values:",prefix:"\u2022",lines:Object.keys(w).map(function(y){return y+": '"+w[y]+"'";})};});R.resolve({matchResults:v.matchResults,referencesToInclude:w});}).fail(function(w){l.log(function(){return{logId:L,stage:2,prefix:"\u274c",line:"Failed to resolve references: "+w};});D.resolve([]);});return R.promise();}).then(function(v){var M,w,R=v.referencesToInclude;if(!R){l.log(function(){return{logId:L,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"\u2705"};});return new q.Deferred().resolve(v).promise();}w=v.matchResults;M=w.map(function(y){return y.inbound;});return s.match(o,M,R,0).then(function(F){l.log(function(){var w=F.matchResults||[];if(w.length>=1){return{logId:L,stage:3,line:"The following inbounds re-matched:",lines:w.map(function(y){return f.formatInbound(y.inbound);}),prefix:"\u2705"};}return{logId:L,stage:3,line:"No inbounds re-matched",prefix:"-"};});return F;});}).then(function(F){var M=F.matchResults||[];if(M.length<=1){l.log(function(){return{logId:L,stage:4,line:"Nothing to sort"};});D.resolve(M);return;}var v=s.sortMatchingResultsDeterministic(F.matchResults||[]);l.log(function(){var w=v.map(function(y){return f.formatInbound(y.inbound||{})+(y.matchesVirtualInbound?" (virtual)":"")+"\n[ Sort Criteria ] "+"\n * 1 * sap-priority: '"+y["sap-priority"]+"'"+"\n * 2 * Sort string: '"+y.priorityString+"\n * 3 * Deterministic blob: '"+s.serializeMatchingResult(y)+"'";});return{logId:L,stage:4,line:"Sorted inbounds as follows:",lines:w,prefix:".",number:true};});D.resolve(v);});return D.promise().then(function(M){l.end(function(){return{logId:L};});return M;});};
d.prototype._isIntentSupportedOne=function(e,o){var D=new q.Deferred(),g=this._getURLParsing().parseShellHash(e);if(e==="#"){D.resolve(true);return D.promise();}if(g===undefined){return D.reject("Could not parse shell hash '"+e+"'").promise();}g.formFactor=u.getFormFactor();this._getMatchingInbounds(g,o,{bExcludeTileInbounds:true}).done(function(t){D.resolve(t.length>0);}).fail(function(){D.reject();});return D.promise();};
d.prototype.isIntentSupported=function(e){var t=this,D=new q.Deferred();this._oInboundProvider.getInbounds().then(function(o){t._isIntentSupported(e,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype._isIntentSupported=function(e,o){var t=this,D=new q.Deferred(),m={};D.resolve();function g(h,j){m[h]={supported:j};}var r=[];e.forEach(function(h){var N=t._isIntentSupportedOne(h,o);N.fail(function(E){r.push(E);});N.done(function(j){g(h,j);});D=q.when(D,N);});var R=new q.Deferred();D.done(function(){R.resolve(m);}).fail(function(){R.reject("One or more input intents contain errors: "+r.join(", "));});return R.promise();};
d.prototype.getUserDefaultParameterNames=function(){var t=this,D=new q.Deferred();this._oInboundProvider.getInbounds().then(function(o){var r;try{r=t._getUserDefaultParameterNames(o.getAllInbounds());D.resolve(r);}catch(e){D.reject("Cannot get user default parameters from inbounds: "+e);}},function(){D.reject.apply(D,arguments);});return D.promise();};
d.prototype._getUserDefaultParameterNames=function(e){var r={simple:{},extended:{}};e.forEach(function(t){var o=t.signature&&t.signature.parameters||[];Object.keys(o).forEach(function(g){var h=o[g],R,E,j,k;if(h){if(h.filter&&h.filter.format==="reference"){j=h.filter.value;}else if(h.defaultValue&&h.defaultValue.format==="reference"){j=h.defaultValue.value;}if(typeof j==="string"){k=sap.ushell.Container.getService("ReferenceResolver");R=k.extractUserDefaultReferenceName(j);if(typeof R==="string"){r.simple[R]={};}E=k.extractExtendedUserDefaultReferenceName(j);if(typeof E==="string"){r.extended[E]={};}}}});});return r;};
d.prototype.getEasyAccessSystems=function(m){var r={},o,v,D;m=m||"sapMenu";if(this._oHaveEasyAccessSystemsDeferreds[m]){return this._oHaveEasyAccessSystemsDeferreds[m].promise();}this._oHaveEasyAccessSystemsDeferreds[m]=new q.Deferred();D=this._oHaveEasyAccessSystemsDeferreds[m];function e(g,h,v){if(!g){return false;}var j=[g.semanticObject,g.action].join("-");return v[m][j]&&g.deviceTypes&&h!==undefined&&g.deviceTypes[h];}o=A.getEasyAccessMenuDefinitions().reduce(function(o,E){var g=E.easyAccessMenu.intent.split("-")[1];o[g]={appType:E.type,priority:E.easyAccessMenu.systemSelectionPriority};return o;},{});v={userMenu:A.getEasyAccessMenuDefinitions().reduce(function(g,E){var h=E.easyAccessMenu.intent;g[h]=E.easyAccessMenu.showSystemSelectionInUserMenu;return g;},{}),sapMenu:A.getEasyAccessMenuDefinitions().reduce(function(g,E){var h=E.easyAccessMenu.intent;g[h]=E.easyAccessMenu.showSystemSelectionInSapMenu;return g;},{})};this._oInboundProvider.getInbounds().then(function(g){var L={};g.getAllInbounds().filter(function(h){return e(h,u.getFormFactor(),v);}).forEach(function(E){var h;if(i(E.signature.parameters["sap-system"])&&E.signature.parameters["sap-system"].hasOwnProperty("filter")){h=O.get("signature.parameters.sap-system.filter.value",E);}if(typeof h==="string"){var j=o[E.action].priority;var k=o[E.action].appType;if(!r[h]){L[h]=-1;r[h]={appType:{}};}if(L[h]<j){r[h].text=E.title;L[h]=j;}r[h].appType[k]=true;}else{q.sap.log.warning("Cannot extract sap-system from easy access menu inbound: "+f.formatInbound(E),"This parameter is supposed to be a string. Got '"+h+"' instead.","sap.ushell.services.ClientSideTargetResolution");}});D.resolve(r);},function(){D.reject.apply(D,arguments);});return D.promise();};
d.hasNoAdapter=false;return d;},true);
sap.ui.predefine('sap/ushell/services/CommonDataModel',["sap/ushell/services/_CommonDataModel/PersonalizationProcessor","sap/base/util/ObjectPath","sap/base/util/extend","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/isPlainObject"],function(P,O,e,q,L,a){"use strict";var S="sap.ushell.services.CommonDataModel",b={"STATIC_LAUNCHER":"sap.ushell.StaticAppLauncher","DYNAMIC_LAUNCHER":"sap.ushell.DynamicAppLauncher","CARD":"sap.ushell.Card"};
function C(A,c,p,s){var t=this,o=new q.Deferred();function f(m){o.reject(m);}this._oAdapter=A;this._oPersonalizationProcessor=new P();this._oSitePromise=o.promise();this._oContentProviderIndex={};A.getSite().done(function(d){t._oOriginalSite=q.extend(true,{},d);A.getPersonalization().done(function(g){t._oPersonalizationProcessor.mixinPersonalization(d,g).done(function(h){t._oPersonalizedSite=t._ensureCompleteSite(h);t._oPersonalizedSite=t._ensureGroupsOrder(t._oPersonalizedSite);t._oPersonalizedSite=t._ensureStandardVizTypesPresent(t._oPersonalizedSite);o.resolve(t._oPersonalizedSite);}).fail(f);}).fail(f);}).fail(f);}
C.prototype.getHomepageGroups=function(){var d=new q.Deferred();this._oSitePromise.then(function(s){var g=(s&&s.site&&s.site.payload&&s.site.payload.groupsOrder)?s.site.payload.groupsOrder:[];d.resolve(g);});return d.promise();};
C.prototype.getGroups=function(){var d=new q.Deferred();this._oSitePromise.then(function(s){var g=[];Object.keys(s.groups).forEach(function(k){g.push(s.groups[k]);});d.resolve(g);});return d.promise();};
C.prototype.getGroup=function(i){var d=new q.Deferred();this._oSitePromise.then(function(s){var g=s.groups[i];if(g){d.resolve(g);}else{d.reject("Group "+i+" not found");}});return d.promise();};
C.prototype.getSite=function(){return this._oSitePromise;};
C.prototype._getPage=function(p){return new Promise(function(r,c){this._oAdapter._getPage(p).then(function(s){s=e({},s);s=this._ensureCompleteSite(s);s=this._ensureGroupsOrder(s);s=this._ensureStandardVizTypesPresent(s);r(s);}.bind(this)).catch(function(m){c(m);});}.bind(this));};
C.prototype.getGroupFromOriginalSite=function(g){var d=new q.Deferred();if(typeof g==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[g]){d.resolve(q.extend(true,{},this._oOriginalSite.groups[g]));}else{d.reject("Group does not exist in original site.");}return d.promise();};
C.prototype.save=function(){var d=new q.Deferred(),t=this;this._oPersonalizationProcessor.extractPersonalization(this._oPersonalizedSite,this._oOriginalSite).done(function(E){if(E){t._oAdapter.setPersonalization(E).done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}});return d.promise();};
function l(){var p=sap.ushell.Container.getService("PluginManager");return p.loadPlugins("ContentProvider");}
C.prototype._getUnreferencedCatalogApplications=function(E){var u={};var A=Object.keys(E.applications).map(function(s){return E.applications[s]["sap.app"].id;}).reduce(function(i,s){i[s]=true;return i;},{});var c=E.catalogs;Object.keys(c).forEach(function(s){var d=c[s].payload.appDescriptors;d.map(function(o){return o.id;}).filter(function(f){return!A[f];}).forEach(function(B){if(!u.hasOwnProperty(s)){u[s]={};}u[s][B]=true;});});return u;};
C.prototype._formatUnreferencedApplications=function(c,u){return"One or more apps from "+c+" content provider are not listed among the applications section "+"of the extended site and will be discarded - "+Object.keys(u).map(function(s){var B=Object.keys(u[s]).map(function(U){return"'"+U+"'";});return"From catalog '"+s+"': "+B.join(", ");}).join("; ");};
C.prototype._removeUnreferencedApplications=function(E,u){Object.keys(E.catalogs).forEach(function(c){var o=E.catalogs[c].payload;var A=o.appDescriptors;o.appDescriptors=A.filter(function(d){return u[c]&&!u[c][d.id];});});};
C.prototype.getExtensionSites=function(){var t=this;var d=new q.Deferred();l().done(function(){var c=Object.keys(t._oContentProviderIndex),T=c.length;if(T===0){d.resolve([]);return;}var g=c.map(function(s,i){var o=t._oContentProviderIndex[s];var G;try{G=o.getSite();if(!G||typeof G.then!=="function"){throw"getSite does not return a Promise";}}catch(E){G=Promise.reject("call to getSite failed: "+E);}return G.then(function(s,f){var h=q.extend(true,{},f);var u=t._getUnreferencedCatalogApplications(f);if(Object.keys(u).length>0){var j=t._formatUnreferencedApplications(s,u);q.sap.log.error(j,null,S);t._removeUnreferencedApplications(h,u);}var k={providerId:s,success:true,site:h};d.notify(k);return k;}.bind(null,s),function(s,f){return{providerId:s,success:false,error:f};}.bind(null,s));});Promise.all(g).then(function(f){d.resolve(f);});});return d.promise();};
C.prototype.registerContentProvider=function(i,s){if(this._oContentProviderIndex[i]){q.sap.log.error("a content provider with ID '"+i+"' is already registered",null,S);return;}this._oContentProviderIndex[i]=s;q.sap.log.debug("ContentProvider '"+i+"' was registered",null,S);};
C.prototype._ensureCompleteSite=function(p){if(p.groups){var g=p.groups;Object.keys(g).forEach(function(k){if(!g[k]){delete g[k];}else{if(!g[k].payload){g[k].payload={};}if(!g[k].payload.links){g[k].payload.links=[];}if(!g[k].payload.tiles){g[k].payload.tiles=[];}if(!g[k].payload.groups){g[k].payload.groups=[];}}});}return p;};
C.prototype._ensureGroupsOrder=function(s){var g=O.get("site.payload.groupsOrder",s),G=s.groups,c,i=0;if(!g){return s;}while(i<g.length){c=g[i];if(!G[c]){g.splice(i,1);}else{i++;}}return s;};
C.prototype.getPlugins=(function(){var d,E,p;E=function(s,o){var c,n=Object.keys(o).length;if(n===0){return{};}if(!o.hasOwnProperty("Shell-plugin")){q.sap.log.error("Cannot find inbound with id 'Shell-plugin' for plugin '"+s+"'","plugin startup configuration cannot be determined correctly",S);return{};}if(n>1){q.sap.log.warning("Multiple inbounds are defined for plugin '"+s+"'","plugin startup configuration will be determined using "+"the signature of 'Shell-plugin' inbound.",S);}c=O.get("signature.parameters",o["Shell-plugin"])||{};return Object.keys(c).reduce(function(r,N){var D=O.get(N+".defaultValue.value",c);if(typeof D==="string"){r[N]=D;}return r;},{});};d=function(o){Object.keys(o).filter(function(s){return typeof o[s]==="object";}).forEach(function(s){o[s]=d(o[s]);});return Object.freeze(o);};return function(o){if(o!==undefined){p=o;}if(p){return q.when(p);}p={};return this.getSite().then(function(s){var A=s.applications||{};Object.keys(A).filter(function(c){return O.get("type",this[c]["sap.flp"])==="plugin";},A).forEach(function(c){var f,g,h=this[c],i={};if(!a(h["sap.platform.runtime"])){q.sap.log.error("Cannot find 'sap.platform.runtime' section for plugin '"+c+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else if(!a(h["sap.platform.runtime"].componentProperties)){q.sap.log.error("Cannot find 'sap.platform.runtime/componentProperties' "+"section for plugin '"+c+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else{i=h["sap.platform.runtime"].componentProperties;}p[c]={url:i.url,component:h["sap.ui5"].componentName};var j=O.get("crossNavigation.inbounds",h["sap.app"])||{};g=E(c,j);f=q.extend(i.config||{},g);if(f){p[c].config=f;}if(i.asyncHints){p[c].asyncHints=i.asyncHints;}},A);return d(p);},function(v){return v;});};})();
C.prototype._ensureStandardVizTypesPresent=function(s){if(!(s._version&&s._version.startsWith("3."))){return s;}if(!s.vizTypes){s.vizTypes={};}if(!s.vizTypes[b.STATIC_LAUNCHER]){s.vizTypes[b.STATIC_LAUNCHER]=q.sap.loadResource("sap/ushell/components/tiles/cdm/applauncher/manifest.json");}if(!s.vizTypes[b.DYNAMIC_LAUNCHER]){s.vizTypes[b.DYNAMIC_LAUNCHER]=q.sap.loadResource("sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json");}if(!s.vizTypes[b.CARD]){s.vizTypes[b.CARD]=q.sap.loadResource("sap/ushell/services/_CommonDataModel/vizTypeDefaults/cardManifest.json");}return s;};
C.hasNoAdapter=false;return C;},true);
sap.ui.predefine('sap/ushell/services/Configuration',["sap/ushell/Config"],function(C){"use strict";
function a(){this.attachSizeBehaviorUpdate=function(c){var d=C.on("/core/home/sizeBehavior");d.do(c);return{detach:d.off};};}
a.hasNoAdapter=true;return a;},false);
sap.ui.predefine('sap/ushell/services/ConfigurationDefaults',["sap/base/Log","sap/ushell/bootstrap/common/common.create.configcontract.core"],function(L,C){"use strict";
function a(A){var d=C.getDefaultConfiguration();this.getDefaults=function(c){var t=this;return A.getDefaultConfig().then(function(D){var r=c.reduce(function(o,p){var R;if(t._isValidConfigPath(p)){var P=p.split("/"),s=P.pop(),O=D;for(var i=0;i<P.length&&O;i++){O=O[P[i]];}if(O&&O.hasOwnProperty(s)){R={defaultValue:O[s]};}else if(d.hasOwnProperty(p)){R={defaultValue:d[p]};}}if(R&&R.hasOwnProperty("defaultValue")&&typeof R.defaultValue==="undefined"){R.defaultValue=null;}o[p]=R;return o;},{});return Promise.resolve(r);});};}
a.prototype._isValidConfigPath=function(p){if(!p||typeof p!=="string"){L.warning("Configuration path should be string");return false;}if(p.length===0){L.warning("Configuration path can not be empty string");return false;}if(p.charAt(0)==="/"){L.warning("Configuration path should not start with '/': "+p);return false;}return true;};
a.hasNoAdapter=false;return a;},false);
sap.ui.predefine('sap/ushell/services/Container',["sap/ushell/utils","sap/ushell/System","sap/ushell/Ui5ServiceFactory","sap/ushell/Ui5NativeServiceFactory","sap/ui/base/EventProvider","sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/Control","sap/ui/performance/Measurement","sap/ui/thirdparty/URI","sap/ui/util/Mobile","sap/base/util/uid"],function(u,S,U,a,E,b,C,M,c,d,f){"use strict";var g="sap.ushell.services.Container",h="sap.ushell.Container.dirtyState.",o={},j,p,F;
function k(){close();}
function r(){document.location="about:blank";}
function l(P){if(p&&p[P]){return p[P];}return"sap.ushell.adapters."+P;}
function m(e){return(j.services&&j.services[e])||{};}
function n(N,e,P,A){var i=m(N).adapter||{},t=i.module||l(e.getPlatform())+"."+N+"Adapter";function v(){return new(jQuery.sap.getObject(t))(e,P,{config:i.config||{}});}if(A){return new Promise(function(w,x){var y=t.replace(/\./g,"/");sap.ui.require([y],function(){try{w(v());}catch(z){x(z);}});});}jQuery.sap.require(t);return v();}
function q(A){var t=new E(),v=false,R=[],w={},x="sap.ushell.Container."+A.getSystem().getPlatform()+".remoteSystem.",y={},G,z,L=u.getLocalStorage(),B=new u.Map(),D="sap.ushell.Container."+A.getSystem().getPlatform()+".sessionTermination",H=this;this.cancelLogon=function(){if(this.oFrameLogonManager){this.oFrameLogonManager.cancelLogon();}};this.createRenderer=function(e,i){var K,N,O;M.start("FLP:Container.InitLoading","Initial Loading","FLP");u.setPerformanceMark("FLP - renderer created");e=e||j.defaultRenderer;if(!e){throw new Error("Missing renderer name");}O=(j.renderers&&j.renderers[e])||{};N=O.module||(e.indexOf(".")<0?"sap.ushell.renderers."+e+".Renderer":e);if(O.componentData&&O.componentData.config){K={config:O.componentData.config};}function P(){var Q=new(jQuery.sap.getObject(N))({componentData:K}),T=Q instanceof sap.ui.core.UIComponent?new sap.ui.core.ComponentContainer({component:Q,height:"100%",width:"100%"}):Q;if(!(T instanceof C)){throw new Error("Unsupported renderer type for name "+e);}T.placeAt=function(V,W){var X=V,Y="canvas",Z=document.body;if(V===Z.id){X=document.createElement("div");X.setAttribute("id",Y);X.classList.add("sapUShellFullHeight");switch(W){case"first":if(Z.firstChild){Z.insertBefore(X,Z.firstChild);break;}case"only":Z.innerHTML="";default:Z.appendChild(X);}V=Y;W="";}C.prototype.placeAt.call(this,V,W);};w[e]=Q;t.fireEvent("rendererCreated",{renderer:Q});return T;}if(i){return new Promise(function(Q,T){var V=N.replace(/\./g,"/");sap.ui.require([V],function(){try{Q(P());}catch(W){T(W);}});});}jQuery.sap.require(N);return P();};this.getRenderer=function(e){var i,K;e=e||j.defaultRenderer;if(e){i=w[e];}else{K=Object.keys(w);if(K.length===1){i=w[K[0]];}else{jQuery.sap.log.warning("getRenderer() - cannot determine renderer, because no default renderer is configured and multiple instances exist.",undefined,g);}}if(i&&i.isA("sap.ui.core.ComponentContainer")){return i.getComponentInstance();}return i;};this.DirtyState={CLEAN:"CLEAN",DIRTY:"DIRTY",MAYBE_DIRTY:"MAYBE_DIRTY",PENDING:"PENDING",INITIAL:"INITIAL"};this.getGlobalDirty=function(){var i,K=new jQuery.Deferred(),N=f(),O,P=0,Q=this.DirtyState.CLEAN;function T(){if(P===0||Q===H.DirtyState.DIRTY){K.resolve(Q);jQuery.sap.log.debug("getGlobalDirty() Resolving: "+Q,null,"sap.ushell.Container");}}function V(W){if(W.key.indexOf(h)===0&&W.newValue!==H.DirtyState.INITIAL&&W.newValue!==H.DirtyState.PENDING){jQuery.sap.log.debug("getGlobalDirty() Receiving event key: "+W.key+" value: "+W.newValue,null,"sap.ushell.Container");if(W.newValue===H.DirtyState.DIRTY||W.newValue===H.DirtyState.MAYBE_DIRTY){Q=W.newValue;}P-=1;T();}}try{L.setItem(N,"CHECK");L.removeItem(N);}catch(e){jQuery.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.Container");return K.resolve(this.DirtyState.MAYBE_DIRTY).promise();}if(G){throw new Error("getGlobalDirty already called!");}G=K;window.addEventListener("storage",V);K.always(function(){window.removeEventListener("storage",V);G=undefined;});for(i=L.length-1;i>=0;i-=1){O=L.key(i);if(O.indexOf(h)===0){if(L.getItem(O)==="PENDING"){L.removeItem(O);jQuery.sap.log.debug("getGlobalDirty() Cleanup of unresolved 'PENDINGS':"+O,null,"sap.ushell.Container");}else{P+=1;u.localStorageSetItem(O,this.DirtyState.PENDING,true);jQuery.sap.log.debug("getGlobalDirty() Requesting status for: "+O,null,"sap.ushell.Container");}}}T();setTimeout(function(){if(K.state()!=="resolved"){K.resolve("MAYBE_DIRTY");jQuery.sap.log.debug("getGlobalDirty() Timeout reached, - resolved 'MAYBE_DIRTY'",null,"sap.ushell.Container");}},P*2000);return K.promise();};this.getLogonSystem=function(){return A.getSystem();};this.getUser=function(){return A.getUser();};this.getDirtyFlag=function(){for(var i=0;i<R.length;i++){v=v||R[i].call();}return v;};this.setDirtyFlag=function(i){v=i;};this.sessionKeepAlive=function(){if(A.sessionKeepAlive){A.sessionKeepAlive();}};this.registerDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function");}R.push(e);};this.deregisterDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function");}var K=-1;for(var i=R.length-1;i>=0;i--){if(R[i]===e){K=i;break;}}if(K===-1){return;}R.splice(K,1);};this.getService=function(e,P,i){var K={},N,O,Q,T,V,W;function X($){var a1=new jQuery.Deferred();if(!$){throw new Error("Missing system");}a1.resolve(n(e,$,P));sap.ushell.Container.addRemoteSystem($);return a1.promise();}if(!e){throw new Error("Missing service name");}if(e.indexOf(".")>=0){throw new Error("Unsupported service name");}V=m(e);N=V.module||"sap.ushell.services."+e;O=N+"/"+(P||"");W={config:V.config||{}};function Y($,T){K.createAdapter=X;return new $(T,K,P,W);}function Z(Q,i){var $;if(Q.hasNoAdapter){$=new Q(K,P,W);}else{T=n(e,A.getSystem(),P,i);if(i){return T.then(function(a1){var $=Y(Q,a1);B.put(O,$);return $;});}$=Y(Q,T);}B.put(O,$);return i?Promise.resolve($):$;}if(!B.containsKey(O)){if(i){return new Promise(function($){sap.ui.require([N.replace(/[.]/g,"/")],function(a1){$(Z(a1,true));});});}Q=sap.ui.requireSync(N.replace(/[.]/g,"/"));return Z(Q);}if(i){return Promise.resolve(B.get(O));}return B.get(O);};this.getServiceAsync=function(e,P){return Promise.resolve(this.getService(e,P,true));};function I(){var K,N,i,O;for(i=L.length-1;i>=0;i-=1){O=L.key(i);if(O.indexOf(x)===0){try{K=O.substring(x.length);N=JSON.parse(L.getItem(O));y[K]=new S(N);}catch(e){L.removeItem(O);}}}return y;}function J(){if(typeof OData==="undefined"){return;}function e(i,K,N){jQuery.sap.log.warning(i,null,"sap.ushell.Container");if(N){setTimeout(N.bind(null,i),5000);}return{abort:function(){return;}};}OData.read=function(i,K,N){return e("OData.read('"+(i&&i.Uri?i.requestUri:i)+"') disabled during logout processing",K,N);};OData.request=function(i,K,N){return e("OData.request('"+(i?i.requestUri:"")+"') disabled during logout processing",K,N);};}this.addRemoteSystem=function(e){var i=e.getAlias(),O=y[i];if(this._isLocalSystem(e)){return;}if(O){if(O.toString()===e.toString()){return;}jQuery.sap.log.warning("Replacing "+O+" by "+e,null,"sap.ushell.Container");}else{jQuery.sap.log.debug("Added "+e,null,"sap.ushell.Container");}y[i]=e;u.localStorageSetItem(x+i,e);};this._isLocalSystem=function(e){var i=e.getAlias();if(i&&i.toUpperCase()==="LOCAL"){return true;}var K=new c(u.getLocationHref()),N=this.getLogonSystem().getClient()||"";if(e.getBaseUrl()===K.origin()&&e.getClient()===N){return true;}return false;};this.addRemoteSystemForServiceUrl=function(e){var i,K={baseUrl:";o="};if(!e||e.charAt(0)!=="/"||e.indexOf("//")===0){return;}i=/^[^?]*;o=([^\/;?]*)/.exec(e);if(i&&i.length>=2){K.alias=i[1];}e=e.replace(/;[^\/?]*/g,"");if(/^\/sap\/(bi|hana|hba)\//.test(e)){K.platform="hana";K.alias=K.alias||"hana";}else if(/^\/sap\/opu\//.test(e)){K.platform="abap";}if(K.alias&&K.platform){this.addRemoteSystem(new S(K));}};this.attachLogoutEvent=function(e){t.attachEvent("Logout",e);};this.detachLogoutEvent=function(e){t.detachEvent("Logout",e);};this.attachRendererCreatedEvent=function(e){t.attachEvent("rendererCreated",e);};this.detachRendererCreatedEvent=function(e){t.detachEvent("rendererCreated",e);};this.defaultLogout=function(){var i=new jQuery.Deferred();function K(){A.logout(true).always(function(){L.removeItem(D);i.resolve();});}function N(){if(t.fireEvent("Logout",true)){K();}else{setTimeout(K,1000);}}function O(){var y,P=[];if(z){window.removeEventListener("storage",z);}u.localStorageSetItem(D,"pending");H._suppressOData();y=H._getRemoteSystems();Object.keys(y).forEach(function(Q){try{P.push(n("Container",y[Q]).logout(false));}catch(e){jQuery.sap.log.warning("Could not create adapter for "+Q,e.toString(),"sap.ushell.Container");}L.removeItem(x+Q);});jQuery.when.apply(jQuery,P).done(N);}if(typeof A.addFurtherRemoteSystems==="function"){A.addFurtherRemoteSystems().always(O);}else{O();}return i.promise();};this.logout=this.defaultLogout;this.registerLogout=function(e){this.logout=e;};this.setLogonFrameProvider=function(e){if(this.oFrameLogonManager){this.oFrameLogonManager.logonFrameProvider=e;}};this.setXhrLogonTimeout=function(P,T){if(this.oFrameLogonManager){this.oFrameLogonManager.setTimeout(P,T);}};this.getFLPConfig=function(){var H=this,P=new Promise(function(e,i){var K={URL:H.getFLPUrl()};if(o.CDMPromise){o.CDMPromise.then(function(N){N.getSite().then(function(O){K.scopeId=O.site.identification.id;e(K);});});}else{e(K);}});return P;};this.getFLPUrl=function(i){var e=u.getLocationHref(),K=e.indexOf(this.getService("URLParsing").getShellHash(e));if(K===-1||i===true){return e;}return e.substr(0,K-1);};this._closeWindow=k;this._redirectWindow=r;this._getRemoteSystems=I;this._suppressOData=J;sap.ui.getCore().getEventBus().subscribe("sap.ushell.Container","addRemoteSystemForServiceUrl",function(e,i,K){H.addRemoteSystemForServiceUrl(K);});if(typeof A.logoutRedirect==="function"){z=function(e){function i(){H._closeWindow();H._redirectWindow();}if(sap.ushell.Container!==H){return;}if(e.key.indexOf(x)===0&&e.newValue&&e.newValue!==L.getItem(e.key)){u.localStorageSetItem(e.key,e.newValue);}if(e.key===D){if(e.newValue==="pending"){H._suppressOData();if(t.fireEvent("Logout",true)){i();}else{setTimeout(i,1000);}}}};window.addEventListener("storage",z);}this._getFunctionsForUnitTest=function(){return{createAdapter:n};};}
function s(e,A){e.forEach(function(i){var t=U.createServiceFactory(i,A);b.register("sap.ushell.ui5service."+i,t);});}
function _(e){e.forEach(function(i){var t=a.createServiceFactory(i);b.register("sap.ushell.ui5service."+i,t);});}
sap.ushell.bootstrap=function(P,A){var e,D=new jQuery.Deferred();d.init();if(sap.ushell.Container!==undefined){e=new Error("Unified shell container is already initialized - cannot initialize twice.\nStacktrace of first initialization:"+F);jQuery.sap.log.error(e,e.stack,g);throw e;}F=(new Error()).stack;j=jQuery.extend({},true,window["sap-ushell-config"]||{});p=A;if(typeof window["sap.ushell.bootstrap.callback"]==="function"){setTimeout(window["sap.ushell.bootstrap.callback"]);}if(j.modulePaths){Object.keys(j.modulePaths).forEach(function(t){jQuery.sap.registerModulePath(t,j.modulePaths[t]);});}s(["Personalization","URLParsing","CrossApplicationNavigation"],true);s(["Configuration"],false);_(["CardNavigation","CardUserRecents","CardUserFrequents"]);var i=new S({alias:"",platform:j.platform||P});n("Container",i,null,true).then(function(t){t.load().then(function(){function v(){var x,y;var z=window["sap-ushell-config"];if(!z||!z.services){return false;}x=z.services.PluginManager;y=x&&x.config;return y&&y.loadPluginsFromSite;}sap.ushell.Container=new q(t);var w=[sap.ushell.Container.getServiceAsync("PluginManager")];if(v()){o.CDMPromise=sap.ushell.Container.getServiceAsync("CommonDataModel");w.push(o.CDMPromise);}Promise.all(w).then(function(x){var y=x[0],z=x[1];var B=z?z.getPlugins():jQuery.when({});B.then(function(G){var H=jQuery.extend(true,{},j.bootstrapPlugins,G);y.registerPlugins(H);});}).then(function(){if(u.hasFLPReadyNotificationCapability()){u.getPrivateEpcm().doEventFlpReady();}sap.ui.require(["sap/ushell/Config"],function(x){if(x.last("/core/darkMode/enabled")){sap.ushell.Container.getService("DarkModeSupport").setup();}});});D.resolve();});});return D.promise();};
});
sap.ui.predefine('sap/ushell/services/ContentExtension',[],function(){"use strict";var S="sap.ushell.services.ContentExtension";
function C(a,c,p,s){}
C.Type={SITE:"site"};
C.prototype.registerContentProvider=function(p){var c;function l(E){jQuery.sap.log.error("An error occurred when calling #registerContentProvider",E,S);}if(p===null||typeof p!=="object"||Object.keys(p).length===0){l("parameters must be provided and must be a non-empty object");return;}if(typeof p.id!=="string"||p.id.length===0){l("id parameter should be a non-empty string");return;}if(typeof p.provider!=="object"||p.provider===null){l("provider member must be of type 'object' and not null");return;}if(p.type===C.Type.SITE){if(typeof p.provider.getSite!=="function"){l("Provider must expose a getSite member of type 'function', got '"+(typeof p.provider.getSite)+"' instead");return;}try{c=sap.ushell.Container.getService("CommonDataModel");}catch(e){l(e+"");}if(c){c.registerContentProvider(p.id,p.provider);}return;}l("Unknown type parameter. It should be one should be one of ["+Object.keys(C.Type).map(function(t){return"ContentExtension."+t;}).join(", ")+"] but '"+p.type+"' was provided");};
C.hasNoAdapter=true;return C;},true);
sap.ui.predefine('sap/ushell/services/ContentExtensionAdapterFactory',["sap/ushell/Config","sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig","sap/ui/thirdparty/jquery"],function(C,a,q){"use strict";var b={};
b.getAdapters=function(c){var d=b._getConfigAdapters(c);var A={};var e=d.map(function(o){var E=C.last(o.configSwitch);if(!E){return Promise.resolve();}var f=b._getAdapter(o);f.then(function(g){A[o.contentProviderName]=g;});return f;});return new Promise(function(r){q.when.apply(q,e).then(function(){r(A);});});};
b._getConfigAdapters=function(c){if(!c){c=a._getConfigAdapters();}if(!Array.isArray(c)){c=[c];}return c;};
b._getAdapter=function(c){var d=new q.Deferred();var A=c.configHandler?c.configHandler():{};var m=c.adapter.replace(/\./g,"/");sap.ui.require([m],function(){var i=b._getAdapterInstance(c.adapter,c.system,null,A);d.resolve(i);});return d.promise();};
b._getAdapterInstance=function(A,s,p,c){var d=q.sap.getObject(A);if(d){var D={config:c||{}};return new d(s,p,D);}return null;};
return b;});
sap.ui.predefine('sap/ushell/services/CrossApplicationNavigation',["sap/ushell/services/AppConfiguration","sap/ushell/services/_CrossApplicationNavigation/utils","sap/ushell/utils/type","sap/ushell/TechnicalParameters","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/merge","sap/ushell/utils","sap/ushell/ApplicationType"],function(a,u,t,T,A,i,U,q,O,m,b,c){"use strict";
function C(o,p,s){var d,S;if(s&&s.config){S=s.config;}function g(v,f){var r,h,j;if(typeof v!=="string"&&!i(v)&&v!==undefined){q.sap.log.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined;}if(v===undefined){return undefined;}var n;if(f){if(typeof f.getComponentData!=="function"||!i(f.getComponentData())||!f.getComponentData().startupParameters||!i(f.getComponentData().startupParameters)){q.sap.log.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.CrossApplicationNavigation");}else{j=f.getComponentData().startupParameters;if(j.hasOwnProperty("sap-system")){h=j["sap-system"][0];}if(j.hasOwnProperty("sap-ushell-next-navmode")){n=j["sap-ushell-next-navmode"][0];}}}else{r=a.getCurrentApplication();if(r&&r["sap-system"]){h=r["sap-system"];}else if(r&&r.url){h=new U(r.url).get("sap-system");}if(r&&r["sap-ushell-next-navmode"]){n=r["sap-ushell-next-navmode"];}else if(r&&r.url){n=new U(r.url).get("sap-ushell-next-navmode");}}var I=u._injectParameters({type:t,inject:{"sap-system":h,"sap-ushell-navmode":n},args:v});return I;}function e(v){var f,h,j;if(localStorage&&localStorage["sap-ushell-enc-test"]==="false"){return v;}if(!S||!S["sap-ushell-enc-test"]){if(localStorage&&localStorage["sap-ushell-enc-test"]!=="true"){return v;}}if(typeof v!=="string"&&!i(v)&&v!==undefined){q.sap.log.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined;}if(v===undefined){return undefined;}if(i(v)){h=q.extend(true,{},v);if(h.target&&h.target.shellHash){if(typeof h.target.shellHash==="string"){if(h.target.shellHash!=="#"&&h.target.shellHash!==""){h.target.shellHash=e(h.target.shellHash);}}return h;}h.params=h.params||{};h.params["sap-ushell-enc-test"]=["A B%20C"];return h;}j=v;if(!/[?&]sap-system=/.test(j)){f=(j.indexOf("?")>-1)?"&":"?";j+=f+"sap-ushell-enc-test="+encodeURIComponent("A B%20C");}return j;}this._extractInnerAppRoute=function(I){var f=this,P,h;if(typeof I==="string"){P=I.split("&/");h=P.shift();return{intent:h,innerAppRoute:P.length>0?"&/"+P.join("&/"):""};}if(Object.prototype.toString.apply(I)==="[object Object]"){var j=O.get("target.shellHash",I);if(typeof j==="string"){var r=f._extractInnerAppRoute(j);I.target.shellHash=r.intent;return{intent:I,innerAppRoute:r.innerAppRoute};}if(I.hasOwnProperty("appSpecificRoute")){var v=I.appSpecificRoute;delete I.appSpecificRoute;var k=typeof v==="string"&&v.indexOf("&/")!==0&&v.length>0;return{innerAppRoute:k?"&/"+v:v,intent:I};}return{intent:I,innerAppRoute:""};}q.sap.log.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:I};};this._injectInnerAppRoute=function(I,f){var h,j=this;if(!f){return I;}if(typeof I==="string"){return I+f;}if(Object.prototype.toString.apply(I)==="[object Object]"){h=O.get("target.shellHash",I);if(typeof h==="string"){I.target.shellHash=j._injectInnerAppRoute(h,f);return I;}I.appSpecificRoute=f;}return I;};this.hrefForExternal=function(f,h,j){var k,E,I;if(sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){k=m({},f);E=this._extractInnerAppRoute(k);I=E.intent;u.addXAppStateFromParameter(I,"sap-xapp-state-data");k=g(I,h);k=u._injectStickyParameters({args:k,appLifeCycle:A,technicalParameters:T,type:t});k=e(k);k=this._injectInnerAppRoute(k,E.innerAppRoute);return sap.ushell.Container.getService("ShellNavigation").hrefForExternal(k,undefined,h,j);}q.sap.log.debug("Shell not available, no Cross App Navigation");if(j){return(new q.Deferred()).resolve("").promise();}return"";};this.expandCompactHash=function(h){return sap.ushell.Container.getService("NavTargetResolution").expandCompactHash(h);};this.backToPreviousApp=function(){if(this.isInitialNavigation()){this.toExternal({target:{shellHash:"#"},writeHistory:false});return;}this.historyBack();};this.historyBack=function(f){var h=-1;if(f&&typeof f==="number"){if(f<=0){q.sap.log.warning("historyBack called with an argument <= 0 and will result in a forward navigation or refresh","expected was an argument > 0","sap.ushell.services.CrossApplicationNavigation#historyBack");}h=f*-1;}window.history.go(h);};this.isInitialNavigation=function(){var f=sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation");if(!f){q.sap.log.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true;}var I=f.isInitialNavigation();if(typeof I==="undefined"){return true;}return I;};this.toExternal=function(f,h){var j,E,I,w=f.writeHistory;if(sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){j=m({},f);this._processShellHashWithParams(j);E=this._extractInnerAppRoute(j);I=E.intent;u.addXAppStateFromParameter(I,"sap-xapp-state-data");j=g(I,h);j=u._injectStickyParameters({args:j,appLifeCycle:A,technicalParameters:T,type:t});j=e(j);delete j.writeHistory;j=this._injectInnerAppRoute(j,E.innerAppRoute);sap.ushell.Container.getService("ShellNavigation").toExternal(j,h,w);return;}q.sap.log.debug("Shell not avialable, no Cross App Navigation");return;};this.hrefForAppSpecificHash=function(f){if(sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){return sap.ushell.Container.getService("ShellNavigation").hrefForAppSpecificHash(f);}q.sap.log.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(f);};this.getPrimaryIntent=function(f,P){var Q={},h,r=/^#\w+-displayFactSheet(?:$|\?.)/;Q.tags=["primaryAction"];Q.semanticObject=f;if(P){Q.params=P;}return this.getLinks(Q).then(function(l){if(l.length===0){delete Q.tags;Q.action="displayFactSheet";h=function(L,j){var E;if(L.intent===j.intent){return 0;}E=r.test(L.intent)^r.test(j.intent);if(E){return r.test(L.intent)?-1:1;}return L.intent<j.intent?-1:1;};return this.getLinks(Q);}h=function(L,j){if(L.intent===j.intent){return 0;}return L.intent<j.intent?-1:1;};return l;}.bind(this)).then(function(l){return l.length===0?null:l.sort(h)[0];});};this.getSemanticObjectLinks=function(f,P,I,h,j,k){var l,n,E;l=u._injectStickyParameters({args:{params:P},appLifeCycle:A,technicalParameters:T,type:t});l=g(l,h).params;l=e({params:l}).params;n=sap.ushell.Container.getService("NavTargetResolution");var v;if(Array.isArray(f)){v=[];f.forEach(function(r){v.push([{semanticObject:r[0],params:r[1],ignoreFormFactor:!!r[2],ui5Component:r[3],appStateKey:r[4],compactIntents:!!(r[5])}]);});}else{v={semanticObject:f,params:l,ignoreFormFactor:I,ui5Component:h,appStateKey:j,compactIntents:!!k};}E=b.invokeUnfoldingArrayArguments(n.getLinks.bind(n),[v]);return E;};this.getLinks=function(v){var E;E=b.invokeUnfoldingArrayArguments(this._getLinks.bind(this),[v]);return E;};this._getLinks=function(n){var N,P,f,h=sap.ushell.Container.getService("NavTargetResolution");if(typeof n==="undefined"){n={};}N=q.extend(true,{},n);N.compactIntents=!!N.compactIntents;N.action=N.action||undefined;N.paramsOptions=u.extractGetLinksParameterOptions(N.params);N=u._injectStickyParameters({args:N,appLifeCycle:A,technicalParameters:T,type:t});P=N.params?u.extractGetLinksParameterDefinition(N.params):N.params;f=g({params:P},N.ui5Component).params;f=e({params:f}).params;if(N.appStateKey){f["sap-xapp-state"]=[N.appStateKey];delete N.appStateKey;}N.params=f;return h.getLinks(N);};this.getDistinctSemanticObjects=function(){var f=sap.ushell.Container.getService("NavTargetResolution");return f.getDistinctSemanticObjects();};this.isIntentSupported=function(I,f){var D=new q.Deferred(),h={},j=I.map(function(k){var l=g(k,f);h[l]=k;return l;});sap.ushell.Container.getService("NavTargetResolution").isIntentSupported(j).done(function(k){var l={};Object.keys(k).forEach(function(K){l[h[K]]=k[K];});D.resolve(l);}).fail(D.reject.bind(D));return D.promise();};this.isNavigationSupported=function(I,f){var h=I.map(function(j){return g(j,f);});return sap.ushell.Container.getService("NavTargetResolution").isNavigationSupported(h);};this.isUrlSupported=function(f){var D=new q.Deferred(),h,H;if(typeof f!=="string"){D.reject();return D.promise();}h=sap.ushell.Container.getService("URLParsing");if(h.isIntentUrl(f)){H=h.getHash(f);this.isIntentSupported(["#"+H]).done(function(r){if(r["#"+H]&&r["#"+H].supported){D.resolve();}else{D.reject();}}).fail(function(){D.reject();});}else{D.resolve();}return D.promise();};this.createComponentInstance=function(I,f,h){var j,k,l,n;if(!f){f={};}else{n=Object.keys(f).length;if(n>1||(n===1&&!f.componentData)){throw"`oConfig` argument should either be an empty object or contain only the `componentData` property.";}}if(f.componentData){delete f.componentData.startupParameters;delete f.componentData.config;delete f.componentData["sap-xapp-state"];}j=sap.ushell.Container;k=j.getService("URLParsing");l=k.constructShellHash(k.parseShellHash(I));if(!l){return new q.Deferred(function(D){D.reject("Navigation intent invalid!");}).promise();}return j.getService("NavTargetResolution").resolveHashFragment("#"+l).then(function(r){if(r.applicationType!==c.URL.type&&!(/^SAPUI5\.Component=/.test(r.additionalInformation))){return new q.Deferred(function(D){D.reject("The resolved target mapping is not of type UI5 component.");}).promise();}r=q.extend(true,{},r,f);if(!r.ui5ComponentName&&r.additionalInformation){r.ui5ComponentName=r.additionalInformation.replace(/^SAPUI5\.Component=/,"");}return new q.Deferred(function(D){var v=j.getService("Ui5ComponentLoader");if(h){h.runAsOwner(function(){w(r);});}else{w(r);}function w(x){x.loadDefaultDependencies=false;v.createComponent(x).then(function(y){D.resolve(y.componentHandle.getInstance());},function(E){E=E||"";q.sap.log.error("Cannot create UI5 component: "+E,E.stack,"sap.ushell.services.CrossApplicationNavigation");D.reject(E);});}}).promise();});};this.createEmptyAppState=function(f,h,P,j){if(!d){d=sap.ushell.Container.getService("AppState");}if(!(f instanceof sap.ui.core.UIComponent)){throw new Error("oAppComponent passed must be a UI5 Component");}return d.createEmptyAppState(f,h,P,j);};this.getStartupAppState=function(f){this._checkComponent(f);var h=f.getComponentData()&&f.getComponentData()["sap-xapp-state"]&&f.getComponentData()["sap-xapp-state"][0];return this.getAppState(f,h);};this._checkComponent=function(f){if(!(f instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}};this.getAppState=function(f,h){var j,D=new q.Deferred();this._checkComponent(f);if(!d){d=sap.ushell.Container.getService("AppState");}if(typeof h!=="string"){if(h!==undefined){q.sap.log.error("Illegal Argument sAppStateKey ");}setTimeout(function(){j=d.createEmptyUnmodifiableAppState(f);D.resolve(j);},0);return D.promise();}return d.getAppState(h);};this.getAppStateData=function(f){return b.invokeUnfoldingArrayArguments(this._getAppStateData.bind(this),[f]);};this._getAppStateData=function(f){var D=new q.Deferred();if(!d){d=sap.ushell.Container.getService("AppState");}if(typeof f!=="string"){if(f!==undefined){q.sap.log.error("Illegal Argument sAppStateKey ");}setTimeout(function(){D.resolve(undefined);},0);}else{d.getAppState(f).done(function(h){D.resolve(h.getData());}).fail(D.resolve.bind(D,undefined));}return D.promise();};this.saveMultipleAppStates=function(f){var r=[],D=new q.Deferred();f.forEach(function(h){r.push(h.save());});q.when.apply(this,r).done(function(){D.resolve(r);}).fail(function(){D.reject("save failed");});return D.promise();};this._processShellHashWithParams=function(f){var h,H;if(f&&f.processParams===true&&f.target&&f.target.shellHash&&f.params){h=sap.ushell.Container.getService("URLParsing");H=h.parseShellHash(f.target.shellHash);f.target={semanticObject:H.semanticObject,action:H.action,contextRaw:H.contextRaw};f.appSpecificRoute=H.appSpecificRoute;f.params=Object.assign({},f.params,H.params);}};this.getSupportedAppStatePersistencyMethods=function(){if(!d){d=sap.ushell.Container.getService("AppState");}return d.getSupportedPersistencyMethods();};this.makeStatePersistent=function(k,P,f){if(!d){d=sap.ushell.Container.getService("AppState");}return d.makeStatePersistent(k,P,f);};}
C.hasNoAdapter=true;return C;},true);
sap.ui.predefine('sap/ushell/services/DarkModeSupport',["sap/base/Log","sap/base/util/UriParameters","sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub"],function(L,U,D,C,E){"use strict";var P="(prefers-color-scheme: dark)";
function a(){this.channel=E.createChannel({"mode":undefined});this.darkMediaQueryList=window.matchMedia(P);this.doables=[];this.themeChangedCallback=null;this.darkMediaQueryListListener=null;}
a.Mode={LIGHT:"light",DARK:"dark"};
a.prototype.setup=function(){if(this.initialized){return;}this.initialized=true;this.themeChangedCallback=function(){this.channel.emit("/mode",this.getCurrentThemeMode());}.bind(this);sap.ui.getCore().attachThemeChanged(this.themeChangedCallback);this.themeChangedCallback();if(this.canAutomaticallyToggleDarkMode()){this.enableDarkModeBasedOnSystem();}};
a.prototype.destroy=function(){this.channel.emit("/mode",null);this.doables.forEach(function(d){d.off();});this.doables=[];if(this.initialized){sap.ui.getCore().detachThemeChanged(this.themeChangedCallback);this.themeChangedCallback=null;this.disableDarkModeBasedOnSystem();this.initialized=false;}};
a.prototype.attachModeChanged=function(c){var d=this.channel.on("/mode").do(function(m){c(m);});this.doables.push(d);};
a.prototype.canAutomaticallyToggleDarkMode=function(){var i=this.darkMediaQueryList.media===P;return i&&!U.fromURL(window.location.href).has("sap-theme");};
a.prototype.isThemeSupportDarkMode=function(t){t=t||this._getCurrentTheme();return!!this._findSupportedThemePair(t);};
a.prototype._toggleDarkModeBasedOnSystemColorScheme=function(){var c=this._getCurrentTheme();if(this.darkMediaQueryList&&this.isThemeSupportDarkMode(c)){var s=this._findSupportedThemePair(c),i=this.darkMediaQueryList.matches;var t=i?s.dark:s.light;sap.ushell.Container.getUser().applyTheme(t);}};
a.prototype._applyDefaultUserTheme=function(){var u=sap.ushell.Container.getUser();if(u.constants&&u.constants.themeFormat){u.applyTheme(u.getTheme(u.constants.themeFormat.ORIGINAL_THEME));}};
a.prototype.toggleModeChange=function(){var c=this._getCurrentTheme(),s=this._findSupportedThemePair(c);if(s){var t=c===s.light?s.dark:s.light;sap.ushell.Container.getUser().applyTheme(t);}};
a.prototype.enableDarkModeBasedOnSystem=function(){if(!this.initialized){L.warning("Automatic dark mode detection cannot be enabled, because the DarkModeSupport sevice was not setup.");return;}if(!this.canAutomaticallyToggleDarkMode()){L.warning("Automatic dark mode detection cannot be enabled, because your browser does not support dark mode detection");return;}if(this.darkMediaQueryListListener){L.warning("Automatic dark mode detection was already enabled");return;}if(D.support.matchmedialistener){this.darkMediaQueryListListener=this._toggleDarkModeBasedOnSystemColorScheme.bind(this);this.darkMediaQueryList.addListener(this.darkMediaQueryListListener);}this._toggleDarkModeBasedOnSystemColorScheme();};
a.prototype.disableDarkModeBasedOnSystem=function(){if(this.darkMediaQueryListListener){this.darkMediaQueryList.removeListener(this.darkMediaQueryListListener);this.darkMediaQueryListListener=null;}this._applyDefaultUserTheme();};
a.prototype.getCurrentThemeMode=function(){var c=this._getCurrentTheme(),s=this._findSupportedThemePair(c);if(s){return c===s.light?a.Mode.LIGHT:a.Mode.DARK;}return null;};
a.prototype._getCurrentTheme=function(){return sap.ui.getCore().getConfiguration().getTheme();};
a.prototype._findSupportedThemePair=function(c){var s=C.last("/core/darkMode/supportedThemes");return s.filter(function(S){return S.dark===c||S.light===c;})[0];};
a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/EndUserFeedback',["sap/ushell/Config","sap/ui/thirdparty/URI","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery"],function(C,U,O,q){"use strict";
function g(p,o){return O.get(p,o)||"";}
function E(a){this.sendFeedback=function(e){var u,n,A,s,o,f,b,c,d;u=g("clientContext.navigationData.applicationInformation.url",e);n=g("clientContext.navigationData.navigationHash",e);A=g("clientContext.navigationData.applicationInformation.additionalInformation",e);s=g("clientContext.navigationData.applicationInformation.applicationType",e);f=g("clientContext.navigationData.formFactor",e);b=g("clientContext.userDetails.userId",e);c=g("clientContext.userDetails.eMail",e);d=e.feedbackText||"";o={feedbackText:d.slice(0,2000),ratings:e.ratings||{},additionalInformation:A,applicationType:s,url:u?this.getPathOfURL(u):"",navigationIntent:n.replace(/\?.*$/,""),formFactor:f,isAnonymous:e.isAnonymous||false,userId:e.isAnonymous?"":b,eMail:e.isAnonymous?"":c};return a.sendFeedback(o);};this.getLegalText=function(){return a.getLegalText();};this.isEnabled=function(){var d=new q.Deferred(),i=C.last("/core/extension/EndUserFeedback");if(!i){window.setTimeout(function(){d.reject();},0);return d.promise();}a.isEnabled().done(function(){d.resolve();}).fail(function(){d.reject();});return d.promise();};this.getPathOfURL=function(u){var o=new U(u);return o.pathname();};}
E.hasNoAdapter=false;return E;},true);
sap.ui.predefine('sap/ushell/services/LaunchPage',["sap/ushell/services/ContentExtensionAdapterFactory","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/Config"],function(C,q,r,A,a){"use strict";
function L(o){var t=this,T=[],b=C.getAdapters();this.oAdapters={"default":o};b.then(function(c){q.extend(this.oAdapters,c);}.bind(this));this.getGroups=function(){if(a.last("/core/spaces/enabled")){return new q.Deferred().resolve([]).promise();}var d=new q.Deferred();b.then(function(){var G=Object.keys(t.oAdapters).map(function(s){return t._getAdapter(s).getGroups();});q.when.apply(q,G).done(function(){var c=[].concat.apply([],arguments);d.resolve(c);}).fail(function(){q.sap.log.error("getGroups failed");});});return d.promise();};this.getGroupsForBookmarks=function(G){var d=q.Deferred();this.getGroups().then(function(c){this.getDefaultGroup().then(function(D){if(c.length>0){c=c.filter(function(e){if(G!==undefined&&G===true){return this.isGroupVisible(e);}return(!this.isGroupLocked(e)&&this.isGroupVisible(e));}.bind(this));c=c.map(function(e){return{title:(e===D&&r.i18n.getText("my_group"))||this.getGroupTitle(e),object:e};}.bind(this));}d.resolve(c);}.bind(this),function(e){q.sap.log.error("getGroupsForBookmarks - getDefaultGroup - failed: "+e.message);});}.bind(this),function(e){q.sap.log.error("getGroupsForBookmarks - getGroups - failed: "+e.message);});return d.promise();};this.getDefaultGroup=function(){var p=this._getAdapter().getDefaultGroup();p.fail(function(){q.sap.log.error("getDefaultGroup failed");});return p;};this.getGroupTitle=function(G){return this._getAdapter(G.contentProvider).getGroupTitle(G);};this.getGroupId=function(G){return this._getAdapter(G.contentProvider).getGroupId(G);};this.getGroupById=function(G){var D=q.Deferred(),t=this;this.getGroups().then(function(c){c=q.grep(c,function(e){return t.getGroupId(e)===G;});D.resolve((c&&c.length>0?c[0]:undefined));});return D.promise();};this.getGroupTiles=function(G){return this._getAdapter(G.contentProvider).getGroupTiles(G);};this.getTilesByGroupId=function(G){var D=q.Deferred(),t=this;this.getGroupById(G).then(function(c){if(c){var d=t._getAdapter(c.contentProvider).getGroupTiles(c);if(d){d=d.map(function(e){return{id:t.getTileId(e),title:t.getTileTitle(e),subtitle:t.getCatalogTilePreviewSubtitle(e),url:t.getCatalogTileTargetURL(e),icon:t.getCatalogTilePreviewIcon(e),groupId:G};});}else{d=[];}D.resolve(d);}else{D.resolve([]);}});return D.promise();};this.getLinkTiles=function(G){return this._getAdapter(G.contentProvider).getLinkTiles(G);};this.addGroupAt=function(s,i){var p,c=i,o=this._getAdapter();if(o.addGroupAt){p=o.addGroupAt(s,i);p.fail(function(){q.sap.log.error("addGroup "+s+" failed");});}else{var d=new q.Deferred();p=o.addGroup(s);p.done(function(n){var m=this.moveGroup(n,c),e=n;m.done(function(){d.resolve(e);});m.fail(function(){d.reject();});}.bind(this));p.fail(function(){q.sap.log.error("addGroup "+s+" failed");d.reject();});return d.promise();}return p;};this.addGroup=function(s){var p=this._getAdapter().addGroup(s);p.fail(function(){q.sap.log.error("addGroup "+s+" failed");});return p;};this.removeGroup=function(G,i){var p=this._getAdapter(G.contentProvider).removeGroup(G,i);p.fail(function(){q.sap.log.error("Fail to removeGroup "+t.getGroupTitle(G));});return p;};this.resetGroup=function(G,i){var p=this._getAdapter(G.contentProvider).resetGroup(G,i);p.fail(function(){q.sap.log.error("Fail to resetGroup "+t.getGroupTitle(G));});return p;};this.isGroupRemovable=function(G){return this._getAdapter(G.contentProvider).isGroupRemovable(G);};this.isGroupLocked=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupLocked==="function"){return o.isGroupLocked(G);}return false;};this.isGroupFeatured=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupFeatured==="function"){return o.isGroupFeatured(G);}return false;};this.moveGroup=function(G,n){var p=this._getAdapter(G.contentProvider).moveGroup(G,n);p.fail(function(){q.sap.log.error("Fail to moveGroup "+t.getGroupTitle(G));});return p;};this.setGroupTitle=function(G,s){var p=this._getAdapter(G.contentProvider).setGroupTitle(G,s);p.fail(function(){q.sap.log.error("Fail to set Group title: "+t.getGroupTitle(G));});return p;};this.hideGroups=function(h){var d=new q.Deferred(),o=this._getAdapter();if(typeof o.hideGroups!=="function"){d.reject("hideGroups() is not implemented in the Adapter.");}else{o.hideGroups(h).done(function(){d.resolve();}).fail(function(m){q.sap.log.error("Fail to store groups visibility."+m);d.reject();});}return d.promise();};this.isGroupVisible=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupVisible==="function"){return o.isGroupVisible(G);}return true;};this.addTile=function(c,G){var p=this._getAdapter(G.contentProvider).addTile(c,G),t=this;p.done(function(){t.changeURLStatesToPersistent(t.getCatalogTileTargetURL(c));});p.fail(function(){q.sap.log.error("Fail to add Tile: "+t.getCatalogTileId(c));});return p;};this.removeTile=function(G,c,i){var p=this._getAdapter(G.contentProvider).removeTile(G,c,i),t=this;p.done(function(){t.deleteURLStatesPersistentData(t.getCatalogTileTargetURL(c));});p.fail(function(){q.sap.log.error("Fail to remove Tile: "+t.getTileId(c));});return p;};this.moveTile=function(c,s,i,S,d,n){var p=this._getAdapter().moveTile(c,s,i,S,d,n);p.fail(function(){q.sap.log.error("Fail to move Tile: "+t.getTileId(c));});return p;};this.isLinkPersonalizationSupported=function(c){var s=c&&c.contentProvider,o=this._getAdapter(s);if(typeof o.isLinkPersonalizationSupported==="function"){return o.isLinkPersonalizationSupported(c);}return false;};this.getTileId=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getTileId(c);};this.getTileTitle=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getTileTitle(c);};this.getTileType=function(c){var s=c&&c.contentProvider,o=this._getAdapter(s);if(o.getTileType){return o.getTileType(c);}return"tile";};this.getTileView=function(c){var s=c&&c.contentProvider,d=this._getAdapter(s).getTileView(c);if(!q.isFunction(d.promise)){d=new q.Deferred().resolve(d).promise();}return d;};this.getCardManifest=function(G){var s=G&&G.contentProvider;return this._getAdapter(s).getCardManifest(G);};this.getAppBoxPressHandler=function(c){var s=c&&c.contentProvider,o=this._getAdapter(s);if(o.getAppBoxPressHandler){return o.getAppBoxPressHandler(c);}return undefined;};this.getTileSize=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getTileSize(c);};this.getTileTarget=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getTileTarget(c);};this.getTileDebugInfo=function(c){var s=c&&c.contentProvider,o=this._getAdapter(s);if(typeof o.getTileDebugInfo==="function"){return o.getTileDebugInfo(c);}return undefined;};this.isTileIntentSupported=function(c){var s=c&&c.contentProvider,o=this._getAdapter(s);if(typeof o.isTileIntentSupported==="function"){return o.isTileIntentSupported(c);}return true;};this.refreshTile=function(c){var s=c&&c.contentProvider;this._getAdapter(s).refreshTile(c);};this.setTileVisible=function(c,n){var s=c&&c.contentProvider;return this._getAdapter(s).setTileVisible(c,n);};this.registerTileActionsProvider=function(p){if(typeof p!=="function"){throw new Error("Tile actions Provider is not a function");}T.push(p);};this.getTileActions=function(c){var d=[],e,s=c&&c.contentProvider,o=this._getAdapter(s);if(typeof o.getTileActions==="function"){e=o.getTileActions(c);if(e&&e.length&&e.length>0){d.push.apply(d,e);}}for(var i=0;i<T.length;i++){e=T[i](c);if(e&&e.length&&e.length>0){d.push.apply(d,e);}}return d;};this.getCatalogs=function(){return this._getAdapter().getCatalogs();};this.isCatalogsValid=function(){return this._getAdapter().isCatalogsValid();};this.getCatalogData=function(c){var l=this._getAdapter();if(typeof l.getCatalogData!=="function"){q.sap.log.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(c)};}return l.getCatalogData(c);};this.getCatalogError=function(c){return this._getAdapter().getCatalogError(c);};this.getCatalogId=function(c){return this._getAdapter().getCatalogId(c);};this.getCatalogTitle=function(c){return this._getAdapter().getCatalogTitle(c);};this.getCatalogTiles=function(c){var p=this._getAdapter().getCatalogTiles(c);p.fail(function(){q.sap.log.error("Fail to get Tiles of Catalog: "+t.getCatalogTitle(c));});return p;};this.getCatalogTileId=function(c){return this._getAdapter(c.contentProvider).getCatalogTileId(c);};this.getCatalogTileTitle=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTileTitle(c);};this.getCatalogTileSize=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTileSize(c);};this.getCatalogTileViewControl=function(c){var s=c&&c.contentProvider;var l=this._getAdapter(s);if(typeof l.getCatalogTileViewControl==="function"){return l.getCatalogTileViewControl(c);}var d=new q.Deferred(),R=this.getCatalogTileView(c);d.resolve(R);return d.promise();};this.getCatalogTileView=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTileView(c);};this.getCatalogTileTargetURL=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTileTargetURL(c);};this.getCatalogTileTags=function(c){var s=c&&c.contentProvider;var l=this._getAdapter(s);if(typeof l.getCatalogTileTags==="function"){return l.getCatalogTileTags(c);}return[];};this.getCatalogTileKeywords=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTileKeywords(c);};this.getCatalogTilePreviewTitle=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTilePreviewTitle(c);};this.getCatalogTilePreviewInfo=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTilePreviewInfo(c);};this.getCatalogTilePreviewSubtitle=function(c){var s=c&&c.contentProvider;var l=this._getAdapter(s);if(l.getCatalogTilePreviewSubtitle){return l.getCatalogTilePreviewSubtitle(c);}};this.getCatalogTilePreviewIcon=function(c){var s=c&&c.contentProvider;return this._getAdapter(s).getCatalogTilePreviewIcon(c);};this.addBookmark=function(p,G){var P,d,m,s,t=this;if(!p.title){q.sap.log.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration");}if(!p.url){q.sap.log.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration");}if(G&&this.isGroupLocked(G)){d=new q.Deferred();P=d.promise();m="Tile cannot be added, target group ("+this.getGroupTitle(G)+")is locked!";d.reject(m);q.sap.log.error(m);}else{s=G&&G.contentProvider;P=this._getAdapter(s).addBookmark(p,G);P.done(function(){t.changeURLStatesToPersistent(p.url);});P.fail(function(){q.sap.log.error("Fail to add bookmark for URL: "+p.url+" and Title: "+p.title);});}return P;};this.countBookmarks=function(u){if(!u||typeof u!=="string"){q.sap.log.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL");}var p=this._getAdapter().countBookmarks(u);p.fail(function(){q.sap.log.error("Fail to count bookmarks");});return p;};this.deleteBookmarks=function(u){var t=this;if(!u||typeof u!=="string"){throw new Error("Missing URL");}var p=this._getAdapter().deleteBookmarks(u);p.done(function(){t.deleteURLStatesPersistentData(u);});p.fail(function(){q.sap.log.error("Fail to delete bookmark for: "+u);});return p;};this.updateBookmarks=function(u,p){if(!u||typeof u!=="string"){q.sap.log.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL");}if(!p||typeof p!=="object"){q.sap.log.error("Fail to update bookmark. No valid parameters, URL is: "+u);throw new Error("Missing parameters");}var P=this._getAdapter().updateBookmarks(u,p);P.fail(function(){q.sap.log.error("Fail to update bookmark for: "+u);});return P;};this.onCatalogTileAdded=function(s){return this._getAdapter().onCatalogTileAdded(s);};this.changeURLStatesToPersistent=function(u){var c=sap.ushell.Container.getService("AppState");if(c.getSupportedPersistencyMethods().length===0){return;}if(u&&u.length>0){try{var x=g(u,"sap-xapp-state"),i=g(u,"sap-iapp-state");if(x!==undefined){c.makeStatePersistent(x,A.PersonalState);}if(i!==undefined){c.makeStatePersistent(i,A.PersonalState);}}catch(e){q.sap.log.error("error in converting transiant state to personal persistent when bookmark is added",e,"sap.ushell.services.LaunchPage");}}};this.deleteURLStatesPersistentData=function(u){var c=sap.ushell.Container.getService("AppState");if(c.getSupportedPersistencyMethods().length===0){return;}if(u&&u.length>0){try{var x=g(u,"sap-xapp-state"),i=g(u,"sap-iapp-state");if(x!==undefined||i!==undefined){this.countBookmarks(u).done(function(d){if(d===0){if(x!==undefined){c.deleteAppState(x);}if(i!==undefined){c.deleteAppState(i);}}});}}catch(e){q.sap.log.error("error in deleting persistent state when bookmark is deleted",e,"sap.ushell.services.LaunchPage");}}};function g(u,p){var R=new RegExp("(?:"+p+"=)([^&/]+)"),s=R.exec(u),v=undefined;if(s&&s.length===2){v=s[1];}return v;}}
L.prototype._getAdapter=function(s){return this.oAdapters[s]||this.oAdapters.default;};
L.hasNoAdapter=false;return L;},true);
sap.ui.predefine('sap/ushell/services/Menu',["sap/ushell/utils"],function(U){"use strict";
function M(){this._init.apply(this,arguments);}
M.prototype._init=function(a){this.oAdapter=a;};
M.prototype.isMenuEnabled=function(){return this.oAdapter.isMenuEnabled();};
M.prototype.getMenuEntries=function(){return this.oAdapter.getMenuEntries().then(function(m){return m.map(function(o){o.uid=U.generateUniqueId([]);return o;}).sort(function(e,E){return e.title.localeCompare(E.title);});});};
M.hasNoAdapter=false;return M;});
sap.ui.predefine('sap/ushell/services/Message',["sap/m/MessageBox","sap/ushell/Config","sap/ushell/resources","sap/m/Dialog","sap/m/Text","sap/m/Link","sap/m/Button","sap/m/VBox","sap/m/FormattedText","sap/ui/thirdparty/jquery","sap/m/MessageToast","sap/m/library","sap/ui/core/library"],function(M,C,r,D,T,L,B,V,F,q,a,m,c){"use strict";var b=m.DialogType;var d=c.ValueState;var e=m.FlexRendertype;
function f(){var s;this.init=function(S){s=S;return this;};this.show=function(t,g,p){if(!g){q.sap.log.error("Message must not be empty.");return;}if(s&&typeof s==="function"){s(t,g,p||{});}else{this.buildMessage(t,g,p||{});}};this.buildMessage=function(t,g,p){var o={title:p.title,actions:p.actions,details:p.details,onClose:p.callback},h;switch(t){case f.Type.ERROR:var i=this.createErrorDialog(g,o);i.open();return;case f.Type.CONFIRM:if(!p.actions){h="confirm";}else{o.icon=M.Icon.QUESTION;h="show";}break;case f.Type.INFO:h="info";this.buildAndSendMessageToast(g,p.duration||3000);return;default:o={duration:p.duration||3000};h="show";break;}this.sendMessageBox(g,h,o);};this.createErrorDialog=function(g,o){function h(A){var E=document.createElement("textarea");try{E.contentEditable=true;E.readonly=false;E.innerText=A;document.documentElement.appendChild(E);if(navigator.userAgent.match(/ipad|iphone/i)){var R=document.createRange();R.selectNodeContents(E);window.getSelection().removeAllRanges();window.getSelection().addRange(R);E.setSelectionRange(0,999999);}else{q(E).select();}document.execCommand("copy");a.show(r.i18n.getText("CopyWasSuccessful"));}catch(G){a.show(r.i18n.getText("CopyWasNotSuccessful"));}finally{q(E).remove();}}function i(A){var E=new B({text:r.i18n.getText(A),press:function(){var G=o.details;if(typeof o.details==="object"){G=JSON.stringify(o.details,null,"\t");}var I=[];I.push("Title: "+(v||"-"));I.push("Message: "+(g||"-"));I.push("Details: "+(G||"-"));h(I.join("\n"));}});E.setTooltip(r.i18n.getText("CopyToClipboardBtn_tooltip"));return E;}function j(A){var E=new B({text:r.i18n.getText(A),press:function(){sap.ui.require(["sap/ushell/ui/footerbar/ContactSupportButton"],function(G){var I=new G();if(I){I.showContactSupportDialog();I.destroy();}});w.destroy();}});E.setTooltip(r.i18n.getText("contactSupportBtn_tooltip"));return E;}function k(A){switch(A){case"contactSupportBtn":return j(A);case"CopyToClipboardBtn":return i(A);default:return new B({text:r.i18n.getText(A),press:function(){w.destroy();}});}}function l(H){var A=[],y=[];if(H){A.push("contactSupportBtn");}else{A.push("okDialogBtn");}A.push("CopyToClipboardBtn");A.push("cancelDialogBtn");A.forEach(function(E){y.push(k(E));});return y;}function n(w,y){y.forEach(function(A){w.addButton(A);});}function p(z){var A=new T({text:g});if(o.details){A.addStyleClass("sapUiSmallMarginBottom");}z.addItem(A);}function t(z){var A=o.details;if(typeof o.details==="object"){A=o.details.info;}var E=new L({text:r.i18n.getText("ViewDetails"),press:function(){var G=z.indexOfItem(E);z.removeItem(G);z.insertItem(new F({htmlText:A}),G);}});z.addItem(E);}function u(){var z=new V({renderType:e.Bare});p(z);if(o.details){t(z);}return z;}var v=o.title||r.i18n.getText("error"),w=new D({state:d.Error,title:v,type:b.Message,contentWidth:"30rem"}),x=C.last("/core/extension/SupportTicket"),H=sap.ushell.Container&&x&&g!==r.i18n.getText("supportTicketCreationFailed"),y=l(H);n(w,y);var z=u();w.addContent(z);return w;};this.buildAndSendMessageToast=function(g,i){sap.ui.require(["sap/m/MessageToast"],function(a){a.show(g,{duration:i});});};this.sendMessageBox=function(g,t,o){if(M.hasOwnProperty(t)&&typeof M[t]==="function"){M[t](g,o);}else{q.sap.log.error("Unknown Message type: "+t);}};this.info=function(g,i){this.show(f.Type.INFO,g,{duration:i||3000});};this.error=function(g,t){g=(t!==undefined)?t+" , "+g:g;q.sap.log.error(g);this.show(f.Type.ERROR,g,{title:t});};this.confirm=function(g,h,t,A){this.show(f.Type.CONFIRM,g,{title:t,callback:h,actions:A});};}
f.Type={INFO:0,ERROR:1,CONFIRM:2};f.hasNoAdapter=true;return f;},true);
sap.ui.predefine('sap/ushell/services/NavTargetResolution',["sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/navigationMode","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/UriParameters"],function(b,u,n,U,q,M,c,O,d){"use strict";
function N(A,C,p,s){var S=s&&s.config,I=function(){return!!(S&&S.enableClientSideTargetResolution);},r=function(h){var a=I()?this._resolveHashFragmentClientSide(h):A.resolveHashFragment(h);return a;},l,R=[{name:"DefaultAdapter",isApplicable:function(){return true;},resolveHashFragment:r.bind(this)}],o;this._isClientSideTargetResolutionEnabled=I;this._nextResolveHashFragment=function(a,h){var e,f;e=a.pop();if(e.isApplicable(h)){q.sap.log.info("NavTargetResolution: custom resolver "+e.name+" resolves "+h);f=this._nextResolveHashFragment.bind(this,a);return e.resolveHashFragment(h,f);}return this._nextResolveHashFragment(a,h);};this._resolveHashFragmentClientSide=function(h){var H=this._validateHashFragment(h),f;if(!H.success){return new q.Deferred().reject(h+" is not a valid hash fragment").promise();}f=H.hashFragmentWithoutHash;return this._resolveHashFragmentClientSideAndFixApplicationType(f);};this._resolveHashFragmentClientSideAndFixApplicationType=function(f){var D=new q.Deferred();sap.ushell.Container.getService("ClientSideTargetResolution").resolveHashFragment(f).done(function(a){if(a&&a.applicationType==="SAPUI5"){a.applicationType="URL";}D.resolve(a);}).fail(function(){D.reject.apply(D,arguments);});return D.promise();};this._validateHashFragment=function(h){var H="",v={success:false};if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected in _validateHashFragment","sap.ushell.services.NavTargetResolution");}H=h.substring(1);if(H){v.success=true;}v.hashFragmentWithoutHash=H;return v;};this.expandCompactHash=function(h){var a=sap.ushell.Container.getService("URLParsing"),P,D=new q.Deferred();P=a.parseShellHash(h);if(P&&P.params&&P.params["sap-intent-param"]){sap.ushell.Container.getService("AppState").getAppState(P.params["sap-intent-param"][0]).done(function(e){var v=e.getData("sap-intent-param"),H=h;if(v){H=sap.ushell.Container.getService("URLShortening").expandParamGivenRetrievalFunction(h,"sap-intent-param",function(){return v;});}D.resolve(H);}).fail(function(){D.resolve(h);});}else{D.resolve(h);}return D.promise();};var w=["NWBC","WDA","TR"];this._adjustResolutionResultForUi5Components=function(a){var m,e;if(typeof a!=="object"){return;}delete a["sap.platform.runtime"];if(a&&a.applicationType&&a.applicationType==="SAPUI5"){a.applicationType="URL";}if(a.applicationType==="URL"){m=/^SAPUI5\.Component=(.*)/.exec(a.additionalInformation);e=m&&m[1];if(e){a.ui5ComponentName=e;}}};this._getSapSystem=function(h,a){var e;if(a&&a["sap-system"]){return a["sap-system"];}if(a&&a.url){e=(new d(a.url)).get("sap-system");if(e){return e;}}if(w.indexOf(a.applicationType)>=0&&h&&h.substring(1)){e=(new d(h.substring(1))).get("sap-system");if(e){return e;}}return undefined;};this.resolveTarget=function(a){var h,e=u.clone(a),D=new q.Deferred();u.addTime("resolveTarget");M.average("sap.ushell.navigation.resolveTarget");u.storeSapSystemToLocalStorage(e);h=sap.ushell.Container.getService("URLParsing").constructShellHash(e);sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment("#"+h).done(function(f){M.end("sap.ushell.navigation.resolveTarget");D.resolve({url:f.url,text:f.text,externalNavigationMode:f.externalNavigationMode});}).fail(function(m){D.reject(m);});return D.promise();};this.resolveHashFragment=function(h){var D=new q.Deferred(),a=/sap-ushell-enc-test=([^&]*)(&.*)?$/,m,e,f,t=this;u.addTime("resolveHashFragment");M.average("sap.ushell.navigation.resolveHashFragment");this.expandCompactHash(h).done(function(H){if(H.indexOf("sap-ushell-enc-test")>=0){m=a.exec(H);if(m){e=m[1];if(e!=="A%20B%2520C"){sap.ushell.Container.getService("Message").error("This navigation is flagged as erroneous because"+" (likely the calling procedure) generated a wrong encoded hash."+" Please track down the encoding error and make sure to use the CrossApplicationNavigation service for navigation.","Navigation encoding wrong");}H=H.replace(/sap-ushell-enc-test=([^&]*)&/,"");H=H.replace(/(&|\?)sap-ushell-enc-test=([^&]*)$/,"");}}var P=t._invokeResolveHashChain(H);if(typeof A.processPostResolution==="function"){P=A.processPostResolution(H,P);}P.done(function(g){t._adjustResolutionResultForUi5Components(g);if(c(g)){if(!g.hasOwnProperty("navigationMode")){g.navigationMode=n.getNavigationMode(g,b.getCurrentApplication());}g.targetNavigationMode=n.getExternalNavigationMode(g.navigationMode);}if(c(g)&&!g.hasOwnProperty("sap-system")){f=t._getSapSystem(h,g);if(f){g["sap-system"]=f;}}M.end("sap.ushell.navigation.resolveHashFragment");D.resolve(g);}).fail(function(g){D.reject(g);});}).fail(function(g){D.reject(g);});return D.promise();};this._invokeResolveHashChain=function(h){var e=R.map(function(a){return a;});return this._nextResolveHashFragment(e,h).done(function(a){o=a;});};this.baseResolveHashFragment=r.bind(this);this._getGetLinksResolver=function(a){var g;if(this._isClientSideTargetResolutionEnabled()){g=this._getLinksClientSide.bind(this);return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}if(Object.prototype.toString.apply(a.paramsOptions)==="[object Array]"&&a.paramsOptions.length>0){q.sap.log.warning("Parameter options supplied to #getLinks will be ignored because FLP is not configured to use sap.ushell.services.ClientSideTargetResolution for target resolution","provided parameters options: "+JSON.stringify(a.paramsOptions,null,4),"sap.ushell.services.NavTargetResolution");}g=A&&A.getLinks&&A.getLinks.bind(A);if(g){return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}g=A&&A.getSemanticObjectLinks&&A.getSemanticObjectLinks.bind(A);if(g){return{resolver:g,warning:a.hasOwnProperty("action")?"the action argument was given, however, NavTargetResolutionAdapter does not implement getLinks method. Action will be ignored.":undefined,isGetSemanticObjectLinksCall:true};}return{resolver:undefined,warning:"Cannot determine resolver for getLinks method",isGetSemanticObjectLinksCall:undefined};};this.getLinks=function(a){var t=this,e=a.semanticObject,P=a.params,i=a.ignoreFormFactor,f=a.ui5Component,g=a.appStateKey,h=a.compactIntents,j,H,k=new q.Deferred(),m,v;if(/\?/.test(e)){throw new Error("Parameter must not be part of semantic object");}j=(P===undefined)?undefined:JSON.parse(JSON.stringify(P));if(g){j=j||{};j["sap-xapp-state"]=encodeURIComponent(g);}m=sap.ushell.Container.getService("ShellNavigation");var x=t._getGetLinksResolver(a),y,z;if(x.warning){q.sap.log.warning("A problem occurred while determining the resolver for getLinks",x.warning,"sap.ushell.services.NavTargetResolution");}v=x.resolver;if(v){y=function(E){k.reject(E);};z=function(B){if(h){t._shortenGetSemanticObjectLinksResults(B,f).done(function(D){k.resolve(D);});}else{k.resolve(B);}};if(x.isGetSemanticObjectLinksCall){H={target:{semanticObject:e,action:"dummyAction"},params:j};m.hrefForExternal(H,true,f,true).done(function(B){var D=B.params||j;v(e,D,i).done(z).fail(y);}).fail(function(B){k.reject(B);});}else{v(a).done(z).fail(y);}}else{k.resolve([]);}return k.promise();};this.getDistinctSemanticObjects=function(){if(this._isClientSideTargetResolutionEnabled()){var a=sap.ushell.Container.getService("ClientSideTargetResolution");return a.getDistinctSemanticObjects();}if(A&&A.getDistinctSemanticObjects){return A.getDistinctSemanticObjects.call(A);}q.sap.log.error("Cannot execute getDistinctSemanticObjects method","ClientSideTargetResolution must be enabled or NavTargetResolutionAdapter must implement getDistinctSemanticObjects method","sap.ushell.services.NavTargetResolution");return new q.Deferred().reject("Cannot execute getDistinctSemanticObjects").promise();};this._getLinksClientSide=function(a){var D=new q.Deferred(),e,f=new q.Deferred(),g=sap.ushell.Container.getService("URLParsing");if((a.params||{}).hasOwnProperty("sap-intent-param")){e="#"+a.semanticObject+"-dummyAction?"+g.paramsToString(a.params);this.expandCompactHash(e).done(function(E){f.resolve(g.parseShellHash(E).params);}).fail(D.reject.bind(D));}else{f.resolve(a.params);}f.done(function(){sap.ushell.Container.getService("ClientSideTargetResolution").getLinks(a).done(D.resolve.bind(D)).fail(D.reject.bind(D));});return D.promise();};this._shortenGetSemanticObjectLinksResults=function(g,a){var t=this,e=[],i=0,P=g.length,f=sap.ushell.Container.getService("URLParsing"),h=sap.ushell.Container.getService("ShellNavigation"),D=new q.Deferred();g.forEach(function(j){var k=f.parseShellHash(j.intent),m=h.compactParams(k.params,undefined,a);e.push(m);e[i].done(function(v,x){e[v]={text:j.text,intent:"#"+k.semanticObject+"-"+k.action+"?"+f.paramsToString(x)};}.bind(t,i)).fail(function(v,x){q.sap.log.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+x+"; intent had title ''"+j.title+"'' and link ''"+j.intent+"'","sap.ushell.services.NavTargetResolution");e[v]={text:j.text,intent:j.intent};}.bind(t,i)).always(function(){P--;if(P===0){D.resolve(e);}});i++;});return D.promise();};this.isIntentSupported=function(i){var m={},a;if(this._isClientSideTargetResolutionEnabled()){a=sap.ushell.Container.getService("ClientSideTargetResolution");return a.isIntentSupported(i);}if(A.isIntentSupported){return A.isIntentSupported(i);}i.forEach(function(e){m[e]={supported:undefined};});return(new q.Deferred()).resolve(m).promise();};this.isNavigationSupported=function(i){var a=sap.ushell.Container.getService("URLParsing"),D=new q.Deferred(),e=[];e=i.map(function(f){if(typeof f==="string"){return f;}return"#"+a.constructShellHash(f);});this.isIntentSupported(e).done(function(f){var g=e.map(function(h){return f[h]||{supported:false};});D.resolve(g);}).fail(D.reject.bind(D));return D.promise();};this.registerCustomResolver=function(a){if(typeof a.name!=="string"){q.sap.log.error("NavTargetResolution: Custom Resolver must have name {string} member");return false;}if(typeof a.isApplicable!=="function"){q.sap.log.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false;}if(typeof a.resolveHashFragment!=="function"){q.sap.log.error("NavTargetResolution: Custom Resolver must have \"resolveHashFragment\" member");return false;}R.push(a);return true;};if(S&&Array.isArray(S.resolveLocal)){l=S.resolveLocal.map(function(a){return a.linkId;});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(h){if(h===""){return"#";}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return"#";}h="#"+a.semanticObject+"-"+a.action;return h;},_getIndex:function(a){var h=this.cleanHash(a);return l.indexOf(h.substring(1));},isApplicable:function(a){return this._getIndex(a)>=0;},resolveHashFragment:function(h){var D,i=this._getIndex(h),a,e,f,g;D=new q.Deferred();a=JSON.parse(JSON.stringify(S.resolveLocal[i].resolveTo));e=sap.ushell.Container.getService("URLParsing").parseShellHash(h);if(e&&e.params){g=sap.ushell.Container.getService("URLParsing").paramsToString(e.params);if(g){f=a.url.indexOf("?")>=0;a.url=a.url+(f?"&":"?")+g;}}D.resolve(a);return D.promise();}});}this.registerCustomResolver({name:"StandaloneLocalResolver",aElement:undefined,cleanHash:function(h){if(h===""){return undefined;}var a=sap.ushell.Container.getService("URLParsing").parseShellHash(h.substring(1));if(!a){return undefined;}h="#"+a.semanticObject+"-"+a.action;return h;},isRunStandaloneHash:function(h){return typeof h==="string"&&h.indexOf("#Shell-runStandaloneApp")===0;},isApplicable:function(h){h=this.cleanHash(h);if(!h){return false;}return h==="#Test-url"||h==="#Test-local1"||h==="#Test-local2"||h==="#Test-config"||h==="#Test-clear"||this.isRunStandaloneHash(h);},parseUrl:function(a){if(!this.aElement){this.aElement=window.document.createElement("a");}this.aElement.href=a;return this.aElement;},resolveHashFragment:function(h){var D=new q.Deferred(),e=null,t=this,f,P,L,g,i,j,k,m,F=h,v;h=this.cleanHash(h);if(!h){return false;}e={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},"none":{applicationType:"URL",url:"",additionalInformation:""}};function x(K){if(localStorage){return localStorage[K];}return undefined;}function y(m,K){var f={},a;for(a in m){if(m.hasOwnProperty(a)){if(a!==K){f[a]=m[a];}}}return f;}function z(a){if(u.calculateOrigin(t.parseUrl(a))!==u.calculateOrigin(window.location)){return undefined;}var H=(new U(t.parseUrl(a).href)).normalizePathname().pathname(),J=O.create("runStandaloneAppFolderWhitelist",S),K;if(!J){return undefined;}for(K in J){if(J.hasOwnProperty(K)){if(J[K]){if(K==="*"||H.indexOf((new U(t.parseUrl(K).href)).normalizePathname().pathname())===0){return a;}}}}return undefined;}function B(K){return(new d(window.location.href)).get(K);}function E(a,K){return(a.params&&a.params[K]&&a.params[K][0])||B(K);}function G(K,V){if(localStorage){localStorage[K]=V;}}if(e[h]){f=e[h];}else if(h==="#Test-clear"){G("sap.ushell.#Test-local1",undefined);G("sap.ushell.#Test-local2",undefined);q.sap.log.info("NavTargetResolution: Local storage keys for #Test have been cleared");f=e["#Test-config"];}else if(this.isRunStandaloneHash(h)){L={applicationType:"URL"};P=sap.ushell.Container.getService("URLParsing").parseShellHash(F);g=(E(P,"sap-ushell-SAPUI5.Component")&&"SAPUI5.Component="+E(P,"sap-ushell-SAPUI5.Component"))||(E(P,"sap-ushell-additionalInformation"));v=E(P,"sap-ushell-url")||"";m=y(P.params,"sap-ushell-SAPUI5.Component");m=y(m,"sap-ushell-additionalInformation");m=y(m,"sap-ushell-url");j=sap.ushell.Container.getService("URLParsing").paramsToString(m);k=v.indexOf("?")>=0;if(j){v=v+(k?(((v[v.length-1]!=="&")&&"&")||""):"?")+j;}L.url=z(v);L.additionalInformation=g;f=L;}else if(h==="#Test-local1"||h==="#Test-local2"||h==="#Test-url"){f=x("sap.ushell."+h);if(!f||f==="undefined"){L={applicationType:"URL"};}else{L=JSON.parse(f);}if((window.location.hostname==="localhost")||(S&&S.allowTestUrlComponentConfig)){i="sap-ushell-test-"+h.substring(6);g=B(i+"-additionalInformation");if(g){L.additionalInformation=g;}v=B(i+"-url");if(v){L.url=z(v);}}if(!L.url){q.sap.log.info("NavTargetResolution: No configured app for "+h+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");q.sap.log.info("NavTargetResolution: Defaulting to config app ...\n");D.reject("URL is not resolvable");return D.promise();}L.url=z(L.url);f=L;}if(f.url===undefined){D.reject("URL is not resolvable");return D.promise();}q.sap.log.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent((f&&f.url)||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent((f&&f.additionalInfo)||"")+"#Test-local1");q.sap.log.info("NavTargetResolution: Resolving "+h+" to "+JSON.stringify(f));D.resolve(f);return D.promise();}});this.getCurrentResolution=function(){return o;};}
N.hasNoAdapter=false;return N;},true);
sap.ui.predefine('sap/ushell/services/NavigationDataProvider',["sap/ushell/resources"],function(r){"use strict";
function N(){this.S_COMPONENT_NAME="sap.ushell.services.NavigationDataProvider";this._init.apply(this,arguments);}
N.prototype._init=function(a,s){this.oAdapter=a;};
N.prototype.getNavigationData=function(){return new Promise(function(a,b){var s=(this.oAdapter.getSystemAliases&&this.oAdapter.getSystemAliases())||{};this.oAdapter.getInbounds().then(function(i){a({systemAliases:s,inbounds:i});}).fail(function(e){var E={component:this.S_COMPONENT_NAME,description:r.i18n.getText("NavigationDataProvider.CannotLoadData"),detail:e};b(E);}.bind(this));}.bind(this));};
N.hasNoAdapter=false;return N;});
sap.ui.predefine('sap/ushell/services/Notifications',["sap/ui/thirdparty/datajs","sap/ui/core/ws/SapPcpWebSocket","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/model/json/JSONModel","sap/ushell/utils"],function(O,S,q,L,J,u){"use strict";
function N(c,p,s){var m=new J(),t=new Date(),o=s&&s.config,r={getNotifications:{},getNotificationsByType:{},getNotificationsInGroup:{},getBadgeNumber:{},resetBadgeNumber:{},getNotificationTypesSettings:{},getNotificationsGroupHeaders:{},getMobileSupportSettings:{},getEmailSupportSettings:{},getWebSocketValidity:{},getNotificationCount:{}},w,W=o.webSocketUrl||"/sap/bc/apc/iwngw/notification_push_apc",P=o.pollingIntervalInSeconds||60,i,a,b,U=[],d=[],f=[],I=false,C=[],g=false,h=false,E=true,H,D,j=5000,k=6000,l=false,n={NOTIFICATIONS:0,NOTIFICATIONS_BY_TYPE:1,GET_BADGE_NUMBER:2,RESET_BADGE_NUMBER:3,GET_SETTINGS:4,GET_MOBILE_SUPPORT_SETTINGS:5,NOTIFICATIONS_GROUP_HEADERS:6,NOTIFICATIONS_IN_GROUP:7,GET_NOTIFICATIONS_COUNT:8,VALIDATE_WEBSOCKET_CHANNEL:9,GET_EMAIL_SUPPORT_SETTINGS:10,NOTIFICATIONS_BY_DATE_DESCENDING:"notificationsByDateDescending",NOTIFICATIONS_BY_DATE_ASCENDING:"notificationsByDateAscending",NOTIFICATIONS_BY_PRIORITY_DESCENDING:"notificationsByPriorityDescending",NOTIFICATIONS_BY_TYPE_DESCENDING:"notificationsByTypeDescending"},M={PACKAGED_APP:0,FIORI_CLIENT:1,WEB_SOCKET:2,POLLING:3},v,F=false,z,A=true,B=false,G=new q.Deferred(),K=new q.Deferred(),Q,R,T=G.promise(),V=false,X={},Y=10,Z=false,$=false,_=[];this.isEnabled=function(){if(!o.enabled||!o.serviceUrl){E=false;if(o.enabled&&!o.serviceUrl){L.warning("No serviceUrl was found in the service configuration");}}else{E=true;}return E;};this.init=function(){if((!g)&&(this.isEnabled())){sap.ui.getCore().getEventBus().subscribe("launchpad","sessionTimeout",this.destroy,this);this.lastNotificationDate=new Date();this._setWorkingMode();g=true;this.bUpdateDependencyInitiatorExists=false;this._userSettingInitialization();}sap.ui.getCore().getEventBus().subscribe("launchpad","setConnectionToServer",this._onSetConnectionToServer,this);};this._onSetConnectionToServer=function(e,x,y){if(y.active){this._resumeConnection();}else{this._closeConnection();}};this.getUnseenNotificationsCount=function(){var e=new q.Deferred();e.resolve(m.getProperty("/UnseenCount"));return e.promise();};this.getNotificationsCount=function(){return m.getProperty("/NotificationsCount")?m.getProperty("/NotificationsCount"):"0";};this.getNotificationsByTypeWithGroupHeaders=function(){var e,x,y=new q.Deferred(),a1=this._getRequestURI(n.NOTIFICATIONS_BY_TYPE);x={requestUri:a1};if(!this._getHeaderXcsrfToken()){e={};e["X-CSRF-Token"]="fetch";x.headers=e;}O.request(x,function(b1){y.resolve(b1);},function(b1){if(b1.response&&b1.response.statusCode===200&&b1.response.body){y.resolve(b1.response.body);}else{y.reject(b1);L.error("Notification service - oData executeAction failed: ",b1,"sap.ushell.services.Notifications");}});return y.promise();};this.getNotificationsGroupHeaders=function(){var e,x,y=new q.Deferred(),a1=this._getRequestURI(n.NOTIFICATIONS_GROUP_HEADERS);x={requestUri:a1};if(!this._getHeaderXcsrfToken()){e={};e["X-CSRF-Token"]="fetch";x.headers=e;}O.request(x,function(b1){y.resolve(b1);},function(b1){if(b1.response&&b1.response.statusCode===200&&b1.response.body){y.resolve(b1.response.body);}else{y.reject();L.error("Notification service - oData executeAction failed: ",b1,"sap.ushell.services.Notifications");}});return y.promise();};this.getNotificationsBufferInGroup=function(e,x,y){var a1=this,b1,c1,d1=new q.Deferred(),e1={group:e,skip:x,top:y},f1,g1,h1=this._getRequestURI(n.NOTIFICATIONS_IN_GROUP,e1);if(V===true){f1=X[n.NOTIFICATIONS_IN_GROUP].slice(x,x+y);g1=JSON.stringify({"@odata.context":"$metadata#Notifications","value":f1});setTimeout(function(){d1.resolve(g1);},1000);}else{c1={requestUri:h1};if(!this._getHeaderXcsrfToken()){b1={};b1["X-CSRF-Token"]="fetch";c1.headers=b1;}O.request(c1,function(i1){a1._updateCSRF(i1.response);d1.resolve(i1.value);},function(i1){if(i1.response&&i1.response.statusCode===200&&i1.response.body){a1._updateCSRF(i1.response);d1.resolve(JSON.parse(i1.response.body).value);}else{d1.reject();L.error("Notification service - oData executeAction failed: ",i1,"sap.ushell.services.Notifications");}});}return d1.promise();};this.getNotificationsBufferBySortingType=function(e,x,y){var a1=this,b1,c1,d1=new q.Deferred(),e1={skip:x,top:y},f1,g1,h1=this._getRequestURI(e,e1);if(V===true){f1=X[e].slice(x,x+y);g1=JSON.stringify({"@odata.context":"$metadata#Notifications","value":f1});setTimeout(function(){d1.resolve(g1);},1000);}else{c1={requestUri:h1};if(!this._getHeaderXcsrfToken()){b1={};b1["X-CSRF-Token"]="fetch";c1.headers=b1;}O.request(c1,function(i1){a1._updateCSRF(i1.response);d1.resolve(i1.value);},function(i1){if(i1.response&&i1.response.statusCode===200&&i1.response.body){a1._updateCSRF(i1.response);d1.resolve(JSON.parse(i1.response.body).value);}else{d1.reject();L.error("Notification service - oData executeAction failed: ",i1,"sap.ushell.services.Notifications");}});}return d1.promise();};this.getNotifications=function(){var e,x=new q.Deferred();if((v===M.FIORI_CLIENT)||(v===M.PACKAGED_APP)){e=this._readNotificationsData(false);e.done(function(){x.resolve(m.getProperty("/Notifications"));}).fail(function(){x.reject();});}else{x.resolve(m.getProperty("/Notifications"));}return x.promise();};this.executeBulkAction=function(e,x){var y=new q.Deferred(),a1=[],b1=[],c1={succededNotifications:a1,failedNotifications:b1},d1=this;d1.sendBulkAction(e,x).done(function(e1){e1.forEach(function(f1,g1){var h1=f1.NotificationId,i1=f1.Success;if(i1){a1.push(h1);}else{b1.push(h1);}});if(b1.length){y.reject(c1);}else{y.resolve(c1);}}).fail(function(){y.reject(c1);});return y.promise();};this.dismissBulkNotifications=function(e){var x=new q.Deferred(),y=this;y.sendBulkDismiss(e).done(function(){x.resolve();}).fail(function(){x.reject();});return x.promise();};this.executeAction=function(e,x){var y=this,a1=o.serviceUrl+"/ExecuteAction",b1={NotificationId:e,ActionId:x},c1={requestUri:a1,method:"POST",data:b1,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":H}},d1=new q.Deferred();O.request(c1,function(e1){var f1,g1={isSucessfull:true,message:""};if(e1&&e1.response&&e1.response.statusCode===200&&e1.response.body){f1=JSON.parse(e1.response.body);g1.isSucessfull=f1.Success;g1.message=f1.MessageText;}d1.resolve(g1);},function(e1){var f1,g1={isSucessfull:false,message:""};if(e1.response&&e1.response.statusCode===200&&e1.response.body){f1=JSON.parse(e1.response.body);g1.isSucessfull=f1.Success;g1.message=f1.MessageText;d1.resolve(g1);}else if(y._csrfTokenInvalid(e1)&&(Z===false)){y._invalidCsrfTokenRecovery(d1,y.executeAction,[e,x]);}else{d1.reject(e1);L.error("Notification service - oData executeAction failed: ",e1,"sap.ushell.services.Notifications");}});return d1.promise();};this.sendBulkAction=function(e,x){var y=this,a1=o.serviceUrl+"/BulkActionByHeader",b1={ParentId:e,ActionId:x},c1={requestUri:a1,method:"POST",data:b1,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":H}},d1=new q.Deferred();O.request(c1,function(e1){var f1,g1;if(e1&&e1.response&&e1.response.statusCode===200&&e1.response.body){f1=JSON.parse(e1.response.body);g1=f1.value;}d1.resolve(g1);},function(e1){var f1,g1;if(e1.response&&e1.response.statusCode===200&&e1.response.body){f1=JSON.parse(e1.response.body);g1=f1.value;d1.resolve(g1);}else if(y._csrfTokenInvalid(e1)&&(Z===false)){y._invalidCsrfTokenRecovery(d1,y.sendBulkAction,[e,x]);}else{d1.reject();L.error("Notification service - oData executeBulkAction failed: ",e1.message,"sap.ushell.services.Notifications");}});return d1.promise();};this.sendBulkDismiss=function(e){var x=this,y=o.serviceUrl+"/DismissAll",a1={ParentId:e},b1={requestUri:y,method:"POST",data:a1,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":H}},c1=new q.Deferred();O.request(b1,function(){c1.resolve();},function(d1){if(d1.response&&d1.response.statusCode===200){c1.resolve();}else if(x._csrfTokenInvalid(d1)&&(Z===false)){x._invalidCsrfTokenRecovery(c1,x.sendBulkDismiss,[e]);}else{c1.reject();var e1=d1?d1.message:"";L.error("Notification service - oData executeBulkAction failed: ",e1,"sap.ushell.services.Notifications");}});return c1.promise();};this.markRead=function(e){var x=this,y=o.serviceUrl+"/MarkRead",a1={NotificationId:e},b1={requestUri:y,method:"POST",data:a1,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":H}},c1=new q.Deferred();O.request(b1,function(){c1.resolve();},function(d1){if(x._csrfTokenInvalid(d1)&&(Z===false)){x._invalidCsrfTokenRecovery(c1,x.markRead,[e]);}else{L.error("Notification service - oData reset badge number failed: ",d1,"sap.ushell.services.Notifications");c1.reject(d1);}});return c1.promise();};this.dismissNotification=function(e){var x=o.serviceUrl+"/Dismiss",y=this,a1={NotificationId:e},b1={requestUri:x,method:"POST",data:a1,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":H}},c1=new q.Deferred();O.request(b1,function(){y._addDismissNotifications(e);c1.resolve();},function(d1){if(y._csrfTokenInvalid(d1)&&(Z===false)){y._invalidCsrfTokenRecovery(c1,y.dismissNotification,[e]);}else{c1.reject(d1);L.error("Notification service - oData dismiss notification failed: ",d1,"sap.ushell.services.Notifications");}});return c1.promise();};this.registerNotificationsUpdateCallback=function(e){U.push(e);};this.registerDependencyNotificationsUpdateCallback=function(e,x){if(x===false){this.bUpdateDependencyInitiatorExists=true;}d.push({callback:e,dependent:x});};this.registerNotificationCountUpdateCallback=function(e){f.push(e);};this.notificationsSeen=function(){this._setNotificationsAsSeen();};this.isFirstDataLoaded=function(){return F;};this.readSettings=function(){var e;e=this._readSettingsFromServer();return e;};this.saveSettingsEntry=function(e){var x=this._writeSettingsEntryToServer(e);return x;};this.getUserSettingsFlags=function(){var e=new q.Deferred();if(B===true){e.resolve({highPriorityBannerEnabled:A});}else{T.done(function(){e.resolve({highPriorityBannerEnabled:A});});}return e.promise();};this.setUserSettingsFlags=function(e){A=e.highPriorityBannerEnabled;this._writeUserSettingsFlagsToPersonalization(e);};this._getNotificationSettingsMobileSupport=function(){return Q;};this._getDismissNotifications=function(){return _;};this.filterDismisssedItems=function(e,_){return e.filter(function(x){return!_.some(function(y){return y===x.originalItemId;});});};this._addDismissNotifications=function(e){if(_.indexOf(e)===-1){_.push(e);}};this._initializeDismissNotifications=function(){_=[];};this._getNotificationSettingsEmailSupport=function(){return R;};this.destroy=function(){h=true;if(i){clearTimeout(i);}else if(a){clearTimeout(a);}else if(b){clearTimeout(b);}if((v===M.WEB_SOCKET)&&w){w.close();}sap.ui.getCore().getEventBus().unsubscribe("launchpad","sessionTimeout",this.destroy,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","setConnectionToServer",this._onSetConnectionToServer,this);};this._readUnseenNotificationsCount=function(e){var x=this,y=new q.Deferred(),a1=this._getRequestURI(n.GET_BADGE_NUMBER),b1={requestUri:a1};O.read(b1,function(c1,d1){m.setProperty("/UnseenCount",d1.data.GetBadgeNumber.Number);x._setNativeIconBadge(d1.data.GetBadgeNumber.Number);y.resolve(d1.data.GetBadgeNumber.Number);},function(c1){if(c1.response&&c1.response.statusCode===200&&c1.response.body){var d1=JSON.parse(c1.response.body);m.setProperty("/UnseenCount",d1.value);x._setNativeIconBadge(d1.value);y.resolve(d1.value);}else{L.error("Notification service - oData read unseen notifications count failed: ",c1.message,"sap.ushell.services.Notifications");y.reject(c1);}});return y.promise();};this.readNotificationsCount=function(){var e=new q.Deferred(),x=this._getRequestURI(n.GET_NOTIFICATIONS_COUNT),y={requestUri:x};O.read(y,function(a1,b1){e.resolve(b1.data);},function(a1){if(a1.response&&a1.response.statusCode===200&&a1.response.body){var b1=JSON.parse(a1.response.body);e.resolve(b1.value);}else{L.error("Notification service - oData read notifications count failed: ",a1.message,"sap.ushell.services.Notifications");e.reject(a1);}});return e.promise();};this._getNotificationSettingsAvalability=function(){return K.promise();};this._setNotificationsAsSeen=function(){var e=this,x=new q.Deferred(),y=this._getRequestURI(n.RESET_BADGE_NUMBER),a1={requestUri:y,method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":H}};if(this._isFioriClientMode()===true||this._isPackagedMode()===true){this._setNativeIconBadge(0);}O.request(a1,function(){x.resolve();},function(b1){if(e._csrfTokenInvalid(b1)&&(Z===false)){e._invalidCsrfTokenRecovery(x,e._setNotificationsAsSeen);}else{L.error("Notification service - oData reset badge number failed: ",b1,"sap.ushell.services.Notifications");x.reject(b1);}});return x.promise();};this._readNotificationsData=function(e){var x=this,y,a1,b1,c1=new q.Deferred(),d1=[];y=this._readUnseenNotificationsCount(e);d1.push(y);b1=this.readNotificationsCount();b1.done(function(e1){m.setProperty("/NotificationsCount",e1);});a1=this.getNotificationsBufferBySortingType(n.NOTIFICATIONS_BY_DATE_DESCENDING,0,Y);d1.push(a1);q.when.apply(q,d1).then(function(){d1[0].done(function(){if(e===true){x._updateNotificationsCountConsumers();}});d1[1].done(function(e1){q.sap.flpmeasure.start(0,"Notifications (services + rendering)",7);m.setProperty("/Notifications",e1);x._notificationAlert(e1);if(e===true){x._updateNotificationsConsumers();x._updateDependentNotificationsConsumers();}c1.resolve();});});return c1.promise();};this._getHeaderXcsrfToken=function(){return H;};this._getDataServiceVersion=function(){return D;};this._getRequestURI=function(e,x){var y,a1=encodeURI(this._getConsumedIntents(e));switch(e){case n.NOTIFICATIONS:if(r.getNotifications.basic===undefined){r.getNotifications.basic=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$filter=IsGroupHeader%20eq%20false";}if(this._isIntentBasedConsumption()){if(r.getNotifications.byIntents===undefined){r.getNotifications.byIntents=r.getNotifications.basic.concat("&intents%20eq%20"+a1);}return r.getNotifications.byIntents;}return r.getNotifications.basic;case n.NOTIFICATIONS_BY_TYPE:if(r.getNotificationsByType.basic===undefined){r.getNotificationsByType.basic=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams";}if(this._isIntentBasedConsumption()){if(r.getNotificationsByType.byIntents===undefined){r.getNotificationsByType.byIntents=r.getNotificationsByType.basic.concat("&$filter=intents%20eq%20"+a1);}return r.getNotificationsByType.byIntents;}return r.getNotificationsByType.basic;case n.NOTIFICATIONS_GROUP_HEADERS:if(r.getNotificationsGroupHeaders.basic===undefined){r.getNotificationsGroupHeaders.basic=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$filter=IsGroupHeader%20eq%20true";}if(this._isIntentBasedConsumption()){if(r.getNotificationsGroupHeaders.byIntents===undefined){r.getNotificationsGroupHeaders.byIntents=r.getNotificationsGroupHeaders.basic.concat("&intents%20eq%20"+a1);}return r.getNotificationsGroupHeaders.byIntents;}return r.getNotificationsGroupHeaders.basic;case n.NOTIFICATIONS_IN_GROUP:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt desc&$filter=IsGroupHeader eq false and ParentId eq "+x.group+"&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+a1);}break;case n.GET_BADGE_NUMBER:if(r.getBadgeNumber.basic===undefined){r.getBadgeNumber.basic=o.serviceUrl+"/GetBadgeNumber()";}if(this._isIntentBasedConsumption()){if(r.getBadgeNumber.byIntents===undefined){r.getBadgeNumber.byIntents=o.serviceUrl+"/GetBadgeCountByIntent("+a1+")";}return r.getBadgeNumber.byIntents;}return r.getBadgeNumber.basic;case n.GET_NOTIFICATIONS_COUNT:if(r.getNotificationCount.basic===undefined){r.getNotificationCount.basic=o.serviceUrl+"/Notifications/$count";}return r.getNotificationCount.basic;case n.RESET_BADGE_NUMBER:if(r.resetBadgeNumber.basic===undefined){r.resetBadgeNumber.basic=o.serviceUrl+"/ResetBadgeNumber";}return r.resetBadgeNumber.basic;case n.GET_SETTINGS:if(r.getNotificationTypesSettings.basic===undefined){r.getNotificationTypesSettings.basic=o.serviceUrl+"/NotificationTypePersonalizationSet";}return r.getNotificationTypesSettings.basic;case n.GET_MOBILE_SUPPORT_SETTINGS:if(r.getMobileSupportSettings.basic===undefined){r.getMobileSupportSettings.basic=o.serviceUrl+"/Channels(ChannelId='SAP_SMP')";}return r.getMobileSupportSettings.basic;case n.GET_EMAIL_SUPPORT_SETTINGS:if(r.getEmailSupportSettings.basic===undefined){r.getEmailSupportSettings.basic=o.serviceUrl+"/Channels(ChannelId='SAP_EMAIL')";}return r.getEmailSupportSettings.basic;case n.VALIDATE_WEBSOCKET_CHANNEL:if(r.getWebSocketValidity.basic===undefined){r.getWebSocketValidity.basic=o.serviceUrl+"/Channels('SAP_WEBSOCKET')";}return r.getWebSocketValidity.basic;case n.NOTIFICATIONS_BY_DATE_DESCENDING:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt%20desc&$filter=IsGroupHeader%20eq%20false&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+a1);}break;case n.NOTIFICATIONS_BY_DATE_ASCENDING:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt%20asc&$filter=IsGroupHeader%20eq%20false&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+a1);}break;case n.NOTIFICATIONS_BY_PRIORITY_DESCENDING:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=Priority%20desc&$filter=IsGroupHeader%20eq%20false&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+a1);}break;default:y="";}return y;};this._readSettingsFromServer_noConnection=function(){var e=new q.Deferred(),x=[{NotificationTypeId:"type1",NotificationTypeDesc:"aaaaabbbbb-cccccddddd",PriorityDefault:"40-HIGH",DoNotDeliver:false,DoNotDeliverMob:true},{NotificationTypeId:"type2",NotificationTypeDesc:"cccccdddddccc-aaaaabbbbb",PriorityDefault:"10-LOW",DoNotDeliver:true,DoNotDeliverMob:true}];e.resolve(JSON.stringify({"@odata.context":"$metadata#NotificationTypePersonalizationSet","value":x}));return e.promise();};this._readSettingsFromServer_noData=function(){var e=new q.Deferred();e.resolve(JSON.stringify({"@odata.context":"$metadata#NotificationTypePersonalizationSet","value":{}}));return e.promise();};this._readSettingsFromServer=function(){var e=this._getRequestURI(n.GET_SETTINGS),x={requestUri:e},y=new q.Deferred();O.request(x,function(a1){y.resolve(a1.results);},function(a1){if(a1.response&&a1.response.statusCode===200&&a1.response.body){y.resolve(a1.response.body);}else{y.reject(a1);L.error("Notification service - oData get settings failed: ",a1,"sap.ushell.services.Notifications");}});return y.promise();};this._readMobileSettingsFromServer=function(){return this._readChannelSettingsFromServer(n.GET_MOBILE_SUPPORT_SETTINGS);};this._readEmailSettingsFromServer=function(){return this._readChannelSettingsFromServer(n.GET_EMAIL_SUPPORT_SETTINGS);};this._readChannelSettingsFromServer=function(e){var x=this._getRequestURI(e),y={requestUri:x},a1=new q.Deferred(),b1,c1;O.request(y,function(d1){if(typeof(d1.results)==="string"){b1=JSON.parse(d1.results);b1.successStatus=true;c1=JSON.stringify(b1);a1.resolve(c1);}else{d1.results.successStatus=true;a1.resolve(d1.results);}},function(d1){if(d1.response&&d1.response.statusCode===200&&d1.response.body){b1=JSON.parse(d1.response.body);b1.successStatus=true;c1=JSON.stringify(b1);a1.resolve(c1);}else{a1.resolve(JSON.stringify({successStatus:false}));L.error("Notification service - oData get settings failed: ",d1,"sap.ushell.services.Notifications");}});return a1.promise();};this._checkWebSocketActivity=function(){var e=this._getRequestURI(n.VALIDATE_WEBSOCKET_CHANNEL),x={requestUri:e},y=new q.Deferred(),a1;O.request(x,function(b1){if(typeof(b1.results)==="string"){a1=JSON.parse(b1.results);y.resolve(a1.IsActive);}else{y.resolve(false);}},function(b1){if(b1.response&&b1.response.statusCode===200&&b1.response.body){a1=JSON.parse(b1.response.body);y.resolve(a1.IsActive);}else{y.resolve(false);L.error("Notification service - oData get settings failed: ",b1,"sap.ushell.services.Notifications");}});return y.promise();};this._writeSettingsEntryToServer=function(e){var x=this,y,a1=this._getRequestURI(n.GET_SETTINGS)+"(NotificationTypeId="+e.NotificationTypeId+")",b1={requestUri:a1,method:"PUT",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","DataServiceVersion":D,"X-CSRF-Token":H}};b1.data=JSON.parse(JSON.stringify(e));b1.data["@odata.context"]="$metadata#NotificationTypePersonalizationSet/$entity";y=new q.Deferred();O.request(b1,function(c1){y.resolve(c1);},function(c1){if(c1.response&&c1.response.statusCode===200&&c1.response.body){y.resolve(c1.response.body);}else if(x._csrfTokenInvalid(c1)&&(Z===false)){x._invalidCsrfTokenRecovery(y,x._writeSettingsEntryToServer,[e]);}else{y.reject(c1);L.error("Notification service - oData set settings entry failed: ",c1,"sap.ushell.services.Notifications");}});return y.promise();};this._updateNotificationsConsumers=function(){U.forEach(function(e){e();});};this._updateDependentNotificationsConsumers=function(){var e=this,x=new q.Deferred();d.forEach(function(y){if(e.bUpdateDependencyInitiatorExists===false){y.callback();}else if(y.dependent===true){y.callback(x.promise());}else{y.callback(x);}});};this._updateNotificationsCountConsumers=function(){f.forEach(function(e){e();});};this._updateAllConsumers=function(){this._updateNotificationsConsumers();this._updateNotificationsCountConsumers();this._updateDependentNotificationsConsumers();};this._getModel=function(){return m;};this._getMode=function(){return v;};this._setWorkingMode=function(){var e;if(o.intentBasedConsumption===true){C=this._getIntentsFromConfiguration(o.consumedIntents);if(C.length>0){I=true;}}if(this._isPackagedMode()){v=M.PACKAGED_APP;e=this._getIntentsFromConfiguration(window.fiori_client_appConfig.applications);if(e.length>0){C=e;}if(C.length>0){I=true;}this._registerForPush();this._readNotificationsData(true);this._setNativeIconBadgeWithDelay();return;}this._performFirstRead();};this._performFirstRead=function(){var e=this,x,y=this._readNotificationsData(true);y.done(function(){x=e._getFioriClientRemainingDelay();if(x<=0){e._fioriClientStep();}else{i=setTimeout(function(){e._fioriClientStep();},x);}F=true;}).fail(function(a1){L.error("Notifications oData read failed. Error: "+a1);return;});};this._fioriClientStep=function(){var e=this,x;if(this._isFioriClientMode()){v=M.FIORI_CLIENT;this._addPushNotificationHandler();x=this.getUnseenNotificationsCount();x.done(function(y){e._setNativeIconBadge(y,function(){});}).fail(function(){});}else{this._webSocketStep();}};this._webSocketStep=function(){v=M.WEB_SOCKET;this._establishWebSocketConnection();};this._webSocketRecoveryStep=function(){if(l===false){l=true;a=setTimeout(function(){this._webSocketStep();}.bind(this),j);}else{this._activatePollingAfterInterval();}};this._activatePollingAfterInterval=function(){var e=this;b=setTimeout(function(){e._activatePolling();},P*1000);};this._activatePolling=function(){var e=this;v=M.POLLING;this._readNotificationsData(true);b=setTimeout(e._activatePolling.bind(e,P,false),(P*1000));};this._formatAsDate=function(e){return new Date(e);};this._notificationAlert=function(e){if(A===false){return;}var x,y=[],a1=0;for(x in e){if(this.lastNotificationDate&&this._formatAsDate(e[x].CreatedAt)>this.lastNotificationDate){if(e[x].Priority==="HIGH"){y.push(e[x]);}}if(a1<this._formatAsDate(e[x].CreatedAt)){a1=this._formatAsDate(e[x].CreatedAt);}}if(this.lastNotificationDate&&y&&y.length>0){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Notifications","onNewNotifications",y);}this.lastNotificationDate=a1;};this._getFioriClientRemainingDelay=function(){return k-(new Date()-t);};this._establishWebSocketConnection=function(){var x=this,y=false,a1;try{w=this._getWebSocketObjectObject(W,[S.SUPPORTED_PROTOCOLS.v10]);w.attachMessage(this,function(b1){a1=b1.getParameter("pcpFields");if((a1)&&(a1.Command)&&(a1.Command==="Notification")){x._readNotificationsData(true);}});w.attachOpen(this,function(){x._checkWebSocketActivity().done(function(b1){if(!b1){y=true;w.close();x._activatePollingAfterInterval();}});L.info("Notifications UShell service WebSocket: webSocket connection opened");});w.attachClose(this,function(b1){L.warning("Notifications UShell service WebSocket: attachClose called with code: "+b1.mParameters.code+" and reason: "+b1.mParameters.reason);if((!h)&&(!y)){x._webSocketRecoveryStep();}});w.attachError(this,function(){L.warning("Notifications UShell service WebSocket: attachError called!");});}catch(e){L.error("Exception occurred while creating new sap.ui.core.ws.SapPcpWebSocket. Message: "+e.message);}};this._isFioriClientMode=function(){return!(sap.FioriClient===undefined);};this._isPackagedMode=function(){return(window.fiori_client_appConfig&&window.fiori_client_appConfig.prepackaged===true);};this._setNativeIconBadge=function(e){if((sap.Push!==undefined)&&(sap.Push.setBadgeNumber!==undefined)){sap.Push.setBadgeNumber(e,function(){});}};this._setNativeIconBadgeWithDelay=function(){var e=this,x;setTimeout(function(){x=e.getUnseenNotificationsCount();x.done(function(y){e._setNativeIconBadge(y);}).fail(function(){});},4000);};this._getIntentsFromConfiguration=function(e){var x=[],y,a1;if(e&&e.length>0){for(a1=0;a1<e.length;a1++){y=e[a1].intent;x.push(y);}}return x;};this._handlePushedNotification=function(e){var x,y,a1,b1,c1=[],d1;if(e!==undefined){if((e.additionalData===undefined)||(e.additionalData.foreground===true)){this._readNotificationsData(true);}else{if(e.additionalData&&e.additionalData.NavigationTargetObject){y=e.additionalData.NavigationTargetObject;}else{y=e.NavigationTargetObject;}if(e.additionalData&&e.additionalData.NavigationTargetAction){a1=e.additionalData.NavigationTargetAction;}else{a1=e.NavigationTargetAction;}if(e.additionalData&&e.additionalData.NavigationTargetParam){b1=e.additionalData.NavigationTargetParam;}else{b1=e.NavigationTargetParam;}if(b1){if(typeof b1==="string"||b1 instanceof String){c1[0]=b1;}else if(Array.isArray(b1)===true){c1=b1;}}x=e.NotificationId;if((typeof hasher!=="undefined")&&(hasher.getHash()===y+"-"+a1)){d1=sap.ui.getCore().byId("viewPortContainer");if(d1){d1.switchState("Center");}}u.toExternalWithParameters(y,a1,c1);this.markRead(x);this._readNotificationsData(true);}}};this._registerForPush=function(){sap.Push.initPush(this._handlePushedNotification.bind(this));};this._addPushNotificationHandler=function(){document.addEventListener("deviceready",this._registerForPush.bind(this),false);};this._isIntentBasedConsumption=function(){return I;};this._getConsumedIntents=function(e){var x="",y;if(!this._isIntentBasedConsumption()){return x;}if(C.length>0){if(e!==n.GET_BADGE_NUMBER){x="&";}for(y=0;y<C.length;y++){if(e===n.GET_BADGE_NUMBER){if(y===0){x=C[y];}else{x=x+","+C[y];}}else{x=x+"NavigationIntent%20eq%20%27"+C[y]+"%27";}}}return x;};this._revalidateCsrfToken=function(){var e;H=undefined;$=false;e=this.getNotificationsBufferBySortingType(n.NOTIFICATIONS_BY_DATE_DESCENDING,0,1);return e.promise();};this._csrfTokenInvalid=function(e){return(e.response&&(e.response.statusCode===403)&&(e.response.headers["x-csrf-token"]==="Required"));};this._invalidCsrfTokenRecovery=function(x,y,a1){var b1=this,c1=this._revalidateCsrfToken(),d1;Z=true;c1.done(function(){d1=y.apply(b1,a1);d1.done(function(e){Z=false;x.resolve(e);});d1.fail(function(e){Z=false;if(e.response&&e.response.statusCode===200&&e.response.body){x.resolve(e.response.body);}else{x.reject(e);}});});c1.fail(function(e){Z=false;x.reject(e);L.error("Notification service - oData markRead failed: ",e.message,"sap.ushell.services.Notifications");});};this._notificationsAscendingSortBy=function(e,a1){e.sort(function(x,y){var b1=x[a1],c1=y[a1];if(b1===c1){b1=x.id;c1=y.id;}return c1>b1?-1:1;});return e;};this._getWebSocketObjectObject=function(W,e){return new S(W,e);};this._notificationsDescendingSortBy=function(e,a1){e.sort(function(x,y){var b1=x[a1],c1=y[a1];if(b1===c1){b1=x.id;c1=y.id;return b1>c1?-1:1;}if(a1==="Priority"){if(b1==="HIGH"){return-1;}if(c1==="HIGH"){return 1;}if(b1==="MEDIUM"){return-1;}return 1;}return b1>c1?-1:1;});return e;};this.getOperationEnum=function(){return n;};this._readUserSettingsFlagsFromPersonalization=function(){var e=this,x,y;try{y=this._getUserSettingsPersonalizer().getPersData();}catch(a1){L.error("Personalization service does not work:");L.error(a1.name+": "+a1.message);x=new q.Deferred();x.reject(a1);y=x.promise();}y.done(function(b1){if(b1===undefined){e._writeUserSettingsFlagsToPersonalization({highPriorityBannerEnabled:A});}else{A=b1.highPriorityBannerEnabled;}B=true;G.resolve();});y.fail(function(){L.error("Reading User Settings flags from Personalization service failed");});};this._writeUserSettingsFlagsToPersonalization=function(e){var x,y;try{y=this._getUserSettingsPersonalizer().setPersData(e);}catch(a1){L.error("Personalization service does not work:");L.error(a1.name+": "+a1.message);x=new q.Deferred();x.reject(a1);y=x.promise();}return y;};this._getUserSettingsPersonalizer=function(){if(z===undefined){z=this._createUserSettingsPersonalizer();}return z;};this._createUserSettingsPersonalizer=function(){var e=sap.ushell.Container.getService("Personalization"),x,y={keyCategory:e.constants.keyCategory.FIXED_KEY,writeFrequency:e.constants.writeFrequency.LOW,clientStorageAllowed:true},a1={container:"sap.ushell.services.Notifications",item:"userSettingsData"},b1=e.getPersonalizer(a1,y,x);return b1;};this._updateCSRF=function(e){if(($===true)||(e.headers===undefined)){return;}if(!this._getHeaderXcsrfToken()){H=e.headers["x-csrf-token"]||e.headers["X-CSRF-Token"]||e.headers["X-Csrf-Token"];}if(!this._getDataServiceVersion()){D=e.headers.DataServiceVersion||e.headers["odata-version"];}$=true;};this._userSettingInitialization=function(){var e,x,y,a1={settingsAvailable:false,mobileAvailable:false,emailAvailable:false},b1,c1,d1,e1;this._readUserSettingsFlagsFromPersonalization();e=this._readSettingsFromServer();x=this._readMobileSettingsFromServer();y=this._readEmailSettingsFromServer();b1=[e,x,y];e.done(function(){a1.settingsAvailable=true;});x.done(function(f1){c1=JSON.parse(f1);d1=c1.successStatus;if(d1){Q=f1?c1.IsActive:false;a1.mobileAvailable=Q;}else{Q=false;a1.mobileAvailable=false;}});y.done(function(f1){c1=JSON.parse(f1);e1=c1.successStatus;if(e1){R=f1?c1.IsActive:false;a1.emailAvailable=R;}else{R=false;a1.emailAvailable=false;}});q.when.apply(q,b1).then(function(){K.resolve(a1);});};this._closeConnection=function(){if(!h){if(v===M.WEB_SOCKET&&w){w.close();}if(v===M.POLLING&&b){clearTimeout(b);}h=true;}};this._resumeConnection=function(){if(h){h=false;this._webSocketStep();}};}
N.hasNoAdapter=true;return N;},true);
sap.ui.predefine('sap/ushell/services/PageBuilding',["sap/ui2/srvc/factory","sap/ui2/srvc/page","sap/ui/thirdparty/jquery"],function(f,p,q){"use strict";
function P(a,c){this.getFactory=function(){return a.getFactory();};this.getPage=function(s){return a.getFactory().createPage(s);};this.getPageSet=function(i){var d=new q.Deferred();a.getFactory().createPageSet(i,d.resolve.bind(d),d.reject.bind(d));return d.promise();};}
P.hasNoAdapter=false;return P;},true);
sap.ui.predefine('sap/ushell/services/PagePersistence',[],function(){"use strict";
function P(){this._init.apply(this,arguments);}
P.prototype._init=function(a,s){this._oServiceConfiguration=s;this.oAdapter=a;};
P.prototype.getPage=function(i){return this.oAdapter.getPage(i);};
P.hasNoAdapter=false;return P;});
sap.ui.predefine('sap/ushell/services/PageReferencing',["sap/ushell/services/_PageReferencing/PageDereferencer","sap/ushell/services/_PageReferencing/PageReferencer"],function(P,a){"use strict";
function b(){}
b.prototype.dereferencePage=function(p,v,n){return P.dereference(p,v,n);};
b.prototype.createReferencePage=function(p,c){return a.createReferencePage(p,c);};
b.hasNoAdapter=true;return b;});
sap.ui.predefine('sap/ushell/services/Pages',["sap/base/Log","sap/base/util/ObjectPath","sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/utils","sap/ushell/utils/RestrictedJSONModel"],function(L,O,r,a,u,R){"use strict";var P=function(){this.COMPONENT_NAME="sap/ushell/services/Pages";this._oCdmServicePromise=sap.ushell.Container.getServiceAsync("CommonDataModel");this._oPagesModel=new R({pages:[]});};
P.prototype._getParsedCdmPage=function(c){var p={id:c.site.identification.id||"",title:c.site.identification.title||"",description:c.site.identification.description||""};p.sections=r.getGroupIdsFromSite(c).map(function(g){var C=r.getGroupFromSite(c,g);var s={id:r.getGroupId(C)||"",title:r.getGroupTitle(C)||""};s.visualizations=r.getGroupTiles(C).reduce(function(v,o){var b=a.get(c,r.getTileVizId(o));if(!b){L.error("Tile "+o.id+" with vizId "+o.vizId+" has no matching visualization. As the tile cannot be used to start an app it is removed from the page.");}else{var d=a.getCdmParts(c,o);var V={vizId:r.getTileVizId(o)||"",vizType:a.getTypeId(b)||"",title:a.getTitle(d)||"",subTitle:a.getSubTitle(d)||"",icon:a.getIcon(d)||"",keywords:a.getKeywords(d)||[],info:a.getInfo(d)||"",target:a.getTarget(b)||{}};v.push(V);}return v;},[]);return s;});return p;};
P.prototype.getModel=function(){return this._oPagesModel;};
P.prototype.getPagePath=function(p){var b=this._oPagesModel.getProperty("/pages");for(var i=0;i<b.length;i+=1){if(b[i].id===p){return"/pages/"+i;}}return"";};
P.prototype.loadPage=function(p){var s=this.getPagePath(p);if(s){return Promise.resolve(s);}return this._oCdmServicePromise.then(function(c){return c._getPage(p).then(function(S){var i=this._oPagesModel.getProperty("/pages/").length;var n="/pages/"+i;this._oPagesModel._setProperty(n,this._getParsedCdmPage(S));return n;}.bind(this)).catch(function(e){L.error("Pages: Failed to gather Site from CDM Service.",e,this.COMPONENT_NAME);return Promise.reject(e);}.bind(this));}.bind(this)).catch(function(e){L.error("Pages: Couldn't to resolve CDM Service.",e,this.COMPONENT_NAME);return Promise.reject(e);}.bind(this));};
P.hasNoAdapter=true;return P;},true);
sap.ui.predefine('sap/ushell/services/Personalization',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/ContextContainer","sap/ushell/services/_Personalization/WindowAdapter","sap/ushell/services/_Personalization/TransientPersonalizer","sap/ushell/services/_Personalization/PersonalizationContainer","sap/ushell/services/_Personalization/Personalizer","sap/ushell/services/_Personalization/VariantSetAdapter","sap/ushell/services/_Personalization/Variant","sap/ushell/services/_Personalization/VariantSet","sap/ushell/services/_Personalization/WindowAdapterContainer","sap/ui/base/ManagedObject","sap/ui/thirdparty/jquery"],function(u,p,a,C,W,T,P,b,V,c,d,e,M,q){"use strict";
function f(A,o,s,g){this._oConfig=(g&&g.config)||{};this._seed=(g&&g.config&&typeof g.config.seed==="string"&&g.config.seed)||"12345678901AFERANDOMBETTER";while(this._seed.length<40){this._seed=this._seed+this._seed;}this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new W(this,A)};this._oAdapterWindowOnly={lazy:false,instance:new W(this,undefined)};this._oContainerMap=new u.Map();this._oPendingOperationsMap=new u.Map();}
f.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseeded by subsequent save";f.prototype.constants=a;
f.prototype._configureAppVariantStorage=function(A){var t=this,D="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!A){A={adapter:{module:D}};}if(Object.keys(A).length===0||A.enabled===false){return;}var s=(A.adapter&&A.adapter.module)||D,g=s.split(".").join("/");var h=function(){t._oAppVariantAdapterLoadPromise=t._oAppVariantAdapterLoadPromise||(function(){var o=new q.Deferred();try{sap.ui.require([g],R);}catch(r){o.reject(r);}function R(i){try{var j=new i();var w=new W(t,j);o.resolve(w);}catch(E){o.reject(E);}}return o.promise();})();return t._oAppVariantAdapterLoadPromise;};return{lazy:true,create:h};};
f.prototype.getGeneratedKey=function(){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",g=s.length,r="",t=this;var R=function(i){return(t._seed.charCodeAt(i)+Math.floor(Math.random()*g))%g;};if(window&&window.crypto&&window.crypto.getRandomValues){var h=new Uint32Array(40);window.crypto.getRandomValues(h);R=function(i){return(h[i]+t._seed.charCodeAt(i))%s.length;};}var j=function(i){return s[R(i)];};while(r.length<40){r+=j(r.length);}return r;};
f.prototype.getPersonalizer=function(o,s,g){g=g||this._getApplicationComponent();return new b(this,this._oAdapterWithBackendAdapter.instance,o,s,g);};
f.prototype._getApplicationComponent=function(){var o;var O=M._sOwnerId;if(O){o=sap.ui.getCore().getComponent(O);if(o instanceof sap.ui.core.UIComponent){return o;}}return undefined;};
f.prototype.getTransientPersonalizer=function(){return new T();};
f.prototype.getContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,false,o);};
f.prototype.createEmptyContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,true,o);};
f.prototype._createContainer=function(s,S,g,o){var t=this,l,h,i,j,A,k,U,D=new q.Deferred();if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}l=p.isLaunchpadReload();U=!!(p.isAppVariant(o)&&(!S||!S.shared)&&this._oAppVariantAdapterWithBackendAdapter);A=p.adjustScope(S,l);if(U){var m=o.getManifestObject();A.component=o;A.appVarId=m.getEntry("/sap.ui5/appVariantId");A.appVersion=m.getEntry("/sap.app/applicationVersion/version");}k=p.addContainerPrefix(s);i=U?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;h=t._oAdapterWindowOnly;j=p.pickAdapter(S,l,h,i);p.loadAdapter(j).then(function(L){var n,r=new C(t,L,k,A,o);var v=(L&&L.supportsGetWithoutSubsequentLoad===true);if(g&&v){n=new q.Deferred();n.resolve(r);}else{n=r.load();}n.fail(function(){D.reject();}).done(function(){if(g||r._isExpired()){r.clear();}D.resolve(r);});},function(E){D.reject(E);});return D.promise();};
f.prototype.delContainer=function(s,S){var D={},o,g="",t=this;S=t._adjustScope(S,false);g=p.addContainerPrefix(s);D=new q.Deferred();o=t._pendingContainerOperations_cancelAddNext(s,null);o.always(function(){t.getContainer(s,S).fail(function(){t._pendingContainerOperations_cancelAddNext(s,D);D.reject();}).done(function(){var A;t._pendingContainerOperations_cancelAddNext(s,D);A=S.validity===0?t._oAdapterWindowOnly:t._oAdapterWithBackendAdapter;p.loadAdapter(A).then(function(l){l.delAdapterContainer(g,S).fail(function(){D.reject();}).done(function(){D.resolve();});},function(){D.reject();});});});return D.promise();};
f.prototype._pendingContainerOperations_flushAddNext=function(s,D){var o,S;o=this._oPendingOperationsMap.get(s);if(!o){o=new q.Deferred();o.resolve();}if(D!==null){this._oPendingOperationsMap.put(s,D);}if(!o||o.state()!=="pending"){return o;}clearTimeout(o._sapTimeoutId);o._sapTimeoutId=undefined;if(typeof o._sapFnSave==="function"){S=o._sapFnSave;o._sapFnSave=undefined;S();}return o;};
f.prototype._pendingContainerOperations_cancelAddNext=function(s,D){var o;o=this._oPendingOperationsMap.get(s);if(!o){o=new q.Deferred();o.resolve();}if(D!==null){this._oPendingOperationsMap.put(s,D);}if(!o||o.state()!=="pending"){return o;}if(o._sapTimeoutId){clearTimeout(o._sapTimeoutId);o._sapTimeoutId=undefined;o.resolve(f.prototype.SAVE_DEFERRED_DROPPED);}return o;};
f.prototype.getPersonalizationContainer=function(s){var g="",o={},D={};if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}g=p.addContainerPrefix(s);if(this._oContainerMap.containsKey(g)){return this._oContainerMap.get(g).promise();}D=new q.Deferred();o=new P(this._oAdapterWithBackendAdapter.instance,g);o.done(function(h){D.resolve(h);}).fail(function(h){D.reject(h);});this._oContainerMap.put(g,D);return D.promise();};
f.prototype.delPersonalizationContainer=function(s){var D={},g="",t=this;g=p.addContainerPrefix(s);D=new q.Deferred();this.getPersonalizationContainer(s).fail(function(){D.reject();}).done(function(){t._oAdapterWithBackendAdapter.instance.delAdapterContainer(g).fail(function(){D.reject();}).done(function(){t._oContainerMap.remove(g);D.resolve();});});return D.promise();};
f.prototype._adjustScope=p.adjustScope;f.hasNoAdapter=false;f.ContextContainer=C;f.Variant=c;f.VariantSet=d;f.VariantSetAdapter=V;f.WindowAdapter=W;f.WindowAdapterContainer=e;return f;},true);
sap.ui.predefine('sap/ushell/services/PluginManager',["sap/ushell/services/_PluginManager/Extensions","sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ushell/utils"],function(g,q,U,u){"use strict";var S="sap.ushell.services.PluginManager",a="sap-ushell-plugin-type",b="RendererExtensions",c="sap.ushell.components.shell.defaults",s=[b,"UserDefaults","UserImage","ContentProvider","AppWarmup"];
function P(){var t=this;this._oPluginCollection={};this._oCategoryLoadingProgress={};this._mInitializedComponentPromise={};s.forEach(function(p){t._oPluginCollection[p]={};t._oCategoryLoadingProgress[p]=new q.Deferred();});this._handlePluginCreation=function(C,p,o){var t=this,d=(t._oPluginCollection[C])[p];try{if(d.hasOwnProperty("component")){if(t._mInitializedComponentPromise.hasOwnProperty(d.component)){t._mInitializedComponentPromise[d.component].then(function(){t._instantiateComponent(d,o);},function(){t._instantiateComponent(d,o);});}else{t._mInitializedComponentPromise[d.component]=t._instantiateComponent(d,o);}}else{q.sap.log.error("Invalid plugin configuration. The plugin "+p+" must contain a <component> key",S);}}catch(e){q.sap.log.error("Error while loading bootstrap plugin: "+d.component||"",S);if(o){o.reject(e);}}};this._getFileNameForXhrAuth=function(){return"Component-preload.js";};this._handleXhrAuthentication=function(A,C){var x;if(A&&["true",true,"X"].indexOf(A["sap-ushell-xhr-authentication"])>-1){if(!C){q.sap.log.error(["Illegal state: configuration parameter 'sap-ushell-xhr-authentication-timeout' set, but no component URL specified.","XHR authentication request will not be sent. Please check the target mapping definitions for plug-ins","and the application index."].join(" "),undefined,S);return q.when();}if(A.hasOwnProperty("sap-ushell-xhr-authentication-timeout")){x=parseInt(A["sap-ushell-xhr-authentication-timeout"],10);if(isNaN(x)){q.sap.log.error(["Invalid value for configuration parameter 'sap-ushell-xhr-authentication-timeout' for plug-in component with URL '",C,"': '",A["sap-ushell-xhr-authentication-timeout"],"' is not a number. Timeout will be ignored."].join(""),undefined,S);}else{sap.ushell.Container.setXhrLogonTimeout(C,x);}}return q.ajax(C+"/"+this._getFileNameForXhrAuth());}return q.when();};this._instantiateComponent=function(p,o){var d=new q.Deferred(),C=JSON.parse(JSON.stringify(p)),A={ui5ComponentName:C.component,url:C.url,getExtensions:g};function e(E){return function(f){E=E||"Cannot create UI5 plugin component: (componentId/appdescrId :"+A.ui5ComponentName+")\n"+f+" properties "+JSON.stringify(A)+"\n This indicates a plugin misconfiguration, see e.g. Note 2316443.";f=f||"";q.sap.log.error(E,f.stack,S);if(o){o.reject.apply(this,arguments);}d.reject.apply(this,arguments);};}function l(){sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(A).done(function(){if(o){o.resolve();}d.resolve.apply(this,arguments);}).fail(e());}C.name=C.component;delete C.component;A.applicationDependencies=C;if(C.config){A.applicationConfiguration=C.config;delete C.config;}A.loadDefaultDependencies=false;this._handleXhrAuthentication(A.applicationConfiguration,C.url).done(l).fail(e("XHR logon for FLP plugin failed"));return d.promise();};this.getSupportedPluginCategories=function(){return JSON.parse(JSON.stringify(s));};this.getRegisteredPlugins=function(){return JSON.parse(JSON.stringify(this._oPluginCollection));};this.registerPlugins=function(p){var t=this,C,o,d,e=[];if(!p){return;}u.addTime("PluginManager.registerPlugins");Object.keys(p).sort().forEach(function(f){C=p[f]||{};o=C.config||{};d=o[a]||"";if(C.enabled===false){return;}if(C.enabled===undefined){C.enabled=true;}if(C&&C.hasOwnProperty("module")){q.sap.log.error("Plugin "+f+" cannot get registered, because the module mechanism for plugins is not valid anymore. Plugins need to be defined as SAPUI5 components.",S);q.sap.require(C.module);return;}if(o&&o.hasOwnProperty(a)){if(s&&Array.prototype.indexOf.call(s,d)!==-1){if(e.indexOf(d)===-1){e.push(d);}t._oPluginCollection[d][f]=JSON.parse(JSON.stringify(C));}else{q.sap.log.warning("Plugin "+f+" will not be inserted into the plugin collection of the PluginManager, because of unsupported category "+d,S);}}else{t._oPluginCollection[b][f]=JSON.parse(JSON.stringify(C));if(e.indexOf(b)===-1){e.push(b);}}});e.forEach(function(f){if(t._oCategoryLoadingProgress.hasOwnProperty(f)&&t._oCategoryLoadingProgress[f].state()==="resolved"){t.loadPlugins(f);}});};this.getPluginLoadingPromise=function(p){if(this._oCategoryLoadingProgress.hasOwnProperty(p)){return this._oCategoryLoadingProgress[p].promise();}};this.loadPlugins=function(p){var t=this,d,o,e;u.setPerformanceMark("FLP -- PluginManager.startLoadPlugins");u.addTime("PluginManager.startLoadPlugins["+p+"]");if(s&&Array.prototype.indexOf.call(s,p)!==-1){if(t._oCategoryLoadingProgress[p].pluginLoadingTriggered===undefined){t._oCategoryLoadingProgress[p].pluginLoadingTriggered=true;}if(Object.keys(t._oPluginCollection[p]).length>0){d=[];e=Object.keys(t._oPluginCollection[p]);if(new U(window.location.href).get("sap-ushell-xx-pluginmode")==="discard"&&p==="RendererExtensions"){e=e.filter(function(i){return(t._oPluginCollection[p][i].component===c);});}e.forEach(function(f){var h=t._oPluginCollection[p][f];if(!h.loaded){h.loaded=true;o=new q.Deferred();d.push(o.promise());t._handlePluginCreation(p,f,o);}});q.when.apply(undefined,d).done(function(){u.addTime("PluginManager.endLoadPlugins["+p+"]");u.setPerformanceMark("FLP -- PluginManager.endLoadPlugins");t._oCategoryLoadingProgress[p].resolve();}).fail(t._oCategoryLoadingProgress[p].reject.bind());}else{t._oCategoryLoadingProgress[p].resolve();}}else{q.sap.log.error("Plugins with category "+p+" cannot be loaded by the PluginManager",S);t._oCategoryLoadingProgress[p].reject("Plugins with category "+p+" cannot be loaded by the PluginManager");}return t._oCategoryLoadingProgress[p].promise();};}
P.hasNoAdapter=true;return P;},true);
sap.ui.predefine('sap/ushell/services/ReferenceResolver',["sap/ushell/User","sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject"],function(U,O,q,i){"use strict";
function a(){this.getValue=function(r){var d=new q.Deferred();var v;if(r==="User.env.sap-ui-legacy-date-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyDateFormat();}if(r==="User.env.sap-ui-legacy-number-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyNumberFormat();}if(r==="User.env.sap-ui-legacy-time-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyTimeFormat();}if(r==="User.env.sap-language"){v=sap.ushell.Container.getUser().getLanguage();}if(r==="User.env.sap-languagebcp47"){v=sap.ushell.Container.getUser().getLanguageBcp47();}if(r==="User.env.sap-accessibility"){v=(sap.ushell.Container.getUser().getAccessibilityMode())?"X":undefined;}if(r==="User.env.sap-statistics"){v=(sap.ui.getCore().getConfiguration().getStatistics())?"true":undefined;}if(r==="User.env.sap-theme"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}if(r==="User.env.sap-theme-name"){v=sap.ushell.Container.getUser().getTheme();}if(r==="User.env.sap-theme-NWBC"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.NWBC);}d.resolve({"value":v});return d.promise();};}
function R(c,p,C){this._getUserEnvReferenceResolver=function(){if(!this.oUserEnvReferenceResolver){this.oUserEnvReferenceResolver=new a();}return this.oUserEnvReferenceResolver;};this.resolveReferences=function(r){var t=this,d=new q.Deferred(),u,b=[],A=true,D={},o={},e;var g=r.map(function(s){var h;if(s.indexOf("User.env.")===0){h=s;o[h]=1;}if(s.indexOf("UserDefault.")===0){h=t._extractAnyUserDefaultReferenceName(s);D[h]=1;}if(typeof h!=="string"){A=false;q.sap.log.error("'"+s+"' is not a legal reference name","sap.ushell.services.ReferenceResolver");}return{full:s,name:h};});if(!A){return d.reject("One or more references could not be resolved").promise();}Object.keys(D).forEach(function(n){u=u||sap.ushell.Container.getService("UserDefaultParameters");b.push(u.getValue(n));});Object.keys(o).forEach(function(n){e=e||t._getUserEnvReferenceResolver();b.push(e.getValue(n));});q.when.apply(q,b).done(function(){var k={};var I=0,h=arguments;Object.keys(D).forEach(function(n){D[n]=h[I];I=I+1;});Object.keys(o).forEach(function(n){o[n]=h[I];I=I+1;});g.forEach(function(j){var m;if(j.full.indexOf("UserDefault.extended.")===0){m=t.mergeSimpleAndExtended(D[j.name]);if(!i(m)){k[j.full]=m;}else{k[j.full]=undefined;}}else if(j.full.indexOf("UserDefault.")===0){k[j.full]=D[j.name].value;}else if(j.full.indexOf("User.env.")===0){k[j.full]=o[j.name].value;}});d.resolve(k);});return d.promise();};this._extractAnyUserDefaultReferenceName=function(r){var P=this.extractExtendedUserDefaultReferenceName(r);if(typeof P==="string"){return P;}return this.extractUserDefaultReferenceName(r);};this.extractExtendedUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.extended.")!==0){return undefined;}return r.replace(/^UserDefault[.]extended[.]/,"");};this.extractUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.")!==0||r.indexOf("UserDefault.extended.")===0){return undefined;}return r.replace(/^UserDefault[.]/,"");};this.mergeSimpleAndExtended=function(v){var m=q.extend(true,{},v.extendedValue);if(typeof v.value==="string"){if(!Array.isArray(m.Ranges)){m.Ranges=[];}m.Ranges.push({"Sign":"I","Option":"EQ","Low":v.value,"High":null});}return m;};function f(u){var r=/{([^}%]*%%[^%]+%%)}?/g,b=/([^%]*)%%/,d=/%%([^%]+)%%/,o,e,g,F=[];o=r.exec(u);while(o){e=b.exec(o[1]);g=d.exec(o[1]);F.push({edmType:e[1],name:g[1]});o=r.exec(u);}return F;}this.resolveUserDefaultParameters=function(u){var d=new q.Deferred(),r,s,I=[],o;o=/[^(?]*/.exec(u);r=(o===null)?[]:f(o[0]);r.forEach(function(g){I.push(g.name);});o=/[(?][^]*/.exec(u);r=(o===null)?[]:f(o[0]);var b=[],e={};r.forEach(function(g){b.push(g.name);e[g.name]=g.edmType;});s=b.filter(function(g){if(/^UserDefault\.(?!extended\.).+/.test(g)){return true;}I.push(g);return false;});if(s.length>0){this.resolveReferences(s).done(function(g){var h=u,D=[];Object.keys(g).forEach(function(j){var k,l=false;while(k!=h){k=h;if(g[j]!==undefined){var F=O.formatValue(g[j],e[j]);h=h.replace("{"+e[j]+"%%"+j+"%%}",window.encodeURIComponent(F));}else{l=true;h=h.replace("{"+e[j]+"%%"+j+"%%}","");}}if(l){D.push(j);}});d.resolve({url:h,defaultsWithoutValue:D,ignoredReferences:I});});}else{d.resolve({url:u,defaultsWithoutValue:[],ignoredReferences:I});}return d.promise();};}
R.hasNoAdapter=true;return R;},true);
sap.ui.predefine('sap/ushell/services/Search',["jquery.sap.global",'sap/ushell/renderers/fiori2/search/appsearch/AppSearch'],function($,A){"use strict";
function S(a,c){this.init.apply(this,arguments);}
S.prototype={init:function(a,c,p,s){this.oAdapter=a;this.oContainerInterface=c;this.oLpdService=sap.ushell.Container.getService("LaunchPage");var b={optimizedAppSearch:false};if(s&&s.config&&s.config.optimizedAppSearch!==undefined){b.optimizedAppSearch=s.config.optimizedAppSearch;}this.appSearch=new A(b);},isSearchAvailable:function(){return this.oAdapter.isSearchAvailable();},getSina:function(){return this.oAdapter.getSina();},prefetch:function(){return this.appSearch.prefetch();},queryApplications:function(q){q.top=q.top||10;q.skip=q.skip||0;return this.appSearch.search(q).then(function(s){return{totalResults:s.totalCount,searchTerm:q.searchTerm,getElements:function(){return s.tiles;}};}.bind(this));}};S.hasNoAdapter=false;return S;},true);
sap.ui.predefine('sap/ushell/services/ShellNavigation',["sap/ushell/services/ShellNavigationHashChanger","sap/m/MessageBox","sap/ui/core/routing/HashChanger"],function(S,M,H){"use strict";var A=M.Action;var I=M.Icon;
function a(c,p,s){function r(){sap.ui.require(["sap/m/MessageBox"],function(M){M.show("Due to a configuration change on the server,\nclient and server are out of sync.\n We strongly recommend to reload the page soon.\nReload page now?",{icon:I.ERROR,title:"Client out of sync with server.",actions:[A.YES,A.NO],onClose:function(b){if(b===A.YES){window.setTimeout(function(){window.location.reload();},0);}}});});}var o=s&&s.config;this.hashChanger=new S(o);this._navigationFilterForForwardingToRegisteredRouters=function(h){var m=this._aRouters.some(function(R){return R.match(h);});if(m){var b=sap.ushell.Container.getService("AppLifeCycle"),C=b.getCurrentApplication(),i=C&&C.componentInstance&&!C.homePage,d;if(i){d=C.componentInstance.getRouter();if(d){d.stop();}}return this.NavigationFilterStatus.Keep;}return this.NavigationFilterStatus.Continue;};this.isInitialNavigation=function(){return this._bIsInitialNavigation;};this.setIsInitialNavigation=function(i){this._bIsInitialNavigation=i;};this.hrefForExternal=function(b,v,C,d){return this.hashChanger.hrefForExternal(b,v,C,d);};this.hrefForAppSpecificHash=function(b){return this.hashChanger.hrefForAppSpecificHash(b);};this.compactParams=function(P,R,C,t){return this.hashChanger.compactParams(P,R,C,t);};this.toExternal=function(b,C,w){this.hashChanger.toExternal(b,C,w);};this.toAppHash=function(b,w){this.hashChanger.toAppHash(b,w);};this.init=function(f){this._bIsInitialNavigation=true;hasher.prependHash="";H.replaceHashChanger(this.hashChanger);var b=sap.ui.getCore().getEventBus();b.subscribe("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",r);this.hashChanger.initShellNavigation(f);this._enableHistoryEntryReplacedDetection();return this;};this._enableHistoryEntryReplacedDetection=function(){this._lastHashChangeMode=null;var O=hasher.setHash,f=hasher.replaceHash;hasher.setHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="setHash";return O.apply(hasher,arguments);}.bind(this);hasher.replaceHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="replaceHash";return f.apply(hasher,arguments);}.bind(this);};this.wasHistoryEntryReplaced=function(){return this._lastHashChangeMode==="replaceHash";};this.resetHistoryEntryReplaced=function(){this._lastHashChangeMode=null;};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(f){this.hashChanger.registerNavigationFilter(f);};this._aRouters=[];this.registerExtraRouter=function(R){this._aRouters.push(R);};this.unregisterNavigationFilter=function(f){this.hashChanger.unregisterNavigationFilter(f);};this.registerNavigationFilter(function(){if(!this._hashChangedByApp){this.resetHistoryEntryReplaced();}this._hashChangedByApp=undefined;return this.NavigationFilterStatus.Continue;}.bind(this));this.registerNavigationFilter(this._navigationFilterForForwardingToRegisteredRouters.bind(this));}
a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/ShellNavigationHashChanger',["sap/ui/core/routing/HashChanger","sap/ui/thirdparty/hasher","sap/ushell/TechnicalParameters","sap/base/util/UriParameters","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/deepEqual"],function(H,h,T,U,a,q,L,d){"use strict";var O={HASH_SET:{name:"hashSet",historyEntry:true},HASH_REPLACED:{name:"hashReplaced",historyEntry:false},SHELL_HASH_CHANGED:{name:"shellHashChanged",historyEntry:true,usedByUi5HistoryDetection:true,ui5EventParameterNames:{oldHash:"oldAppSpecificRouteNoSeparator",newHash:"newAppSpecificRouteNoSeparator"},updateHashOnly:true},SHELL_HASH_PARAMETER_CHANGED:{name:"shellHashParameterChanged",historyEntry:null},HASH_CHANGED:{name:"hashChanged",historyEntry:false,usedByUi5HistoryDetection:true,ui5EventParameterNames:{newHash:"newHash",fullHash:"fullHash"}}};
var S=H.extend("sap.ushell.services.ShellNavigatonHashChanger",{constructor:function(c){var u;this.oServiceConfig=c;if(new U(window.location.href).get("sap-ushell-reload")){if(new U(window.location.href).get("sap-ushell-reload")==="X"||new U(window.location.href).get("sap-ushell-reload")==="true"){u=true;}else{u=false;}}if(u!==undefined){if(typeof this.oServiceConfig!=="object"){this.oServiceConfig={};}this.oServiceConfig.reload=u;}H.apply(this);this._initializedByShellNav=false;this.oURLShortening=sap.ushell.Container.getService("URLShortening");this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon",Keep:"Keep"};this.getRelevantEventsInfo=function(){return this._getAllEvents().filter(function(e){return e.usedByUi5HistoryDetection;}).map(function(e){var E={name:e.name,paramMapping:e.ui5EventParameterNames};if(e.updateHashOnly!==undefined){E.updateHashOnly=e.updateHashOnly;}return E;});};}});
S.prototype.privgetCurrentShellHash=function(){var r=this.privsplitHash(h.getHash());return{hash:"#"+((r&&r.shellPart)?r.shellPart:"")};};
S.prototype.privconstructHash=function(A){var o=this.privgetCurrentShellHash();o.hash+=A;return o;};
S.prototype.privconstructShellHash=function(s){return sap.ushell.Container.getService("URLParsing").constructShellHash(s);};
S.prototype.privsplitHash=function(s){var o,c,A;if(s===undefined||s===null||s===""){return{shellPart:null,appSpecificRoute:null,intent:null,params:null};}o=sap.ushell.Container.getService("URLParsing").parseShellHash(s);if(o===undefined||o===null){return null;}c=(o.params&&!a(o.params))?o.params:null;A=o.appSpecificRoute;o.appSpecificRoute=undefined;return{shellPart:this.privstripLeadingHash(this.privconstructShellHash(o))||null,appSpecificRoute:A||null,intent:(o.semanticObject&&o.action&&(o.semanticObject+"-"+o.action+(o.contextRaw||"")))||null,params:c};};
S.prototype.privsetHash=function(f,A,w){h.prependHash="";f=this.privstripLeadingHash(f);A=A||"";if(w===undefined){w=true;}if(w){this.fireEvent(O.HASH_SET.name,{sHash:A});h.setHash(f);}else{this.fireEvent(O.HASH_REPLACED.name,{sHash:A});h.replaceHash(f);}};
S.prototype.privstripLeadingHash=function(s){if(s[0]==="#"){return s.substring(1);}return s;};
S.prototype.registerNavigationFilter=function(f){if(typeof f!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters.push(f);};
S.prototype.unregisterNavigationFilter=function(f){if(typeof f!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters=this.aNavigationFilters.filter(function(r){return r!==f;});};
function b(c,t){this.oAppState=undefined;this.oPromise=(new q.Deferred()).resolve();this.getNextKey=function(){this.oAppState=sap.ushell.Container.getService("AppState").createEmptyAppState(c,t);return this.oAppState.getKey();};this.store=function(v){var n;this.oAppState.setData(v);n=this.oAppState.save();this.oPromise=q.when(this.oPromise,n);};this.getPromise=function(){return this.oPromise;};}
S.prototype.compactParams=function(p,r,c,t){var u=sap.ushell.Container.getService("URLParsing"),s,C,R,P,D=new q.Deferred(),e=u.constructShellHash({"target":{"semanticObject":"SO","action":"action"},"params":p},s);if(p===undefined||Object.keys(p).length===0){return D.resolve(p).promise();}s=new b(c,t);R=this.oURLShortening.compactHash(e,r,s);C=u.parseParameters(R.hash.match(/\?.*/)[0]);P=s.getPromise();P.done(function(){D.resolve(C);}).fail(function(m){D.reject(m);});return D;};
S.prototype.hrefForExternal=function(A,v,c,e){var r=this.hrefForExternalNoEnc(A,v,c,e);function f(R,v){if(v===true){R.hash=encodeURI(R.hash);}else{R=encodeURI(R);}return R;}if(!e){return f(r,v);}var D=new q.Deferred();r.done(function(R){D.resolve(f(R,v));}).fail(D.reject.bind(D));return D;};
S.prototype.hrefForExternalNoEnc=function(A,v,c,e){var t,p,D,s=new b(c),r;t=this.privhrefForExternalNoEnc(A,s);if(v===true){r={hash:t.hash,params:t.params,skippedParams:t.skippedParams};}else{r=t.hash;}if(!e){return r;}p=s.getPromise();D=new q.Deferred();p.done(function(){D.resolve(r);}).fail(function(m){D.reject(m);});return D;};
S.prototype.privhrefForExternalNoEnc=function(A,s){var r;if(A===undefined){return this.privgetCurrentShellHash();}if(A&&A.target&&(typeof A.target.semanticObject==="string"||typeof A.target.shellHash==="string")){r="#"+this.privconstructShellHash(A);return this.oURLShortening.compactHash(r,undefined,s);}return this.privgetCurrentShellHash();};
S.prototype.privgetAppHash=function(A){var s,o;if(A&&A.target&&(typeof A.target.shellHash==="string")){o=sap.ushell.Container.getService("URLParsing").parseShellHash(A.target.shellHash);s=o&&o.appSpecificRoute;s=s&&s.substring(2);}return s;};
S.prototype.hrefForAppSpecificHash=function(A){return encodeURI(this.privconstructHash(this.privappHashPrefix+A).hash);};
S.prototype.toExternal=function(A,c,w){var s,o=new b(c),e;s=this.privhrefForExternalNoEnc(A,o).hash;e=this.privgetAppHash(A);this.privsetHash(s,e,w);};
S.prototype.toAppHash=function(A,w){var s=this.privconstructHash(this.privappHashPrefix+A).hash;this.privsetHash(s,A,w);};
S.prototype.initShellNavigation=function(s){if(this._initializedByShellNav){L.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false;}this.privfnShellCallback=s;h.changed.add(this.treatHashChanged,this);if(!h.isActive()){h.initialized.addOnce(this.treatHashChanged,this);h.init();}else{this.treatHashChanged(h.getHash());}this._initializedByShellNav=true;return true;};
S.prototype.init=function(){if(this._initialized){L.info("init already called on this ShellNavigationHashChanger instance.");return false;}var n=this.privsplitHash(h.getHash()),A=((n&&n.appSpecificRoute)||"  ").substring(2),D=A?"&/":"",s=(n&&n.shellPart)||"";this.fireEvent(O.HASH_CHANGED.name,{newHash:A,fullHash:s+D+A});this._initialized=true;return true;};
S.prototype._removeInnerAppSeparator=function(i){return(i||"").replace("&/","");};
S.prototype.treatHashChanged=function(n,o){if(this.inAbandonFlow){return;}var A,s,N,c,f,g,E,i,F,j,k,l;n=this.oURLShortening.expandHash(n);o=this.oURLShortening.expandHash(o);N=this.privsplitHash(n);c=this.privsplitHash(o);if(!N){E=new Error("Illegal new hash - cannot be parsed: '"+n+"'");this.fireEvent(O.SHELL_HASH_CHANGED.name,{newShellHash:n,newAppSpecificRoute:null,fullHash:n,oldShellHash:(c?c.shellPart:o),error:E});this.privfnShellCallback(n,null,(c?c.shellPart:o),(c?c.appSpecificRoute:null),E);return;}if(!c){c={shellPart:o,appSpecificRoute:null};}var D=sap.ui.getCore().byId("sapUshellDashboardPage");if(D){sap.ui.require(["sap/ushell/Config"],function(C){D.setBusy("#"+n!==C.last("/core/shellHeader/rootIntent"));});}for(i=0;i<this.aNavigationFilters.length;i++){try{F=this.aNavigationFilters[i].call(undefined,n,o);j=F;if(typeof F!=="string"){j=F.status;k=F.hash;}if(j===this.NavigationFilterStatus.Custom){if(k&&k.length>0){this.inAbandonFlow=true;h.replaceHash(k);this.inAbandonFlow=false;}return;}if(j===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;h.replaceHash(o);this.inAbandonFlow=false;return;}if(j===this.NavigationFilterStatus.Keep){l=true;}}catch(e){L.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigation");}}if(l){this.fireEvent(O.HASH_CHANGED.name,{newHash:n,oldHash:o,fullHash:n});return;}var m=this.isInnerAppNavigation(n,o);if(m){A=this._removeInnerAppSeparator(N.appSpecificRoute);s=this._removeInnerAppSeparator(c.appSpecificRoute);L.info("Inner App Hash changed from '"+s+"' to '"+A+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(O.HASH_CHANGED.name,{newHash:A,oldHash:s,fullHash:n});return;}var p=this._haveSameIntent(n,o);if(p&&this.hasListeners(O.SHELL_HASH_PARAMETER_CHANGED.name)){f=sap.ushell.Container.getService("URLParsing").paramsToString(N.params);g=sap.ushell.Container.getService("URLParsing").paramsToString(c.params);L.info("Shell hash parameters changed from '"+g+"' to '"+f+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(O.SHELL_HASH_PARAMETER_CHANGED.name,{oNewParameters:N.params,oOldParameters:c.params});return;}if(o!==undefined&&this.oServiceConfig&&this.oServiceConfig.reload){window.location.hash="#"+encodeURI(n);window.location.reload();}L.info("Outer shell hash changed from '"+o+"' to '"+n+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(O.SHELL_HASH_CHANGED.name,{newShellHash:N.shellPart,newAppSpecificRoute:N.appSpecificRoute,fullHash:n,oldShellHash:c.shellPart,oldAppSpecificRoute:c.appSpecificRoute,error:"",oldAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(c.appSpecificRoute),newAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(N.appSpecificRoute)});this.privfnShellCallback(N.shellPart,N.appSpecificRoute,c.shellPart,c.appSpecificRoute);};
S.prototype._parametersChanged=function(n,o){return!d(n,o);};
S.prototype.setHash=function(s){this.toAppHash(s,true);};
S.prototype.replaceHash=function(s){this.toAppHash(s,false);};
S.prototype.getHash=function(){return this.getAppHash();};
S.prototype.getAppHash=function(){var n=this.privsplitHash(h.getHash()),A=((n&&n.appSpecificRoute)||"  ").substring(2);return A;};
S.prototype.destroy=function(){h.changed.remove(this.treatHashChanged,this);H.prototype.destroy.apply(this,arguments);};
S.prototype._getAllEvents=function(){return Object.keys(O).map(function(e){return O[e];});};
S.prototype.getReplaceHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===false;}).map(function(e){return e.name;});};
S.prototype.getSetHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===true;}).map(function(e){return e.name;});};
S.prototype.isInnerAppNavigation=function(n,o){var N=this.privsplitHash(n)||{};var c=this.privsplitHash(o)||{};var e=this._haveSameIntent(n,o);N.params=this._removeNonIntentParameters(N.params);c.params=this._removeNonIntentParameters(c.params);var f=!this._parametersChanged(N.params,c.params);return e&&f;};
S.prototype._haveSameIntent=function(n,o){var N=this.privsplitHash(n)||{};var c=this.privsplitHash(o)||{};var s=N.intent;var e=c.intent;return s===e&&o!==undefined;};
S.prototype._removeNonIntentParameters=function(o){var t=T.getParameters({isIntentParameter:false}),c;if(o){for(var i=0;i<t.length;i++){c=t[i];if(o[c.name]){delete o[c.name];}}}return o||{};};
return S;},true);
sap.ui.predefine('sap/ushell/services/SupportTicket',["sap/ushell/Config"],function(C){"use strict";
function S(a,c,p,s){this.createTicket=function(o){return a.createTicket(o);};this.isEnabled=function(){return C.last("/core/extension/SupportTicket");};}
S.hasNoAdapter=false;return S;},true);
sap.ui.predefine('sap/ushell/services/URLParsing',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/base/util/UriParameters"],function(U,u,b){"use strict";
function c(){var r=/^(([A-Za-z0-9_/]+)-([A-Za-z0-9_/-]+)(~([A-Z0-9a-z=+/]+))?)?([?]([^&]|(&[^/]))*&?)?$/;this.getShellHash=function(s){var a=/[^#]*#(([^&]|&[^/])*)(&\/.*)?/,m=a.exec(s);if(m){return m[1];}return undefined;};this.getHash=function(s){var a=/#(.*)/,m=a.exec(s);if(m){return m[1];}return undefined;};this.isIntentUrl=function(s){var a=/^#/,t,l,T,L,h,p;if(typeof s!=="string"){return false;}if(!a.test(s)){t=(new U(s)).normalize();T=t.protocol()+"://"+t.host()+t.pathname();l=(new U(window.location.href)).normalize();L=l.protocol()+"://"+l.host()+l.pathname();if(T!==L){return false;}}h=this.getHash(s);if(!h){return false;}p=this.parseShellHash(h);if(p&&p.semanticObject&&p.action){return true;}return false;};this.parseParameters=function(p){if(!p){return{};}return new b(p).mParams||{};};this.paramsToString=function(p){return u.urlParametersToString(p);};this.privparamsToString=function(p,D,a){return u.urlParametersToString(p,D,a);};this.parseShellHash=function(h){var a=r,s,S,A,C,p,m,e;if(!h){return undefined;}s=this.splitHash(h);m=a.exec(s.shellPart);if(m){S=m[2];A=m[3];C=m[5];p=m[6];e=this.parseParameters(p);return{semanticObject:S,action:A,contextRaw:C,params:e,appSpecificRoute:s.appSpecificRoute};}if(s.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:s.appSpecificRoute};}return undefined;};this.privstripLeadingHash=function(h){if(h[0]==="#"){return h.substring(1);}return h;};this.splitHash=function(h){var a=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/,m,s,A;if(h===undefined||h===null||h===""){return{};}m=a.exec(h);s=m[1];if(s!==""&&!r.test(s)){return{};}A=m[2];if(s||A){return{shellPart:s,appSpecificRoute:A};}return{};};function d(s,a){if(a){return s+a;}return s;}this.constructShellHash=function(s){var e,p,f,i=null,k,l=[],g="?",a=null;if(!s){return"";}if(!s.target){s.target={};s.target.semanticObject=s.semanticObject;s.target.action=s.action;s.target.contextRaw=s.contextRaw;}if(s.target.shellHash||s.target.shellHash===""){f=this.privstripLeadingHash(s.target.shellHash);return d(f,s.appSpecificRoute);}if(s.target.semanticObject&&s.target.action){e=s.target.semanticObject+"-"+s.target.action.replace(/[?].*/,"");}else{return d("",s.appSpecificRoute);}if(s.target.contextRaw){e+="~"+s.target.contextRaw;}g="?";a=null;l=[];for(a in s.params){if(s.params.hasOwnProperty(a)){l.push(a);}}p=(s.params&&JSON.parse(JSON.stringify(s.params)))||{};if(s.appStateKey){l.push("sap-xapp-state");p["sap-xapp-state"]=s.appStateKey;}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(Array.isArray(p[a])){if(p[a].length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<p[a].length;i=i+1){e+=g+encodeURIComponent(a)+"="+encodeURIComponent(p[a][i]);g="&";}}else{e+=g+encodeURIComponent(a)+"="+encodeURIComponent(p[a]);g="&";}}return d(e,s.appSpecificRoute);};this.addSystemToServiceUrl=function(s,C){var R,o,S=C;if(!s||s.indexOf("/")!==0||s.indexOf("//")===0){throw new u.Error("Invalid URL: "+s,"sap.ushell.services.URLParsing");}if(C instanceof sap.ui.core.Component){o=(typeof C.getComponentData==="function")&&C.getComponentData();S=o&&o.startupParameters&&o.startupParameters["sap-system"]&&o.startupParameters["sap-system"][0];}R=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!S&&!C&&R&&R.url){S=new b(R.url).get("sap-system");}if(/^[^?]*(;mo([/;?]|$))/.test(s)){}else if(/^[^?]*(;o=([/;?]|$))/.test(s)){s=s.replace(/;o=([/;?]|$)/,(S?";o="+S:"")+"$1");}else if(!/^[^?]*;o=/.test(s)&&S){s=s.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+S+"$2");}sap.ushell.Container.addRemoteSystemForServiceUrl(s);return s;};}
c.hasNoAdapter=true;return c;},true);
sap.ui.predefine('sap/ushell/services/URLShortening',function(){"use strict";
function U(){var t=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(v,s){var V,k;if(typeof v!=="string"||/^[A-Z0-9]{40}$/.test(v)){return v;}try{V=JSON.parse(v);}catch(e){jQuery.sap.log.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return v;}k=s&&s.getNextKey();this._storeValue(k,V,s);return k;};this.compactHash=function(u,r,s){var S,k,R,p,o,a,b=[this.ABBREV_PARAM_NAME,"sap-system","sap-xapp-state"];if(r){r.forEach(function(A){b.push(A);});}o=sap.ushell.Container.getService("URLParsing");S=o.parseShellHash(u);if(!S){jQuery.sap.log.error("the URL "+u+" is not compliant. It may break the product and cause unwanted navigation behavior.");return{hash:u};}p="";if(u.charAt(0)==="#"){p="#";}var v=S&&S.params&&S.params["sap-xapp-state"]&&S.params["sap-xapp-state"][0];if(v){S.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(v,s)];u=p+o.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:S.params,appSpecificRoute:S.appSpecificRoute});}if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}if(S&&((S.params&&S.params[t.ABBREV_PARAM_NAME]))){return{hash:u};}k=s&&s.getNextKey();R=this._splitParameters(S.params,b,k);if(!R.key){return{hash:u};}a=o.paramsToString(R.tailParams);this._storeValue(R.key,a,s);return{hash:p+o.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:R.headParams,appSpecificRoute:S.appSpecificRoute}),params:R.headParams,skippedParams:R.tailParams};};this.checkHashLength=function(u){var s,r,p,o;if(typeof u!=="string"||u.length<t.URL_LENGTH_LIMIT){return{hash:u};}o=sap.ushell.Container.getService("URLParsing");s=o.parseShellHash(u);p="";if(u.charAt(0)==="#"){p="#";}r=this._splitParameters(s.params,[],"DummyKey");if(r.key){jQuery.sap.log.error("Application startup parameter length exceeds "+t.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete r.headParams[this.ABBREV_PARAM_NAME];return{hash:p+o.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:r.headParams,appSpecificRoute:s.appSpecificRoute}),params:r.headParams,skippedParams:r.tailParams};}jQuery.sap.log.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:u};};this._findIndex=function(a,T){var r=a.indexOf(T);if(r>=0){return r;}r=-1;a.every(function(A,i){if(A.length>0&&A[A.length-1]==="*"&&A.substring(0,A.length-1)===T.substring(0,A.length-1)){r=i;return false;}return true;});return r;};this._cmpByList=function(a,A,b){var i,c;a=a||[];if(A===b){return 0;}i=this._findIndex(a,A);c=this._findIndex(a,b);if(i>=0&&c>=0){if((i-c)!==0){return i-c;}if(A<b){return-1;}if(A>b){return+1;}return 0;}if(i>=0){return-1;}if(c>=0){return+1;}if(A<b){return-1;}return+1;};this._sortByPriority=function(l,r){return l.sort(this._cmpByList.bind(this,r));};this._splitParameters=function(p,r,K){var a,i,k,h={},b={},c=false,o,d,e=0,f,l=[];if(!K||typeof K!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!");}for(a in p){if(Object.prototype.hasOwnProperty.call(p,a)){l.push(a);}}l.sort();l=this._sortByPriority(l,r);for(k=0;k<l.length;k=k+1){a=l[k];o=p[a];if(o.length>1){jQuery.sap.log.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<o.length;i=i+1){d=p[a][i];f=a.length+d.length;if(f+e>this.URL_PARAMS_LENGTH_LIMIT){if(b[a]){b[a].push(d);}else{b[a]=[d];}c=true;}else if(h[a]){h[a].push(d);}else{h[a]=[d];}e=e+f+1;}}if(c){h[this.ABBREV_PARAM_NAME]=[K];}return{key:K,tailParams:b,headParams:h};};this.expandHash=function(u){var r=function(k){return t._retrieveValue(k);};return this.expandParamGivenRetrievalFunction(u,this.ABBREV_PARAM_NAME,r);};this.expandParamGivenRetrievalFunction=function(u,p,r){var s,v,k,a,b;if(typeof u!=="string"){return u;}s=sap.ushell.Container.getService("URLParsing").parseShellHash(u);k=s&&s.params&&s.params[p]&&s.params[p][0];if(!k){return u;}a="";if(u.charAt(0)==="#"){a="#";}v=r(k);if(!v){return u;}b=this._blendParameters(s.params,p,v);return a+sap.ushell.Container.getService("URLParsing").constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:b,appSpecificRoute:s.appSpecificRoute});};this._retrieveValue=function(){return undefined;};this._storeValue=function(k,v,s){if(s&&typeof s.store==="function"){s.store(v);}};this._blendParameters=function(p,P,v){var n=sap.ushell.Container.getService("URLParsing").parseParameters("?"+v),a;delete p[P];for(a in n){if(Object.prototype.hasOwnProperty.call(n,a)){if(p[a]){p[a]=p[a].concat(n[a]);}else{p[a]=n[a];}}}return p;};}
U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/Ui5ComponentHandle',function(){"use strict";var U=function(c){this._oComponent=c;};
U.onBeforeApplicationInstanceCreated=function(){sap.ui.require(["sap/ushell/Fiori20AdapterTest"],function(){});};
U.prototype.getInstance=function(){return this._oComponent;};
U.prototype.getMetadata=function(){return this._oComponent.getMetadata();};
return U;});
sap.ui.predefine('sap/ushell/services/Ui5ComponentLoader',["sap/ushell/utils","sap/ushell/services/Ui5ComponentHandle","sap/ushell/services/_Ui5ComponentLoader/utils","sap/ushell/EventHub","sap/ui/thirdparty/jquery"],function(u,U,o,e,q){"use strict";
function a(c,p,C){this._oConfig=(C&&C.config)||{};this.createComponent=function(A,P,w){var b=A||{},l=o.shouldLoadCoreExt(b),d=o.shouldUseAmendedLoading(this._oConfig),L=o.shouldLoadDefaultDependencies(b,this._oConfig,d),n=u.getParameterValueBoolean("sap-ushell-nocb"),f=b.applicationDependencies||{};o.logAnyApplicationDependenciesMessages(f.name,f.messages);if(!b.ui5ComponentName){return new q.Deferred().resolve(A).promise();}delete b.loadCoreExt;delete b.loadDefaultDependencies;var g=o.createComponentData(b.componentData||{},b.url,b.applicationConfiguration,b.reservedParameters);if(b.getExtensions){g.getExtensions=b.getExtensions;delete b.getExtensions;}var s=o.constructAppComponentId(P||{}),h=l&&d,i=o.prepareBundle(this._oConfig.coreResourcesComplement),j=o.createComponentProperties(h,L,n,w,b.applicationDependencies||{},b.ui5ComponentName,b.url,s,i);U.onBeforeApplicationInstanceCreated.call(null,j);var D=new q.Deferred();o.createUi5Component(j,g).then(function(k){var m=new U(k);b.componentHandle=m;var r=l;if(r){b.coreResourcesFullyLoaded=r;e.emit("CoreResourcesComplementLoaded",{status:"success"});}D.resolve(b);},function(E){var k=JSON.stringify(j,null,4);o.logInstantiateComponentError(j.name,E+"",E.status,E.stack,k);D.reject(E);});return D.promise();};this.loadCoreResourcesComplement=function(){if(this.loadCoreResourcesComplementPromise){return this.loadCoreResourcesComplementPromise.promise();}var b=o.prepareBundle(this._oConfig.coreResourcesComplement),d=new q.Deferred();o.loadBundle(b).done(function(){e.emit("CoreResourcesComplementLoaded",{status:"success"});this.loadCoreResourcesComplementPromise=d;d.resolve();}.bind(this)).fail(function(){e.emit("CoreResourcesComplementLoaded",{status:"failed"});d.reject();});return d.promise();};e.once("loadCoreResourcesComplement").do(function(){this.loadCoreResourcesComplement();}.bind(this));}
a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/UsageAnalytics',["sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/Device"],function(q,L,D){"use strict";
function U(c,p,S){var o=(S&&S.config)||{},a=[],A=false,i=false,l,I;window.oCustomProperties={};this.setLegalText=function(t){l=t;if(I){this.init(I.usageAnalyticsTitle,I.iAgree,I.iDisagree,I.remindMeLater);}};this.getLegalText=function(){return l;};this.setTrackUsageAnalytics=function(s){var d=q.Deferred(),u,b=s,f=sap.ushell.Container.getUser().getTrackUsageAnalytics();try{var g=sap.ushell.Container.getService("UserInfo");if(f!==b){sap.ushell.Container.getUser().setTrackUsageAnalytics(b);u=g.updateUserPreferences(sap.ushell.Container.getUser());u.done(function(){sap.ushell.Container.getUser().resetChangedProperty("trackUsageAnalytics");if(!i&&b){this.start();}else if(i&&b===false){window.swa.disable();}else if(i&&b){window.swa.enable();}d.resolve();}.bind(this));u.fail(function(E){sap.ushell.Container.getUser().setTrackUsageAnalytics(f);sap.ushell.Container.getUser().resetChangedProperty("trackUsageAnalytics");L.error(E);d.reject(E);});}else{d.resolve();}}catch(e){L.error("Getting UserInfo service failed.");d.reject("Getting UserInfo service failed.");}return d.promise();};this.showLegalPopup=function(){sap.ui.require(["sap/m/Text","sap/m/Dialog","sap/m/Button"],function(T,b,B){var d=new b("agreementMessageBox",{title:I.usageAnalyticsTitle,type:"Message",stretch:D.system.phone,buttons:[new B("remindMeLaterButton",{text:I.remindMeLater,press:function(){d.close();}}),new B("iAgreeButton",{text:I.iAgree,type:"Accept",press:function(){sap.ushell.Container.getService("UsageAnalytics").setTrackUsageAnalytics(true);d.close();}}),new B("iDisagreeButton",{text:I.iDisagree,press:function(){sap.ushell.Container.getService("UsageAnalytics").setTrackUsageAnalytics(false);d.close();}})],afterClose:function(){d.destroy();},content:[new T({text:l})]}).addStyleClass("sapUshellUsageAnalyticsPopUp");d.open();});};this.systemEnabled=function(){if(!o.enabled||!o.pubToken||(this.isSetUsageAnalyticsPermitted()&&!l)){if(!o.pubToken){L.warning("No valid pubToken was found in the service configuration");}if(!l){L.warning("No Legal text message found.");}return false;}return true;};this.userEnabled=function(){var u=sap.ushell.Container.getUser();if(!this.systemEnabled()){return false;}return u.getTrackUsageAnalytics();};this.start=function(){sap.ui.getCore().getEventBus().publish("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted");this._initUsageAnalyticsLogging();i=true;window.swa.custom2={ref:sap.ui.getCore().getConfiguration().getLanguage()};};this.init=function(u,s,b,r){I={usageAnalyticsTitle:u,iAgree:s,iDisagree:b,remindMeLater:r};if(this.systemEnabled()&&!i){if(!this.isSetUsageAnalyticsPermitted()){this.start();}else if(l){if(this.userEnabled()===true){this.start();}else if(this.userEnabled()===null||this.userEnabled()===undefined){this.showLegalPopup();}}}};this.setCustomAttributes=function(C){var b,P="attribute",s,d="custom",e,f,F="customFunction";if(!this.userEnabled()&&this.isSetUsageAnalyticsPermitted()){return;}for(b=1;b<6;b++){e=d.concat(b+4);if(window.swa[e]!==undefined){continue;}s=P+b;if(C[s]===undefined){continue;}if(q.isFunction(C[s])){f=F+b;window[f]=C[s];window.swa[e]={ref:f};}else{window.swa[e]={ref:C[s]};}}};this.logCustomEvent=function(e,b,d){if(!this.userEnabled()&&this.isSetUsageAnalyticsPermitted()){return;}if(!this._isAnalyticsScriptLoaded()){this._addDelayedEvent(e,b,d);return;}if(d){d.unshift(b);d.unshift(e);window.swa.trackCustomEvent.apply(window.swa.trackCustomEvent,d);}else{window.swa.trackCustomEvent(e,b);}};window._trackingScriptsLoaded=function(){var b,t;A=true;for(b=0;b<a.length;b++){t=a[b];this.logCustomEvent(t.eventType,t.customEventValue,t.aAdditionalValues);}a=null;};this._initUsageAnalyticsLogging=function(){if(window.swa===undefined){window.swa={};}window.swa.pubToken=o.pubToken;window.swa.baseUrl=o.baseUrl;window.swa.bannerEnabled=false;window.swa.loggingEnabled=true;window.swa.visitorCookieTimeout=63113852;window.swa.dntLevel=1;window.swa.trackerReadyCallback=window._trackingScriptsLoaded.bind(this);window.swa.clicksEnabled=(o.logClickEvents!==false);window.swa.pageLoadEnabled=(o.logPageLoadEvents!==false);this._handlingTrackingScripts();};this._handlingTrackingScripts=function(){var d=document,g=d.createElement("script"),s=d.getElementsByTagName("script")[0];g.onerror=function(){L.warning("SWA scripts not loaded!");};g.type="text/javascript";g.defer=true;g.async=true;g.src=window.swa.baseUrl+"js/privacy.js";s.parentNode.insertBefore(g,s);};this._isAnalyticsScriptLoaded=function(){return A;};this.isSetUsageAnalyticsPermitted=function(){if(o.setUsageAnalyticsPermitted===undefined){return true;}return o.setUsageAnalyticsPermitted;};this._addDelayedEvent=function(e,b,d){var f={eventType:e,customEventValue:b,aAdditionalValues:d};a.push(f);};}
U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/UserDefaultParameterPersistence',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";var v=["value","extendedValue","noEdit","alwaysAskPlugin","_shellData","pluginData"];
function U(a){this._oAdapter=a;this._oData={};}
U.prototype._cleanseValue=function(V){var r=q.extend(true,{},V),a;for(a in r){if(r.hasOwnProperty(a)){if(v.indexOf(a)<0){delete r[a];}}}return r;};
U.prototype._testValue=function(){return true;};
U.prototype.loadParameterValue=function(p){var d=new q.Deferred(),t=this;if(this._oData[p]){d.resolve(this._oData[p]);}else{this._oAdapter.loadParameterValue(p).done(function(V){var c=t._cleanseValue(V);if(t._testValue(c)){d.resolve(c);}else{L.error("flawed value returned from persistence");d.reject("flawed value returned from persistence");}}).fail(d.reject.bind(this));}return d.promise();};
U.prototype.saveParameterValue=function(p,V){var d,c;if(!V){return this.deleteParameter(p);}c=this._cleanseValue(V);d=new q.Deferred();if(!this._testValue(c)||(V&&V.noStore===true)){return d.resolve().promise();}this._oData[p]=c;return this._oAdapter.saveParameterValue(p,c);};
U.prototype.deleteParameter=function(p){delete this._oData[p];return this._oAdapter.deleteParameter(p);};
U.prototype.getStoredParameterNames=function(){var d=new q.Deferred();this._oAdapter.getStoredParameterNames().done(function(r){r.sort();d.resolve(r);}).fail(d.reject.bind(d));return d.promise();};
U.hasNoAdapter=false;return U;},true);
sap.ui.predefine('sap/ushell/services/UserDefaultParameters',["sap/ui/base/EventProvider","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/deepEqual","sap/base/util/isEmptyObject"],function(E,u,q,d,a){"use strict";var e="valueStored";var s=["value","noEdit","noStore","extendedValue","alwaysAskPlugin"];
function U(A,c,p,C){this._aPlugins=[];this._oUserDefaultParametersNames=undefined;this._oWasParameterPersisted={};var t=this,S=new E();function g(P){var v=(typeof P.getComponentData==="function"&&P.getComponentData()&&P.getComponentData().config&&P.getComponentData().config["sap-priority"])||0;if(typeof v!=="number"||isNaN(v)){return 0;}return v;}this._insertPluginOrdered=function(P,o){var f=g(o),i,h;for(i=0;(i<P.length)&&o;++i){h=g(P[i]);if(o&&(f>h)){P.splice(i,0,o);o=undefined;}}if(o){P.push(o);}return P;};this.registerPlugin=function(P){this._aPlugins=this._insertPluginOrdered(this._aPlugins,P);};function b(i,P,f,v,D){if(i>=P.length){D.resolve(v);return;}if(typeof P[i].getUserDefault!=="function"){b(i+1,P,f,v,D);return;}P[i].getUserDefault(f,v).done(function(n){if(n){b(i+1,P,f,n,D);}else{b(i+1,P,f,v,D);}}).fail(function(){q.sap.log.error("invocation of getUserDefault(\""+f+"\") for plugin "+t._getComponentNameOfPlugin(P[i])+" rejected.",null,"sap.ushell.services.UserDefaultParameters");b(i+1,P,f,v,D);});return;}this._getStoreDate=function(){return new Date().toString();};this._storeValue=function(P,v,f){var t=this;var r=new q.Deferred();var D=new q.Deferred();if(f&&v.extendedValue){sap.ushell.Container.getService("ClientSideTargetResolution").getUserDefaultParameterNames(true).done(function(o){var h=t._extractKeyArrays(o);var i=h.extended;D.resolve(i.indexOf(P)<0);}).fail(function(){D.resolve(false);});}else{D.resolve(false);}D.done(function(R){if(R){v.extendedValue=undefined;}if(f&&t._isInitial(v)){v=undefined;t._oWasParameterPersisted[P]=false;}else{v._shellData=q.extend(true,{storeDate:t._getStoreDate()},v._shellData);}sap.ushell.Container.getService("UserDefaultParameterPersistence").saveParameterValue(P,v).always(function(){var o={parameterName:P,parameterValue:u.clone(v||{})};S.fireEvent(e,o);r.resolve(P);});});return r.promise();};this._getPersistedValue=function(P){var o=sap.ushell.Container.getService("UserDefaultParameterPersistence");return o.loadParameterValue(P);};this._isInitial=function(v){return!v||(!v.value&&!v.extendedValue);};this._haveSameMembersValue=function(o,O,m){return m.every(function(r){return o[r]===O[r]||d(o[r],O[r]);});};this._getUserDefaultParameterNames=function(){if(!this._oUserDefaultParametersNames){this._oUserDefaultParametersNames=new q.Deferred();sap.ushell.Container.getService("ClientSideTargetResolution").getUserDefaultParameterNames(true).done(function(P){var o=t._extractKeyArrays(P);var f=o.extended;var h=o.allParameters;var m=t._arrayToObject(h);if(m.length===0){t._oUserDefaultParametersNames.resolve({});}else{t._oUserDefaultParametersNames.resolve({aAllParameterNames:h,aExtendedParameterNames:f,oMetadataObject:m});}});}return this._oUserDefaultParametersNames.promise();};this._isRelevantParameter=function(P){var D=new q.Deferred();this._getUserDefaultParameterNames().done(function(r){if(r.aAllParameterNames&&r.aAllParameterNames.indexOf(P)!==-1){D.resolve();}else{D.reject();}});return D.promise();};this.hasRelevantMaintainableParameters=function(){var t=this,r=new q.Deferred(),h=false,G=[];t._getUserDefaultParameterNames().done(function(P){if(!a(P)&&P.aAllParameterNames){P.aAllParameterNames.forEach(function(f){var o=t.getValue(f);G.push(o);o.done(function(v){if(v&&!v.hasOwnProperty("noEdit")){h=true;return;}});});q.when.apply(undefined,G).done(function(){r.resolve(h);}).fail(function(){r.resolve();});}else{r.resolve();}});return r.promise();};this.getValue=function(P){var t=this,D=new q.Deferred();this._isRelevantParameter(P).fail(function(){D.resolve({});}).done(function(){q.when(t._getPersistedValue(P)).then(function(o){t._oWasParameterPersisted[P]=true;return q.when(o||{});},function(){return q.when({value:undefined});}).then(function(o){var G=new q.Deferred(),v=u.clone(o),f=sap.ushell.Container.getService("PluginManager");var h=(!o._shellData&&t._isInitial(o))||o.noStore||o.alwaysAskPlugin;if(!h){D.resolve(v);return;}f.loadPlugins("UserDefaults").done(function(){b(0,t._aPlugins,P,o,G);}).fail(function(){q.sap.log.error("Cannot get value for "+P+". One or more plugins could not be loaded.");G.reject("Initialization of plugins failed");});G.done(function(n){if(!t._oWasParameterPersisted[P]||!t._haveSameMembersValue(v,n,s)){t._oWasParameterPersisted[P]=true;t._storeValue(P,n);}D.resolve(n);}).fail(D.reject.bind(D));});});return D.promise();};this._addParameterValuesToParameters=function(P,f){var D=new q.Deferred();var h=[];var t=this;f.forEach(function(i){var n=t.getValue(i);h.push(n);n.done(function(v){P[i].valueObject=v;});});q.when.apply(q,h).done(D.resolve.bind(D,P)).fail(D.reject.bind(D,P));return D.promise();};this._arrayToObject=function(P){var r={};P.forEach(function(f){r[f]={};});return r;};this._getComponentNameOfPlugin=function(P){if(typeof P!=="object"||typeof P.getMetadata!=="function"||!P.getMetadata()||typeof P.getMetadata().getComponentName!=="function"){return"'name of plugin could not be determined'";}return P.getMetadata().getComponentName()||"";};this._getEditorDataAndValue=function(D,f,h,m){var t=this;var P=[];var r=[];t._aPlugins.forEach(function(o,i){if(typeof o.getEditorMetadata==="function"){var n=new q.Deferred();P.push(n);try{var j=P.length-1;o.getEditorMetadata(m).done(function(R){r[j]=R;}).always(function(){n.resolve();}).fail(function(){q.sap.log.error("EditorMetadata for plugin "+t._getComponentNameOfPlugin(o)+"cannot be invoked.",null,"sap.ushell.services.UserDefaultParameters");n.resolve();});}catch(k){q.sap.log.error("Error invoking getEditorMetaData on plugin: "+k+k.stack,null,"sap.ushell.services.UserDefaultParameters");n.resolve();}}});q.when.apply(q,P).done(function(){var i=[];var o=r.reverse().reduce(function(j,n){f.forEach(function(k){if(n[k]&&n[k].editorMetadata){j[k].editorMetadata=n[k].editorMetadata;}});return j;},m);f.forEach(function(j){if(!(o[j]&&o[j].editorMetadata)){i.push(j);}});t._addParameterValuesToParameters(o,f).done(function(j){var k=q.extend(true,{},j),K;h.forEach(function(l){if(k[l]){k[l].editorMetadata=k[l].editorMetadata||{};k[l].editorMetadata.extendedUsage=true;}});K=Object.keys(k).splice(0);K.forEach(function(l){var n;if(k[l].valueObject&&k[l].valueObject.noEdit===true){delete k[l];n=i.indexOf(l);if(n>=0){i.splice(n,1);}}});if(i.length>0){q.sap.log.error("The following parameter names have no editor metadata and thus likely no configured plugin:\n\""+i.join("\",\n\"")+"\".");}D.resolve(k);}).fail(D.reject.bind(D));});};this.editorGetParameters=function(){var D=new q.Deferred();var t=this;this._getUserDefaultParameterNames().done(function(P){if(P.oMetadataObject.length===0){D.resolve({});}else{sap.ushell.Container.getService("PluginManager").loadPlugins("UserDefaults").done(function(){t._getEditorDataAndValue(D,P.aAllParameterNames,P.aExtendedParameterNames,P.oMetadataObject);}).fail(function(){q.sap.log.error("One or more plugins could not be loaded");D.reject("Initialization of plugins failed");});}});return D.promise();};this._extractKeyArrays=function(P){var r={extended:[],simple:[],allParameters:[]};r.simple=(P&&P.simple&&Object.keys(P.simple).sort())||[];r.extended=(P&&P.extended&&Object.keys(P.extended).sort())||[];r.allParameters=r.simple.concat(r.extended.filter(function(f){return r.simple.indexOf(f)<0;})).sort();return r;};this.editorSetValue=function(P,v){return this._storeValue(P,v,true);};this.attachValueStored=function(f){S.attachEvent(e,f);};this.detachValueStored=function(f){S.detachEvent(e,f);};}
U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/UserInfo',["sap/base/Log"],function(L){"use strict";
function U(a,c){this.getId=function(){return sap.ushell.Container.getUser().getId();};this.getUser=function(){return sap.ushell.Container.getUser();};this.getThemeList=function(){var p=a.getThemeList();p.fail(function(){L.error("getThemeList failed");});return p;};this.updateUserPreferences=function(){var p=a.updateUserPreferences(sap.ushell.Container.getUser());p.fail(function(){L.error("updateAttributes: ");});return p;};this.getLanguageList=function(){var p=a.getLanguageList();p.fail(function(){L.error("getLanguageList failed");});return p;};}
U.hasNoAdapter=false;return U;},true);
sap.ui.predefine('sap/ushell/services/UserRecents',["sap/ushell/services/AppType","sap/ushell/EventHub","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/Device","sap/ushell/utils"],function(c,E,q,L,D,u){"use strict";
function R(m,f,C,l,s){var r=[],a=function(I,t){return r.some(function(o){var F;if(f(o.oItem,I)){o.oItem=I;o.iTimestamp=t;o.iCount=o.iCount+1;F=true;}else{F=false;}return F;});},i=function(I,t){var n={oItem:I,iTimestamp:t,iCount:1};if(r.length===m){r.sort(C);r.pop();}r.push(n);};this.clearAllActivities=function(){var o=new q.Deferred();s([]).done(function(b){o.resolve(b);}).fail(function(){o.reject();});return o.promise();};this.newItem=function(I){var o=new q.Deferred(),t=+new Date(),A;l().done(function(b){r=b||[];A=a(I,t);if(!A){i(I,t);}s(r).done(function(g){o.resolve(g);}).fail(function(){o.reject();});});return o.promise();};this.getRecentItems=function(){var o=new q.Deferred();l().done(function(b){b=b||[];b.sort(C);r=b.slice(0,m);o.resolve(q.map(r,function(g){return g.oItem;}));});return o.promise();};}
function d(m,f,C,l,s){var M=30,r,g=function(I,t){return r.recentUsageArray.some(function(o){var F;if(f(o.oItem,I)){if((I.appType===o.oItem.appType)||(I.appType!==c.APP)){q.extend(o.oItem,I);o.iTimestamp=t;o.oItem.timestamp=t;o.mobile=undefined;o.tablet=undefined;o.desktop=undefined;if((I.appType===o.oItem.appType)||(I.appType!==c.APP&&o.oItem.appType!==c.APP)){o.aUsageArray[o.aUsageArray.length-1]+=1;o.iCount+=1;}r.recentUsageArray.sort(C);}F=true;}else{F=false;}return F;});},i=function(I,t,a){I.timestamp=t;if(a){I.icon=a;}var n={oItem:I,iTimestamp:t,aUsageArray:[1],iCount:1,mobile:undefined,tablet:undefined,desktop:undefined};if(r.recentUsageArray.length===m){r.recentUsageArray.pop();}r.recentUsageArray.unshift(n);};this.newItem=function(I){var o=new q.Deferred(),t=+new Date(),a=this.getActivityIcon(I.appType,I.icon),A,b=this,h=this.getDayFromDateObj(new Date());l().done(function(j){r=b.getRecentActivitiesFromLoadedData(j);if(h!=r.recentDay){b.addNewDay();r.recentDay=h;}A=g(I,t);if(!A){i(I,t,a);}s(r).done(function(k){E.emit("newUserRecentsItem",r);o.resolve(k);}).fail(function(){o.reject();});});return o.promise();};this.getActivityIcon=function(a,I){switch(a){case c.SEARCH:return I||"sap-icon://search";case c.COPILOT:return I||"sap-icon://co";case c.URL:return I||"sap-icon://internet-browser";default:return I||"sap-icon://product";}};this.clearAllActivities=function(){var o=new q.Deferred();s([]).done(function(a){E.emit("userRecentsCleared",Date.now());o.resolve(a);}).fail(function(){o.reject();});return o.promise();};this.getRecentItemsHelper=function(a){var t=this,o=new q.Deferred(),b,A,h,I=false,j=[],k=[],n=this.getDayFromDateObj(new Date()),p=function(v){var w=[],x=0,y;for(y=0;y<v.recentUsageArray.length&&(!a||x<a);y++){A=v.recentUsageArray[y];if(A[h]){w.push(A);x++;}}o.resolve(w);};if(D.system.desktop){h="desktop";}else if(D.system.tablet){h="tablet";}else{h="mobile";}l().done(function(v){r=t.getRecentActivitiesFromLoadedData(v);var w=false,x;if(n!=r.recentDay){t.addNewDay();r.recentDay=n;w=true;}for(b=0;b<r.recentUsageArray.length&&!I;b++){A=r.recentUsageArray[b];if(A[h]===undefined){if(!(A.oItem.url[0]==="#")){k.push(A.oItem.url);}else if(A.oItem.url.indexOf("?")>-1){x=A.oItem.url.substring(A.oItem.url.indexOf("?"));if(x.indexOf("&/")>-1){x=x.substring(0,x.indexOf("&/"));}j.push(A.oItem.appId+x);}else{j.push(A.oItem.appId);}}else{I=true;}}if(k.length>0){var y;for(b=0;b<r.recentUsageArray.length;b++){if(!(r.recentUsageArray[b].oItem.url[0]==="#")){y=r.recentUsageArray[b];y[h]=true;}}if(j.length<=0){s(r).done(function(z){o.resolve(p(r));}).fail(function(){o.reject();});}}if(j.length>0){sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(j).done(function(z){I=false;for(b=0;b<r.recentUsageArray.length&&!I;b++){A=r.recentUsageArray[b];if(A[h]===undefined){x="";if(A.oItem.url.indexOf("?")>-1){x=A.oItem.url.substring(A.oItem.url.indexOf("?"));if(x.indexOf("&/")>-1){x=x.substring(0,x.indexOf("&/"));}}var B=z[A.oItem.appId+x];A[h]=!!(B&&B.supported);}else if(A.oItem.url[0]==="#"){I=true;}}s(r).done(function(){o.resolve(p(r));}).fail(function(){o.reject();});}).fail(function(z){o.reject(z);});}else if((j.length<=0)&&(k.length<=0)){if(w){s(r).done(function(){o.resolve(p(r));}).fail(function(){o.reject();});}else{o.resolve(p(r));}}}).fail(function(){o.reject();});return o.promise();};this.getRecentItems=function(){var o=new q.Deferred();this.getRecentItemsHelper(30).done(function(a){o.resolve(q.map(a,function(b){return b.oItem;}));}).fail(function(){o.reject();});return o.promise();};this.getFrequentItems=function(){var o=new q.Deferred();this.getRecentItemsHelper().done(function(h){var j,w=0,F=[],A,p=h[0]?new Date(h[0].iTimestamp):undefined,k;for(j=0;j<h.length&&w<30;j++){A=h[j];if(A.iCount>1){F.push(A);}k=new Date(A.iTimestamp);if(p.toDateString()!=k.toDateString()){w++;p=k;}}F.sort(function(a,b){return b.iCount-a.iCount;});F=F.slice(0,30);o.resolve(q.map(F,function(a){return a.oItem;}));}).fail(function(){o.reject();});return o.promise();};this.addNewDay=function(){var a,b;for(a=0;a<r.recentUsageArray.length;a++){if(r.recentUsageArray[a].aUsageArray){b=r.recentUsageArray[a].aUsageArray;}else{b=[];r.recentUsageArray[a].aUsageArray=b;r.recentUsageArray[a].iCount=0;}b[b.length]=0;if(b.length>M){r.recentUsageArray[a].iCount-=b[0];b.shift();}}};this.getDayFromDateObj=function(a){return(a.getUTCFullYear()+"/"+(a.getUTCMonth()+1)+"/"+a.getUTCDate());};this.getRecentActivitiesFromLoadedData=function(a){var b;if(Array.isArray(a)){b={recentDay:null,recentUsageArray:a};}else{b=a||{recentDay:null,recentUsageArray:[]};}b.recentUsageArray=(b.recentUsageArray||[]).filter(function(A){var I=A&&A.oItem&&A.oItem.url;if(!I){L.error("FLP Recent Activity",A,"is not valid. The activity is removed from the list.");}return I;});return b;};}
function e(l,s){var a,t=this,m=30;this.init=function(){var t=this,p,b=this.getDayFromDateObj(this.getCurrentDate()),f=false;if(t._oInitDeferred===undefined){t._oInitDeferred=q.Deferred();}if(!f||b!==a.recentDay){f=true;p=l();p.done(function(g){a=g||{recentDay:null,recentAppsUsageMap:{}};t.calculateInitialUsage(b);t._oInitDeferred.resolve(a);});p.fail(function(){L.error("UShell-lib ; RecentAppsUsage ; Load data in Init failed");t._oInitDeferred.reject();});}return this._oInitDeferred.promise();};this.calculateInitialUsage=function(b){var t=this;if(b!=a.recentDay){this.addNewDay();a.recentDay=b;setTimeout(function(){t.cleanUnusedHashes();},3000);this.saveAppsUsage(a);}};this.addAppUsage=function(h){if(!u.validHash(h)){return q.Deferred().reject("Non valid hash").promise();}var p=this.init();p.done(function(){var A=a.recentAppsUsageMap[h]||[];if(A.length==0){A[0]=1;}else{A[A.length-1]+=1;}a.recentAppsUsageMap[h]=A;t.saveAppsUsage(a);});p.fail(function(){L.error("Ushell-lib ; addAppUsage ; Initialization falied!");});return p;};this.getAppsUsage=function(){var r,t=this,o=q.Deferred(),p=t.init();p.done(function(){r=t.summarizeUsage();o.resolve(r);});p.fail(function(){o.reject("Not initialized yet");});return o.promise();};this.summarizeUsage=function(){var b={},h,f,g,i=true;for(h in a.recentAppsUsageMap){b[h]=this.getHashUsageSum(h);if(i){f=g=b[h];i=false;}else if(b[h]<g){g=b[h];}else if(b[h]>f){f=b[h];}}return{usageMap:b,maxUsage:f,minUsage:g};};this.addNewDay=function(){var h,A;for(h in a.recentAppsUsageMap){A=a.recentAppsUsageMap[h];A[A.length]=0;if(A.length>m){A=A.shift();}}};this.cleanUnusedHashes=function(){var b,h;for(h in a.recentAppsUsageMap){b=t.getHashUsageSum(h);if(b==0){delete(a.recentAppsUsageMap[h]);}}};this.getHashUsageSum=function(h){var b=0,f,g=a.recentAppsUsageMap[h],i=g.length;for(f=0;f<i;f++){b+=g[f];}return b;};this.saveAppsUsage=function(o){var p=s(o);p.fail(function(){L.error("Ushell-lib ; saveAppsUsage ; Save action failed");});p.done(function(){});return p;};this.getCurrentDate=function(){return new Date();};this.getDayFromDateObj=function(b){return(b.getUTCFullYear()+"/"+(b.getUTCMonth()+1)+"/"+b.getUTCDate());};}
function U(){var r,o,a,A,b,p,f,s,g,h,i,l,S,j="RecentApps",k="RecentActivity",m="AppsUsage",n="RecentSearches",t="RecentDataSources",P="sap.ushell.services.UserRecents";this.addActivity=function(w){return a.newItem(w);};this.clearRecentActivities=function(){var w=new q.Deferred();a.clearAllActivities().done(function(){w.resolve();});return w.promise();};this.getRecentActivity=function(){return a.getRecentItems();};this.getFrequentActivity=function(){return a.getFrequentItems();};this.noticeDataSource=function(w){if((w&&w.objectName&&w.objectName.value&&w.objectName.value.toLowerCase()==="$$all$$")||(w.objectName&&w.objectName.toLowerCase&&w.objectName.toLowerCase()==="$$all$$")){return;}b.newItem(w);return b.getRecentItems();};this.getRecentDataSources=function(){return b.getRecentItems();};this.noticeSearch=function(w){r.newItem(w);return r.getRecentItems();};this.getRecentSearches=function(){return r.getRecentItems();};this.noticeApp=function(w){o.newItem(w);return o.getRecentItems();};this.getRecentApps=function(){return o.getRecentItems();};this.initAppsUsage=function(){A.init(new Date());};this.addAppUsage=function(w){var x=u.getBasicHash(w);A.addAppUsage(x);};this.getAppsUsage=function(){return A.getAppsUsage();};p=sap.ushell.Container.getService("Personalization");try{f=p.getPersonalizer({container:P,item:j});g=p.getPersonalizer({container:P,item:k});s=p.getPersonalizer({container:P,item:n});h=p.getPersonalizer({container:P,item:t});i=p.getPersonalizer({container:P,item:m});}catch(v){L.error("Personalization service does not work:");L.error(v.name+": "+v.message);}l=function(w){var x,y;try{x=w.getPersData();}catch(v){L.error("Personalization service does not work:");L.error(v.name+": "+v.message);y=new q.Deferred();y.reject(v);x=y.promise();}return x;};S=function(w,x){var y;try{y=w.setPersData(x);}catch(v){L.error("Personalization service does not work:");L.error(v.name+": "+v.message);}return y;};r=new R(10,function(x,y){var w=false;if(x.oDataSource&&y.oDataSource){if(x.oDataSource.objectName&&y.oDataSource.objectName){w=((x.sTerm===y.sTerm)&&(x.oDataSource.objectName.value===y.oDataSource.objectName.value));}if(!x.oDataSource.objectName&&!y.oDataSource.objectName){w=(x.sTerm===y.sTerm);}}if(!x.oDataSource&&!y.oDataSource){w=(x.sTerm===y.sTerm);}return w;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,s),S.bind(this,s));b=new R(6,function(x,y){if(x.objectName&&y.objectName){return x.objectName.value===y.objectName.value;}return false;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,h),S.bind(this,h));o=new R(6,function(x,y){return x.semanticObject===y.semanticObject&&x.action===y.action;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,f),S.bind(this,f));a=new d(500,function(x,y){if(x.appType===y.appType){if(x.appType!==c.APP){return x.url===y.url;}return x.appId===y.appId;}else if(x.appType===c.APP||y.appType===c.APP){return(x.appId===y.appId)&&(x.url===y.url);}return false;},function(x,y){return y.iTimestamp-x.iTimestamp;},l.bind(this,g),S.bind(this,g));A=new e(l.bind(this,i),S.bind(this,i));}
U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/VisualizationDataProvider',["sap/ushell/resources"],function(r){"use strict";
function V(){this.S_COMPONENT_NAME="sap.ushell.services.VisualizationDataProvider";this._init.apply(this,arguments);}
V.prototype._init=function(l){this.oLaunchPageAdapter=l;this.oCatalogTilePromise=null;};
V.prototype._getCatalogTiles=function(){if(this.oCatalogTilePromise){return this.oCatalogTilePromise;}var l=this.oLaunchPageAdapter;this.oCatalogTilePromise=new Promise(function(a,b){l.getCatalogs().then(function(c){var d=[];var C=[];var f=[];var o={};for(var i=0;i<c.length;i++){d.push(l.getCatalogTiles(c[i]).then(function(e){C.push(e);}));}jQuery.when.apply(null,d).done(function(){f=[].concat.apply([],C);for(var y=0;y<f.length;y++){o[l.getCatalogTileId(f[y])]=f[y];}a(o);}).fail(b);}).fail(b);});return this.oCatalogTilePromise;};
V.prototype.getVisualizationData=function(){var l=this.oLaunchPageAdapter,c;return this._getCatalogTiles().then(function(C){return Object.keys(C).reduce(function(v,i){c=C[i];v[i]={title:l.getCatalogTilePreviewTitle(c),subTitle:l.getCatalogTilePreviewSubtitle(c),icon:l.getCatalogTilePreviewIcon(c),info:l.getCatalogTilePreviewInfo(c),size:l.getCatalogTileSize(c),indicatorDataSource:l.getCatalogTilePreviewIndicatorDataSource(c),url:l.getCatalogTileTargetURL(c),isCustomTile:l.isCustomTile&&l.isCustomTile(c)};return v;},{});}).catch(function(e){var E={component:this.S_COMPONENT_NAME,description:r.i18n.getText("VisualizationDataProvider.CannotLoadData"),detail:e};return Promise.reject(E);}.bind(this));};
V.prototype.getVisualizationView=function(v,p){var l=this.oLaunchPageAdapter;p=p||false;return this._getCatalogTileById(v).then(function(c){return l.getCatalogTileView(c,p);});};
V.prototype._getCatalogTileById=function(v){return this._getCatalogTiles().then(function(c){var C=c[v];if(!C){return Promise.reject("Visualization "+v+" not found");}return C;});};
V.prototype._getAdapter=function(){return this.oLaunchPageAdapter;};
V.hasNoAdapter=false;return V;});
sap.ui.predefine('sap/ushell/services/VisualizationLoading',["sap/m/library","sap/ushell/services/_VisualizationLoading/VizInstanceLocal","sap/ushell/services/_VisualizationLoading/VizInstanceDefault","sap/ushell/services/_VisualizationLoading/VizInstanceEmpty"],function(m,V,a,b){"use strict";var L=m.LoadState;var c={ABAP:"ABAP",local:"local",default:"default",card:"card",empty:"empty"};
function d(){this._init.apply(this,arguments);}
d.prototype._init=function(){};
d.prototype.loadVisualizationData=function(){if(this.oCatalogTileRequest){return this.oCatalogTileRequest;}this.oCatalogTileRequest=sap.ushell.Container.getService("VisualizationDataProvider")._getCatalogTiles().then(function(C){this._oCatalogTiles=C;return Promise.resolve();}.bind(this)).catch(function(e){return Promise.reject(e);});return this.oCatalogTileRequest;};
d.prototype.instantiateVisualization=function(v){var o,e,C;if(!v.localLoad){if(!v.vizId){return{};}if(!this._oCatalogTiles){this.loadVisualizationData();o=new b({visualizationId:v.vizId,vizType:c.empty,state:L.Loaded});o.load();return o;}C=this._oCatalogTiles[v.vizId];if(!C){o=new b({visualizationId:v.vizId,vizType:c.empty,state:L.Error});o.load();return o;}}var t=this._getPlatform(C,v);switch(t){case c.local:e=this._prepareLocalConfig(v,C);o=new V(e.oInitData);break;default:e=this._prepareDefaultConfig(v,C);o=new a(e.oInitData);break;}if(!v.deferLoading){o.load(e.oAdditionalData);}return o;};
d.prototype._getPlatform=function(C,v){var t=c.default;if(C){if(C.getChip!==undefined){t=c.ABAP;}else if(C.namespace||C.tileType||C.properties||v.properties){t=c.local;}}else if(v.localLoad&&v.properties){t=c.local;}return t;};
d.prototype._prepareDefaultConfig=function(v,e){var o={oInitData:{catalogTile:e,visualizationId:v.vizId,vizType:c.default}};return o;};
d.prototype._prepareLocalConfig=function(v,e){var o={oInitData:{catalogTile:e,visualizationId:v.vizId,vizType:c.local}};if(v.properties){o.oAdditionalData={};o.oAdditionalData.properties=v.properties;o.oAdditionalData.mode=v.mode;o.oAdditionalData.namespace=v.namespace;o.oAdditionalData.path=v.path;o.oAdditionalData.moduleType=v.moduleType;o.oAdditionalData.moduleName=v.moduleName;o.oAdditionalData.tileType=v.tileType||"sap.ushell.ui.tile.StaticTile";o.oAdditionalData.keywords=v.keywords||[];}return o;};
d.hasNoAdapter=true;return d;});
sap.ui.predefine('sap/ushell/services/_AppState/AppState',["sap/base/Log","sap/ui/thirdparty/jquery"],function(L,q){"use strict";
function A(S,k,m,D,a,b,t,p,P){this._oServiceInstance=S;this._sKey=k;this._sData=D;this._sAppName=a;this._sACHComponent=b;this._bTransient=t;this._bModifiable=m;this._iPersistencyMethod=p;this._oPersistencySettings=P;if(this._bModifiable){this.setData=function(o){try{this._sData=JSON.stringify(o);}catch(e){L.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined;}};this.save=s.bind(this);this.delete=d.bind(this);}}
function s(){var D=new q.Deferred();this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent,this._bTransient,this._iPersistencyMethod,this._oPersistencySettings).done(function(){D.resolve();}).fail(function(m){D.reject(m);});return D.promise();}
function d(){var D=new q.Deferred();this._oServiceInstance._deleteAppState(this._sKey).done(function(){D.resolve();}).fail(function(m){D.reject(m);});return D.promise();}
A.prototype.getData=function(){var o;if(this._sData===undefined||this._sData===""){return undefined;}try{o=JSON.parse(this._sData);}catch(e){L.error("Could not parse ["+this._sData+"]"+e);}return o;};
A.prototype.getPersistencyMethod=function(){return this._iPersistencyMethod;};
A.prototype.getPersistencySettings=function(){return this._oPersistencySettings;};
A.prototype.getKey=function(){return this._sKey;};
return A;});
sap.ui.predefine('sap/ushell/services/_AppState/AppStatePersistencyMethod',[],function(){"use strict";
function A(){this.PersonalState="PersonalState";this.ACLProtectedState="ACLProtectedState";this.PublicState="PublicState";this.AuthorizationProtectedState="AuthorizationProtectedState";}
return new A();});
sap.ui.predefine('sap/ushell/services/_AppState/AppStatePersistencySettings',[],function(){"use strict";
function A(c,s,r,t){this.CreatorUserID=c;this.SelectedUserIDs=s;this.RetrievalMapping=r;this.Expiration=t;}
return A;});
sap.ui.predefine('sap/ushell/services/_AppState/LimitedBuffer',[],function(){"use strict";
function L(c){this.index=-1;this.capacity=c;this.array=[];}
L.prototype._clear=function(){this.array=[];this.index=-1;};
L.prototype.addAsHead=function(k,v,p,P){this.index=(this.index+1)%this.capacity;this.array[this.index]={key:k,value:v,persistencyMethod:p,persistencySettings:P};};
L.prototype.getByKey=function(k){var i,e;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===k){return this.array[e];}}return undefined;};
L.prototype.deleteByKey=function(k){var i,e,r=false;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===k){delete this.array[e];r=true;}}return r;};
return L;});
sap.ui.predefine('sap/ushell/services/_AppState/Sequentializer',["sap/ui/thirdparty/jquery"],function(q){"use strict";
function S(){this.oLastPromise=new q.Deferred();this.oLastPromise.resolve();}
S.prototype.addToQueue=function(f){var n=new q.Deferred();this.oLastPromise.always(function(){var r=f();r.done(function(){n.resolve.apply(n,arguments);}).fail(function(){n.reject.apply(n,arguments);});});this.oLastPromise=n;return n.promise();};
return S;});
sap.ui.predefine('sap/ushell/services/_AppState/SequentializingAdapter',["sap/ushell/services/_AppState/Sequentializer"],function(S){"use strict";
function a(u){this._oSequentializer=new S();this._oUnderlyingAdapter=u;}
a.prototype.saveAppState=function(k,s,d,A,c,p,P){var f;f=this._oUnderlyingAdapter.saveAppState.bind(this._oUnderlyingAdapter,k,s,d,A,c,p,P);return this._oSequentializer.addToQueue(f);};
a.prototype.loadAppState=function(k){return this._oUnderlyingAdapter.loadAppState(k);};
a.prototype.deleteAppState=function(k){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.deleteAppState){return this._oUnderlyingAdapter.deleteAppState(k);}};
a.prototype.getSupportedPersistencyMethods=function(){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.getSupportedPersistencyMethods){return this._oUnderlyingAdapter.getSupportedPersistencyMethods();}else{return[];}};
return a;});
sap.ui.predefine('sap/ushell/services/_AppState/WindowAdapter',["sap/ushell/services/_AppState/LimitedBuffer","sap/base/Log","sap/ui/thirdparty/jquery"],function(L,a,q){"use strict";var W=50;var C=18;
function b(){this._init.apply(this,arguments);}
b.prototype._init=function(s,B,c){var i=c&&c.config&&c.config.initialAppStates||{};var I=c&&c.config&&c.config.initialAppStatesPromise;this._oServiceInstance=s;this._oBackendAdapter=B;if(!b.prototype.data){b.prototype.data=new L(W);}if(I){I.then(function(i){if(typeof i==="object"){Object.keys(i).forEach(function(k){b.prototype.data.addAsHead(k,i[k]);});}});}Object.keys(i).forEach(function(k){b.prototype.data.addAsHead(k,i[k]);});};
b.prototype.saveAppState=function(k,s,d,A,c,t,p,P){this.sComponent=c;var D=new q.Deferred();b.prototype.data.addAsHead(k,d,p,P);if(this._oBackendAdapter&&!t){return this._oBackendAdapter.saveAppState(k,s,d,A,c,p,P);}D.resolve();return D.promise();};
b.prototype.loadAppState=function(k){var d=new q.Deferred(),c=b.prototype.data.getByKey(k);if(c){setTimeout(function(){d.resolve(k,c.value,c.persistencyMethod,c.persistencySettings);},0);return d.promise();}try{if(window.opener&&window.opener.sap&&window.opener.sap.ushell){var A=window.opener.sap.ui.require("sap/ushell/services/AppState").WindowAdapter.prototype.data.getByKey(k);if(A){d.resolve(k,A.value);return d.promise();}}}catch(e){if(e.code===C){a.warning("AppState.js - loadAppState: Opener is not of the same origin and cannot be used for AppState resolving.");}else{a.warning("AppState.js - loadAppState: Opener is a FLP but AppState could not get resolved from there.");}}if(this._oBackendAdapter){this._oBackendAdapter.loadAppState(k).done(function(k,D,p,f){b.prototype.data.addAsHead(k,D);d.resolve(k,D,p,f);}).fail(d.reject.bind(d));return d.promise();}d.reject("AppState.js - loadAppState: Application State could not be loaded");return d.promise();};
b.prototype.deleteAppState=function(k){var d=new q.Deferred();b.prototype.data.deleteByKey(k);if(this._oBackendAdapter&&this._oBackendAdapter.deleteAppState){return this._oBackendAdapter.deleteAppState(k);}d.resolve();return d.promise();};
b.prototype.getSupportedPersistencyMethods=function(){if(this._oBackendAdapter&&this._oBackendAdapter.getSupportedPersistencyMethods){return this._oBackendAdapter.getSupportedPersistencyMethods();}return[];};
return b;});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Formatter',[],function(){"use strict";
function f(i){return"#"+i.semanticObject+"-"+i.action+"{"+a(i.signature)+"}";}
function p(i){var m=i.match(/^#(.+?)-(.+?)({(.+)})?$/);if(!m){throw"Cannot parse inbound";}var r={semanticObject:m[1],action:m[2],signature:{parameters:{}}};if(!m[3]){return r;}r.signature=b(m[4]);return r;}
function a(i){var I=i||{},P=I.parameters||{},t={optional:"[FORMAT]",required:"FORMAT"},F={regexp:"/VALUE/",reference:"@VALUE@",value:"VALUE",plain:"VALUE",_unknown:"?VALUE?"},A={allowed:"<+>",notallowed:"<->",ignored:"<o>",_unknown:"<?>"};var h=P&&Object.prototype.toString.apply(P)==="[object Object]"&&Object.keys(P).length>0;if(!h){return"<no params>"+(A[I.additionalParameters]||A._unknown);}var r=[];Object.keys(P).forEach(function(s){var o=P[s],c=o.required?"required":"optional",d=o.filter&&o.filter.value,e=o.defaultValue&&o.defaultValue.value,g=(o.filter&&o.filter.format)||"plain",j=(o.defaultValue&&o.defaultValue.format)||"plain";var v=[],k=F[g]||F._unknown,l=F[j]||F._unknown;if(d){v.push(t["required"].replace("FORMAT",k.replace("VALUE",d)));}if(e){v.push(t["optional"].replace("FORMAT",l.replace("VALUE",e)));}r.push(t[c].replace("FORMAT",s+":"+v.join("")));});return r.join(",")+(A[I.additionalParameters]||A._unknown);}
function b(c){function d(v){var V=[{re:new RegExp(/^[/](.+)[/]$/),format:"regexp"},{re:new RegExp(/^[@](.+)[@]$/),format:"reference"},{re:new RegExp(/^[?](.+)[?]$/),format:"???"}].reduce(function(r,D){var m=v.match(D.re);if(r){return r;}if(!m){return null;}return{format:D.format,value:m[1]};},null);if(V){return V;}return{value:v};}function e(j){var n,k,l,m,o,w,M,q,t,O,R,N;N="<no params>";n="[^\\]\\[]";R="("+n+"+?):("+n+"*)(.*)";O="\\["+R+"\\]";t=N+"|"+O+"|"+R;q=new RegExp("^"+t+"$");o={success:false,name:null,value:{}};M=j.match(q);if(!M){return o;}w=M.shift();while(M.length>0){m=M.shift();l=M.shift();k=M.shift();if(m){o.name=m;if(l){o.value.filter=d(l);}if(k){o.value.defaultValue=d(k.replace(/\[(.+)\]/,"$1"));}o.value.required=(w.charAt(0)!=="[");}}o.success=true;return o;}function g(j){return[{"<+>":"allowed"},{"<->":"notallowed"},{"<o>":"ignored"}].reduce(function(R,o,I,k){if(R){return R;}var l=Object.keys(o)[0];if(j===l){return o[l];}return null;},null);}function s(P){var I=[];P.split(":").reduce(function(j,n,k,l){var v,N,V;if(k===0){return n;}if(k<l.length-1){V=n.split(",");if(V.length>1){N=V.pop();v=V.join(",");}else{return j+":"+n;}}else{v=n;}I.push([j,v].join(":"));return N;},"");return I;}var r={parameters:{}};var A=c.substr(c.length-3,3);var h=!!A.match(/<[?o+-]>/);var P=c;if(h){P=c.substr(0,c.length-3);}var S=s(P);S.forEach(function(j){var o=e(j);if(!o.success){throw new Error("Cannot parse parameters from "+c);}if(o.name){r.parameters[o.name]=o.value;}});if(h){var i=g(A);if(i){r.additionalParameters=g(A);}}else{r.additionalParameters="ignored";}return r;}
return{formatInboundSignature:a,parseInboundSignature:b,parseInbound:p,formatInbound:f};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/InboundIndex',["sap/base/util/ObjectPath","sap/base/Log"],function(O,L){"use strict";
function g(){return this.index.all;}
function a(S){if(S==="*"||S===undefined){return this.index.all;}return(this.index.segment[S]||[]).concat(this.index.always);}
function b(T){return T.map(function(d){return this.index.tag[d]||[];},this).reduce(function(u,I){Array.prototype.push.apply(u,I.filter(function(o){return o.isAlreadyInUnion?false:(o.isAlreadyInUnion=true);}));return u;},[]).map(function(I){delete I.isAlreadyInUnion;return I;});}
var i=Object.create(Object.prototype,{getSegment:{value:a},getAllInbounds:{value:g},getSegmentByTags:{value:b}});
function t(I,o){var T=O.get("signature.parameters.sap-tag.defaultValue.value",I);if(!T){return;}if(!o.tag[T]){o.tag[T]=[];}o.tag[T].push(I);}
function s(I,o){var S=I.semanticObject;if(S==="*"){o.always.push(I);}else{if(!o.segment[S]){o.segment[S]=[];}o.segment[S].push(I);}}
function c(I){var o={all:I,segment:{},always:[],tag:{}};I.forEach(function(d,e){if(!d){L.warning("Void inbound provided to indexer","the inbound will be skipped");return;}t(d,o);s(d,o);});return Object.create(i,{index:{value:o}});}
return{createIndex:c,private:{tagInbound:t,createIndex:c,segmentInbound:s}};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/InboundProvider',["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/InboundIndex"],function(v,i){"use strict";
function I(){this._init.apply(this,arguments);}
;
I.prototype._init=function(r){this._fnRetrieveInbounds=r;this._oInboundsRetrievalPromise=null;};
I.prototype.getInbounds=function(s){if(s){return this._getSomeInbounds(s);}return this._getAllInbounds();};
I.prototype._getSomeInbounds=function(s){var t=this;return new Promise(function(r,R){t._fnRetrieveInbounds(s).done(function(a){r(i.createIndex(a.concat(v.getInbounds())));}).fail(function(){R.apply(null,arguments);});});};
I.prototype._getAllInbounds=function(){var t=this;if(this._oInboundsRetrievalPromise){return this._oInboundsRetrievalPromise;}this._oInboundsRetrievalPromise=new Promise(function(r,R){t._fnRetrieveInbounds().done(function(a){r(i.createIndex((a||[]).concat(v.getInbounds())));}).fail(function(){R.apply(null,arguments);});});return this._oInboundsRetrievalPromise;};
return I;});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/ParameterMapping',[],function(){"use strict";
function m(M){var n={},o=M.intentParamsPlusAllDefaults;Object.keys(o).sort().forEach(function(p){var r=g(p,M.inbound.signature,o[p]);if(Array.isArray(M.intentParamsPlusAllDefaults[p])){if(n[r]){jQuery.sap.log.error("collision of values during parameter mapping : \""+p+"\" -> \""+r+"\"");}else{n[r]=M.intentParamsPlusAllDefaults[p];}}});M.mappedIntentParamsPlusSimpleDefaults=n;}
function g(p,s,P){if(!P||!Array.isArray(P)){return p;}if(s&&s.parameters&&s.parameters[p]&&s.parameters[p].renameTo){return s.parameters[p].renameTo;}return p;}
return{mapParameterNamesAndRemoveObjects:m,getRenameParameterName:g};},false);
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations',["sap/base/Log","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/utils/clone"],function(L,S,c,C){"use strict";var a="sap.ushell.services.ClientSideTargetResolution.PrelaunchOperations";
function _(A){if(!A){return Promise.resolve(null);}return new Promise(function(r,R){sap.ushell.Container.getService("AppState").getAppState(A).done(function(i){r(i);}).fail(function(E){R(E);});});}
function b(P,M,s,i,D){if(P.startupParametersModified){M.mappedIntentParamsPlusSimpleDefaults=i;}if(P.defaultedParameterNamesModified){M.mappedDefaultedParamNames=D;}if(P.selectionVariantModified){var A=sap.ushell.Container.getService("AppState");var N=A.createEmptyAppState(undefined,true);N.setData({selectionVariant:s.toJSONObject()});return new Promise(function(r,R){N.save().done(function(){M.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[N.getKey()];r(M);}).fail(function(t){R(t);});});}return Promise.resolve(M);}
function d(O){var s=O.type;switch(s){case"merge":case"split":return s+" - source: "+O.source+" & target: "+O.target;case"delete":return s+" - target: "+O.target;default:return"";}}
function e(P,s){if(s.getSelectOption(P)){return s.getSelectOption(P)[0].Low;}return undefined;}
function f(P,s){if(s.getSelectOption(P)){return s.getSelectOption(P)[0].High;}return undefined;}
function g(P,s){if(s[P]){return s[P][0];}return undefined;}
function h(O,s,i){var r=O.source[0],t=O.source[1],u=e(r,s),v=e(t,s),w=g(r,i),x=g(t,i),y,z,T=O.target;function A(V,B){if(B===undefined||V===B){return V;}return undefined;}if(u&&v){y=A(u,w);z=A(v,x);}else if(w&&x){y=A(w,u);z=A(x,v);}if(y&&z&&!s.getSelectOption(T)&&!i.hasOwnProperty(T)){s.addSelectOption(T,"I","BT",y,z);return{selectionVariantModified:true,startupParametersModified:false,defaultedParameterNamesModified:false};}return{};}
function j(O,s,i){var t=O.target,r=O.source;if(!s.getSelectOption(r)){L.error("Invalid split operation: "+r+" does not exist in selection variant");return false;}if(s.getSelectOption(t[0])){L.error("Invalid split operation: "+t[0]+" already exists in selection variant");return false;}if(s.getSelectOption(t[1])){L.error("Invalid split operation: "+t[1]+" already exists in selection variant");return false;}if(i[t[0]]){L.error("Invalid split operation: "+t[0]+" already exists in startup parameters");return false;}if(i[t[1]]){L.error("Invalid split operation: "+t[1]+" already exists in startup parameters");return false;}return true;}
function k(O,s,i){var t=O.target,r=O.source,u=j(O,s,i);if(u){var v=e(r,s),w=f(r,s);s.addSelectOption(t[0],"I","EQ",v,null);i[t[0]]=[v];s.addSelectOption(t[1],"I","EQ",w||v,null);i[t[1]]=[w||v];return{selectionVariantModified:true,startupParametersModified:true,defaultedParameterNamesModified:false};}return{};}
function l(O,s,r,D){var t=O.target,u={selectionVariantModified:false,startupParametersModified:false,defaultedParameterNamesModified:false};for(var i=0;i<t.length;i++){var T=t[i];if(T==="sap-xapp-state"){L.warning("Cannot execute delete: 'sap-xapp-state' is not allowed to be deleted");continue;}if(s.getParameter(T)){s.removeParameter(T);u.selectionVariantModified=true;}if(s.getSelectOption(T)){s.removeSelectOption(T);u.selectionVariantModified=true;}if(r[T]){delete r[T];u.startupParametersModified=true;}var v=D.indexOf(T);if(v>-1){D.splice(v,1);u.defaultedParameterNamesModified=true;}}return u;}
function m(P){var i;if(P===""){return[];}try{i=JSON.parse(P);}catch(r){L.error("Cannot parse operation array: sap-prelaunch-operations should be in json format.");return[];}if(!Array.isArray(i)){L.error("Invalid operation array: sap-prelaunch-operations should be an array.");return[];}return i;}
function n(P){if(P.length===0){return null;}var v={"split":true,"merge":true,"delete":true};var i=P.filter(function(O){return!v[O.type];});if(i.length>0){L.error("Invalid operation: the following sap-prelaunch-operations are invalid: "+i.join(", "));return null;}var s=P.some(function(O){return O.type==="split"&&O.target[0]===O.target[1];});if(s){L.error("Invalid operation: split operation contains the same target value. Use two different target values instead.");return null;}var I=P.some(function(O){if(O.type==="split"){return!O.hasOwnProperty("source")||!O.hasOwnProperty("target")||typeof O.source!=="string"||!Array.isArray(O.target)||Object.keys(O).length!==3||Object.keys(O.target).length!==2;}if(O.type==="merge"){return!O.hasOwnProperty("source")||!O.hasOwnProperty("target")||typeof O.target!=="string"||!Array.isArray(O.source)||Object.keys(O).length!==3||Object.keys(O.source).length!==2;}if(O.type==="delete"){return!O.hasOwnProperty("target")||!Array.isArray(O.target)||Object.keys(O).length!==2;}});if(I){L.error("Invalid operation: one or more operations are specified in an incorrect format.");return null;}return P;}
function p(P){var i=m(P);return n(i);}
function o(s,P,i,D){var r=c.isDebugEnabled()?[]:null,t={selectionVariantModified:false,startupParametersModified:false};P.forEach(function(O){var E={};switch(O.type){case"split":E=k(O,s,i);break;case"merge":E=h(O,s,i);break;case"delete":E=l(O,s,i,D);break;default:L.error("Invalid operation: "+O.type+" prelaunch operation type is not supported");}if(r){var I=Object.keys(E).length!==0?"\u2705":"\u274c";r.push(I+" "+d(O));}if(Object.keys(E).length===0){L.warning("Cannot execute "+d(O));}t.selectionVariantModified=t.selectionVariantModified||E.selectionVariantModified;t.startupParametersModified=t.startupParametersModified||E.startupParametersModified;t.defaultedParameterNamesModified=t.defaultedParameterNamesModified||E.defaultedParameterNamesModified;});if(r){L.debug(a+"\n"+r.join("\n"));}return t;}
function q(M,P){if(!P){return Promise.resolve(M);}var s=M.mappedIntentParamsPlusSimpleDefaults,D=M.mappedDefaultedParamNames,i=s["sap-xapp-state"]&&s["sap-xapp-state"][0],r=p(P);if(!r||r.length===0){return Promise.resolve(M);}return _(i).then(function(A){var t=A?A.getData():{},u=C(s),v=C(D),w;if(t.selectionVariant){w=new S(JSON.stringify(t.selectionVariant));}else{w=new S();}var x=o(w,r,u,v);return b(x,M,w,u,v);});}
return{executePrelaunchOperations:q,parseAndValidateOperations:p};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Search',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/TechnicalParameters","sap/base/Log","sap/ui/thirdparty/jquery"],function(u,U,v,f,t,L,q){"use strict";var A=[undefined,"GUI","WDA","UI5"];
function a(M,I){var R=M.inbound.resolutionResult;if(!R){return"";}return["applicationType","ui5ComponentName","url","additionalInformation","text"].map(function(K){if(I){return R.hasOwnProperty(K)?K+":"+R[K]:"";}return R.hasOwnProperty(K)?R[K]:"";}).join("");}
function b(M){return M.sort(function(s,y){if((s["sap-priority"]||0)-(y["sap-priority"]||0)!==0){return-((s["sap-priority"]||0)-(y["sap-priority"]||0));}if(s.priorityString<y.priorityString){return 1;}if(s.priorityString>y.priorityString){return-1;}var S=a(s);var z=a(y);if(S<z){return 1;}else if(S>z){return-1;}return 0;});}
function e(I,M){var s;if(I&&I["sap-priority"]&&I["sap-priority"][0]){s=parseInt(I["sap-priority"][0],10);if(!isNaN(s)){M["sap-priority"]=s;}}return;}
function m(V,F,K,M){var s;if(!F){return true;}if(!V&&V!==""){return false;}s=F.value;if(F.format==="reference"){if(/UserDefault\.extended\./.test(s)){L.error("Illegal inbound: extended user default '"+s+"' used as filter");return false;}if(K.hasOwnProperty(s)){return V===K[s];}M[s]=true;return true;}if(F.format==="value"||F.format==="plain"||F.format===undefined){return V===F.value;}else if(F.format==="regexp"){return!!V.match("^"+F.value+"$");}L.error("Illegal oFilter format");return false;}
function g(M){return M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.ui"]&&M.inbound.resolutionResult["sap.ui"].technology;}
function c(M){return M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult.appId;}
function d(I,s,K,M,D){var y={},z={};Object.keys(I).forEach(function(P){if(P!=="sap-ushell-defaultedParameterNames"){y[P]=I[P];}});if(!s){return y;}Object.keys(s).forEach(function(P){var T=s[P],B,V=false;if(!y[P]&&T.hasOwnProperty("defaultValue")){if(T.defaultValue.format&&T.defaultValue.format==="reference"){B=T.defaultValue.value;if(K.hasOwnProperty(B)){if(typeof K[B]==="string"){y[P]=[K[B]];V=true;}else if(typeof K[B]==="object"){y[P]=K[B];V=true;}}else{y[P]=[T.defaultValue];M.push(T.defaultValue.value);}}else{y[P]=[T.defaultValue.value];V=true;}if(V){z[P]=true;}}});Object.keys(z).sort().forEach(function(P){D.push(P);});return y;}
function h(M,I){M.resolutionResult={};if(I&&I.resolutionResult&&I.resolutionResult.hasOwnProperty("sap.platform.runtime")){M.resolutionResult["sap.platform.runtime"]=I.resolutionResult["sap.platform.runtime"];}Object.keys(M.intentParamsPlusAllDefaults).slice(0).forEach(function(N){if(!Array.isArray(M.intentParamsPlusAllDefaults[N])){if(!M.resolutionResult.oNewAppStateMembers){M.resolutionResult.oNewAppStateMembers={};}M.resolutionResult.oNewAppStateMembers[N]=M.intentParamsPlusAllDefaults[N];}});}
function i(R,M){R.forEach(function(s){M[s]=true;});}
function j(M){var T=M.intentParamsPlusAllDefaults["sap-ui-tech-hint"]&&M.intentParamsPlusAllDefaults["sap-ui-tech-hint"][0];var I=M.defaultedParamNames&&(M.defaultedParamNames.indexOf("sap-ui-tech-hint")>=0);if(T&&g(M)===T){return I?1:2;}return 0;}
function k(M){var s=M.intentParamsPlusAllDefaults["sap-ui-app-id-hint"]&&M.intentParamsPlusAllDefaults["sap-ui-app-id-hint"][0];if(s&&(s===c(M))){return 1;}return 0;}
function l(M,y){function z(N){var s="000"+N;return s.substr(s.length-3);}return["AIDM="+k(M),M.genericSO?"g":"x","TECM="+j(M),"MTCH="+z(y.countMatchingParams),"MREQ="+z(y.countMatchingRequiredParams),"NFIL="+z(y.countMatchingFilterParams),"NDEF="+z(y.countDefaultedParams),"POT="+z(y.countPotentiallyMatchingParams),"RFRE="+z(999-y.countFreeInboundParams),"TECP="+n(M)].join(" ");}
function n(M){var T=g(M);var P=A.indexOf(T);return Math.max(0,P);}
function o(I,s){var y=false;if(I.signature.additionalParameters==="allowed"||I.signature.additionalParameters==="ignored"){return true;}if(I.signature.additionalParameters==="notallowed"||I.signature.additionalParameters===undefined){y=Object.keys(s).every(function(P){return!((!I.signature.parameters[P]&&P.indexOf("sap-")!==0));});}else{L.error("Unexpected value of inbound for signature.additionalParameters");}return y;}
function p(I,s,K,D){var M=s.reduce(function(R,y){var z=x(I,y,K,R.missingReferences);if(z.matches){R.matchResults.push(z);}else if(D){(function(){var N=R.noMatchReasons;var B=f.formatInbound(y);N[B]=z.noMatchReason+(z.noMatchDebug?"| DEBUG: "+z.noMatchDebug:"");})();}return R;},{matchResults:[],noMatchReasons:{},missingReferences:{}});return q.when(M);}
function r(I,s,y,D,K,M){var S=Object.keys(I).every(function(P){var V=s[P],z=V&&V[0],B=I[P];if(B.required&&(z===null||z===undefined)){return false;}if(B.filter){if(!m(z,B.filter,K,M)){return false;}}return true;});return S;}
function w(I,s,y,D,z){var B=0,C=0,E=0,F=0,S={};function G(P){return!t.isTechnicalParameter(P);}var H=Object.keys(y).filter(G);var J=D.filter(G);Object.keys(I).filter(G).forEach(function(P){var V=s[P],K=V&&V[0],M=I[P],N=y.hasOwnProperty(P);if(N){++B;if(M.filter){++E;}if(M.required){++C;}}else if(K===null||K===undefined){++F;}});if(z){S.countPotentiallyMatchingParams=H.filter(function(K){return I.hasOwnProperty(K);}).length;}else{S.countPotentiallyMatchingParams=H.length;}S.countDefaultedParams=J.length;S.countMatchingParams=B;S.countMatchingRequiredParams=C;S.countMatchingFilterParams=E;S.countFreeInboundParams=F;return S;}
function x(I,s,K,M){var y={inbound:s};function N(Y,Z,$){Y.matches=false;Y.noMatchReason=Z;Y.noMatchDebug=$;return Y;}function z(Y){Y.matches=true;Y.matchesVirtualInbound=v.isVirtualInbound(s);Y.parsedIntent=I;return Y;}var B=s.semanticObject==="*";y.genericSO=B;var S=I.semanticObject===undefined||I.semanticObject===s.semanticObject||B;if(!S){return N(y,"Semantic object \""+I.semanticObject+"\" did not match");}var C=I.action===undefined||I.action===s.action;if(!C){return N(y,"Action \""+I.action+"\" did not match");}var F=!s.deviceTypes||I.formFactor===undefined||s.deviceTypes[I.formFactor];if(!F){return N(y,"Form factor \""+I.formFactor+"\" did not match","Inbound: ["+Object.keys(s.deviceTypes).filter(function(Y){return!!s.deviceTypes[Y];}).join(", ")+"]");}var T=I.params&&I.params["sap-ui-tech-hint"]&&I.params["sap-ui-tech-hint"][0];if(I.treatTechHintAsFilter&&T){var D=g({inbound:s});if(D!==T){return N(y,"Tech Hint as filter \""+T+"\" did not match","Inbound: ["+D+"]");}}var R=[],E=[],G=I.params||{};var H=d(G,s.signature&&s.signature.parameters,K,R,E);y.intentParamsPlusAllDefaults=H;y.defaultedParamNames=E;e(H,y);var J=r(s.signature.parameters,H,G,E,K,M);if(!J){return N(y,"Inbound parameter signature did not match",f.formatInboundSignature(s.signature));}var P=U.constructParameterDominatorMap(s.signature.parameters);var O=U.findDominatedDefaultParameters(H,E,P);var Q=E.filter(function(Y){return!O[Y];});var V=U.filterObjectKeys(H,function(Y){return!O[Y];});if(!o(s,V)){return N(y,"Additional parameters not allowed",f.formatInboundSignature(s.signature));}var W=s.signature.additionalParameters==="ignored";if(W){U.filterObjectKeys(V,function(Y){if(Y.indexOf("sap-")===0){return true;}if(s.signature.parameters.hasOwnProperty(Y)){return true;}return false;},true);}var X=w(s.signature.parameters,H,G,E,W);h(y,s);y.intentParamsPlusAllDefaults=V;y.defaultedParamNames=Q;y.priorityString=l(y,X);i(R,M);return z(y);}
return{match:p,matchOne:x,sortMatchingResultsDeterministic:b,matchesFilter:m,checkAdditionalParameters:o,addDefaultParameterValues:d,extractSapPriority:e,serializeMatchingResult:a};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/StagedLogger',["sap/ushell/services/_ClientSideTargetResolution/Utils"],function(u){"use strict";var _={};
function b(g){var L,o,s=g();if(!s.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #begin method of StagedLogger.");}L=s.logId;if(_[L]){throw new Error("'cannot call #begin twice with same log id: '"+L+"'");}else{_[L]={};}o=_[L];o.title=s.title||null;o.moduleName=s.moduleName||null;var r=function(c,n){if(n===1){return c;}return r(c,n-1)+c;};o.stages=s.stages.map(function(S){return[S,r("-",S.length)];});return L;}
function l(g){var L,c,s,d,p,S,n,A;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}L=A.logId;S=A.stage;p=A.prefix;d=A.lines;s=A.line;n=A.number;if(!d&&s&&p){s=p+" "+s;}c=_[L].stages[S-1];if(s){c.push(s);}if(d){if(p){p=(s?" ":"")+p;}var f=d.map(function(s,i){return(n?(i+1):"")+(p?p+" ":"")+s;});c.push.apply(c,f);}}
function e(g){var A,L,s;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}s=A.logId;L=_[s];if(typeof L!=="object"){throw new Error("Logger .end was called on an already ended logger");}var c=L.stages.map(function(S){return S.join("\n");}).join("\n\n");jQuery.sap.log.debug("[REPORT #"+s+"] "+L.title,"\n"+c+"\n",L.moduleName);delete _[s];}
function a(){return _;}
return{begin:function(){if(!u.isDebugEnabled()){return;}b.apply(null,arguments);},log:function(){if(!u.isDebugEnabled()){return;}l.apply(null,arguments);},end:function(){if(!u.isDebugEnabled()){return;}e.apply(null,arguments);},_getLogs:a};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Utils',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L,v,f){"use strict";
function a(I,D,p){var o={};D.forEach(function(s){var h=p[s].dominatedBy;var j=h.some(function(k){var l=!!I[k];var m=k!==s;var n=D.indexOf(k)===-1;return l&&n&&m;});if(j){o[s]=true;}});return o;}
function c(p){var D={},r={};Object.keys(p).forEach(function(k){var R=p[k].renameTo||k;r[R]=r[R]||{"renameTo":R,"dominatedBy":[]};r[R].dominatedBy.push(k);r[R].dominatedBy=r[R].dominatedBy.sort();D[k]=r[R];});return D;}
function b(o,F,I){var O=I?o:q.extend(true,{},o);Object.keys(O).forEach(function(k){if(F(k)===false){delete O[k];}});return O;}
function d(o,F){var h;h=Object.keys(o).reduce(function(h,k){var V=o[k];if(F(k,V)){h[k]=V;}return h;},{});return h;}
function w(h){if(i()){h.call(null);}}
function i(){var C=L.getLevel();if(C>=L.Level.DEBUG){return true;}return false;}
function e(I,p){return p.every(function(P){var o,O,s;s=P.name;O=P.options;o=I[s];return Object.keys(O).every(function(h){var j=O[h];if(h==="required"){return!!(o||{}).required===j;}return false;});});}
function g(p,W){var E={};p.forEach(function(P){if(W[P]){E[P]=W[P];delete W[P];}});return E;}
return{inboundSignatureMeetsParameterOptions:e,filterObjectKeys:b,filterObject:d,constructParameterDominatorMap:c,findDominatedDefaultParameters:a,whenDebugEnabled:w,isDebugEnabled:i,extractParameters:g};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds',[],function(){"use strict";var v={};var A=[{hideIntentLink:true,semanticObject:"Action",action:"search",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.renderers.fiori2.search.container",additionalInformation:"SAPUI5.Component=sap.ushell.renderers.fiori2.search.container",url:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/search/container"),loadCoreExt:true,loadDefaultDependencies:false}},{hideIntentLink:true,semanticObject:"Shell",action:"compose",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{roleId:{required:false,defaultValue:{value:""}},pageId:{required:false,defaultValue:{value:""}},mode:{required:false,defaultValue:{value:"view"}}},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.applications.PageComposer",additionalInformation:"SAPUI5.Component=sap.ushell.applications.PageComposer",url:sap.ui.require.toUrl("sap/ushell/applications/PageComposer"),loadCoreExt:true,loadDefaultDependencies:false}},{hideIntentLink:true,semanticObject:"FLPSpace",action:"maintain",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{roleId:{required:false,defaultValue:{value:""}},spaceId:{required:false,defaultValue:{value:""}},mode:{required:false,defaultValue:{value:"view"}}},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.applications.SpaceDesigner",additionalInformation:"SAPUI5.Component=sap.ushell.applications.SpaceDesigner",url:sap.ui.require.toUrl("sap/ushell/applications/SpaceDesigner"),loadCoreExt:true,loadDefaultDependencies:false}}];
v.isVirtualInbound=function(i){return A.some(function(V){return V===i;});};
v.getInbounds=function(){return A;};
return v;});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/navigationMode","sap/ushell/services/AppConfiguration","sap/ushell/Config","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/ui/generic/app/navigation/service/SelectionVariant"],function(u,c,n,a,C,q,O,i,b,S){"use strict";
function m(M,A){var D=new q.Deferred(),N,R=M.resolutionResult,t=M.inbound&&(M.inbound.signature||{}),v=h(R)||t.additionalParameters==="ignored"||k(M);if(!v){e(D,M);return D.promise();}var w=M.intentParamsPlusAllDefaults["sap-xapp-state"]&&M.intentParamsPlusAllDefaults["sap-xapp-state"][0];if(w){s(A,w).then(p).then(function(V){if(h(R)){var P=c.constructParameterDominatorMap(t.parameters);Object.keys(R.oNewAppStateMembers).forEach(function(x){var y=P[x].dominatedBy;if(g(V,y)){delete R.oNewAppStateMembers[x];}});}var I=t.additionalParameters==="ignored";if(!h(R)&&!k(M)&&!I){e(D,M);return;}N=A.createEmptyAppState(undefined,true);if(N){N.setData(V);d(N,M,D);}},function(){delete R.oNewAppStateMembers;e(D,M);return;});return D.promise();}if(h(R)){var E=A.createEmptyAppState(undefined,true);d(E,M,D);return D.promise();}e(D,M);return D.promise();}
function d(N,M,D){var t=N.getData()||{},v,w={},x=M.inbound.signature,R=M.resolutionResult;if(t.selectionVariant){v=new S(JSON.stringify(t.selectionVariant));}else{v=new S();}if(h(R)){Object.keys(R.oNewAppStateMembers).forEach(function(y){v.massAddSelectOption(y,R.oNewAppStateMembers[y].Ranges);});}var I=x.additionalParameters==="ignored";v=r(v,w,x.parameters,I);if(v.getParameterNames().length!==0||v.getSelectOptionsPropertyNames().length!==0||w.deleted){t.selectionVariant=v.toJSONObject();}if(!w.changed&&!w.deleted&&!h(R)){e(D,M);return;}N.setData(t);N.save().done(function(){M.intentParamsPlusAllDefaults["sap-xapp-state"]=[N.getKey()];M.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[N.getKey()];e(D,M);});}
function e(D,M){var N;l(M);o(M);N=n.compute(O.get("inbound.resolutionResult.applicationType",M),(M.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(M.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(a.getCurrentApplication()||{}).applicationType,C.last("/core/navigation/enableInPlaceForClassicUIs"));u.shallowMergeObject(M.resolutionResult,N);delete M.resolutionResult.oNewAppStateMembers;D.resolve(M);}
function h(R){return R.oNewAppStateMembers&&!i(R.oNewAppStateMembers);}
function f(L,P){return Array.isArray(L)&&L.some(function(M){return(P.indexOf(M)!==-1);});}
function g(A,P){if(A&&A.selectionVariant){var t=new S(JSON.stringify(A.selectionVariant)),v=(t.getSelectOptionsPropertyNames()||[]),w=(t.getParameterNames()||[]);if(f(v,P)||f(w,P)){return true;}}return false;}
function r(t,R,P,I){var v=new S(),w=(t.getParameterNames()||[]),x=(t.getSelectOptionsPropertyNames()||[]),y,z;w.forEach(function(A){y=t.getParameter(A);if(I&&!P[A]){R.deleted=true;return;}if(P[A]&&P[A].renameTo){if((v.getParameter(P[A].renameTo)===undefined)&&(v.getSelectOption(P[A].renameTo)===undefined)){v.addParameter(P[A].renameTo,y);R.changed=true;}else{q.sap.log.error("renaming of appstate creates duplicates "+A+"->"+P[A].renameTo);}}else if((v.getParameter(A)===undefined)&&(v.getSelectOption(A)===undefined)){v.addParameter(A,y);}});x.forEach(function(A){z=t.getSelectOption(A);if(I&&!P[A]){R.deleted=true;return;}if(P[A]&&P[A].renameTo){if((v.getSelectOption(P[A].renameTo)===undefined)&&(v.getParameter(P[A].renameTo)===undefined)){v.massAddSelectOption(P[A].renameTo,z);R.changed=true;}else{q.sap.log.error("renaming of appstate creates duplicates "+A+"->"+P[A].renameTo);}}else if((v.getSelectOption(A)===undefined)&&(v.getParameter(A)===undefined)){v.massAddSelectOption(A,z);}});w.forEach(function(A){t.removeParameter(A);});x.forEach(function(A){t.removeSelectOption(A);});v.getParameterNames().forEach(function(A){t.addParameter(A,v.getParameter(A));});v.getSelectOptionsPropertyNames().forEach(function(A){t.massAddSelectOption(A,v.getSelectOption(A));});return t;}
function j(D){if(D===undefined||b(D)){return false;}return true;}
function k(M){return M.inbound&&M.inbound.signature&&M.inbound.signature.parameters&&Object.keys(M.inbound.signature.parameters).some(function(K){return!!(M.inbound.signature.parameters[K].renameTo);});}
function l(M){M.defaultedParamNames=M.defaultedParamNames.filter(function(N){if(M.intentParamsPlusAllDefaults[N]&&!Array.isArray(M.intentParamsPlusAllDefaults[N])){if(!(M.resolutionResult.oNewAppStateMembers&&M.resolutionResult.oNewAppStateMembers[N])){return false;}}return true;});}
function o(M){var P=(O.get("inbound.signature.parameters",M)||{}),t={};M.defaultedParamNames.forEach(function(N){var v=(P[N]&&P[N].renameTo)||N;if(t[v]){q.sap.log.error("renaming of defaultedParamNames creates duplicates"+N+"->"+v);}else{t[v]=true;}});M.mappedDefaultedParamNames=Object.keys(t).sort();}
function p(A){if(j(A)){return Promise.reject();}return Promise.resolve(A);}
function s(A,t){return new Promise(function(R,v){A.getAppState(t).done(function(w){R(w.getData());}).fail(function(E){v(E);});});}
return{mixAppStateIntoResolutionResultAndRename:m,_hasRenameTo:k};});
sap.ui.predefine('sap/ushell/services/_CommonDataModel/PersonalizationProcessor',["sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log"],function(q,i,L){"use strict";
function P(){}
P.prototype._getItemIndex=function(I,s){var r;for(r=0;r<I.length;r++){if(I[r].id===s){break;}}r=(r>=I.length)?-1:r;return r;};
P.prototype._applyRenameGroup=function(g,n,o){var G,b=false;if(!n){return false;}if(g&&o&&o.groups&&o.groups[g]){G=o.groups[g];if(G.identification&&G.identification.title){o.groups[g].identification.title=n;b=true;}}return b;};
P.prototype._applyGroupVisibility=function(g,G,o){var b=false;if(G===undefined){return false;}if(g&&o&&o.groups&&o.groups[g]){o.groups[g].identification.isVisible=G;b=true;}return b;};
P.prototype.mixinPersonalization=function(o,p){var d=new q.Deferred(),t=this;if(!p||i(p)){return d.resolve(o).promise();}if(p.groups){Object.keys(p.groups).forEach(function(g){var G=p.groups[g];if(o.groups[g]){if(G.identification){if(G.identification.title){t._applyRenameGroup(g,G.identification.title,o);}if(G.identification.hasOwnProperty("isVisible")&&G.identification.isVisible===false){t._applyGroupVisibility(g,false,o);}}}});}this._applyAddGroups(o,p);if(p.removedGroups&&Array.isArray(p.removedGroups)){p.removedGroups.forEach(function(g){t._applyRemoveGroup(o,g);});}this._applyMoveGroup(o,p);this._applyItemChanges(o,p);this._applyTileSettings(o,p);return d.resolve(o).promise();};
P.prototype._applyAddGroups=function(o,p){var n=[];o.site=o.site||{};o.site.payload=o.site.payload||{};o.site.payload.groupsOrder=o.site.payload.groupsOrder||[];o.groups=o.groups||{};if(Array.isArray(p.groupOrder)){o.site.payload.groupsOrder.forEach(function(g){if(p.groupOrder.indexOf(g)===-1){if((p.removedGroups&&p.removedGroups.indexOf(g)===-1)||!p.removedGroups){n.push(g);}}});}if(Array.isArray(p.groupOrder)&&p.addedGroups&&Object.keys(p.addedGroups).length>0){Object.keys(p.addedGroups).forEach(function(g){o.groups[g]=p.addedGroups[g];o.groups[g].payload.isPreset=false;});o.site.payload.groupsOrder=p.groupOrder;}n.forEach(function(N){o.site.payload.groupsOrder.push(N);});};
P.prototype._checkRenameGroup=function(g,p,o,a){if(g&&p&&o){if(o[g]){if(p[g].identification.title!==o[g].identification.title){a=a||{};a.groups=a.groups||{};a.groups[g]=a.groups[g]||{};a.groups[g].identification=a.groups[g].identification||{};a.groups[g].identification.title=p[g].identification.title;}}}return a;};
P.prototype._checkTileSettings=function(p,o){if(!p.modifiedTiles){return;}o.modifiedTiles=p.modifiedTiles;};
P.prototype._applyTileSettings=function(s,p){var g,m;if(!p.modifiedTiles){return;}g=Object.keys(s.groups).map(function(k){return this[k];},s.groups);m=Object.keys(p.modifiedTiles).map(function(k){return this[k];},p.modifiedTiles);g.some(function(G){["tiles","links"].forEach(function(t){if(G.payload[t]){G.payload[t].some(function(T){var a;m.some(function(u,I){if(u.id===T.id){if(u.title!==undefined){T.title=u.title;}if(u.subTitle!==undefined){T.subTitle=u.subTitle;}if(u.info!==undefined){T.info=u.info;}a=I;return true;}return false;});if(a!==undefined){m.splice(a,1);}return m.length===0;});}});return m.length===0;});s.modifiedTiles=p.modifiedTiles;};
P.prototype._checkGroupVisibility=function(g,p,o,a){if(g&&p&&o){if(o[g]){if(p[g].identification.isVisible!==o[g].identification.isVisible&&typeof p[g].identification.isVisible==="boolean"){a=a||{};a.groups=a.groups||{};a.groups[g]=a.groups[g]||{};a.groups[g].identification=a.groups[g].identification||{};a.groups[g].identification.isVisible=p[g].identification.isVisible;}}}return a;};
P.prototype._addGroupToPersonalizationDelta=function(p,o,g){var s=false,G,n;if(p&&p.site&&p.site.payload&&p.site.payload.groupsOrder&&p.groups&&g&&p.groups[g]&&o){G=p.site.payload.groupsOrder;n=p.groups[g];o.addedGroups=o.addedGroups||{};o.addedGroups[g]={};o.addedGroups[g].identification=q.extend({},n.identification);o.addedGroups[g].payload=q.extend({},n.payload);o.addedGroups[g].payload.tiles=[];o.addedGroups[g].payload.links=[];o.groupOrder=G;s=true;}return s;};
P.prototype.extractPersonalization=function(p,o){var d=new q.Deferred(),a,b={},O,e,t=this;if(o&&o._version){b._version=o._version;}if(p&&p.groups&&o&&o.groups){a=p.groups;O=o.groups;e=this._getExtractHelperObject(o,p,b);Object.keys(O).forEach(function(g){t._checkRemoveGroup(p,b,g);t._extractFromOriginalSiteOneGroup(o,e,g,"tiles");t._extractFromOriginalSiteOneGroup(o,e,g,"links");});Object.keys(a).forEach(function(g){if(O[g]){t._checkRenameGroup(g,a,O,b);t._checkGroupVisibility(g,a,O,b);}else{t._addGroupToPersonalizationDelta(p,b,g);}t._extractFromPersonalizedSiteOneGroup(p,e,g,"tiles");t._extractFromPersonalizedSiteOneGroup(p,e,g,"links");});this._checkMoveGroup(p,o,b);this._checkTileSettings(p,b);this._cleanupRemovedGroups(o,b);if(e.oPersonalizationDelta.movedTiles&&i(e.oPersonalizationDelta.movedTiles)){delete(e.oPersonalizationDelta.movedTiles);}if(e.oPersonalizationDelta.movedLinks&&i(e.oPersonalizationDelta.movedLinks)){delete(e.oPersonalizationDelta.movedLinks);}}return d.resolve(b).promise();};
P.prototype._checkRemoveGroup=function(p,o,O){var s=false;if(p&&p.groups&&o&&O){if(!p.groups[O]){o.removedGroups=o.removedGroups||[];o.groupOrder=o.groupOrder||[];if(o.removedGroups.indexOf(O)===-1){o.removedGroups.push(O);}if(p.site&&p.site.payload&&p.site.payload.groupsOrder&&Array.isArray(p.site.payload.groupsOrder)){o.groupOrder=p.site.payload.groupsOrder.slice(0);}}s=true;}return s;};
P.prototype._applyRemoveGroup=function(o,g){var O,G,a;if(o&&o.groups&&o.site&&o.site.payload&&o.site.payload.groupsOrder&&g){O=o.groups;G=o.site.payload.groupsOrder;a=G.indexOf(g);if(!(a===-1)){G.splice(a,1);delete(O[g]);return true;}}return false;};
P.prototype._checkMoveGroup=function(p,o,a){var b,O,c=false,s=false;if(p.site&&p.site.payload&&Array.isArray(p.site.payload.groupsOrder)&&o.site&&o.site.payload&&Array.isArray(o.site.payload.groupsOrder)){b=p.site.payload.groupsOrder;O=o.site.payload.groupsOrder;if(b.length===O.length){c=(function(){var S=false,I;for(I=0;I<O.length;I++){if(O[I]!==b[I]){S=true;break;}}return S;})();if(c){a.groupOrder=b;s=true;}}}return s;};
P.prototype._applyMoveGroup=function(o,p){var s=false;if(Array.isArray(p.groupOrder)){o.site=o.site||{};o.site.payload=o.site.payload||{};if(!Array.isArray(o.site.payload.groupsOrder)){o.site.payload.groupsOrder=[];}if(o.site.payload.groupsOrder.length===p.groupOrder.length){o.site.payload.groupsOrder=p.groupOrder;s=true;}}return s;};
P.prototype._getHashedItemsFromSite=function(s){var r=null;if(s&&s.groups){if(Object.keys(s.groups).length>0){r={};Object.keys(s.groups).forEach(function(g){var G=s.groups[g],a;r[g]={};if(G.payload){["tiles","links"].forEach(function(t){r[g][t]={};if(Array.isArray(G.payload[t])){a=G.payload[t];a.forEach(function(I,b){var c;if(I.id){c=I.id;r[g][t][c]={iIndex:b,sItemId:I};}});}});}});}}return r;};
P.prototype._getExtractHelperObject=function(o,p,a){var r=null;r={};r.oHashedItemsOriginal=this._getHashedItemsFromSite(o)||{};r.oHashedItemsPersonalized=this._getHashedItemsFromSite(p);r.oPersonalizationDelta=a;return r;};
P.prototype._extractFromOriginalSiteOneGroup=function(o,e,g,I){var s=false,O,m,M,p="movedTiles";I=I||"tiles";if(I!=="tiles"){p="movedLinks";}M=function(a,f){m[a]=m[a]?m[a]:{};m[a].fromGroup=f;m[a].toGroup=null;};if(e&&e.oHashedItemsPersonalized&&e.oPersonalizationDelta&&o&&o.groups&&o.groups[g]&&o.groups[g].payload&&Array.isArray(o.groups[g].payload[I])){O=o.groups[g].payload[I];e.oPersonalizationDelta[p]=e.oPersonalizationDelta[p]?e.oPersonalizationDelta[p]:{};m=e.oPersonalizationDelta[p];if(e.oHashedItemsPersonalized[g]){O.forEach(function(a){if(!e.oHashedItemsPersonalized[g][I][a.id]){M(a.id,g);}});s=true;}else{O.forEach(function(a){M(a.id,g);});s=true;}}return s;};
P.prototype._handleItemChangeExtract=function(e,g,I){return false;};
P.prototype._extractFromPersonalizedSiteOneGroup=function(p,e,g,I){var s=false,m,t,T=false,a,b=this,c="movedTiles";I=I||"tiles";if((I!=="tiles")&&(I!=="links")){return s;}if(I!=="tiles"){c="movedLinks";}if(e&&e.oPersonalizationDelta&&p&&p.groups&&p.groups[g]&&p.groups[g].payload&&Array.isArray(p.groups[g].payload[I])){a=p.groups[g].payload[I];e.oPersonalizationDelta[c]=e.oPersonalizationDelta[c]?e.oPersonalizationDelta[c]:{};m=e.oPersonalizationDelta[c];t=[];a.forEach(function(o,d){t.push(o.id);if(e.oHashedItemsOriginal[g]&&e.oHashedItemsOriginal[g][I][o.id]){if(m[o.id]){L.error("Extract personalization failed","The Tile ID "+o.id+" is not unique in the site","PersonalizationProcessor");delete(m[o.id]);}if(e.oHashedItemsOriginal[g][I][o.id].iIndex!==d){T=true;}b._handleItemChangeExtract(e,g,I);}else{T=true;if(m[o.id]){if(m[o.id].fromGroup&&(m[o.id].fromGroup!==g)){if(!m[o.id].toGroup){m[o.id].toGroup=g;b._handleItemChangeExtract(e,g,I);}}}else{m[o.id]={};m[o.id].fromGroup=null;m[o.id].toGroup=g;m[o.id].item=o;}}});if(T){e.oPersonalizationDelta.groups=e.oPersonalizationDelta.groups||{};e.oPersonalizationDelta.groups[g]=e.oPersonalizationDelta.groups[g]||{};e.oPersonalizationDelta.groups[g].payload=e.oPersonalizationDelta.groups[g].payload||{};if(I==="tiles"){e.oPersonalizationDelta.groups[g].payload.tileOrder=t;}else{e.oPersonalizationDelta.groups[g].payload.linkOrder=t;}}s=true;}return s;};
P.prototype._cleanupRemovedGroups=function(o,p){var I,m;if(p.removedGroups&&p&&Array.isArray(p.removedGroups)&&(p.removedGroups.length>0)){p.removedGroups.forEach(function(g){if(o&&o.groups&&o.groups[g]&&o.groups[g].payload){[{sType:"tiles",sPersonalizationDeltaType:"movedTiles"},{sType:"links",sPersonalizationDeltaType:"movedLinks"}].forEach(function(t){if(Array.isArray(o.groups[g].payload[t.sType])){I=o.groups[g].payload[t.sType];I.forEach(function(a){if(p[t.sPersonalizationDeltaType]){m=p[t.sPersonalizationDeltaType][a.id];if(m&&m.fromGroup&&(m.fromGroup===g)&&!m.toGroup){delete(p[t.sPersonalizationDeltaType][a.id]);}}});}});}});}};
P.prototype._setItemOrderOnSiteCollection=function(o,I){var s=true,S=o.length,a,b={},c,C,d,f;if(!Array.isArray(o)||!Array.isArray(o)||(o.length!==I.length)){return false;}a=o.splice(0,o.length);for(c=0;c<I.length;c++){d=I[c];C=a.shift();if(C&&d===C.id){o.push(C);}else if(b[d]){o.push(b[d]);delete(b[d]);if(C){b[C.id]=C;}}else if(C){b[C.id]=C;f=false;while(a.length>0){C=a.shift();if(d===C.id){o.push(C);f=true;break;}else{b[C.id]=C;}}if(!f){s=false;}}}if(o.length!==S){s=false;}return s;};
P.prototype._setItemOrderOnSiteGroupForItemType=function(o,d,I){var s=true,t,a;if((I==="tiles")||(I==="links")){a=(I==="tiles")?"tileOrder":"linkOrder";}else{return false;}if(d.payload&&Array.isArray(d.payload[a])&&(d.payload[a].length>0)){if(o.payload&&Array.isArray(o.payload[I])&&(o.payload[I].length>0)){t=this._setItemOrderOnSiteCollection(o.payload[I],d.payload[a]);if(!t){s=false;}}else{s=false;}}return s;};
P.prototype._setItemOrderOnSite=function(o,p){var s=true,t,a=this;if(o.groups&&p.groups){Object.keys(p.groups).forEach(function(g){if(p.groups[g]&&o.groups[g]){t=a._setItemOrderOnSiteGroupForItemType(o.groups[g],p.groups[g],"tiles");if(!t){s=false;}t=a._setItemOrderOnSiteGroupForItemType(o.groups[g],p.groups[g],"links");if(!t){s=false;}}});}return s;};
P.prototype._applyMoveItemsWithoutOrder=function(o,p,I){var s=true,t,T,a="tileOrder",d,b,c,O=[],e=this;function f(C,g){var s=true;if(o.groups[g]&&o.groups[g].payload&&p.groups&&p.groups[g]&&p.groups[g].payload&&Array.isArray(p.groups[g].payload[a])&&(p.groups[g].payload[a].length>0)){if(!Array.isArray(o.groups[g].payload[I])){o.groups[g].payload[I]=[];}o.groups[g].payload[I].push(C);}else{s=false;}return s;}if((I==="tiles")||(I==="links")){T=(I==="tiles")?"movedTiles":"movedLinks";a=(I==="tiles")?"tileOrder":"linkOrder";}else{return false;}if(!o||!o.groups||!o.site||!o.site.payload||!Array.isArray(o.site.payload.groupsOrder)||!p){return false;}if(p[T]){Object.keys(p[T]).forEach(function(g){d=p[T][g];if(d.fromGroup){if(d.toGroup){if(d.fromGroup!==d.toGroup){if(o.groups[d.fromGroup]&&o.groups[d.fromGroup].payload&&Array.isArray(o.groups[d.fromGroup].payload[I])){O=o.groups[d.fromGroup].payload[I];b=e._getItemIndex(O,g);if(b>=0){c=O.splice(b,1);t=f(c[0],d.toGroup);if(!t){s=false;}}else{s=false;}}else{s=false;}}else{s=false;}}else if(o.groups[d.fromGroup]&&o.groups[d.fromGroup].payload&&Array.isArray(o.groups[d.fromGroup].payload[I])){O=o.groups[d.fromGroup].payload[I];b=e._getItemIndex(O,g);if(b>=0){O.splice(b,1);}else{s=false;}}else{s=false;}}else if(d.toGroup){if(d.item&&!i(d.item)){t=f(d.item,d.toGroup);if(!t){s=false;}}else{s=false;}}else{s=false;}});}return s;};
P.prototype._applyItemChanges=function(o,p){var s=true,S;S=this._applyMoveItemsWithoutOrder(o,p,"tiles");if(!S){s=false;}S=this._applyMoveItemsWithoutOrder(o,p,"links");if(!S){s=false;}if(p.groups){S=this._setItemOrderOnSite(o,p);if(!S){s=false;}}return s;};
return P;});
sap.ui.predefine('sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig',["sap/ushell/Config","sap/ushell/System","sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig"],function(C,S,F){"use strict";var a={};var c=[{contentProviderName:"featured",adapter:"sap.ushell.adapters.cdm.v3.StaticGroupsAdapter",configSwitch:"/core/home/featuredGroup/enable",system:{alias:"",platform:"cdm"},configHandler:function(){var r=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/model/currentState/showRecentActivity"),e=r&&C.last("/core/home/featuredGroup/frequentCard"),E=r&&C.last("/core/home/featuredGroup/recentCard");return F.getMockAdapterConfig(e,E);}}];
a._getConfigAdapters=function(){c.forEach(function(o){o.system=new S(o.system);});return c;};
return a;});
sap.ui.predefine('sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig',["sap/ushell/resources"],function(r){"use strict";var f={},g=r.i18n.getText("featuredGroup.title"),R=r.i18n.getText("recentActivities"),F=r.i18n.getText("frequentActivities"),t=r.i18n.getText("top",3),o={"_version":"3.0.0","site":{"identification":{"version":"3.0","id":"c9dcc1f3-dec0-4db4-91d3-639bf38d91ce","title":"Featured Group","description":"Sample site for featured group cards"},"payload":{"groupsOrder":["FeaturedGroupCards"]}},"catalogs":{},"vizTypes":{"sap.ushell.Card":{"sap.app":{"id":"sap.ushell.Card","type":"card","applicationVersion":{"version":"1.0.0"}},"sap.ui":{"deviceTypes":{"desktop":true,"tablet":true,"phone":true}}}},"visualizations":{"FrequentCard":{"vizType":"sap.ushell.Card","businessApp":"fin.cash.bankmaster.manage.BusinessApp","target":{"appId":"fin.cash.bankmaster.manage","inboundId":"Bank-manage","parameters":{}},"vizConfig":{"sap.flp":{"columns":"4","rows":"3"},"sap.app":{"id":"FrequentCard","type":"card"},"sap.ui5":{"services":{"CardNavigationService":{"factoryName":"sap.ushell.ui5service.CardNavigation"},"CardUserFrequentsService":{"factoryName":"sap.ushell.ui5service.CardUserFrequents"}}},"sap.card":{"type":"List","header":{"title":F,"status":{"text":t},"actions":[{"type":"Navigation","service":"CardNavigationService","parameters":{"openUI":"FrequentActivities"}}]},"content":{"maxItems":3,"data":{"service":{"name":"CardUserFrequentsService"}},"item":{"title":{"value":"{Name}"},"description":{"value":"{Description}"},"highlight":"{Highlight}","icon":{"src":"{Icon}","label":"icon"},"actions":[{"type":"Navigation","service":"CardNavigationService","parameters":{"title":"{Name}","url":"{Url}","intentSemanticObject":"{Intent/SemanticObject}","intentAction":"{Intent/Action}","intentAppRoute":"{Intent/AppSpecificRoute}","intentParameters":"{Intent/Parameters}"}}]}}}}},"RecentCard":{"vizType":"sap.ushell.Card","businessApp":"fin.cash.bankmaster.manage.BusinessApp","target":{"appId":"fin.cash.bankmaster.manage","inboundId":"Bank-manage","parameters":{}},"vizConfig":{"sap.flp":{"columns":"4","rows":"3"},"sap.app":{"id":"RecentCard","type":"card"},"sap.ui5":{"services":{"CardNavigationService":{"factoryName":"sap.ushell.ui5service.CardNavigation"},"CardUserRecentsService":{"factoryName":"sap.ushell.ui5service.CardUserRecents"}}},"sap.card":{"type":"List","header":{"title":R,"status":{"text":t},"actions":[{"type":"Navigation","service":"CardNavigationService","parameters":{"openUI":"RecentActivities"}}]},"content":{"maxItems":3,"data":{"service":{"name":"CardUserRecentsService"}},"item":{"title":{"label":"{{title_label}}","value":"{Name}"},"description":{"label":"{{description_label}}","value":"{Description}"},"icon":{"src":"{Icon}","label":"icon"},"highlight":"{Highlight}","actions":[{"type":"Navigation","service":"CardNavigationService","parameters":{"title":"{Name}","url":"{Url}","intentSemanticObject":"{Intent/SemanticObject}","intentAction":"{Intent/Action}","intentAppRoute":"{Intent/AppSpecificRoute}","intentParameters":"{Intent/Parameters}"}}]}}}}}},"applications":{},"groups":{"FeaturedGroupCards":{"identification":{"id":"FeaturedGroupCards","title":g},"contentProvider":"featured","isFeatured":true,"payload":{"locked":true,"tiles":[{"id":"frequentCard","vizId":"FrequentCard","contentProvider":"featured"},{"id":"recentCard","vizId":"RecentCard","contentProvider":"featured"}],"links":[],"groups":[]}}},"systemAliases":{}};
f.getMockAdapterConfig=function(e,E){var T=o.groups.FeaturedGroupCards.payload.tiles,v=o.visualizations;for(var i=0;i<T.length;i++){var a=T[i],s=!e&&a.vizId==="FrequentCard",S=!E&&a.vizId==="RecentCard";if(s||S){delete v[a.vizId];T.splice(i,1);i--;}}return o;};
return f;},true);
sap.ui.predefine('sap/ushell/services/_CrossApplicationNavigation/utils',["sap/base/util/ObjectPath"],function(O){"use strict";var U={};
U.extractGetLinksParameterOptions=function(g){return U.parseGetLinksParameters(g).filter(function(p){return Object.keys(p.options).length>0;}).map(function(p){return{name:p.name,options:p.options};});};
U.extractGetLinksParameterDefinition=function(g){return U.parseGetLinksParameters(g).reduce(function(r,p){r[p.name]=p.value;return r;},{});};
U.parseGetLinksParameters=function(g){if(Object.prototype.toString.apply(g)!=="[object Object]"){return[];}var p=JSON.parse(JSON.stringify(g));return Object.keys(p).map(function(P){var v=p[P];var o={};if(Object.prototype.toString.apply(v)==="[object Object]"){v=v.value;delete p[P].value;o=p[P];}return{name:P,value:v,options:o};});};
U.safeParseToObject=function(o){try{return JSON.parse(o);}catch(e){jQuery.sap.log.error("Cannot parse the given string to object",o,"sap.ushell.services.CrossApplicationNavigation");}return null;};
U.createAppStateFromData=function(d){var a=sap.ushell.Container.getService("AppState");var A=a.createEmptyAppState(null);A.setData(d);A.save();return A.getKey();};
U.extractParameter=function(i,p){var I,P=null,u;if(typeof i==="string"){if(i.indexOf(p+"=")===-1){return{intent:i,data:null};}u=sap.ushell.Container.getService("URLParsing");var o=u.parseShellHash(i);if(!o){return{intent:i,data:null};}P=o.params[p];delete o.params[p];I=u.constructShellHash(o);return{intent:I,data:P};}if(Object.prototype.toString.apply(i)==="[object Object]"){var s=O.get("target.shellHash",i);if(typeof s==="string"){var r=U.extractParameter(s,p);i.target.shellHash=r.intent;return{intent:i,data:r.data};}var a=i.params;if(a&&a[p]){P=typeof a[p]==="string"?[a[p]]:a[p];delete a[p];}return{intent:i,data:P};}jQuery.sap.log.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:i};};
U.addXAppStateFromParameter=function(i,s){var I,x,a,X,A;x=U.extractParameter(i,s);I=x.intent;X=x.data&&x.data[0];if(!X){return;}a=U.safeParseToObject(X);if(!a){return;}A=U.createAppStateFromData(a);U.injectParameter(I,"sap-xapp-state",A);};
U.injectParameter=function(i,p,P){if(typeof i==="string"){var u=sap.ushell.Container.getService("URLParsing");var o=u.parseShellHash(i);o.params[p]=P;return u.constructShellHash(o);}if(Object.prototype.toString.apply(i)==="[object Object]"){var s=O.get("target.shellHash",i);if(typeof s==="string"){i.target.shellHash=U.injectParameter(s,p,P);return i;}if(!i.params){i.params={};}i.params[p]=P;}return i;};
U._injectParameters=function(p){var P=p.inject,t=p.type,a=p.args;if(t.isPlainObject(a)){if(a.target&&a.target.shellHash){if(typeof a.target.shellHash==="string"){a.target.shellHash=U._injectParameters({inject:P,type:p.type,args:a.target.shellHash});}return a;}var n=Object.keys(P).reduce(function(i,b){var v=P[b];if(v&&typeof i==="string"){var r=new RegExp("[&]"+b);var h=!r.test(i);if(h){var S=i?"&":"";i+=S+b+"="+v;}}else if(v&&!i.hasOwnProperty(b)){i[b]=v;}return i;},a.params||{});if(n&&Object.keys(n).length>0){a.params=n;}return a;}var s=a;if(s){Object.keys(P).forEach(function(b){var v=P[b];var r=new RegExp("[?&]"+b);var h=!r.test(s);if(v&&h){var S=s.indexOf("?")>-1?"&":"?";s+=S+b+"="+v;}});}return s;};
U._injectStickyParameters=function(p){var a=sap.ushell.Container.getService("AppLifeCycle");if(!a||Object.keys(a).length<=0){return p.args;}var c=a.getCurrentApplication();if(!c||Object.keys(c).length<=0){return p.args;}var A=p.appLifeCycle;var t=p.technicalParameters;var s=t.getParameters({sticky:true}).reduce(function(S,n){var N=n.name;var C=c.componentInstance;var b=c.applicationType;var d;if(b==="UI5"){d={};}else{d=A.getCurrentApplication().container;}var e=t.getParameterValueSync(N,C,d,b);var f=n.stickyName||N;S[f]=e;return S;},{});var o={type:p.type,inject:s,args:p.args};return U._injectParameters(o);};
return U;});
sap.ui.predefine('sap/ushell/services/_PageReferencing/AppForInbound',["sap/base/util/ObjectPath","sap/base/Log"],function(O,L){"use strict";var A={};
A.get=function(i,a){var o={};switch(a.resolutionResult.applicationType){case"SAPUI5":o=this._getUI5App(i,a);break;case"TR":o=this._getTRApp(i,a);break;case"WDA":o=this._getWDAApp(i,a);break;case"URL":o=this._getURLApp(i,a);break;case"WCF":o=this._getWCFApp(i,a);break;default:L.error("Unable to get CDM app for inbound: Application type '"+a.resolutionResult.applicationType+"' of app '"+i+"' is unknown and not supported.");throw new Error("Unknown application type: "+a.applicationType);}if(a.resolutionResult.systemAlias){O.set(["sap.app","destination"],{name:a.resolutionResult.systemAlias,semantics:"applied"},o);}return o;};
A._getURLApp=function(i,a){return{"sap.app":{"id":i,"crossNavigation":{"inbounds":{"Shell-launchURL":{"semanticObject":"Shell","action":"launchURL","signature":{"parameters":{"sap-external-url":{"required":true,"filter":{"value":a.resolutionResult.url,"format":"plain"}}}}}}}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};
A._getUI5App=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui5":{"componentName":a.resolutionResult.ui5ComponentName},"sap.ui":{"technology":"UI5","deviceTypes":a.deviceTypes},"sap.platform.runtime":{"componentProperties":{"url":a.resolutionResult.url}}};};
A._getApplicationInbound=function(i){var a={};a[i.id]={"semanticObject":i.semanticObject,"action":i.action,"signature":i.signature};return a;};
A._getTRApp=function(i,a){var t,T=a.resolutionResult.url.match(/transaction=(.+?)[&?]/);if(T){t=T[1];}else{L.error("Unable to determine ABAP transaction from inbound URL of app '"+i+"': "+a.resolutionResult.url+".");}return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"GUI","deviceTypes":a.deviceTypes},"sap.flp":{"type":"application"},"sap.gui":{"transaction":t}};};
A._getWDAApp=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};
A._getWCFApp=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};
return A;});
sap.ui.predefine('sap/ushell/services/_PageReferencing/PageDereferencer',["sap/ushell/utils/clone","sap/base/util/ObjectPath","sap/ushell/services/_PageReferencing/AppForInbound","sap/base/Log"],function(c,O,A,L){"use strict";var P={};P._VISUALIZATION_TYPES={STATIC_TILE:"sap.ushell.StaticAppLauncher",DYNAMIC_TILE:"sap.ushell.DynamicAppLauncher",PLATFORM_VISUALIZATION:"sap.ushell.PlatformVisualization"};
P.dereference=function(p,v,n){var s={};var N={};var I=n.inbounds;for(var i=0;i<I.length;i++){var a=I[i].permanentKey||I[i].id;N[a]=I[i];}s._version="3.0.0";s.site=this._getSiteInfo(p);s.catalogs={};s.groups=this._getGroups(p);s.visualizations=this._getVisualizations(p,v,N);s.applications=this._getApplications(N);s.vizTypes=this._getVizTypes();s.systemAliases=c(n.systemAliases);return s;};
P._getSiteInfo=function(p){var g=[];var a=p.sections;if(a){g=a.map(function(b){return b.id;});}var s={identification:{id:p.id,title:p.title,description:p.description},payload:{groupsOrder:g}};return s;};
P._getGroups=function(p){var g={};var a=p.sections||[];for(var i=0;i<a.length;i++){g[a[i].id]={identification:{id:a[i].id,title:a[i].title,locked:true,isPreset:true},payload:{tiles:[],links:[]}};for(var y=0;y<a[i].visualizations.length;y++){g[a[i].id].payload.tiles.push({id:a[i].visualizations[y].id,vizId:a[i].visualizations[y].vizId});}}return g;};
P._getVisualizations=function(p,v,n){var V={};var a=p.sections.map(function(s){return s.visualizations;});var f=Array.prototype.concat.apply([],a);for(var i=0;i<f.length;i++){V[f[i].vizId]=this._getVisualization(f[i],v,n);}return V;};
P._getVisualization=function(p,v,n){var V=v[p.vizId],s;if(!V){return;}if(V.isCustomTile){s=this._VISUALIZATION_TYPES.PLATFORM_VISUALIZATION;}else if(V.indicatorDataSource){s=this._VISUALIZATION_TYPES.DYNAMIC_TILE;}else{s=this._VISUALIZATION_TYPES.STATIC_TILE;}var o={vizType:s,vizConfig:{"sap.app":{title:V.title,subTitle:V.subTitle,info:V.info},"sap.ui":{icons:{icon:V.icon}},"sap.flp":{tileSize:V.size,indicatorDataSource:V.indicatorDataSource}}};if(V.url&&!p.inboundPermanentKey){o.vizConfig["sap.flp"].target={type:"URL","url":V.url};}else{o.vizConfig["sap.flp"].target={type:"IBN",appId:p.inboundPermanentKey,inboundId:n[p.inboundPermanentKey]&&n[p.inboundPermanentKey].id};}return o;};
P._getApplications=function(n){return Object.keys(n).reduce(function(a,b){var i=n[b],I=i.permanentKey||i.id;try{a[I]=A.get(b,i);}catch(e){L.error("Unable to dereference app '"+b+"' of CDM page.");a[b]={};}return a;},{});};
P._getVizTypes=function(){var v={};v[this._VISUALIZATION_TYPES.PLATFORM_VISUALIZATION]={"sap.app":{"id":this._VISUALIZATION_TYPES.PLATFORM_VISUALIZATION,"type":"platformVisualization"}};return v;};
return P;});
sap.ui.predefine('sap/ushell/services/_PageReferencing/PageReferencer',["sap/ui/thirdparty/jquery","sap/ushell/utils/clone"],function(q,c){"use strict";var P={};
function g(p,N){var r={};p.forEach(function(s){s.tiles.forEach(function(t){var T=t.target;if(T&&!r[T]){r[T]=N.resolveHashFragment(T);}});});return new Promise(function(R,f){var b=[];Object.keys(r).forEach(function(h){b.push(r[h]);});q.when.apply(null,b).then(function(){var d=arguments;Object.keys(r).forEach(function(h,i){r[h]=d[i].inboundPermanentKey;});R(r);},f);});}
function _(p,t){return{inboundPermanentKey:p[t.target],vizId:t.tileCatalogId};}
function a(p,G){return{id:G.id,title:G.title,visualizations:G.tiles.map(_.bind(null,p))};}
P.createReferencePage=function(p,b){return sap.ushell.Container.getServiceAsync("NavTargetResolution").then(g.bind(null,b)).then(function(o){var r=c(p);r.content.sections=b.map(a.bind(null,o));return Promise.resolve(r);});};
return P;});
sap.ui.predefine('sap/ushell/services/_Personalization/ContextContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ui/core/format/DateFormat","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery"],function(u,p,c,D,U,q){"use strict";
function C(){this._init.apply(this,arguments);}
C.prototype._init=function(s,a,b,S,o){this._oService=s;this._sContainerKey=b;this._oAdapterContainer={};this._oScope=S||p.adjustScope(S);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;var A;if(!(o instanceof U)&&o!==undefined){throw new Error("oComponent passed must be a UI5 Component or must be undefined");}if(o&&o.getMetadata&&o.getMetadata().getComponentName){A=o.getMetadata().getComponentName();}this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._oAdapterContainer=a.getAdapterContainer(this._sContainerKey,this._oScope,A);return this;};
C.prototype.getValidity=function(){return this._oScope.validity;};
C.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new u.Map();};
C.prototype.load=function(){var d={},P,t=this;d=new q.Deferred();if(!this._sContainerKey){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this.clear();P=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,d);P.always(function(){t._oAdapterContainer.load().fail(function(){d.reject();}).done(function(){t._copyFromAdapter();if(t._isExpired()){t.clear();}d.resolve();});});return d.promise();};
C.prototype._copyFromAdapter=function(){var t=this,a;a=t._oAdapterContainer.getItemKeys().splice(0);a.forEach(function(i){t._oItemMap.put(i,JSON.stringify(t._oAdapterContainer.getItemValue(i)));});this._aLoadedItemKeys=t._oItemMap.keys().splice(0);};
C.prototype._isExpired=function(){var f,t,T;if(this.getValidity()===Infinity||this.getValidity()===0){return false;}t=this._getItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE);f=D.getDateInstance({pattern:c.S_ABAPTIMESTAMPFORMAT});T=f.format(this._getNow(),true);return t&&T>t;};
C.prototype._getNow=function(){return new Date();};
C.prototype._copyToAdapterUpdatingValidity=function(){var i=[],d=[],t=this,n,f,T,s;if(this._clear){i=this._oAdapterContainer.getItemKeys().splice(0);i.forEach(function(I){t._oAdapterContainer.delItem(I);});this._clear=false;}if(this.getValidity()===Infinity||this.getValidity()===0){this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_SCOPE);this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE);this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_STORAGE);}else{f=D.getDateInstance({pattern:c.S_ABAPTIMESTAMPFORMAT});n=this._getNow();s=f.format(n,true);T=f.format(new Date(n.getTime()+this.getValidity()*60000),true);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_SCOPE,this._oScope);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE,T);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_STORAGE,s);}i=this._oItemMap.keys();i.forEach(function(I){t._oAdapterContainer.setItemValue(I,p.cloneToObject(t._oItemMap.get(I)));});d=this._aLoadedItemKeys.filter(function(I){return!(i.indexOf(I)>-1);});d.forEach(function(I){t._oAdapterContainer.delItem(I);});};
C.prototype.save=function(){var s,P,t=this;this._copyToAdapterUpdatingValidity();s=new q.Deferred();P=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);P.always(function(){try{t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});return s.promise();};
C.prototype.saveDeferred=function(n){var s,P,t=this;this._copyToAdapterUpdatingValidity();s=new q.Deferred();P=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);function d(){P.always(function(){try{t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});}s._sapFnSave=d;s._sapTimeoutId=setTimeout(d,n);return s.promise();};
C.prototype.flush=function(){var s,P;this._copyToAdapterUpdatingValidity();s=new q.Deferred();P=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,s);P.fail(function(){s.reject();}).done(function(){s.resolve();});return s.promise();};
C.prototype.getItemKeys=function(){var f=this._oItemMap.keys().filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)===0;});return f.map(function(e){return e.replace(c.S_ITEM_PREFIX,"","");});};
C.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0);};
C.prototype.getItemValue=function(i){return this._getItemValueInternal(c.S_ITEM_PREFIX,i);};
C.prototype._getItemValueInternal=function(P,i){if(typeof i!=="string"||typeof P!=="string"){return undefined;}return p.cloneToObject(this._oItemMap.get(P+i));};
C.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(c.S_ITEM_PREFIX+i);};
C.prototype.setItemValue=function(i,I){this._setItemValueInternal(c.S_ITEM_PREFIX,i,I);};
C.prototype._setItemValueInternal=function(i,I,o){if(typeof I!=="string"||typeof i!=="string"){throw new u.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization"," ");}if(I.length>40){q.sap.log.error("Personalization Service item key/variant set name (\""+I+"\") should be less than 40 characters [current :"+I.length+"]");}this._oItemMap.put(i+I,JSON.stringify(o));};
C.prototype.delItem=function(i){this._delItemInternal(c.S_ITEM_PREFIX,i);};
C.prototype._delItemInternal=function(P,i){if(typeof i!=="string"){return undefined;}if(typeof P!=="string"){return undefined;}this._oItemMap.remove(P+i);};
C.prototype.getKey=function(){return this._sContainerKey.substring(c.S_CONTAINER_PREFIX.length);};
C.prototype.getUnmodifiableContainer=function(){var t=this;if(!this._oUnmodifiableContainer){this._oUnmodifiableContainer=(function(){var o={};["clear","delItem","flush","load","save","saveDeferred","setItemValue"].forEach(function(f){o[f]=function(n){throw new u.Error("Function "+n+" can't be called on unmodifiable container","ContextContainer"," ");}.bind(undefined,f);});["containsItem","getItemKeys","getItemValue","getUnmodifiableContainer","getValidity"].forEach(function(f){if(t[f]){o[f]=t[f].bind(t);}});return o;}());}return this._oUnmodifiableContainer;};
return C;});
sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariantSet","sap/ui/thirdparty/jquery"],function(u,p,c,P,q){"use strict";
function a(A,C){this._sContainerKey=C;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var d={},t=this;this._init();d=new q.Deferred();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._oAdapterContainer=A.getAdapterContainer(this._sContainerKey);this.load().fail(function(){d.reject();}).done(function(){d.resolve(t);});return d.promise();}
a.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new u.Map();this._oItemMap=new u.Map();};
a.prototype.load=function(){var d={},i=[],v=[],I=[],m=[],t=this;function b(I){var n=[],e=[];n=I.filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)!==0;});if(n.length===0){return I;}e=I.filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)===0;});n.forEach(function(s){var o={},f="";f=c.S_ITEM_PREFIX+s;o=p.clone(t._oAdapterContainer.getItemValue(s));t._oAdapterContainer.setItemValue(f,o);t._oAdapterContainer.delItem(s);if(e&&Array.prototype.indexOf.call(e,f)===-1){e.push(f);}});return e;}d=new q.Deferred();if(!this._sContainerKey){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._init();this._oAdapterContainer.load().fail(function(){d.reject();}).done(function(){i=t._oAdapterContainer.getItemKeys().splice(0);v=i.filter(function(s){return s.indexOf(c.S_VARIANT_PREFIX)===0;});v.forEach(function(V){var o={};o=new P(V,t._oAdapterContainer);t._oVariantSetMap.put(V,o);});I=i.filter(function(s){return s.indexOf(c.S_VARIANT_PREFIX)!==0;});m=b(I);m.forEach(function(s){t._oItemMap.put(s,p.clone(t._oAdapterContainer.getItemValue(s)));});t._aLoadedVariantSetKeys=t._oVariantSetMap.keys().splice(0);t._aLoadedItemKeys=t._oItemMap.keys().splice(0);d.resolve();});return d.promise();};
a.prototype.save=function(){var s,i;this._serializeVariantSets();this._serializeItems();s=new q.Deferred();function S(){s.resolve();}function f(){s.reject();}try{i=this._oAdapterContainer.save();i.fail(f);i.done(S);}catch(e){s.reject();}return s.promise();};
a.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(e){return e.replace(c.S_ITEM_PREFIX,"","");});};
a.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(c.S_ITEM_PREFIX+i);};
a.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(c.S_ITEM_PREFIX+i);};
a.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}this._oItemMap.put(c.S_ITEM_PREFIX+i,I);};
a.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}if(this.containsItem(i)){this._oItemMap.remove(c.S_ITEM_PREFIX+i);}};
a.prototype._serializeItems=function(){var i=[],d=[],t=this;i=this._oItemMap.keys();i.forEach(function(I){t._oAdapterContainer.setItemValue(I,p.clone(t._oItemMap.get(I)));});d=this._aLoadedItemKeys.filter(function(I){return!(i.indexOf(I)>-1);});d.forEach(function(I){t._oAdapterContainer.delItem(I);});};
a.prototype.getVariantSetKeys=function(){var v=[],b=[];b=this._oVariantSetMap.keys();v=b.map(function(e){return e.replace(c.S_VARIANT_PREFIX,"","");});return v;};
a.prototype.containsVariantSet=function(v){return this._oVariantSetMap.containsKey(c.S_VARIANT_PREFIX+v);};
a.prototype.getVariantSet=function(v){var s,V={};s=c.S_VARIANT_PREFIX+v;V=this._oVariantSetMap.get(s);return V;};
a.prototype.addVariantSet=function(v){var e={},V={},s="";if(this.containsVariantSet(v)){throw new u.Error("Container already contains a variant set with key '"+v+"': sap.ushell.services.Personalization"," ");}s=c.S_VARIANT_PREFIX+v;e={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(s,e);V=new P(s,this._oAdapterContainer);this._oVariantSetMap.put(s,V);return V;};
a.prototype._serializeVariantSets=function(){var v=[],d=[],t=this;v=this._oVariantSetMap.keys();v.forEach(function(V){var o={},b={};o=t._oVariantSetMap.get(V);b=o._serialize();t._oAdapterContainer.setItemValue(V,p.clone(b));});d=this._aLoadedVariantSetKeys.filter(function(V){return!(v.indexOf(V)>-1);});d.forEach(function(V){t._oAdapterContainer.delItem(V);});};
a.prototype.delVariantSet=function(v){var s="";s=c.S_VARIANT_PREFIX+v;this._oVariantSetMap.remove(s);return this._oAdapterContainer.delItem(s);};
return a;});
sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainerVariant',["sap/ushell/utils"],function(u){"use strict";
function P(v,V,o){if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ");}if(typeof V!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(o&&typeof o!=="object"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}this._oVariantKey=v;this._oVariantName=V;this._oItemMap=new u.Map();this._oItemMap.entries=o||{};}
;
P.prototype.getVariantKey=function(){return this._oVariantKey;};
P.prototype.getVariantName=function(){return this._oVariantName;};
P.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(i);};
P.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}return this._oItemMap.put(i,I);};
P.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(i);};
P.prototype.getItemKeys=function(){return this._oItemMap.keys();};
P.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.remove(i);};
P.prototype._serialize=function(){var i=[],v={},I={},t=this;v.name=this.getVariantName();i=this._oItemMap.keys();i.forEach(function(s){I[s]=t.getItemValue(s);});v.variantData=I;return v;};
return P;});
sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainerVariantSet',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/PersonalizationContainerVariant"],function(u,p,P){"use strict";
function c(v,a){var V,s,b,o,d;this._sVariantSetKey=v;this._oAdapterContainer=a;this._oVariantNameMap=new u.Map();this._oVariantMap=new u.Map();V=p.clone(this._oAdapterContainer.getItemValue(v));if(V.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=V.currentVariant;}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}if(V.hasOwnProperty("variants")){for(s in V.variants){if(V.variants.hasOwnProperty(s)){b=V.variants[s].name;o=V.variants[s].variantData;if(this._oVariantNameMap.containsKey(b)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{this._oVariantNameMap.put(b,s);d=new P(s,b,o);this._oVariantMap.put(s,d);}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return this;}
;
c.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey;};
c.prototype.setCurrentVariantKey=function(v){this._sCurrentVariantKey=v;};
c.prototype.getVariantKeys=function(){return this._oVariantMap.keys();};
c.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries));};
c.prototype.getVariant=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantMap.get(v);};
c.prototype.getVariantKeyByName=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantNameMap.get(v);};
c.prototype.containsVariant=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantMap.containsKey(v);};
c.prototype.addVariant=function(v){var m=0,V="",o={};m=parseInt(this._oVariantMap.keys().sort(function(a,b){return a-b;}).reverse()[0],10);V=isNaN(m)?"0":(m+1).toString();if(this._oVariantMap.containsKey(V)){throw new u.Error("Variant key '"+V+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this._oVariantNameMap.containsKey(v)){throw new u.Error("Variant name '"+v+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(v)+"' New key: '"+V+"') ': sap.ushell.services.Personalization"," ");}o=new P(V,v);this._oVariantMap.put(V,o);this._oVariantNameMap.put(v,V);return o;};
c.prototype._serialize=function(){var v=[],V={},o={},t=this;V.currentVariant=this._sCurrentVariantKey;v=this.getVariantKeys();v.forEach(function(s){var a={};a=t._oVariantMap.get(s);o[s]=a._serialize();});V.variants=o;return V;};
c.prototype.delVariant=function(v){var V=this._oVariantMap.get(v);if(V){this._oVariantNameMap.remove(V.getVariantName());this._oVariantMap.remove(v);}};
return c;});
sap.ui.predefine('sap/ushell/services/_Personalization/Personalizer',["sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/Log"],function(u,q,L){"use strict";
function P(s,a,p,S,c){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=a;this._oService=s;this._oScope=S;this._oComponent=c;if(!p||!p.container||!p.item||typeof p.container!=="string"||typeof p.item!=="string"){throw new u.Error("Invalid input for oPersId: sap.ushell.services.Personalization"," ");}this._sPersContainer=p.container;this._sPersItem=p.item;}
P.prototype._getContainer=function(p){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(p,this._oScope,this._oComponent);}return this._oGetContainerPromise;};
P.prototype.getPersData=function(){var d={},t=this;d=new q.Deferred();this._getContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){d.resolve(c.getItemValue(t._sPersItem));});d.fail(function(){L.error("Fail to get Personalization data for Personalizer container: "+t._sPersContainer);});return d.promise();};
P.prototype.setPersData=function(v){var d={},t=this;d=new q.Deferred();this._getContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){c.setItemValue(t._sPersItem,v);c.save().fail(function(){d.reject();}).done(function(){d.resolve();});});d.fail(function(){L.error("Fail to set Personalization data for Personalizer container: "+t._sPersContainer);});return d.promise();};
P.prototype.delPersData=function(){var d={},t=this,m;d=new q.Deferred();this._oService.getPersonalizationContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){c.delItem(t._sPersItem);c.save().fail(function(){d.reject();}).done(function(){d.resolve();});});m=d.promise();m.fail(function(){L.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer);});return m;};
return P;});
sap.ui.predefine('sap/ushell/services/_Personalization/TransientPersonalizer',["sap/ui/thirdparty/jquery"],function(q){"use strict";
function T(){this._oValue=undefined;}
T.prototype.getPersData=function(){var d;d=new q.Deferred();d.resolve(this._oValue);return d.promise();};
T.prototype.setPersData=function(v){var d;d=new q.Deferred();this._oValue=v;d.resolve();return d.promise();};
T.prototype.delPersData=function(){var d;d=new q.Deferred();this._oValue=undefined;d.resolve();return d.promise();};
T.prototype.setValue=function(v){this._oValue=v;};
T.prototype.getValue=function(){return this._oValue;};
return T;});
sap.ui.predefine('sap/ushell/services/_Personalization/Variant',["sap/ushell/utils","sap/ushell/services/_Personalization/utils"],function(u,p){"use strict";
function V(v,s,a){if(typeof s!=="string"){throw new u.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ");}if(typeof a!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}this._oVariantSet=v;this._sVariantKey=s;this._sVariantName=a;}
;
V.prototype.getVariantKey=function(){return this._sVariantKey;};
V.prototype.getVariantName=function(){return this._sVariantName;};
V.prototype.setVariantName=function(v){var o=this._oVariantSet._getVariantSet(),a;if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this._oVariantSet.getVariantKeyByName(v)!==undefined){throw new u.Error("Variant with name '"+v+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,this._sVariantKey)){a=o.variants[this._sVariantKey];a.name=v;this._sVariantName=v;this._oVariantSet._serialize();}else{throw new u.Error("Variant does not longer exist"," ");}};
V.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}var v=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(v,i)&&p.clone(v[i]);};
V.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}var v,a=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!a){throw new u.Error("Variant does not longer exist"," ");}if(!a.variantData){a.variantData={};}v=a.variantData;v[i]=p.clone(I);this._oVariantSet._serialize();};
V.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}var v=this.oAccess.variantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(v,i);};
V.prototype.getItemKeys=function(){var v=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,i,I=[];for(i in v){if(Object.prototype.hasOwnProperty.call(v,i)){I.push(i);}}I.sort();return I;};
V.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}var v=this.oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete v[i];this.oVariantSet._serialize();};
return V;});
sap.ui.predefine('sap/ushell/services/_Personalization/VariantSet',["sap/ushell/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariant","sap/ushell/services/_Personalization/Variant"],function(u,c,P,V){"use strict";
function d(v,C){var s,a,o=new u.Map(),b=new u.Map(),e,f;this._oContextContainer=C;this._sVariantSetKey=v;this._oVariantSetData=this._oContextContainer._getItemValueInternal(c.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(s in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,s)){a=this._oVariantSetData.variants[s].name;e=this._oVariantSetData.variants[s].variantData;if(o.containsKey(a)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{o.put(a,s);f=new P(s,a,e);b.put(s,f);}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return this;}
d.prototype._getVariantSet=function(){return this._oVariantSetData;};
d.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(c.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData);};
d.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant;};
d.prototype.setCurrentVariantKey=function(v){this._getVariantSet().currentVariant=v;this._serialize();};
d.prototype.getVariantKeys=function(){var v=new u.Map(),o=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(o,"variants")){for(s in o.variants){if(Object.prototype.hasOwnProperty.call(o.variants,s)){v.put(s,"dummy");}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return v.keys();};
d.prototype.getVariantNamesAndKeys=function(){var v=new u.Map(),o=new u.Map(),a=this._getVariantSet(this._sVariantSetKey),s,b;if(Object.prototype.hasOwnProperty.call(a,"variants")){for(s in a.variants){if(Object.prototype.hasOwnProperty.call(a.variants,s)){b=a.variants[s].name;if(v.containsKey(b)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{v.put(b,s);}o.put(s,"dummy");}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return v.entries;};
d.prototype.getVariant=function(v){if(typeof v!=="string"){return undefined;}var o=this._getVariantSet(this._sVariantSetKey),s,a,b;if(Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,v)){s=o.variants[v].name;b=o.variants[v].variantData;a=new V(this,v,s,b);return a;}return undefined;};
d.prototype.getVariantKeyByName=function(v){if(typeof v!=="string"){return undefined;}var o=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(o,"variants")){for(s in o.variants){if(Object.prototype.hasOwnProperty.call(o.variants,s)){if(v===o.variants[s].name){return s;}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return undefined;};
d.prototype.containsVariant=function(v){var o=this._getVariantSet();if(typeof v!=="string"){return undefined;}return Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,v);};
d.prototype.addVariant=function(v){var k=[],m=0,s="",o={};k=this.getVariantKeys();m=parseInt(k.sort(function(a,b){return a-b;}).reverse()[0],10);s=isNaN(m)?"0":(m+1).toString();if(k.indexOf(s)>=0){throw new u.Error("Variant key '"+s+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this.getVariantKeyByName(v)!==undefined){throw new u.Error("Variant name '"+v+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(v)+"' New key: '"+s+"') ': sap.ushell.services.Personalization"," ");}o=new V(this,s,v);this._getVariantSet(this._sVariantSetKey).variants[s]={name:v,variantData:{}};this._serialize();return o;};
d.prototype.delVariant=function(v){var o;if(typeof v!=="string"){return undefined;}o=this._getVariantSet();if(o&&o.variants){delete this._oVariantSetData.variants[v];}this._serialize();};
return d;});
sap.ui.predefine('sap/ushell/services/_Personalization/VariantSetAdapter',["sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/VariantSet"],function(c,u,V){"use strict";
function a(C){this._oContextContainer=C;}
;
a.prototype.save=function(){return this._oContextContainer.save();};
a.prototype.getVariantSetKeys=function(){var p=this._oContextContainer._getInternalKeys(),v=[];v=p.map(function(e){return e.replace(c.S_VARIANT_PREFIX,"","");});return v;};
a.prototype.containsVariantSet=function(v){return this.getVariantSetKeys().indexOf(v)>=0;};
a.prototype.getVariantSet=function(v){var o=this._oContextContainer._getItemValueInternal(c.S_VARIANT_PREFIX,v);if(!o){return undefined;}return new V(v,this._oContextContainer);};
a.prototype.addVariantSet=function(v){var e={},o={};if(this.containsVariantSet(v)){throw new u.Error("Container already contains a variant set with key '"+v+"': sap.ushell.services.Personalization"," ");}e={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(c.S_VARIANT_PREFIX,v,e);o=new V(v,this._oContextContainer);return o;};
a.prototype.delVariantSet=function(v){this._oContextContainer._delItemInternal(c.S_VARIANT_PREFIX,v);};
return a;});
sap.ui.predefine('sap/ushell/services/_Personalization/WindowAdapter',["sap/ui/thirdparty/jquery"],function(q){"use strict";var W=function(p,b){this._oBackendAdapter=b;if(b){this.supportsGetWithoutSubsequentLoad=b.supportsGetWithoutSubsequentLoad;}};W.prototype.data={};
W.prototype.getAdapterContainer=function(c,s,a){var b=this._oBackendAdapter&&this._oBackendAdapter.getAdapterContainer(c,s,a);var d=sap.ui.requireSync("sap/ushell/services/_Personalization/WindowAdapterContainer");return new d(c,s,b);};
W.prototype.delAdapterContainer=function(c,s){var d=new q.Deferred();delete W.prototype.data[c];if(this._oBackendAdapter){this._oBackendAdapter.delAdapterContainer(c,s).done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}return d.promise();};
return W;});
sap.ui.predefine('sap/ushell/services/_Personalization/WindowAdapterContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/WindowAdapter","sap/ui/thirdparty/jquery"],function(u,p,W,q){"use strict";
function a(C,s,b){this._oBackendContainer=b;this._oItemMap=new u.Map();this._sContainerKey=C;}
function c(C){var i,k=C.getItemKeys();for(i=0;i<k.length;i=i+1){C.delItem(k[i]);}}
a.prototype.load=function(){var d=new q.Deferred(),i,k,t=this;if(W.prototype.data[this._sContainerKey]){this._oItemMap.entries=p.clone(W.prototype.data[this._sContainerKey]);if(this._oBackendContainer){c(this._oBackendContainer);k=this.getItemKeys();for(i=0;i<k.length;i=i+1){this._oBackendContainer.setItemValue(k[i],this._oItemMap.get(k[i]));}}d.resolve();}else if(this._oBackendContainer){this._oBackendContainer.load().done(function(){k=t._oBackendContainer.getItemKeys();for(i=0;i<k.length;i=i+1){t.setItemValue(k[i],t._oBackendContainer.getItemValue(k[i]));}W.prototype.data[t._sContainerKey]=p.clone(t._oItemMap.entries);d.resolve();}).fail(function(m){d.reject(m);});}else{W.prototype.data[this._sContainerKey]={};d.resolve();}return d.promise();};
a.prototype.save=function(){var d=new q.Deferred();W.prototype.data[this._sContainerKey]=p.clone(this._oItemMap.entries);if(this._oBackendContainer){this._oBackendContainer.save().done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}return d.promise();};
a.prototype.getItemKeys=function(){return this._oItemMap.keys();};
a.prototype.containsItem=function(i){this._oItemMap.containsKey(i);};
a.prototype.getItemValue=function(i){return this._oItemMap.get(i);};
a.prototype.setItemValue=function(i,I){this._oItemMap.put(i,I);if(this._oBackendContainer){this._oBackendContainer.setItemValue(i,I);}};
a.prototype.delItem=function(i){this._oItemMap.remove(i);if(this._oBackendContainer){this._oBackendContainer.delItem(i);}};
return a;});
sap.ui.predefine('sap/ushell/services/_Personalization/constants',[],function(){"use strict";return{keyCategory:{"FIXED_KEY":"FIXED_KEY","GENERATED_KEY":"GENERATED_KEY"},writeFrequency:{"HIGH":"HIGH","LOW":"LOW"}};});
sap.ui.predefine('sap/ushell/services/_Personalization/constants.private',[],function(){"use strict";return{S_CONTAINER_PREFIX:"sap.ushell.personalization#",S_ITEM_PREFIX:"ITEM#",S_VARIANT_PREFIX:"VARIANTSET#",S_ABAPTIMESTAMPFORMAT:"yyyyMMddHHmmss",S_ADMIN_PREFIX:"ADMIN#",S_ITEMKEY_SCOPE:"sap-ushell-container-scope",S_ITEMKEY_STORAGE:"sap-ushell-container-storageUTCTimestamp",S_ITEMKEY_EXPIRE:"sap-ushell-container-expireUTCTimestamp"};});
sap.ui.predefine('sap/ushell/services/_Personalization/utils',["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery"],function(c,p,q){"use strict";
function a(e,k){var m;for(m in k){if(typeof k[m]!=="function"){if(k.hasOwnProperty(m)){if(m===e){return true;}}}}return false;}
function b(C){if(C.length>40){q.sap.log.error("Personalization Service container key (\""+C+"\") should be less than 40 characters [current :"+C.length+"]");}return p.S_CONTAINER_PREFIX+C;}
function d(o,L,t,P){if(o&&o.validity===0&&!L){return t;}return P;}
function i(){var r=window["sap-ushell-config"]&&window["sap-ushell-config"].services&&window["sap-ushell-config"].services.ShellNavigation&&window["sap-ushell-config"].services.ShellNavigation.config&&window["sap-ushell-config"].services.ShellNavigation.config.reload;return r;}
function f(s,L){var A={validity:Infinity,keyCategory:c.keyCategory.GENERATED_KEY,writeFrequency:c.writeFrequency.HIGH,clientStorageAllowed:false};if(s){A.validity=s.validity;if(A.validity===null||A.validity===undefined||typeof A.validity!=="number"){A.validity=Infinity;}if(!(typeof A.validity==="number"&&((A.validity>=0&&A.validity<1000)||A.validity===Infinity))){A.liftime=Infinity;}A.keyCategory=a(s.keyCategory,c.keyCategory)?s.keyCategory:A.keyCategory;A.writeFrequency=a(s.writeFrequency,c.writeFrequency)?s.writeFrequency:A.writeFrequency;if(typeof s.clientStorageAllowed==="boolean"&&(s.clientStorageAllowed===true||s.clientStorageAllowed===false)){A.clientStorageAllowed=s.clientStorageAllowed;}}if(A.validity===0&&L){A.validity=1440;}return A;}
function l(A){if(!A.lazy){return q.when(A.instance);}try{return A.create.call(null);}catch(e){return new q.Deferred().reject(e).promise();}}
function g(C){if(!C){return false;}var A=C.getManifestObject();if(!A){return false;}var s=A.getEntry("/sap.ui5/appVariantId");if(!s){return false;}var e=A.getComponentName();if(s===e){return false;}return true;}
function h(o){if(o===undefined){return undefined;}try{return JSON.parse(o);}catch(e){return undefined;}}
function j(o){if(o===undefined){return undefined;}try{return JSON.parse(JSON.stringify(o));}catch(e){return undefined;}}
return{adjustScope:f,cloneToObject:h,clone:j,addContainerPrefix:b,pickAdapter:d,isAppVariant:g,loadAdapter:l,isLaunchpadReload:i};});
sap.ui.predefine('sap/ushell/services/_PluginManager/Extensions',['sap/ushell/services/_PluginManager/HeaderExtensions'],function(H){"use strict";var O={"Header":g};
function g(){return Promise.resolve(H);}
function a(e){var E=O[e];if(!E){return Promise.reject("Unsupported extension: '"+e+"'");}return E();}
return a;});
sap.ui.predefine('sap/ushell/services/_PluginManager/HeaderExtensions',['sap/ushell/EventHub'],function(E){"use strict";
function s(i,c,a){E.emit("setHeaderCentralAreaElement",{id:i,currentState:c,states:a});}
return{setHeaderCentralAreaElement:s};});
sap.ui.predefine('sap/ushell/services/_Ui5ComponentLoader/utils',["sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ui/core/util/AsyncHintsHelper"],function(q,U,a){"use strict";var O={name:"core-ext-light",count:4,debugName:"core-ext-light",path:"sap/fiori/"};
function c(C,o){var D=new q.Deferred();C.componentData=o;C.async=true;sap.ui.component(C).then(function(t){D.resolve(t);},function(E){D.reject(E);});return D.promise();}
function s(S){var A=(S&&S.hasOwnProperty("amendedLoading"))?S.amendedLoading:true;return A;}
function b(A){var L=true;if(A.hasOwnProperty("loadCoreExt")){L=A.loadCoreExt;}return L;}
function d(A,S,o){var L=true;if(A.hasOwnProperty("loadDefaultDependencies")){L=A.loadDefaultDependencies;}if(S&&S.hasOwnProperty("loadDefaultDependencies")){L=L&&S.loadDefaultDependencies;}L=L&&o;return L;}
function e(P){var S=P.semanticObject||null;var A=P.action||null;if(!S||!A){return null;}return"application-"+S+"-"+A+"-component";}
function u(o){return o&&o.indexOf("?")>=0;}
function r(o){var t=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return o.replace(t,"");}
function f(o){if(!o){return o;}var I=o.indexOf("?");if(I>=0){return o.slice(0,I);}return o;}
function i(){return q.sap.isDeclared("sap.fiori.core",true)||q.sap.isDeclared("sap.fiori.core-ext-light",true);}
function l(A,E,o,t,C){var w="The issue is most likely caused by application "+A,x="Failed to load UI5 component with properties: '"+C+"'.";if(t){x+=" Error likely caused by:\n"+t;}else{x+=" Error: '"+E+"'";}if(o==="parsererror"){w+=", as one or more of its resources could not be parsed";}w+=". Please create a support incident and assign it to the support component of the respective application.";q.sap.log.error(w,x,A);}
function g(o){var P=new U(o||window.location.href).mParams,x=P["sap-xapp-state"],R;delete P["sap-xapp-state"];R={startupParameters:P};if(x){R["sap-xapp-state"]=x;}return R;}
function h(A,M){if(!Array.isArray(M)){return;}M.forEach(function(o){var S=String.prototype.toLowerCase.call(o.severity||"");S=["trace","debug","info","warning","error","fatal"].indexOf(S)!==-1?S:"error";q.sap.log[S](o.text,o.details,A);});}
function p(C){var B,o={name:"CoreResourcesComplement"};if(v(C)){B=C;}else{B=O;}if(window["sap-ui-debug"]===true){o.aResources=[B.path+B.debugName+".js"];}else{o.aResources=j(B.name,B.path,B.count);}return o;}
function j(B,P,R){var o=arguments[3]||[],t=P;if(typeof B!=="string"||typeof t!=="string"||typeof R!=="number"){q.sap.log.error("Ui5ComponentLoader: _buildBundleResourcesArray called with invalid arguments");return null;}if(t.substr(-1)!=="/"){t+="/";}if(R===1){o.push(t+B+".js");}if(o.length>=R){return o;}o.push(t+B+"-"+o.length+".js");return j(B,t,R,o);}
function v(C){var o=true;if(!C){return false;}if(!C.name||typeof C.name!=="string"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'name' property");o=false;}if(!C.count||typeof C.count!=="number"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'count' property");o=false;}if(!C.debugName||typeof C.debugName!=="string"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'debugName' property");o=false;}if(!C.path||typeof C.path!=="string"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'path' property");o=false;}return o;}
function k(B){if(!B||!Array.isArray(B.aResources)||!B.name){q.sap.log.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null;}var P=[],D=new q.Deferred();B.aResources.forEach(function(R){P.push(q.sap._loadJSResourceAsync(R));});Promise.all(P).then(function(){D.resolve();}).catch(function(){q.sap.log.error("Ui5ComponentLoader: failed to load bundle: "+B.name);D.reject();});return D.promise();}
function m(A,L,N,w,o,t,C,x,y){var z=q.extend(true,{},o);if(!z.asyncHints){z.asyncHints=L?{"libs":["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]}:{};}if(A){z.asyncHints.preloadBundles=z.asyncHints.preloadBundles||[];z.asyncHints.preloadBundles=z.asyncHints.preloadBundles.concat(y.aResources);}if(w){z.asyncHints.waitFor=w;}if(!z.name){z.name=t;}if(C){z.url=f(C);}if(x){z.id=x;}if(N&&z.asyncHints){a.modifyUrls(z.asyncHints,r);}return z;}
function n(B,C,A,t){var o=q.extend(true,{startupParameters:{}},B);if(A){o.config=A;}if(t){o.technicalParameters=t;}if(u(C)){var w=g(C);o.startupParameters=w.startupParameters;if(w["sap-xapp-state"]){o["sap-xapp-state"]=w["sap-xapp-state"];}}return o;}
return{constructAppComponentId:e,getParameterMap:g,isCoreExtAlreadyLoaded:i,logAnyApplicationDependenciesMessages:h,logInstantiateComponentError:l,shouldLoadCoreExt:b,shouldLoadDefaultDependencies:d,shouldUseAmendedLoading:s,urlHasParameters:u,removeParametersFromUrl:f,createUi5Component:c,prepareBundle:p,loadBundle:k,createComponentProperties:m,createComponentData:n,buildBundleResourcesArray:j};},false);
sap.ui.predefine('sap/ushell/services/_VisualizationLoading/VizInstance',["sap/m/library","sap/ui/core/Control"],function(m,C){"use strict";var L=m.LoadState;
var v=C.extend("sap.ushell.ui.launchpad.VizInstance",{
metadata:{library:"sap.ushell",properties:{visualizationId:{type:"string"},type:{type:"string"},vizType:{type:"string"},state:{type:"string",defaultValue:L.Loading},previewMode:{type:"boolean",defaultValue:false},catalogTile:{type:"any"},title:{type:"string"},subtitle:{type:"string"},icon:{type:"string"},footer:{type:"string"},targetURL:{type:"string"},adapter:{type:"any"},keywords:{type:"string[]",defaultValue:[]},width:{type:"int",defaultValue:1},height:{type:"int",defaultValue:1}},aggregations:{innerControl:{type:"sap.ui.core.Control",multiple:false,hidden:true}},events:{press:{}}},
renderer:{apiVersion:2,render:function(r,a){r.openStart("div",a);r.openEnd();r.renderControl(a.getInnerControl());r.close("div");}}
});
v.prototype.getLayout=function(){var w=this.getWidth(),h=this.getHeight();var s=(Object.getPrototypeOf(this).getMetadata().getName()==="sap.ushell.ui.launchpad.VizInstanceCard")?1:2;var l={columns:w*s,rows:h*s};return l;};
v.prototype.load=function(a){if(!this.oInnerControl&&this.oControlPromise){return this.oControlPromise;}return new Promise(function(r,b){if(this.oInnerControl){r(this.oInnerControl);return;}this._setVizViewControlPromise(a);this.oControlPromise.then(function(V){this.setAggregation("innerControl",V,false);r(V);}.bind(this)).catch(b);}.bind(this));};
v.prototype._setVizViewControlPromise=function(){this.oControlPromise=Promise.resolve({});};
v.prototype._getInnerControlPromise=function(){return this.oControlPromise;};
return v;});
sap.ui.predefine('sap/ushell/services/_VisualizationLoading/VizInstanceDefault',["sap/ushell/services/_VisualizationLoading/VizInstance"],function(V){"use strict";
var v=V.extend("sap.ushell.ui.launchpad.VizInstanceDefault",{renderer:V.getMetadata().getRenderer()});
v.prototype.getTitle=function(){return this.getAdapter().getCatalogTilePreviewTitle(this.getCatalogTile());};
v.prototype.getSubtitle=function(){return this.getAdapter().getCatalogTilePreviewSubtitle(this.getCatalogTile());};
v.prototype.getIcon=function(){return this.getAdapter().getCatalogTilePreviewIcon(this.getCatalogTile());};
v.prototype.getKeywords=function(){return this.getAdapter().getCatalogTileKeywords(this.getCatalogTile());};
v.prototype.getFooter=function(){return this.getAdapter().getCatalogTilePreviewInfo(this.getCatalogTile());};
v.prototype.getTarget=function(){return this.getAdapter().getCatalogTileTargetURL(this.getCatalogTile());};
v.prototype.getType=function(){var a=this.getAdapter();if(a.getTileType){return a.getTileType(this.getCatalogTile());}return this.getVizType();};
v.prototype.setActive=function(a,r){var i=this.getInnerControl(),c=i&&i.getController&&i.getController(),C=this.getCatalogTile(),o=C&&C.getContract&&C.getContract("visible");if(c&&c.visibleHandler&&o&&o.setVisible){c.visibleHandler(a);o.setVisible(a);if(r&&c.refreshHandler){c.refreshHandler();}}};
v.prototype.refresh=function(){this.getAdapter().refresh(this.getCatalogTile());};
v.prototype.getHeight=function(){var s=this.getAdapter().getTileSize(this.getCatalogTile());var r=+s.split("x")[0];return r;};
v.prototype.getWidth=function(){var s=this.getAdapter().getTileSize(this.getCatalogTile());var c=+s.split("x")[1];return c;};
v.prototype.getSize=function(){return this.getAdapter().getTileSize(this.getCatalogTile());};
v.prototype.isCustomTile=function(){return this.getAdapter().isCustomTile(this.getCatalogTile());};
v.prototype._setVizViewControlPromise=function(){var p=this.getPreviewMode();this.oControlPromise=sap.ushell.Container.getService("VisualizationDataProvider").getVisualizationView(this.getVisualizationId(),p);};
v.prototype.load=function(){this.setAdapter(sap.ushell.Container.getService("VisualizationDataProvider")._getAdapter());return V.prototype.load.apply(this,arguments);};
return v;});
sap.ui.predefine('sap/ushell/services/_VisualizationLoading/VizInstanceEmpty',["sap/ushell/services/_VisualizationLoading/VizInstance","sap/m/GenericTile"],function(V,G){"use strict";
var v=V.extend("sap.ushell.ui.launchpad.VizInstanceEmpty",{
metadata:{properties:{target:{type:"string"}}},
renderer:V.getMetadata().getRenderer()
});
v.prototype.load=function(){var g=new G({state:this.getState()});this.setInnerControl(g);return Promise.resolve(g);};
v.prototype._getInnerControlPromise=function(){return Promise.resolve({});};
return v;});
sap.ui.predefine('sap/ushell/services/_VisualizationLoading/VizInstanceLocal',["sap/ushell/services/_VisualizationLoading/VizInstance","sap/ushell/resources","sap/ui/model/resource/ResourceModel","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/m/NumericContent","sap/m/library","sap/ui/core/ComponentContainer","sap/ui/thirdparty/datajs","sap/ui/core/library","sap/ushell/Config","sap/ushell/services/AppType","sap/base/Log","sap/base/util/ObjectPath","sap/base/util/restricted/_uniq"],function(V,r,R,G,I,T,N,m,C,O,c,a,A,L,b,_){"use strict";this.translationBundle=r.i18n;this.TileType={Tile:"tile",Link:"link",Card:"card"};
var v=V.extend("sap.ushell.ui.launchpad.VizInstanceLocal",{
metadata:{library:"sap.ushell",properties:{dataSource:{type:"object",defaultValue:{serviceRefreshInterval:10000}}}},
renderer:V.getMetadata().getRenderer()
});
v.prototype.setActive=function(d){if(this.getType()!=="sap.ushell.ui.tile.DynamicTile"||this.getDataSource().serviceUrl){return;}if(this.intervalTimer){window.clearInterval(this.intervalTimer);this.intervalTimer=undefined;}if(d){var s=this.getDataSource().serviceRefreshInterval;if(s){s=s*1000;}else{s=10000;}this.intervalTimer=window.setInterval(function(){O.read(this.getDataSource().serviceUrl+"?id="+this.getId()+"&t="+new Date().getTime(),function(){L.debug("Dynamic tile service call succeed for tile "+this.getId());},function(M){L.debug("Dynamic tile service call failed for tile "+this.getId()+", error message:"+M);});},s).bind(this);}};
v.prototype.refresh=function(){};
v.prototype._translateTileProperties=function(d){};
v.prototype._registerModulePath=function(d){var p={};p[d.namespace.replace(/\./g,"/")]=d.path||".";sap.ui.loader.config({paths:p});};
v.prototype._getView=function(d){var E="unknown error",t,s;var i=false;var o=d||this.getCatalogTile();if(o.isLink){i=true;}this._setInitData(o);this._translateTileProperties(o);if(o.namespace&&o.path&&o.moduleType){this._registerModulePath(o);if(o.moduleType==="UIComponent"){t=new C({component:sap.ui.getCore().createComponent({componentData:{properties:o.properties},name:o.moduleName}),height:"100%",width:"100%"});}else{t=sap.ui.view({viewName:o.moduleName,type:c.mvc.ViewType[o.moduleType],viewData:{properties:o.properties},height:"100%"});}return Promise.resolve(t);}else if(o.tileType){s=i?"Link":o.tileType;if(s){var u=this.getTargetURL();try{if(u){this.oInnerControl=this._createTileInstance(o,s);}else{this.oInnerControl=this._createTileInstance(o,s);}this._handleTilePress();this._applyDynamicTileIfoState();return this.oInnerControl;}catch(e){return Promise.resolve(new G({header:e&&(e.name+": "+e.message)||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(o)}));}}else{E="TileType: "+this.getType()+" not found!";}}else{E="No TileType defined!";}return Promise.resolve(new G({header:E,frameType:this._parseTileSizeToGenericTileFormat(o)}));};
v.prototype._setInitData=function(d){this.setTitle(d.properties.title);this.setSubtitle(d.properties.subtitle);this.setFooter(d.properties.info);this.setIcon(d.properties.icon);if(d.properties.size==="1x2"){this.setHeight(1);this.setWidth(2);}else{this.setHeight(1);this.setWidth(1);}var D={refreshInterval:10000};if(d.properties.serviceRefreshInterval){D.refreshInterval=d.properties.serviceRefreshInterval;}if(d.properties.serviceUrl){D.serviceUrl=d.properties.serviceUrl;}this.setDataSource(D);this.setTargetURL(d.properties.targetURL||d.properties.href);this.setType(d.tileType);var k=_([d.title,d.properties&&d.properties.subtitle,d.properties&&d.properties.info].concat(d.keywords||[]));this.setKeywords(k.filter(function(n){return n!==""&&n;}));};
v.prototype._createTileInstance=function(d){var t,o=new I({src:d.properties.icon});o.addStyleClass("sapUshellFullWidth");switch(d.tileType){case"sap.ushell.ui.tile.DynamicTile":t=new G({header:d.properties.title,subheader:d.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(d),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(d),footer:d.properties.info,unit:d.properties.numberUnit,content:new N({scale:d.properties.numberFactor,value:d.properties.numberValue,truncateValueTo:5,indicator:d.properties.stateArrow,valueColor:this._parseTileValueColor(d.properties.numberState),icon:d.properties.icon,width:"100%"})}),press:this._genericTilePressHandler.bind(this)});break;case"sap.ushell.ui.tile.StaticTile":t=new G({mode:d.mode||(d.properties.icon?m.GenericTileMode.ContentMode:m.GenericTileMode.HeaderMode),header:d.properties.title,subheader:d.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(d),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(d),footer:d.properties.info,content:o}),press:this._genericTilePressHandler.bind(this)});break;case"Link":t=new G({mode:m.GenericTileMode.LineMode,subheader:d.properties.subtitle,header:d.properties.title,press:function(e){this._genericTilePressHandler(e);}.bind(this)});break;default:var n=d.tileType.replace(/\./g,"/");sap.ui.require([n],function(){var e=b.get(d.tileType);t=new e(d.properties||{});});}return Promise.resolve(t);};
v.prototype._parseTileValueColor=function(t){var d=t;switch(t){case"Positive":d="Good";break;case"Negative":d="Critical";break;}return d;};
v.prototype._parseTileSizeToGenericTileFormat=function(d){return(d.properties.size==="1x2")?"TwoByOne":"OneByOne";};
v.prototype._handleTilePress=function(){if(typeof this.oInnerControl.attachPress==="function"){this.oInnerControl.attachPress(function(){if(typeof this.oInnerControl.getTargetURL==="function"){var t=this.oInnerControl.getTargetURL();if(t){if(t[0]==="#"){hasher.setHash(t);}else{window.open(t,"_blank");}}}}.bind(this));}};
v.prototype._applyDynamicTileIfoState=function(){var o=this.oInnerControl.onAfterRendering;this.oInnerControl.onAfterRendering=function(){if(o){o.apply(this,arguments);}var M=this.getModel(),d,e,f;if(!M){return;}d=M.getProperty("/data/display_info_state");e=this.getDomRef();f=e.getElementsByClassName("sapMTileCntFtrTxt")[0];switch(d){case"Negative":f.classList.add("sapUshellTileFooterInfoNegative");break;case"Neutral":f.classList.add("sapUshellTileFooterInfoNeutral");break;case"Positive":f.classList.add("sapUshellTileFooterInfoPositive");break;case"Critical":f.classList.add("sapUshellTileFooterInfoCritical");break;default:return;}};};
v.prototype._genericTilePressHandler=function(e){if(e.getSource().getScope&&e.getSource().getScope()==="Display"){var t=this.getTargetURL();if(t){if(t[0]==="#"){hasher.setHash(t);}else{var l=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(l){var o={title:this.getTitle(),appType:A.URL,url:t,appId:t};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(o);}window.open(t,"_blank");}}}};
v.prototype._setVizViewControlPromise=function(d){if(d){this.oControlPromise=this._getView(d);}else{this.oControlPromise=this._getView();}};
return v;});
sap.ui.predefine('sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin',["sap/ui/core/support/Plugin","sap/ui/model/json/JSONModel","sap/m/Button","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/Label","sap/m/Text","sap/m/MessageStrip","sap/m/FlexBox","sap/ui/model/resource/ResourceModel","sap/m/SearchField","sap/m/MessageBox","sap/base/util/isEmptyObject"],function(P,J,B,I,a,L,T,M,F,R,S,b,c){"use strict";var t=this,o,f=P.extend("sap.ushell.support.plugins.flpConfig.FlpConfigurationPlugin",{constructor:function(s){o=new R({bundleName:"sap/ushell/support/plugins/flpConfig/i18n/FlpConfigurationPlugin"});P.apply(this,["sapUiFlpConfigurationPlugin",o.getResourceBundle().getText("PLUGIN_NAME"),s]);this._oSupportStub=s;if(this.runsAsToolPlugin()){t=this;this._aEventIds=[this.getId()+"ReceiveData"];}else{this._aEventIds=[this.getId()+"RequestData"];}}});
f.prototype.isToolPlugin=function(){return true;};
f.prototype.isAppPlugin=function(){return true;};
f.prototype.init=function(s){P.prototype.init.apply(this,arguments);if(this.runsAsToolPlugin()){var r;setTimeout(function(){t.requestData();},500);r=sap.ui.getCore().createRenderManager();r.write("<div id='"+this.getId()+"'</div>").flush(this.$().get(0));r.destroy();}else{}};
f.prototype.exit=function(){P.prototype.exit.apply(this,arguments);};
f.prototype.requestData=function(){this._oSupportStub.sendEvent(this.getId()+"RequestData",{eventData:{data:{}}});};
f.prototype.onsapUiFlpConfigurationPluginRequestData=function(E){var i={};this.prepareForSending(window["sap-ushell-config"],i);this._oSupportStub.sendEvent(this.getId()+"ReceiveData",{eventData:{data:i}});};
f.prototype.onsapUiFlpConfigurationPluginReceiveData=function(E){var t=this;this.flpConfig=E.getParameter("eventData").data;sap.ui.getCore().loadLibraries(["sap.ui.table"],{async:true}).then(function(){sap.ui.require(["sap/ui/table/TreeTable","sap/ui/table/Column","sap/ui/table/library"],function(i,C,j){var k=j.SelectionMode;t.getFlpConfigurationPluginUI(null,i,C,k);});});};
function _(){var H=0,s=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getSelectedKey(),i=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel().getData();if(Array.isArray(i[s])){i[s].forEach(function(j,k){var q=e(i[s][k],s);if(H<q){H=q;}});if(H>0){sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+s).expandToLevel(H-1);}else{b.error(new L({text:sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel("i18n").getResourceBundle().getText("MISSING_HIERARCHY_LEVEL")}));}}}
function d(){var s=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getSelectedKey();sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+s).collapseAll();}
f.prototype.onPressSearchNewModel=function(E){var q,r,s,A,u,v,w,x,V,y=[],z={},C="",D={},G={},H=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel("Full"),K=E.getParameter("query");if(!H){H=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel().getData();}else{H=H.getData();}Object.keys(H).forEach(function(N){z[N]=0;});if(K){for(var N in H){C=N;q=[];n(H[N],N,C,q,K);G[N]=q;}Object.keys(G).forEach(function(N){A=G[N];for(var i=0;i<A.length;i++){u=A[i].split(".");v=[];for(var j=0;j<u.length;j++){if(!isNaN(parseInt(u[j],10))){v.push(parseInt(u[j],10));}else{v.push(u[j]);}}for(var k=0;k<v.length;k+=2){w={"property":""};w[v[0]]=[];if(isNaN(parseInt(v[k],10))){r=v.slice(0,k+1);if(!g(D,r)&&typeof g(D,v.slice(0,v.length-2))!=="object"){m(D,r,[w],v[0],r.length);}V=g(H,v.slice(0,k+2));if(V&&g(D,v.slice(0,k+2))){l(D,V.property,v.slice(0,k+2).toString()+",property");}else if(k!==v.length-2){y.push(v.slice(0,k+2).toString());}}}s=v.slice(0);m(D,v,{"property":"","value":""},v[0],r.length);V=g(H,s);if(V){l(D,V.value,s.toString()+",value");l(D,V.property,s.toString()+",property");}}y.forEach(function(C){V=g(H,C.split(","));if(V&&g(D,C.split(","))){l(D,V.property,C+",property");}});y=[];if(D[N]&&Array.isArray(D[N][0][N])&&D[N][0][N].length===0){D[N]=D[N].splice(1);}});sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new J(D));sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new J(H),"Full");var O=0;Object.keys(z).forEach(function(N){x=N;if(D[x]&&Array.isArray(D[x])){D[x].forEach(function(i,j){var k=e(D[x][j],x);if(O<k){O=k;}});}sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+N).expandToLevel(O-1);sap.ui.getCore().byId(N).setCount(h(D[N],N,0));});}else{Object.keys(z).forEach(function(N){sap.ui.getCore().byId(N).setCount(h(H[N],N,0));});sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new J(H));}};
function e(C,s){var H=0;if(C[s]){C[s].forEach(function(i){var j=e(i,s);if(j>H){H=j;}});}return H+1;}
function g(j,k){for(var i=0;i<k.length;i++){if(j){j=j[k[i]];}}return j;}
function h(C,s,i){if(Array.isArray(C)){C.forEach(function(j){if(j[s]){i=h(j[s],s,i);}else{i+=1;}});return i;}return undefined;}
function l(j,v,s){var k=s.split(",");for(var i=0;i<k.length-1;i++){j=j[k[i]];}j[k[k.length-1]]=v;}
function m(i,j,v,s,k){if(j.length===1){i[j[0]]=v;}else{var q=j.shift();i[q]=m(typeof i[q]==="undefined"?{}:i[q],j,v,s,k);}if(i[s]&&i.property&&i.value){delete i.value;i.property="";}return i;}
function n(C,s,i,j,k){C.forEach(function(q,r){if(q[s]){i=i+"."+r+"."+s;i=n(q[s],s,i,j,k);}else if(q.property.indexOf(k)>-1){i=i+"."+r;j.push(i);i=i.substring(0,i.lastIndexOf("."));}});i=i.substring(0,i.lastIndexOf("."));if(isNaN(parseInt(i.substr(i.lastIndexOf(".")+1),10))){return i;}return i.substring(0,i.lastIndexOf("."));}
function p(C,s){if(typeof C!=="object"){return[{property:s,value:C}];}return Object.keys(C).map(function(i){var r={property:i};if(typeof(C[i])==="object"&&Object.keys(C[i]).length!==0){r[s]=p(C[i],s);return r;}if(!c(C[i])||typeof(C[i])!=="object"){r.value=C[i];}else{r.value="";}return r;});}
f.prototype.prepareForSending=function(i,j){Object.keys(i).forEach(function(k){var C=i[k];switch(typeof C){case"object":if(C===null){j[k]=C;return;}else if(Array.isArray(C)){j[k]=[];}else{j[k]={};}this.prepareForSending(i[k],j[k]);break;case"undefined":j[k]="undefined";return;case"function":return;default:j[k]=i[k];return;}}.bind(this));};
f.prototype.getNewConfigJSON=function(i){var N={};Object.keys(i).forEach(function(s){N[s]=p(i[s],s);});return N;};
f.prototype.getFlpConfigurationPluginUI=function(i,j,C,k){var q,r,s,u={};s=this.getNewConfigJSON(this.flpConfig);q=new J(s);for(var v in s){u[v]=h(s[v],v,0);}if(!sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar")){if(!s||c(s)){new M({text:o.getResourceBundle().getText("ERROR_MESSAGE"),type:"Warning",showIcon:true,showCloseButton:false}).placeAt(this.getId());}else{r=new I("sap-ui-support-flpConfigurationPlugin-TabBar",{headerMode:"Inline"});Object.keys(this.flpConfig).forEach(function(x,y){r.insertItem(new a(x,{key:x,text:x,count:u[x],content:[new j("sap-ui-support-flpConfigurationPlugin-TreeTable"+x,{rows:"{/"+x+"/}",selectionMode:k.None,enableCellFilter:true,extension:[new F({items:[new B({icon:"sap-icon://expand",text:"{i18n>EXPAND_BUTTON}",press:_}),new B({icon:"sap-icon://collapse",text:"{i18n>COLLAPSE_BUTTON}",press:d})]})],columns:[new C({label:new L({text:"{i18n>COLUMN_PROPERTY}"}),template:new T({text:"{property}"})}),new C({label:new L({text:"{i18n>COLUMN_VALUE}"}),template:new T({text:"{value}"})})]})]}),y);});var w=new S({search:this.onPressSearchNewModel});w.placeAt(this.getId());r.setModel(q);r.setModel(o,"i18n");r.placeAt(this.getId());}}};
return f;});
sap.ui.predefine('sap/ushell/ui/AppContainer',["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/Device","sap/base/Log","./AppContainerRenderer"],function(q,C,D,L){"use strict";
var A=C.extend("sap.ushell.ui.AppContainer",{metadata:{library:"sap.ushell",properties:{visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{pages:{type:"sap.ui.core.Control",multiple:true,singularName:"pages"}},events:{beforeNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}},afterNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}}}}});
A.prototype.addPages=function(c){if(this.getPages().indexOf(c)>-1){return;}c.toggleStyleClass("hidden",true);this.addAggregation("pages",c,true);var r,d=this.getDomRef();if(d){r=sap.ui.getCore().createRenderManager();r.render(c,d);r.destroy();}};
A.prototype.addCenterViewPort=A.prototype.addPages;
A.prototype.removeCenterViewPort=function(i){this.removeAggregation("pages",i,true);};
A.prototype.getCurrentCenterPage=function(){return this.getPages().reduce(function(c,p){return(p&&!p.hasStyleClass("hidden"))?p.getId():c;},null);};
A.prototype.navTo=function(v,p){var t=sap.ui.getCore().byId(p),c=this.getCurrentCenterPage(),o=sap.ui.getCore().byId(c)||null,h=sap.ushell.Container.getRenderer("fiori2").byId("Shell-home-component-container"),H=h&&h.getId(),N=c&&(H===c),b=H===p;if(v!=="centerViewPort"){L.error("Navigation to "+v+" is not allowed in Fiori3");return;}if(this.getPages().indexOf(t)===-1){L.error("AppContainer: invalid navigation target");return;}if(D.system.desktop&&N){this._saveFocus();}if(c!==p){this.fireBeforeNavigate({toId:p,to:t,fromId:c,from:o});}this.getPages().forEach(function(P){if(P){P.toggleStyleClass("hidden",P.getId()!==p);}});if(D.system.desktop&&b){this._restoreFocus();}if(c!==p){this.fireAfterNavigate({toId:p,to:t,fromId:c,from:o});}};
A.prototype._restoreFocus=function(){var c;if(this.sLastFocusId){sap.ushell.renderers.fiori2.AccessKeysHandler.registerAppKeysHandler(this.fnLastAppKeyHandler);c=sap.ui.getCore().byId(this.sLastFocusId);if(c){c.focus();}}};
A.prototype._saveFocus=function(){var a=q(document.activeElement).control(0);this.sLastFocusId=a?a.getId():null;this.fnLastAppKeyHandler=sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler();};
A.prototype.getViewPortControl=function(v,c){return this.getPages().reduce(function(o,p){return(v==="centerViewPort"&&p&&p.getId()===c)?p:o;},null);};
var n=function(){};A.prototype.switchState=n;A.prototype._handleSizeChange=n;A.prototype.shiftCenterTransitionEnabled=n;A.prototype.shiftCenterTransition=n;A.prototype.addLeftViewPort=n;A.prototype.addRightViewPort=n;A.prototype.attachAfterSwitchState=n;A.prototype.detachAfterSwitchState=n;A.prototype.attachAfterSwitchStateAnimationFinished=n;A.prototype.detachAfterSwitchStateAnimationFinished=n;
A.prototype.getCurrentState=function(){return"Center";};
return A;});
sap.ui.predefine('sap/ushell/ui/AppContainerRenderer',[],function(){"use strict";var A={};
A.render=function(r,c){if(!c.getVisible()){return;}r.write("<div");r.writeControlData(c);r.write(">");c.getPages().forEach(function(p){r.renderControl(p);});r.write("</div>");};
return A;},true);
sap.ui.predefine('sap/ushell/ui/QuickAccess',["sap/ui/thirdparty/jquery","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/resources","sap/ushell/services/AppType","sap/ushell/utils"],function(q,F,J,C,r,A,u){"use strict";var Q={oModel:new J({recentActivities:[],frequentActivities:[]}),sFocusIdAfterClose:null,_createQuickAccessDialog:function(){var p=F.load({name:"sap.ushell.ui.QuickAccess",type:"XML",controller:this});p.then(function(f){this.oQuickAccessDialog=f;this.oQuickAccessDialog.setModel(this.oModel);this.oQuickAccessDialog.addEventDelegate({onkeydown:function(e){if(e.keyCode===27){this._closeDialog();}}.bind(this)});sap.ui.getCore().byId("shell").addDependent(this.oQuickAccessDialog);}.bind(this));return Promise.resolve(p);},_updateQuickAccessDialog:function(d){var U=sap.ushell.Container.getService("UserRecents"),I=d.getContent()[0],R,f;if(U&&I){I.setBusy(true);R=U.getRecentActivity().then(function(a){for(var i=0;i<a.length;i++){a[i].timestamp=u.formatDate(a[i].timestamp);}return a;},function(){return new q.Deferred().resolve([]);});f=U.getFrequentActivity().then(function(a){return a;},function(){return new q.Deferred().resolve([]);});q.when(R,f).done(function(a,b){this.oModel.setData({recentActivities:a,frequentActivities:b});this._setDialogContentHeight(d,Math.max(a.length,b.length));I.setBusy(false);}.bind(this));}},_setDialogContentHeight:function(d,i){var h=(i+0.5)*4+2.75;if(h<18){h=18;}else if(h>42){h=42;}d.setContentHeight(h+"rem");},_closeDialog:function(){this.oQuickAccessDialog.close();this.oQuickAccessDialog.destroy();var f=sap.ui.getCore().byId(this.sFocusIdAfterClose);if(f){f.focus();return;}sap.ushell.components.ComponentKeysHandler.goToTileContainer();},_titleFormatter:function(t,a){if(a===A.SEARCH){t="\""+t+"\"";}return t;},_descriptionFormatter:function(a){if(a===A.SEARCH){return r.i18n.getText("recentActivitiesSearchDescription");}return A.getDisplayName(a);},_itemPress:function(e){var m=this.oModel,p=e.getParameter("listItem").getBindingContextPath(),i=m.getProperty(p);if(i.url[0]==="#"){window.hasher.setHash(i.url);this._closeDialog();}else{var l=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(l){var R={title:i.title,appType:A.URL,url:i.url,appId:i.url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(R);}window.open(i.url,"_blank");}}};return{openQuickAccessDialog:function(f,s){Q._createQuickAccessDialog().then(function(d){var i=d.getContent()[0];Q.sFocusIdAfterClose=s;Q._updateQuickAccessDialog(d);i.setSelectedKey(f);d.open();});},_getQuickAccess:function(){return Q;}};});
sap.ui.predefine('sap/ushell/ui/ShellHeader',["sap/ui/core/Control","sap/ui/core/theming/Parameters","sap/ui/Device","sap/ui/dom/units/Rem","sap/ushell/ui/shell/ShellAppTitle","./ShellHeaderRenderer"],function(C,T,D,R){"use strict";var s="sapUshellShellShowSearchOverlay";var _=0;var a;var b;var c="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";var d=sap.ui.require.toUrl("sap/ushell")+"/themes/base/img/sap_55x27.png";
var S=C.extend("sap.ushell.ui.ShellHeader",{metadata:{properties:{logo:{type:"sap.ui.core.URI",defaultValue:""},showLogo:{type:"boolean",defaultValue:true},homeUri:{type:"sap.ui.core.URI",defaultValue:"#"},searchState:{type:"string",defaultValue:"COL"},ariaLabel:{type:"string"},centralAreaElement:{type:"string",defaultValue:null},title:{type:"string",defaultValue:""}},aggregations:{headItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},headEndItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},search:{type:"sap.ui.core.Control",multiple:false},appTitle:{type:"sap.ushell.ui.shell.ShellAppTitle",multiple:false}},associations:{shellLayout:{type:"sap.ui.base.ManagedObject",multiple:false}},events:{searchSizeChanged:{}}}});
S.prototype.getShellLayoutControl=function(){return sap.ui.getCore().byId(this.getShellLayout());};
S.prototype.createUIArea=function(i){var h=window.document.getElementById("shell-hdrcntnt");var e=window.document.getElementById(i||"canvas");if(e&&!h){e.insertAdjacentHTML("beforebegin","<header id=\"shell-hdr\" class=\"sapContrastPlus sapUshellShellHead\">"+"</header>");if(!this.getVisible()){this.setVisible(false);}this.placeAt("shell-hdr");}};
S.prototype.SearchState={COL:"COL",EXP:"EXP",EXP_S:"EXP_S"};
S.prototype.init=function(){D.media.attachHandler(this.refreshLayout,this,D.media.RANGESETS.SAP_STANDARD);D.resize.attachHandler(this.refreshLayout,this);this.data("sap-ui-fastnavgroup","true",true);this._fnFocusListener=this._handleFocus.bind(this);};
S.prototype.exit=function(){D.media.detachHandler(this.refreshLayout,this,D.media.RANGESETS.SAP_STANDARD);D.resize.detachHandler(this.refreshLayout,this);var o=window.document.getElementById("shell-hdr");if(o){o.parentElement.removeChild(o);}};
S.prototype._toggleFocusListener=function(t){var A=window.document.getElementById("sapUshellHeaderAccessibilityHelper");if(A){A[t?"addEventListener":"removeEventListener"]("focus",this._fnFocusListener);}};
S.prototype.setAccessKeyHandler=function(A){this._accessKeyHandler=A;};
S.prototype._handleFocus=function(e){var t=this;function f(){if(t._accessKeyHandler.bForwardNavigation){var h=t.getHeadItems();if(h.length>0){h[0].focus();}else{t.getAppTitle().focus();}}else{var H=t.getHeadEndItems();if(H.length>0){H[H.length-1].focus();}else{t.getAppTitle().focus();}}t._accessKeyHandler.fromOutside=false;}if(this._accessKeyHandler){if(this._accessKeyHandler.fromOutside||this._accessKeyHandler.bForwardNavigation){f();}else{this._accessKeyHandler._handleEventUsingExternalKeysHandler(e);var A=window.document.getElementById("sapUshellHeaderAccessibilityHelper");if(window.document.activeElement===A){var g=window.document.querySelectorAll("#canvas [tabindex='0']");if(g.length){g[g.length-1].focus();}else{f();return;}}this._accessKeyHandler.bFocusOnShell=false;}}};
S.prototype.onsapspace=function(e){if(e.target===this.getDomRef("logo")){window.location.href=e.target.href;}};
S.prototype.onBeforeRendering=function(){this._toggleFocusListener(false);};
S.prototype.onAfterRendering=function(){var h=this.getDomRef();if(!a&&h.parentElement.getBoundingClientRect().height>0){h.style.visibility="hidden";h.style.height="2.75rem";return;}this.refreshLayout();this._toggleFocusListener(true);};
S.prototype.onThemeChanged=function(e){var t=e.theme;if(t!==a){a=t;b=T._getThemeImage()||d;this.invalidate();}};
S.prototype.getLogo=function(){return this.getProperty("logo")||b||c;};
S.prototype.refreshLayout=function(){if(!this.getDomRef()){return;}this._setAppTitleFontSize();if(this.getSearchVisible()){var o=this.getDomRef("hdr-search");o.style.display="none";this._hideElementsForSearch();o.style.display="";o.style["max-width"]=_+"rem";this.fireSearchSizeChanged({remSize:R.fromPx(o.getBoundingClientRect().width),isFullWidth:this.isPhoneState()});}};
S.prototype._setAppTitleFontSize=function(){var B=this.getDomRef("hdr-begin"),A=window.document.getElementById("shellAppTitle"),e="sapUshellHeadTitleWithSmallerFontSize";if(B&&A&&A.style.display!=="none"){var t=A.querySelector("h1");if(t){t.classList.remove(e);A.style.overflow="visible";var o=B.getBoundingClientRect(),i=o.x+o.width,f=A.getBoundingClientRect(),g=f.x+f.width;if(g>i){t.classList.add(e);A.style.overflow="hidden";}}}};
S.prototype.removeHeadItem=function(i){if(typeof i==="number"){i=this.getHeadItems()[i];}this.removeAggregation("headItems",i);};
S.prototype.addHeadItem=function(i){this.addAggregation("headItems",i);};
S.prototype.isPhoneState=function(){var e=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;var E=window.document.getElementById(this.getId()).getBoundingClientRect().width>_;return(D.system.phone||e==="Phone"||!E);};
S.prototype.setSearchState=function(e,m,w){if(this.SearchState[e]&&this.getSearchState()!==e){if(typeof m==="boolean"){w=m;m=undefined;}this.setProperty("searchState",e,false);var f=(e!=="COL");var g=this.getShellLayoutControl();if(g){g.toggleStyleClass(s,f&&w);}_=f?m||35:0;}};
S.prototype._hideElementsForSearch=function(){var n,o=this.getDomRef("hdr-search-container"),B=this.getDomRef("hdr-begin"),e=this.getDomRef("hdr-center"),E=this.getDomRef("hdr-end");if(this.getSearchState()==="EXP"||this.isPhoneState()){n=R.toPx(_+3);}else{n=R.toPx(9+0.5);}var f=[e,B,E];Array.prototype.forEach.call(B.childNodes,function(h){f.splice(1,0,h);});var g;for(var i=0;i<f.length-1;i++){g=f[i];if(g){if(n>o.getBoundingClientRect().width){g.style.display="none";B.style.flexBasis="auto";continue;}return;}}if(R.toPx(_)>o.getBoundingClientRect().width){E.style.display="none";}};
S.prototype.getSearchWidth=function(){return _;};
S.prototype.isHomepage=function(){return!!window.hasher&&"#"+window.hasher.getHash()===this.getHomeUri();};
S.prototype.getSearchVisible=function(){return this.getSearchState()!==this.SearchState.COL;};
S.prototype.getCentralControl=function(){return sap.ui.getCore().byId(this.getCentralAreaElement());};
S.prototype.setNoLogo=function(){this.setLogo(c);};
return S;},true);
sap.ui.predefine('sap/ushell/ui/ShellHeaderRenderer',["sap/ushell/resources","sap/ui/Device"],function(r,D){"use strict";var S={apiVersion:2};
S.render=function(a,s){var i=s.getId();var c=s.getCentralControl();a.openStart("div",s);if(!s.getVisible()){a.style("display","none");}a.class("sapUshellShellHeader");a.class("sapUshellShellCntnt");a.attr("aria-label",r.i18n.getText("Shell_Header_AriaLabel"));a.openEnd();a.openStart("div");a.attr("id","sapUshellHeaderAccessibilityHelper");a.attr("tabindex","0");a.openEnd();a.close("div");a.openStart("div");a.attr("id",i+"-hdr-begin");a.class("sapUshellShellHeadBegin");if(c){a.class("sapUshellHeadWithCenter");}a.openEnd();this.renderHeaderItems(a,s);this.renderLogo(a,s);this.renderTitle(a,s);a.close("div");if(c){a.openStart("div",c);a.attr("id",i+"-hdr-center");a.class("sapUshellShellHeadCenter");a.openEnd();a.close("div");}a.openStart("div");a.attr("id",i+"-hdr-search-container");a.class("sapUshellShellHeadSearchContainer");a.openEnd();this.renderSearch(a,s);a.close("div");a.openStart("div");a.attr("id",i+"-hdr-end");a.class("sapUshellShellHeadEnd");a.openEnd();this.renderHeaderEndItems(a,s);a.close("div");a.close("div");};
S.renderSearch=function(a,s){var o=s.getSearch();a.openStart("div");a.attr("id",s.getId()+"-hdr-search");a.class("sapUshellShellSearch");a.style("max-width",s.getSearchWidth()+"rem");if(s.getSearchState()==="COL"){a.style("display","none");}a.openEnd();if(o){a.renderControl(o);}a.close("div");};
S.renderTitle=function(a,s){var t=s.getTitle();a.renderControl(s.getAppTitle());if(t){a.openStart("div");a.attr("id",s.getId()+"-hdr-shell-title");a.class(s.getAppTitle()?"sapUshellShellHeadSubtitle":"sapUshellShellHeadTitle");a.openEnd();a.openStart("span");a.class("sapUshellHeadTitle");a.openEnd();a.text(t);a.close("span");a.close("div");}};
S.renderHeaderItems=function(a,h){var I=h.getHeadItems();for(var i=0;i<I.length;i++){if(I[i].getId()==="homeBtn"&&h.getShowLogo()){continue;}a.renderControl(I[i]);}};
S.renderHeaderEndItems=function(a,h){h.getHeadEndItems().forEach(a.renderControl);};
S.renderLogo=function(a,h){if(!h.getShowLogo()){return;}var A=r.i18n.getText("homeBtn_tooltip"),t=r.i18n.getText("homeBtn_tooltip_text"),i=h.getLogo();a.openStart("a");a.attr("id",h.getId()+"-logo");a.class("sapUshellShellIco");a.attr("href",h.getHomeUri());if(h.isHomepage()){a.class("sapUshellLogoLinkDisabled");a.attr("aria-disabled","true");}else{a.attr("tabindex","0");a.attr("title",t);}a.attr("aria-label",A);a.openEnd();a.voidStart("img");a.attr("id",h.getId()+"-icon");a.attr("alt",r.i18n.getText("SHELL_LOGO_TOOLTIP"));a.attr("src",i);a.voidEnd();a.close("a");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/appfinder/AppBox',["sap/ui/core/Control"],function(C){"use strict";
var A=C.extend("sap.ushell.ui.appfinder.AppBox",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null},url:{type:"string",group:"Misc",defaultValue:null},navigationMode:{type:"string",group:"Misc",defaultValue:null}},aggregations:{pinButton:{type:"sap.m.Button",multiple:false}},events:{press:{},afterRendering:{}}}});
A.prototype.init=function(){};
A.prototype.onAfterRendering=function(){this._adjustHeaderElementsHeight();this.fireAfterRendering();};
A.prototype.setTitle=function(t){this.setProperty("title",t,true);};
A.prototype.setUrl=function(i){this.setProperty("url",i,true);};
A.prototype.setNavigationMode=function(n){this.setProperty("navigationMode",n,true);};
A.prototype.onclick=function(e){this.firePress(e);};
A.prototype.onsapspace=function(e){e.preventDefault();this.firePress(e);};
A.prototype._adjustHeaderElementsHeight=function(){var j=this.$().find(".sapUshellAppBoxTitle");var t=this._getNumberOfLines(j);var a=this.$().find(".sapUshellAppBoxSubtitle");if(t===2){j.addClass("sapUshellAppBoxHeaderElementTwoLines");a.addClass("sapUshellAppBoxHeaderElementOneLine");}else{j.addClass("sapUshellAppBoxHeaderElementOneLine");a.addClass("sapUshellAppBoxHeaderElementTwoLines");}};
A.prototype._getNumberOfLines=function(j){var l=parseInt(j.css("line-height"),10);var h=j.height();if(!h){return 0;}return((h/l)>1)?2:1;};
A.prototype.onsapenter=A.prototype.onsapspace;return A;});
sap.ui.predefine('sap/ushell/ui/appfinder/AppBoxRenderer',['sap/ushell/resources','sap/ui/core/Icon'],function(r,I){"use strict";var A={};
A.render=function(a,o){var c=o.getParent(),b=c.getAppBoxesContainer?c.getAppBoxesContainer():[],v=b.filter(function(o){return o.getVisible();}),C=v.indexOf(o)>-1?v.indexOf(o)+1:"",s=o.getTitle();s=o.getSubtitle()?s+" "+o.getSubtitle():s;var n=o.getNavigationMode();if(n){s=r.i18n.getText(n+"NavigationMode")+" "+s;}a.write("<li");a.writeControlData(o);a.addClass("sapUshellAppBox");a.writeAccessibilityState(o,{role:"option",posinset:C,setsize:v.length});a.writeAttributeEscaped("aria-label",s);a.writeAttribute("aria-describedby",o.getId());a.writeClasses();a.write(">");a.write("<div");a.addClass("sapUshellAppBoxInner");a.writeClasses();a.write(">");var h=o.getIcon();if(h){var i=new I({src:o.getIcon()});i.addStyleClass("sapUshellAppBoxIcon");a.renderControl(i);}a.write("<div");if(h){a.addClass("sapUshellAppBoxHeader");}else{a.addClass("sapUshellAppBoxHeaderNoIcon");}a.writeClasses();a.write(">");a.write("<div");a.addClass("sapUshellAppBoxTitle");a.writeClasses();a.write(">");a.writeEscaped(o.getTitle());a.write("</div>");if(o.getSubtitle()){a.write("<div");a.addClass("sapUshellAppBoxSubtitle");a.writeClasses();a.write(">");a.writeEscaped(o.getSubtitle());a.write("</div>");}a.write("</div>");a.write("</div>");a.write("<div");a.addClass("sapUshellAppBoxActionsArea");a.writeClasses();if(o.getTitle){a.writeAccessibilityState(o,{role:"toolbar",label:o.getTitle()});}a.write(">");a.renderControl(o.getPinButton());a.write("</div>");a.write("</li>");};
return A;},true);
sap.ui.predefine('sap/ushell/ui/fiori3/AppContainer',["../AppContainer"],function(A){"use strict";return A;});
sap.ui.predefine('sap/ushell/ui/footerbar/AboutButton',["sap/m/Button","sap/m/Dialog","sap/m/ObjectHeader","sap/m/VBox","sap/ui/layout/form/SimpleForm","sap/ushell/resources","sap/ushell/ui/launchpad/ActionItem","sap/ushell/services/AppConfiguration","sap/m/Label","sap/m/Text","sap/ushell/utils/type","sap/base/Log","sap/base/util/isEmptyObject","sap/ui/core/library","sap/ui/layout/library","sap/ui/VersionInfo","./AboutButtonRenderer"],function(B,D,O,V,S,r,A,a,L,T,t,b,i,c,l,d){"use strict";var e=l.form.SimpleFormLayout;var f=c.TitleLevel;
var g=A.extend("sap.ushell.ui.footerbar.AboutButton",{metadata:{library:"sap.ushell"}});
g.prototype.init=function(){if(A.prototype.init){A.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://hint");this.setText(r.i18n.getText("about"));this.setTooltip(r.i18n.getText("about"));this.attachPress(this.showAboutDialog);this._translationBundle=r.i18n;};
g.prototype.showAboutDialog=function(){return this._getUI5VersionInfo().then(function(v){var m=a.getMetadata(),o=v||{},h=sap.ushell.Container.getService("AppLifeCycle").getCurrentApplication(),p=sap.ushell.Container.getLogonSystem().getProductVersion(),C=this._getClientRoleDescription(),s=new S({id:"aboutDialogFormID",editable:false,layout:e.ResponsiveGridLayout,content:[new L({text:this._translationBundle.getText("technicalName")}),new T({text:m.technicalName||""}),new L({text:this._translationBundle.getText("fioriVersionFld")}),new T({text:m.version||""}),new L({text:this._translationBundle.getText("sapui5Fld")}),new T({text:(o.version||"")+(" ("+(o.buildTimestamp||"")+")")||""}),new L({text:this._translationBundle.getText("userAgentFld")}),new T({text:navigator.userAgent||""}),new L({text:this._translationBundle.getText("productVersionFld"),visible:!!p}),new T({text:p||"",visible:!!p}),new L({text:this._translationBundle.getText("clientRoleFld"),visible:!!C}),new T({text:C||"",visible:!!C})]}),H=new O({title:m.title,titleLevel:f.H3,icon:m.icon}).addStyleClass("sapUshellAboutDialogHeader"),j,k,n=new B({text:this._translationBundle.getText("okBtn"),press:function(){j.close();}});if(h){h.getTechnicalParameter("sap-fiori-id").then(function(F){if(t.isArray(F)&&F[0]){s.addContent(new L({text:this._translationBundle.getText("fioriAppId")}));s.addContent(new T({text:F[0]}));}}.bind(this),function(E){b.error("Cannot get technical parameter 'sap-fiori-id'",E,"sap.ushell.ui.footerbar.AboutButton");});h.getTechnicalParameter("sap-ach").then(function(q){if(t.isArray(q)&&q[0]){s.addContent(new L({text:this._translationBundle.getText("sapAch")}));s.addContent(new T({text:q[0]}));}}.bind(this),function(E){b.error("Cannot get technical parameter 'sap-ach'",E,"sap.ushell.ui.footerbar.AboutButton");});}if(i(m)||!m.icon){k=new V({items:[s]});}else{k=new V({items:[H,s]});}j=new D({id:"aboutContainerDialogID",title:this._translationBundle.getText("about"),contentWidth:"25rem",horizontalScrolling:false,leftButton:n,afterClose:function(){j.destroy();if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}}});j.addContent(k);j.open();}.bind(this));};
g.prototype._getClientRoleDescription=function(){var C=sap.ushell.Container.getLogonSystem().getClientRole();var o={"P":"clientRoleProduction","T":"clientRoleTest","C":"clientRoleCustomizing","D":"clientRoleDemonstration","E":"clientRoleTraining","S":"clientRoleSAPReference"};return this._translationBundle.getText(o[C]);};
g.prototype._getUI5VersionInfo=function(){return new Promise(function(h){d.load().then(h).catch(function(){b.error("VersionInfo could not be loaded");h({});});});};
return g;});
sap.ui.predefine('sap/ushell/ui/footerbar/AboutButtonRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var A=R.extend(B);return A;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/AddBookmarkButton',["sap/m/Button","sap/m/Dialog","sap/ui/layout/form/SimpleForm","sap/ushell/resources","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/ui/layout/library","sap/ui/Device","./AddBookmarkButtonRenderer"],function(B,D,S,r,i,q,L,J,c,l,a){"use strict";var V=c.ValueState;var b=l.form.SimpleFormLayout;var d=c.mvc.ViewType;
var A=B.extend("sap.ushell.ui.footerbar.AddBookmarkButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},info:{type:"string",group:"Misc",defaultValue:null},tileIcon:{type:"string",group:"Misc",defaultValue:null},numberUnit:{type:"string",group:"Misc",defaultValue:null},keywords:{type:"string",group:"Misc",defaultValue:null},customUrl:{type:"any",group:"Misc",defaultValue:null},serviceUrl:{type:"any",group:"Misc",defaultValue:null},serviceRefreshInterval:{type:"string",group:"Misc",defaultValue:null},showGroupSelection:{type:"boolean",group:"Misc",defaultValue:true},appData:{type:"object",group:"Misc",defaultValue:null}}}});
A.prototype.init=function(){this.setIcon("sap-icon://add-favorite");this.setText(r.i18n.getText("addToHomePageBtn"));this.setEnabled();this.oModel=new J({showGroupSelection:true,title:"",subtitle:"",numberValue:"",info:"",icon:"",numberUnit:"",keywords:""});var t=this;this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}t.showAddBookmarkDialog(function(){if(t.getAfterPressHandler()){t.getAfterPressHandler()();}});});if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
A.prototype.exit=function(){if(this.oDialog){this.oDialog.destroy();}if(this.oModel){this.oModel.destroy();}if(B.prototype.exit){B.prototype.exit.apply(this,arguments);}};
A.prototype.setBookmarkTileView=function(v){this.bookmarkTileView=v;};
A.prototype.getBookmarkTileView=function(){return this.bookmarkTileView;};
A.prototype.showAddBookmarkDialog=function(e){this.oResourceBundle=r.i18n;this.appData=this.getAppData()||{};var t=this,I,f;this.cb=e;I=i(this.appData);f=sap.ui.view({type:d.JS,viewName:"sap.ushell.ui.footerbar.SaveAsTile",viewData:{appData:this.appData,serviceUrl:I?this.getServiceUrl():this.appData.serviceUrl,customUrl:I?this.getCustomUrl():this.appData.customUrl,numberUnit:I?this.getNumberUnit():this.appData.numberUnit,serviceRefreshInterval:I?this.getServiceRefreshInterval():this.appData.serviceRefreshInterval,keywords:I?this.getKeywords():this.appData.keywords}});if(i(this.appData)){f.setModel(this.oModel);}t.setBookmarkTileView(f);this.oSimpleForm=new S({id:"bookmarkFormId",layout:b.ResponsiveGridLayout,content:[f],editable:true}).addStyleClass("sapUshellAddBookmarkForm");t._openDialog(this.oSimpleForm);f.getTitleInput().attachLiveChange(function(){this.setValueState(V.NONE);});};
A.prototype._openDialog=function(C){var o=new B("bookmarkOkBtn",{text:this.oResourceBundle.getText("okBtn"),press:this._handleOkButtonPress.bind(this)}),e=new B("bookmarkCancelBtn",{text:this.oResourceBundle.getText("cancelBtn"),press:function(){this.oDialog.close();this._restoreDialogEditableValuesToDefault();this.cb();}.bind(this)});this.oDialog=new D({id:"bookmarkDialog",title:this.oResourceBundle.getText("addToHomePageBtn"),contentWidth:"25rem",content:C,beginButton:o,endButton:e,stretch:a.system.phone,horizontalScrolling:false,afterClose:function(){this.oDialog.destroy();delete(this.oDialog);}.bind(this)});this.oDialog.open();return this.oDialog;};
A.prototype.setTitle=function(t){this.setProperty("title",t,true);this.oModel.setProperty("/title",t);};
A.prototype.setSubtitle=function(s){this.setProperty("subtitle",s,true);this.oModel.setProperty("/subtitle",s);};
A.prototype.setInfo=function(I){this.setProperty("info",I,true);this.oModel.setProperty("/info",I);};
A.prototype.setTileIcon=function(I){this.setProperty("tileIcon",I,true);this.oModel.setProperty("/icon",I);};
A.prototype.setShowGroupSelection=function(s){this.setProperty("showGroupSelection",s,true);this.oModel.setProperty("/showGroupSelection",s);};
A.prototype.setNumberUnit=function(n){this.setProperty("numberUnit",n,true);this.oModel.setProperty("/numberUnit",n);};
A.prototype.setKeywords=function(k){this.setProperty("keywords",k,true);this.oModel.setProperty("/keywords",k);};
A.prototype._restoreDialogEditableValuesToDefault=function(){if(this.oModel){this.oModel.setProperty("/title",this.getTitle());this.oModel.setProperty("/subtitle",this.getSubtitle());this.oModel.setProperty("/info",this.getInfo());}};
A.prototype._handleOkButtonPress=function(){var t,R,o,e=this.getBookmarkTileView(),f=e.getBookmarkTileData(),g=f.group?f.group.object:"";if(!f.title){t=sap.ui.getCore().byId("bookmarkTitleInput");if(t){t.setValueState(V.Error);t.setValueStateText(r.i18n.getText("bookmarkTitleInputError"));return;}}delete f.group;R=sap.ushell.Container.getService("Bookmark").addBookmark(f,g);o=r.i18n;R.done(function(){q.proxy(this._restoreDialogEditableValuesToDefault(),this);if(sap.ushell.Container){sap.ushell.Container.getService("Message").info(o.getText("tile_created_msg"));}}.bind(this));R.fail(function(m){L.error("Failed to add bookmark",m,"sap.ushell.ui.footerbar.AddBookmarkButton");if(sap.ushell.Container){sap.ushell.Container.getService("Message").error(o.getText("fail_to_add_tile_msg"));}});this.oDialog.close();this.cb();};
A.prototype.setEnabled=function(e){var s="",p=true,o;if(sap.ushell.renderers&&sap.ushell.renderers.fiori2){o=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration();if(o.appState){s=o.appState;}if(o.enablePersonalization!==undefined){p=o.enablePersonalization;}}if(s==="headerless"||s==="standalone"||s==="embedded"||s==="merged"||!p){e=false;}if(!sap.ushell.Container){if(this.getEnabled()){L.warning("Disabling 'Save as Tile' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.AddBookmarkButton");}e=false;}B.prototype.setEnabled.call(this,e);if(!e){this.addStyleClass("sapUshellAddBookmarkButton");}};
return A;});
sap.ui.predefine('sap/ushell/ui/footerbar/AddBookmarkButtonRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var A=R.extend(B);return A;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/ContactSupportButton',["sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/ActionItem","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/Device","./ContactSupportButtonRenderer"],function(r,A,a,q,L,D){"use strict";
var C=a.extend("sap.ushell.ui.footerbar.ContactSupportButton",{metadata:{library:"sap.ushell"}});
C.prototype.init=function(){if(a.prototype.init){a.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://email");this.setText(r.i18n.getText("contactSupportBtn"));this.attachPress(this.showContactSupportDialog);this.setEnabled();};
C.prototype.showContactSupportDialog=function(){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout","sap/m/TextArea","sap/m/Link","sap/m/Label","sap/m/Text","sap/m/Dialog","sap/m/Button","sap/ushell/UserActivityLog"],function(S,b,T,c,d,e,f,B,U){var g="",u="",h="",i=[],o,j;j=function(){this.oDialog.removeContent(this.oBottomSimpleForm.getId());this.oBottomSimpleForm.destroy();if(this.oClientContext.navigationData.applicationInformation){g=this.oClientContext.navigationData.applicationInformation.applicationType;u=this.oClientContext.navigationData.applicationInformation.url;h=this.oClientContext.navigationData.applicationInformation.additionalInformation;}i.push(new e({text:this.translationBundle.getText("loginDetails")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));i.push(new d({text:this.translationBundle.getText("userFld")}));i.push(new e({text:this.oClientContext.userDetails.fullName||""}));i.push(new d({text:this.translationBundle.getText("serverFld")}));i.push(new e({text:window.location.host}));if(this.oClientContext.userDetails.eMail&&this.oClientContext.userDetails.eMail!==""){i.push(new d({text:this.translationBundle.getText("eMailFld")}));i.push(new e({text:this.oClientContext.userDetails.eMail||""}));}i.push(new d({text:this.translationBundle.getText("languageFld")}));i.push(new e({text:this.oClientContext.userDetails.Language||""}));if(this.oClientContext.shellState==="app"||this.oClientContext.shellState==="standalone"){i.push(new e({text:""}));i.push(new e({text:this.translationBundle.getText("navigationDataFld")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));i.push(new d({text:this.translationBundle.getText("hashFld")}));i.push(new e({text:this.oClientContext.navigationData.navigationHash||""}));i.push(new e({text:""}));i.push(new e({text:this.translationBundle.getText("applicationInformationFld")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));i.push(new d({text:this.translationBundle.getText("applicationTypeFld")}));i.push(new e({text:g}));i.push(new d({text:this.translationBundle.getText("urlFld")}));i.push(new e({text:u}));i.push(new d({text:this.translationBundle.getText("additionalInfoFld")}));i.push(new e({text:h}));}this.oBottomSimpleForm=new S("technicalInfoBox",{layout:b.ResponsiveLayout,content:i}).addStyleClass("sapUshellTechnicalInfoBox");if(D.os.ios&&D.system.phone){this.oBottomSimpleForm.addStyleClass("sapUshellContactSupportFixWidth");}o=this.oBottomSimpleForm.onAfterRendering;this.oBottomSimpleForm.onAfterRendering=function(){o.apply(this,arguments);var n=q(this.getDomRef());n.attr("tabIndex",0);setTimeout(function(){this.focus();}.bind(n),700);};this.oDialog.addContent(this.oBottomSimpleForm);}.bind(this);this._embedLoginDetailsInBottomForm=j;this.translationBundle=r.i18n;this.oClientContext=U.getMessageInfo();this.oLink=new c({text:this.translationBundle.getText("technicalDataLink")});this.oBottomSimpleForm=new S("bottomForm",{editable:false,content:[this.oLink]});this.sendButton=new B("contactSupportSendBtn",{text:this.translationBundle.getText("sendBtn"),enabled:false,press:function(){var s=sap.ushell.Container.getService("SupportTicket"),t=this.oTextArea.getValue(),k={text:t,clientContext:this.oClientContext},p=s.createTicket(k);p.done(function(){sap.ushell.Container.getService("Message").info(this.translationBundle.getText("supportTicketCreationSuccess"));}.bind(this));p.fail(function(){sap.ushell.Container.getService("Message").error(this.translationBundle.getText("supportTicketCreationFailed"));}.bind(this));this.oDialog.close();}.bind(this)});this.cancelButton=new B("contactSupportCancelBtn",{text:this.translationBundle.getText("cancelBtn"),press:function(){this.oDialog.close();}.bind(this)});this.oTextArea=new T("textArea",{rows:7,liveChange:function(){if(/\S/.test(this.oTextArea.getValue())){this.sendButton.setEnabled(true);}else{this.sendButton.setEnabled(false);this.oTextArea.setValue("");}}.bind(this)});this.oTopSimpleForm=new S("topForm",{editable:false,content:[this.oTextArea],layout:b.ResponsiveGridLayout});this.oDialog=new f({id:"ContactSupportDialog",title:this.translationBundle.getText("contactSupportBtn"),contentWidth:"29.6rem",leftButton:this.sendButton,rightButton:this.cancelButton,initialFocus:"textArea",afterOpen:function(){q("#textArea").on("focusout",function(){window.scrollTo(0,0);});},afterClose:function(){this.oDialog.destroy();if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}}.bind(this)}).addStyleClass("sapUshellContactSupportDialog");this.oTextArea.setPlaceholder(this.translationBundle.getText("txtAreaPlaceHolderHeader"));this.oLink.attachPress(j.bind(this));this.oDialog.addCustomData(new A({key:"aria-label",value:this.translationBundle.getText("ContactSupportArialLabel"),writeToDom:true}));this.oDialog.addContent(this.oTopSimpleForm);this.oDialog.addContent(this.oBottomSimpleForm);this.oDialog.open();}.bind(this));};
C.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){L.warning("Disabling 'Contact Support' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.ContactSupportButton");}e=false;}a.prototype.setEnabled.call(this,e);};
return C;});
sap.ui.predefine('sap/ushell/ui/footerbar/ContactSupportButtonRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var C=R.extend(B);return C;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/EndUserFeedback',["sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/ActionItem","sap/ushell/services/AppConfiguration","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/core/IconPool","sap/ui/core/Icon","./EndUserFeedbackRenderer"],function(r,A,a,b,q,L,u,J,D,I,c){"use strict";
var E=a.extend("sap.ushell.ui.footerbar.EndUserFeedback",{metadata:{library:"sap.ushell",properties:{showAnonymous:{type:"boolean",group:"Misc",defaultValue:true},anonymousByDefault:{type:"boolean",group:"Misc",defaultValue:true},showLegalAgreement:{type:"boolean",group:"Misc",defaultValue:true},showCustomUIContent:{type:"boolean",group:"Misc",defaultValue:true},feedbackDialogTitle:{type:"string",group:"Misc",defaultValue:null},textAreaPlaceholder:{type:"string",group:"Misc",defaultValue:null}},aggregations:{customUIContent:{type:"sap.ui.core.Control",multiple:true,singularName:"customUIContent"}}}});
E.prototype.init=function(){if(a.prototype.init){a.prototype.init.apply(this,arguments);}var d=sap.ushell.Container.getUser(),f=u.getFormFactor();this.oUserDetails={userId:d.getId(),eMail:d.getEmail()};this.translationBundle=r.i18n;this.appConfiguration=b;this.oEndUserFeedbackModel=new J();this.oEndUserFeedbackModel.setData({feedbackViewTitle:this.translationBundle.getText("userFeedback_title"),legalAgreementViewTitle:this.translationBundle.getText("userFeedbackLegal_title"),textAreaPlaceholderText:this.translationBundle.getText("feedbackPlaceHolderHeader"),presentationStates:{showAnonymous:this.getShowAnonymous(),showLegalAgreement:this.getShowLegalAgreement(),showCustomUIContent:this.getShowCustomUIContent()},clientContext:{userDetails:q.extend(true,{},this.oUserDetails),navigationData:{formFactor:f,applicationInformation:{},navigationHash:null}},isAnonymous:this.getAnonymousByDefault(),applicationIconPath:"",leftButton:{feedbackView:this.translationBundle.getText("sendBtn"),legalAgreementView:this.translationBundle.getText("approveBtn")},rightButton:{feedbackView:this.translationBundle.getText("cancelBtn"),legalAgreementView:this.translationBundle.getText("declineBtn")},states:{isLegalAgreementChecked:false,isRatingSelected:false,isInFeedbackView:true},technicalLink:{state:0,title:[this.translationBundle.getText("technicalDataLink"),this.translationBundle.getText("technicalDataLinkHide")]},textArea:{inputText:""},contextText:"",ratingButtons:[{text:r.i18n.getText("ratingExcellentText"),color:"sapUshellRatingLabelFeedbackPositiveText",iconSymbol:"sap-icon://BusinessSuiteInAppSymbols/icon-face-very-happy",id:"rateBtn1",index:1},{text:r.i18n.getText("ratingGoodText"),color:"sapUshellRatingLabelFeedbackPositiveText",iconSymbol:"sap-icon://BusinessSuiteInAppSymbols/icon-face-happy",id:"rateBtn2",index:2},{text:r.i18n.getText("ratingAverageText"),color:"sapUshellRatingLabelFeedbackNeutralText",iconSymbol:"sap-icon://BusinessSuiteInAppSymbols/icon-face-neutral",id:"rateBtn3",index:3},{text:r.i18n.getText("ratingPoorText"),color:"sapUshellRatingLabelFeedbackCriticalText",iconSymbol:"sap-icon://BusinessSuiteInAppSymbols/icon-face-bad",id:"rateBtn4",index:4},{text:r.i18n.getText("ratingVeyPoorText"),color:"sapUshellRatingLabelFeedbackNegativeText",iconSymbol:"sap-icon://BusinessSuiteInAppSymbols/icon-face-very-bad",id:"rateBtn5",index:5}],selectedRating:{text:"",color:"",index:0}});this.setIcon("sap-icon://marketing-campaign");this.setText(r.i18n.getText("endUserFeedbackBtn"));this.attachPress(this.ShowEndUserFeedbackDialog);this.setEnabled();};
E.prototype.ShowEndUserFeedbackDialog=function(){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout","sap/ui/layout/HorizontalLayout","sap/ui/layout/VerticalLayout","sap/m/TextArea","sap/m/Link","sap/m/Label","sap/m/Text","sap/m/Dialog","sap/m/Button","sap/m/Image","sap/m/Bar","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/CheckBox"],function(S,d,H,V,T,e,f,g,h,B,i,j,k,l,C){var m,n,s,o,p,M,t,v;this.oEndUserFeedbackService=sap.ushell.Container.getService("EndUserFeedback");m=function(){var F=[],x=this.oEndUserFeedbackModel.getProperty("/clientContext/navigationData/formFactor"),U=this.oEndUserFeedbackModel.getProperty("/clientContext/userDetails/userId"),y=this.oEndUserFeedbackModel.getProperty("/clientContext/userDetails/eMail"),z=this.oEndUserFeedbackModel.getProperty("/clientContext/navigationData/applicationInformation/url"),G=this.oEndUserFeedbackModel.getProperty("/clientContext/navigationData/applicationInformation/applicationType"),K=this.oEndUserFeedbackModel.getProperty("/clientContext/navigationData/applicationInformation/additionalInformation"),N=this.oEndUserFeedbackModel.getProperty("/clientContext/navigationData/navigationHash"),O=this.getModel().getProperty("/currentState/stateName"),P=!(O==="home"||O==="catalog");F.push(new g({text:this.translationBundle.getText("loginDetails")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));F.push(U?new f({text:this.translationBundle.getText("userFld")}):null);F.push(U?new g("technicalInfoUserIdTxt",{text:"{/clientContext/userDetails/userId}"}):null);F.push(y?new f({text:this.translationBundle.getText("eMailFld")}):null);F.push(y?new g({text:"{/clientContext/userDetails/eMail}"}):null);F.push(x?new f({text:this.translationBundle.getText("formFactorFld")}):null);F.push(x?new g({text:"{/clientContext/navigationData/formFactor}"}):null);F.push(new g({text:""}));F.push(new g({text:this.translationBundle.getText(this.currentApp?"applicationInformationFld":"feedbackHeaderText")}).addStyleClass("sapUshellEndUserFeedbackHeaderInfoText").addStyleClass("sapUshellEndUserFeedbackInfoTextSpacing"));F.push(z&&P?new f({text:this.translationBundle.getText("urlFld")}):null);F.push(z&&P?new g({text:"{/clientContext/navigationData/applicationInformation/url}"}):null);F.push(G?new f({text:this.translationBundle.getText("applicationTypeFld")}):null);F.push(G?new g({text:"{/clientContext/navigationData/applicationInformation/applicationType}"}):null);F.push(K?new f({text:this.translationBundle.getText("additionalInfoFld")}):null);F.push(K?new g({text:"{/clientContext/navigationData/applicationInformation/additionalInformation}"}):null);F.push(N&&P?new f({text:this.translationBundle.getText("hashFld")}):null);F.push(N&&P?new g({text:"{/clientContext/navigationData/navigationHash}"}):null);return F.filter(Boolean);}.bind(this);n=function(){this.oTechnicalInfoBox=new S("feedbackTechnicalInfoBox",{layout:d.ResponsiveLayout,content:m()});if(D.os.ios&&D.system.phone){this.oTechnicalInfoBox.addStyleClass("sapUshellContactSupportFixWidth");}var x=this.oTechnicalInfoBox.onAfterRendering;this.oTechnicalInfoBox.onAfterRendering=function(){x.apply(this,arguments);var y=q(this.getDomRef());y.attr("tabIndex",0);setTimeout(function(){this.focus();}.bind(y),700);};return new H("technicalInfoBoxLayout",{visible:{path:"/technicalLink/state",formatter:function(y){return y===1;}},content:[this.oTechnicalInfoBox]});}.bind(this);p=function(){this.oTechnicalInfoBox.destroyContent();this.oTechnicalInfoBox.removeAllContent();var x=m(),y;for(y in x){this.oTechnicalInfoBox.addContent(x[y]);}this.oRatingButtons.setSelectedButton("none");}.bind(this);M=sap.ui.require.toUrl("sap/ushell");t=M+"/themes/base/img/launchpadDefaultIcon.jpg";v=this.oEndUserFeedbackModel.getProperty("/clientContext/navigationData/formFactor")==="desktop";this.updateModelContext();if(this.oDialog){p();this.oDialog.open();return;}this.oLegalAgreementInfoLayout=null;this.oBackButton=new B("endUserFeedbackBackBtn",{visible:{path:"/states/isInFeedbackView",formatter:function(x){return!x;}},icon:I.getIconURI("nav-back"),press:function(){this.oEndUserFeedbackModel.setProperty("/states/isInFeedbackView",true);}.bind(this),tooltip:r.i18n.getText("feedbackGoBackBtn_tooltip")});this.oPopoverTitle=new g("PopoverTitle",{text:{parts:[{path:"/states/isInFeedbackView"},{path:"/feedbackViewTitle"}],formatter:function(x){return this.oEndUserFeedbackModel.getProperty(x?"/feedbackViewTitle":"/legalAgreementViewTitle");}.bind(this)}});this.oHeadBar=new j({contentLeft:[this.oBackButton],contentMiddle:[this.oPopoverTitle]});this.oLogoImg=new i("sapFeedbackLogo",{src:t,width:"4.5rem",height:"4.5rem",visible:{path:"/applicationIconPath",formatter:function(x){return!x;}}});this.oAppIcon=new c("sapFeedbackAppIcon",{src:"{/applicationIconPath}",width:"4.5rem",height:"4.5rem",visible:{path:"/applicationIconPath",formatter:function(x){return!!x;}}}).addStyleClass("sapUshellFeedbackAppIcon");this.oContextName=new g("contextName",{text:"{/contextText}"});this.oContextLayout=new H("contextLayout",{allowWrapping:true,content:[this.oLogoImg,this.oAppIcon,this.oContextName]});this.oRatingLabel=new f("ratingLabel",{required:true,text:r.i18n.getText("ratingLabelText")});this.oRatingSelectionText=new g("ratingSelectionText",{text:{path:"/selectedRating",formatter:function(x){if(this.lastSelectedColor){this.removeStyleClass(this.lastSelectedColor);}if(x.color){this.addStyleClass(x.color);}this.lastSelectedColor=x.color;return x.text;}}});this.oRatingButtonTemplate=new l({icon:"{iconSymbol}",height:"100%",width:"20%",tooltip:"{text}"});this.oRatingButtonTemplate.addCustomData(new A({key:"aria-label",value:"{text}",writeToDom:true}));this.oRatingButtons=new k("ratingButton",{items:{path:"/ratingButtons",template:this.oRatingButtonTemplate},selectionChange:function(x){var P=x.getParameters().item.getBindingContext().getPath(),y=this.oEndUserFeedbackModel.getProperty(P);this.oEndUserFeedbackModel.setProperty("/selectedRating",{text:y.text,color:y.color,index:y.index});this.oEndUserFeedbackModel.setProperty("/states/isRatingSelected",true);}.bind(this),width:"100%"});this.oRatingButtons.setSelectedButton("none");this.oRatingButtons.addAriaLabelledBy("ratingLabel");this.oRatingButtons.addCustomData(new A({key:"aria-required",value:"true",writeToDom:true}));if(v){this.oRatingIndicationLayout=new H("ratingIndicationLayout",{content:[this.oRatingLabel,this.oRatingSelectionText]});}else{this.oRatingIndicationLayout=new V("ratingIndicationLayoutMob",{content:[this.oRatingLabel,this.oRatingSelectionText]});}this.oRatingLayout=new V("ratingLayout",{width:"100%",content:[this.oRatingIndicationLayout,this.oRatingButtons]});this.oAnonymousCheckbox=new C("anonymousCheckbox",{name:"anonymousCheckbox",visible:"{/presentationStates/showAnonymous}",text:r.i18n.getText("feedbackSendAnonymousText"),selected:!this.oEndUserFeedbackModel.getProperty("/isAnonymous"),select:function(x){var y=x.getParameter("selected");this._handleAnonymousSelection(!y);}.bind(this)});var w=(!this.oEndUserFeedbackModel.getProperty("/presentationStates/showAnonymous")||this.oEndUserFeedbackModel.getProperty("/isAnonymous"));this._handleAnonymousSelection(w);this.oLegalAgrementCheckbox=new C("legalAgreement",{name:"legalAgreement",visible:"{/presentationStates/showLegalAgreement}",selected:"{/states/isLegalAgreementChecked}",text:this.translationBundle.getText("agreementAcceptanceText")});this.oLegalAgreeementLink=new e("legalAgreementLink",{text:this.translationBundle.getText("legalAgreementLinkText"),visible:"{/presentationStates/showLegalAgreement}",press:function(){var P=this.oEndUserFeedbackService.getLegalText();P.done(s.bind(this));}.bind(this)});this.aCustomUIContent=q.extend([],this.getCustomUIContent());this.oCustomUILayout=new V("customUILayout",{visible:{path:"/presentationStates/showCustomUIContent",formatter:function(x){return!(x&&this.aCustomUIContent.length);}.bind(this)},content:this.getCustomUIContent(),width:"100%"});this.oLegalLayout=new V("legalLayout",{content:[this.oAnonymousCheckbox,this.oLegalAgrementCheckbox,this.oLegalAgreeementLink]});this.oTechnicalDataLink=new e("technicalDataLink",{text:{path:"/technicalLink/state",formatter:function(x){return this.getModel().getProperty("/technicalLink/title/"+x);}},press:function(){var _=this.oEndUserFeedbackModel.getProperty("/technicalLink/state");this.oEndUserFeedbackModel.setProperty("/technicalLink/state",Math.abs(_-1));this.oDialog.rerender();}.bind(this)});this.oTechnicalDataLayout=new H("technicalDataLayout",{content:[this.oTechnicalDataLink]});this.leftButton=new B("EndUserFeedbackLeftBtn",{text:{path:"/states/isInFeedbackView",formatter:function(x){return this.getModel().getProperty("/leftButton/"+(x?"feedbackView":"legalAgreementView"));}},enabled:{parts:[{path:"/states/isInFeedbackView"},{path:"/states/isLegalAgreementChecked"},{path:"/states/isRatingSelected"},{path:"/presentationStates/showLegalAgreement"}],formatter:function(x,y,z,F){return!x||(z&&(y||!F));}},press:function(){var x=this.oEndUserFeedbackModel.getProperty("/states/isInFeedbackView");if(x){var F={feedbackText:this.oEndUserFeedbackModel.getProperty("/textArea/inputText"),ratings:[{questionId:"Q10",value:this.oEndUserFeedbackModel.getProperty("/selectedRating/index")}],clientContext:this.oEndUserFeedbackModel.getProperty("/clientContext"),isAnonymous:this.oEndUserFeedbackModel.getProperty("/isAnonymous")},y=this.oEndUserFeedbackService.sendFeedback(F);y.done(function(){sap.ushell.Container.getService("Message").info(this.translationBundle.getText("feedbackSendToastTxt"));}.bind(this));y.fail(function(){sap.ushell.Container.getService("Message").error(this.translationBundle.getText("feedbackFailedToastTxt"));}.bind(this));this.oDialog.close();}else{this.oEndUserFeedbackModel.setProperty("/states/isInFeedbackView",true);this.oEndUserFeedbackModel.setProperty("/states/isLegalAgreementChecked",true);}}.bind(this)});this.rightButton=new B("EndUserFeedbackRightBtn",{text:{path:"/states/isInFeedbackView",formatter:function(x){return this.getModel().getProperty("/rightButton/"+(x?"feedbackView":"legalAgreementView"));}},press:function(){var x=this.oEndUserFeedbackModel.getProperty("/states/isInFeedbackView");if(x){this.oDialog.close();}else{this.oEndUserFeedbackModel.setProperty("/states/isInFeedbackView",true);this.oEndUserFeedbackModel.setProperty("/states/isLegalAgreementChecked",false);}}.bind(this)});this.oTextArea=new T("feedbackTextArea",{rows:6,value:"{/textArea/inputText}",placeholder:"{/textAreaPlaceholderText}"});this.oDialog=new h({id:"UserFeedbackDialog",contentWidth:"25rem",leftButton:this.leftButton,rightButton:this.rightButton,stretch:D.system.phone,initialFocus:"textArea",afterOpen:function(){q("#textArea").on("focusout",function(){window.scrollTo(0,0);});},afterClose:function(){if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}}}).addStyleClass("sapUshellEndUserFeedbackDialog");this.oDialog.setModel(this.oEndUserFeedbackModel);this.oDialog.setCustomHeader(this.oHeadBar);this.oDialog.addCustomData(new A({key:"aria-label",value:this.translationBundle.getText("endUserFeedbackAreaLabel"),writeToDom:true}));this.oTechnicalInfoBoxLayout=n();this.oFeedbackLayout=new V("feedbackLayout",{visible:"{/states/isInFeedbackView}",content:[this.oContextLayout,this.oRatingLayout,this.oTextArea,this.oTechnicalDataLayout,this.oTechnicalInfoBoxLayout,this.oLegalLayout,this.oCustomUILayout]}).addStyleClass("sapUshellFeedbackLayout");this.oMainLayout=new V("mainLayout",{editable:false,content:[this.oFeedbackLayout]});this.oDialog.addContent(this.oMainLayout);this.oDialog.open();s=function(x){this.oEndUserFeedbackModel.setProperty("/states/isInFeedbackView",false);if(!this.oLegalAgreementInfoLayout){o(x);}};o=function(x){this.oLegalText=new T("legalText",{cols:50,rows:22});this.oLegalText.setValue([x]);this.oLegalText.setEditable(false);var y=this.oLegalText.onAfterRendering;this.oLegalText.onAfterRendering=function(){if(y){y.apply(this,arguments);}var z=q(this.getDomRef());z.find("textarea").attr("tabindex","0");};this.oLegalAgreementInfoLayout=new V("legalAgreementInfoLayout",{visible:{path:"/states/isInFeedbackView",formatter:function(z){return!z;}},content:[this.oLegalText]});this.oMainLayout.addContent(this.oLegalAgreementInfoLayout);}.bind(this);}.bind(this));};
E.prototype._handleAnonymousSelection=function(i){var d=this.translationBundle.getText("feedbackAnonymousTechFld");this.oEndUserFeedbackModel.setProperty("/isAnonymous",i);this.oEndUserFeedbackModel.setProperty("/clientContext/userDetails/eMail",i?d:this.oUserDetails.eMail);this.oEndUserFeedbackModel.setProperty("/clientContext/userDetails/userId",i?d:this.oUserDetails.userId);};
E.prototype.addCustomUIContent=function(C){var i=C&&C.getMetadata&&C.getMetadata().getStereotype&&C.getMetadata().getStereotype()==="control";if(i){if(this.getShowCustomUIContent()){this.oEndUserFeedbackModel.setProperty("/presentationStates/showCustomUIContent",true);}this.addAggregation("customUIContent",C);}};
E.prototype.setShowAnonymous=function(v){if(typeof v==="boolean"){this.oEndUserFeedbackModel.setProperty("/presentationStates/showAnonymous",v);this.setProperty("showAnonymous",v,true);}};
E.prototype.setAnonymousByDefault=function(v){if(typeof v==="boolean"){this.oEndUserFeedbackModel.setProperty("/isAnonymous",v);this.setProperty("anonymousByDefault",v,true);}};
E.prototype.setShowLegalAgreement=function(v){if(typeof v==="boolean"){this.oEndUserFeedbackModel.setProperty("/presentationStates/showLegalAgreement",v);this.setProperty("showLegalAgreement",v,true);}};
E.prototype.setShowCustomUIContent=function(v){if(typeof v==="boolean"){this.oEndUserFeedbackModel.setProperty("/presentationStates/showCustomUIContent",v);this.setProperty("showCustomUIContent",v,true);}};
E.prototype.setFeedbackDialogTitle=function(v){if(typeof v==="string"){this.oEndUserFeedbackModel.setProperty("/feedbackViewTitle",v);this.setProperty("feedbackDialogTitle",v,true);}};
E.prototype.setTextAreaPlaceholder=function(v){if(typeof v==="string"){this.oEndUserFeedbackModel.setProperty("/textAreaPlaceholderText",v);this.setProperty("textAreaPlaceholder",v,true);}};
E.prototype.updateModelContext=function(){var U=sap.ushell.Container.getService("URLParsing"),h,p,i,d,s,e;h=U.getShellHash(window.location);p=U.parseShellHash(h);i=(p!==undefined)?p.semanticObject+"-"+p.action:"";d=this.getModel().getProperty("/currentState/stateName");if(d==="home"||d==="catalog"){s=this.translationBundle.getText(d+"_title");}this.currentApp=this.appConfiguration.getCurrentApplication();this.bHasAppName=(this.currentApp&&this.appConfiguration.getMetadata(this.currentApp)&&this.appConfiguration.getMetadata(this.currentApp).title);this.sAppIconPath=(this.currentApp&&this.appConfiguration.getMetadata(this.currentApp)&&this.appConfiguration.getMetadata(this.currentApp).icon);this.oEndUserFeedbackModel.setProperty("/contextText",this.bHasAppName?this.appConfiguration.getMetadata(this.currentApp).title:this.translationBundle.getText("feedbackHeaderText"));e=null;if(this.currentApp&&this.currentApp.url){e=this.currentApp.url.split("?")[0];}else if(d){e=this.translationBundle.getText("flp_page_name");}this.oEndUserFeedbackModel.setProperty("/clientContext/navigationData/applicationInformation",{url:e,additionalInformation:(this.currentApp&&this.currentApp.additionalInformation)?this.currentApp.additionalInformation:null,applicationType:(this.currentApp&&this.currentApp.applicationType)?this.currentApp.applicationType:null});this.oEndUserFeedbackModel.setProperty("/clientContext/navigationData/navigationHash",s||i);this.oEndUserFeedbackModel.setProperty("/selectedRating",{text:"",color:"",index:0});this.oEndUserFeedbackModel.setProperty("/states/isRatingSelected",false);this.oEndUserFeedbackModel.setProperty("/states/isLegalAgreementChecked",false);this.oEndUserFeedbackModel.setProperty("/technicalLink/state",0);this.oEndUserFeedbackModel.setProperty("/textArea/inputText","");this.oEndUserFeedbackModel.setProperty("/applicationIconPath",this.sAppIconPath);this._handleAnonymousSelection(this.oEndUserFeedbackModel.getProperty("/isAnonymous"));};
E.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){L.warning("Disabling 'End User Feedback' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.EndUserFeedback");}e=false;}a.prototype.setEnabled.call(this,e);};
return E;});
sap.ui.predefine('sap/ushell/ui/footerbar/EndUserFeedbackRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var E=R.extend(B);return E;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/HideGroupsButton',['sap/ushell/library','sap/ushell/ui/launchpad/ActionItem','./HideGroupsButtonRenderer'],function(l,A){"use strict";
var H=A.extend("sap.ushell.ui.footerbar.HideGroupsButton",{metadata:{library:"sap.ushell",events:{save:{}}}});
return H;});
sap.ui.predefine('sap/ushell/ui/footerbar/HideGroupsButtonRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var H=R.extend(B);return H;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/JamDiscussButton',["sap/m/Button","sap/ushell/resources","sap/base/Log","./JamDiscussButtonRenderer"],function(B,r,L){"use strict";
var J=B.extend("sap.ushell.ui.footerbar.JamDiscussButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},jamData:{type:"object",group:"Misc",defaultValue:null}}}});
J.prototype.init=function(){var t=this;this.setEnabled();this.setIcon("sap-icon://discussion-2");this.setText(r.i18n.getText("discussBtn"));this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}this.showDiscussDialog(t.getAfterPressHandler());});if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
J.prototype.showDiscussDialog=function(c){if(!this.discussComponent){this.discussComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.feed.dialog"});}this.discussComponent.setSettings(this.getJamData());this.discussComponent.open();if(c){c();}};
J.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){L.warning("Disabling JamDiscussButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamDiscussButton");}e=false;}else{var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(this.getEnabled()){L.info("Disabling JamDiscussButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamDiscussButton");}e=false;this.setVisible(false);}}B.prototype.setEnabled.call(this,e);};
return J;});
sap.ui.predefine('sap/ushell/ui/footerbar/JamDiscussButtonRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var J=R.extend(B);return J;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/JamShareButton',["sap/m/Button","sap/ushell/library","sap/ushell/resources","sap/collaboration/components/fiori/sharing/dialog/Component","sap/base/Log","./JamShareButtonRenderer"],function(B,l,r,C,L){"use strict";
var J=B.extend("sap.ushell.ui.footerbar.JamShareButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},jamData:{type:"object",group:"Misc",defaultValue:null}}}});
J.prototype.init=function(){var t=this;this.setEnabled();this.setIcon("sap-icon://share-2");this.setText(r.i18n.getText("shareBtn"));this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}this.showShareDialog(t.getAfterPressHandler());});if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
J.prototype.showShareDialog=function(c){var p,t=this;function o(){t.shareComponent.setSettings(t.getJamData());t.shareComponent.open();if(c){c();}}if(!this.shareComponent){this.shareComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog"});}if(sap.ushell.Container&&sap.ushell.Container.runningInIframe&&sap.ushell.Container.runningInIframe()){p=this.adjustFLPUrl(this.getJamData());p.then(function(){o();},function(e){L.error("Could not retrieve FLP URL",e,"sap.ushell.ui.footerbar.JamShareButton");});}else{o();}};
J.prototype.exit=function(){if(this.shareComponent){this.shareComponent.destroy();}if(B.prototype.exit){B.prototype.exit.apply(this,arguments);}};
J.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){L.warning("Disabling JamShareButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamShareButton");}e=false;}else{var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(this.getEnabled()){L.info("Disabling JamShareButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamShareButton");}e=false;this.setVisible(false);}}B.prototype.setEnabled.call(this,e);};
J.prototype.adjustFLPUrl=function(j){return new Promise(function(R,f){if(j&&j.object&&j.object.id&&typeof j.object.id==="string"&&j.object.id===document.URL){sap.ushell.Container.getFLPUrl(true).then(function(u){j.object.id=u;R();},function(e){f(e);});}else{R();}});};
return J;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/JamShareButtonRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var J=R.extend(B);return J;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/LogoutButton',["sap/ushell/resources","sap/ushell/ui/launchpad/ActionItem","sap/base/Log","sap/ushell/ui/launchpad/LoadingDialog","sap/m/MessageBox","sap/ui/core/ElementMetadata","./LogoutButtonRenderer"],function(r,A,L,a,M,E){"use strict";var b=M.Action;var I=M.Icon;
var c=A.extend("sap.ushell.ui.footerbar.LogoutButton",{metadata:{library:"sap.ushell"}});
c.prototype.init=function(){if(A.prototype.init){A.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://log");this.setTooltip(r.i18n.getText("signoutBtn_tooltip"));this.setText(r.i18n.getText("signoutBtn_title"));this.attachPress(this.logout);this.setEnabled();};
c.prototype.logout=function(){sap.ui.require(["sap/m/MessageBox"],function(M){var s=true,i=false,l,o=new a({text:""});sap.ushell.Container.getGlobalDirty().done(function(d){s=false;if(i===true){o.exit();o=new a({text:""});}var _=function(d){var l={},R=r.i18n;if(d===sap.ushell.Container.DirtyState.DIRTY){l.message=R.getText("unsaved_data_warning_popup_message");l.icon=I.WARNING;l.messageTitle=R.getText("unsaved_data_warning_popup_title");}else{l.message=R.getText("signoutConfirmationMsg");l.icon=I.QUESTION;l.messageTitle=R.getText("signoutMsgTitle");}return l;};l=_(d);M.show(l.message,l.icon,l.messageTitle,[b.OK,b.CANCEL],function(e){if(e===b.OK){o.openLoadingScreen();o.showAppInfo(r.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.logout();}},E.uid("confirm"));});if(s===true){o.openLoadingScreen();i=true;}});};
c.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){L.warning("Disabling 'Logout' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.LogoutButton");}e=false;}A.prototype.setEnabled.call(this,e);};
return c;});
sap.ui.predefine('sap/ushell/ui/footerbar/LogoutButtonRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var L=R.extend(B);return L;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/SaveAsTile.controller',["sap/ushell/services/AppConfiguration","sap/ushell/Config","sap/ui/thirdparty/datajs","sap/base/util/isEmptyObject","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ushell/resources"],function(A,C,O,a,L,q,J,r){"use strict";sap.ui.controller("sap.ushell.ui.footerbar.SaveAsTile",{onExit:function(){var v=this.getView();var t=v.getTileView();t.destroy();},onInit:function(){var b=A.getMetadata();this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oView=this.getView();this.appData=this.oView.viewData.appData||{};if(!a(this.appData)){this.oModel=new J({sizeBehavior:C.last("/core/home/sizeBehavior"),showGroupSelection:this.appData.showGroupSelection!==false,showInfo:this.appData.showInfo!==false,showIcon:this.appData.showIcon!==false,showPreview:this.appData.showPreview!==false,title:this.appData.title?this.appData.title.substring(0,256):"",subtitle:this.appData.subtitle?this.appData.subtitle.substring(0,256):"",numberValue:"",info:this.appData.info?this.appData.info.substring(0,256):"",icon:this.appData.icon||b.icon,numberUnit:this.appData.numberUnit,keywords:this.appData.keywords||"",groups:[]});this.oView.setModel(this.oModel);}},calcTileDataFromServiceUrl:function(s){var t=this;O.read({requestUri:s},function(R){if(typeof R==="string"){R={number:R};}t.oModel.setProperty("/numberValue",R.number);var k=["infoState","stateArrow","numberState","numberDigits","numberFactor","numberUnit"];for(var i=0;i<k.length;i++){var b=k[i];if(R[b]){t.oModel.setProperty("/"+b,R[b]);}}},function(e){L.error("sap.ushell.ui.footerbar.SaveAsTile",e);},{read:function(b){b.data=JSON.parse(b.body).d;}});},loadPersonalizedGroups:function(){var g=this.oPageBuilderService.getGroupsForBookmarks(),t=this,d=q.Deferred(),m=t.oView.getModel();g.done(function(G){m.setProperty("/groups",G);m.setProperty("/groups/length",G.length);d.resolve();});return d;},getLocalizedText:function(m,p){return p?r.i18n.getText(m,p):r.i18n.getText(m);}});});
sap.ui.predefine('sap/ushell/ui/footerbar/SaveAsTile.view',["sap/ui/thirdparty/jquery","sap/ui/core/ListItem","sap/m/Select","sap/m/library","sap/m/FlexBox","sap/ui/core/HTML","sap/m/Label","sap/ushell/ui/launchpad/Tile","sap/m/NumericContent","sap/m/TileContent","sap/m/GenericTile","sap/ui/model/BindingMode","sap/m/Input","sap/ushell/resources"],function(q,L,S,m,F,H,a,T,N,b,G,B,I,r){"use strict";var c=m.FlexRendertype;var d=m.FlexJustifyContent;var e=m.FlexAlignItems;sap.ui.jsview("sap.ushell.ui.footerbar.SaveAsTile",{getControllerName:function(){return"sap.ushell.ui.footerbar.SaveAsTile";},createContent:function(C){this.oResourceBundle=r.i18n;this.viewData=this.getViewData()||{};this.appData=this.viewData.appData||{};this.oTitleInput=new I("bookmarkTitleInput",{tooltip:this.oResourceBundle.getText("bookmarkDialogoTitle_tooltip"),value:{path:"/title",mode:B.TwoWay}}).addStyleClass("sapUshellInputField");this.oTitleInput.addAriaLabelledBy("titleLbl");this.oSubTitleInput=new I("bookmarkSubTitleInput",{tooltip:this.oResourceBundle.getText("bookmarkDialogoSubTitle_tooltip"),value:{path:"/subtitle",mode:B.TwoWay}}).addStyleClass("sapUshellInputField");this.oSubTitleInput.addAriaLabelledBy("subtitleLbl");this.oInfoInput=new I("bookmarkInfoInput",{tooltip:this.oResourceBundle.getText("bookmarkDialogoDescription_tooltip"),value:{path:"/info",mode:B.TwoWay},visible:"{/showInfo}"}).addStyleClass("sapUshellInputField");this.oInfoInput.addAriaLabelledBy("infoLbl");var t={numberValue:"{/numberValue}",title:"{/title}",subtitle:"{/subtitle}",info:"{/info}",icon:"{/icon}",infoState:"{/infoState}",numberFactor:"{/numberFactor}",numberUnit:"{/numberUnit}",numberDigits:"{/numberDigits}",numberState:"{/numberState}",stateArrow:"{/stateArrow}",targetURL:"{/targetURL}",keywords:"{/keywords}",sizeBehavior:"{/sizeBehavior}"},p=function(n){var u=n;switch(n){case"Positive":u="Good";break;case"Negative":u="Critical";break;}return u;};var o,s;if(this.viewData.serviceUrl){o=new G({header:t.title,subheader:t.subtitle,sizeBehavior:t.sizeBehavior,size:"Auto",tileContent:[new b({size:"Auto",footer:t.info,unit:t.numberUnit,content:[new N({scale:t.numberFactor,value:t.numberValue,truncateValueTo:5,valueColor:p(t.numberState),indicator:t.stateArrow,icon:t.icon,width:"100%"})]})]});s=(typeof(this.viewData.serviceUrl)==="function")?this.viewData.serviceUrl():this.viewData.serviceUrl;C.calcTileDataFromServiceUrl(s);}else{o=new G({header:t.title,subheader:t.subtitle,sizeBehavior:t.sizeBehavior,size:"Auto",tileContent:[new b({size:"Auto",footer:t.info,content:new N({icon:t.icon,value:" ",width:"100%"})})]});}this.setTileView(o);var f=new T({"long":false,tileViews:[o],afterRendering:function(){var n=q(this.getDomRef()),u=n.find(".sapMGT");u.removeAttr("tabindex");}}).addStyleClass("sapUshellBookmarkFormPreviewTileMargin");var P=new H("previewBackgroundElement",{content:"<div class='sapUshellShellBG sapContrastPlus sapUiStrongBackgroundColor'></div>"});var h=new F("saveAsTileHBox",{items:[P,f],alignItems:e.Center,justifyContent:d.Center,renderType:c.Bare,visible:"{/showPreview}"}).addStyleClass("sapUshellShellBG").addStyleClass("sapUshellBookmarkFormPreviewBoxBottomMargin");this.oGroupsSelect=new S("groupsSelect",{tooltip:this.oResourceBundle.getText("bookmarkDialogoGroup_tooltip"),items:{path:"/groups",template:new L({text:"{title}"})},width:"100%",visible:{parts:["/showGroupSelection","/groups"],formatter:function(n,u){if(n&&!(u&&u.length)){this.oController.loadPersonalizedGroups();}return n;}.bind(this)}});this.oGroupsSelect.addAriaLabelledBy("groupLbl");var g=new a("previewLbl",{text:this.oResourceBundle.getText("previewFld"),labelFor:h,visible:"{/showPreview}"});var i=new a("titleLbl",{required:true,text:" "+this.oResourceBundle.getText("titleFld"),labelFor:this.oTitleInput}).setLabelFor("bookmarkTitleInput");var j=new a("subtitleLbl",{text:this.oResourceBundle.getText("subtitleFld"),labelFor:this.oSubTitleInput}).setLabelFor("bookmarkSubTitleInput");var k=new a("infoLbl",{text:this.oResourceBundle.getText("tileSettingsDialog_informationField"),labelFor:this.oInfoInput,visible:"{/showInfo}"}).setLabelFor("bookmarkInfoInput");var l=new a("groupLbl",{text:this.oResourceBundle.getText("GroupListItem_label"),labelFor:this.oGroupsSelect,visible:"{/showGroupSelection}"}).setLabelFor("groupsSelect");return[g,h,i,this.oTitleInput,j,this.oSubTitleInput,k,this.oInfoInput,l,this.oGroupsSelect];},getTitleInput:function(){return this.oTitleInput;},getTileView:function(){return this.tileView;},setTileView:function(t){this.tileView=t;},getBookmarkTileData:function(){var s;if(this.oGroupsSelect&&this.oGroupsSelect.getSelectedItem()){s=this.oGroupsSelect.getSelectedItem().getBindingContext().getObject();}var u;if(this.viewData.customUrl){if(typeof(this.viewData.customUrl)==="function"){u=this.viewData.customUrl();}else{u=this.viewData.customUrl;}}else{u=hasher.getHash()?("#"+hasher.getHash()):window.location.href;}return{title:this.oTitleInput.getValue()?this.oTitleInput.getValue().substring(0,256).trim():"",subtitle:this.oSubTitleInput.getValue()?this.oSubTitleInput.getValue().substring(0,256).trim():"",url:u,icon:this.getModel().getProperty("/icon"),info:this.oInfoInput.getValue()?this.oInfoInput.getValue().substring(0,256).trim():"",numberUnit:this.viewData.numberUnit,serviceUrl:typeof(this.viewData.serviceUrl)==="function"?this.viewData.serviceUrl():this.viewData.serviceUrl,serviceRefreshInterval:this.viewData.serviceRefreshInterval,group:s,keywords:this.viewData.keywords};}});});
sap.ui.predefine('sap/ushell/ui/footerbar/SendAsEmailButton',["sap/m/Button","sap/ushell/library","sap/ushell/resources","./SendAsEmailButtonRenderer","sap/ushell/services/_AppState/AppStatePersistencyMethod"],function(B,l,r,S,A){"use strict";
var a=B.extend("sap.ushell.ui.footerbar.SendAsEmailButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null}}}});
a.prototype.init=function(){var t=this;this.setIcon("sap-icon://email");this.setText(r.i18n.getText("sendEmailBtn"));this.setTooltip(r.i18n.getText("sendEmailBtn_tooltip"));this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}this.sendAsEmailPressed(t.getAfterPressHandler());});if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
a.prototype.sendAsEmailPressed=function(c){var R=sap.ushell.Container.getFLPUrl(true);var t=this;if(typeof R==="string"){t.setAppStateToPublic(R);t.sendEmail(R);}else{R.done(function(u){t.setAppStateToPublic(u);t.sendEmail(u);});}if(c){c();}};
a.prototype.setAppStateToPublic=function(u){var o=sap.ushell.Container.getService("AppState");if(o.getSupportedPersistencyMethods().length===0){var x=this.getURLParamValue(u,"sap-xapp-state"),i=this.getURLParamValue(u,"sap-iapp-state");if(x!==undefined){o.makeStatePersistent(x,A.PublicState);}if(i!==undefined){o.makeStatePersistent(i,A.PublicState);}}};
a.prototype.sendEmail=function(u){sap.m.URLHelper.triggerEmail(null,"Link to application",u);};
a.prototype.getURLParamValue=function(u,p){var R=new RegExp("(?:"+p+"=)([^&/]+)"),s=R.exec(u),v;if(s&&s.length===2){v=s[1];}return v;};
return a;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/SendAsEmailButtonRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var S=R.extend(B);return S;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/SettingsButton',["sap/m/Button","sap/ushell/resources","sap/ushell/ui/footerbar/AboutButton","sap/ushell/ui/footerbar/UserPreferencesButton","sap/ushell/ui/footerbar/LogoutButton","sap/m/library","./SettingsButtonRenderer"],function(B,r,A,U,L,m){"use strict";var P=m.PlacementType;
var S=B.extend("sap.ushell.ui.footerbar.SettingsButton",{metadata:{library:"sap.ushell"}});
S.prototype.init=function(){this.setIcon("sap-icon://action-settings");this.setTooltip(r.i18n.getText("helpBtn_tooltip"));this.attachPress(this.showSettingsMenu);var a=new A(),u=new U(),l=new L();this.defaultMenuItems=[a,u,l];if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
S.prototype.setMenuItems=function(b){this.menuItems=b;};
S.prototype.showSettingsMenu=function(){sap.ui.require(["sap/m/ActionSheet"],function(a){var o=new a({id:"settingsMenu",showHeader:false,buttons:(this.menuItems||[]).concat(this.defaultMenuItems)});o.setPlacement(P.Vertical);o.openBy(this);o.attachAfterClose(function(){o.removeAllButtons();o.destroy();});}.bind(this));};
return S;});
sap.ui.predefine('sap/ushell/ui/footerbar/SettingsButtonRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var S=R.extend(B);return S;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/UserPreferencesButton',["sap/m/Button","sap/m/Dialog","sap/m/Bar","sap/m/Text","sap/m/List","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/ActionItem","sap/m/DisplayListItem","sap/ui/layout/VerticalLayout","sap/m/ObjectIdentifier","sap/ushell/EventHub","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ushell/ui/utils","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/Device","sap/ui/core/IconPool","./UserPreferencesButtonRenderer"],function(B,D,a,T,L,r,A,b,c,V,O,E,C,J,u,q,d,f,I){"use strict";
var U=b.extend("sap.ushell.ui.footerbar.UserPreferencesButton",{metadata:{library:"sap.ushell"}});
U.prototype.init=function(){if(b.prototype.init){b.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://person-placeholder");this.translationBundle=r.i18n;this.setText(this.translationBundle.getText("userSettings"));this.setTooltip(this.translationBundle.getText("settings_tooltip"));this.attachPress(this.showUserPreferencesDialog);this.oModel=C.createModel("/core/shell/model/userPreferences",J);this.setModel(this.oModel);};
U.prototype.createDialog=function(){var t=this;this.saveButton=this._createSaveButton();this.cancelButton=this._createCancelButton();this.oDialog=new D({id:"userPreferencesDialog",title:"{/dialogTitle}",contentWidth:"29.6rem",content:null,contentHeight:"17rem",buttons:[this.saveButton,this.cancelButton],afterClose:function(){this._destroyDialog();this.oUser.resetChangedProperties();}.bind(t),stretch:f.system.phone}).addStyleClass("sapUshellUserPreferencesDialog");this._addDialogBackButton();this.oDialog.setModel(this.getModel());this.oDialog.addCustomData(new A({key:"aria-label",value:t.translationBundle.getText("Settings_Dialog_Main_label"),writeToDom:true}));this.oDialog.addContent(this._getOriginalDialogContent());};
U.prototype._getOriginalDialogContent=function(){if(!this.oInitialContent){var o,e;o=this._getUserDetailsControl();e=this._getEntryListControl();this.oInitialContent=new V("userPreferencesLayout",{content:[o,e],width:"100%"});}return this.oInitialContent;};
U.prototype._getEntryListControl=function(){var e=this._getUserPrefEntriesTemplate(),x=this.getModel()&&this.getModel().getProperty("/enableHelp"),t=this,i,s=this.oUser.getFullName(),o,g=new L("userPrefEnteryList",{items:{path:"/entries",template:e}});g.addCustomData(new A({key:"aria-label",value:t.translationBundle.getText("Settings_EntryList_label")+s,writeToDom:true}));o=g.onAfterRendering;g.onAfterRendering=function(){var h=this.getItems(),j;o.apply(this,arguments);for(i=0;i<h.length;i++){j=h[i].getBindingContext().getPath();if(!t.getModel().getProperty(j+"/valueResult")){t._setEntryValueResult(j);}if(x){t._addXRayHelpId(j,h[i]);}}};return g;};
U.prototype._addXRayHelpId=function(e,l){var h=this.getModel().getProperty(e+"/entryHelpID");if(h){l.addStyleClass("help-id-"+h);}};
U.prototype._setEntryValueResult=function(e){var t=this,i=this.getModel().getProperty(e+"/editable"),v=this.getModel().getProperty(e+"/valueArgument");if(typeof v==="function"){this.getModel().setProperty(e+"/valueResult",this.translationBundle.getText("genericLoading"));this.getModel().setProperty(e+"/editable",false);var o=v();o.done(function(g){t.getModel().setProperty(e+"/editable",i);t.getModel().setProperty(e+"/visible",typeof(g)==="object"?!!g.value:true);t.getModel().setProperty(e+"/valueResult",typeof(g)==="object"?g.displayText:g);});o.fail(function(){t.getModel().setProperty(e+"/valueResult",t.translationBundle.getText("loadingErrorMessage"));});}else if(v){this.getModel().setProperty(e+"/valueResult",v);this.getModel().setProperty(e+"/editable",i);}else{this.getModel().setProperty(e+"/valueResult",this.translationBundle.getText("loadingErrorMessage"));}};
U.prototype._emitEntryOpened=function(e){var o=E.last("UserSettingsOpened")||{},p=e.split("/").pop();o[p]=true;E.emit("UserSettingsOpened",o);};
U.prototype._getUserPrefEntriesTemplate=function(){var t=this,i,p=function(e){var o={};o=q.extend(true,{},{},e);sap.ui.require(["sap/m/FlexBox","sap/m/FlexAlignItems","sap/m/FlexJustifyContent","sap/m/BusyIndicator"],function(F,g,h,j){var k=true,l,s,m=o.getSource().getLabel(),n=o.getSource().getBindingContext().getPath();t.getModel().setProperty("/activeEntryPath",n);t._setDetailedEntryModeMode(true,n,m,n);t.oDialog.removeAllContent();s=t.getModel().getProperty(n+"/contentResult");if(s){l=sap.ui.getCore().byId(s);t.oDialog.addContent(l);t._emitEntryOpened(n);}else{var v=null,w,S=true,x=false,y=t.getModel().getProperty(n+"/contentFunc");if(typeof y==="function"){t._emitEntryOpened(n);w=y();w.done(function(z){S=false;if(x===true){t.oDialog.removeAllContent();v.destroy();}if(z instanceof sap.ui.core.Control){t.getModel().setProperty(n+"/contentResult",z.getId());t.oDialog.addContent(z);}else{k=false;}});w.fail(function(){S=false;if(x===true){t.oDialog.removeAllContent();v.destroy();}k=false;});w.always(function(){if(k===false){var z=new F("userPrefErrorFlexBox",{height:"5rem",alignItems:g.Center,justifyContent:h.Center,items:[new T("userPrefErrorText",{text:t.translationBundle.getText("loadingErrorMessage")})]});t.getModel().setProperty(n+"/contentResult",z.getId());t.oDialog.addContent(z);}});if(S===true){v=new j("userPrefLoadingBusyIndicator",{size:"2rem"});t.oDialog.addContent(v);x=true;}}}});};i=new c({label:"{title}",value:"{valueResult}",tooltip:{path:"valueResult",formatter:function(v){return typeof(v)==="string"?v:"";}},type:{path:"editable",formatter:function(e){return(e===true)?"Navigation":"Inactive";}},visible:{path:"visible",formatter:function(v){return(v!==undefined)?v:true;}},press:p,customData:new A({key:"aria-label",value:{parts:[{path:"title"},{path:"valueResult"}],formatter:function(s,v){v=v||"";return s+" "+v;}},writeToDom:true})});return i;};
U.prototype._getUserDetailsControl=function(){return new O({title:this.oUser.getFullName(),text:this.oUser.getEmail()}).addStyleClass("sapUshellUserPrefUserIdentifier");};
U.prototype._createCancelButton=function(){var t=this;return new B({id:"cancelButton",text:{parts:["/entries"],formatter:function(e){if(!e){return"";}var g=e.some(function(o){return o.editable;});return g>0?t.translationBundle.getText("cancelBtn"):t.translationBundle.getText("close");}},press:t._dialogCancelButtonHandler.bind(t),visible:true});};
U.prototype._createSaveButton=function(){var t=this;return new B({id:"saveButton",text:this.translationBundle.getText("saveBtn"),press:t._dialogSaveButtonHandler.bind(t),visible:{parts:["/entries"],formatter:function(e){if(!e){return false;}return e.some(function(o){return o.editable;});}}});};
U.prototype._setDetailedEntryModeMode=function(i,e,g,h){this.getModel().setProperty("/isDetailedEntryMode",!!i);this.getModel().setProperty("/dialogTitle",g);};
U.prototype.showUserPreferencesDialog=function(){this.oUser=sap.ushell.Container.getUser();this.createDialog();this.oDialog.open();};
U.prototype._dialogBackButtonHandler=function(){var t=this;t.getModel().setProperty("/isDetailedEntryMode",false);t.getModel().setProperty("/dialogTitle",t.translationBundle.getText("userSettings"));t.oDialog.removeAllContent();t.oDialog.addContent(t._getOriginalDialogContent());t._setEntryValueResult(t.getModel().getProperty("/activeEntryPath"));t.getModel().setProperty("/activeEntryPath",null);};
U.prototype._destroyDialog=function(){this.oHeadBar.destroy();this.oInitialContent.destroy();this.oInitialContent=null;this._modelCleanUpToInitial();this._entriesCleanUp();this.oDialog.destroy();this.saveButton.destroy();this.cancelButton.destroy();};
U.prototype._entriesCleanUp=function(){var i,e=this.getModel().getProperty("/entries"),s,o;for(i=0;i<e.length;i++){s=e[i].contentResult;delete e[i].contentResult;if(s){o=sap.ui.getCore().byId(s);o.destroy();o=null;}e[i].valueResult=null;}this.getModel().setProperty("/entries",e);};
U.prototype._modelCleanUpToInitial=function(){this.getModel().setProperty("/isDetailedEntryMode",false);this.getModel().setProperty("/dialogTitle",this.translationBundle.getText("userSettings"));};
U.prototype._dialogSaveButtonHandler=function(){var t=this,i,e=this.getModel().getProperty("/entries"),s=u.saveUserPreferenceEntries(e);i=this.getModel().getProperty("/isDetailedEntryMode");if(i){this.getModel().setProperty("/activeEntryPath",null);}s.done(function(){t._showSaveMessageToast();});s.fail(function(g){sap.ui.require(["sap/m/MessageBox"],function(M){var h,j="";if(g.length===1){h=t.translationBundle.getText("savingEntryError")+" ";}else{h=t.translationBundle.getText("savingEntriesError")+"\n";}g.forEach(function(k){h+=k.entry+"\n";j+="Entry: "+k.entry+" - Error message: "+k.message+"\n";});M.show(h,{icon:M.Icon.ERROR,title:t.translationBundle.getText("Error"),actions:[M.Action.OK]});d.error("Failed to save the following entries",j,"sap.ushell.ui.footerbar.UserPreferencesButton");});});this.oDialog.close();this._destroyDialog();};
U.prototype._dialogCancelButtonHandler=function(){var i,e=this.getModel().getProperty("/entries");for(i=0;i<e.length;i++){if(e[i]&&e[i].onCancel){e[i].onCancel();}}this.oDialog.close();this._destroyDialog();};
U.prototype._addDialogBackButton=function(){var t=this,o=new B("userPrefBackBtn",{visible:"{/isDetailedEntryMode}",icon:I.getIconURI("nav-back"),press:t._dialogBackButtonHandler.bind(t),tooltip:this.translationBundle.getText("feedbackGoBackBtn_tooltip")}),e=new T("userPrefTitle",{text:"{/dialogTitle}"});this.oHeadBar=new a({contentLeft:[o],contentMiddle:[e]});this.oDialog.setCustomHeader(this.oHeadBar);};
U.prototype._showSaveMessageToast=function(){var t=this;sap.ui.require(["sap/m/MessageToast"],function(M){var m=t.translationBundle.getText("savedChanges");M.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});};
return U;});
sap.ui.predefine('sap/ushell/ui/footerbar/UserPreferencesButtonRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var U=R.extend(B);return U;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/AccessibilityCustomData',["sap/ui/core/CustomData","sap/base/Log","sap/ui/events/F6Navigation","sap/ui/core/library"],function(C,L,F,c){"use strict";var I=c.ID;var A=C.extend("sap.ushell.ui.launchpad.AccessibilityCustomData"),o=C.prototype._checkWriteToDom;
A.prototype._checkWriteToDom=function(r){var k=this.getKey().toLowerCase(),i=sap.ui.getCore().getConfiguration().getAccessibility();if(!i){return;}if(k.indexOf("aria")===0||k==="role"||k==="tabindex"){if(!this.getWriteToDom()){return null;}var v=this.getValue();if(typeof v!=="string"){L.error("CustomData with key "+k+" should be written to HTML of "+r+" but the value is not a string.");return null;}if(!(I.isValid(k))||(k.indexOf(":")!=-1)){L.error("CustomData with key "+k+" should be written to HTML of "+r+" but the key is not valid (must be a valid sap.ui.core.ID without any colon).");return null;}if(k==F.fastNavigationKey){v=/^\s*(x|true)\s*$/i.test(v)?"true":"false";}else if(k.indexOf("sap-ui")==0){L.error("CustomData with key "+k+" should be written to HTML of "+r+" but the key is not valid (may not start with 'sap-ui').");return null;}return{key:k,value:v};}return o.apply(this,arguments);};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/ActionItem',["sap/m/Button","sap/m/library","sap/ushell/library","./ActionItemRenderer"],function(B,m){"use strict";var a=m.ButtonType;
var A=B.extend("sap.ushell.ui.launchpad.ActionItem",{metadata:{library:"sap.ushell",properties:{actionType:{type:"string",group:"Appearance",defaultValue:"standard"}},events:{press:{},afterRendering:{}}}});
A.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.sOrigType=undefined;};
A.prototype.setActionType=function(t){if(!this.sOrigType){this.sOrigType=this.getType();}if(t==="action"){this.setType(a.Unstyled);}else if(this.sOrigType){this.setType(this.sOrigType);}else{this.setType(a.Standard);}this.setProperty("actionType",t,true);};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/ActionItemRenderer',["sap/m/ButtonRenderer","sap/ui/core/Renderer"],function(B,R){"use strict";var A=R.extend(B);return A;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorItem',["sap/ui/core/Control","sap/ushell/library","./AnchorItemRenderer"],function(C,l){"use strict";
var A=C.extend("sap.ushell.ui.launchpad.AnchorItem",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},selected:{type:"boolean",group:"Misc",defaultValue:false},groupId:{type:"string",group:"Misc",defaultValue:null},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},writeHelpId:{type:"boolean",group:"Misc",defaultValue:false},index:{type:"int",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:null},isGroupVisible:{type:"boolean",group:"Misc",defaultValue:true},isGroupRendered:{type:"boolean",group:"Misc",defaultValue:false},isGroupDisabled:{type:"boolean",group:"Misc",defaultValue:false},locked:{type:"boolean",group:"Misc",defaultValue:false}},events:{press:{},afterRendering:{}}}});
A.prototype.onAfterRendering=function(){this.fireAfterRendering();};
A.prototype.setTitle=function(t){this.setProperty("title",t,true);this.$().find(".sapUshellAnchorItemInner").text(t);};
A.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);};
A.prototype.setIsGroupRendered=function(r){r=!!r;this.setProperty("isGroupRendered",r,true);if(r){this.removeStyleClass("sapUshellAnchorItemNotRendered");}else{this.addStyleClass("sapUshellAnchorItemNotRendered");}};
A.prototype.setIsGroupVisible=function(v){v=!!v;this.setProperty("isGroupVisible",v,true);this.toggleStyleClass("sapUshellShellHidden",!v);};
A.prototype.setIsGroupDisabled=function(v){v=!!v;this.setProperty("isGroupDisabled",v,true);this.$().find(".sapUshellAnchorItemInner").toggleClass("sapUshellAnchorItemDisabled",v);};
A.prototype.onclick=function(){this.firePress();};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorItemRenderer',function(){"use strict";var A={};
A.render=function(r,a){var d=a.getModel(),i=a.getBindingContext().getPath(),I=d.getProperty(i),s=I.groupId,S=a.getSelected();r.write("<li");r.writeControlData(a);r.writeAttribute("modelGroupId",s);r.writeAccessibilityState(a,{role:"option",selected:S});r.addClass("sapUshellAnchorItem");if(a.getWriteHelpId()){var c=a.getDefaultGroup()?"help-id-homeAnchorNavigationBarItem":"help-id-anchorNavigationBarItem";r.addClass(c);r.writeAttribute("data-help-id",a.getGroupId());}if(S){r.writeAttribute("tabindex","0");r.addClass("sapUshellAnchorItemSelected");}if(!a.getVisible()){r.addClass("sapUshellShellHidden");}r.writeClasses();r.write("><div class=\"sapUshellAnchorItemInner\">");r.writeEscaped(a.getTitle());r.write("</div></li>");};
return A;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorNavigationBar',["sap/m/Bar","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/m/Button","sap/ushell/resources","sap/ui/model/Filter","sap/ushell/ui/launchpad/GroupListItem","sap/m/List","sap/m/library","sap/ushell/library","./AnchorNavigationBarRenderer"],function(B,D,q,a,b,r,F,G,L,m){"use strict";var c=m.ListMode;
var A=B.extend("sap.ushell.ui.launchpad.AnchorNavigationBar",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},selectedItemIndex:{type:"int",group:"Misc",defaultValue:0},overflowEnabled:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{groups:{type:"sap.ushell.ui.launchpad.AnchorItem",multiple:true,singularName:"group"}},events:{afterRendering:{},itemPress:{}}}});
A.prototype.init=function(){D.resize.attachHandler(this.reArrangeNavigationBarElements,this);this.bGroupWasPressed=false;this.bIsRtl=sap.ui.getCore().getConfiguration().getRTL();this._bIsRenderedCompletely=false;};
A.prototype.handleExit=function(){if(this.oPopover){this.oPopover.destroy();}if(this.oOverflowButton){this.oOverflowButton.destroy();}};
A.prototype.onAfterRendering=function(){if(this._bIsRenderedCompletely){this.reArrangeNavigationBarElements();if(this.bIsRtl){q(".sapUshellAnchorNavigationBarItemsScroll").addClass("sapUshellRtl");}q(".sapUshellAnchorNavigationBarItemsScroll").scroll(this.setNavigationBarItemsVisibility.bind(this));}};
A.prototype.openOverflowPopup=function(){var o=q(".sapUshellAnchorItemOverFlow").hasClass("sapUshellAnchorItemOverFlowOpen");if(this.oOverflowButton&&!o){this.oOverflowButton.firePress();}};
A.prototype.closeOverflowPopup=function(){if(this.oPopover){this.oPopover.close();}};
A.prototype.reArrangeNavigationBarElements=function(){this.anchorItems=this.getVisibleGroups();var s=this.getSelectedItemIndex()||0;if(this.anchorItems.length){this.adjustItemSelection(s);}if(D.system.phone&&this.anchorItems.length){this.anchorItems.forEach(function(i){i.setIsGroupVisible(false);});this.anchorItems[this.getSelectedItemIndex()].setIsGroupVisible(true);}else{setTimeout(function(){this.setNavigationBarItemsVisibility();}.bind(this),200);}this._adjustAnchorBarAriaProperties(this.anchorItems);};
A.prototype._scrollToGroupByGroupIndex=function(g,s){var S=D.system.tablet?".sapUshellAnchorNavigationBarItemsScroll":".sapUshellAnchorNavigationBarItems";var C=document.documentElement.querySelector(S);var o=this.anchorItems[g].getDomRef();if(C&&o){var d=C.getBoundingClientRect();var i=o.getBoundingClientRect();var x;if(i.left<d.left){x=i.left-d.left-16;}else if(i.right>d.right){x=i.right-d.right+16;}if(x){C.scrollLeft+=x;}this.setNavigationBarItemsVisibility();}};
A.prototype.setNavigationBarItemsVisibility=function(){if(!D.system.phone){if(this.anchorItems.length&&(!this.isMostRightAnchorItemVisible()||!this.isMostLeftAnchorItemVisible())){this.oOverflowButton.removeStyleClass("sapUshellShellHidden");q(".sapUshellAnchorItemOverFlow").removeClass("sapUshellShellHidden");}else if(this.oOverflowButton){this.oOverflowButton.addStyleClass("sapUshellShellHidden");q(".sapUshellAnchorItemOverFlow").addClass("sapUshellShellHidden");}if(this.bIsRtl){if(this.anchorItems.length&&!this.isMostLeftAnchorItemVisible()){this.oOverflowRightButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowRightButton){this.oOverflowRightButton.addStyleClass("sapUshellShellHidden");}if(this.anchorItems.length&&!this.isMostRightAnchorItemVisible()){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowLeftButton){this.oOverflowLeftButton.addStyleClass("sapUshellShellHidden");}}else{if(this.anchorItems.length&&!this.isMostLeftAnchorItemVisible()){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowLeftButton){this.oOverflowLeftButton.addStyleClass("sapUshellShellHidden");}if(this.anchorItems.length&&!this.isMostRightAnchorItemVisible()){this.oOverflowRightButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowRightButton){this.oOverflowRightButton.addStyleClass("sapUshellShellHidden");}}q(".sapUshellAnchorItem.firstItem").removeClass("firstItem");var j=q(".sapUshellAnchorItem").filter(":visible").eq(0);j.addClass("firstItem");}else if(this.anchorItems.length){this.oOverflowButton.removeStyleClass("sapUshellShellHidden");var s=this.getSelectedItemIndex()||0;if(this.oPopover){this.oPopover.setTitle(this.anchorItems[s].getTitle());}}};
A.prototype.adjustItemSelection=function(s){setTimeout(function(){if(this.anchorItems&&this.anchorItems.length){this.anchorItems.forEach(function(i){i.setSelected(false);});if(s<this.anchorItems.length){this.anchorItems[s].setSelected(true);this._scrollToGroupByGroupIndex(s);}}}.bind(this),200);};
A.prototype.isMostRightAnchorItemVisible=function(){var j=q(".sapUshellAnchorNavigationBar"),n=!a(j)?j.width():0,d=!a(j)&&j.offset()?j.offset().left:0,l=this.bIsRtl?this.anchorItems[0].getDomRef():this.anchorItems[this.anchorItems.length-1].getDomRef(),e=!a(l)?q(l).width():0,f;if(e<0){e=80;}f=l&&q(l).offset()?q(l).offset().left:0;if(f+e<=d+n){return true;}return false;};
A.prototype.isMostLeftAnchorItemVisible=function(){var j=q(".sapUshellAnchorNavigationBar"),n=!a(j)&&j.offset()&&j.offset().left||0,f=this.bIsRtl?this.anchorItems[this.anchorItems.length-1].getDomRef():this.anchorItems[0].getDomRef(),d=!a(f)&&q(f).offset()?q(f).offset().left:0;if(d>=n){return true;}return false;};
A.prototype.setSelectedItemIndex=function(s){if(s!==undefined){this.setProperty("selectedItemIndex",s,true);}};
A.prototype.setOverflowEnabled=function(e){this.setProperty("overflowEnabled",e);if(this.oOverflowButton){this.oOverflowButton.setEnabled(e);}};
A.prototype._getOverflowLeftArrowButton=function(){this.oOverflowLeftButton=new b({icon:"sap-icon://slim-arrow-left",tooltip:r.i18n.getText("scrollToTop"),press:function(){this._scrollToGroupByGroupIndex(0);}.bind(this)}).addStyleClass("sapUshellShellHidden");return this.oOverflowLeftButton;};
A.prototype._getOverflowRightArrowButton=function(){this.oOverflowRightButton=new b({icon:"sap-icon://slim-arrow-right",tooltip:r.i18n.getText("scrollToEnd"),press:function(){this._scrollToGroupByGroupIndex(this.anchorItems.length-1);}.bind(this)}).addStyleClass("sapUshellShellHidden");return this.oOverflowRightButton;};
A.prototype._getOverflowButton=function(){if(this.oOverflowButton){return this.oOverflowButton;}this.oOverflowButton=new b("sapUshellAnchorBarOverflowButton",{icon:"sap-icon://slim-arrow-down",tooltip:r.i18n.getText("more_groups"),enabled:this.getOverflowEnabled(),press:function(){sap.ui.require(["sap/m/Popover"],function(P){if(!this.oPopover){this._initPopover(P);}if(this.oPopover.isOpen()){this.oPopover.close();}else{var l=this.oPopover.getContent()[0];this.anchorItems=this.getVisibleGroups();l.setModel(this.getModel());var d=this.getModel().getProperty("/tileActionModeActive");var v=new F("","EQ","a");v.fnTest=function(i){if(!i.visibilityModes[d?1:0]){return false;}return i.isGroupVisible||d;};l.bindItems({path:"/groups",template:new G({title:"{title}",groupId:"{groupId}",index:"{index}"}),filters:[v]});var s=q(".sapUshellAnchorItemSelected").attr("id");var S=sap.ui.getCore().byId(s);q.each(l.getItems(),function(i,e){if(S.mProperties.groupId===e.mProperties.groupId){e.addStyleClass("sapUshellAnchorPopoverItemSelected");}else{e.addStyleClass("sapUshellAnchorPopoverItemNonSelected");}});q(".sapUshellAnchorItemOverFlow").toggleClass("sapUshellAnchorItemOverFlowPressed",true);this.oPopover.openBy(this.oOverflowButton);}}.bind(this));}.bind(this)}).addStyleClass("sapUshellShellHidden").addStyleClass("sapContrastPlus");return this.oOverflowButton;};
A.prototype._initPopover=function(P){var t=this;var l=new L({mode:c.SingleSelectMaster,rememberSelections:false,selectionChange:function(e){t.fireItemPress({group:e.getParameter("listItem")});t.oPopover.close();}});this.bOverFlowBtnClick=false;this.oPopover=new P("sapUshellAnchorBarOverflowPopover",{showArrow:false,showHeader:false,placement:"Left",content:[l],horizontalScrolling:false,beforeOpen:function(){q(".sapUshellAnchorItemOverFlow").addClass("sapUshellAnchorItemOverFlowOpen");var j=q(".sapUshellAnchorItemOverFlow"),i=sap.ui.getCore().getConfiguration().getRTL(),o=i?-1*j.outerWidth():j.outerWidth();this.setOffsetX(o);},beforeClose:function(){if(document.activeElement.id===this.oOverflowButton.getId()){this.bOverFlowBtnClick=true;}}.bind(this),afterClose:function(){q(".sapUshellAnchorItemOverFlow").removeClass("sapUshellAnchorItemOverFlowOpen");q(".sapUshellAnchorItemOverFlow").toggleClass("sapUshellAnchorItemOverFlowPressed",false);}}).addStyleClass("sapUshellAnchorItemsPopover").addStyleClass("sapContrastPlus");};
A.prototype.getVisibleGroups=function(){return this.getGroups().filter(function(g){return g.getVisible();});};
A.prototype._adjustAnchorBarAriaProperties=function(g){var i;for(i=0;i<g.length;i++){var j=q(g[i].getDomRef());j.attr("aria-posinset",i+1);j.attr("aria-setsize",g.length);}};
A.prototype._setRenderedCompletely=function(R){this._bIsRenderedCompletely=R;};
A.prototype.handleAnchorItemPress=function(e){this.bGroupWasPressed=true;this.fireItemPress({group:e.getSource(),manualPress:true});};
A.prototype.exit=function(){if(this.oOverflowLeftButton){this.oOverflowLeftButton.destroy();}if(this.oOverflowRightButton){this.oOverflowRightButton.destroy();}if(this.oOverflowButton){this.oOverflowButton.destroy();}if(this.oPopover){this.oPopover.destroy();}};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorNavigationBarRenderer',["sap/ui/thirdparty/jquery","sap/ushell/resources"],function(q,r){"use strict";var A={};
A.render=function(R,c){R.write("<div");R.addClass("sapUshellAnchorNavigationBar");R.writeClasses();R.writeControlData(c);R.write(">");R.write("<div");R.addClass("sapUshellAnchorNavigationBarInner");R.writeClasses();R.write(">");if(c.getGroups().length>0){c._setRenderedCompletely(true);R.write("<div");R.addClass("sapUshellAnchorLeftOverFlowButton");R.writeClasses();R.writeAccessibilityState(c._getOverflowLeftArrowButton(),{"hidden":true});R.write(">");R.renderControl(c._getOverflowLeftArrowButton());R.write("</div>");R.write("<div");R.addClass("sapUshellAnchorNavigationBarItems");R.writeClasses();R.writeAccessibilityState(c,{role:"list"});R.write(">");R.write("<ul");R.addClass("sapUshellAnchorNavigationBarItemsScroll");R.writeClasses();R.writeAccessibilityState(c,{label:r.i18n.getText("AnchorNavigationBar_AriaLabel"),role:"listbox"});R.write(">");this.renderAnchorNavigationItems(R,c);R.write("</ul>");R.write("</div>");R.write("<div");R.addClass("sapUshellAnchorRightOverFlowButton");R.writeClasses();R.writeAccessibilityState(c._getOverflowRightArrowButton(),{"hidden":true});R.write(">");R.renderControl(c._getOverflowRightArrowButton());R.write("</div>");R.write("<div");R.addClass("sapUshellAnchorItemOverFlow");R.writeClasses();R.writeAccessibilityState(c._getOverflowButton(),{"hidden":true});R.write(">");R.renderControl(c._getOverflowButton());R.write("</div>");}R.write("</div>");R.write("</div>");};
A.renderAnchorNavigationItems=function(R,c){var g=c.getGroups();q.each(g,function(){R.renderControl(this);});};
A.shouldAddIBarContext=function(){return false;};
return A;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/CatalogEntryContainer',["sap/ui/core/Control","sap/ushell/ui/launchpad/TileContainerUtils","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/resources"],function(C,T,q,L,r){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.CatalogEntryContainer",{
metadata:{properties:{header:{type:"string",group:"Appearance",defaultValue:null},catalogSearchTerm:{type:"string",group:"Appearance",defaultValue:null},catalogTagSelector:{type:"object",group:"Appearance",defaultValue:null}},aggregations:{appBoxesContainer:{type:"sap.ushell.ui.appfinder.AppBox",multiple:true},customTilesContainer:{type:"sap.ushell.ui.launchpad.Tile",multiple:true}}},
renderer:{render:function(R,c){var t=c.getCustomTilesContainer(),A=c.getAppBoxesContainer(),h,b;R.write("<div");R.writeControlData(c);R.addClass("sapUshellTileContainer sapUshellCatalogTileContainer");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellTileContainerContent");R.writeClasses();R.writeAttribute("tabindex","-1");R.write(">");if(c.getHeader()){h=r.i18n.getText(c.getHeader());R.write("<div");R.addClass("sapUshellTileContainerHeader sapUshellCatalogTileContainerHeader");R.writeAttribute("id",c.getId()+"-groupheader");R.writeClasses();R.write(">");R.write("<div");R.writeAttribute("id",c.getId()+"-title");R.addClass("sapUshellCatalogTileContainerHeaderInner");R.writeClasses();R.write(">");R.write("<");R.write("h2");R.addClass("sapUshellContainerTitle sapUshellCatalogContainerTitle");R.writeClasses();R.writeAttributeEscaped("title",h);R.write(">");R.writeEscaped(h);R.write("</");R.write("h2");R.writeAttribute("id",c.getId()+"-groupheader");R.write(">");R.write("</div>");R.write("</div>");}R.write("<ul");b=c.data("containerHeight");if(b){R.writeAttribute("style","height:"+b);}R.addClass("sapUshellTilesContainer-sortable");R.addClass("sapUshellInner");R.writeClasses();R.writeAccessibilityState(c,{role:"listbox"});R.write(">");q.each(A,function(){if(this.getVisible){R.renderControl(this);}});R.write("</ul>");R.write("<ul");b=c.data("containerHeight");if(b){R.writeAttribute("style","height:"+b);}R.addClass("sapUshellTilesContainer-sortable");R.addClass("sapUshellInner");R.writeClasses();R.writeAccessibilityState(c,{role:"listbox"});R.write(">");q.each(t,function(){if(this.getVisible){R.renderControl(this);}});R.write("</ul>");R.write("</div>");R.write("</div>");}}
});
a.prototype.setCatalogTagSelector=function(t){};
a.prototype.setAfterHandleElements=function(c){this.onAfterHandleElements=c;};
a.prototype.onAfterUpdate=function(c){this.fnCallback=c;};
a.prototype.setCatalogSearchTerm=function(s){};
a.prototype.updateAggregation=function(R){L.debug("Updating CatalogEntryContainer. Reason: ",R);};
a.prototype.addNewItem=function(e,n){var N,i,p=e.getPath(),b=e.getObject?e.getObject().src:undefined,c=undefined;if(this.catalogState[n]!="full"){if(this.getAllocatedUnits){if(!this.getAllocatedUnits()){this.catalogState[n]="partial";return false;}}}if(n==="customTilesContainer"){if(b!==undefined){if(b.Chip!==undefined&&b.Chip.getContract!==undefined){c=b.Chip.getContract("preview");}else if(b.getContract!==undefined){c=b.getContract("preview");}if(c!==undefined){c.setEnabled(true);}}var d=sap.ushell.Container.getService("LaunchPage").getCatalogTileView(e.getProperty("src"));e.getProperty("content")[0]=d;}N=T.createNewItem.bind(this)(e,n);T.addNewItem.bind(this)(N,n);i=(n==="appBoxesContainer")?this.getAppBoxesContainer():this.getCustomTilesContainer();this.indexingMaps[n].onScreenPathIndexMap[p]={aItemsRefrenceIndex:i.length-1,isVisible:true};return true;};
a.prototype.getNumberResults=function(){return{nAppboxes:this.nNumberOfVisibileElements.appBoxesContainer,nCustom:this.nNumberOfVisibileElements.customTilesContainer};};
a.prototype.handleElements=function(R){var n=R,b=this.mBindingInfos[n].binding,B=b.getContexts(),i,s,c;if(!this.catalogState){this.catalogState={};}if(!this.catalogState[R]){this.catalogState[R]="start";}if(!this.indexingMaps){this.indexingMaps={};}if(!this.nNumberOfVisibileElements){this.nNumberOfVisibileElements=[];}if(!this.nNumberOfVisibileElements.customTilesContainer){this.nNumberOfVisibileElements.customTilesContainer=0;}if(!this.nNumberOfVisibileElements.appBoxesContainer){this.nNumberOfVisibileElements.appBoxesContainer=0;}if(!this.filters){this.filters={};}i=(n==="appBoxesContainer")?this.getAppBoxesContainer():this.getCustomTilesContainer();this.indexingMaps[n]=T.indexOnScreenElements(i,false);c=T.markVisibleOnScreenElementsSearchCatalog(B,this.indexingMaps[n],true);if(T.createMissingElementsInOnScreenElementsSearchCatalog(this.indexingMaps[n],B,c,this.addNewItem.bind(this),i,this.filters[n],n,this.processFiltering.bind(this))){if(this.getAllocatedUnits&&this.getAllocatedUnits()){this.catalogState[R]="full";}}i=(n==="appBoxesContainer")?this.getAppBoxesContainer():this.getCustomTilesContainer();s=T.showHideTilesAndHeaders(this.indexingMaps[n],i);this.nNumberOfVisibileElements[n]=s.nCountVisibElelemnts;if(this.fnCallback){this.fnCallback(this);}if(this.onAfterHandleElements){this.onAfterHandleElements(this);}};
a.prototype.processFiltering=function(e,n){var p=e.getPath(),i;if(n){i=this.indexingMaps[n].onScreenPathIndexMap[p];if(i.isVisible&&this.currElementVisible){this.currElementVisible();}}};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/CatalogsContainer',["sap/ui/core/Control","sap/ushell/ui/launchpad/TileContainerUtils","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/Log","sap/ui/base/ManagedObject"],function(C,T,q,M,L,a){"use strict";
var b=C.extend("sap.ushell.ui.launchpad.CatalogsContainer",{
metadata:{properties:{categoryFilter:{type:"string",defaultValue:"ALL"},categoryAllocateTiles:{type:"int",defaultValue:"0"}},aggregations:{catalogs:{type:"sap.ushell.ui.launchpad.CatalogEntryContainer",multiple:true}}},
renderer:{render:function(r,c){var d=c.getCatalogs();if(d.length){c.setBusy(false);}r.write("<div");r.addClass("sapUshellCatalogsContainer");r.writeClasses();r.writeControlData(c);r.write(">");q.each(d,function(){r.renderControl(this);});r.write("</div>");}}
});
b.prototype.setPagingManager=function(p){M.start("FLP:DashboardManager.CatalogsRendering","CatalogsRendering","FLP");M.pause("FLP:DashboardManager.CatalogsRendering");this.oPagingManager=p;};
b.prototype.updateAllocatedUnits=function(n){this.nAllocatedUnits=n;};
b.prototype.applyPagingCategoryFilters=function(n,c){var i=this.getCatalogs();this.nAllocatedUnits=n;if(c&&c!="All"&&c!=""){this.sCatalogTerm=c;}else{this.sCatalogTerm="";}if(!this.filters){this.filters={};}if(!this.filters.catalogEntry){this.filters.catalogEntry=function(e){var p=e.getPath(),I=e.getProperty("title")===this.sCatalogTerm,d;if(!this.sCatalogTerm){return;}d=this.indexingMaps.onScreenPathIndexMap[p];if(d){d.isVisible=I;}}.bind(this);}if(!this.filters.pagination){this.filters.pagination=function(e){var p=e.getPath(),d;d=this.indexingMaps.onScreenPathIndexMap[p];if(!this.nAllocatedUnits){d.isVisible=false;}}.bind(this);}if(!this.indexingMaps){return;}this.indexingMaps=T.indexOnScreenElements(i);T.applyFilterOnAllItems(this.mBindingInfos.catalogs,this.filters,this.processFiltering.bind(this));if(this.indexingMaps){T.showHideTilesAndHeaders(this.indexingMaps,this.getCatalogs());}};
b.prototype.processFiltering=function(e){var c=this.getCatalogs(),p=e.getPath(),i=this.indexingMaps.onScreenPathIndexMap[p],o=c[i.aItemsRefrenceIndex],d;if(i.isVisible&&(!this.catalogPagination[p]||this.catalogPagination[p]=="start")){if(this.catalogPagination[p]==undefined){this.catalogPagination[p]="start";o.catalogState={};}else if(this.catalogPagination[p]=="start"){var n=o.nNumberOfVisibileElements;this.nAllocatedUnits+=(n.appBoxesContainer+n.customTilesContainer);}d=this.nAllocatedUnits;o.handleElements("appBoxesContainer");o.handleElements("customTilesContainer");if(o.catalogState.appBoxesContainer=="full"&&o.catalogState.customTilesContainer=="full"){this.catalogPagination[p]="full";}if(d-this.nAllocatedUnits>0){this.bSearchResults=true;}else{i.isVisible=false;}}else if(i.isVisible&&this.catalogPagination[p]=="full"){var f=o.nNumberOfVisibileElements;var g=f.appBoxesContainer+f.customTilesContainer;if(g==0){i.isVisible=false;}}};
b.prototype.resetCatalogPagination=function(){this.catalogPagination={};};
b.prototype.updateAggregation=function(r){L.debug("Updating TileContainer. Reason: ",r);try{M.resume("FLP:DashboardManager.CatalogsRendering");this.filterElements();M.pause("FLP:DashboardManager.CatalogsRendering");}catch(e){a.prototype.updateAggregation.apply(this,arguments);}};
b.prototype.addNewItem=function(e,n){var N,c,i,p=e.getPath();N=T.createNewItem.bind(this)(e,n);if(!N.filters){N.filters={};N.filters.appBoxesContainer={};N.filters.customTilesContainer={};N.filters.appBoxesContainer.pagination=function(d){var p=d.getPath(),f;f=this.indexingMaps.appBoxesContainer.onScreenPathIndexMap[p];if(this.getAllocatedUnits){f.isVisible=!!this.getAllocatedUnits();}}.bind(N);N.filters.customTilesContainer.pagination=function(d){var p=d.getPath(),f;f=this.indexingMaps.customTilesContainer.onScreenPathIndexMap[p];if(this.getAllocatedUnits){f.isVisible=!!this.getAllocatedUnits();}}.bind(N);}N.nAllocatedUnits=this.nAllocatedUnits;N.getAllocatedUnits=function(){return this.nAllocatedUnits;}.bind(this);N.elementFiltered=function(d){c=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits+=d*c;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);N.elementsVisible=function(d){c=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits-=d*c;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);N.newElementCreated=function(E,o){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);N.currElementVisible=function(){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);T.addNewItem.bind(this)(N,n);i=this.getCatalogs();this.indexingMaps.onScreenPathIndexMap[p]={aItemsRefrenceIndex:i.length-1,isVisible:true};return true;};
b.prototype.handleFilters=function(){if(!this.catalogPagination){this.catalogPagination={};}if(!this.catalogsElementsMap){this.catalogsElementsMap={};}if(!this.filters){this.filters={};}};
b.prototype.setHandleSearchCallback=function(h){this.handleSearchCallback=h;};
b.prototype.filterElements=function(){var n="catalogs",B=this.mBindingInfos[n].binding,c=B.getContexts(),i=this.getCatalogs(),d;if(!this.indexingMaps){this.indexingMaps=T.indexOnScreenElements(i);}this.handleFilters();d=T.markVisibleOnScreenElements(c,this.indexingMaps,false);if(!T.validateOrder(c,i,d)){throw true;}T.createMissingElementsInOnScreenElements(this.indexingMaps,c,d,this.addNewItem.bind(this),i,this.filters,n);i=this.getCatalogs();T.showHideTilesAndHeaders(this.indexingMaps,i);if(this.handleSearchCallback){this.handleSearchCallback();}};
return b;});
sap.ui.predefine('sap/ushell/ui/launchpad/DashboardGroupsContainer',["sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/InvisibleText","sap/ui/core/ResizeHandler","sap/ushell/library","sap/ushell/resources","sap/ushell/override","sap/ushell/utils","sap/ushell/Config","sap/ui/Device","./DashboardGroupsContainerRenderer"],function(M,C,I,R,l,r,o,u,a,D){"use strict";var b="UShellTileDeviceSet";
var c=C.extend("sap.ushell.ui.launchpad.DashboardGroupsContainer",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},displayMode:{type:"string",defaultValue:null},_gridEnabled:{type:"boolean",defaultValue:false}},aggregations:{groups:{type:"sap.ui.core.Control",multiple:true,singularName:"group"}},events:{afterRendering:{}}}});
c.prototype.init=function(){this._getDynamicStyleElement();if(!D.media.hasRangeSet(b)){D.media.initRangeSet(b,[374],"px",["Small","Responsive"],true);}this._iContainerWidth=null;this._oTileDimensions=null;this._bRangeSetSmall=false;if(a.last("/core/home/gridContainer")){this.setProperty("_gridEnabled",true);}else{this.setProperty("_gridEnabled",false);}R.register(this,this._handleResize.bind(this));this.addInvisibleAccessabilityTexts();this._oConfigChange=a.on("/core/home/sizeBehavior").do(function(s){this._sSizeBehavior=s;this._updateTileContainer(true);}.bind(this));if(!sap.ui.getCore().isInitialized()){sap.ui.getCore().attachInit(this._handleCoreInitialized.bind(this));}else{this._handleCoreInitialized();}};
c.prototype._handleCoreInitialized=function(){sap.ui.getCore().attachThemeChanged(this._handleThemeApplied,this);};
c.prototype._handleThemeApplied=function(){sap.ui.getCore().detachThemeChanged(this._handleThemeApplied,this);this._updateTileContainer(true);};
c.prototype.exit=function(){if(this._oStyleElement){document.head.removeChild(this._oStyleElement);}delete this._oStyleElement;this._oConfigChange.off();if(this.oTileText){this.oTileText.destroy();}if(this.oTileEditModeText){this.oTileEditModeText.destroy();}D.media.detachHandler(this._handleMediaChange,this,b);C.prototype.exit.apply(this,arguments);};
c.prototype._handleResize=function(e){if(e.size.width>0&&e.size.width!==e.oldSize.width){this._updateTileContainer();}};
c.prototype._updateTileContainer=function(d){var i=this._getInnerTileContainer();if(!i){return;}var s=this._sSizeBehavior==="Small"||this._bRangeSetSmall;var t=this._getTileDimensions(s,d);var e=this._getElementDimensions(i);var T=t.width;var m;var f;if(this.getProperty("_gridEnabled")){var g=this.getGroups();if(g.length>0){var G=g[0];if(!G.hasListeners("layoutChange")){G.attachEvent("layoutChange",this._updateTileContainer.bind(this));}if(G.getTileSizeBehavior()!==this._sSizeBehavior){G.setTileSizeBehavior(this._sSizeBehavior);}m=G.getActiveGapSize();T=T+m;f=G.getMaximumItemNumber();}}else{m=t.marginEnd;T=T+m;f=Math.floor(e.width/T);}var h=T*f-t.marginEnd;var j=this._iContainerWidth!==h;if(j){this._iContainerWidth=h;this._updateTileContainerWidth(h);}};
c.prototype._getInnerTileContainer=function(){var d=this.getDomRef();if(!d){return null;}var t,T=d.querySelectorAll(".sapUshellTileContainerContent");for(var i=0;i<T.length;++i){if(!T[i].parentElement.classList.contains("sapUshellHidden")){t=T[i];break;}}if(t){return t.querySelector(".sapUshellInner");}return null;};
c.prototype._getDynamicStyleElement=function(){if(!this._oStyleElement){this._oStyleElement=document.createElement("style");document.head.appendChild(this._oStyleElement);}return this._oStyleElement;};
c.prototype._updateTileContainerWidth=function(t){var s=this._getDynamicStyleElement();s.innerHTML=".sapUshellLineModeContainer, .sapUshellLinksContainer { width: "+t+"px; }";};
c.prototype._getTileDimensions=function(s,d){if(this._oTileDimensions&&!d){return this._oTileDimensions;}var t=document.createElement("div");t.style.visibility="hidden";t.classList.add("sapUshellTile");if(s){t.classList.add("sapUshellSmall");}document.body.appendChild(t);this._oTileDimensions=this._getElementDimensions(t);document.body.removeChild(t);return this._oTileDimensions;};
c.prototype._getElementDimensions=function(e){var s=window.getComputedStyle(e);var d=sap.ui.getCore().getConfiguration().getRTL();var m=d?s.marginLeft:s.marginRight;return{width:parseFloat(s.width),marginEnd:parseFloat(m)};};
c.prototype.updateGroups=o.updateAggregatesFactory("groups");
c.prototype.onAfterRendering=function(){var t=this,d={bUseUniqueMark:true};if(this.onAfterRenderingTimer){clearTimeout(this.onAfterRenderingTimer);}this.onAfterRenderingTimer=setTimeout(function(){t.onAfterRenderingTimer=undefined;u.setPerformanceMark("FLP-TimeToInteractive_tilesLoaded",d);t.fireAfterRendering();},0);D.media.attachHandler(this._handleMediaChange,this,b);};
c.prototype.onBeforeRendering=function(){D.media.detachHandler(this._handleMediaChange,this,b);};
c.prototype._handleMediaChange=function(e){this._bRangeSetSmall=e.name==="Small";this._updateTileContainer(true);};
c.prototype.getGroupControlByGroupId=function(g){try{var d=this.getGroups();for(var i=0;i<d.length;i++){if(d[i].getGroupId()==g){return d[i];}}}catch(e){}return null;};
c.prototype.addLinksToUnselectedGroups=function(){var g=this.getGroups();g.forEach(function(G,i){if(!G.getIsGroupSelected()){M.prototype.updateAggregation.call(G,"links");}});};
c.prototype.removeLinksFromAllGroups=function(){var g=this.getGroups();g.forEach(function(G,d){var L=G.getLinks();if(L.length){if(L[0].getMetadata().getName()==="sap.m.GenericTile"){G.removeAllLinks();}else{for(var i=0;i<L.length;i++){L[i].destroy();}}}});};
c.prototype.removeLinksFromUnselectedGroups=function(){var g=this.getGroups();g.forEach(function(G,d){var L=G.getLinks();if(L.length&&!G.getIsGroupSelected()){if(L[0].getMetadata().getName()==="sap.m.GenericTile"){G.removeAllLinks();}else{for(var i=0;i<L.length;i++){L[i].destroy();}}}});};
c.prototype.addInvisibleAccessabilityTexts=function(){this.oTileText=new I("sapUshellDashboardAccessibilityTileText",{text:r.i18n.getText("tile")}).toStatic();var B=sap.ui.getCore().getLibraryResourceBundle("sap.m");if(B){this.oTileEditModeText=new I("sapUshellDashboardAccessibilityTileEditModeText",{text:B.getText("LIST_ITEM_NAVIGATION")}).toStatic();}};
return c;});
sap.ui.predefine('sap/ushell/ui/launchpad/DashboardGroupsContainerRenderer',["sap/ushell/utils"],function(u){"use strict";var D={};
D.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellDashboardGroupsContainer");if(c.getProperty("_gridEnabled")){r.addClass("sapUshellDashboardGroupsContainerGrid");}r.writeClasses();if(c.getAccessibilityLabel()){r.writeAccessibilityState(c,{role:"navigation",label:c.getAccessibilityLabel()});}r.write(">");var g=c.getGroups();var G;for(var i=0;i<g.length;i++){G=g[i];r.write("<div");r.addClass("sapUshellDashboardGroupsContainerItem");if(G.getIsGroupLocked()||G.getDefaultGroup()){r.addClass("sapUshellDisableDragAndDrop");}r.writeClasses();r.write(">");r.renderControl(G);r.write("</div>");}u.setPerformanceMark("FLP -- dashboardgroupscontainer renderer");};
return D;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/EmbeddedSupportErrorMessage',["sap/ui/thirdparty/jquery","sap/m/Button","sap/m/Dialog","sap/ushell/resources","sap/ui/core/ElementMetadata","sap/m/library","sap/ushell/library","./EmbeddedSupportErrorMessageRenderer"],function(q,B,D,r,E,m){"use strict";var a=m.DialogType;
var b=D.extend("sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage",{metadata:{library:"sap.ushell",events:{afterClose:{}}}});
b.prototype.open=function(){var c,C;this.translationBundle=r.i18n;c=new B({id:E.uid("supportBtn"),text:this.translationBundle.getText("contactSupportBtn"),press:function(){this.close();sap.ui.require(["sap/ushell/ui/footerbar/ContactSupportButton"],function(d){this.oContactSupport=new d("ContactSupportErrorMsg",{visible:true});if(this.oContactSupport){this.oContactSupport.showContactSupportDialog();this.oContactSupport.destroy();}});}.bind(this)});C=new B({id:E.uid("closeBtn"),text:this.translationBundle.getText("close"),press:function(){this.close();}.bind(this)});this.setType(a.Message);this.setIcon("sap-icon://alert");this.setRightButton(C);this.setLeftButton(c);this._addStyleClassToContent();this.addStyleClass("sapMMessageBoxError");this.attachAfterClose(function(){this.destroy();}.bind(this));if(D.prototype.open){D.prototype.open.apply(this,arguments);}};
b.prototype._addStyleClassToContent=function(){var c=this.getContent(),C,i;for(i in c){C=c[i];if(C.getMetadata().getName()==="sap.m.Text"&&!C.aCustomStyleClasses){C.addStyleClass("sapMMsgBoxText");}}};
b.prototype.onAfterRendering=function(){var l,j=q("#EmbeddedSupportErrorMessage").eq(0);if(j){l=j.attr("aria-labelledby");j.attr("aria-labelledby",l+this.getContent()[0].getId());}};
return b;});
sap.ui.predefine('sap/ushell/ui/launchpad/EmbeddedSupportErrorMessageRenderer',['sap/m/DialogRenderer','sap/ui/core/Renderer'],function(D,R){"use strict";var E=R.extend(D);return E;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/GridContainer',["sap/f/dnd/GridDropInfo","sap/ui/core/dnd/DragInfo","sap/ui/core/Control","sap/ui/core/Icon","sap/m/Input","sap/m/Text","sap/ushell/resources","sap/f/GridContainer","sap/f/GridContainerSettings","sap/f/GridContainerItemLayoutData","sap/ushell/utils","sap/m/library","sap/ushell/ui/launchpad/Tile","sap/ushell/library","sap/ushell/ui/launchpad/GridContainerRenderer"],function(G,D,C,I,a,T,r,U,b,c,d,m){"use strict";var H=m.HeaderLevel;var e={RESPONSIVE:"Responsive",SMALL:"Small"};
var f=C.extend("sap.ushell.ui.launchpad.GridContainer",{metadata:{library:"sap.ushell",properties:{groupId:{type:"string",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:true},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},isLastGroup:{type:"boolean",group:"Misc",defaultValue:false},headerText:{type:"string",group:"Misc",defaultValue:null},headerLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:H.H2},groupHeaderLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:H.H4},showGroupHeader:{type:"boolean",group:"Misc",defaultValue:true},homePageGroupDisplay:{type:"string",defaultValue:null},isGroupLocked:{type:"boolean",group:"Misc",defaultValue:null},isGroupSelected:{type:"boolean",group:"Misc",defaultValue:false},editMode:{type:"boolean",group:"Misc",defaultValue:false},showBackground:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Misc",defaultValue:"sap-icon://locked"},showIcon:{type:"boolean",group:"Misc",defaultValue:false},enableHelp:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},supportLinkPersonalization:{type:"boolean",group:"Misc",defaultValue:false},tileSizeBehavior:{type:"string",group:"Misc",defaultValue:e.RESPONSIVE}},aggregations:{tiles:{type:"sap.ui.core.Control",multiple:true,singularName:"tile",forwarding:{getter:"_getInternalGrid",aggregation:"items"},dnd:true},links:{type:"sap.ui.core.Control",multiple:true,singularName:"link"},_grid:{type:"sap.f.GridContainer",multiple:false,visibility:"hidden"},beforeContent:{type:"sap.ui.core.Control",multiple:true,singularName:"beforeContent"},afterContent:{type:"sap.ui.core.Control",multiple:true,singularName:"afterContent"},footerContent:{type:"sap.ui.core.Control",multiple:true,singularName:"footerContent"},headerActions:{type:"sap.ui.core.Control",multiple:true,singularName:"headerAction"}},events:{afterRendering:{},titleChange:{},tileDragStart:{},tileDragEnter:{},tileDrop:{},layoutChange:{}},dnd:{draggable:true,droppable:true}}});
f.prototype.init=function(){var u=new U({snapToRow:true,layoutChange:this.fireLayoutChange.bind(this),containerQuery:true});this.setAggregation("_grid",u);this.oNoLinksText=new T({text:r.i18n.getText("emptyLinkContainerInEditMode")}).addStyleClass("sapUshellNoLinksAreaPresentTextInner");this.oTransformationErrorText=new T({text:r.i18n.getText("transformationErrorText")}).addStyleClass("sapUshellTransformationErrorText");this.oTransformationErrorIcon=new I({src:"sap-icon://message-error"}).addStyleClass("sapUshellTransformationErrorIcon");this.oIcon=new I({src:this.getIcon()});this.oIcon.addStyleClass("sapUshellContainerIcon");this.oEditInputField=new a({placeholder:r.i18n.getText("new_group_name"),value:this.getHeaderText(),maxLength:100}).addStyleClass("sapUshellTileContainerTitleInput");this.oEditInputField.addEventDelegate({onfocusout:this.setEditMode.bind(this,false),onsapenter:this.setEditMode.bind(this,false)});this._setGridLayout();};
f.prototype.exit=function(){if(this.oNoLinksText){this.oNoLinksText.destroy();}if(this.oTransformationErrorText){this.oTransformationErrorText.destroy();}if(this.oTransformationErrorIcon){this.oTransformationErrorIcon.destroy();}if(this.oIcon){this.oIcon.destroy();}if(this.oEditInputField){this.oEditInputField.destroy();}C.prototype.exit.apply(this,arguments);};
f.prototype.onAfterRendering=function(){var t=window.document.getElementById(this.getId()+"-titleText");if(t){t.addEventListener("click",function(){var g=this.getModel()&&this.getModel().getProperty("/enableRenameLockedGroup"),h=(g||!this.getIsGroupLocked())&&!this.getDefaultGroup()&&this.getTileActionModeActive();this.setEditMode(h);}.bind(this));}var E=this.oEditInputField.getDomRef();if(E){setTimeout(function(){E.querySelector("input").focus();this.oEditInputField.selectText(0,this.oEditInputField.getValue().length);}.bind(this),0);}var o=sap.ui.getCore().getEventBus();o.publish("launchpad","GroupHeaderVisibility");this.fireAfterRendering();};
f.prototype.getShowPlaceholder=function(){return false;};
f.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);return this;};
f.prototype.groupHasTiles=function(){var t=this.getTiles();if(this.getBindingContext()){var p=this.getBindingContext().sPath;t=this.getModel().getProperty(p).tiles;}return d.groupHasVisibleTiles(t,[]);};
f.prototype.getInnerContainersDomRefs=function(){var o=this.getDomRef();if(!o){return null;}var i=o.querySelector(".sapUshellTilesContainer-sortable"),l=o.querySelector(".sapUshellLineModeContainer");return[i,l];};
f.prototype.setTileActionModeActive=function(v){if(this.getTileActionModeActive()===v){return;}this.setProperty("tileActionModeActive",v);var g=this.getAggregation("_grid");if(v){g.addDragDropConfig(new D({groupName:"GridContainer",sourceAggregation:"items",dragStart:function(){this.fireTileDragStart();}.bind(this)}));g.addDragDropConfig(new G({groupName:"GridContainer",dropLayout:sap.ui.core.dnd.DropLayout.Horizontal,dropPosition:sap.ui.core.dnd.DropPosition.Between,targetAggregation:"items",dropIndicatorSize:function(i){return this._getItemLayoutData(i);}.bind(this),drop:function(i){this.fireTileDrop(i.getParameters());}.bind(this),dragEnter:function(){this.fireTileDragEnter();}.bind(this)}));}else{g.destroyDragDropConfig();}};
f.prototype.setEditMode=function(v,n){if(this.getEditMode()===v){return;}this.setProperty("editMode",v,false);this.getModel().setProperty("/editTitle",v,false);if(v){this.addStyleClass("sapUshellEditing");this.oEditInputField.setValue(n?"":this.getHeaderText());var E=sap.ui.getCore().getEventBus();E.publish("launchpad","scrollToGroup",{group:this,groupChanged:false,focus:false});}else{this.removeStyleClass("sapUshellEditing");var N=this.oEditInputField.getValue();N=N.substring(0,256).trim()||this.oEditInputField.getPlaceholder();if(N&&N!==this.getHeaderText()){this.fireTitleChange({newTitle:N});this.setHeaderText(N);}}};
f.prototype.setShowEmptyLinksArea=function(v){this.setProperty("showEmptyLinksArea",v,true);this.toggleStyleClass("sapUshellLinksAreaHidden",!v);};
f.prototype.setShowEmptyLinksAreaPlaceHolder=function(v){this.setProperty("showEmptyLinksArea",v,true);this.toggleStyleClass("sapUshellTileContainerEditMode",v);this.toggleStyleClass("sapUshellTileContainerTabsModeEmptyLinksArea",v);this.toggleStyleClass("sapUshellEmptyLinksAreaPlaceHolder",!v);};
f.prototype.setTileSizeBehavior=function(t){this.setProperty("tileSizeBehavior",t);this._setGridLayout();};
f._generateSetting=function(s,i){return new b({columns:i,rowSize:s,columnSize:s,gap:"0.5rem"});};
f.prototype._setGridLayout=function(){var t=this.getProperty("tileSizeBehavior"),u=this._getInternalGrid(),l;l=t==="Small"?{oBreakpoints:{"S":4,"M":6,"L":12,"XL":16},sSize:"4.375rem"}:{oBreakpoints:{"S":4,"M":6,"L":10,"XL":14},sSize:"5.25rem"};u.setLayout(new b({rowSize:l.sSize,columnSize:l.sSize,gap:"0.5rem"}));u.setLayoutXS(f._generateSetting("4.375rem",4));u.setLayoutS(f._generateSetting(l.sSize,l.oBreakpoints.S));u.setLayoutM(f._generateSetting(l.sSize,l.oBreakpoints.M));u.setLayoutL(f._generateSetting(l.sSize,l.oBreakpoints.L));u.setLayoutXL(f._generateSetting(l.sSize,l.oBreakpoints.XL));return this;};
f.prototype._getInternalGrid=function(){return this.getAggregation("_grid");};
f.prototype.addAggregation=function(A,o){C.prototype.addAggregation.apply(this,arguments);if(A==="tiles"){this._addItemLayoutData(o);}return this;};
f.prototype.insertAggregation=function(A,o,i){C.prototype.insertAggregation.apply(this,arguments);if(A==="tiles"){this._addItemLayoutData(o);}return this;};
f.prototype._getItemLayoutData=function(i){var l={rows:2,columns:2};if(i.isA("sap.ushell.ui.launchpad.Tile")){l={rows:2,columns:{path:"long",formatter:f._getItemLayoutColumn}};}else if(i.isA("sap.m.GenericTile")){l={rows:2,columns:2};}else if(i.isA("sap.ui.integration.widgets.Card")){var o=i.getManifest(),s=d.getMember(o,"sap|flp.rows")||3,g=d.getMember(o,"sap|flp.columns")||3;l={rows:parseInt(s,10),columns:parseInt(g,10)};}return l;};
f.prototype._addItemLayoutData=function(i){var l=this._getItemLayoutData(i),o=new c(l);i.setLayoutData(o);};
f._getItemLayoutColumn=function(l){return l?4:2;};
f.prototype.getMaximumItemNumber=function(){return this._getInternalGrid().getActiveLayoutSettings().getColumns()/2;};
f.prototype.getActiveGapSize=function(){return this._getInternalGrid().getActiveLayoutSettings().getGapInPx();};
return f;});
sap.ui.predefine('sap/ushell/ui/launchpad/GridContainerRenderer',["sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/utils","sap/ushell/Config"],function(r,A,u,C){"use strict";var G={};
G.render=function(R,c){var h=c.getHeaderActions(),b=c.getBeforeContent(),a=c.getAfterContent(),f=c.getFooterContent()||[],g=c.getAggregation("_grid"),d,l=c.getLinks(),i;R.write("<div");R.writeControlData(c);R.addClass("sapUshellTileContainer");R.writeClasses();R.write(">");if(b.length&&c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellTileContainerBeforeContent");R.addClass("sapContrastPlus");R.writeClasses();R.write(">");b.forEach(function(c){R.renderControl(c);});R.write("</div>");}R.write("<div");R.addClass("sapUshellTileContainerContent");R.addClass("sapUshellGridContainerContent");if(c.getIsGroupLocked()){R.addClass("sapUshellTileContainerLocked");}if(c.getDefaultGroup()){R.addClass("sapUshellTileContainerDefault");}if(c.getShowBackground()){R.addClass("sapUshellTileContainerEditMode");}R.writeClasses();R.writeAttribute("tabindex","-1");R.write(">");if(c.getShowBackground()){R.write("<div");R.addClass("sapUshellGroupBackgroundContainer sapContrastPlus");R.writeClasses();R.write(">");R.write("</div>");}if(c.getShowHeader()){R.write("<div");R.addClass("sapUshellTileContainerHeader sapContrastPlus");if(!c.getShowGroupHeader()){R.addClass("sapUshellFirstGroupHeaderHidden sapUiPseudoInvisibleText");}R.writeAttribute("id",c.getId()+"-groupheader");R.writeClasses();if(c.getIeHtml5DnD()&&!c.getIsGroupLocked()&&!c.getDefaultGroup()&&c.getTileActionModeActive()){R.writeAttribute("draggable","true");}var s;if(c.getDefaultGroup()){s=r.i18n.getText("ariaLabelEditModeGroupDefault",c.getHeaderText());}else if(c.getIsGroupLocked()){s=r.i18n.getText("ariaLabelEditModeGroupLocked",c.getHeaderText());}else{s=r.i18n.getText("ariaLabelEditModeGroup",c.getHeaderText());}R.writeAccessibilityState(c,{label:s});R.write(">");R.write("<div");R.writeAttribute("id",c.getId()+"-title");R.addClass("sapUshellContainerTitleFlex");R.writeClasses();R.write(">");R.write("<");R.write(c.getHeaderLevel().toLowerCase());R.addClass("sapUshellContainerTitle");R.writeClasses();R.writeAttributeEscaped("title",c.getHeaderText());R.writeAttribute("id",c.getId()+"-titleText");R.writeAttribute("data-role","group");R.write(">");R.writeEscaped(c.getHeaderText());R.write("</");R.write(c.getHeaderLevel().toLowerCase());R.writeAttribute("id",c.getId()+"-groupheader");R.write(">");if(c.getShowIcon()){c.oIcon.removeStyleClass("sapUshellContainerIconHidden");}else{c.oIcon.addStyleClass("sapUshellContainerIconHidden");}R.renderControl(c.oEditInputField);if(c.getIsGroupLocked()){R.renderControl(c.oIcon);}else if(c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellContainerHeaderActions");R.writeClasses();R.write(">");for(i=0;i<h.length;i++){R.renderControl(h[i]);}R.write("</div>");}R.write("</div>");R.write("</div>");}R.write("<ul");d=c.data("containerHeight");if(d){R.writeAttribute("style","height:"+d);}R.addClass("sapUshellTilesContainer-sortable");R.addClass("sapUshellInner");R.writeClasses();R.writeAccessibilityState(c,{role:"listbox"});R.write(">");var v=[];c.getTiles().forEach(function(T){if(T.getVisible()){v.push(T);}});v.forEach(function(m,p){m.addCustomData(new A({key:"aria-posinset",value:(p+1).toString(),writeToDom:true}));m.addCustomData(new A({key:"aria-setsize",value:v.length.toString(),writeToDom:true}));if(this._isUserActivityCard(m)){this._updateUserActivityCardVisibility(m);}}.bind(this));R.renderControl(g);R.write("</ul>");var L=c.getSupportLinkPersonalization();if(l.length>0||L){R.write("<div aria-hidden='true'");var e=L?"sapUshellLineModeContainer":"sapUshellLinksContainer";R.addClass(e);if(!l.length&&L){R.addClass("sapUshellNoLinksAreaPresent");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellNoLinksAreaPresentText");R.writeClasses();R.write(">");R.renderControl(c.oNoLinksText);R.write("</div>");}else{R.writeClasses();R.write(">");}if(L){R.write("<div");R.addClass("sapUshellTransformationError");R.writeClasses();if(!c.transformationError){R.writeAttribute("style","display: none;");}R.write(">");R.write("<div");R.addClass("sapUshellTransformationErrorInnerWrapper");R.writeClasses();R.write(">");R.renderControl(c.oTransformationErrorIcon);R.renderControl(c.oTransformationErrorText);R.write("</div>");R.write("</div>");R.write("<div class='sapUshellLinksInnerContainer'>");for(i=0;i<l.length;i++){var o=l[i],k=o.getCustomData(),t="-1";for(var j=0;j<k.length;j++){if(k[j].getKey()==="tabindex"){t=k[j].getValue();}o.removeCustomData(k[j]);}o.addCustomData(new A({key:"aria-posinset",value:(i+1).toString(),writeToDom:true}));o.addCustomData(new A({key:"aria-setsize",value:l.length.toString(),writeToDom:true}));o.addCustomData(new A({key:"tabindex",value:t,writeToDom:true}));o.addStyleClass("sapUshellLinkTile");if(c.getIsGroupLocked()){o.addStyleClass("sapUshellLockedTile");}R.renderControl(o);}R.write("</div>");}R.write("</div>");}if(f.length>0){R.write("<footer");R.addClass("sapUshellTilesContainerFtr");R.writeClasses();R.write(">");f.forEach(function(c){R.renderControl(c);});R.write("</footer>");}R.write("</div>");if(a.length&&c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellTileContainerAfterContent");R.addClass("sapContrastPlus ");R.writeClasses();R.write(">");a.forEach(function(c){R.renderControl(c);});R.write("</div>");}R.write("</div>");u.setPerformanceMark("FLP -- tile container renderer");};
G._updateUserActivityCardVisibility=function(c){c.setVisible(C.last("/core/shell/model/enableTrackingActivity"));C.on("/core/shell/model/enableTrackingActivity").do(function(e){c.setVisible(e);});};
G._isUserActivityCard=function(c){if(typeof c.getManifest!=="function"){return false;}var m=c.getManifest();var s=m&&m["sap.card"]&&m["sap.card"].header&&m["sap.card"].header.title;return s===r.i18n.getText("recentActivities")||s===r.i18n.getText("frequentActivities");};
return G;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/GroupHeaderActions',["sap/m/Button","sap/m/library","sap/ui/core/Control","sap/ushell/library"],function(B,m,C){"use strict";var a=m.ButtonType;var P=m.PlacementType;
var G=C.extend("sap.ushell.ui.launchpad.GroupHeaderActions",{
metadata:{library:"sap.ushell",properties:{isOverflow:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}}},
renderer:{apiVersion:2,render:function(r,g){r.openStart("div",g);r.openEnd();var c=g.getContent();if(g.getTileActionModeActive()){if(g.getIsOverflow()){var h=c.some(function(o){return o.getVisible();});if(h){r.renderControl(g._getOverflowButton());}}else{c.forEach(function(o){r.renderControl(o);});}}r.close("div");}}
});
G.prototype.exit=function(){if(this._oOverflowButton){this._oOverflowButton.destroy();}if(this._oActionSheet){this._oActionSheet.destroy();}};
G.prototype._getOverflowButton=function(){if(!this._oOverflowButton){this._oOverflowButton=new B({icon:"sap-icon://overflow",type:a.Transparent,enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:function(){sap.ui.require(["sap/m/ActionSheet"],function(A){if(!this._oActionSheet){this._oActionSheet=new A({placement:P.Auto});}this._oActionSheet.destroyButtons();this.getContent().forEach(function(b){var c=b.clone();c.setModel(b.getModel());c.setBindingContext(b.getBindingContext());this._oActionSheet.addButton(c);}.bind(this));this._oActionSheet.openBy(this._oOverflowButton);}.bind(this));}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");this._oOverflowButton.setParent(this);}return this._oOverflowButton;};
return G;});
sap.ui.predefine('sap/ushell/ui/launchpad/GroupListItem',['sap/m/ListItemBase','sap/ushell/library','sap/ushell/utils','./GroupListItemRenderer'],function(L,l,u){"use strict";
var G=L.extend("sap.ushell.ui.launchpad.GroupListItem",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},show:{type:"boolean",group:"Misc",defaultValue:true},groupId:{type:"string",group:"Misc",defaultValue:null},index:{type:"int",group:"Misc",defaultValue:null},numberOfTiles:{type:"int",group:"Misc",defaultValue:0},isGroupVisible:{type:"boolean",group:"Misc",defaultValue:true}},events:{press:{},afterRendering:{}}}});
G.prototype.exit=function(){L.prototype.exit.apply(this,arguments);};
G.prototype.onAfterRendering=function(){this.fireAfterRendering();};
G.prototype.groupHasVisibleTiles=function(){var g=this.getModel().getProperty("/groups/"+this.getIndex()+"/tiles");var a=this.getModel().getProperty("/groups/"+this.getIndex()+"/links");return u.groupHasVisibleTiles(g,a);};
G.prototype.onclick=function(){this.firePress({id:this.getId()});};
G.prototype.setGroupId=function(g){this.setProperty("groupId",g,true);return this;};
G.prototype.setTitle=function(t){this.setProperty("title",t);this.$().find(".sapMSLITitleOnly").text(t);return this;};
return G;});
sap.ui.predefine('sap/ushell/ui/launchpad/GroupListItemRenderer',["sap/m/ListItemBaseRenderer","sap/ui/core/Renderer"],function(L,R){"use strict";var G=R.extend(L);
G.renderLIAttributes=function(r){r.addClass("sapUshellGroupLI");r.addClass("sapUshellGroupListItem");};
G.renderLIContent=function(r,l){r.write("<div");r.addClass("sapMSLIDiv");r.addClass("sapMSLITitleDiv");r.writeClasses();if(!l.getVisible()){r.addStyle("display","none");r.writeStyles();}r.write(">");r.write("<div");r.addClass("sapMSLITitleOnly");r.writeClasses();r.write(">");r.writeEscaped(l.getTitle());r.write("</div>");r.write("</div>");};
return G;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/LinkTileWrapper',["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/base/Log","./LinkTileWrapperRenderer"],function(q,M,C,A,L){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.LinkTileWrapper",{metadata:{library:"sap.ushell",properties:{uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},target:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},debugInfo:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},footItems:{type:"sap.ui.core.Control",multiple:true,singularName:"footItem"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{}}}});
a.prototype.ontap=function(){L.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");return;};
a.prototype.destroy=function(s){this.destroyTileViews();C.prototype.destroy.call(this,s);};
a.prototype.addTileView=function(o,s){o.setParent(null);o.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));M.prototype.addAggregation.call(this,"tileViews",o,s);};
a.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0;}};
a.prototype.onAfterRendering=function(){this.fireAfterRendering();};
a.prototype._launchTileViaKeyboard=function(e){if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],p=false,c;if(t.firePress){c=document.createEvent("MouseEvents");c.initEvent("click",false,true);t.getDomRef().dispatchEvent(c);}else{while(t.getContent&&!p){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});p=true;}}}}};
a.prototype.onsapenter=function(e){this._launchTileViaKeyboard(e);};
a.prototype.onsapspace=function(e){this._launchTileViaKeyboard(e);};
a.prototype.onclick=function(e){if(this.getTileActionModeActive()){e.preventDefault();}else{var c=this.getTileViews()[0].getContent?c.getContent()[0]:this.getTileViews()[0];sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileLinkClick");}};
a.prototype.setVisible=function(v){this.setProperty("visible",v,true);return this.toggleStyleClass("sapUshellHidden",!v);};
a.prototype.setAnimationRendered=function(v){this.setProperty("animationRendered",v,true);};
a.prototype._handleTileShadow=function(j,b){if(j.length){j.unbind("mouseenter mouseleave");var u,t=j.css("border").split("px")[0],m=this.getModel();if(t>0){u=j.css("border-color");}else{u=this.getRgba();}j.hover(function(){if(!m.getProperty("/tileActionModeActive")){var o=q(j).css("box-shadow"),T=o?o.split(") ")[1]:null,U;if(T){U=T+" "+u;q(this).css("box-shadow",U);}}},function(){q(this).css("box-shadow","");});}};
a.prototype.setUuid=function(u){this.setProperty("uuid",u,true);return this;};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/LinkTileWrapperRenderer',["sap/ushell/resources","sap/m/Text","sap/base/Log"],function(r,T,L){"use strict";var a={};
a.render=function(R,c){var t=null,l,s,m=c.getModel();try{t=c.getTileViews()[0];}catch(e){L.warning("Failed to load tile view: ",e.message);t=new T({text:r.i18n.getText("cannotLoadTile")});}R.write("<div");if(m&&m.getProperty("/enableHelp")){R.writeAttribute("data-help-id",c.getTileCatalogId());}R.writeControlData(c);R.addClass("sapUshellLinkTile");if(!c.getVisible()){R.addClass("sapUshellHidden");}if(c.getIsLocked()){R.addClass("sapUshellLockedTile");}R.writeClasses();if(c.getIeHtml5DnD()){R.writeAttribute("draggable","true");}R.writeAttributeEscaped("tabindex","-1");l=c.data("layoutPosition");if(l){s="-webkit-transform:"+l.translate3D+";-ms-transform:"+l.translate2D+";transform:"+l.translate3D;R.writeAttribute("style",s);}R.write(">");if(this.renderTileView){this.renderTileView(R,t,c.getTarget());}R.write("</div>");};
a.renderTileView=function(R,t,s){R.write("<div");R.addClass("sapUshellTileInner");R.writeClasses();R.writeAttributeEscaped("title",t&&t.getText?t.getText():"");R.write(">");R.renderControl(t);R.write("</div>");};
return a;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/LoadingDialog',["sap/m/Label","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/Popup","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/thirdparty/jquery","./LoadingDialogRenderer"],function(L,C,I,P,r,A,q){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{iconUri:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},text:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},loadAnimationWithInterval:{type:"boolean",group:"Appearance",defaultValue:true}}}});
a.prototype.init=function(){this._oPopup=new P();this._oPopup.restoreFocus=false;this._oPopup.setShadow(false);this._oPopup.setModal(true,"sapUshellLoadingDialog");this.oIcon=new I();this._oLabel=new L(this.getId()+"loadingLabel");this.sState="idle";this.sLoadingString=r.i18n.getText("genericLoading").replace("..."," ");};
a.prototype.exit=function(){this._oPopup.close();this._oPopup.destroy();this.oIcon.destroy();this._oLabel.destroy();};
a.prototype.isOpen=function(){return this._oPopup.isOpen();};
a.prototype.openLoadingScreen=function(){if(this.sState==="idle"){this.sState="busy";}if(this.getLoadAnimationWithInterval()){this.toggleStyleClass("sapUshellVisibilityHidden",true);this._iTimeoutId=setTimeout(function(){this.toggleStyleClass("sapUshellVisibilityHidden",false);this.$().focus();}.bind(this),3000);}else{this.toggleStyleClass("sapUshellVisibilityHidden",false);this.$().focus();}if(!this.getVisible()){this.setProperty("visible",true,true);this.$().show();}if(!this.isOpen()){this._oPopup.setContent(this);this._oPopup.setPosition("center center","center center",document,"0 0","fit");this._oPopup.open();}};
a.prototype.setLoadAnimationWithInterval=function(s){this.setProperty("loadAnimationWithInterval",s,true);};
a.prototype.showAppInfo=function(s,i,b){this.setProperty("text",s,true);this.setProperty("iconUri",i,true);this.oIcon.setSrc(i);this._oLabel.setText(s);this._oLabel.addCustomData(new A({key:"aria-hidden",value:"true",writeToDom:true}));if(q("#"+this.getId()+"accessibility-helper")[0]&&b){q("#"+this.getId()+"accessibility-helper")[0].innerText=this.sLoadingString;}};
a.prototype.closeLoadingScreen=function(){if(this._iTimeoutId){clearTimeout(this._iTimeoutId);}if(this.getVisible()){this.sState="idle";this.setProperty("visible",false,true);this.$().hide();this._oPopup.close();}};
a.prototype.onAfterRendering=function(){this.$().css("width","20rem");};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/LoadingDialogRenderer',["sap/ui/thirdparty/jquery"],function(q){"use strict";var L={};
L.render=function(r,c){var t=c.getTooltip_AsString();c._oLabel.addStyleClass("sapUshellLoadingDialogLabel");r.write("<div");r.writeControlData(c);r.addClass("sapUshellLoadingDialogControl");r.writeClasses();if(t){r.writeAttributeEscaped("title",t);}r.write(">");if(q.os.ios||!c._isPlatformDependent){this.renderAppInfo(r,c);this.renderFioriFlower(r,c);}else{this.renderFioriFlower(r,c);this.renderAppInfo(r,c);}r.write("</div>");};
L.renderAppInfo=function(r,c){r.write("<div").addClass("sapUshellLoadingDialogAppData").writeClasses().write(">");if(c.getIconUri()){r.renderControl(c.oIcon);}r.write("<span");r.writeAttribute("id",c.getId()+"accessibility-helper");r.addClass("sapUshellAccessibilityHelper");r.writeClasses();r.writeAccessibilityState(c,{live:"rude","relevant":"additions text"});r.write(">");r.write("</span>");r.renderControl(c._oLabel);r.write("</div>");};
L.renderFioriFlower=function(r){var i,R=false,u=[/Android\s4\.2.+GT-I9505.+Chrome\/18/];if(navigator.userAgent){for(i=0;i<u.length;i=i+1){if(u[i].test(navigator.userAgent)){R=true;break;}}}if(q.support.cssAnimations&&!R){r.write("<div id='fiori2-loader'>");r.write("<div class='fiori2-blossom'>");for(i=1;i<6;i=i+1){r.write("<div class='fiori2-leafContainer fiori2-leafContainer"+i+"'>");r.write("<div class='fiori2-leaf fiori2-leaf"+i+"'></div>");r.write("</div>");}r.write("</div>");r.write("</div>");}};
return L;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/Page',["sap/m/Button","sap/m/library","sap/m/Text","sap/ui/core/Control","sap/ui/core/dnd/DragDropInfo","sap/ui/core/library","sap/ushell/resources","sap/ushell/ui/launchpad/PageRenderer"],function(B,l,T,C,D,c,r){"use strict";var a=l.ButtonType;var b=c.TextAlign;
var P=C.extend("sap.ushell.ui.launchpad.Page",{metadata:{library:"sap.ushell",properties:{edit:{type:"boolean",group:"Misc",defaultValue:false},enableSectionReordering:{type:"boolean",group:"Misc",defaultValue:false},noSectionsText:{type:"string",group:"Misc",defaultValue:""},showTitle:{type:"boolean",group:"Misc",defaultValue:false},showNoSectionsText:{type:"boolean",group:"Misc",defaultValue:true},title:{type:"string",group:"Misc",defaultValue:""}},defaultAggregation:"sections",aggregations:{"sections":{type:"sap.ushell.ui.launchpad.Section",multiple:true,dnd:true},"_addSectionButtons":{type:"sap.m.Button",multiple:true,visibility:"hidden"},"_noSectionText":{type:"sap.m.Text",multiple:false,visibility:"hidden"}},events:{addSectionButtonPressed:{parameters:{index:{type:"int"}}},sectionDrop:{parameters:{draggedControl:{type:"sap.ushell.ui.launchpad.Section"},droppedControl:{type:"sap.ushell.ui.launchpad.Section"},dropPosition:{type:"string"}}}}}});
P.prototype.init=function(){this.setAggregation("_noSectionText",new T({text:r.i18n.getText("Page.NoSectionText"),width:"100%",textAlign:b.Center}));this._oDragDropInfo=new D({sourceAggregation:"sections",targetAggregation:"sections",dropPosition:"Between",drop:function(i){this.fireSectionDrop(i.getParameters());}.bind(this)});this.addEventDelegate({onsappageup:this._handleKeyboardPageNavigation.bind(this),onsappagedown:this._handleKeyboardPageNavigation.bind(this),onsapdown:this._handleKeyboardArrowNavigation.bind(this,false),onsapdownmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsapup:this._handleKeyboardArrowNavigation.bind(this,false),onsapupmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsaphome:this._handleKeyboardHomeEndNavigation.bind(this,false),onsaphomemodifiers:this._handleKeyboardHomeEndNavigation.bind(this,false),onsapend:this._handleKeyboardHomeEndNavigation.bind(this,true),onsapendmodifiers:this._handleKeyboardHomeEndNavigation.bind(this,true)});};
P.prototype.exit=function(){this._oDragDropInfo.destroy();};
P.prototype.onBeforeRendering=function(){var n=this.getSections().length,A=this.getAggregation("_addSectionButtons")||[],o;for(var i=A.length;i<n+1;i++){o=new B({type:a.Transparent,icon:"sap-icon://add",text:r.i18n.getText("Page.Button.AddSection"),press:this.fireAddSectionButtonPressed.bind(this,{index:i})});o.addStyleClass("sapUshellPageAddSectionButton");this.addAggregation("_addSectionButtons",o);}};
P.prototype.setEnableSectionReordering=function(v){this.setProperty("enableSectionReordering",!!v);if(v){this.addDragDropConfig(this._oDragDropInfo);}else{this.removeDragDropConfig(this._oDragDropInfo);}return this;};
P.prototype.setNoSectionsText=function(t){this.setProperty("noSectionsText",t);var n=this.getAggregation("_noSectionText");n.setText(t||r.i18n.getText("Page.NoSectionText"));return this;};
P.prototype._focusOrMovetoNextVisualization=function(i){var s=this.getSections(),S=this.indexOfSection(i.section),v=i.prefIndex,d=i.direction;while(true){if(d==="down"&&S<s.length-1){S++;}else if(d==="up"&&S>0){S--;}else{return;}var o=s[S],V=o.getVisualizations();if((i.visualization||V.length)&&(o.getShowSection()||o.getEdit())){if(i.prefIndex===undefined){v=d==="down"?0:Math.max(V.length-1,0);}if(i.visualization){o.fireVisualizationDrop({draggedControl:i.visualization,droppedControl:V.length?V[v]:o,dropPosition:d==="down"?"Before":"After"});if(d==="up"){v=V.length;}}i.event.preventDefault();break;}}window.setTimeout(function(){var e=this.getSections()[S].getVisualizations()[v],I=e.getInnerControl().getContent?e.getInnerControl().getContent()[0]:e.getInnerControl();I.focus();}.bind(this),0);};
P.prototype._handleKeyboardPageNavigation=function(e){var s=this.getSections();for(var i=0;i<s.length;i++){var S=this.getEdit()?this.getDomRef().getElementsByClassName("sapUshellPageSection")[i]:s[i].getDomRef();if(S.contains(window.document.activeElement)){this._focusOrMovetoNextVisualization({event:e,section:s[i],direction:e.type==="sappagedown"?"down":"up",prefIndex:0});return;}}};
P.prototype._handleKeyboardArrowNavigation=function(m,e){if((m&&!this.getEnableSectionReordering())||(m&&!e.ctrlKey)){return;}var s=this.getDomRef().getElementsByClassName("sapUshellPageSection");for(var i=0;i<s.length;i++){if(window.document.activeElement===s[i]){if(e.type==="sapup"&&i>0){s[i-1].focus();}else if(e.type==="sapdown"&&(i+1)<s.length){s[i+1].focus();}else if(e.type==="sapupmodifiers"&&i>0){this.fireSectionDrop({draggedControl:this.getSections()[i],droppedControl:this.getSections()[i-1],dropPosition:"Before"});e.preventDefault();s[i-1].focus();}else if(e.type==="sapdownmodifiers"&&(i+1)<s.length){this.fireSectionDrop({draggedControl:this.getSections()[i],droppedControl:this.getSections()[i+1],dropPosition:"After"});e.preventDefault();s[i+1].focus();}return;}}};
P.prototype._handleKeyboardHomeEndNavigation=function(L,e){var s=this.getSections(),v=[],S=this.getDomRef().getElementsByClassName("sapUshellPageSection"),E=this.getEdit(),o;for(var i=0;i<s.length;i++){if(e.type==="saphomemodifiers"||e.type==="sapendmodifiers"){o=s[i];if(o.getShowSection()||o.getEdit()){v=v.concat(o.getVisualizations());}}else if(E&&S[i].contains(window.document.activeElement)){v=s[i].getVisualizations();break;}}if(v.length){var V=L?v[v.length-1]:v[0],I=V.getInnerControl().getContent?V.getInnerControl().getContent()[0]:V.getInnerControl();e.preventDefault();I.focus();}};
P.prototype._handleSectionBorderReached=function(i){this._focusOrMovetoNextVisualization(i.getParameters());};
P.prototype.addAggregation=function(A,o){C.prototype.addAggregation.apply(this,arguments);if(A==="sections"){o.attachEvent("borderReached",this._handleSectionBorderReached.bind(this));}return this;};
P.prototype.insertAggregation=function(A,o){C.prototype.insertAggregation.apply(this,arguments);if(A==="sections"){o.attachEvent("borderReached",this._handleSectionBorderReached.bind(this));}return this;};
return P;});
sap.ui.predefine('sap/ushell/ui/launchpad/PageRenderer',[],function(){"use strict";var P={apiVersion:2,render:function(r,p){var s=p.getSections(),n=s.length,S,i;r.openStart("div",p);r.class("sapUshellPage");r.openEnd();if(p.getShowTitle()){r.openStart("h2",p.getId()+"-title");r.class("sapUshellPageTitle");r.openEnd();r.text(p.getTitle());r.close("h2");}if(p.getEdit()&&!n){r.renderControl(p.getAggregation("_addSectionButtons")[0]);}if(!n&&p.getShowNoSectionsText()){r.renderControl(p.getAggregation("_noSectionText"));}for(i=0;i<n;i++){S=s[i];r.openStart("div");r.class("sapUshellPageSection");if(p.getEdit()){r.attr("tabindex","0");r.attr("data-sap-ui-customfastnavgroup","true");}r.openEnd();r.renderControl(S);if(p.getEdit()){r.renderControl(p.getAggregation("_addSectionButtons")[i+1]);}r.close("div");}r.close("div");}};return P;});
sap.ui.predefine('sap/ushell/ui/launchpad/Panel',['sap/m/Panel','sap/ushell/library','sap/ushell/override','./PanelRenderer'],function(P,l,o){"use strict";
var a=P.extend("sap.ushell.ui.launchpad.Panel",{metadata:{library:"sap.ushell",properties:{translucent:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{headerContent:{type:"sap.ui.core.Control",multiple:true,singularName:"headerContent"},headerBar:{type:"sap.m.Bar",multiple:false}}}});
a.prototype.updateAggregation=o.updateAggregation;return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/PanelRenderer',function(){"use strict";var P={};
P.render=function(r,c){if(!c.getVisible()){return;}r.write("<section");r.writeControlData(c);r.addClass("sapMPanel");r.addClass("sapUshellPanel");if(!c.getTranslucent()){r.addClass("sapMPanelBG");}r.addStyle("width",c.getWidth());r.addStyle("height",c.getHeight());r.writeClasses();r.writeStyles();r.write(">");var h=c.getHeaderContent();var l=h.length;if(c.getHeaderText()||l>0||c.getHeaderBar()){r.write("<header");r.addClass("sapMPanelHdr");r.addClass("sapUshellCatalogHeader");r.writeClasses();r.write(">");if(c.getHeaderText()||l>0){r.write("<");r.write(c.getHeaderLevel().toLowerCase());r.write(">");if(c.getHeaderText()){r.writeEscaped(c.getHeaderText());}for(var j=0;j<l;j++){r.renderControl(h[j]);}r.write("</");r.write(c.getHeaderLevel().toLowerCase());r.write(">");}if(c.getHeaderBar()){r.renderControl(c.getHeaderBar());}r.write("</header>");}r.write("<div");r.addClass("sapMPanelContent");r.addClass("sapUshellPanelContent");r.writeClasses();r.write(">");var C=c.getContent();var L=C.length;for(var i=0;i<L;i++){r.renderControl(C[i]);}r.write("</div>");r.write("</section>");};
return P;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/PlusTile',['sap/ushell/library','./Tile','sap/ui/core/Icon','sap/ushell/resources','./PlusTileRenderer'],function(l,T,I,r){"use strict";
var P=T.extend("sap.ushell.ui.launchpad.PlusTile",{metadata:{library:"sap.ushell",properties:{groupId:{type:"string",group:"Misc",defaultValue:''},enableHelp:{type:"boolean",group:"Misc",defaultValue:false}},events:{press:{}}}});
P.prototype.init=function(){this.oIcon=new I({src:'sap-icon://add',tooltip:r.i18n.getText("openAppFinder_tooltip")});};
P.prototype.exit=function(){if(this.oIcon){this.oIcon.destroy();}};
P.prototype.onclick=function(){var g=this.getParent().getBindingContext().getObject();if(!g.object){return;}this.firePress();};
P.prototype.onsapspace=function(){this.firePress();};
P.prototype.onsapenter=function(){this.firePress();};
P.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);return this;};
return P;});
sap.ui.predefine('sap/ushell/ui/launchpad/PlusTileRenderer',['sap/ushell/resources','sap/ushell/Config'],function(r,C){"use strict";var P={};var t=r.i18n;
P.render=function(R,c){R.write("<li");R.writeAttribute("tabindex","-1");R.writeControlData(c);R.addClass("sapUshellTile");R.addClass("sapUshellPlusTile");if(C.last("/core/home/sizeBehavior")==="Small"){R.addClass("sapUshellSmall");R.addClass("sapUshellPlusTileSmall");}if(c.getEnableHelp()){R.addStyleClass("help-id-plusTile");}R.addClass("sapContrastPlus");R.addClass("sapMGT");R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("TilePlus_label")});R.write(">");R.renderControl(c.oIcon);R.write("</li>");};
return P;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/Section',["sap/f/GridContainerItemLayoutData","sap/m/library","sap/ui/core/XMLComposite","sap/ushell/resources","sap/ushell/utils","sap/ui/core/ResizeHandler"],function(G,l,X,r,u,R){"use strict";var T=l.TileSizeBehavior;
var S=X.extend("sap.ushell.ui.launchpad.Section",{
metadata:{library:"sap.ushell",properties:{editable:{type:"boolean",group:"Misc",defaultValue:false},enableAddButton:{type:"boolean",group:"Behavior",defaultValue:true},enableDeleteButton:{type:"boolean",group:"Behavior",defaultValue:true},enableGridBreakpoints:{type:"boolean",group:"Appearance",defaultValue:false},enableResetButton:{type:"boolean",group:"Behavior",defaultValue:true},enableShowHideButton:{type:"boolean",group:"Behavior",defaultValue:true},enableVisualizationReordering:{type:"boolean",group:"Behavior",defaultValue:false},noVisualizationsText:{type:"string",group:"Appearance",defaultValue:r.i18n.getText("Section.NoVisualizationsText")},title:{type:"string",group:"Appearance",defaultValue:""},showNoVisualizationsText:{type:"boolean",group:"Behavior",defaultValue:false},showSection:{type:"boolean",group:"Misc",defaultValue:true},sizeBehavior:{type:"sap.m.TileSizeBehavior",group:"Misc",defaultValue:T.Responsive}},defaultAggregation:"visualizations",aggregations:{visualizations:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--innerGrid",aggregation:"items"},dnd:true}},events:{"add":{},"delete":{},"reset":{},"titleChange":{},"visualizationDrop":{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}},"sectionVisibilityChange":{parameters:{visible:{type:"boolean"}}},"borderReached":{parameters:{event:{type:"jQuery.Event"}}}}},
resourceModel:r.i18nModel
});
S.prototype.init=function(){this.oVBox=this.byId("content");this.byId("innerGrid").addEventDelegate({onBeforeRendering:function(){R.deregister(this._sHandleResizeId);}.bind(this),onAfterRendering:function(){this._sHandleResizeId=R.register(this.oVBox,this._handleResize.bind(this));this.oVBox.toggleStyleClass("sapUshellSectionNoVisualizations",!this.getVisualizations().length);}.bind(this)});this.addEventDelegate({onsapleft:this._handleKeyboardArrowNavigation.bind(this,false),onsapleftmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsapright:this._handleKeyboardArrowNavigation.bind(this,false),onsaprightmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsapup:this._handleKeyboardArrowNavigation.bind(this,false),onsapupmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsapdown:this._handleKeyboardArrowNavigation.bind(this,false),onsapdownmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsaphome:this._setFocusOnVisualizationWithIndex.bind(this,0),onsapend:this._setFocusOnVisualizationWithIndex.bind(this,"last")});};
S.prototype._setFocusOnVisualizationWithIndex=function(i,e){e.preventDefault();e.stopPropagation();window.setTimeout(function(){var v=this.getVisualizations();if(v.length){var n=v[i==="last"?v.length-1:i],N=n.getInnerControl().getContent?n.getInnerControl().getContent()[0]:n.getInnerControl();N.focus();}}.bind(this),0);};
S.prototype._handleKeyboardArrowNavigation=function(m,e){if((m&&!this.getEnableVisualizationReordering())||(m&&!e.ctrlKey)){return;}var v=this.getVisualizations();for(var i=0;i<v.length;i++){var V=v[i],I=V.getInnerControl().getContent?V.getInnerControl().getContent()[0]:V.getInnerControl();if(window.document.activeElement===I.getDomRef()){if(e.type==="sapleft"||e.type==="sapup"){if(i>0){this._setFocusOnVisualizationWithIndex(i-1,e);}else{this.fireBorderReached({event:e,section:this,direction:"up"});e.stopPropagation();}}else if(e.type==="sapright"||e.type==="sapdown"){if((i+1)<v.length){this._setFocusOnVisualizationWithIndex(i+1,e);}else{this.fireBorderReached({event:e,section:this,direction:"down"});e.stopPropagation();}}else if(e.type==="sapleftmodifiers"||e.type==="sapupmodifiers"){if(i>0){this.fireVisualizationDrop({draggedControl:this.getVisualizations()[i],droppedControl:this.getVisualizations()[i-1],dropPosition:"Before"});this._setFocusOnVisualizationWithIndex(i-1,e);}else{this.fireBorderReached({event:e,section:this,direction:"up",visualization:V});e.stopPropagation();}}else if(e.type==="saprightmodifiers"||e.type==="sapdownmodifiers"){if((i+1)<v.length){this.fireVisualizationDrop({draggedControl:this.getVisualizations()[i],droppedControl:this.getVisualizations()[i+1],dropPosition:"After"});this._setFocusOnVisualizationWithIndex(i+1,e);}else{this.fireBorderReached({event:e,section:this,direction:"down",visualization:V});e.stopPropagation();}}return;}}};
S.prototype.setEditable=function(v){this.setProperty("editable",!!v);this.oVBox.toggleStyleClass("sapUshellSectionEdit",!!v);};
S.prototype.setShowSection=function(v,e){this.setProperty("showSection",!!v);this.oVBox.toggleStyleClass("sapUshellSectionHidden",!v);this.fireSectionVisibilityChange({visible:!!v});};
S.prototype._reorderVisualizations=function(i){this.fireVisualizationDrop(i.getParameters());};
S.prototype.addAggregation=function(a,o){X.prototype.addAggregation.apply(this,arguments);if(a==="visualizations"){this._addVisualizationLayoutData(o);}return this;};
S.prototype.insertAggregation=function(a,o){X.prototype.insertAggregation.apply(this,arguments);if(a==="visualizations"){this._addVisualizationLayoutData(o);}return this;};
S.prototype._getVisualizationLayoutData=function(v){if(v.getLayout){return v.getLayout();}return{rows:2,columns:2};};
S.prototype._addVisualizationLayoutData=function(v){if(!v.getLayoutData()){var L=this._getVisualizationLayoutData(v);v.setLayoutData(new G(L));}};
S.prototype._handleResize=function(e){var i=this.byId("innerGrid");if(e.size.width<376){i.setContainerQuery(false);}else if(e.size.width>=376){i.setContainerQuery(true);}};
return S;});
sap.ui.predefine('sap/ushell/ui/launchpad/ShortcutsHelpContainer',["sap/ui/core/Control","./ShortcutsHelpContainerRenderer"],function(C){"use strict";
var S=C.extend("sap.ushell.ui.launchpad.ShortcutsHelpContainer",{metadata:{aggregations:{content:{type:"sap.ui.core.Element",multiple:true,singularName:"content"}}}});
return S;});
sap.ui.predefine('sap/ushell/ui/launchpad/ShortcutsHelpContainerRenderer',[],function(){"use strict";var S={};
S.render=function(r,c){var C=c.getContent()||[];r.write("<div");r.writeControlData(c);r.addClass("sapUshelShortcutsHelpContainer");r.writeClasses();r.writeAccessibilityState(c,{role:"group"});r.write(">");C.forEach(function(e){var s=e.isA("sap.m.Label")?"sapUshelShortcutsHelpContainerLabel":"sapUshelShortcutsHelpContainerText";r.write("<div");r.addClass(s);r.writeClasses();r.write(">");r.renderControl(e);r.write("</div>");});r.write("</div>");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/Tile',["sap/m/Text","sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/Icon","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/base/Log","./TileRenderer"],function(T,q,M,C,I,r,A,L){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{long:{type:"boolean",group:"Misc",defaultValue:false},uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},isCustomTile:{type:"boolean",group:"Misc",defaultValue:false},target:{type:"string",group:"Misc",defaultValue:null},debugInfo:{type:"string",group:"Misc",defaultValue:null},rgba:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},showActionsIcon:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},navigationMode:{type:"string",group:"Misc",defaultValue:null},isDraggedInTabBarToSourceGroup:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},pinButton:{type:"sap.ui.core.Control",multiple:true,singularName:"pinButton"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{},deletePress:{}}}});
a.prototype.init=function(){this.addEventDelegate({onsapenter:this._launchTileViaKeyboard.bind(this),onsapspace:this._launchTileViaKeyboard.bind(this)});};
a.prototype.exit=function(){if(this.actionSheetIcon){this.actionSheetIcon.destroy();}if(this.actionIcon){this.actionIcon.destroy();}if(this.failedToLoadViewText){this.failedToLoadViewText.destroy();}};
a.prototype.getFailedtoLoadViewText=function(){if(!this.failedToLoadViewText){this.failedToLoadViewText=new T({text:r.i18n.getText("Tile.failedToLoadView")});}return this.failedToLoadViewText;};
a.prototype.getActionSheetIcon=function(){if(!this.getTileActionModeActive()){return undefined;}if(!this.actionSheetIcon){this.actionSheetIcon=new I({src:"sap-icon://overflow",tooltip:r.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner");}return this.actionSheetIcon;};
a.prototype.ontap=function(){L.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");this.firePress();};
a.prototype.destroy=function(s){this.destroyTileViews();C.prototype.destroy.call(this,s);};
a.prototype.addTileView=function(o,s){o.setParent(null);M.prototype.addAggregation.call(this,"tileViews",o,s);};
a.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0;}};
a.prototype.onBeforeRendering=function(){var d=this.getDomRef();if(d){var i=d.querySelector("a.sapUshellTileInner");if(i){i.onclick=null;}}};
a.prototype.onAfterRendering=function(){if(this.getIsDraggedInTabBarToSourceGroup()){var t=this.getParent();t.removeAggregation("tiles",this,false);}this._redrawRGBA();this._disableInnerLink();this.fireAfterRendering();};
a.prototype._disableInnerLink=function(){var d=this.getDomRef();var i=d.querySelector("a.sapUshellTileInner");if(i){i.onclick=function(e){e.preventDefault();};}};
a.prototype._launchTileViaKeyboard=function(e){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()});}else{this._announceLoadingApplication();if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],p=false,c,o;if(t.firePress){t.firePress({id:this.getId()});}else if(t.getComponentInstance){c=t.getComponentInstance();if(c._oController&&c._oController.oView.getContent()){o=c._oController.oView.getContent()[0];if(o&&o.firePress){o.firePress({id:this.getId()});}}}else{while(t.getContent&&!p){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});p=true;}}}}}};
a.prototype.onfocusin=function(){var t=this.getDomRef();if(!t.classList.contains("sapUshellPlusTile")){var j=this.$().prevUntil("h3"),c;if(j.length>0){c=j[j.length-1].previousSibling;}else{c=t.previousSibling;}var o=t.querySelector(".sapUshellTileInner");if(o&&o.children&&o.children[0]){var l=[];if(c){l.push("sapUshellCatalogAccessibilityTileText");}else{l.push("sapUshellDashboardAccessibilityTileText");}var n=this.getNavigationMode();if(n){var N=r.i18n.getText(n+"NavigationMode");if(N){var s=this.getId()+"-navigationMode";if(!document.getElementById(s)){var b=document.createElement("div");b.setAttribute("id",s);b.style.display="none";b.innerText=N;o.appendChild(b);}l.push(s);}else{L.warning("The navigation mode is of a unkown mode, it can not be read!");}}l.push(o.children[0].getAttribute("id"));var d=t.querySelector(".sapUshellTileDeleteClickArea .sapUiIcon");if(d){l.push(d.id);}if(c){l.push(c.getAttribute("id"));}if(this.getTileActionModeActive()){l.push("sapUshellDashboardAccessibilityTileEditModeText");}t.setAttribute("aria-labelledby",l.join(" "));}}};
a.prototype.onclick=function(e){if(this.getTileActionModeActive()){var s=e.originalEvent.srcElement;if(q(s).closest(".sapUshellTileDeleteClickArea").length>0){this.fireDeletePress();}else{this.fireCoverDivPress({id:this.getId()});}}else{this._announceLoadingApplication();}};
a.prototype._announceLoadingApplication=function(){var o=document.getElementById("sapUshellLoadingAccessibilityHelper-appInfo"),l=r.i18n.getText("screenReaderNavigationLoading");if(o){o.setAttribute("role","alert");o.innerText=l;setTimeout(function(){o.removeAttribute("role");o.innerText="";},0);}};
a.prototype._initDeleteAction=function(){var t=this;if(!this.deleteIcon){this.deleteIcon=new I({src:"sap-icon://decline",tooltip:r.i18n.getText("removeButtonTItle")});this.deleteIcon.addEventDelegate({onclick:function(e){t.fireDeletePress();e.stopPropagation();}});this.deleteIcon.addStyleClass("sapUshellTileDeleteIconInnerClass");this.deleteIcon.addCustomData(new A({key:"aria-label",value:r.i18n.getText("removeButtonLabel"),writeToDom:true}));}return this.deleteIcon;};
a.prototype.setShowActionsIcon=function(s){if(s){if(!this.actionIcon){this.actionIcon=new I({size:"1rem",src:"sap-icon://overflow",press:function(){this.fireShowActions();this.addStyleClass("showTileActionsIcon");var e=sap.ui.getCore().getEventBus(),b=function(n,c,t){t.removeStyleClass("showTileActionsIcon");e.unsubscribe("dashboard","actionSheetClose",b);};e.subscribe("dashboard","actionSheetClose",b);}.bind(this)}).addStyleClass("sapUshellTileActionsIconClass");}}this.setProperty("showActionsIcon",s);};
a.prototype.setIsDraggedInTabBarToSourceGroup=function(d){this.setProperty("isDraggedInTabBarToSourceGroup",d);this.setVisible(!d);};
a.prototype.setRgba=function(v){this.setProperty("rgba",v);this._redrawRGBA();};
a.prototype._redrawRGBA=function(){var R=this.getRgba(),j=this.$();if(R&&j){var m=this.getModel();if(m&&!m.getProperty("/animationRendered")){j.css("transition","background-color 2s");}j.css("background-color",R);j.unbind("mouseenter mouseleave");var u,t=j.css("border").split("px")[0];if(t>0){u=j.css("border-color");}else{u=R;}j.hover(function(){if(m&&!m.getProperty("/tileActionModeActive")){var o=j.css("box-shadow"),s=o?o.split(") ")[1]:null;if(s){j.css("box-shadow",s+" "+u);}}},function(){j.css("box-shadow","");});}};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/TileContainer',["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/m/library","sap/ui/core/Icon","sap/m/Text","sap/ushell/override","sap/ushell/resources","sap/ushell/ui/launchpad/PlusTile","sap/base/Log","sap/ushell/utils","sap/ui/Device","sap/ushell/ui/launchpad/TileContainerRenderer"],function(q,M,C,a,I,T,o,r,P,L,u,D){"use strict";var H=a.HeaderLevel;
var b=C.extend("sap.ushell.ui.launchpad.TileContainer",{metadata:{library:"sap.ushell",properties:{scrollType:{type:"string",group:"Misc",defaultValue:"item"},animationSpeed:{type:"int",group:"Misc",defaultValue:500},groupId:{type:"string",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:true},showPlaceholder:{type:"boolean",group:"Misc",defaultValue:true},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},isLastGroup:{type:"boolean",group:"Misc",defaultValue:false},headerText:{type:"string",group:"Misc",defaultValue:null},headerLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:H.H2},groupHeaderLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:H.H4},showGroupHeader:{type:"boolean",group:"Misc",defaultValue:true},homePageGroupDisplay:{type:"string",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},sortable:{type:"boolean",group:"Misc",defaultValue:true},showNoData:{type:"boolean",group:"Misc",defaultValue:false},noDataText:{type:"string",group:"Misc",defaultValue:null},isGroupLocked:{type:"boolean",group:"Misc",defaultValue:null},isGroupSelected:{type:"boolean",group:"Misc",defaultValue:false},editMode:{type:"boolean",group:"Misc",defaultValue:false},showBackground:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Misc",defaultValue:"sap-icon://locked"},showIcon:{type:"boolean",group:"Misc",defaultValue:false},deluminate:{type:"boolean",group:"Misc",defaultValue:false},showMobileActions:{type:"boolean",group:"Misc",defaultValue:false},enableHelp:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},hidden:{type:"boolean",group:"Misc",defaultValue:false},transformationError:{type:"boolean",group:"Misc",defaultValue:false},supportLinkPersonalization:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tiles:{type:"sap.ui.core.Control",multiple:true,singularName:"tile"},links:{type:"sap.ui.core.Control",multiple:true,singularName:"link"},beforeContent:{type:"sap.ui.core.Control",multiple:true,singularName:"beforeContent"},afterContent:{type:"sap.ui.core.Control",multiple:true,singularName:"afterContent"},footerContent:{type:"sap.ui.core.Control",multiple:true,singularName:"footerContent"},headerActions:{type:"sap.ui.core.Control",multiple:true,singularName:"headerAction"}},events:{afterRendering:{},add:{},titleChange:{}}}});
b.prototype.init=function(){this.bIsFirstTitleChange=true;this._sDefaultValue=r.i18n.getText("new_group_name");this._sOldTitle="";this.oNoLinksText=new T({text:r.i18n.getText("emptyLinkContainerInEditMode")}).addStyleClass("sapUshellNoLinksAreaPresentTextInner");this.oTransformationErrorText=new T({text:r.i18n.getText("transformationErrorText")}).addStyleClass("sapUshellTransformationErrorText");this.oTransformationErrorIcon=new I({src:"sap-icon://message-error"}).addStyleClass("sapUshellTransformationErrorIcon");this.oIcon=new I({src:this.getIcon()});this.oIcon.addStyleClass("sapUshellContainerIcon");this.oPlusTile=new P({groupId:this.getGroupId(),enableHelp:this.getEnableHelp(),press:[this.fireAdd,this]});this.oPlusTile.setParent(this);if(sap.ushell.Container!==undefined){if(sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported()){b.prototype.isLinkPersonalizationOveride();}}};
b.prototype.onAfterRendering=function(){var t=window.document.getElementById(this.getId()+"-titleText");if(t){t.addEventListener("click",function(){var E=this.getModel()&&this.getModel().getProperty("/enableRenameLockedGroup"),d=(E||!this.getIsGroupLocked())&&!this.getDefaultGroup()&&this.getTileActionModeActive();this.setEditMode(d);}.bind(this));}var c=this.getTiles().filter(function(d){return d.isA("sap.ui.integration.widgets.Card");});this._resizeCards(c);var e=sap.ui.getCore().getEventBus();e.publish("launchpad","GroupHeaderVisibility");this.fireAfterRendering();};
b.prototype.getTransformationErrorText=function(){return this.oTransformationErrorText;};
b.prototype.getTransformationErrorIcon=function(){return this.oTransformationErrorIcon;};
b.prototype.getNoLinksText=function(){return this.oNoLinksText;};
b.prototype.setTransformationError=function(t){this.setProperty("transformationError",t,true);if(t){this.$().find(".sapUshellTransformationError").show();}else{this.$().find(".sapUshellTransformationError").hide();}this.$().find(".sapUshellNoLinksAreaPresent").toggleClass("sapUshellNoLinksAreaPresentError",t);return this;};
b.prototype.updateAggregation=o.updateAggregation;
b.prototype.setNoDataText=function(n){this.setProperty("noDataText",n,true);if(this.getShowNoData()){this.$().find(".sapUshellNoFilteredItems").text(n);}return this;};
b.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);if(this.oPlusTile){this.oPlusTile.setGroupId(v);}return this;};
b.prototype.setHeaderText=function(h){this.setProperty("headerText",h,true);this.$().find(".sapUshellContainerTitle").text(h);return this;};
b.prototype.setVisible=function(v){this.setProperty("visible",v,true);this.toggleStyleClass("sapUshellHidden",!v);return this;};
b.prototype.setShowMobileActions=function(s){var S=true;if(this.oHeaderButton){this.oHeaderButton.setVisible(s);}else if(s){S=false;}this.setProperty("showMobileActions",s,S);};
b.prototype.setShowIcon=function(s){this.setProperty("showIcon",s,true);this.$().find(".sapUshellContainerIcon").toggleClass("sapUshellContainerIconHidden",!s);};
b.prototype.setDeluminate=function(d){this.setProperty("deluminate",d,true);this.toggleStyleClass("sapUshellDisableLockedGroupDuringDrag",d);return this;};
b.prototype.setHidden=function(h){this.setProperty("hidden",!!h,true);this.toggleStyleClass("sapUshellTileContainerEditModeHidden",!!h);return this;};
b.prototype.groupHasTiles=function(){var p="",t=this.getTiles(),l=[];if(this.getBindingContext()){p=this.getBindingContext().sPath;t=this.getModel().getProperty(p).tiles;}return u.groupHasVisibleTiles(t,l);};
b.prototype.getInnerContainerDomRef=function(){return this.$().find(".sapUshellTilesContainer-sortable")[0];};
b.prototype.getInnerContainersDomRefs=function(){var d=this.getDomRef();if(!d){return null;}return[d.querySelector(".sapUshellTilesContainer-sortable"),d.querySelector(".sapUshellLineModeContainer")];};
b.prototype.setEditMode=function(v){if(v){this.addStyleClass("sapUshellEditing");this._startEdit();}else{this.setProperty("editMode",v,false);this.removeStyleClass("sapUshellEditing");}};
b.prototype.isLinkPersonalizationOveride=function(){b.prototype.updateLinks=function(R){var g=this.getParent(),t=g&&g.getDisplayMode&&g.getDisplayMode()==="tabs";if(t&&!this.getTileActionModeActive()){g.removeLinksFromUnselectedGroups();}if(this.getLinks().length>0){this.removeAllLinks();}M.prototype.updateAggregation.call(this,"links");};b.prototype.destroyLinks=function(R){L.debug("link is destroyed because: "+R,null,"sap.ushell.ui.launchpad.TileContainer");};};
b.prototype.setShowEmptyLinksArea=function(v){this.setProperty("showEmptyLinksArea",v,true);this.toggleStyleClass("sapUshellLinksAreaHidden",!v);};
b.prototype.setShowEmptyLinksAreaPlaceHolder=function(v){this.setProperty("showEmptyLinksArea",v,true);this.toggleStyleClass("sapUshellTileContainerEditMode",v);this.toggleStyleClass("sapUshellTileContainerTabsModeEmptyLinksArea",v);this.toggleStyleClass("sapUshellEmptyLinksAreaPlaceHolder",!v);};
b.prototype._resizeCards=function(c){var d,m,s=5.35,t=0.5,e,f,g,h;for(var i=0;i<c.length;i++){d=c[i];m=d.getManifest();e=m["sap.flp"].rows;f=m["sap.flp"].columns;g=f*s+(f-1)*t+"rem";h=e*s+(e-1)*t+"rem";d.setHeight(h);d.setWidth(g);}};
b.prototype._startEdit=function(){var t=this;if(this.getModel()&&!this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",true,false);}if(!this.oEditInputField){sap.ui.require(["sap/m/Input"],function(c){t.setProperty("editMode",true,false);t.oEditInputField=new c({placeholder:t._sDefaultValue,value:t.getHeaderText()}).addStyleClass("sapUshellTileContainerTitleInput");t.oEditInputField.addEventDelegate({onAfterRendering:function(){setTimeout(function(){if(t.oEditInputField.$().is(":visible")){setTimeout(function(){t.oEditInputField.$().find("input").focus();},100);var w=q(window).height(),j=t.getDomRef(),g=j.offsetHeight,d=j.getBoundingClientRect().top,e=j.offsetTop;if(g+d>w){q(".sapUshellDashboardView section").stop().animate({scrollTop:e},0);}}},100);},onfocusout:function(){t._stopEdit();q.proxy(t.setEditMode,t,false)();},onsapenter:function(e){t._stopEdit();q.proxy(t.setEditMode,t,false)();setTimeout(function(){var d=e.srcControl,j=d.$().prev();j.focus();},0);}});t.oEditInputField.setValue(t.getHeaderText());});}else{this.oEditInputField.setValue(this.getHeaderText());t.setProperty("editMode",true,false);}this._sOldTitle=this._sDefaultValue;if(D.system.phone){setTimeout(function(){var e=sap.ui.getCore().getEventBus();e.publish("launchpad","scrollToGroup",{group:t,groupChanged:false,focus:false});},100);}};
b.prototype._stopEdit=function(){var c=this.getHeaderText();var n=this.oEditInputField.getValue(),h;n=n.substring(0,256).trim()||this._sDefaultValue;h=n!==c;if(this.bIsFirstTitleChange&&n===this.oEditInputField.getPlaceholder()){h=true;}this.bIsFirstTitleChange=false;if(this.getModel()&&this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",false,false);}if(!this._sOldTitle){this._sOldTitle=c;this.setHeaderText(c);}else if(h){this.fireTitleChange({newTitle:n});this.setHeaderText(n);}};
b.prototype.exit=function(){if(this.oPlusTile){this.oPlusTile.destroy();}if(this.oHeaderButton){this.oHeaderButton.destroy();}if(this.oActionSheet){this.oActionSheet.destroy();}if(C.prototype.exit){C.prototype.exit.apply(this,arguments);}};
return b;});
sap.ui.predefine('sap/ushell/ui/launchpad/TileContainerRenderer',["sap/ushell/resources","sap/ushell/utils","sap/ushell/bootstrap/common/common.load.model","sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/core/CustomData"],function(r,u,m,C,A,a){"use strict";var T={};T.oModel=m.getModel();
T.render=function(R,c){var h=c.getHeaderActions(),b=c.getBeforeContent(),d=c.getAfterContent(),f=c.getFooterContent()||[],e,l=c.getLinks(),t=this;R.write("<div");R.writeControlData(c);R.addClass("sapUshellTileContainer");R.writeClasses();R.write(">");if(b.length&&c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellTileContainerBeforeContent");R.addClass("sapContrastPlus");R.writeClasses();R.write(">");b.forEach(function(c){R.renderControl(c);});R.write("</div>");}R.write("<div");R.addClass("sapUshellTileContainerContent");if(c.getIsGroupLocked()){R.addClass("sapUshellTileContainerLocked");}if(c.getDefaultGroup()){R.addClass("sapUshellTileContainerDefault");}if(c.getShowBackground()){R.addClass("sapUshellTileContainerEditMode");}R.writeClasses();R.writeAttribute("tabindex","-1");R.write(">");if(c.getShowBackground()){R.write("<div");R.addClass("sapUshellGroupBackgroundContainer sapContrastPlus");R.writeClasses();R.write(">");R.write("</div>");}if(c.getShowHeader()){R.write("<div");R.addClass("sapUshellTileContainerHeader sapContrastPlus");if(!c.getShowGroupHeader()){R.addClass("sapUshellFirstGroupHeaderHidden sapUiPseudoInvisibleText");}R.writeAttribute("id",c.getId()+"-groupheader");R.writeClasses();if(c.getIeHtml5DnD()&&!c.getIsGroupLocked()&&!c.getDefaultGroup()&&c.getTileActionModeActive()){R.writeAttribute("draggable","true");}var s;if(c.getDefaultGroup()){s=r.i18n.getText("ariaLabelEditModeGroupDefault",c.getHeaderText());}else if(c.getIsGroupLocked()){s=r.i18n.getText("ariaLabelEditModeGroupLocked",c.getHeaderText());}else{s=r.i18n.getText("ariaLabelEditModeGroup",c.getHeaderText());}R.writeAccessibilityState(c,{label:s});R.write(">");R.write("<div");R.writeAttribute("id",c.getId()+"-title");R.addClass("sapUshellContainerTitleFlex");R.writeClasses();R.write(">");R.write("<");R.write(c.getHeaderLevel().toLowerCase());R.addClass("sapUshellContainerTitle");R.writeClasses();R.writeAttributeEscaped("title",c.getHeaderText());R.writeAttribute("id",c.getId()+"-titleText");R.writeAttribute("data-role","group");R.write(">");R.writeEscaped(c.getHeaderText());R.write("</");R.write(c.getHeaderLevel().toLowerCase());R.writeAttribute("id",c.getId()+"-groupheader");R.write(">");if(c.getShowIcon()){c.oIcon.removeStyleClass("sapUshellContainerIconHidden");}else{c.oIcon.addStyleClass("sapUshellContainerIconHidden");}R.renderControl(c.oEditInputField);if(c.getIsGroupLocked()){R.renderControl(c.oIcon);}else if(c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellContainerHeaderActions");R.writeClasses();R.write(">");h.forEach(function(c){R.renderControl(c);});R.write("</div>");}R.write("</div>");R.write("</div>");}R.write("<ul");e=c.data("containerHeight");if(e){R.writeAttribute("style","height:"+e);}R.addClass("sapUshellTilesContainer-sortable");R.addClass("sapUshellInner");R.writeClasses();R.writeAccessibilityState(c,{role:"listbox"});R.write(">");var v=[];c.getTiles().forEach(function(o){if(o.getVisible()){v.push(o);}});v.forEach(function(o,p){o.addCustomData(new A({key:"aria-posinset",value:(p+1).toString(),writeToDom:true}));o.addCustomData(new A({key:"aria-setsize",value:v.length.toString(),writeToDom:true}));if(t._isUserActivityCard(o)){t._updateUserActivityCardVisibility(o);}R.renderControl(o);});if(c.getShowPlaceholder()){R.renderControl(c.oPlusTile);}if(c.getShowNoData()){this.renderNoData(R,c,!v.length);}R.write("</ul>");var L=c.getSupportLinkPersonalization();if(l.length>0||L){if(c.getShowBackground()&&!(c.getIsGroupLocked()&&!v.length)){R.write("<div");R.addClass("sapUshellTilesContainerSeparator");R.writeClasses();R.write(">");R.write("</div>");}R.write("<div aria-hidden='true'");var g=L?"sapUshellLineModeContainer":"sapUshellLinksContainer";R.addClass(g);if(!l.length&&L){R.addClass("sapUshellNoLinksAreaPresent");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellNoLinksAreaPresentText");R.writeClasses();R.write(">");R.renderControl(c.getNoLinksText());R.write("</div>");}else{R.writeClasses();R.write(">");}if(L){R.write("<div");R.addClass("sapUshellTransformationError");R.writeClasses();if(!c.transformationError){R.writeAttribute("style","display: none;");}R.write(">");R.write("<div");R.addClass("sapUshellTransformationErrorInnerWrapper");R.writeClasses();R.write(">");R.renderControl(c.getTransformationErrorIcon());R.renderControl(c.getTransformationErrorText());R.write("</div>");R.write("</div>");}if(L){R.write("<div class='sapUshellLinksInnerContainer'>");}l.map(function(i,j,l){if(L){var k=new A({key:"tabindex",value:"-1",writeToDom:true});i.getCustomData().map(function(n){if(n.getKey()=="tabindex"&&n.getValue("0")){k=n;}i.removeCustomData(n);});i.addCustomData(new A({key:"aria-posinset",value:(j+1).toString(),writeToDom:true}));i.addCustomData(new A({key:"aria-setsize",value:l.length.toString(),writeToDom:true}));i.addCustomData(k);if(i.getModel()&&i.getModel().getProperty("/enableHelp")){i.addCustomData(new a({key:"help-id",value:i.getBindingContext()&&i.getBindingContext().getProperty("tileCatalogId"),writeToDom:true}));}i.addStyleClass("sapUshellLinkTile");if(c.getIsGroupLocked()){i.addStyleClass("sapUshellLockedTile");}}R.renderControl(i);});if(L){R.write("</div>");}R.write("</div>");}if(f.length>0){R.write("<footer");R.addClass("sapUshellTilesContainerFtr");R.writeClasses();R.write(">");f.forEach(function(c){R.renderControl(c);});R.write("</footer>");}R.write("</div>");if(d.length&&c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellTileContainerAfterContent");R.addClass("sapContrastPlus ");R.writeClasses();R.write(">");d.forEach(function(c){R.renderControl(c);});R.write("</div>");}R.write("</div>");u.setPerformanceMark("FLP -- tile container renderer");};
T.renderNoData=function(R,c,d){R.write("<div id='"+c.getId()+"-listNoData' class='sapUshellNoFilteredItems sapUiStrongBackgroundTextColor'>");if(d){if(c.getNoDataText()){R.writeEscaped(c.getNoDataText());}else{R.writeEscaped(c.getNoDataText(r.i18n.getText("noFilteredItems")));}}else{R.writeEscaped("");}R.write("</div>");};
T._isUserActivityCard=function(c){if(typeof c.getManifest!=="function"){return false;}var M=c.getManifest();var s=M&&M["sap.card"]&&M["sap.card"].header&&M["sap.card"].header.title;return s===r.i18n.getText("recentActivities")||s===r.i18n.getText("frequentActivities");};
T._updateUserActivityCardVisibility=function(c){c.setVisible(C.last("/core/shell/model/enableTrackingActivity"));C.on("/core/shell/model/enableTrackingActivity").do(function(e){c.setVisible(e);});};
return T;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/TileContainerUtils',["sap/ui/thirdparty/jquery","sap/base/util/uid"],function(q,u){"use strict";var T={};
T.showHideTilesAndHeaders=function(i,o){var s,r,e,n=0,a=0;for(s in i.onScreenPathIndexMap){if(i.onScreenPathIndexMap.hasOwnProperty(s)){e=i.onScreenPathIndexMap[s];r=o[e.aItemsRefrenceIndex];if(r.getVisible()&&!e.isVisible){a++;}r.setVisible(e.isVisible);if(e.isVisible){n++;}}}return{nCountVisibElelemnts:n,nCountFilteredElement:a};};
T.applyFilterOnItem=function(e,f,p,n){var a;for(a in f){if(f.hasOwnProperty(a)){f[a](e);}}if(p){p(e,n);}};
T.createNewItem=function(e,n){var b=this.mBindingInfos[n],f=b.factory,a=q.proxy(function(c){var i=this.getId()+"-"+u(),C=f(i,c);C.setBindingContext(c,b.model);return C;},this);return a(e);};
T.addNewItem=function(c,n){var a=this.getMetadata().getJSONKeys()[n];this[a._sMutator](c);return true;};
T.createMissingElementsInOnScreenElements=function(i,e,a,f,I,b,n){var p,j,c=e.length;for(j=a;j<c;j++){p=e[j].getPath();if(!i.onScreenPathIndexMap[p]){if(f(e[j],n)==false){return false;}T.applyFilterOnItem(e[j],b);}else{throw true;}}return true;};
T.createMissingElementsInOnScreenElementsSearchCatalog=function(i,e,a,f,I,b,n,p){var c,j,d=e.length;for(j=0;j<d;j++){c=e[j].getPath();if(!i.onScreenPathIndexMap[c]){if(f(e[j],n)==false){return false;}}T.applyFilterOnItem(e[j],b,p,n);}return true;};
T.applyFilterOnAllItems=function(b,f,p){var B;var o=b.binding,a;if(!o){return;}a=o.getContexts();for(B=0;B<a.length;B++){T.applyFilterOnItem(a[B],f,p);}};
T.validateOrder=function(b,i,a){var l,f,p,L,F,n,s,c;if(b[a]&&i.length>0){l=i[i.length-1].getBindingContext().getPath();f=b[a].getPath();L=l.split("/");F=f.split("/");for(n=0;n<L.length&&n<F.length;n++){s=L[n];c=F[n];if(!!parseInt(s,10)&&!!parseInt(c,10)){if(parseInt(s,10)>parseInt(c,10)){return false;}else if(parseInt(s,10)<parseInt(c,10)){return true;}}else{for(p=0;p<c.length&&p<s.length;p++){if(s[p].charCodeAt()>c[p].charCodeAt()){return false;}else if(s[p].charCodeAt()<c[p].charCodeAt()){return true;}}}}}return true;};
T.markVisibleOnScreenElements=function(e,i,U){var a=0,p,b=e.length;for(a=0;a<b;a++){p=e[a].getPath();if(i.onScreenPathIndexMap[p]){if(U){i.onScreenPathIndexMap[p].isVisible=true;}}else{return a;}}return a;};
T.markVisibleOnScreenElementsSearchCatalog=function(e,i,U){var a=0,p,b=e.length;for(a=0;a<b;a++){p=e[a].getPath();if(i.onScreenPathIndexMap[p]){if(U){i.onScreenPathIndexMap[p].isVisible=true;}}}return a;};
T.indexOnScreenElements=function(o,i){var p,a,b={onScreenPathIndexMap:{}},c=o.length,d,v=true;if(i===false){v=false;}for(a=0;a<c;a++){d=o[a];if(d.getBindingContext()){p=d.getBindingContext().getPath();if(!b.onScreenPathIndexMap[p]){b.onScreenPathIndexMap[p]={aItemsRefrenceIndex:a,isVisible:v};}}}return b;};
return T;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/TileRenderer',["sap/ushell/Config","sap/base/Log","sap/m/Text"],function(C,L,T){"use strict";var a={apiVersion:2};
a.render=function(r,t){var o=null,c;try{o=t.getTileViews()[0];}catch(e){L.warning("Failed to load tile view: ",e.message);o=t.getFailedtoLoadViewText();}var b=C.last("/core/home/gridContainer")&&t.getParent().getParent()||t.getParent(),d=b&&b.getTiles?b.getTiles():[],v=d.filter(function(g){return g.getVisible();}),i=v.indexOf(t)>-1?v.indexOf(t)+1:"";if(!b){return;}r.openStart("li",t);if(C.last("/core/shell/model/enableHelp")){r.attr("data-help-id",t.getTileCatalogId());}r.class("sapUshellTile");if(t.getTileActionModeActive()){r.class("sapUshellTileWrapper");}if(o&&o.getContent){c=o.getContent();c.forEach(function(I){if(I.isA("sap.suite.ui.commons.FeedTile")){r.class("sapUshellFeedTileBG");}});}if(t.getLong()){r.class("sapUshellLong");}if(!t.getVisible()){r.class("sapUshellHidden");}if(t.getIsLocked()){r.class("sapUshellLockedTile");}if(C.last("/core/home/sizeBehavior")==="Small"){r.class("sapUshellSmall");}r.attr("role","option");r.attr("aria-posinset",i);r.attr("aria-setsize",v.length);var f=b.getId()+"-titleText";r.attr("aria-describedby",f);if(t.getIeHtml5DnD()){r.attr("draggable","true");}r.attr("tabindex","-1");var l=t.data("layoutPosition");if(l){var s="-webkit-transfrm:"+l.translate3D+";-ms-transfrm:"+l.translate2D+";transfrm:"+l.translate3D;r.attr("style",s);}r.openEnd();if(t.getTileActionModeActive()){this.renderTileActionMode(r,t);this.renderTileView(r,t,o);}else{r.openStart("div");r.class("sapUshellTileWrapper");r.openEnd();this.renderTileView(r,t,o);if(t.getShowActionsIcon()){r.renderControl(t.actionIcon);}r.close("div");this.renderTileActionsContainer(r,o,t.getPinButton());}r.close("li");};
a.renderTileActionsContainer=function(r,t,p){p=p.length?p[0]:undefined;if(p){p.addStyleClass("sapUshellActionButton");r.openStart("div");r.class("sapUshellTilePinButtonOverlay");if(t.getHeader){r.writeAccessibilityState(t,{role:"toolbar",label:t.getHeader()});}r.openEnd();r.renderControl(p);r.close("div");}};
a.renderTileView=function(r,t,o){var u="";if(t.getIsCustomTile()){r.openStart("div");r.class("sapUshellTileInner");if(t.getTileActionModeActive()){r.class("sapUshellTileActionBG");}r.openEnd();r.renderControl(o);r.close("div");}else{r.openStart("a");r.class("sapUshellTileInner");if(t.getTileActionModeActive()){r.class("sapUshellTileActionBG");}var s=t.getTarget();if(s){if(s.charAt(0)==="#"){if(window.location.search&&window.location.search.length>0){u=window.location.origin+window.location.pathname+window.location.search+"&appState=lean"+s;}else{u=window.location.origin+window.location.pathname+"?appState=lean"+s;}}else{u=s;}r.attr("target","_blank");r.attr("href",u);}r.attr("tabindex","-1");r.openEnd();r.renderControl(o);r.close("a");}};
a.renderTileActionMode=function(r,t){r.openStart("div");r.class("sapUshellTileActionLayerDiv");r.openEnd();if(!t.getIsLocked()){r.openStart("div");r.class("sapUshellTileDeleteClickArea");r.openEnd();r.openStart("div");r.class("sapUshellTileDeleteIconOuterClass");r.openEnd();r.renderControl(t._initDeleteAction());r.close("div");r.close("div");}r.openStart("div");r.class("sapUshellTileActionDivCenter");r.openEnd();r.close("div");r.openStart("div");r.class("sapUshellTileActionIconDivBottom");r.openEnd();r.openStart("div");r.class("sapUshellTileActionIconDivBottomInnerDiv");r.openEnd();r.renderControl(t.getActionSheetIcon());r.close("div");r.close("div");r.close("div");};
return a;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/TileState',['sap/ui/core/Control','sap/ushell/library','sap/ui/core/Icon','sap/ushell/resources','./TileStateRenderer'],function(C,l,I,r){"use strict";
var T=C.extend("sap.ushell.ui.launchpad.TileState",{metadata:{library:"sap.ushell",properties:{state:{type:"string",group:"Misc",defaultValue:'Loaded'}}}});
T.prototype.init=function(){this._rb=r.i18n;this._sFailedToLoad=this._rb.getText("cannotLoadTile");this._oWarningIcon=new I(this.getId()+"-warn-icon",{src:"sap-icon://notification",size:"1.37rem"});this._oWarningIcon.addStyleClass("sapSuiteGTFtrFldIcnMrk");};
T.prototype.exit=function(){this._oWarningIcon.destroy();};
T.prototype.setState=function(s,i){this.setProperty("state",s,i);return this;};
return T;});
sap.ui.predefine('sap/ushell/ui/launchpad/TileStateRenderer',['sap/ui/core/HTML'],function(H){"use strict";var T={};
T.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellGT");r.writeClasses();r.write(">");var s=c.getState();r.write("<div");r.addClass("sapUshellOverlay");r.writeClasses();r.writeAttribute("id",c.getId()+"-overlay");if(s==="Failed"){r.writeAttribute("title",c._sFailedToLoad);}r.write(">");switch(s){case"Loading":var b=new H({content:"<div class='sapUshellTileStateLoading'><div>"});b.setBusyIndicatorDelay(0);b.setBusy(true);r.renderControl(b);break;case"Failed":r.write("<div");r.writeAttribute("id",c.getId()+"-failed-ftr");r.addClass("sapUshellTileStateFtrFld");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-failed-icon");r.addClass("sapUshellTileStateFtrFldIcn");r.writeClasses();r.write(">");r.renderControl(c._oWarningIcon);r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-failed-text");r.addClass("sapUshellTileStateFtrFldTxt");r.writeClasses();r.write(">");r.writeEscaped(c._sFailedToLoad);r.write("</div>");r.write("</div>");break;default:}r.write("</div>");r.write("</div>");};
return T;},true);
sap.ui.predefine('sap/ushell/ui/shell/ContentRenderer',["sap/ui/base/Object"],function(B){"use strict";
var C=B.extend("sap.ushell.ui.shell.ContentRenderer",{
constructor:function(c,s,o,a){B.apply(this);this._id=s;this._cntnt=o;this._ctrl=c;this._rm=sap.ui.getCore().createRenderManager();this._cb=a||function(){};},
destroy:function(){this._rm.destroy();delete this._rm;delete this._id;delete this._cntnt;delete this._cb;delete this._ctrl;if(this._rerenderTimer){clearTimeout(this._rerenderTimer);delete this._rerenderTimer;}B.prototype.destroy.apply(this,arguments);},
render:function(){if(!this._rm){return;}if(this._rerenderTimer){clearTimeout(this._rerenderTimer);}this._rerenderTimer=setTimeout(function(){var $=jQuery(document.getElementById(this._id));var d=$.length>0;if(d){if(typeof(this._cntnt)==="string"){var c=this._ctrl.getAggregation(this._cntnt,[]);for(var i=0;i<c.length;i++){this._rm.renderControl(c[i]);}}else{this._cntnt(this._rm);}this._rm.flush($[0]);}this._cb(d);}.bind(this),0);}
});
return C;});
sap.ui.predefine('sap/ushell/ui/shell/FloatingContainer',["sap/ui/thirdparty/jquery","sap/ui/Device","sap/ushell/EventHub","sap/ui/core/Control","sap/ui/performance/Measurement","sap/ui/util/Storage"],function(q,D,E,C,M,S){"use strict";
var F=C.extend("sap.ushell.ui.shell.FloatingContainer",{
metadata:{properties:{},aggregations:{content:{type:"sap.ui.core.Control",multiple:true}}},
renderer:{render:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellFloatingContainer");r.writeClasses();r.write(">");if(c.getContent()&&c.getContent().length){r.renderControl(c.getContent()[0]);}r.write("</div>");}}
});
F.prototype.init=function(){D.resize.attachHandler(F.prototype._handleResize,this);};
F.prototype._getWindowHeight=function(){return q(window).height();};
F.prototype._setContainerHeight=function(c,f){c.css("max-height",f);};
F.prototype._handleResize=function(e){M.start("FLP:FloatingContainer_handleResize","resizing floating container","FLP");if(q(".sapUshellFloatingContainer").parent()[0]&&(q(".sapUshellContainerDocked").size()==0)){this.oWrapper=q(".sapUshellFloatingContainer").parent()[0];this.oWrapper.setAttribute("style",this.oStorage.get("floatingContainerStyle"));var i=window.matchMedia?window.matchMedia("(max-width: 417px)").matches:false;this.adjustPosition(e,i);}else if(q(".sapUshellFloatingContainer").parent()[0]&&q(".sapUshellContainerDocked").size()){if(q("#canvas").hasClass("sapUshellContainer-Narrow-Right")){var u;if(sap.ui.getCore().getConfiguration().getRTL()){q("#sapUshellFloatingContainerWrapper").css("left",(416/q(window).width()*100)+"%");u=416/q(window).width()*100+"%;";}else{q("#sapUshellFloatingContainerWrapper").css("left",100-416/q(window).width()*100+"%");u=100-416/q(window).width()*100+"%;";}this.oWrapper.setAttribute("style","left:"+u+this.oWrapper.getAttribute("style").substring(this.oWrapper.getAttribute("style").indexOf("top")));this.oStorage.put("floatingContainerStyle",this.oWrapper.getAttribute("style"));}}if(q(".sapUshellContainerDocked").length>0){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerDockedIsResize");E.emit("ShellFloatingContainerDockedIsResized",Date.now());}var d=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(d.name!="Desktop"&&(q(".sapUiMedia-Std-Desktop").width()-416<d.from)&&(q(".sapUshellContainerDocked").size())){q("#canvas, .sapUshellShellHead").removeClass("sapUshellContainerDocked");if(q("#canvas").hasClass("sapUshellContainer-Narrow-Right")){q("#canvas").removeClass("sapUshellContainer-Narrow-Right sapUshellMoveCanvasRight");}else{q("#canvas").removeClass("sapUshellContainer-Narrow-Left sapUshellMoveCanvasLeft");}q(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().byId("mainShell").getController()._handleAnimations(false);var s=new S(S.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");if(s){s.put("lastState","floating");}sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDockedOnResize");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDocked sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");var v=sap.ui.getCore().byId("viewPortContainer");if(v){v._handleSizeChange();}}M.end("FLP:FloatingContainer_handleResize");};
F.prototype.adjustPosition=function(e,i){var w=e?e.width:q(window).width(),W=e?e.height:q(window).height(),c=this.oContainer.width(),a=this.oContainer.height(),b,d,l,t,f=sap.ui.getCore().getConfiguration().getRTL();i=i!==undefined?i:false;if(this.oWrapper){l=this.oWrapper.style.left.replace("%","");l=w*l/100;t=this.oWrapper.style.top.replace("%","");t=W*t/100;if(!isNaN(l)&&!isNaN(t)&&!i){if(f){b=(l<c)||(l>w);if(b){l=l<c?c:w;}}else{b=(l<0)||(w<(l+c));if(b){l=l<0?0:(w-c);}}d=(t<0)||(W<(t+a));if(d){t=t<0?0:(W-a);}if(!b&&!d){this.oWrapper.setAttribute("style","left:"+l*100/w+"%;top:"+t*100/W+"%;position:absolute;");return;}this.oWrapper.setAttribute("style","left:"+l*100/w+"%;top:"+t*100/W+"%;position:absolute;");}}};
F.prototype.handleDrop=function(){if(this.oWrapper){this.adjustPosition();this.oStorage.put("floatingContainerStyle",this.oWrapper.getAttribute("style"));}};
F.prototype.setContent=function(c){if(this.getDomRef()){var r=sap.ui.getCore().createRenderManager();r.renderControl(c);r.flush(this.getDomRef());r.destroy();}this.setAggregation("content",c,true);};
F.prototype.onAfterRendering=function(){this.oStorage=this.oStorage||new S(S.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");this.oContainer=q(".sapUshellFloatingContainer");this.oWrapper=q(".sapUshellFloatingContainer").parent()[0];};
F.prototype.exit=function(){D.resize.detachHandler(F.prototype._resizeHandler,this);};
return F;});
sap.ui.predefine('sap/ushell/ui/shell/NavigationMiniTile',["sap/ui/core/Control","sap/ui/core/IconPool"],function(C,I){"use strict";
var N=C.extend("sap.ushell.ui.shell.NavigationMiniTile",{
metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},intent:{type:"string",group:"Misc",defaultValue:null}},aggregations:{},events:{press:{}}},
renderer:{render:function(r,c){var t=c.getTitle();var s=c.getSubtitle();var i=c.getIcon();var o=I.createControlByURI(i);r.write("<div tabindex=\"-1\" class=\"sapUshellNavMiniTile\" ");r.writeControlData(c);r.writeAttributeEscaped("role","option");r.writeAttributeEscaped("aria-label",s?t+" "+s:t);r.write(">");r.write("<div>");r.write("<span class=\"sapUshellNavMiniTileTitle\" >");if(t){r.writeEscaped(t);}r.write("</span>");r.write("</div>");if(o){r.write("<div>");r.write("<span class=\"sapUshellNavMiniTileIcon\">");r.renderControl(o);r.write("</span>");r.write("</div>");}else{r.write("<div>");r.write("<span class=\"sapUshellNavMiniTileSubtitle\" >");if(s){r.writeEscaped(s);}r.write("</span>");r.write("</div>");}r.write("</div>");}}
});
N.prototype.ontap=function(){this.firePress({});};
N.prototype.onsapenter=function(){this.firePress({});};
N.prototype.onsapspace=function(){this.firePress({});};
return N;});
sap.ui.predefine('sap/ushell/ui/shell/OverflowListItem',["sap/ui/core/IconPool","sap/m/StandardListItem","sap/ui/core/CustomData","sap/ushell/library"],function(I,S,C){"use strict";
var O=S.extend("sap.ushell.ui.shell.OverflowListItem",{
metadata:{properties:{floatingNumber:{type:"int",group:"Appearance",defaultValue:null},floatingNumberMaxValue:{type:"int",group:"Appearance",defaultValue:99}}},
renderer:{}
});
O.prototype.getDisplayFloatingNumber=function(){var n=this.getFloatingNumber(),m=this.getFloatingNumberMaxValue();var d=n+"";if(n>m){d=m+"+";}return d;};
O.prototype._getImage=function(){var i=this._oImage;if(!i){i=S.prototype._getImage.call(this);}if(this.getFloatingNumber()>0){i.addStyleClass("sapUshellShellHeadItmCounter");i.addCustomData(new C({key:"counter-content",value:this.getDisplayFloatingNumber(),writeToDom:true}));}else{i.removeStyleClass("sapUshellShellHeadItmCounter");}this._oImage=i;return this._oImage;};
sap.ui.unified.OverflowListItem=O;return O;},true);
sap.ui.predefine('sap/ushell/ui/shell/RightFloatingContainer',["sap/ui/thirdparty/jquery","sap/ui/core/Control"],function(q,C){"use strict";
var R=C.extend("sap.ushell.ui.shell.RightFloatingContainer",{
metadata:{properties:{size:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"56px"},top:{type:"string",group:"Appearance",defaultValue:"0"},right:{type:"string",group:"Appearance",defaultValue:"0"},textVisible:{type:"boolean",group:"Appearance",defaultValue:true},insertItemsWithAnimation:{type:"boolean",group:"Appearance",defaultValue:true},hideItemsAfterPresentation:{type:"boolean",group:"Appearance",defaultValue:false},enableBounceAnimations:{type:"boolean",group:"Appearance",defaultValue:false},actAsPreviewContainer:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{floatingContainerItems:{type:"sap.ui.core.Control",multiple:true}},events:{afterRendering:{}}},
renderer:{render:function(r,o){var i=sap.ui.getCore().getConfiguration().getRTL();r.write("<div");r.writeControlData(o);r.addClass("sapUshellRightFloatingContainer");r.writeClasses();r.addStyle("top",o.getTop()+"rem");r.addStyle(i?"left":"right",o.getRight());r.writeStyles();r.writeAttribute("data-role","alert");r.write(">");r.write("<ul");r.addClass("sapUshellNotificationListContainer");r.writeClasses();r.writeAttribute("role","list");r.write(">");this.renderFloatingContainerItems(r,o);r.write("</ul>");r.write("</div>");},renderFloatingContainerItems:function(r,o){var I=o.getInsertItemsWithAnimation(),a=o.getActAsPreviewContainer(),b=o.getFloatingContainerItems(),i;for(i=0;i<b.length;i++){if(a&&!I){b[i].addStyleClass("sapUshellNonAnimatedNotificationListItem");}else if(b[i].hasStyleClass("sapUshellNonAnimatedNotificationListItem")){b[i].addStyleClass("sapUshellNotificationsListItem");b[i].addStyleClass("sapUshellRightFloatingContainerItemBackToViewport");b[i].addStyleClass("sapUshellRightFloatingContainerItemHidden");b[i].addStyleClass("sapUshellRightFloatingContainerItmHeightVisible");b[i].removeStyleClass("sapUshellNonAnimatedNotificationListItem");}r.renderControl(b[i]);}}}
});
R.prototype.init=function(){var t;q(window).bind("resize",function(){clearTimeout(t);t=setTimeout(this._handleResize.bind(this),100);}.bind(this));this.iRequiredItemsNumber=5;};
R.prototype.onBeforeRendering=function(){};
R.prototype._setSize=function(){};
R.prototype._handleResize=function(){if(this.getDomRef()&&this.getFloatingContainerItems().length){var n=this.iRequiredItemsNumber,a=window.innerHeight,d=this.getDomRef(),b=d.getBoundingClientRect().top,c=q(".sapUiSizeCompact").length>0?56:64,j=this.$().find("li").eq(0),e,I;if(!j.length){return;}e=j[0].clientHeight;var f=q("#sapUshellDashboardFooter").outerHeight();this.iRequiredItemsNumber=Math.min(parseInt((a-b-c-f)/e,10),5);if(n!==this.iRequiredItemsNumber){I=this.getFloatingContainerItems();for(var i=0;i<I.length;i++){if(i<this.iRequiredItemsNumber||isNaN(this.iRequiredItemsNumber)){I[i].removeStyleClass("sapUshellShellHidden");}else{I[i].addStyleClass("sapUshellShellHidden");}}}}};
R.prototype.onAfterRendering=function(){this.fireAfterRendering();setTimeout(function(){this._handleResize();}.bind(this),500);this.addStyleClass("sapContrastPlus");this.addStyleClass("sapContrast");this.addStyleClass("sapUshellNotificationsListItem");};
R.prototype.setVisible=function(v){this.setProperty("visible",v,true);if(v){q(this.getDomRef()).css("visibility","visible");}else{q(this.getDomRef()).css("visibility","hidden");}};
R.prototype.setFloatingContainerItemsVisiblity=function(v){var a=this.getFloatingContainerItems(),t=v?300:0,I=this.getInsertItemsWithAnimation(),_=function(b){if(v){a[b].removeStyleClass("sapUshellRightFloatingContainerItemBounceOut").addStyleClass("sapUshellRightFloatingContainerItemBounceIn");}else{a[b].removeStyleClass("sapUshellRightFloatingContainerItemBounceIn").addStyleClass("sapUshellRightFloatingContainerItemBounceOut");}};for(var i=0;i<a.length;i++){(function(b){return function(){if(I){setTimeout(function(){_(b);},t+b*100);}else{a[b].setVisible(v);}};})(i)();}};
R.prototype._animationBouncer=function _animationBouncer(n){var _=function(){if(!_animationBouncer._animationQueue.length){_animationBouncer._itemTimeoutId=undefined;return;}var i=_animationBouncer._animationQueue.shift();i.addStyleClass("sapUshellRightFloatingContainerItmHeightVisible").addStyleClass("sapUshellRightFloatingContainerItemBounceIn");_animationBouncer._itemTimeoutId=setTimeout(_,100);};if(!_animationBouncer._animationQueue){_animationBouncer._animationQueue=[];}_animationBouncer._animationQueue.push(n);if(_animationBouncer._mainTimeoutId||_animationBouncer._itemTimeoutId){return;}_animationBouncer._mainTimeoutId=setTimeout(function(){_animationBouncer._mainTimeoutId=undefined;_();},500);};
R.prototype.addFloatingContainerItem=function(n){this.addAggregation("floatingContainerItems",n);n.addStyleClass("sapContrastPlus");if(this.getInsertItemsWithAnimation()){n.addStyleClass("sapUshellNotificationsListItem");n.addStyleClass("sapUshellRightFloatingContainerItemHidden");if(this.getEnableBounceAnimations()){R.prototype._animationBouncer(n);}else{setTimeout(function(){var i=this.getFloatingContainerItems();if(i.length>5){var l=i[i.length-1];l.addStyleClass("sapUshellRightFloatingContainerHideLastItem");}n.addStyleClass("sapUshellRightFloatingContainerItemBackToViewport").addStyleClass("sapUshellRightFloatingContainerItmHeightVisible");}.bind(this),500);}}else if(this.getActAsPreviewContainer()){n.addStyleClass("sapUshellNonAnimatedNotificationListItem");}if(this.getHideItemsAfterPresentation()){setTimeout(function(){n.removeStyleClass("sapUshellRightFloatingContainerItemBackToViewport");},3200);}};
return R;});
sap.ui.predefine('sap/ushell/ui/shell/ShellAppTitle',["sap/m/Bar","sap/m/Button","sap/m/Label","sap/m/PlacementType","sap/m/Popover","sap/m/ResponsivePopover","sap/m/ToggleButton","sap/ui/core/IconPool","sap/ui/Device","sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources","sap/ui/performance/Measurement","sap/ushell/ui/shell/ShellNavigationMenu","sap/ushell/services/AllMyApps"],function(B,a,L,P,b,R,T,I,D,C,A,r,M){"use strict";var s={SHELL_NAV_MENU_ONLY:0,ALL_MY_APPS_ONLY:1,SHELL_NAV_MENU:2,ALL_MY_APPS:3};
var S=a.extend("sap.ushell.ui.shell.ShellAppTitle",{
metadata:{associations:{navigationMenu:{type:"sap.ushell.ui.shell.ShellNavigationMenu"},allMyApps:{type:"sap.ui.core.mvc.ViewType.JS"}},events:{textChanged:{deprecated:true}}},
renderer:{apiVersion:2,render:function(c,d){c.openStart("div",d);c.class("sapUshellAppTitle");if(d.getTooltip_AsString()){c.attr("title",d.getTooltip_AsString());}var v=d._getControlVisibilityAndState(),t=d.getText(),m=d.getModel();if(v||D.system.phone){c.class("sapUshellAppTitleClickable");c.attr("tabindex","0");}c.openEnd();c.openStart("h1");c.class("sapUshellHeadTitle");if(v){c.attr("role","button");c.attr("aria-haspopup","dialog");c.attr("aria-expanded","false");if(m&&m.getProperty("/ShellAppTitleState")===s.ALL_MY_APPS_ONLY){c.attr("aria-label",r.i18n.getText("ShowAllMyApps_AriaLabel",[t]));}else{c.attr("aria-label",r.i18n.getText("ShellNavigationMenu_AriaLabel",[t]));}}c.openEnd();if(t){c.text(t);}c.close("h1");if(v){c.openStart("div");c.class("sapUshellShellHeadAction");c.openEnd();c.openStart("span");c.class("sapUshellShellHeadActionImg");c.openEnd();c.renderControl(d.oIcon);c.close("span");c.close("div");}c.close("div");}}
});
S.prototype.init=function(){if(a.prototype.init){a.prototype.init.apply(this,arguments);}this.oIcon=I.createControlByURI(I.getIconURI("megamenu"));this.oIcon.addStyleClass("sapUshellAppTitleMenuIcon");if(D.system.desktop){this.addEventDelegate({onkeydown:function(e){if(e.altKey&&e.keyCode===40){this.onclick(e);}}.bind(this)});}};
S.prototype.onclick=function(e){if(e){e.preventDefault();}this.firePress();if(!this._getControlVisibilityAndState()){if(D.system.phone){window.hasher.setHash(C.last("/core/shellHeader/rootIntent"));}return;}if(this.getModel().getProperty("/ShellAppTitleState")===s.ALL_MY_APPS_ONLY){M.start("FLP:ShellAppTitle.onClick","Click ShellAppTitle in HOME state, Launching AllMyApps","FLP");this._openCloseAllMyAppsPopover();return;}this._openCloseNavMenuPopover();};
S.prototype._openCloseAllMyAppsPopover=function(){if(!this.oAllMyAppsPopover){this.oAllMyAppsPopover=this._createAllMyAppsPopover();}if(this.oAllMyAppsPopover){if(this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close();}else{this.oAllMyAppsPopover.openBy(this);}}};
S.prototype._openCloseNavMenuPopover=function(){if(!this.oNavMenuPopover){this.oNavMenuPopover=this._createNavMenuPopover();}this.getModel().setProperty("/ShellAppTitleState",s.SHELL_NAV_MENU);if(this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close();}else{this.oNavMenuPopover.openBy(this);}if(this.oNavMenuPopover.getFooter()){var c=C.last("/core/shell/model/currentState/stateName");this.oNavMenuPopover.getFooter().setVisible(c==="home"||c==="app");}};
S.prototype.onsapskipback=function(e){e.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;};
S.prototype._getControlVisibilityAndState=function(){M.start("FLP:ShellAppTitle.getControlVisibilityAndState","Check AllMyApps and NavShellMenu visibility","FLP");var m=this.getModel(),c=C.last("/core/shell/model/currentState/stateName"),n=this._isNavMenuEnabled(),v=n;if(!m){return false;}if(c==="app"||c==="home"){var d=sap.ushell.Container.getService("AllMyApps").isEnabled();v=d||n;if(d&&n){m.setProperty("/ShellAppTitleState",s.SHELL_NAV_MENU);}else if(!d&&n){m.setProperty("/ShellAppTitleState",s.SHELL_NAV_MENU_ONLY);}else if(d&&!n){m.setProperty("/ShellAppTitleState",s.ALL_MY_APPS_ONLY);}}else{m.setProperty("/ShellAppTitleState",s.SHELL_NAV_MENU_ONLY);}M.end("FLP:ShellAppTitle.getControlVisibilityAndState");return v;};
S.prototype._createAllMyAppsPopover=function(){var o=sap.ui.getCore().byId(this.getAllMyApps());if(!o){return null;}var c=new R("sapUshellAllMyAppsPopover",{placement:P.Bottom,title:"",showArrow:true,customHeader:this._getPopoverHeader(),showHeader:{path:"/ShellAppTitleState",formatter:function(d){return d!==s.SHELL_NAV_MENU;}},content:[o]});c.setModel(this.getModel());c.addStyleClass("sapUshellAppTitleAllMyAppsPopover");c.attachAfterOpen(function(){o._afterOpen();var h=c.getCustomHeader(),d=h.getContentLeft()[0],t=h.getContentLeft()[1];if(t.getVisible()){t.firePress();t.setPressed(true);}d.focus();});c.attachAfterClose(function(){this._bPressedSpace=false;}.bind(this));return c;};
S.prototype._createNavMenuPopover=function(){var n=sap.ui.getCore().byId(this.getNavigationMenu());var N=new b("sapUshellAppTitlePopover",{placement:P.Bottom,title:"",showArrow:true,showHeader:{path:"/ShellAppTitleState",formatter:function(c){return c!==s.SHELL_NAV_MENU;}},contentWidth:"20rem",content:n});if(sap.ushell.Container.getService("AllMyApps").isEnabled()){N.setFooter(this._getPopoverFooterContent());}N.addStyleClass("sapUshellAppTitleNavigationMenuPopover");N.setModel(this.getModel());C.emit("/core/shell/model/allMyAppsMasterLevel",0);N.attachBeforeOpen(function(){n._beforeOpen();});N.attachAfterOpen(function(){n.$().on("touchmove.scrollFix",function(e){e.stopPropagation();});n._afterOpen();});N.attachAfterClose(function(){this._bPressedSpace=false;}.bind(this));return N;};
S.prototype._getPopoverHeader=function(){var o=new L({text:r.i18n.getText("allMyApps_headerTitle")});this.addCustomData(o,"role","heading");this.addCustomData(o,"aria-level","2");var p=new B("sapUshellShellAppPopoverHeader",{contentLeft:[this._createPopoverBackButton(),this._createPopoverToggleButton()],contentMiddle:[o]});return p;};
S.prototype.onAfterRendering=function(){var o=sap.ui.getCore().byId("shell-header");if(o){o.refreshLayout();}};
S.prototype._createPopoverBackButton=function(){var o=new a("sapUshellAppTitleBackButton",{icon:I.getIconURI("nav-back"),press:[this._popoverBackButtonPressHandler,this],tooltip:r.i18n.getText("backBtn_tooltip"),visible:this.getAllMyAppsController().getBackButtonVisible()});o.addStyleClass("sapUshellCatalogNewGroupBackButton");return o;};
S.prototype._popoverBackButtonPressHandler=function(){var o=this.getAllMyAppsController(),c=o.getCurrentState(),d=o.getStateEnum(),m=this.getModel();if((c===d.FIRST_LEVEL)||(c===d.FIRST_LEVEL_SPREAD)){if(m.getProperty("/ShellAppTitleState")!==s.ALL_MY_APPS_ONLY){m.setProperty("/ShellAppTitleState",s.SHELL_NAV_MENU);this.oAllMyAppsPopover.close();this.oNavMenuPopover.openBy(this);}}else if(c===d.SECOND_LEVEL){o.switchToInitialState();}else{o.handleSwitchToMasterAreaOnPhone();}o.updateHeaderButtonsState();};
S.prototype._createPopoverToggleButton=function(){var o=this.getAllMyAppsController();var t=new T("sapUshellAllMyAppsToggleListButton",{icon:I.getIconURI("sap-icon://menu2"),press:function(e){o.switchToInitialState();this.setTooltip(e.getParameter("pressed")?r.i18n.getText("ToggleButtonHide"):r.i18n.getText("ToggleButtonShow"));},tooltip:r.i18n.getText("ToggleButtonShow"),visible:o.getToggleListButtonVisible()});D.media.attachHandler(function(){t.setVisible(o.getToggleListButtonVisible());},this,D.media.RANGESETS.SAP_STANDARD);t.addStyleClass("sapUshellAllMyAppsToggleListButton");return t;};
S.prototype._getPopoverFooterContent=function(){var t=this,o;o=new a("allMyAppsButton",{text:r.i18n.getText("allMyApps_launchingButtonTitle"),press:function(){t._openCloseAllMyAppsPopover();if(t.oAllMyAppsPopover){M.start("FLP:ShellNavMenu.footerClick","Click the footer of ShellNavMenu, Launching AllMyApps","FLP");t.getModel().setProperty("/ShellAppTitleState",s.ALL_MY_APPS);t.oNavMenuPopover.close();}},visible:{path:"/ShellAppTitleState",formatter:function(c){return c===s.SHELL_NAV_MENU;}}});var p=new B("shellpopoverFooter",{contentMiddle:[o]});this.addCustomData(o,"role","button");this.addCustomData(o,"aria-label",r.i18n.getText("allMyApps_launchingButtonTitle"));return p;};
S.prototype._isNavMenuEnabled=function(){var n=sap.ui.getCore().byId(this.getNavigationMenu());return n?n.getItems()&&n.getItems().length>0:false;};
S.prototype.addCustomData=function(i,k,v){i.addCustomData(new A({key:k,value:v,writeToDom:true}));};
S.prototype.close=function(){if(this.oNavMenuPopover&&this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close();}if(this.oAllMyAppsPopover&&this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close();}};
S.prototype.setTooltip=function(t){this.setAggregation("tooltip",t);this.oIcon.setTooltip(t);};
S.prototype.getAllMyAppsController=function(){var o=sap.ui.getCore().byId(this.getAllMyApps());return o.getController();};
S.prototype.getStateEnum=function(){return s;};
S.prototype.onsapspace=S.prototype.onclick;S.prototype.onsapenter=S.prototype.onclick;
S.prototype.exit=function(){var n=sap.ui.getCore().byId(this.getNavigationMenu()),o=sap.ui.getCore().byId(this.getAllMyApps());if(n){n.destroy();}if(o){o.destroy();}if(this.oAllMyAppsPopover){this.oAllMyAppsPopover.destroy();}if(this.oNavMenuPopover){this.oNavMenuPopover.destroy();}if(this.oIcon){this.oIcon.destroy();}};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellFloatingAction',["sap/ui/thirdparty/jquery","sap/m/Button","sap/ushell/library","./ShellFloatingActionRenderer"],function(q,B){"use strict";
var S=B.extend("sap.ushell.ui.shell.ShellFloatingAction");
S.prototype.init=function(){this.addStyleClass("sapUshellShellFloatingAction");if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
S.prototype.exit=function(){B.prototype.exit.apply(this,arguments);};
S.prototype.onAfterRendering=function(){if(this.data("transformY")){this.removeStyleClass("sapUshellShellFloatingActionTransition");q(this.getDomRef()).css("transform","translateY("+this.data("transformY")+")");}else{this.addStyleClass("sapUshellShellFloatingActionTransition");}};
});
sap.ui.predefine('sap/ushell/ui/shell/ShellFloatingActionRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var S=R.extend(B);return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellFloatingActions',["sap/ui/thirdparty/jquery","./ShellFloatingAction","sap/ui/core/Control","sap/ushell/resources"],function(q,S,C,r){"use strict";
var a=C.extend("sap.ushell.ui.shell.ShellFloatingActions",{
metadata:{properties:{isFooterVisible:{type:"boolean",defaultValue:false}},aggregations:{floatingActions:{type:"sap.ushell.ui.shell.ShellFloatingAction",multiple:true,singularName:"floatingAction"}}},
renderer:{render:function(R,A){var f=A.getFloatingActions();R.write("<div");R.writeControlData(A);R.addClass("sapUshellShellFloatingActions");R.writeClasses();R.write(">");if(f.length){var F;if(f.length===1){F=f[0];}else{F=A._createMultipleFloatingActionsButton(f);q.each(f,function(){this.setVisible(false);R.renderControl(this);});}R.renderControl(F);}R.write("</div>");}}
});
a.prototype._createMultipleFloatingActionsButton=function(f){var F;var t=this;return new S({id:this.getId()+"-multipleFloatingActions",icon:"sap-icon://add",visible:true,press:function(){if(!this.hasStyleClass("sapUshellShellFloatingActionRotate")){this.addStyleClass("sapUshellShellFloatingActionRotate");if(!F){F=parseInt(this.$().outerHeight(),10)+parseInt(t.$().css("bottom"),10);}f.forEach(function(o){o.setVisible(true);});setTimeout(function(){f.forEach(function(o,i){var b=F*(i+1);o.$().css("transform","translateY(-"+b+"px)");o.data("transformY","-"+b+"px");});},0);}else{this.removeStyleClass("sapUshellShellFloatingActionRotate");f.forEach(function(o){o.$().css("transform","translateY(0)");});setTimeout(function(){f.forEach(function(o){o.setVisible(false);o.data("transformY",undefined);});},150);}},tooltip:r.i18n.getText("XXX")});};
a.prototype.addFloatingAction=function(A){this.addAggregation("floatingActions",A,true);if(this.getDomRef()){var b=sap.ui.getCore().createRenderManager();b.renderControl(A);b.flush(this.getDomRef());b.destroy();}return this;};
a.prototype.removeFloatingAction=function(A){if(typeof A==="number"){A=this.getAggregation("floatingActions")[A];}this.removeAggregation("floatingActions",A,true);var i=A.getId();q("#"+i).remove();return this;};
return a;});
sap.ui.predefine('sap/ushell/ui/shell/ShellHeadItem',["sap/ui/core/Control","sap/ui/core/IconPool","sap/base/util/ObjectPath"],function(C,I,O){"use strict";
var S=C.extend("sap.ushell.ui.shell.ShellHeadItem",{
metadata:{properties:{startsSection:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},showSeparator:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},enabled:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Appearance",defaultValue:false},showMarker:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},target:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},addAriaHiddenFalse:{type:"boolean",group:"Appearance",defaultValue:false},text:{type:"string",group:"Appearance",defaultValue:null},floatingNumber:{type:"int",group:"Appearance",defaultValue:null},floatingNumberMaxValue:{type:"int",group:"Appearance",defaultValue:999}},events:{press:{}}},
renderer:{apiVersion:2,render:function(r,s){var a={role:"button"};if(s.getAriaLabel()){a.label=s.getAriaLabel();}if(s.getAddAriaHiddenFalse()){a.hidden=false;}r.openStart("a",s);r.attr("tabindex","0");if((s.getTarget()||"")!==""){r.attr("href",s.getTarget());}r.accessibilityState(a);if(s.getFloatingNumber()>0){r.class("sapUshellShellHeadItmCounter");r.attr("data-counter-content",s.getDisplayFloatingNumber());}r.class("sapUshellShellHeadItm");if(!s.getEnabled()){r.class("sapUshellShellHeadItmDisabled");}if(!s.getVisible()){r.class("sapUshellShellHidden");}if(s.getSelected()){r.class("sapUshellShellHeadItmSel");}if(s.getTooltip_AsString()){r.attr("title",s.getTooltip_AsString());}r.openEnd();r.openStart("span");r.class("sapUshellShellHeadItmCntnt");var i=s.getIcon();var o=I.isIconURI(i)&&I.getIconInfo(i);if(o){r.style("font-family",o.fontFamily);r.openEnd();r.text(o.content);}else{r.openEnd();r.voidStart("img");r.attr("id",s.getId()+"-img-inner");r.attr("src",i);r.voidEnd();}r.close("span");r.close("a");}}
});
S.prototype.getDisplayFloatingNumber=function(){var n=this.getFloatingNumber(),m=this.getFloatingNumberMaxValue();var d=n+"";if(n>m){d=m+"+";}return d;};
S.prototype.onclick=function(e){if(this.getEnabled()){this.firePress();if(!this.getTarget()){e.preventDefault();}}};
S.prototype.onsapspace=S.prototype.onclick;S.prototype.onsapenter=S.prototype.onclick;O.set("sap.ui.unified.ShellHeadItem",S);return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellHeadUserItem',["sap/ui/core/Element","sap/ui/core/IconPool","sap/base/security/encodeXML","sap/ushell/library"],function(E,I,e){"use strict";
var S=E.extend("sap.ushell.ui.shell.ShellHeadUserItem",{metadata:{properties:{username:{type:"string",group:"Appearance",defaultValue:""},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},image:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null}},events:{press:{}}}});
I.getIconInfo("","");
S.prototype.onclick=function(o){this.firePress();o.preventDefault();};
S.prototype.onsapspace=S.prototype.onclick;
S.prototype.setImage=function(i){this.setProperty("image",i,true);if(this.getDomRef()){this._refreshImage();}return this;};
S.prototype.setAriaLabel=function(a){this.setProperty("ariaLabel",a);return this;};
S.prototype._refreshImage=function(){var i=this.$("img");var s=this.getImage();if(!s){i.html("").css("style","").css("display","none");}else if(I.isIconURI(s)){var o=I.getIconInfo(s);i.html("").css("style","");if(o){i.text(o.content).css("font-family","'"+o.fontFamily+"'");}}else{var $=this.$("img-inner");if($.length===0||$.attr("src")!==s){i.css("style","").html("<img id='"+this.getId()+"-img-inner' src='"+e(s)+"'></img>");}}};
S.prototype._checkAndAdaptWidth=function(s){if(!this.getDomRef()){return false;}var r=this.$(),n=this.$("name");var b=r.width();r.toggleClass("sapUshellShellHeadActionLimit",false);var m=240;if(s){m=Math.min(m,0.5*document.documentElement.clientWidth-225);}if(m<n.width()){r.toggleClass("sapUshellShellHeadActionLimit",true);}return b!==r.width();};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellLayout',["sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/core/Control","sap/ushell/Config","sap/ui/util/Storage","sap/base/Log","sap/ushell/library","sap/ushell/ui/shell/ToolArea","sap/ushell/ui/shell/ShellLayoutRenderer"],function(q,D,C,a,S,L){"use strict";
var b=C.extend("sap.ushell.ui.shell.ShellLayout",{metadata:{properties:{headerHiding:{type:"boolean",group:"Appearance",defaultValue:false},headerVisible:{type:"boolean",group:"Appearance",defaultValue:true},toolAreaVisible:{type:"boolean",group:"Appearance",defaultValue:false},floatingContainerVisible:{type:"boolean",group:"Appearance",defaultValue:false},backgroundColorForce:{type:"boolean",group:"Appearance",defaultValue:true},showBrandLine:{type:"boolean",group:"Appearance",defaultValue:true},showAnimation:{type:"boolean",group:"Appearance",defaultValue:true},enableCanvasShapes:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{toolArea:{type:"sap.ushell.ui.shell.ToolArea",multiple:false},rightFloatingContainer:{type:"sap.ushell.ui.shell.RightFloatingContainer",multiple:false},canvasSplitContainer:{type:"sap.ushell.ui.shell.SplitContainer",multiple:false},floatingActionsContainer:{type:"sap.ushell.ui.shell.ShellFloatingActions",multiple:false},footer:{type:"sap.ui.core.Control",multiple:false}},associations:{header:{type:"sap.ushell.ui.shell.ShellHeader",multiple:false},floatingContainer:{type:"sap.ushell.ui.shell.FloatingContainer",multiple:false}}}});
b._SIDEPANE_WIDTH_PHONE=13;b._SIDEPANE_WIDTH_TABLET=13;b._SIDEPANE_WIDTH_DESKTOP=15;
b.prototype.getHeader=function(){return sap.ui.getCore().byId(this.getAssociation("header"));};
b.prototype.init=function(){this._rtl=sap.ui.getCore().getConfiguration().getRTL();this._showHeader=true;this._useStrongBG=false;D.media.attachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);this._oDoable=a.on("/core/shellHeader/headerVisible").do(this.setHeaderVisible.bind(this));if(q.sap.storage){this._oStorage=new S(S.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");}};
b.prototype.exit=function(){D.media.detachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);if(this._oDoable){this._oDoable.off();this._oDoable=null;}};
b.prototype.onAfterRendering=function(){this._setSidePaneWidth();};
b.prototype.renderFloatingContainerWrapper=function(){this._oFloatingContainerWrapper=document.getElementById("sapUshellFloatingContainerWrapper");if(!this._oFloatingContainerWrapper){this._oFloatingContainerWrapper=document.createElement("DIV");this._oFloatingContainerWrapper.setAttribute("id","sapUshellFloatingContainerWrapper");this._oFloatingContainerWrapper.classList.add("sapUshellShellFloatingContainerWrapper");this._oFloatingContainerWrapper.classList.add("sapUshellShellHidden");window.document.body.appendChild(this._oFloatingContainerWrapper);}if(this._oStorage&&this._oStorage.get("floatingContainerStyle")){this._oFloatingContainerWrapper.setAttribute("style",this._oStorage.get("floatingContainerStyle"));}};
b.prototype.renderFloatingContainer=function(f){this.renderFloatingContainerWrapper();if(f&&!f.getDomRef()){if(!this._oFloatingContainerWrapper.classList.contains("sapUshellShellHidden")){this._oFloatingContainerWrapper.classList.add("sapUshellShellHidden");}f.placeAt("sapUshellFloatingContainerWrapper");}};
b.prototype.onThemeChanged=function(){return!!this.getDomRef();};
b.prototype.setToolAreaVisible=function(v){this.setProperty("toolAreaVisible",!!v,true);if(this.getToolArea()){this.getToolArea().toggleStyleClass("sapUshellShellHidden",!v);this.applySplitContainerSecondaryContentSize();return this;}if(v){sap.ui.require(["sap/ushell/EventHub"],function(E){E.emit("CreateToolArea");});return this;}L.debug("Tool area not created but visibility updated",null,"sap.ushell.ShellLayout");return this;};
b.prototype.getToolAreaSize=function(){if(this.getToolAreaVisible()){if(this.getToolArea().hasItemsWithText()){return"15rem";}return"3.0625rem";}return"0";};
b.prototype.applySplitContainerSecondaryContentSize=function(){var t=this.getToolAreaSize();this.getCanvasSplitContainer().applySecondaryContentSize(t);};
b.prototype.setFloatingContainer=function(c){this.setAssociation("floatingContainer",c,true);this.renderFloatingContainer(c);};
b.prototype.setFloatingContainerVisible=function(v){this.setProperty("floatingContainerVisible",!!v,true);if(this.getDomRef()){var f=window.document.getElementById("sapUshellFloatingContainerWrapper");if(v&&this._oStorage&&!this._oStorage.get("floatingContainerStyle")){var e=q(".sapUshellShellHeadItm").position()?q(".sapUshellShellHeadItm").position().left:0;var l=(q(window).width()-q("#shell-floatingContainer").width()-e)*100/q(window).width();var t=q(".sapUshellShellHeader").height()*100/q(window).height();f.setAttribute("style","left:"+l+"%;top:"+t+"%;position:absolute;");this._oStorage.put("floatingContainerStyle",f.getAttribute("style"));}var s=window.document.querySelector(".sapUshellShellFloatingContainerWrapper");if(s&&v===s.classList.contains("sapUshellShellHidden")){s.classList.toggle("sapUshellShellHidden");}}return this;};
b.prototype.setFloatingActionsContainer=function(c){this.setAggregation("floatingActionsContainer",c,true);};
b.prototype._setStrongBackground=function(){};
b.prototype._setSidePaneWidth=function(r){var s=this.getCanvasSplitContainer();if(s){if(!r){r=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;}var w=b["_SIDEPANE_WIDTH_"+r.toUpperCase()]+"rem";s.setSecondaryContentSize(w);}};
b.prototype._handleMediaChange=function(p){if(!this.getDomRef()){return false;}this._setSidePaneWidth(p.name);};
return b;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellLayoutRenderer',["sap/ushell/resources"],function(r){"use strict";var S={apiVersion:2};
S.render=function(a,s){var i=s.getId(),f=s.getFooter();a.openStart("div",s);a.class("sapUshellShell");if(!s.getHeaderVisible()){a.class("sapUshellShellNoHead");}a.class("sapUshellShellHead"+(s._showHeader?"Visible":"Hidden"));if(f){a.class("sapUshellShellFooterVisible");}a.openEnd();a.openStart("div");a.style("z-index","-2");a.class("sapUiShellBackgroundImage");a.class("sapUiGlobalBackgroundImageForce");a.class("sapUshellShellBG");a.class("sapContrastPlus");a.openEnd();a.close("div");if(s.getEnableCanvasShapes()){a.openStart("canvas",i+"-shapes");a.attr("height",(window.innerHeight>0)?window.innerHeight:screen.height);a.attr("width",(window.innerWidth>0)?window.innerWidth:screen.width);a.attr("role","presentation");a.style("position","absolute");a.style("z-index","-1");a.openEnd();a.close("canvas");}if(s.getToolArea()){a.openStart("aside");a.attr("aria-hidden",true);a.attr("aria-label",r.i18n.getText("ToolArea_AriaLabel"));a.openEnd();a.renderControl(s.getToolArea());a.close("aside");}if(s.getRightFloatingContainer()){a.openStart("aside");a.attr("aria-hidden",true);a.attr("aria-label",r.i18n.getText("FloatingContainer_AriaLabel"));a.openEnd();a.renderControl(s.getRightFloatingContainer());a.close("aside");}a.openStart("div",i+"-cntnt");a.class("sapUshellShellCntnt");a.class("sapUshellShellCanvas");a.openEnd();a.renderControl(s.getCanvasSplitContainer());a.close("div");a.openStart("span",i+"-main-focusDummyOut");a.attr("tabindex","-1");a.openEnd();a.close("span");a.renderControl(s.getFloatingActionsContainer());if(f){a.openStart("footer");a.class("sapMPageFooter");a.openEnd();if(f._applyContextClassFor){f._applyContextClassFor("footer");}a.renderControl(f);a.close("footer");}a.close("div");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellNavigationMenu',["sap/ui/thirdparty/jquery","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/List","sap/m/FlexBox","sap/ui/core/Control","sap/m/StandardListItem","sap/m/Label","sap/ushell/resources","sap/m/VBox","sap/ui/Device","sap/ui/events/KeyCodes","sap/base/Log"],function(q,A,L,F,C,S,a,r,V,D,K,b){"use strict";
var c=C.extend("sap.ushell.ui.shell.ShellNavigationMenu",{
metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},showTitle:{type:"boolean",defaultValue:false},showRelatedApps:{type:"boolean",defaultValue:true}},aggregations:{items:{type:"sap.m.ListItem",group:"Misc",defaultValue:null,singularName:"item"},miniTiles:{type:"sap.ushell.ui.shell.NavigationMiniTile",group:"Misc",defaultValue:null,singularName:"miniTile"}},events:{}},
renderer:{render:function(R,o){var t,m;R.write("<div ");R.writeControlData(o);R.write(">");if(o.getShowTitle()){t=o.oTitle;t.setIcon(o.getIcon());t.setTitle(o.getTitle());R.write("<div id=\"sapUshellNavTitle\" >");R.renderControl(t);R.write("</div>");}if(o.oItemsList){R.renderControl(o.oItemsList);}if(o.getShowRelatedApps()){m=o.getMiniTiles();if(m&&m.length>0){R.renderControl(o.oRelatedAppsVbox);}}R.write("</div>");}}
});
var d=function(m){this.init(m);};
d.prototype.init=function(m){this.keyCodes=K;this.jqElement=m.$();this.jqElement.on("keydown.keyboardNavigation",this.keydownHandler.bind(this));};
d.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation");}delete this.jqElement;};
d.prototype.keydownHandler=function(e){switch(e.keyCode){case this.keyCodes.ARROW_UP:this.upDownHandler(e,true);break;case this.keyCodes.ARROW_DOWN:this.upDownHandler(e,false);break;case this.keyCodes.ARROW_LEFT:this.leftRightHandler(e,false);break;case this.keyCodes.ARROW_RIGHT:this.leftRightHandler(e,true);break;case this.keyCodes.HOME:this.homeEndHandler(e,true);break;case this.keyCodes.END:this.homeEndHandler(e,false);break;case this.keyCodes.PAGE_UP:this.homeEndHandler(e,true);break;case this.keyCodes.PAGE_DOWN:this.homeEndHandler(e,false);break;default:break;}};
d.prototype.upDownHandler=function(e,i){var j=q(document.activeElement);if(!j.hasClass("sapUshellNavMiniTile")){return false;}var f=j.parent().parent();var g=j.parent().index();var h=f.children();var n;if(i){n=g-3;if(n<0){n+=9;}}else{n=(g+3)%h.length;}var k=h[n].children[0];this._setItemFocus(e,q(k));};
d.prototype.leftRightHandler=function(e,i){var n=i?"next":"prev",f,g,h,j,k,l,m=q(document.activeElement);if(!m.hasClass("sapUshellNavMiniTile")){return false;}f=m.parent();g=f[n]();h=g.index();j=f.parent();if(h===-1){k=i?0:j.children().length-1;}else{k=h;}l=j.children()[k].children[0];if(!l){return false;}this._setItemFocus(e,q(l));};
d.prototype.homeEndHandler=function(e,i){var n=i?"first":"last";var j=q(document.activeElement);if(!j.hasClass("sapUshellNavMiniTile")){return false;}e.preventDefault();var f=this.jqElement.find(".sapUshellNavMiniTile")[n]();this._setItemFocus(e,f);};
d.prototype._setItemFocus=function(e,j){e.preventDefault();e.stopImmediatePropagation();q(".sapUshellNavMiniTile").attr("tabindex",-1);j.attr("tabindex",0);j.focus();};
d.prototype.setFocusToLastFocusedMiniTile=function(e){var j=q(".sapUshellNavMiniTile[tabindex='0']");if(j&&j[0]){this._setItemFocus(e,q(j));}else{this._setItemFocus(e,q(q(".sapUshellNavMiniTile")[0]));}};
c.prototype.init=function(){};
c.prototype._createItemsList=function(){this.oItemsList=new L("sapUshellNavHierarchyItems");};
c.prototype._createMiniTilesBox=function(){this.oMiniTilesBox=new F("sapUshellNavRelatedAppsFlexBox");};
c.prototype._beforeOpen=function(){if(!this.bInitialized){this.oTitle=new S("navMenuInnerTitle").addStyleClass("sapUshellNavigationMenuTitleItem");this.oRelatedAppsTitle=new a("sapUshellRelatedAppsLabel",{text:r.i18n.getText("shellNavMenu_relatedApps")});if(!this.oMiniTilesBox){this._createMiniTilesBox();}this.oRelatedAppsVbox=new V("sapUshellRelatedAppsItems",{items:[this.oRelatedAppsTitle,this.oMiniTilesBox]});this._extendInnerControlsForAccKeyboard();this.bInitialized=true;}};
c.prototype._afterOpen=function(){if(D.system.desktop){if(this.keyboardNavigation){this.keyboardNavigation.destroy();}this.keyboardNavigation=new d(this.oMiniTilesBox);}};
c.prototype._extendInnerControlsForAccKeyboard=function(){this.oTitle.addCustomData(new A({key:"aria-level",value:"1",writeToDom:true}));if(D.system.desktop){this.oTitle.addCustomData(new A({key:"tabindex",value:"0",writeToDom:true}));this.oItemsList.addEventDelegate({onsaptabprevious:function(e){if(this.getShowTitle()){e.preventDefault();e.stopImmediatePropagation();q("#navMenuInnerTitle").focus();}else{this.keyboardNavigation.setFocusToLastFocusedMiniTile(e);}}.bind(this),onsaptabnext:function(e){if(q(".sapUshellNavMiniTile").length){this.keyboardNavigation.setFocusToLastFocusedMiniTile(e);}else{var o=sap.ui.getCore().byId("allMyAppsButton");this.keyboardNavigation._setItemFocus(e,q((o.getDomRef())));}}.bind(this)});}};
c.prototype.getMiniTiles=function(){if(this.oMiniTilesBox){return this.oMiniTilesBox.getItems();}return[];};
c.prototype.insertMiniTile=function(m,i){if(!this.oMiniTilesBox){this._createMiniTilesBox();}this.oMiniTilesBox.insertItem(m,i);return this;};
c.prototype.addMiniTile=function(m){if(!this.oMiniTilesBox){this._createMiniTilesBox();}if(this.oMiniTilesBox.getItems().length<9){this.oMiniTilesBox.addItem(m);}else{b.warning("ShellNavigationMenu.addMiniTile - miniTiles aggregation is already at maximum size of 9 elements "+"- current item was not added.");}return this;};
c.prototype.removeMiniTile=function(i){if(this.oMiniTilesBox){this.oMiniTilesBox.removeItem(i);}return this;};
c.prototype.removeAllMiniTiles=function(){if(this.oMiniTilesBox){this.oMiniTilesBox.removeAllItems();}return this;};
c.prototype.destroyMiniTiles=function(){if(this.oMiniTilesBox){this.oMiniTilesBox.destroyItems();}return this;};
c.prototype.indexOfMiniTile=function(m){if(this.oMiniTilesBox){return this.oMiniTilesBox.indexOfItem(m);}return-1;};
c.prototype.getItems=function(){if(this.oItemsList){return this.oItemsList.getItems();}return[];};
c.prototype.insertItem=function(h,i){if(!this.oItemsList){this._createItemsList();}h=this._extendHierarchyItemForAcc(h);this.oItemsList.insertItem(h,i);return this;};
c.prototype.addItem=function(h){if(!this.oItemsList){this._createItemsList();}h=this._extendHierarchyItemForAcc(h);this.oItemsList.addItem(h);return this;};
c.prototype.removeItem=function(i){if(this.oItemsList){this.oItemsList.removeItem(i);}return this;};
c.prototype.removeAllItems=function(){if(this.oItemsList){this.oItemsList.removeAllItems();}return this;};
c.prototype.destroyItems=function(){if(this.oItemsList){this.oItemsList.destroyItems();}return this;};
c.prototype.indexOfItem=function(h){if(this.oItemsList){return this.oItemsList.indexOfItem(h);}return-1;};
c.prototype._extendHierarchyItemForAcc=function(i){if(D.system.desktop){i.addEventDelegate({onsapspace:function(e){this.firePress();}.bind(i)});}return i;};
c.prototype.exit=function(){if(this.oItemsList){this.oItemsList.destroy();}if(this.oMiniTilesBox){this.oMiniTilesBox.destroy();}if(this.bInitialized){this.oTitle.destroy();this.oRelatedAppsVbox.destroy();this.oRelatedAppsTitle.destroy();}if(this.keyboardNavigation){this.keyboardNavigation.destroy();}};
c.prototype.onAfterRendering=function(){if(this.getShowTitle()){q("#sapUshellAppTitlePopover-intHeader").css("height",0);}else{q("#sapUshellAppTitlePopover-intHeader").css("height","0.5rem");}if(this.getShowTitle()){var j=q("#navMenuInnerTitle");j.attr("aria-readonly","true");j.attr("readonly","readonly");}var e=q("#sapUshellNavHierarchyItems ul");e.attr("role","group");e.attr("aria-label",r.i18n.getText("ShellNavigationMenu_HierarchyItemsAriaLabel"));var f=q("#sapUshellNavRelatedAppsFlexBox");f.attr("role","listbox");f.attr("aria-labelledBy","sapUshellRelatedAppsLabel");var g=q(".sapUshellNavMiniTile");for(var i=0;i<g.length;i++){q(g[i]).attr("aria-setsize",g.length);q(g[i]).attr("aria-posinset",i+1);}};
return c;});
sap.ui.predefine('sap/ushell/ui/shell/SplitContainer',["sap/ui/core/Control","sap/ui/core/library","sap/base/Log","sap/ushell/ui/shell/ContentRenderer","sap/ushell/ui/shell/SplitContainerRenderer"],function(C,c,L,a){"use strict";var O=c.Orientation;
var S=C.extend("sap.ushell.ui.shell.SplitContainer",{metadata:{library:"sap.ushell.ui.shell",properties:{showSecondaryContent:{type:"boolean",group:"Appearance",defaultValue:false},secondaryContentSize:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"250px"},secondaryContentWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"250px",deprecated:true},orientation:{type:"sap.ui.core.Orientation",group:"Appearance",defaultValue:O.Horizontal}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},secondaryContent:{type:"sap.ui.core.Control",multiple:true,singularName:"secondaryContent"},subHeader:{type:"sap.ui.core.Control",multiple:true,singularName:"subHeader"}}}});
(function(){
S.prototype.init=function(){this._paneRenderer=new a(this,this.getId()+"-panecntnt","secondaryContent");this._subHeadersRenderer=new a(this,this.getId()+"-canvassubHeader","subHeader");this._canvasRenderer=new a(this,this.getId()+"-canvasrootContent","content");};
S.prototype.exit=function(){this._paneRenderer.destroy();delete this._paneRenderer;this._canvasRenderer.destroy();delete this._canvasRenderer;this._subHeadersRenderer.destroy();delete this._subHeadersRenderer;};
S.prototype.onAfterRendering=function(){var t=this.getParent()?this.getParent().getToolAreaSize():"0";this.applySecondaryContentSize(t);};
S.prototype.applySecondaryContentSize=function(t){if(this.getDomRef()){var s=this.getSecondaryContentSize(),b=this.getShowSecondaryContent(),r=sap.ui.getCore().getConfiguration().getRTL()?"right":"left",o=this.getDomRef("pane"),d,e;if(this.getOrientation()===O.Vertical){d="top";e=r;o.style.height=s;o.style.width="";}else{d=r;e="top";o.style.height="";o.style.width=s;}o.style[d]=b?t:"-"+s;o.style[e]="";this.$("pane").toggleClass("sapUshellSplitContSecondClosed",!b);s=parseFloat(s)+parseFloat(t)+"rem";this.getDomRef("canvas").style[d]=b?s:t;}};
S.prototype._modifyAggregationOrProperty=function(m,d){var r=!!this.getDomRef();var b=m.apply(this,[r]);if(r&&d){d.render();}return b;};
S.prototype.getSecondaryContentWidth=function(){L.warning("SplitContainer: Use of deprecated property \"SecondaryContentWidth\", please use "+"\"SecondaryContentSize\" instead.");return this.getSecondaryContentSize.apply(this,arguments);};
S.prototype.setSecondaryContentWidth=function(){L.warning("SplitContainer: Use of deprecated property \"SecondaryContentWidth\", please use "+"\"SecondaryContentSize\" instead.");return this.setSecondaryContentSize.apply(this,arguments);};
S.prototype.insertContent=function(o,i){return this._modifyAggregationOrProperty(function(r){return this.insertAggregation("content",o,i,r);},this._canvasRenderer);};
S.prototype.addContent=function(o){return this._modifyAggregationOrProperty(function(r){return this.addAggregation("content",o,r);},this._canvasRenderer);};
S.prototype.removeContent=function(i){return this._modifyAggregationOrProperty(function(r){return this.removeAggregation("content",i,r);},this._canvasRenderer);};
S.prototype.removeAllContent=function(){return this._modifyAggregationOrProperty(function(r){return this.removeAllAggregation("content",r);},this._canvasRenderer);};
S.prototype.destroyContent=function(){return this._modifyAggregationOrProperty(function(r){return this.destroyAggregation("content",r);},this._canvasRenderer);};
S.prototype.insertSecondaryContent=function(o,i){return this._modifyAggregationOrProperty(function(r){return this.insertAggregation("secondaryContent",o,i,r);},this._paneRenderer);};
S.prototype.addSecondaryContent=function(o){return this._modifyAggregationOrProperty(function(r){return this.addAggregation("secondaryContent",o,r);},this._paneRenderer);};
S.prototype.removeSecondaryContent=function(i){return this._modifyAggregationOrProperty(function(r){return this.removeAggregation("secondaryContent",i,r);},this._paneRenderer);};
S.prototype.removeAllSecondaryContent=function(){return this._modifyAggregationOrProperty(function(r){return this.removeAllAggregation("secondaryContent",r);},this._paneRenderer);};
S.prototype.destroySecondaryContent=function(){return this._modifyAggregationOrProperty(function(r){return this.destroyAggregation("secondaryContent",r);},this._paneRenderer);};
S.prototype.addSubHeader=function(o){return this._modifyAggregationOrProperty(function(r){return this.addAggregation("subHeader",o,r);},this._subHeadersRenderer);};
S.prototype.removeSubHeader=function(){return this._modifyAggregationOrProperty(function(r){return this.removeAllAggregation("subHeader",r);},this._subHeadersRenderer);};
S.prototype.destroySubHeader=function(){return this._modifyAggregationOrProperty(function(r){return this.destroyAggregation("subHeader",r);},this._subHeadersRenderer);};
S.prototype.setSecondaryContentSize=function(s){this.setProperty("secondaryContentSize",s,true);this.onAfterRendering();};
})();return S;});
sap.ui.predefine('sap/ushell/ui/shell/SplitContainerRenderer',["sap/ui/core/library","sap/ushell/resources"],function(c,r){"use strict";var O=c.Orientation;var S={};
S.render=function(a,C){var i=C.getId();var v=C.getOrientation()===O.Vertical;a.write("<div");a.writeControlData(C);a.addClass("sapUshellSpltCont");a.addClass("sapUshellSpltCont"+(v?"V":"H"));if(sap.ui.getCore().getConfiguration().getAnimation()){a.addClass("sapUshellSpltContAnim");}if(!C.getShowSecondaryContent()){a.addClass("sapUshellSpltContPaneHidden");}a.writeClasses();a.write(">");var s=i+"-pane";var w=C.getShowSecondaryContent()?C.getSecondaryContentSize():"0";a.write("<aside");a.writeAttribute("aria-hidden",true);a.writeAttribute("aria-label",r.i18n.getText("SecondaryContent_AriaLabel"));a.writeAttribute("id",s);a.writeAttribute("style","width:'"+w+"'");a.addClass("sapUshellSpltContPane");if(!C.getShowSecondaryContent()){a.addClass("sapUshellSplitContSecondClosed");}a.writeClasses();a.write(">");this.renderSecondaryContent(a,s,C.getSecondaryContent());a.write("</aside>");var b=i+"-canvas";a.write("<section id='",b,"' class='sapUshellSpltContCanvas'>");var o=C.getAggregation("subHeader");this.renderRootContent(a,b,C.getContent(),o);a.write("</section>");a.write("</div>");};
S.renderRootContent=function(a,i,C,s){a.write("<div id='",i,"cntnt' class='sapUshellSpltContCntnt'");a.writeAttribute("data-sap-ui-root-content","true");a.write(">");a.write("<div id='",i,"subHeader'>");if(s&&s.length){a.renderControl(s[0]);}a.write("</div>");if(C&&C.length){a.write("<div id='",i,"rootContent' class='sapUshellSpltContainerContentWrapper'>");C.forEach(function(o,b){a.renderControl(o);});a.write("</div>");}a.write("</div>");};
S.renderSecondaryContent=function(a,I,C){a.write("<div id='",I,"cntnt' class='sapUshellSpltContCntnt'");a.writeAttribute("data-sap-ui-root-content","true");a.write(">");for(var i=0;i<C.length;i++){a.renderControl(C[i]);}a.write("</div>");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ToolArea',["sap/ui/core/Control"],function(C){"use strict";
var T=C.extend("sap.ushell.ui.shell.ToolArea",{
metadata:{aggregations:{toolAreaItems:{type:"sap.ushell.ui.shell.ToolAreaItem",multiple:true}}},
renderer:{apiVersion:2,render:function(r,t){r.openStart("div",t);r.class("sapUshellToolArea");if(!t.hasItemsWithText()){r.class("sapUshellToolAreaTextHidden");}r.openEnd();r.openStart("div");r.attr("id",t.getId()+"-cntnt");r.class("sapUshellToolAreaContainer");r.openEnd();var i=t.getToolAreaItems(),a,o;for(a=0;a<i.length;a++){o=i[a];if(o.getVisible()){r.openStart("div");r.class("sapUshellToolAreaContent");if(o.getSelected()){r.class("sapUshellToolAreaItemSelected");}r.openEnd();r.renderControl(o);r.close("div");r.openStart("div");r.class("sapUshellToolAreaContentSeparator");r.openEnd();r.close("div");}}r.close("div");r.close("div");}}
});
T.prototype.hasItemsWithText=function(){var i=this.getToolAreaItems(),a,t;for(a=0;a<i.length;a++){t=i[a];if(t.getVisible()&&t.getText()){return true;}}return false;};
return T;});
sap.ui.predefine('sap/ushell/ui/shell/ToolAreaItem',["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/core/IconPool","sap/ushell/library"],function(q,C,I){"use strict";
var T=C.extend("sap.ushell.ui.shell.ToolAreaItem",{
metadata:{properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false},text:{type:"string",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},expandable:{type:"boolean",group:"Appearance",defaultValue:false}},events:{press:{},expand:{}}},
renderer:{render:function(r,t){var i;r.write("<div");r.writeControlData(t);if(!t.getIcon()){r.addClass("sapUshellToolAreaItmTextOnly");}else{r.addClass("sapUshellToolAreaItm");}if(!t.getVisible()){r.addClass("sapUshellShellHidden");}if(t.getAriaLabel()){r.writeAccessibilityState({label:this.getAriaLabel(),role:"button"});}r.writeClasses();var a=t.getTooltip_AsString();if(a){r.writeAttributeEscaped("title",a);}r.write(">");if(t.getIcon()){i=I.createControlByURI(t.getIcon());i.setUseIconTooltip(false);i.addStyleClass("sapUshellToolAreaItemIcon");r.renderControl(i);}if(t.getText()){r.write("<span");r.addClass("sapUshellToolAreaItemText");r.writeClasses();r.write(">");r.writeEscaped(t.getText());r.write("</span>");}if(t.getExpandable()){this.renderExpandable(r);}r.write("</div>");},renderExpandable:function(r){var i=I.createControlByURI("sap-icon://icon-dropdown");i.addStyleClass("sapUshellToolAreaItemExpandable");r.renderControl(i);}}
});
T.prototype.onclick=function(e){if(this.$().parent().hasClass("sapUshellToolAreaItemSelected")){this.setSelected(false);}else{this.setSelected(true);}if(e.target.className.indexOf("sapUshellToolAreaItemExpandable")>0){this.fireExpand();}else{this.firePress();}};
T.prototype.onsapenter=T.prototype.onclick;
T.prototype.setExpandable=function(e){e=!!e;this.setProperty("expandable",e,true);this.$().toggleClass("sapUshellToolAreaItemExpandable",e);};
T.prototype.setSelected=function(s){s=!!s;if(s){var j=q(".sapUshellToolAreaItemSelected");j.each(function(){q(this).removeClass("sapUshellToolAreaItemSelected");});}this.setProperty("selected",s,true);this.$().parent().toggleClass("sapUshellToolAreaItemSelected",s);};
T.prototype.setVisible=function(v){var r=this.getParent()&&this.getParent().getDomRef();this.setProperty("visible",!!v,r);this.$().toggleClass("sapUshellShellHidden",!v);};
T.prototype.setAriaLabel=function(a){this.setProperty("ariaLabel",a);return this;};
return T;},true);
sap.ui.predefine('sap/ushell/ui/tile/DynamicTile',['sap/ushell/library','./TileBase','./DynamicTileRenderer'],function(l,T){"use strict";
var D=T.extend("sap.ushell.ui.tile.DynamicTile",{metadata:{library:"sap.ushell",properties:{numberValue:{type:"string",group:"Data",defaultValue:'0.0'},numberState:{type:"sap.ushell.ui.tile.State",group:"Appearance",defaultValue:sap.ushell.ui.tile.State.Neutral},numberUnit:{type:"string",group:"Data",defaultValue:null},numberDigits:{type:"int",group:"Appearance",defaultValue:0},stateArrow:{type:"sap.ushell.ui.tile.StateArrow",group:"Appearance",defaultValue:sap.ushell.ui.tile.StateArrow.None},numberFactor:{type:"string",group:"Data",defaultValue:null}}}});
return D;});
sap.ui.predefine('sap/ushell/ui/tile/DynamicTileRenderer',["sap/ui/core/Renderer","sap/ui/core/format/NumberFormat","../../library","./TileBaseRenderer","sap/ushell/resources"],function(R,N,u,T,r){"use strict";var S=u.ui.tile.State;var D=R.extend(T);var t=r.i18n;
D.renderPart=function(o,c){var n=c.getNumberValue(),a=c.getNumberFactor(),d=n.toString(),m=c.getIcon()?4:5,s=this._shouldProcessDigits(d,c);if(d.length>m||s){var b=this._normalizeNumber(n,m,a,c);a=b.numberFactor;d=b.displayNumber;}else if(d!==""){var e=N.getFloatInstance({maxFractionDigits:m});d=e.format(n);}o.write("<div");o.addClass("sapUshellDynamicTile");o.writeClasses();o.write(">");o.write("<div");o.addClass("sapUshellDynamicTileData");o.addClass((c.getNumberState()?"sapUshellDynamicTileData"+c.getNumberState():"sapUshellDynamicTileData"+S.Neutral));o.writeClasses();o.write(">");o.write("<div class='sapUshellDynamicTileIndication'>");if(c.getStateArrow()){o.write("<div");o.addClass("sapUshellDynamicTileStateArrow");o.addClass("sapUshellDynamicTileData"+c.getStateArrow());o.writeClasses();o.write(">");o.write("</div>");}o.write("<br><div");o.addClass("sapUshellDynamicTileNumberFactor");o.writeClasses();o.writeAccessibilityState(c,{label:t.getText("TileUnits_lable")+a});o.write(">");o.writeEscaped(a);o.write("</div>");o.write("</div>");o.write("<div");o.addClass("sapUshellDynamicTileNumber");o.writeClasses();if(d&&d!==""){o.writeAccessibilityState(c,{label:t.getText("TileValue_lable")+d});o.write(">");o.writeEscaped(d);}else{o.write(">");o.writeEscaped(c.getNumberValue());}o.write("</div>");o.write("</div>");o.write("</div>");};
D._normalizeNumber=function(n,m,a,c){var b;if(isNaN(n)){b=n;}else{var o=N.getFloatInstance({maxFractionDigits:c.getNumberDigits()});if(!a){var d=Math.abs(n);if(d>=1000000000){a="B";n/=1000000000;}else if(d>=1000000){a="M";n/=1000000;}else if(d>=1000){a="K";n/=1000;}}b=o.format(n);}var e=b;var f=e[m-1];m-=(f==="."||f===",")?1:0;e=e.substring(0,m);return{displayNumber:e,numberFactor:a};};
D._shouldProcessDigits=function(d,c){var n=c.getNumberDigits(),a;if(d.indexOf(".")!==-1){a=d.split(".")[1].length;if(a>n){return true;}}return false;};
D.getInfoPrefix=function(c){return c.getNumberUnit();};
return D;},true);
sap.ui.predefine('sap/ushell/ui/tile/ImageTile',['sap/ushell/library','./TileBase','./ImageTileRenderer'],function(l,T){"use strict";
var I=T.extend("sap.ushell.ui.tile.ImageTile",{metadata:{library:"sap.ushell",properties:{imageSource:{type:"string",group:"Appearance",defaultValue:null}}}});
return I;});
sap.ui.predefine('sap/ushell/ui/tile/ImageTileRenderer',['sap/ui/core/Renderer','./TileBaseRenderer'],function(R,T){"use strict";var I=R.extend(T);
I.renderPart=function(r,c){r.write("<img");r.addClass("sapUshellImageTile");r.writeClasses();r.writeAttributeEscaped("src",c.getImageSource());r.writeAttributeEscaped("alt"," ");r.write("/>");};
return I;},true);
sap.ui.predefine('sap/ushell/ui/tile/StaticTile',['sap/ushell/library','./TileBase','./StaticTileRenderer'],function(l,T){"use strict";
var S=T.extend("sap.ushell.ui.tile.StaticTile",{metadata:{library:"sap.ushell"}});
return S;});
sap.ui.predefine('sap/ushell/ui/tile/StaticTileRenderer',['sap/ui/core/Renderer','./TileBaseRenderer'],function(R,T){"use strict";var S=R.extend(T);
S.renderPart=function(r,c){r.write("<span");r.addClass("sapUshellStaticTile");r.writeClasses();r.write(">");r.write("</span>");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/tile/TileBase',['sap/ui/core/Control','sap/ushell/library','./TileBaseRenderer'],function(C,l){"use strict";
var T=C.extend("sap.ushell.ui.tile.TileBase",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Data",defaultValue:null},subtitle:{type:"string",group:"Data",defaultValue:null},icon:{type:"string",group:"Data",defaultValue:null},info:{type:"string",group:"Data",defaultValue:null},infoState:{type:"sap.ushell.ui.tile.State",defaultValue:sap.ushell.ui.tile.State.Neutral},targetURL:{type:"string",group:"Behavior",defaultValue:null},highlightTerms:{type:"any",group:"Appearance",defaultValue:[]}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},events:{press:{}}}});
T.prototype.ontap=function(e){this.firePress({});};
T.prototype.onsapenter=function(e){this.firePress({});};
T.prototype.onsapspace=function(e){this.firePress({});};
return T;});
sap.ui.predefine('sap/ushell/ui/tile/TileBaseRenderer',["sap/ushell/resources","sap/base/security/encodeXML","sap/ui/core/Icon"],function(r,e,I){"use strict";var T={};var t=r.i18n;
T.highlight=function(h,s){var i,a,E=e(s).replace(/&#xa;/g,"<br/>");if(h&&h.length&&h.length>0){for(i=0;i<h.length;i=i+1){a=new RegExp("("+e(h[i]).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")+")","gi");E=E.replace(a,"<b>$1</b>");}}return E;};
T.render=function(R,c){var i,o;R.write("<div");R.writeControlData(c);if(c.getTargetURL()){R.writeAttributeEscaped("data-targeturl",c.getTargetURL());}R.addClass("sapUshellTileBase");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellTileBaseHeader");R.writeClasses();R.write(">");R.write("<h3");R.addClass("sapUshellTileBaseTitle");R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("tileTypeListItem")+t.getText("TileDetails_lable")+t.getText("TileTitle_lable")+c.getTitle()});R.write(">");R.write(this.highlight(c.getHighlightTerms(),c.getTitle()||""));R.write("</h3>");if(c.getSubtitle()){R.write("<h4");R.addClass("sapUshellTileBaseSubtitle");R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("TileSubTitle_lable")+c.getSubtitle()});R.write(">");R.write(this.highlight(c.getHighlightTerms(),c.getSubtitle()));R.write("</h4>");}R.write("</div>");if(typeof(this.renderPart)==="function"){this.renderPart(R,c);}if(c.getIcon()){o=new I({src:c.getIcon()});o.addStyleClass("sapUshellTileBaseIcon");R.renderControl(o);}if(c.getInfo()||((typeof(this.getInfoPrefix)==="function"))&&this.getInfoPrefix(c)){R.write("<div");R.addClass("sapUshellTileBaseInfo");R.addClass(c.getInfoState()?"sapUshellTileBase"+c.getInfoState():"sapUshellTileBase"+sap.ushell.ui.tile.State.Neutral);R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("TileInfo_lable")+c.getInfo()});R.write(">");if(typeof(this.getInfoPrefix)==="function"){i=this.getInfoPrefix(c);R.writeEscaped(i);}if(c.getInfo()){if(i){R.write(", ");}R.write(this.highlight(c.getHighlightTerms(),c.getInfo()));}R.write("</div>");}R.write("</div>");};
return T;},true);
sap.ui.predefine('sap/ushell/ui/utils',["sap/ushell/EventHub","sap/ui/thirdparty/jquery"],function(E,q){"use strict";
function s(e){var r=new q.Deferred(),w,c,t=0,f=0,a=0,p=[],b=[],d,A={refresh:false};function o(h){if(h&&h.refresh===true){A.refresh=true;}a++;r.notify();}function g(h){b.push({entry:d,message:h});f++;r.notify();}var u=E.last("UserSettingsOpened")||{};Object.keys(u).forEach(function(i){var I=parseInt(i,10);c=e[I].onSave();c.done(o);d=e[I].title;c.fail(g);p.push(c);t++;});w=q.when.apply(null,p);w.done(function(){E.emit("UserSettingsOpened",null);r.resolve(A);});r.progress(function(){if(f>0&&(f+a===t)){r.reject(b);}});return r.promise();}
return{saveUserPreferenceEntries:s};});
sap.ui.predefine('sap/ushell/ui5service/AppIsolationService',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","./_AppIsolationService/appisolationservice.class.factory"],function(S,a,b,d){"use strict";return d({serviceRegistry:S,serviceFactory:a,service:b});});
sap.ui.predefine('sap/ushell/ui5service/CardNavigation',["sap/ui/core/service/Service","sap/ushell/Config","sap/ushell/services/AppType","sap/base/Log"],function(S,C,A,U){"use strict";
var a=S.extend("sap.ushell.ui5service.CardNavigation",{constructor:function(){this.oCrossAppNav=sap.ushell.Container.getService("CrossApplicationNavigation");}});
a.prototype.navigate=function(c){var p=c.parameters;if(p.openUI){if(p.openUI==="RecentActivities"||p.openUI==="FrequentActivities"){sap.ui.require(["sap/ushell/ui/QuickAccess"],function(Q){var t=p.openUI==="RecentActivities"?"recentActivityFilter":"frequentlyUsedFilter";Q.openQuickAccessDialog(t);});}else{U.error("Request to open unknown User Interface: '"+p.openUI+"'");}}else if(p.url&&p.url!==""){var l=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(l){var r={title:p.title,url:p.url,appType:A.URL,appId:p.url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}window.open(p.url,"_blank");}else{this.oCrossAppNav.toExternal({target:{semanticObject:p.intentSemanticObject,action:p.intentAction},params:p.intentParameters,appSpecificRoute:p.intentAppRoute});}};
a.prototype.enabled=function(c){var p=c.parameters;if(p.openUI){if(["RecentActivities","FrequentActivities"].indexOf(p.openUI)>-1){return Promise.resolve(true);}return Promise.resolve(false);}var n={target:{semanticObject:p.intentSemanticObject,action:p.intentAction},params:p.intentParameters};return new Promise(function(r){this.oCrossAppNav.isNavigationSupported([n]).done(function(R){r(R[0].supported);}).fail(function(){r(false);});}.bind(this));};
return a;});
sap.ui.predefine('sap/ushell/ui5service/CardUserFrequents',["sap/ushell/ui5service/_CardUserRecents/CardUserRecentsBase","sap/ushell/EventHub","sap/ushell/Config"],function(C,E,c){"use strict";
var d=C.extend("sap.ushell.ui5service.CardUserFrequents");
d.prototype.getData=function(){if(!c.last("/core/shell/model/enableTrackingActivity")){return Promise.resolve([]);}return new Promise(function(r,a){this.oUserRecents.getFrequentActivity().done(function(f){r(this._getActivitiesAsCardItems(f));}.bind(this)).fail(function(e){a(e);});}.bind(this));};
d.prototype.attachDataChanged=function(u){E.on("newUserRecentsItem").do(function(r){var U=this._sortAsFrequentActivities(r.recentUsageArray);var a=[];for(var i=0;i<U.length;i++){a.push(U[i].oItem);}var p=this._getActivitiesAsCardItems(a);u({data:p});}.bind(this));E.on("userRecentsCleared").do(function(){u({data:[]});});};
d.prototype._sortAsFrequentActivities=function(r){var A,w=0,f=[],o,p=r[0]?new Date(r[0].iTimestamp):undefined,e;for(A=0;A<r.length&&w<30;A++){o=r[A];if(o.iCount>1){f.push(o);}e=new Date(o.iTimestamp);if(p.toDateString()!==e.toDateString()){w++;p=e;}}f.sort(function(a,b){return b.iCount-a.iCount;});return f.slice(0,30);};
d.prototype.detachDataChanged=function(){E.on("newUserRecentsItem").off();E.on("userRecentsCleared").off();};
d.hasNoAdapter=true;return d;},true);
sap.ui.predefine('sap/ushell/ui5service/CardUserRecents',["sap/ushell/ui5service/_CardUserRecents/CardUserRecentsBase","sap/ushell/EventHub","sap/ushell/Config"],function(C,E,a){"use strict";
var b=C.extend("sap.ushell.ui5service.CardUserRecents");
b.prototype.getData=function(){if(!a.last("/core/shell/model/enableTrackingActivity")){return Promise.resolve([]);}return new Promise(function(r,c){this.oUserRecents.getRecentActivity().done(function(R){r(this._getActivitiesAsCardItems(R));}.bind(this)).fail(function(e){c(e);});}.bind(this));};
b.prototype.attachDataChanged=function(u){E.on("newUserRecentsItem").do(function(r){var U=r.recentUsageArray;var c=[];for(var i=0;i<U.length;i++){c.push(U[i].oItem);}var p=this._getActivitiesAsCardItems(c);u({data:p});}.bind(this));E.on("userRecentsCleared").do(function(){u({data:[]});});};
b.prototype.detachDataChanged=function(){E.on("newUserRecentsItem").off();E.on("userRecentsCleared").off();};
b.hasNoAdapter=true;return b;});
sap.ui.predefine('sap/ushell/ui5service/ShellUIService',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","./_ShellUIService/shelluiservice.class.factory"],function(S,a,b,d){"use strict";return d({serviceRegistry:S,serviceFactory:a,service:b});},true);
sap.ui.predefine('sap/ushell/ui5service/UserStatus',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","sap/ui/base/EventProvider"],function(S,a,b,E){"use strict";var O={statusChanged:"statusChanged",serviceStateChanged:"serviceStateChanged"};
var U=b.extend("sap.ushell.ui5service.UserStatus",{
init:function(){U.prototype.isEnabled=false;S.register("sap.ushell.ui5service.UserStatus",new a(U));this.oEventProvider=new E();U.prototype.AvailableStatus={AVAILABLE:"AVAILABLE",AWAY:"AWAY",BUSY:"BUSY",APPEAR_OFFLINE:"APPEAR_OFFLINE"};},
exit:function(){this.oEventProvider.destroy();}
});
U.prototype.setEnabled=function(e){this.oEventProvider.fireEvent(O.serviceStateChanged,{data:e});U.prototype.isEnabled=e;return;};
U.prototype.setStatus=function(n){if(!U.prototype.isEnabled){throw new Error("Unable to change status because the UserStatus service is disabled.");}if(!U.prototype.AvailableStatus[n]&&n!==null){throw new Error("Enter a valid status.");}this.oEventProvider.fireEvent(O.statusChanged,{data:n});};
U.prototype.attachStatusChanged=function(f){this.oEventProvider.attachEvent(O.statusChanged,f);};
U.prototype.detachStatusChanged=function(f){this.oEventProvider.detachEvent(O.statusChanged,f);};
return U;});
sap.ui.predefine('sap/ushell/ui5service/_AppIsolationService/appisolationservice.class.factory',["sap/ui/base/EventProvider","sap/ushell/EventHub","sap/base/util/isPlainObject","sap/base/Log","sap/base/util/Version"],function(E,a,i,L,V){"use strict";return function(s){var S=s.serviceRegistry,b=s.serviceFactory,c=s.service;var e=new E(),A;var o;var d=c.extend("sap.ushell.ui5service.AppIsolationService",{init:function(){var t=this,p=this.getInterface();p.init=function(){t._amendPublicServiceInstance.call(t,this);};S.register("sap.ushell.ui5service.AppIsolationService",new b(p));},_setActiveComponentId:function(I){A=I;},_getActiveComponentId:function(){return A;},_getEventProvider:function(){return e;},_ensureArrayOfObjectOfStrings:function(v,m){var f=Array.isArray(v)&&v.every(function(O){return i(O)&&Object.keys(O).length>0&&Object.keys(O).every(function(k){return typeof O[k]==="string";});});if(!f){L.error("'"+m+"' was called with invalid parameters","An array of non-empty objects with string values is expected","sap.ushell.ui5service.AppIsolationService");}return f;},_ensureFunction:function(v,m){var t=typeof v;if(t!=="function"){L.error("'"+m+"' was called with invalid arguments","the parameter should be a function, got '"+t+"' instead","sap.ushell.ui5service.AppIsolationService");return false;}return true;},_ensureString:function(v,m){var t=typeof v;if(t!=="string"){L.error("'"+m+"' was called with invalid arguments","the parameter should be a string, got '"+t+"' instead","sap.ushell.ui5service.AppIsolationService");return false;}return true;},_addCallAllowedCheck:function(p,P){var t=this;p[P]=function(){var C=p.getContext();if(!C||C.scopeObject.getId()!==A){L.warning("Call to "+P+" is not allowed","This may be caused by an app component other than the active '"+A+"' that tries to call the method","sap.ushell.ui5service.AppIsolationService");return undefined;}return t[P].apply(p,arguments);};},_amendPublicServiceInstance:function(p){var C;var P={AppLifeCycle:undefined};sap.ui.getCore().getEventBus().publish("sap.ushell","getAppLifeCycle",P);o=P.AppLifeCycle;C=p.getContext();if(typeof C==="undefined"){return;}if(C.scopeType==="component"){this._setActiveComponentId(C.scopeObject.getId());return;}L.error("Invalid context for AppIsolationService interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.ui5service.AppIsolationService");},getUxdVersion:function(){if((new V(sap.ui.version).compareTo("1.37.0"))>=0){return 2;}return 1;},registerTunnels:function(t){o.registerTunnels(t);},registerEvents:function(f){o.registerEvents(f);},registerShellCommunicationHandler:function(C){o.registerShellCommunicationHandler(C);},registerIframeCommunicationHandler:function(h,f){o.registerIframeCommunicationHandler(h,f);},getCurrentAppHash:function(){return o.getCurrentApplication().hash;},getCurrentAppTargetResolution:function(){return o.getCurrentApplication().target;},createTunnel:function(C,f,m){return o.createTunnel(C,f,m);},getIframeHandelrs:function(){return o.getCurrentApplication().container.getIframeHandlers();},jsonStringifyFn:function(j){var r=JSON.stringify(j,function(k,v){return(typeof v==="function")?v.toString():v;});return r;}});return d;};});
sap.ui.predefine('sap/ushell/ui5service/_CardUserRecents/CardUserRecentsBase',["sap/ui/core/service/Service","sap/ushell/resources","sap/ushell/services/AppType"],function(S,r,A){"use strict";
function _(t,s){if(s===A.SEARCH){return"\""+t+"\"";}return t;}
function a(s){if(s===A.SEARCH){return r.i18n.getText("recentActivitiesSearchDescription");}return A.getDisplayName(s);}
var C=S.extend("sap.ushell.ui5service._CardUserRecents.CardUserRecentsBase",{constructor:function(){S.apply(this);this.oUserRecents=sap.ushell.Container.getService("UserRecents");this.oURLParsing=sap.ushell.Container.getService("URLParsing");}});
C.prototype._getActivitiesAsCardItems=function(b){var c=[],s={},o;for(var i=0;i<b.length;i++){if(b[i].url&&b[i].url!==""){s=this.oURLParsing.parseShellHash(b[i].url);o={Name:_(b[i].title,b[i].appType),Description:a(b[i].appType),Icon:b[i].icon||"sap-icon://product"};if(s){o.Intent={SemanticObject:s.semanticObject,Action:s.action,Parameters:s.params,AppSpecificRoute:s.appSpecificRoute};}else{o.Url=b[i].url;}c.push(o);}}return c;};
return C;},true);
sap.ui.predefine('sap/ushell/ui5service/_ShellUIService/shelluiservice.class.factory',["sap/ui/base/EventProvider","sap/ui/thirdparty/hasher","sap/base/util/isPlainObject","sap/base/util/Version"],function(E,h,i,V){"use strict";return function(s){var S=s.serviceRegistry,a=s.serviceFactory,b=s.service;var l;var e=new E();var O={hierarchyChanged:"hierarchyChanged",relatedAppsChanged:"relatedAppsChanged",titleChanged:"titleChanged",backNavigationChanged:"backNavigationChanged"};var A;var c=b.extend("sap.ushell.ui5service.ShellUIService",{init:function(){var t=this,p=this.getInterface();p.init=function(){t._amendPublicServiceInstance.call(t,this);};S.register("sap.ushell.ui5service.ShellUIService",new a(p));},_setActiveComponentId:function(I){A=I;},_getActiveComponentId:function(){return A;},_shouldEnableAutoHierarchy:function(o){return typeof o.getManifestEntry==="function"&&o.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setHierarchy")==="auto";},_shouldEnableAutoTitle:function(o){return typeof o.getManifestEntry==="function"&&o.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setTitle")==="auto";},_enableAutoHierarchy:function(o){var t=this;var r=o.getRouter&&o.getRouter();if(!r){jQuery.sap.log.error("Could not enable automatic setHierarchy on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return;}r.attachTitleChanged(function(d){var H=d.getParameter("history");t.setHierarchy(H.reverse().map(function(u){var f=t._getCurrentShellHashWithoutAppRoute();return{title:u.title,intent:f+"&/"+u.hash};}));});},_enableAutoTitle:function(o){var t=this;var r=o.getRouter&&o.getRouter();if(!r){jQuery.sap.log.error("Could not enable automatic setTitle on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return;}var T=r.getTitleHistory()[0];if(T&&T.title){setTimeout(function(){t.setTitle(T.title);},0);}r.attachTitleChanged(function(d){var f=d.getParameter("title");t.setTitle(f);});},_getCurrentShellHashWithoutAppRoute:function(){var f="#"+h.getHash();var u=sap.ushell.Container.getService("URLParsing");var U=u.getShellHash(f);if(!U){jQuery.sap.log.error("Cannot get the current shell hash","URLParsing service returned a falsy value for "+f,"sap.ushell.ui5service.ShellUIService");return"";}return"#"+U;},_getEventProvider:function(){return e;},_getLastSetTitle:function(){return l;},_ensureArrayOfObjectOfStrings:function(v,m){var d=Array.isArray(v)&&v.every(function(o){return i(o)&&Object.keys(o).length>0&&Object.keys(o).every(function(k){return typeof o[k]==="string";});});if(!d){jQuery.sap.log.error("'"+m+"' was called with invalid parameters","An array of non-empty objects with string values is expected","sap.ushell.ui5service.ShellUIService");}return d;},_ensureFunction:function(v,m){var t=typeof v;if(t!=="function"){jQuery.sap.log.error("'"+m+"' was called with invalid arguments","the parameter should be a function, got '"+t+"' instead","sap.ushell.ui5service.ShellUIService");return false;}return true;},_ensureString:function(v,m){var t=typeof v;if(t!=="string"){jQuery.sap.log.error("'"+m+"' was called with invalid arguments","the parameter should be a string, got '"+t+"' instead","sap.ushell.ui5service.ShellUIService");return false;}return true;},_addCallAllowedCheck:function(p,P){var t=this;p[P]=function(){var C=p.getContext();if(!C||C.scopeObject.getId()!==A){jQuery.sap.log.warning("Call to "+P+" is not allowed","This may be caused by an app component other than the active '"+A+"' that tries to call the method","sap.ushell.ui5service.ShellUIService");return undefined;}if(P==="setHierarchy"&&C.scopeType==="component"&&C.scopeObject&&t._shouldEnableAutoHierarchy(C.scopeObject)){jQuery.sap.log.warning("Call to "+P+" is not allowed","The app defines that setHierarchy should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined;}if(P==="setTitle"&&C.scopeType==="component"&&C.scopeObject&&t._shouldEnableAutoTitle(C.scopeObject)){jQuery.sap.log.warning("Call to "+P+" is not allowed","The app defines that setTitle should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined;}return t[P].apply(p,arguments);};},_amendPublicServiceInstance:function(p){var t=this,C;C=p.getContext();if(typeof C==="undefined"){return;}["setTitle","setHierarchy","setRelatedApps","setBackNavigation"].forEach(function(m){t._addCallAllowedCheck(p,m);});var o=C.scopeObject;if(C.scopeType==="component"&&o){this._setActiveComponentId(o.getId());if(this._shouldEnableAutoHierarchy(o)){this._enableAutoHierarchy(o);}if(this._shouldEnableAutoTitle(o)){this._enableAutoTitle(o);}return;}jQuery.sap.log.error("Invalid context for ShellUIService interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.ui5service.ShellUIService");},setHierarchy:function(H){if(typeof H!=="undefined"&&!c.prototype._ensureArrayOfObjectOfStrings(H,"setHierarchy")){return;}var C=this.getContext().scopeObject;e.fireEvent(O.hierarchyChanged,{data:H,component:C});return;},setTitle:function(t){if(typeof t!=="undefined"&&!c.prototype._ensureString(t,"setTitle")){return;}var C=this.getContext().scopeObject;l=t;e.fireEvent(O.titleChanged,{data:t,component:C});return;},setBackNavigation:function(C){if(typeof C!=="undefined"&&!c.prototype._ensureFunction(C,"setBackNavigation")){return;}var o=this.getContext().scopeObject;e.fireEvent(O.backNavigationChanged,{data:C,component:o});return;},getTitle:function(){return this._getLastSetTitle();},setRelatedApps:function(r){if(typeof r!=="undefined"&&!c.prototype._ensureArrayOfObjectOfStrings(r,"setRelatedApps")){return;}var C=this.getContext().scopeObject;e.fireEvent(O.relatedAppsChanged,{data:r,component:C});return;},getUxdVersion:function(){if((new V(sap.ui.version).compareTo("1.37.0"))>=0){return 2;}return 1;},_attachHierarchyChanged:function(f){this._getEventProvider().attachEvent(O.hierarchyChanged,f);},_detachHierarchyChanged:function(f){this._getEventProvider().detachEvent(O.hierarchyChanged,f);},_attachTitleChanged:function(f){this._getEventProvider().attachEvent(O.titleChanged,f);},_attachBackNavigationChanged:function(f){this._getEventProvider().attachEvent(O.backNavigationChanged,f);},_detachBackNavigationChanged:function(f){this._getEventProvider().detachEvent(O.backNavigationChanged,f);},_detachTitleChanged:function(f){this._getEventProvider().detachEvent(O.titleChanged,f);},_attachRelatedAppsChanged:function(f){this._getEventProvider().attachEvent(O.relatedAppsChanged,f);},_detachRelatedAppsChanged:function(f){this._getEventProvider().detachEvent(O.relatedAppsChanged,f);}});return c;};});
sap.ui.predefine('sap/ushell/utils',["sap/base/util/UriParameters","sap/base/util/uid","sap/base/util/ObjectPath","sap/ui/core/theming/Parameters","sap/ui/thirdparty/URI","sap/ushell/utils/clone","sap/ushell/utils/type","sap/ushell/utils/objectOperations","sap/ui/Device"],function(U,u,O,P,b,c,t,o,D){"use strict";var d={};d.isArray=t.isArray;d.isPlainObject=t.isPlainObject;d.isDefined=t.isDefined;d.clone=c;d.getMember=o.getMember;d.updateProperties=o.updateProperties;d.getNestedObjectProperty=o.getNestedObjectProperty;
d.removeDuplicatedActions=function(a){if(jQuery.isArray(a)){var f=a.reduce(function(r,i){if(r.indexOf(i)<0){r.push(i);}return r;},[]);return f;}return a;};
d.storeSapSystemData=function(s,S){var k,l,a,f=[s.id];if(arguments.length>1){f.unshift(S);}try{a=JSON.stringify(s);}catch(e){jQuery.sap.log.error("Cannot stringify and store expanded system data: "+e);}if(a){l=d.getLocalStorage();k=d.generateLocalStorageKey("sap-system-data",f);l.setItem(k,a);}};
d.getLocalSystemInSidFormat=function(){var s=sap.ushell.Container.getLogonSystem(),S=s.getName(),a=s.getClient();return"sid("+S+"."+a+")";};
d.matchesLocalSid=function(s){return d.getLocalSystemInSidFormat().toLowerCase()===s.toLowerCase();};
d.storeSapSystemToLocalStorage=function(a){var p=(a||{}).params;if(!p||!p.hasOwnProperty("sap-system")){return;}if(d.isPlainObject(p["sap-system"])){var s=p["sap-system"],S=p["sap-system-src"];if(typeof S==="string"){d.storeSapSystemData(s,S);p["sap-system-src"]=S;}else{d.storeSapSystemData(s);}p["sap-system"]=s.id;}else if(d.matchesLocalSid(p["sap-system"])){delete p["sap-system"];}};
d.setPerformanceMark=function(m,C){if(performance&&performance.mark){if(!C){C={};}if(C.bUseUniqueMark){if(C.bUseLastMark){performance.clearMarks(m);}else if(performance.getEntriesByName(m,"mark").length!=0){return;}}performance.mark(m);}};
d.setPerformanceMeasure=function(m,s,e){if(performance&&performance.measure&&s&&e){performance.measure(m,s,e);}};
d.addTime=function(i,I,e){if(!window["sap-ushell-startTime"]){window["sap-ushell-startTime"]=Date.now();}var s=window["sap-ushell-startTime"];e=e||Date.now();if(e<s){e=s+1;}jQuery.sap.measure.add("sap.ushell.fromStart."+i,I,s,e,e-s,e-s);};
d.Error=function(m,C){this.name="sap.ushell.utils.Error";this.message=m;jQuery.sap.log.error(m,null,C);};
d.Error.prototype=new Error();
d.localStorageSetItem=function(k,v,l){var E;try{localStorage.setItem(k,v);if(l){E=document.createEvent("StorageEvent");E.initStorageEvent("storage",false,false,k,"",v,"",localStorage);dispatchEvent(E);}}catch(e){jQuery.sap.log.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.utils");}};
d.getLocalStorage=function(){return window.localStorage;};
d.getLocalStorageItem=function(k){return window.localStorage.getItem(k);};
d.generateUniqueId=function(T){var s,e,i;if(jQuery.isArray(T)){e=T;i=function(g){return e.indexOf(g)===-1;};}else{i=T;}do{s=d._getUid();}while(!i(s));return s;};
d._getUid=function(){return u();};
d.reload=function(){location.reload();};
d.calculateOrigin=function(a){var e;if(a.origin){return a.origin;}if(a.protocol&&a.hostname){return a.protocol+"//"+a.hostname+(a.port?":"+a.port:"");}if(a.href){e=new b(a.href);return e.protocol()+"://"+e.hostname()+(e.port()?":"+e.port():"");}};
d.getPrivateEpcm=function(){if(window.external&&window.external&&typeof window.external.getPrivateEpcm!=="undefined"){return window.external.getPrivateEpcm();}return undefined;};
d.hasNativeNavigationCapability=function(){return d.isFeatureBitEnabled(1);};
d.hasNativeLogoutCapability=function(){return d.isFeatureBitEnabled(2);};
d.hasNavigationModeCapability=function(){return d.isFeatureBitEnabled(4);};
d.hasFLPReadyNotificationCapability=function(){return d.isFeatureBitEnabled(8);};
d.isFeatureBitEnabled=function(f){var F="0",p;p=d.getPrivateEpcm();if(p){try{F=p.getNwbcFeatureBits();jQuery.sap.log.debug("Detected epcm getNwbcFeatureBits returned feature bits: "+F);}catch(e){jQuery.sap.log.error("failed to get feature bit vector via call getNwbcFeatureBits on private epcm object",e.stack,"sap.ushell.utils");}}return(parseInt(F,16)&f)>0;};
d.isApplicationTypeEmbeddedInIframe=function(a){return a==="NWBC"||a==="TR"||a==="WCF";};
d.appendUserIdToUrl=function(p,s){var a=sap.ushell.Container.getService("UserInfo").getUser().getId(),S=s.indexOf("?")>=0?"&":"?";return s+S+p+"="+a;};
d.appendSapShellParam=function(s,a){var e=a==="TR"?"":"-NWBC",v=d.getUi5Version();if(v){s+=s.indexOf("?")>=0?"&":"?";s+="sap-shell="+encodeURIComponent("FLP"+v+e);}return s;};
d.getUi5Version=function(){var v,m;try{v=sap.ui.getVersionInfo().version;}catch(e){jQuery.sap.log.error("sap ui version could not be determined, using sap.ui.version (core version) as fallback "+e);v=window.sap&&sap.ui&&sap.ui.version;}m=/\d+\.\d+\.\d+/.exec(v);if(m&&m[0]){v=m[0];}else{v=undefined;}return v;};
d.isNativeWebGuiNavigation=function(r){var a=O.get("applicationType",r);var n=O.get("appCapabilities.nativeNWBCNavigation",r);if(this.hasNativeNavigationCapability()&&(a==="TR"||n)){return true;}return false;};
d.Map=function(){this.entries={};};
d.Map.prototype.put=function(k,v){var a=this.get(k);this.entries[k]=v;return a;};
d.Map.prototype.containsKey=function(k){if(typeof k!=="string"){throw new d.Error("Not a string key: "+k,"sap.ushell.utils.Map");}return Object.prototype.hasOwnProperty.call(this.entries,k);};
d.Map.prototype.get=function(k){if(this.containsKey(k)){return this.entries[k];}};
d.Map.prototype.keys=function(){return Object.keys(this.entries);};
d.Map.prototype.remove=function(k){delete this.entries[k];};
d.Map.prototype.toString=function(){var r=["sap.ushell.utils.Map("];r.push(JSON.stringify(this.entries));r.push(")");return r.join("");};
d.getParameterValueBoolean=function(p,s){var a=U.fromURL(s||window.location.href),A=a.mParams&&a.mParams[p],T=["true","x"],f=["false",""],v;if(!A||A.length===0){return undefined;}v=A[0].toLowerCase();if(T.indexOf(v)>=0){return true;}if(f.indexOf(v)>=0){return false;}return undefined;};
d.call=function(s,f,a){var m;if(a){setTimeout(function(){d.call(s,f,false);},0);return;}try{s();}catch(e){m=e.message||e.toString();jQuery.sap.log.error("Call to success handler failed: "+m,e.stack,"sap.ushell.utils");if(f){f(m);}}};
d.handleTilesVisibility=function(){d.getVisibleTiles();};
d.refreshTiles=function(){sap.ui.getCore().getEventBus().publish("launchpad","refreshTiles");};
d.setTilesNoVisibility=function(){sap.ui.getCore().getEventBus().publish("launchpad","setTilesNoVisibility");};
d.getBasicHash=function(h){if(!d.validHash(h)){jQuery.sap.log.debug("Utils ; getBasicHash ; Got invalid hash");return false;}var a=sap.ushell.Container.getService("URLParsing"),s=a.parseShellHash(h);return s?s.semanticObject+"-"+s.action:h;};
d.validHash=function(h){return(h&&h.constructor===String&&jQuery.trim(h)!=="");};
d.handleTilesOpacity=function(m){var T,a,e,C=P.get("sapUshellTileBackgroundColor"),r=this.hexToRgb(C),j,f,R,g,s,h,i,p,k,l,n,q=sap.ushell.Container.getService("UserRecents");if(r){R="rgba("+r.r+","+r.g+","+r.b+",{0})";e=q.getAppsUsage();e.done(function(v){T=v.usageMap;j=jQuery(".sapUshellTile").not(".sapUshellTileFooter");var w=m.getProperty("/groups");m.setProperty("/animationRendered",true);for(n=0;n<j.length;n++){g=jQuery(j[n]);s=this.getBasicHash(g.find(".sapUshellTileBase").attr("data-targeturl"));if(s){f=this.convertToRealOpacity(T[s],v.maxUsage);h=R.replace("{0}",f);a=sap.ui.getCore().byId(g.attr("id"));i=a.getBindingContext();p=i.sPath.split("/");k=p[2];l=p[4];w[k].tiles[l].rgba=h;}}m.setProperty("/groups",w);}.bind(this));}};
d.convertToRealOpacity=function(a,m){var e=[1,0.95,0.9,0.85,0.8],i=Math.floor(m/e.length),f;if(!a){return e[0];}if(!m){return e[e.length-1];}f=Math.floor((m-a)/i);return f<e.length?e[f]:e[e.length-1];};
d.getCurrentHiddenGroupIds=function(m){var l=sap.ushell.Container.getService("LaunchPage"),g=m.getProperty("/groups"),h=[],G,a,e;for(a=0;a<g.length;a++){e=g[a]?g[a].isGroupVisible:true;if(g[a].object){G=l.getGroupId(g[a].object);}if(!e&&G!==undefined){h.push(G);}}return h;};
d.hexToRgb=function(h){var i=!h||h[0]!="#"||(h.length!=4&&h.length!=7),r;h=!i&&h.length===4?"#"+h[1]+h[1]+h[2]+h[2]+h[3]+h[3]:h;r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null;};
d.getFormFactor=function(){var s=sap.ui.Device.system;if(s.desktop){return s.SYSTEMTYPE.DESKTOP;}if(s.tablet){return s.SYSTEMTYPE.TABLET;}if(s.phone){return s.SYSTEMTYPE.PHONE;}};
d.getVisibleTiles=function(){var n=document.body.clientHeight,C=sap.ui.getCore().byId("dashboardGroups"),N=sap.ui.getCore().byId("viewPortContainer"),g,a,e,f,h,i,T,j,k,l,m,s=jQuery("#shell-hdr").height(),p=[],G,I,v=[],E=sap.ui.getCore().getEventBus(),q,r,w,x;if(window.document.hidden){E.publish("launchpad","onHiddenTab");}if(C&&C.getGroups()&&N){G=jQuery(C.getDomRef());I=G?G.is(":visible"):false;q=C.getGroups();for(g=0;g<q.length;g=g+1){f=q[g];h=f.getTiles();i=f.getLinks();r=[h,i];for(e=0;e<r.length;e++){w=r[e];if(w){for(a=0;a<w.length;a++){T=w[a];if(!I||window.document.hidden){p.push(T);}else{j=jQuery(T.getDomRef());k=j.offset();if(k){l=j.offset().top;m=l+j.height();x=f.getVisible()&&(m>s-300)&&(l<n+300);if(x){v.push({oTile:d.getTileModel(T),iGroup:g,bIsExtanded:!(m>s)||!(l<n)});}else if(v.length>0){E.publish("launchpad","visibleTilesChanged",v);return p;}p.push(T);}}}}}}}if(v.length>0){E.publish("launchpad","visibleTilesChanged",v);}return p;};
d.getTileModel=function(a){var e=a.getBindingContext();return e.getObject()?e.getObject():null;};
d.getTileObject=function(a){var e=a.getBindingContext();return e.getObject()?e.getObject().object:null;};
d.recalculateBottomSpace=function(){var j=jQuery("#dashboardGroups").find(".sapUshellTileContainer:visible"),l=j.last(),h=jQuery(".sapUshellShellHead > div").height(),a=l.parent().height(),g=parseInt(l.find(".sapUshellContainerTitle").css("margin-top"),10),e=parseInt(jQuery(".sapUshellDashboardGroupsContainer").css("padding-bottom"),10),n;if(j.length===1){n=0;}else{n=jQuery(window).height()-h-a-g-e;n=(n<0)?0:n;}jQuery(".sapUshellDashboardGroupsContainer").css("margin-bottom",n+"px");};
d.calcVisibilityModes=function(g,p){var i=true,I=true,l=g.pendingLinks&&g.pendingLinks.length?g.pendingLinks:g.links,h=d.groupHasVisibleTiles(g.tiles,l);if(!h&&(!p||(g.isGroupLocked)||(g.isDefaultGroup)||D.system.phone)){i=false;}if(!h&&!p){I=false;}return[i,I];};
d.groupHasVisibleTiles=function(g,a){var v=false,e,f,h=!g?[]:g,l=!a?[]:a;h=h.concat(l);if(!h.length){return false;}for(e=0;e<h.length;e=e+1){f=h[e];if(f.isTileIntentSupported){v=true;break;}}return v;};
d.invokeUnfoldingArrayArguments=function(f,A){var e=this,g,h,p,r,i;if(!jQuery.isArray(A[0])){return f.apply(this,A);}g=A[0];if(g.length===0){return new jQuery.Deferred().resolve([]).promise();}h=new jQuery.Deferred();p=[];r=[];i=new jQuery.Deferred().resolve();g.forEach(function(n,I){if(!jQuery.isArray(n)){jQuery.sap.log.error("Expected Array as nTh Argument of multivalue invokation: first Argument must be array of array of arguments: single valued f(p1,p2), f(p1_2,p2_2), f(p1_3,p2_3) : multivalued : f([[p1,p2],[p1_2,p2_2],[p1_3,p2_3]]");throw new Error("Expected Array as nTh Argument of multivalue invokation: first Argument must be array of array of arguments: single valued f(p1,p2), f(p1_2,p2_2), f(p1_3,p2_3) : multivalued : f([[p1,p2],[p1_2,p2_2],[p1_3,p2_3]]");}var j=f.apply(e,n),k=new jQuery.Deferred();j.done(function(){var a=Array.prototype.slice.call(arguments);r[I]=a;k.resolve();}).fail(k.reject.bind(k));p.push(k.promise());i=jQuery.when(i,k);});jQuery.when.apply(jQuery,p).done(function(){h.resolve(r);}).fail(function(){h.reject("failure");});return h.promise();};
d.isClientSideNavTargetResolutionEnabled=function(){var a=true,l;if(jQuery.sap.storage===undefined){l=window.localStorage.getItem("targetresolution-client");l=!(l===false||l==="false"||l==="");}else{l=jQuery.sap.storage(jQuery.sap.getObject("jQuery.sap.storage.Type.local"),"targetresolution").get("client");}if(l===""||l===false||d.getParameterValueBoolean("sap-ushell-nav-cs")===false){return false;}return a;};
d._getCurrentDate=function(){return new Date();};
d._convertToUTC=function(a){return Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds());};
d.formatDate=function(C){var i,n,T,a,h,m;i=d._convertToUTC(new Date(C));n=d._convertToUTC(d._getCurrentDate());T=n-i;a=parseInt(T/(1000*60*60*24),10);if(a>0){if(a===1){return sap.ushell.resources.i18n.getText("time_day",a);}return sap.ushell.resources.i18n.getText("time_days",a);}h=parseInt(T/(1000*60*60),10);if(h>0){if(h===1){return sap.ushell.resources.i18n.getText("time_hour",h);}return sap.ushell.resources.i18n.getText("time_hours",h);}m=parseInt(T/(1000*60),10);if(m>0){if(m===1){return sap.ushell.resources.i18n.getText("time_minute",m);}return sap.ushell.resources.i18n.getText("time_minutes",m);}return sap.ushell.resources.i18n.getText("just_now");};
d.toExternalWithParameters=function(s,a,p){var C=sap.ushell.Container.getService("CrossApplicationNavigation"),T={},e={},i,f,g;T.target={semanticObject:s,action:a};if(p&&p.length>0){e={};for(i=0;i<p.length;i++){f=p[i].Key;g=p[i].Value;e[f]=g;}T.params=e;}C.toExternal(T);};
d.moveElementInsideOfArray=function(a,n,e){if(!d.isArray(a)||n===undefined||e===undefined){throw"Incorrect input parameters passed";}if(n>=a.length||e>=a.length||e<0||n<0){throw"Index out of bounds";}var E=a.splice(n,1)[0];a.splice(e,0,E);return a;};
d.shallowMergeObject=function(T){return Array.prototype.slice.call(arguments,1,arguments.length).map(function(s){return{sourceObject:s,properties:Object.keys(s)};}).reduce(function(r,s){s.properties.forEach(function(p){r[p]=s.sourceObject[p];});return r;},T);};
d.getLocationHref=function(){return window.location.href;};
d.generateLocalStorageKey=function(p,i){var n=i.length;if(n===0){throw new Error("At least one id should be provided when generating the local storage key");}var s="$";if(n===2){s="#";}else if(n>2){s="@"+n+"@";}return p+s+i.join(":");};
d.urlParametersToString=function(p,e,f){var g,a,k,i,l,s="";e=e||"&";f=f||"=";g="";a=null;l=[];for(a in p){if(p.hasOwnProperty(a)){l.push(a);}}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(jQuery.isArray(p[a])){for(i=0;i<p[a].length;i=i+1){s+=g+encodeURIComponent(a)+f+encodeURIComponent(p[a][i]);g=e;}}else{s+=g+encodeURIComponent(a)+f+encodeURIComponent(p[a]);g=e;}}return s;};
return d;},true);
sap.ui.predefine('sap/ushell/utils/HttpClient',["sap/ushell/utils/_HttpClient/internals","sap/ushell/utils/_HttpClient/factory"],function(i,f){"use strict";return f.bind(null,i.getHttpRequestWrapper,i.executeRequest);},true);
sap.ui.predefine('sap/ushell/utils/RestrictedJSONModel',["sap/ui/model/json/JSONModel"],function(J){"use strict";
function n(){throw new Error("sap.ushell.utils.RestrictedJSONModel : Function not supported");}
return J.extend("sap.ushell.utils.RestrictedJSONModel",{constructor:function(){J.prototype.constructor.apply(this,arguments);this.setDefaultBindingMode("OneWay");this.setDefaultBindingMode=n;this.setData=n;this.setJSON=n;this.setProperty=n;this.loadData=n;},_setData:function(){J.prototype.setData.apply(this,arguments);},_setJSON:function(){this.setData=J.prototype.setData;J.prototype.setJSON.apply(this,arguments);this.setData=n;},_setProperty:function(){this.setData=J.prototype.setData;J.prototype.setProperty.apply(this,arguments);this.setData=n;}});});
sap.ui.predefine('sap/ushell/utils/XHttpClient',["sap/ushell/utils/_HttpClient/internals","sap/ushell/utils/_HttpClient/factory"],function(i,f){"use strict";return f.bind(null,i.getHttpRequestWrapper,i.executeRequestWithCsrfToken.bind(null,i.executeRequest,i.csrfTokenWriteToCache,i.csrfTokenGet,i.csrfTokenFetch,i.csrfTokenAddToRequestHeader,i.csrfTokenExtractFromResponseHeader,i.isSafeHttpMethod));},true);
sap.ui.predefine('sap/ushell/utils/_HttpClient/factory',[],function(){"use strict";return function HttpClient(g,r,b,c){if(!/String/.test(Object.prototype.toString.call(b))){throw"IllegalArgumentError: `sBaseUrl` should be a string";}return Object.create(null,{post:{value:g("POST",r,b,c)},get:{value:g("GET",r,b,c)},put:{value:g("PUT",r,b,c)},delete:{value:g("DELETE",r,b,c)},options:{value:g("OPTIONS",r,b,c)}});};});
sap.ui.predefine('sap/ushell/utils/_HttpClient/internals',["sap/base/Log","sap/ui/thirdparty/jquery"],function(L,q){"use strict";var c={token:null},C=n.bind(null,c),f=l.bind(null,c),a=m.bind(null,c),e=g.bind(null,XMLHttpRequest),b=r.bind(null,e,u);return Object.create(null,{_executeRequest:{value:g},executeRequest:{value:e},executeRequestWithCsrfToken:{value:d},isSafeHttpMethod:{value:j},isValidHttpMethod:{value:k},summariseResponse:{value:s},processResponse:{value:p},getHttpRequestWrapper:{value:h},containsCSRFTokenHeaderEntry:{value:i},csrfTokenReadFromCache:{value:f},csrfTokenWriteToCache:{value:a},csrfTokenIsCached:{value:C},_csrfTokenFetch:{value:r},csrfTokenFetch:{value:b},_csrfTokenGet:{value:o},csrfTokenGet:{value:o.bind(null,C,f,a,b)},csrfTokenAddToRequestHeader:{value:t},csrfTokenExtractFromResponseHeader:{value:u}});
function d(E,v,w,x,y,z,I,R,U,A){function B(F){return(F&&(F.status===403)&&(z(F).toLowerCase()==="required"));}var D;if(!/Function/.test(Object.prototype.toString.call(E))||!/Function/.test(Object.prototype.toString.call(v))||!/Function/.test(Object.prototype.toString.call(x))||!/Function/.test(Object.prototype.toString.call(w))||!/Function/.test(Object.prototype.toString.call(y))||!/Function/.test(Object.prototype.toString.call(z))||!/Function/.test(Object.prototype.toString.call(I))){throw new Error("DependencyInjectionError: one or more of the injected dependencies is invalid");}if(!/String/.test(Object.prototype.toString.call(R))||!/String/.test(Object.prototype.toString.call(U))){throw new Error("IllegalArgumentError: one or more of the arguments is invalid");}if(!A){A={};}return new Promise(function(F,G){function H(J){L.error(J,null,"sap.ushell.util.HttpClient");G(J);}if(!I(R)){w(U).then(function(J){D=y(J,A);return E(R,U,D);}).then(function(J){F(J);}).catch(function(J){if(B(J)){x(U).then(function(K){D=y(K,A);return E(R,U,D);}).then(function(K){F(K);}).catch(H);}else{H(J);}});}else{D=y("fetch",A);E(R,U,D).then(function(J){var K=z(J);if(K){v(K);}F(J);}).catch(H);}});}
function g(F,R,U,v){var H,w,x;if(!/Function/.test(Object.prototype.toString.call(F))){throw new Error("DependencyInjectionError: one or more of the injected dependencies is invalid");}if(!/String/.test(Object.prototype.toString.call(R))||!/String/.test(Object.prototype.toString.call(U))){throw new Error("IllegalArgumentException: one or more of the arguments is invalid");}x=new F();if(/[a-z]/.test(R)){R=R.toUpperCase();}if(v){H=!v.headers?[]:Object.keys(v.headers).map(function(y){return{name:y,value:this[y]};},v.headers);w=v.data;}else{H=[];}return new Promise(function(y,z){["load","error"].forEach(function(E){x.addEventListener(E,p.bind(null,x,y,z));});x.open(R,U);H.forEach(function(A){x.setRequestHeader(A.name,A.value);});x.send(JSON.stringify(w));});}
function h(M,H,B,v){if(!/String/.test(Object.prototype.toString.call(M))||!/Function/.test(Object.prototype.toString.call(H))||!/String/.test(Object.prototype.toString.call(B))){throw new Error("IllegalArgumentError: one or more of the arguments is invalid");}return function(P,S){return H(M,B.replace(/\/$/,"")+"/"+P.replace(/^\//,""),q.extend({},v,S));};}
function p(x,O,E){var R;if(!x||!/Number/.test(Object.prototype.toString.call(x.status))||!/Function/.test(Object.prototype.toString.call(x.getAllResponseHeaders))){throw new Error("IllegalArgumentError: invalid XMLHttpRequest instance");}R=s(x);if(x.status<200||x.status>299){E(R);}else{O(R);}}
function s(x){return{status:x.status,statusText:x.statusText,responseText:x.responseText,responseHeaders:x.getAllResponseHeaders().split(/\r\n/g).filter(function(I){return I.length>0;}).map(function(H){var P=H.split(":");return{name:P[0].trim(),value:P[1].trim()};})};}
function i(H){var v=H["x-csrf-token"]||H["X-CSRF-TOKEN"];return!!v&&/String/.test(Object.prototype.toString.call(v));}
function j(H){switch(H){case"HEAD":case"GET":case"OPTIONS":return true;case"POST":case"PUT":case"DELETE":return false;default:throw new Error("IllegalArgumentError: '"+H+"' is not a supported request method");}}
function k(H){switch(H){case"HEAD":case"GET":case"OPTIONS":case"POST":case"PUT":case"DELETE":return true;default:throw new Error("IllegalArgumentError: '"+H+"' is not a supported request method");}}
function l(v){return v.token;}
function m(v,N){v.token=N;}
function n(v){return!!v.token;}
function o(v,w,x,y,U){if(!/Function/.test(Object.prototype.toString.call(v))||!/Function/.test(Object.prototype.toString.call(w))||!/Function/.test(Object.prototype.toString.call(x))||!/Function/.test(Object.prototype.toString.call(y))){throw new Error("DependencyInjectionError: one or more of the injected dependencies is invalid");}if(!/String/.test(Object.prototype.toString.call(U))){throw new Error("IllegalArgumentError: one or more of the arguments is invalid");}return new Promise(function(z,A){if(v()){z(w());}else{y(U).then(function(B){x(B);z(B);}).catch(function(E){A(E);});}});}
function r(E,v,U){if(!/Function/.test(Object.prototype.toString.call(E))||!/Function/.test(Object.prototype.toString.call(v))){throw new Error("DependencyInjectionError: one or more of the injected dependencies is invalid");}if(!/String/.test(Object.prototype.toString.call(U))){throw new Error("IllegalArgumentError: one or more of the arguments is invalid");}return E("OPTIONS",U,{headers:{"x-csrf-token":"fetch"}}).then(function(R){return v(R);});}
function t(H,v){var E,O={"x-csrf-token":H};if(!/String/.test(Object.prototype.toString.call(H))||!/object Object/.test(Object.prototype.toString.call(v))){throw new Error("IllegalArgumentError: one or more of the arguments is invalid");}E=q.extend(true,{},v);if(!E.headers){E.headers=O;}else{q.extend(E.headers,O);}return E;}
function u(R){var v;if(!/Array/.test(Object.prototype.toString.call(R.responseHeaders))){return undefined;}v=R.responseHeaders.filter(function(H){return H.name==="x-csrf-token";})[0];return v&&v.value?v.value:undefined;}
});
sap.ui.predefine('sap/ushell/utils/clone',["sap/ushell/utils/type"],function(t){"use strict";
function c(d){function a(o){return t.isPlainObject(o)?{}:[];}function b(v){if(v instanceof Promise){return false;}return t.isPlainObject(v)||t.isArray(v);}function g(v){if(t.isPlainObject(v)){return Object.keys(v).map(function(k){return{key:k,value:v[k]};});}var j=v.length;var I=[];for(var i=0;i<j;i++){I.push({value:v[i]});}return I;}function e(i,v){var A=t.isPlainObject(v)?function(i,v){v[i.key]=i.value;}:function(i,v){v.push(i.value);};A(i,v);}function s(i,j,q){j.push(i.length);Array.prototype.push.apply(q,i);}if(!b(d)){return d;}var C=a(d);var f=[C];var r=[];var R=[];var V=new WeakMap();V.set(d,C);s(g(d),R,r);while(f.length>0){var T=f.shift();var h=R.shift();r.splice(0,h).forEach(function(i){var p=i.value;if(!b(p)){e(i,T);return;}var o=p;var A=V.get(o);if(A){e({key:i.key,value:A},T);return;}var v=a(o);V.set(o,v);e({key:i.key,value:v},T);f.push(v);s(g(o),R,r);});}return C;}
return c;},false);
sap.ui.predefine('sap/ushell/utils/objectOperations',[],function(){"use strict";var o={};
o.getMember=function(O,a){var p=a.split("."),n=O;if(!O){return undefined;}p.forEach(function(s){if(typeof n!=="object"){return undefined;}n=n[s.replace(/[|]/g,".")];});return n;};
o.updateProperties=function(t,s){Object.keys(t).forEach(function(p){if(s.hasOwnProperty(p)){t[p]=s[p];}});};
o.getNestedObjectProperty=function(O,a,d){var M="Missing or invalid parameter";if(!O||!jQuery.isArray(O)||O.length==0||!a){throw new Error(M);}if(jQuery.isArray(a)&&a.length!=O.length){throw new Error(M);}var A=a;if(!jQuery.isArray(a)){A=Array.apply(null,Array(O.length)).map(function(){return a;});}var n=O.reduce(function(m,b,i){if(m!==undefined){return m;}return this.getMember(b,A[i]);}.bind(this),undefined);return(n!=undefined)?n:d;};
return o;},false);
sap.ui.predefine('sap/ushell/utils/type',[],function(){"use strict";
function i(v){return Object.prototype.toString.apply(v)==="[object Array]";}
function a(v){return Object.prototype.toString.apply(v)==="[object Object]";}
function b(v){return typeof v!=="undefined";}
return{isArray:i,isPlainObject:a,isDefined:b};},false);
sap.ui.predefine('sap/ushell/utils/utilsCdm',["sap/ushell/utils","sap/ushell/utils/objectOperations","sap/ushell/utils/clone","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath"],function(u,o,c,q,L,O){"use strict";
function g(d,A){return o.getMember(d,A);}
function m(k,s,A){s=c(s);A=c(A);var i={};i.semanticObject=s.semanticObject;i.action=s.action;i.title=s.title||g(A,"sap|app.title");i.info=s.info||g(A,"sap|app.info");i.icon=s.icon||g(A,"sap|ui.icons.icon");i.subTitle=s.subTitle||g(A,"sap|app.subTitle");i.shortTitle=s.shortTitle||g(A,"sap|app.shortTitle");var T,d,e,h,D,j,I=false;var S=g(A,"sap|platform|runtime");i.resolutionResult=q.extend(true,{},S);if(S){i.resolutionResult["sap.platform.runtime"]=q.extend(true,{},S);}if(g(A,"sap|ui.technology")==="GUI"){i.resolutionResult["sap.gui"]=g(A,"sap|gui");}if(g(A,"sap|ui.technology")==="WDA"){i.resolutionResult["sap.wda"]=g(A,"sap|wda");}if(g(A,"sap|ui.technology")==="URL"){if(A["sap.url"]){i.resolutionResult["sap.platform.runtime"]=i.resolutionResult["sap.platform.runtime"]||{};i.resolutionResult.url=A["sap.url"].uri;i.resolutionResult["sap.platform.runtime"].url=A["sap.url"].uri;}else if(S&&S.uri){i.resolutionResult["sap.platform.runtime"].url=S.uri;i.resolutionResult.url=S.uri;}}if(!i.resolutionResult["sap.ui"]){i.resolutionResult["sap.ui"]={};}i.resolutionResult["sap.ui"].technology=g(A,"sap|ui.technology");i.resolutionResult.applicationType=this._formatApplicationType(i.resolutionResult,A);i.resolutionResult.systemAlias=i.resolutionResult.systemAlias||s.systemAlias;i.resolutionResult.systemAliasSemantics="apply";i.resolutionResult.text=i.title;i.deviceTypes=g(A,"sap|ui.deviceTypes")||{};i.resolutionResult.appId=g(A,"sap|app.id");["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(s.deviceTypes||{},M)){i.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(i.deviceTypes,M)){i.deviceTypes[M]=true;}i.deviceTypes[M]=!!i.deviceTypes[M];});i.signature=s.signature||{};i.signature.parameters=i.signature.parameters||{};i.signature.additionalParameters=(s.signature||{}).additionalParameters||"allowed";var l=s.indicatorDataSource||g(A,"sap|app.crossNavigation.inbounds."+k+".indicatorDataSource");var n=l?"#Shell-dynamicTile":"#Shell-staticTile";if(g(A,"sap|app.type")==="tile"||g(A,"sap|flp.type")==="tile"){n=i.resolutionResult;n.url=g(A,"sap|platform|runtime.componentProperties.url");n.componentName=g(A,"sap|ui5.componentName");if(g(A,"sap|platform|runtime.includeManifest")){n.componentProperties=n.componentProperties||{};n.componentProperties.manifest=q.extend(true,{},A);delete n.componentProperties.manifest["sap.platform.runtime"];}h=g(A,"sap|app.crossNavigation.outbounds.target");I=true;}if(g(A,"sap|app.type")==="plugin"||g(A,"sap|flp.type")==="plugin"){return undefined;}if(g(A,"sap|flp.tileSize")){T=g(A,"sap|flp.tileSize");}if(g(A,"sap|app.description")){d=g(A,"sap|app.description");}if(g(A,"sap|ui.technology")==="GUI"&&g(A,"sap|gui.transaction")){e=g(A,"sap|gui.transaction");}if(g(A,"sap|ui.technology")==="WDA"&&g(A,"sap|wda.applicationId")){e=g(A,"sap|wda.applicationId");}if(g(A,"sap|app.dataSources")){D=g(A,"sap|app.dataSources");}if(g(A,"sap|app.id")){j=g(A,"sap|app.id");}i.tileResolutionResult={appId:j,title:i.title,subTitle:i.subTitle,icon:i.icon,size:T,info:i.info,tileComponentLoadInfo:n,indicatorDataSource:l,dataSources:D,description:d,runtimeInformation:S,technicalInformation:e,deviceTypes:i.deviceTypes};i.tileResolutionResult.isCustomTile=I;if(h){i.tileResolutionResult.targetOutbound=h;}return i;}
function f(r,A){var s=r.applicationType;if(s){return s;}var C=g(A,"sap|platform|runtime.componentProperties.self.name")||g(A,"sap|ui5.componentName");if(g(A,"sap|flp.appType")==="UI5"||g(A,"sap|ui.technology")==="UI5"){r.applicationType="SAPUI5";r.additionalInformation="SAPUI5.Component="+C;r.url=g(A,"sap|platform|runtime.componentProperties.url");r.applicationDependencies=g(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(g(A,"sap|ui.technology")==="GUI"){r.applicationType="TR";r["sap.gui"]=g(A,"sap|gui");r.systemAlias=g(A,"sap|app.destination.name");return"TR";}if(g(A,"sap|ui.technology")==="WDA"){r.applicationType="WDA";r["sap.wda"]=g(A,"sap|wda");r.systemAlias=g(A,"sap|app.destination.name");return"WDA";}if(g(A,"sap|ui.technology")==="URL"){r.applicationType="URL";r.systemAlias=g(A,"sap|app.destination.name");}return"URL";}
function a(s){var d=this;if(!s){return[];}var i=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var h=s.applications[A];var j=g(h,"sap|app.crossNavigation.inbounds");if(j){var l=Object.keys(j).sort();l.forEach(function(I){var k=j[I];var r=d.mapOne(I,k,h);if(r){i.push(r);}});}}catch(E){L.error("Error in application "+A+": "+E,E.stack);}});}catch(e){L.error(e);L.error(e.stack);return[];}return i;}
function t(i){var s,p,C;s={target:{semanticObject:i.semanticObject,action:i.action},params:{}};p=O.get("signature.parameters",i)||{};Object.keys(p).forEach(function(k){if(p[k].filter&&Object.prototype.hasOwnProperty.call(p[k].filter,"value")&&(p[k].filter.format===undefined||p[k].filter.format==="plain")){s.params[k]=[p[k].filter.value];}if(p[k].launcherValue&&Object.prototype.hasOwnProperty.call(p[k].launcherValue,"value")&&(p[k].launcherValue.format===undefined||p[k].launcherValue.format==="plain")){s.params[k]=[p[k].launcherValue.value];}});C=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!C){return undefined;}return C;}
function b(d){var s,p,C;s={target:{semanticObject:d.semanticObject,action:d.action},params:{}};p=d.parameters||{};Object.keys(p).forEach(function(k){if(p.hasOwnProperty(k)&&typeof p[k].value==="object"){s.params[k]=[p[k].value.value];}});C=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!C){return undefined;}return C;}
return{formatSite:a,toHashFromInbound:t,toHashFromOutbound:b,mapOne:m,_formatApplicationType:f};},true);
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.xhrlogon',[],function(){"use strict";var m={};var b={};
/*!
 * SAP XHR Library v2.1.0
 * (c) Copyright 2013-2019 SAP SE or an SAP affiliate company.
*/
(function(f){if(typeof b==="object"&&typeof m!=="undefined"){m.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.xhrlib=f()}})(function(){var d,m,b;return(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(r,m,b){"use strict";var C;function a(x,c,u,e,f,p){this.filters=[];this.xhr=x;this.method=c;this.url=u;this.async=!!e;if(f!==undefined){this.username=f;}if(p!==undefined){this.password=p;}}m.exports=a;C=a.prototype;C._process=function(c){var f,e,i,n;f=this.filters;n=f.length;for(i=0;i<n;++i){e=f[i];if(typeof e[c]==="function"){e[c](this);}}};C.aborting=function(){this._process("aborting");};C.aborted=function(){this._process("aborted");};C.opening=function(){this._process("opening");};C.opened=function(){this._process("opened");};C.sending=function(){this._process("sending");};C.sent=function(){this._process("sent");};C.reopening=function(){this._process("reopening");};C["catch"]=function(e){var f,i,n;f=this.filters;n=f.length;for(i=0;i<n;++i){if(typeof f[i]["catch"]==="function"){try{f[i]["catch"](e,this);e=null;break;}catch(c){e=c;}}}if(e){throw e;}};},{}],2:[function(r,m,b){"use strict";var C;var a=r("./Channel.js");var I=r("./IgnoreList.js");function c(){this._filterFactories=[];this.ignore=new I();}m.exports=c;C=c.prototype;function e(x){var t;t=typeof x;return(t==="function")||((t==="object")&&(x!==null)&&(typeof x.addFilter==="function"));}function f(x,g){if(typeof x==="function"){x(g);}else{x.addFilter(g);}}C.reset=function(){this._filterFactories=[];this.ignore=new I();};C.addFilterFactory=function(g){var h,j,i,n;if(!e(g)){throw new TypeError("addFilterFactory expects a FilterFactory or a function parameter");}j=this._filterFactories;h=true;n=j.length;for(i=0;i<n;++i){if(j[i]===g){h=false;break;}}if(h){this._filterFactories.push(g);}};C.removeFilterFactory=function(g){var h,i,n;h=this._filterFactories;n=h.length;for(i=0;i<n;++i){if(h[i]===g){h.splice(i,1);break;}}};C.getFilterFactories=function(){return this._filterFactories.slice();};C.create=function(x,g,u,h,j,p){var k,l,i,n;k=new a(x,g,u,h,j,p);if(!this.ignore.ignored(u)){l=this._filterFactories;n=l.length;for(i=0;i<n;++i){f(l[i],k);}}return k;};},{"./Channel.js":1,"./IgnoreList.js":7}],3:[function(r,m,b){"use strict";var u=r("./util.js");var C,o;var L={error:10,warn:20,info:30,debug:40};if(window.console&&typeof window.console.log==="function"){o={error:console.error?console.error:console.log,warn:console.warn?console.warn:console.log,info:console.log,debug:console.log};}else{o={};o.error=o.warn=o.info=o.debug=function(){};}function a(n,l){this.name=n;this.setLevel(l);}m.exports=a;C=a.prototype;C.format=function(c,s){return u.time()+" "+this.name+" ["+s.toUpperCase()+"] "+c;};C.setLevel=function(l){if(l){l=(typeof l==="number"?~~l:L[l]);}this.level=l||L.warn;};C.error=function(c){if(this.level>=L.error){o.error(this.format(c,"error"));}};C.warning=function(c){if(this.level>=L.warn){o.warn(this.format(c,"warn"));}};C.info=function(c){if(this.level>=L.info){o.info(this.format(c,"info"));}};C.debug=function(c){if(this.level>=L.debug){o.debug(this.format(c,"debug"));}};},{"./util.js":20}],4:[function(r,m,b){"use strict";var e=r("./events.js");var E=r("./EventHandlers.js");var D;var A="authenticationrequired";function a(){this.prefix="xhrlibFrame"+Date.now().toString(36);this.handlers=new E([A]);}m.exports=a;D=a.prototype;a.frameCounter=0;D.addEventListener=function(t,c){this.handlers.add(t,c);};D.removeEventListener=function(t,c){this.handlers.remove(t,c);};D.dispatchAuthenticationRequired=function(){var s=this,c=e.createEvent(A);setTimeout(function(){s.handlers.dispatch(c);},0);};D.create=function(){var f,o,s=this;this.destroy();if(this.handlers.hasSubscribers(A)){this.dispatchAuthenticationRequired();return null;}a.frameCounter+=1;f=this.prefix+a.frameCounter;this.frame=document.createElement("iframe");this.frame.id=f;this.frame.style.display="none";if(document.readyState==="complete"){document.body.appendChild(this.frame);}else{o=function(){if(document.readyState==="complete"){document.body.appendChild(s.frame);e.removeEventListener(document,"readystatechange",o);}};e.addEventListener(document,"readystatechange",o);}return this.frame;};D.destroy=function(){if(this.frame){document.body.removeChild(this.frame);this.frame=null;}};D.show=function(f){var c=this.frame;if(!f&&this.handlers.hasSubscribers(A)){this.dispatchAuthenticationRequired();}else if(c){c.style.display="block";c.style.position="absolute";c.style.top=0;c.style.left=0;c.style.width="100%";c.style.height="100%";c.style.zIndex=99999;c.style.border=0;c.style.background="white";setTimeout(function(){try{c.contentWindow.focus();}catch(g){void g;}},100);}};},{"./EventHandlers.js":5,"./events.js":16}],5:[function(r,m,b){"use strict";var E;var a=r("./Log.js").logger;function c(e){var i,n;n=e.length;for(i=0;i<n;++i){this["_"+e[i]]=[];}this.subscriptions={};this.bufferedEvents=[];}m.exports=c;function f(x){return x&&(typeof x==="function"||typeof x.handleEvent==="function");}function g(x,e,l){try{if(typeof x==="function"){return x.call(e.currentTarget,e);}else{return x.handleEvent(e);}}catch(h){if(l){l.warning("Exception in "+e.type+" event handler: "+h.message+"\n"+h.stack);}throw h;}}c.isHandler=f;c.fireEvent=g;E=c.prototype;E.add=function(t,e){var j,h,i,n;if(!f(e)){throw new TypeError("Invalid event handler");}h=this["_"+t];if(h){j=true;n=h.length;for(i=0;i<n;++i){if(h[i]===e){j=false;break;}}if(j){h.push(e);}}return j;};E.remove=function(t,e){var h,i,n,j=false;if(f(e)){h=this["_"+t];if(h){n=h.length;for(i=0;i<n;++i){if(h[i]===e){j=true;if(n===1){this["_"+t]=[];}else{h.splice(i,1);}break;}}}}return j;};E.dispatch=function(e){var i,n,t=e.type,h=this["_"+t];if(!h||!h.length){return;}if(this.suspend){this.bufferedEvents.push(e);}else{h=h.slice();n=h.length;for(i=0;i<n;++i){g(h[i],e,a);}}};E.clearEvents=function(){this.bufferedEvents=[];};E.releaseEvents=function(){var k,n,e;e=this.bufferedEvents;n=e.length;if(n>0){this.clearEvents();for(k=0;k<n;++k){this.dispatch(e[k]);}}};E.hasSubscribers=function(t){var h=this["_"+t];return(h&&h.length>0);};E.subscribed=function(t){return(this.subscriptions[t]?true:false);};E.subscribe=function(t){this.subscriptions[t]=true;};E.unsubscribe=function(t){delete this.subscriptions[t];};},{"./Log.js":8}],6:[function(r,m,b){"use strict";var D=r("./DefaultLogonFrameProvider.js");var L=r("./LogonManager.js");var X=r("./XHRLogonManager.js");var x=r("./Log.js").logger;var U=r("./UrlObject.js");var a=r("./UrlTimeout.js");var f,F;function c(){x.debug("Creating FrameLogonManager");this._lfp=new D();this._timeout=new a(c.defaultTimeout);}m.exports=c;F=c.prototype;c.defaultTimeout=600;c.getInstance=function(n){if(!f&&!n){f=new c();}return f;};c.start=function(){c.getInstance().start();};c.shutdown=function(){if(f){f.shutdown();f=null;}};Object.defineProperties(F,{logonFrameProvider:{get:function(){return this._lfp;},set:function(l){if(l){this._lfp=l;}else{this._lfp=new D();}}}});F.start=function(){var l=L.getInstance();l.addEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.addEventListener(L.LogonEvent.LOGON_FAILED,this);l.registerAuthHandler(X.logonScheme(X.Scheme.IFRAME),this);};F.shutdown=function(){var l=L.getInstance();this.cancelLogon();l.removeEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.removeEventListener(L.LogonEvent.LOGON_FAILED,this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.IFRAME),this);};F.getTimeout=function(u){return this._timeout.getTimeout(u);};F.setTimeout=function(u,v){this._timeout.setTimeout(u,v);};F.getFrameLoadHandler=function(p,e,t){var l,g;t=t||this.defaultTimeout;l=function(){if(g){clearTimeout(g);}g=setTimeout(function(){p.show();},t);};return l;};F.onLogon=function(e){var u,p,g,t;this.onLogonEnd();x.debug("Processing iframe logon for realm "+e.realm);t=this.getTimeout(e.channel.url);u=new U(e.channel.url);u.setParameter("xhr-logon","iframe");p=this.logonFrameProvider;g=p.create();if(g){if(!g.onload){g.onload=this.getFrameLoadHandler(p,g.id,t);}g.xhrTimeout=t;g.src=u.href;}this.pending={provider:p,realm:e.realm};};F.onLogonEnd=function(e){if(this.pending&&(!arguments.length||e===this.pending.realm)){this.pending.provider.destroy();this.pending=undefined;}};F.cancelLogon=function(){if(this.pending){x.debug("Cancelling logon for realm "+this.pending.realm);L.getInstance().abortLogon(this.pending.realm);this.onLogonEnd(this.pending.realm);}};F.handleEvent=function(e){var g;switch(e.type){case L.LogonEvent.LOGON:g=e.request;if(g){this.onLogon(g);return true;}break;case L.LogonEvent.LOGON_COMPLETE:this.onLogonEnd(e.response.realm);break;case L.LogonEvent.LOGON_FAILED:this.onLogonEnd(e.response.realm);break;}return false;};},{"./DefaultLogonFrameProvider.js":4,"./Log.js":8,"./LogonManager.js":9,"./UrlObject.js":11,"./UrlTimeout.js":12,"./XHRLogonManager.js":15}],7:[function(r,m,b){"use strict";var I;function a(){this.clear();}m.exports=a;I=a.prototype;I.add=function(c){switch(typeof c){case"string":this.p.push(c);break;case"object":if(c instanceof RegExp){this.r.push(c);}else{throw new TypeError("Unsupported ignore rule type");}break;case"function":this.f.push(c);break;default:throw new TypeError("Unsupported ignore rule type");}this.empty=false;};I.ignored=function(i){var c=false;if(!this.empty){c=this._prefix(i)||this._regexp(i)||this._function(i);}return c;};I.clear=function(){this.empty=true;this.p=[];this.r=[];this.f=[];};I._prefix=function(i){var f,k,n,c;if(!i){return false;}c=false;f=this.p;n=f.length;for(k=0;k<n;++k){if(i.startsWith(f[k])){c=true;break;}}return c;};I._regexp=function(i){var f,k,n,c;c=false;f=this.r;n=f.length;for(k=0;k<n;++k){if(f[k].test(i)){c=true;break;}}return c;};I._function=function(i){var f,k,n,c;c=false;f=this.f;n=f.length;for(k=0;k<n;++k){try{if(f[k](i)){c=true;break;}}catch(e){}}return c;};},{}],8:[function(r,m,b){"use strict";var C=r("./ConsoleLogger.js");var a,c,l=["error","warning","info","debug"];c=new C("sap.xhrlib");function L(e){this.logger=e;}m.exports=L;function h(x,e){var i,n=e.length;for(i=0;i<n;++i){if(typeof x[e[i]]!=="function"){return false;}}return true;}function f(x){return(x&&(typeof x==="object")&&h(x,l));}Object.defineProperty(L,"logger",{get:function(){return a;},set:function(x){if(!x){a.logger=c;}else if(f(x)){a.logger=x;}}});l.forEach(function(g){L.prototype[g]=function(i){try{return this.logger[g](i);}catch(e){}};});L.setLevel=function(e){if(typeof a.logger.setLevel==="function"){a.logger.setLevel(e);}};a=new L(c);},{"./ConsoleLogger.js":3}],9:[function(r,m,b){"use strict";r("./xhr.js");var c=r("./events.js").createEvent;var E=r("./EventHandlers.js");var x=r("./Log.js").logger;var L,S,l,a;S={UNAUTHENTICATED:0,PENDING:1,AUTHENTICATED:2};L={LOGON:"logon",LOGON_COMPLETE:"logoncomplete",LOGON_FAILED:"logonfailed",LOGON_ABORTED:"logonaborted"};function e(){x.info("Creating Logon Manager");this.queue=[];this.realms={};this.authHandlers={};this._schemes=[];this.handlers=new E([L.LOGON,L.LOGON_ABORTED,L.LOGON_COMPLETE,L.LOGON_FAILED]);}m.exports=e;e.getInstance=function(n){if(!l&&!n){l=new e();}return l;};e.shutdown=function(){if(l){l.shutdown();l=undefined;}};e.LogonEvent=L;e.Status=S;a=e.prototype;Object.defineProperties(a,{schemes:{get:function(){return this._schemes.slice();}}});a._collectSchemes=function(){var s,f=[],g=this.authHandlers;for(s in g){if(g.hasOwnProperty(s)){f.push(s);}}this._schemes=f.sort();};a.addEventListener=function(t,h){this.handlers.add(t,h);};a.removeEventListener=function(t,h){this.handlers.remove(t,h);};a.registerAuthHandler=function(s,h){var i,n,f=this.authHandlers[s],g=true;if(!E.isHandler(h)){throw new TypeError("Invalid authentication handler");}if(f){for(i=0,n=f.length;i<n;++i){if(f[i]===h){g=false;break;}}if(g){f.push(h);}}else{f=[h];this.authHandlers[s]=f;this._collectSchemes();}return g;};a.unregisterAuthHandler=function(s,h){var i,n,f=this.authHandlers[s],g=false;if(!E.isHandler(h)){return false;}if(f){for(i=0,n=f.length;i<n;++i){if(f[i]===h){g=true;if(n===1){delete this.authHandlers[s];this._collectSchemes();}else{f.splice(i,1);}break;}}}return g;};a.unregisterAllHandlers=function(s){if(s){delete this.authHandlers[s];}else{this.authHandlers={};}this._collectSchemes();};a.getAuthHandlers=function(s){var h=this.authHandlers[s];var f=this.authHandlers["*"];if(h){return f?h.concat(f):h.slice();}return f||[];};a.isSchemeHandled=function(s){return this.getAuthHandlers(s).length>0;};a.dispatchEvent=function(f){this.handlers.dispatch(f);};a.createLogonEvent=function(f){var g=c(L.LOGON);g.request=f;return g;};a.dispatchLogonEvent=function(f){var g=this.createLogonEvent(f);this.dispatchEvent(g);};a.dispatchLogonCompletedEvent=function(f){var g=c(L.LOGON_COMPLETE);g.response=f;this.dispatchEvent(g);};a.dispatchLogonFailedEvent=function(f){var g=c(L.LOGON_FAILED);g.response=f;this.dispatchEvent(g);};a.dispatchLogonAbortedEvent=function(f){var g=c(L.LOGON_ABORTED);g.realm=f;this.dispatchEvent(g);};a.dispatchLogonRequest=function(f){var i,n,h=false,g=this.createLogonEvent(f),j=this.getAuthHandlers(f.scheme);if(j){for(i=0,n=j.length;i<n;++i){h=E.fireEvent(j[i],g,x);if(h){break;}}}return h;};a.getAuthenticationStatus=function(n){return this.realms[n]||S.UNAUTHENTICATED;};a.isQueued=function(f){var i,n,g;if(this.pending&&this.pending.channel&&this.pending.channel.xhr===f){return true;}for(i=0,n=this.queue.length;i<n;++i){g=this.queue[i];if(g.channel&&g.channel.xhr===f){return true;}}return false;};a.requestLogon=function(f){var h,g;if(!f||!f.channel||!f.scheme){x.warning("Ignoring invalid Logon request");return;}if(this.isQueued(f.channel.xhr)){x.debug("Ignoring authentication request for already queued request "+f.channel.url);return;}x.info("Authentication requested for "+f.channel.url+" with scheme "+f.scheme);this.dispatchLogonEvent(f);if(this.isSchemeHandled(f.scheme)){g=f.realm;if(typeof g!=="string"){g=""+g;}if(this.pending){x.debug("Pending authentication process, queueing request");if(this.getAuthenticationStatus(g)===S.AUTHENTICATED){this.realms[g]=S.UNAUTHENTICATED;}this.queue.push(f);h=true;}else{x.debug("Dispatching authentication request");this.realms[g]=S.PENDING;this.pending=f;h=this.dispatchLogonRequest(f);}}else{x.info("No authentication handler registered for scheme "+f.scheme);}if(!h){x.warning("Unsupported authentication request for scheme "+f.scheme);if(this.pending===f){this.pending=undefined;}this.abort([f]);if(this.queue.length>0){this.requestLogon(this.queue.shift());}}};a.logonCompleted=function(f){var g,s,q,p,w,i,n,h;g=f.realm;q=this.queue;p=[];w=[];s=f.success;this.realms[g]=(s?S.AUTHENTICATED:S.UNAUTHENTICATED);if(this.pending&&(g===this.pending.realm)){p.push(this.pending);this.pending=undefined;}n=q.length;for(i=0;i<n;++i){h=q[i];if(h.realm===g){p.push(h);}else{w.push(h);}}this.queue=w;if(p.length>0){if(s){x.info("Authentication succeeded for realm "+g+", repeating requests.");this.retry(p);}else{x.warning("Authentication failed for realm "+g);this.abort(p);}}if(s){this.dispatchLogonCompletedEvent(f);}else{this.dispatchLogonFailedEvent(f);}if(!this.pending&&this.queue.length>0){this.requestLogon(this.queue.shift());}};a.abortLogon=function(f){var q,p,w,i,n,g;if(!f&&this.pending){f=this.pending.realm;}if(f){q=this.queue;p=[];w=[];this.realms[f]=S.UNAUTHENTICATED;if(this.pending){if(f===this.pending.realm){p.push(this.pending);}else{q.push(this.pending);}}this.pending=undefined;n=q.length;for(i=0;i<n;++i){g=q[i];if(g.realm===f){p.push(g);}else{w.push(g);}}this.queue=w;if(p.length>0){x.warning("Authentication aborted for realm "+f);this.abort(p);}this.dispatchLogonAbortedEvent(f);}else{x.info("No pending authentication, ignoring abort");}if(this.queue.length>0){this.requestLogon(this.queue.shift());}};a.retry=function(q){var i,n,f,g;n=q.length;for(i=0;i<n;++i){try{f=q[i].channel;if(f.async){g=f.xhr;g.repeat();}}catch(h){x.warning("Error while repeating request: "+h.message);throw h;}}};a.abort=function(q){var i,n,f,g;n=q.length;for(i=0;i<n;++i){try{f=q[i].channel;if(f.async){g=f.xhr;g.resumeEvents(true);}}catch(h){x.warning("Error while aborting request: "+h.message);throw h;}}};a.abortAll=function(){var f;f=this.queue;this.queue=[];if(this.pending){f.push(this.pending);this.pending=undefined;}this.abort(f);};a.shutdown=function(){x.info("Logon Manager shutdown");this.abortAll();};},{"./EventHandlers.js":5,"./Log.js":8,"./events.js":16,"./xhr.js":21}],10:[function(r,m,b){"use strict";var O;function a(){}m.exports=a;O=a.prototype;function c(){var h,t;h=document.createElement("div");h.style.fontSize="1.25rem";h.style.textAlign="center";h.style.marginBottom="16px";h.style.color="#003283";t=document.createTextNode("Authentication required");h.appendChild(t);return h;}function e(o,g){var h,l,i,j,k;h=document.createElement("div");h.style.width="256px";h.style.margin="0 auto";l=document.createElement("button");setTimeout(function(){l.focus();},300);l.onclick=function(){o();};l.style.width="120px";l.style.height="32px";l.style.color="#ffffff";l.style.backgroundColor="#5496cd";l.style.border="1px solid #367db8";l.style.borderRadius="4px";l.style.testShadow="0 1px #000000";l.style.outline="none";l.onblur=function(){l._focus=false;l.style.testShadow="0 1px #000000";l.style.backgroundColor="#5496cd";l.style.borderColor="#367db8";};l.onfocus=function(){l._focus=true;l.style.testShadow="none";l.style.backgroundColor="#427cac";l.style.borderColor="#427cac";};l.onmouseover=function(){if(!l._focus){l.style.backgroundColor="#367db8";l.style.borderColor="#367db8";}};l.onmouseout=function(){if(!l._focus){l.style.backgroundColor="#5496cd";l.style.borderColor="#367db8";}};i=document.createTextNode("To sign in");l.appendChild(i);j=document.createElement("button");j.type="button";j.onclick=function(){g();};j.style.marginLeft="16px";j.style.width="120px";j.style.height="32px";j.style.color="#346187";j.style.backgroundColor="#f7f7f7";j.style.border="1px solid #ababab";j.style.borderRadius="4px";j.style.outline="none";j.onblur=function(){j._focus=false;j.style.backgroundColor="#f7f7f7";j.style.borderColor="#ababab";};j.onfocus=function(){j._focus=true;j.style.backgroundColor="#bfbfbf";j.style.borderColor="#ababab";};j.onmouseover=function(){if(!j._focus){j.style.backgroundColor="rgba(191, 191, 191, 0.5)";j.style.borderColor="rgba(191, 191, 191, 0.5)";}};j.onmouseout=function(){if(!j._focus){j.style.backgroundColor="#f7f7f7";j.style.borderColor="#ababab";}};k=document.createTextNode("Cancel");j.appendChild(k);h.appendChild(l);h.appendChild(j);return h;}function f(o,g){var h=document.createElement("div");h.style.width="288px";h.style.margin="0 auto";h.style.padding="8px";h.style.backgroundColor="#daeef8";h.style.border="1px solid #00abfc";h.style.borderRadius="4px";h.style.fontSize="1rem";h.appendChild(c());h.appendChild(e(o,g));return h;}O.createAlertDialog=function(o,g){var h=document.createElement("div");h.style.position="absolute";h.style.top="0";h.style.left="0";h.style.height="100%";h.style.width="100%";h.style.margin="0";h.style.padding="16px 0";h.style.zIndex="99999";h.appendChild(f(o,g));return h;};O.show=function(o,g){if(!o){throw new TypeError("Missing mandatory onOpen option");}this.close();this.alertDialog=this.createAlertDialog(o,g);document.body.appendChild(this.alertDialog);};O.close=function(){if(this.alertDialog){this.alertDialog.parentNode.removeChild(this.alertDialog);this.alertDialog=null;}};},{}],11:[function(r,m,b){"use strict";var U,a,c,e,f,g=window.location;if(typeof window.URL==="function"){c=function(u){return new URL(u,window.location.href);};}else{c=function(u){if(!a){a=document.createElement("a");}a.href=u;return a;};}function h(i){if(i==="/"){return"/";}var p=i.lastIndexOf("/");return p===-1?"/":i.substring(0,p+1);}e=h(g.pathname);function j(l){var s=l.split("/"),o=e,i,n,p;for(i=0,n=s.length;i<n;++i){p=s[i];switch(p){case".":break;case"..":if(o!=="/"){o=o[o.length-1]==="/"?h(o.substring(0,o.length-1)):h(o);}break;default:o=o[o.length-1]==="/"?o+p:o+"/"+p;break;}}return o;}function k(u){this._parse(u);}m.exports=k;k.getHost=function(u){var i=u.hostname,p=u.port;switch(u.protocol){case"http:":if(p&&p!=="80"){i+=":"+p;}break;case"https:":if(p&&p!=="443"){i+=":"+p;}break;default:break;}return i;};U=k.prototype;U._parse=function(u){u=String(u)||g.href;var p=c(u),i;this.protocol=p.protocol||g.protocol;if(p.hostname){this.hostname=p.hostname;this.port=p.port;}else{i=u[0]!=="/";this.hostname=g.hostname;this.port=g.port;}if(this.protocol==="http:"&&this.port==="80"){this.port="";}else if(this.protocol==="https:"&&this.port==="443"){this.port="";}if(i){this.pathname=j(p.pathname);}else{this.pathname=p.pathname[0]==="/"?p.pathname:"/"+p.pathname;}this.hash=p.hash;this.parameters=k.parseSearch(p.search);};k.parseSearch=function(s){var p,i,l;l={};if(s){p=/[?&]([^&=]+)=?([^&]*)/g;i=p.exec(s);while(i){l[i[1]]=i[2];i=p.exec(s);}}return l;};U.getParameter=function(n){var v=this.parameters[n];return(v===undefined||v===null)?v:decodeURIComponent(v);};U.removeParameter=function(n){delete this.parameters[n];};U.setParameter=function(n,v){this.parameters[n]=encodeURIComponent(v);};Object.defineProperties(U,{crossOrigin:{get:function(){return(this.origin!==f);}},host:{get:function(){return k.getHost(this);}},href:{get:function(){return this.protocol+"//"+this.host+this.pathname+this.search+this.hash;},set:function(u){this._parse(u);}},origin:{get:function(){return this.protocol+"//"+this.host;}},search:{get:function(){var s,p,n,v;s="";p=this.parameters;for(n in p){if(p.hasOwnProperty(n)){v=p[n];if(s.length>0){s+="&";}s+=n;if(v){s+="=";s+=v;}}}return(s.length>0)?("?"+s):s;}}});f=window.location.protocol+"//"+k.getHost(window.location);},{}],12:[function(r,m,b){"use strict";var l=r("./util.js").lowerBound;var x=r("./Log.js").logger;var U;function a(c){this.defaultTimeout=c||600;this.timeout={};this.idxTimeout=[];}m.exports=a;U=a.prototype;U.indexTimeouts=function(){var k,i=[],t=this.timeout;for(k in t){if(t.hasOwnProperty(k)){i.push(k);}}this.idxTimeout=i.sort();};U.getTimeout=function(c){var u,i=l(c,this.idxTimeout);if(i>=0){u=this.idxTimeout[i];if(c.substring(0,u.length)===u){return this.timeout[u];}}return this.defaultTimeout;};U.setTimeout=function(u,v){if(!u){return;}if(typeof u!=="string"){u=""+u;}if(v){x.info("Setting timeout "+v+" on "+u);this.timeout[u]=v;}else{x.info("Reset timeout to default on "+u);delete this.timeout[u];}this.indexTimeouts();};},{"./Log.js":8,"./util.js":20}],13:[function(r,m,b){"use strict";var e=r("./events.js");var L=r("./LogonManager.js");var X=r("./XHRLogonManager.js");var D=r("./DefaultLogonFrameProvider.js");var O=r("./OpenWindowAlert.js");var x=r("./Log.js").logger;var U=r("./UrlObject.js");var a=r("./UrlTimeout.js");var w,W;function c(){x.debug("Creating WindowLogonManager");this.alertDialog=new O();this.frameProvider=new D();this.timeout=new a(c.defaultTimeout);this.pollingInterval=5000;}m.exports=c;W=c.prototype;c.defaultTimeout=600;c.getInstance=function(n){if(!w&&!n){w=new c();}return w;};c.start=function(){c.getInstance().start();};c.shutdown=function(){if(w){w.shutdown();w=null;}};W.start=function(){var l=L.getInstance();l.addEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.addEventListener(L.LogonEvent.LOGON_FAILED,this);l.registerAuthHandler(X.logonScheme(X.Scheme.STRICT_WINDOW),this);l.registerAuthHandler(X.logonScheme(X.Scheme.WINDOW),this);};W.shutdown=function(){var l=L.getInstance();this.cancelLogon();l.removeEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.removeEventListener(L.LogonEvent.LOGON_FAILED,this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.IFRAME),this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.STRICT_WINDOW),this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.WINDOW),this);};W.getTimeout=function(u){return this.timeout.getTimeout(u);};W.setTimeout=function(u,v){this.timeout.setTimeout(u,v);};W.handleLegacyIFrame=function(){var s=X.logonScheme(X.Scheme.IFRAME),l=L.getInstance();l.unregisterAllHandlers(s);l.registerAuthHandler(s,this);};W.onLogon=function(f){var h=true;this.onLogonEnd();x.debug("Processing "+f.scheme+" logon for realm "+f.realm);switch(X.xhrScheme(f.scheme)){case X.Scheme.WINDOW:this.onWindowLogon(f);break;case X.Scheme.STRICT_WINDOW:this.onStrictWindowLogon(f);break;case X.Scheme.IFRAME:this.onWindowLogon(f,true);break;default:h=false;x.warning("WindowLogonManager unsupported request scheme "+f.scheme);break;}return h;};W.onWindowLogon=function(f,l){var u,g,t,h,s=this;if(l){x.debug("Processing iframe logon as window logon for realm "+f.realm);}else{x.debug("Processing window logon for realm "+f.realm);}t=this.getTimeout(f.channel.url);u=new U(f.channel.url);u.setParameter("xhr-logon",l?"iframe":"window");g=this.frameProvider.create();g.onload=function(){if(h){clearTimeout(h);}h=setTimeout(function(){s.createWindow(l);},t);};g.xhrTimeout=t;g.src=u.href;this.pending={realm:f.realm,frame:g.id,url:u.href};};W.onStrictWindowLogon=function(f){var u=new U(f.channel.url);u.setParameter("xhr-logon","strict-window");x.debug("Processing strict-window logon for realm "+f.realm);this.pending={realm:f.realm,url:u.href};this.createWindow();};W.createWindow=function(p){var f,s=this;if(!this.pending){return;}f=window.open(this.pending.url,"_blank");if(!f||f.closed){x.warning("Failed to open logon window, alerting user");this.alertDialog.show(function(){s.createWindow(p);},function(){s.cancelLogon();});return;}this.window=f;try{f.opener=window;}catch(g){void g;}this.windowMonitorId=setInterval(function(){if(!s.window||s.window.closed){s.cancelLogon();}},300);if(p){s.pollIntervalId=setInterval(function(){s.poll();},s.pollingInterval);}e.addEventListener(f,"load",function(){x.info("Logon window opened");if(s.closed){return;}if(p){setTimeout(function(){s.poll();},300);}s.windowIntervalId=setInterval(function(){try{if(p&&typeof s.window.notifyParent==="function"){s.poll();}}catch(g){x.warning("Logon polling failed: "+g.message);}},300);});e.addEventListener(f,"close",function(){s.cancelLogon();});setTimeout(function(){try{if(s.window){s.window.focus();}}catch(g){x.warning("Failed to switch focus to logon window");}},300);};W.poll=function(){var f;if(this.pending){f=this.frameProvider.create();this.pending.frame=f.id;f.src=this.pending.url;}};W.stopPolling=function(){if(this.windowMonitorId){clearInterval(this.windowMonitorId);this.windowMonitorId=undefined;}if(this.windowIntervalId){clearInterval(this.windowIntervalId);this.windowIntervalId=undefined;}if(this.pollIntervalId){clearInterval(this.pollIntervalId);this.pollIntervalId=undefined;}};W.onLogonEnd=function(f){if(this.pending&&(!arguments.length||f===this.pending.realm)){this.stopPolling();this.frameProvider.destroy();this.alertDialog.close();if(this.window){this.window.close();this.window=undefined;}this.pending=undefined;}};W.cancelLogon=function(){if(this.pending){x.debug("Cancelling logon for realm "+this.pending.realm);L.getInstance().abortLogon(this.pending.realm);this.onLogonEnd(this.pending.realm);}};W.handleEvent=function(f){var g;switch(f.type){case L.LogonEvent.LOGON:g=f.request;if(g){return this.onLogon(g);}break;case L.LogonEvent.LOGON_COMPLETE:this.onLogonEnd(f.response.realm);break;case L.LogonEvent.LOGON_FAILED:this.onLogonEnd(f.response.realm);break;}return false;};},{"./DefaultLogonFrameProvider.js":4,"./Log.js":8,"./LogonManager.js":9,"./OpenWindowAlert.js":10,"./UrlObject.js":11,"./UrlTimeout.js":12,"./XHRLogonManager.js":15,"./events.js":16}],14:[function(r,m,b){"use strict";var h=r("./httpUtil.js");var U=r("./UrlObject.js");var X,u,H=2,D=4;function a(c,e){this.manager=c;this.channel=e;this.ignore=(this.manager.ignore&&this.manager.ignore.ignored(e.url));if(!this.ignore){e.xhr._addEventListener("readystatechange",this);}}m.exports=a;X=a.prototype;a.parseHeader=function(c){var i,p=h.parseHeader(c);if(p.accept){p.accept=p.accept.split(",");for(i=0;i<p.accept.length;++i){p.accept[i]=p.accept[i].trim();}}return p;};X.sending=function(c){var x,e,f=new U(c.url);if(f.crossOrigin&&!c.xhr.withCredentials){this.ignore=true;}if(this.ignore){return;}x=c.xhr;e=this.manager.accept().join(",");if(x.getRequestHeader("X-XHR-Logon")===undefined){x.setRequestHeader("X-XHR-Logon","accept="+JSON.stringify(e));}if(x.getRequestHeader("X-Requested-With")===undefined){x.setRequestHeader("X-Requested-With","XMLHttpRequest");}};X.handleEvent=function(e){var c,x,f,g,s,j,k,i;c=this.channel;x=c.xhr;if(x.readyState<H){return;}if(x.readyState===H){if(u===undefined){try{s=x.status;u=!!s;}catch(l){u=false;}if(!s){return;}}else if(!u){return;}}if(x.status===403){f=x.getResponseHeader("x-xhr-logon");if(f){if(c.async){x.suspendEvents();}if(c.async||this.manager.triggerLogonOnSyncRequest){g=a.parseHeader(f);k=g.accept;if(k){for(i=0;i<k.length;++i){if(k[i]==="repeat"){k.splice(i,1);j=true;break;}}}if(x.readyState===D){if(j&&!c.repeated){c.repeated=true;k=this.manager.accept(k);x.setRepeatHeader("X-XHR-Logon","accept=\""+k.join(",")+"\"");x.repeat();}else{this.manager.requestLogon(c,e,g);}}}}}};},{"./UrlObject.js":11,"./httpUtil.js":17}],15:[function(r,m,b){"use strict";var _=r("./xhr.js");var I=r("./IgnoreList.js");var x=r("./Log.js").logger;var X=r("./XHRLogonFilter.js");var L=r("./LogonManager.js");var e=r("./events.js");var a="xhrlogon.";var c=/^\s*\{\s*"xhrLogon"\s*:/;var f,g;function h(){x.info("Creating XHR Logon Manager");}m.exports=h;g=h.prototype;h.getInstance=function(n){if(!f&&!n){f=new h();}return f;};h.start=function(){h.getInstance().start();};h.shutdown=function(){if(f){f.shutdown();f=undefined;}};h.logonScheme=function(i){return a+i;};h.xhrScheme=function(s){return s.startsWith(a)?s.substring(a.length):"none";};g.triggerLogonOnSyncRequest=true;h.Scheme={NONE:"none",REPEAT:"repeat",IFRAME:"iframe",WINDOW:"window",STRICT_WINDOW:"strict-window"};h.defaultAccept=[h.Scheme.REPEAT,h.Scheme.IFRAME,h.Scheme.WINDOW,h.Scheme.STRICT_WINDOW];g.start=function(){if(!this.started){x.info("XHR Logon Manager startup");this.ignore=new I();this._initializeTrustedOrigins();this._registerFilterFactory();this.acceptOrder=h.defaultAccept.slice();e.addEventListener(window,"message",this.getEventHandler());this.started=true;}};g.shutdown=function(){if(this.started){x.info("XHR Logon Manager shutdown");e.removeEventListener(window,"message",this.getEventHandler());this._unregisterFilterFactory();this.started=false;}};function j(s){return(s>=200&&s<300)||(s===304);}function k(){var i,n,s,o=[],p=L.getInstance().schemes;for(i=0,n=p.length;i<n;++i){s=p[i];if(s.startsWith(a)){o.push(s.substring(a.length));}}o.push(h.Scheme.REPEAT);return o;}g.accept=function(s){var i,n,o,p=[],q=L.getInstance();s=s||k();if(s.length){for(i=0,n=s.length;i<n;++i){o=s[i];if(q.isSchemeHandled(h.logonScheme(o))){p.push(o);}}}if(!p.length){p.push(h.Scheme.NONE);}return p;};g.acceptScheme=function(s){if(!s||!s.length){return h.Scheme.NONE;}var i,n,o,p=h.Scheme.NONE,q={},t=L.getInstance();for(i=0,n=s.length;i<n;++i){q[s[i]]=true;}for(i=0,n=this.acceptOrder.length;i<n;++i){o=this.acceptOrder[i];if(t.isSchemeHandled(h.logonScheme(o))&&q[o]){p=o;break;}}return p;};var N="SAP NetWeaver Application Server [";function l(i){if(!i){return"";}if(i.startsWith(N)){return i.substring(0,N.length+3)+"]";}return i;}g.requestLogon=function(i,n,o){var s=this.acceptScheme(o.accept);L.getInstance().requestLogon({channel:i,realm:l(o.realm),scheme:h.logonScheme(s),event:n});};g.registerAuthHandler=function(s,i){s=h.logonScheme(s);return L.getInstance().registerAuthHandler(s,i);};g.unregisterAuthHandler=function(s,i){s=h.logonScheme(s);return L.getInstance().unregisterAuthHandler(s,i);};g.handleEvent=function(i){var n,o;n=i.data;if(c.test(n)){try{if(this.isTrusted(i.origin)){o=JSON.parse(n);if(typeof o.xhrLogon!=="object"){x.warning("Invalid xhrLogon message: "+n);}else{o.xhrLogon.realm=l(o.xhrLogon.realm);o.xhrLogon.success=j(o.xhrLogon.status);L.getInstance().logonCompleted(o.xhrLogon);}}else{x.warning("Received xhrlogon message from untrusted origin "+i.origin);}}catch(p){x.warning("Invalid xhrLogon message: "+n);}}};g._initializeTrustedOrigins=function(){var i,p,o;o={};i=window.location;p=i.protocol;o[p+"//"+i.host]=true;switch(p){case"http:":if(i.port===""){o["http://"+i.hostname+":80"]=true;}else if(i.port==="80"){o["http://"+i.hostname]=true;}break;case"https:":if(i.port===""){o["https://"+i.hostname+":443"]=true;}else if(i.port==="443"){o["https://"+i.hostname]=true;}break;default:break;}this._trustedOrigins=o;};g.isTrusted=function(o){return(!!this._trustedOrigins[o]);};g.addTrustedOrigin=function(o){this._trustedOrigins[o]=true;};g.getEventHandler=function(){var i,s;i=this._eventHandler;if(!i){s=this;i=function(n){s.handleEvent(n);};this._eventHandler=i;}return i;};g._getFilterFactory=function(){var i,s;i=this._filterFactory;if(!i){s=this;i=function(n){n.filters.push(new X(s,n));};this._filterFactory=i;}return i;};g._registerFilterFactory=function(){if(_.channelFactory){_.channelFactory.addFilterFactory(this._getFilterFactory());}};g._unregisterFilterFactory=function(){if(_.channelFactory){_.channelFactory.removeFilterFactory(this._getFilterFactory());delete this._filterFactory;}};},{"./IgnoreList.js":7,"./Log.js":8,"./LogonManager.js":9,"./XHRLogonFilter.js":14,"./events.js":16,"./xhr.js":21}],16:[function(r,m,b){"use strict";var u;function c(t,g,h){var i;i=document.createEvent("Event");i.initEvent(t,g,h);return i;}function a(t,g,h){var i,j;if(u){i=c(t,g,h);}else{try{if(g||h){j={bubbles:g,cancelable:h};}i=new Event(t,j);}catch(k){u=true;i=c(t,g,h);}}return i;}function e(t,g,l,h){if(t.addEventListener){t.addEventListener(g,l,h);}else if(t.attachEvent){t.attachEvent("on"+g,l);}}function f(t,g,l,h){if(t.removeEventListener){t.removeEventListener(g,l,h);}else if(t.detachEvent){t.detachEvent("on"+g,l);}}m.exports={createEvent:a,addEventListener:e,removeEventListener:f};},{}],17:[function(r,m,b){"use strict";var h=/(?:,|^)\s*(?:,\s*)*(\w+)\s*=\s*(?:"((?:[^"\\]|\\.)*)"|(\w*))/g;function p(a){var c={},e,t,v;if(a===undefined){return c;}if(typeof a!=="string"){throw new TypeError("Invalid header value");}e=h.exec(a);while(e!==null){t=e[1];v=e[2]===undefined?e[3]:e[2];c[t]=v?v.replace(/\\(.)/g,"$1"):"";e=h.exec(a);}return c;}m.exports={parseHeader:p};},{}],18:[function(r,m,b){"use strict";r("./polyfill.js");r("./xhr.js");var L=r("./LogonManager.js");var F=r("./FrameLogonManager.js");var W=r("./WindowLogonManager.js");var X=r("./XHRLogonManager.js");function s(o){o=o||{};L.getInstance();X.start();F.start();W.start();if(o.iframeAsWindow){W.getInstance().handleLegacyIFrame();}}function a(){X.shutdown();F.shutdown();W.shutdown();W.shutdown();}m.exports={start:s,shutdown:a,FrameLogonManager:F,LogonManager:L,URL:r("./UrlObject.js"),WindowLogonManager:W,XHRLogonManager:X};},{"./FrameLogonManager.js":6,"./LogonManager.js":9,"./UrlObject.js":11,"./WindowLogonManager.js":13,"./XHRLogonManager.js":15,"./polyfill.js":19,"./xhr.js":21}],19:[function(r,m,b){"use strict";var t;if(!String.prototype.startsWith){String.prototype.startsWith=function(s,p){p=p||0;return(this.substr(p,s.length)===s);};}if(!String.prototype.trim){t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(t,"");};}if(!Date.now){Date.now=function(){return new Date().getTime();};}},{}],20:[function(r,m,b){"use strict";var p=["","0","00","000","0000"];function l(x,a){var i,v,s=0,e=a.length-1;if(e<0||x<a[0]){return-1;}if(x>=a[e]){return e;}--e;while(s<e){i=(s+e+1)>>1;v=a[i];if(x<v){e=i-1;}else{s=i;}}return s;}function c(n,a){var o=""+n;if(o.length<a){o=p[a-o.length]+o;}return o;}function t(){var n=new Date();var o=c(n.getHours(),2)+":"+c(n.getMinutes(),2)+":";o+=c(n.getSeconds(),2)+"."+c(n.getMilliseconds(),3);return o;}m.exports={lowerBound:l,pad:c,time:t};},{}],21:[function(r,m,b){"use strict";function x(){var L=r("./Log.js");var C=r("./ChannelFactory.js");var E=r("./EventHandlers.js");var p,a,_,X,u=0,c=L.logger;p=["loadstart","progress","abort","error","load","timeout","loadend"];a=p.concat("readystatechange");var e=window.navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;_=XMLHttpRequest;XMLHttpRequest._SAP_ENHANCED=true;X=_.prototype;XMLHttpRequest.channelFactory=new C();function f(o,h){var k,n,i,j,l,q;n=h.length;for(k=0;k<n;++k){i=h[k];q=o[i];if(q){l="_"+i;j=o[l];if(!j){o[l]=q;}}}}f(X,["abort","open","setRequestHeader","send","addEventListener","removeEventListener"]);X._getHandlers=function(){var h=this._handlers;if(!h){h=new E(a);this._handlers=h;}return h;};X.handleEvent=function(h){this._getHandlers().dispatch(h);};X.suspendEvents=function(){this._getHandlers().suspend=true;};X.resumeEvents=function(h){var i=this._getHandlers();i.suspend=false;if(h){i.releaseEvents();}else{i.clearEvents();}};X.clearEvents=function(){this._getHandlers().clearEvents();};X.getEventHandler=function(){var s=this,h=this._fnHandler;if(!h){h=function(i){s.handleEvent(i);};this._fnHandler=h;}return h;};X._checkEventSubscription=function(t,h){h=h||this._getHandlers();if(!h.subscribed(t)){this._addEventListener(t,this.getEventHandler());h.subscribe(t);}};X._checkEventSubscriptions=function(){var h,i,n;h=this._getHandlers();n=a.length;for(i=0;i<n;++i){this._checkEventSubscription(a[i],h);}};X.addEventListener=function(t,h){this._getHandlers().add(t,h);};X.removeEventListener=function(t,h){this._getHandlers().remove(t,h);};function g(h){Object.defineProperty(X,"on"+h,{configurable:true,get:function(){return this["_on"+h]||null;},set:function(v){var i="_on"+h;if(this[i]){this.removeEventListener(h,this[i]);}if(typeof v==="function"||typeof v==="object"){this[i]=v;if(E.isHandler(v)){this.addEventListener(h,v);}}else{this[i]=null;}}});}a.forEach(function(h){g(h);});X.abort=function(){var h;try{h=this._channel;if(h){c.debug("Aborting request "+h.method+" "+h.url);h.aborting();this._abort();h.aborted();}else{c.debug("Aborting request");this._abort();}}catch(i){c.warning("Failed to abort request: "+i.message);if(h){h["catch"](i);}else{throw i;}}};X.open=function(h,i,j,k,l){var n,o,q,s;this._id=++u;c.debug("Opening request #"+this._id+" "+h+" "+i);o=arguments.length;if(o<=2){j=true;}q=h;s=i;this._getHandlers().clearEvents();n=_.channelFactory.create(this,h,i,j,k,l);this._channel=n;try{this._clearParams();n.opening();h=n.method;i=n.url;if((s!==i)||(q!==h)){c.debug("Rewriting request #"+this._id+" to "+h+" "+i);}if(o<=2){this._open(h,i);}else{this._open(h,i,j,k,l);}n.opened();this._checkEventSubscriptions();this._removeEventListener("readystatechange",this.getEventHandler());this._addEventListener("readystatechange",this.getEventHandler());}catch(t){c.warning("Failed to open request #"+this._id+" "+h+" "+i+": "+t.message);n["catch"](t);}};X.setRequestHeader=function(h,v){var i,n;if(typeof v!=="string"){v=""+v;}this._setRequestHeader(h,v);n=h.toLowerCase();i=this.headers;if(i[n]===undefined){i[n]=v;}else{i[n]+=", "+v;}};X.setRequestHeaders=function(h){var j,k,i,n;if(typeof h==="object"){k=Object.getOwnPropertyNames(h);n=k.length;for(i=0;i<n;++i){j=k[i];this.setRequestHeader(j,h[j]);}}};X.send=function(h){var i,j,k;try{i=this._channel;if(i){j=i.method;k=i.url;c.debug("Sending request #"+this._id+" "+j+" "+k);i.sending();}this._saveParams(h);this._send(h);if(i){i.sent();}}catch(l){if(j){c.warning("Failed to send request #"+this._id+" "+j+" "+k+": "+l.message);}else{c.warning("Failed to send request #"+this._id+": "+l.message);}if(i){i["catch"](l);}else{throw l;}}};X.getRequestHeader=function(h){return this.headers[h.toLowerCase()];};X.deleteRepeatHeader=function(h){delete this.headers[h.toLowerCase()];};X.setRepeatHeader=function(h,v){this.headers[h.toLowerCase()]=v;};X.reopen=function(){var h=this._channel,i,j;if(h){i=h.method;j=h.url;c.debug("Reopening request #"+this._id+" "+i+" "+j);}else{throw new TypeError("Cannot reopen request");}try{h.reopening();h.opening();this._open(i,j,h.async,h.username,h.password);h.opened();this._restoreParams();this.resumeEvents();}catch(k){c.warning("Failed to reopen request #"+this._id+" "+i+" "+j+": "+k.message);h["catch"](k);}};X.repeat=function(){var h=this._channel,s=this;if(!h){throw new TypeError("Cannot repeat request");}if(e){setTimeout(function(){s.abort();s.reopen();s.send(s._data);},0);}else{this.abort();this.reopen();this.send(this._data);}};X.toString=function(){var h=this._channel,s="[object XMLHttpRequest]";if(h){s+="#"+this._id+" "+h.method+" "+h.url;}return s;};Object.defineProperties(X,{"channel":{get:function(){return this._channel;}},"headers":{get:function(){var h=this._headers;if(!h){h={};this._headers=h;}return h;}},"id":{get:function(){return this._id;}}});X._clearParams=function(){delete this._headers;delete this._withCredentials;delete this._timeout;delete this._data;};X._restoreParams=function(){var t,h;if(this._headers){h=this._headers;this._headers={};this.setRequestHeaders(h);}if(this._withCredentials){this.withCredentials=true;}t=this._timeout;if(t){this.timeout=t;}};X._saveParams=function(h){var t;if((h!==undefined)&&(h!==null)){this._data=h;}if(this.withCredentials){this._withCredentials=true;}t=this.timeout;if(t){this._timeout=t;}};Object.defineProperties(XMLHttpRequest,{"logger":{get:function(){return L.logger;},set:function(l){L.logger=l;}}});}if(!XMLHttpRequest._SAP_ENHANCED){x();}m.exports=XMLHttpRequest;},{"./ChannelFactory.js":2,"./EventHandlers.js":5,"./Log.js":8}]},{},[18])(18)});return m.exports;});
sap.ui.require.preload({
	"sap/ushell/applications/PageComposer/manifest.json":'{"_version":"1.17.0","sap.app":{"i18n":"i18n/i18n.properties","id":"sap.ushell.applications.PageComposer","type":"component","embeddedBy":"","title":"{{PageComposer.AppTitle}}","ach":"CA-FLP-FE-COR","dataSources":{"PageRepositoryService":{"uri":"/sap/opu/odata/UI2/FDM_PAGE_REPOSITORY_SRV/","type":"OData","settings":{"odataVersion":"2.0","localUri":"localService/pages/metadata.xml"}}},"cdsViews":[],"offline":false},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":false,"phone":false},"fullWidth":true},"sap.ui5":{"autoPrefixId":true,"componentUsages":{"transportInformation":{"name":"sap.ushell_abap.transport","lazy":true,"componentData":{"supported":true}}},"dependencies":{"minUI5Version":"1.72.0","libs":{"sap.ui.core":{"lazy":false},"sap.f":{"lazy":false},"sap.m":{"lazy":false},"sap.ui.layout":{"lazy":false},"sap.ushell":{"lazy":false}},"components":{"sap.ushell_abap.transport":{"lazy":true,"manifest":true}}},"models":{"PageRepository":{"dataSource":"PageRepositoryService","preload":true,"settings":{"defaultCountMode":"None","skipMetadataAnnotationParsing":true,"useBatch":true}},"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"rootView":{"viewName":"sap.ushell.applications.PageComposer.view.App","type":"XML","async":true,"id":"pageComposer"},"handleValidation":false,"config":{"fullWidth":true,"sapFiori2Adaptation":true,"enableCreate":true,"enablePreview":true,"checkLanguageMismatch":true},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","viewPath":"sap.ushell.applications.PageComposer.view","controlId":"pageComposer","controlAggregation":"pages","async":true,"fullWidth":true},"routes":[{"pattern":"","name":"overview","target":"overview"},{"pattern":"view/{pageId}:?query:","name":"view","target":"view"},{"pattern":"edit/{pageId}:?query:","name":"edit","target":"edit"},{"pattern":"error/{pageId}","name":"error","target":"error"}],"targets":{"overview":{"viewId":"pageOverview","viewName":"PageOverview"},"view":{"viewId":"view","viewName":"PageDetail"},"edit":{"viewId":"edit","viewName":"PageDetailEdit"},"error":{"viewId":"error","viewName":"ErrorPage"}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/applications/PageComposer/view/App.view.xml":'<mvc:View controllerName="sap.ushell.applications.PageComposer.controller.App" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" height="100%" class="sapUiGlobalBackgroundColor" displayBlock="true"><NavContainer id="pageComposer"/></mvc:View>',
	"sap/ushell/applications/PageComposer/view/ConfirmChangesDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog id="confirmChangesDialog" title="{i18n&gt;ConfirmChangesDialog.Title}" type="Message" afterClose=".onAfterClose" contentWidth="30rem" state="Warning"><content><VBox><Text id="confirmChangesDialogMessageText" text="{/simpleError/message}" class="sapUiSmallMarginBottom"/><Text id="confirmChangesModifiedByText" visible="false" text="{i18n&gt;Label.ModifiedBy} {/simpleError/modifiedBy}" class="sapUISmallMarginBottom"/></VBox></content><buttons><Button id="confirmChangesDialogDismissButton" text="{i18n&gt;Button.DismissChanges}" type="Emphasized" press=".onDismissChanges"/><Button id="confirmChangesDialogOverwriteButton" text="{i18n&gt;Button.OverwriteChanges}" press=".onOverwriteChanges"/><Button id="confirmChangesDialogCancelButton" text="{i18n&gt;Button.Cancel}" press=".onCancel"/></buttons></Dialog></core:FragmentDefinition>',
	"sap/ushell/applications/PageComposer/view/ContextSelector.fragment.xml":'<Dialog xmlns="sap.m" id="contextSelector" title="{i18n&gt;ContextSelector.Title}" beforeOpen=".onBeforeOpen" afterClose=".destroy" contentWidth="30rem"><content><Toolbar id="contextSelectorToolbar" visible="{/rolesAvailable}"><SearchField id="contextSelectorSearchField" liveChange=".onSearch" search=".onSearch" tooltip="{i18n&gt;Tooltip.SearchForRoles}" placeholder="{i18n&gt;Placeholder.SearchForRoles}" width="100%"/></Toolbar><List id="contextSelectorList" mode="MultiSelect" includeItemInSelection="true" selectionChange=".onSelectionChange" items="{/availableRoles}" noDataText="{i18n&gt;Message.NoRoles}"><infoToolbar><OverflowToolbar visible="{= !${/validRoleSelection} &amp;&amp; ${/rolesAvailable}}" id="contextSelectorInfoToolbar"><Label id="contextSelectorInfoToolbarLabel" text="{i18n&gt;Message.NoRoleSelected}"/></OverflowToolbar></infoToolbar><items><StandardListItem title="{name}" description="{title}"/></items></List></content><beginButton><Button id="contextSelectorSelectButton" type="Emphasized" text="{i18n&gt;Button.Select}" press=".onConfirm" enabled="{= ${/validRoleSelection}}"/></beginButton><endButton><Button id="contextSelectorCancelButton" text="{i18n&gt;Button.Cancel}" press=".onCancel"/></endButton></Dialog>',
	"sap/ushell/applications/PageComposer/view/CopyPageDialog.fragment.xml":'<Dialog xmlns="sap.m" id="copyPageDialog" title="{i18n&gt;CopyDialog.Title}" beforeOpen=".onBeforeOpen" afterClose=".destroy" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core" core:require="{formatMessage:\'sap/base/strings/formatMessage\',String:\'sap/ui/model/type/String\',CustomString:\'sap/ushell/applications/PageComposer/controller/CustomString\'}"><content><f:SimpleForm id="copyForm" editable="true"><Text id="copyMessage" text="{parts:[\'i18n&gt;CopyDialog.Message\',\'/sourceId\'],formatter:\'formatMessage\'}"/><Label id="copyPageIdLabel" text="{i18n&gt;Label.PageID}" labelFor="copyId"/><Input maxLength="35" required="true" id="copyPageIdInput" placeholder="{parts:[\'i18n&gt;Placeholder.CopyPageTitle\',\'/sourceId\'],formatter:\'formatMessage\'}" change=".onPageIDChange" liveChange=".onPageIDLiveChange" valueLiveUpdate="true" value="{path:\'/targetId\',type:\'CustomString\'}"/><Label id="copyPageDescriptionLabel" text="{i18n&gt;Label.Description}" labelFor="copyDescriptionInput"/><Input maxLength="100" required="true" id="copyDescriptionInput" placeholder="{i18n&gt;Placeholder.Description}" liveChange=".onDescriptionLiveChange" valueLiveUpdate="true" value="{path:\'/description\',type:\'String\'}"/><Label id="copyTitleLabel" text="{i18n&gt;Label.PageTitle}" labelFor="copyTitle"/><Input id="copyTitle" required="true" maxLength="100" value="{path:\'/title\',type:\'String\'}" liveChange=".onTitleLiveChange" valueLiveUpdate="true" valueStateText="{i18n&gt;Message.EmptyTitle}" placeholder="{i18n&gt;Placeholder.PageTitle}"/></f:SimpleForm><core:ComponentContainer id="transportContainer" lifecycle="Application"/></content><beginButton><Button id="copyPageSaveButton" type="Emphasized" text="{i18n&gt;Button.Copy}" press=".onConfirm" enabled="{path:\'/validation\',formatter:\'.validate\'}"/></beginButton><endButton><Button id="copyPageCancelButton" text="{i18n&gt;Button.Cancel}" press=".onCancel"/></endButton></Dialog>',
	"sap/ushell/applications/PageComposer/view/CreatePageDialog.fragment.xml":'<Dialog xmlns="sap.m" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core" id="createPageDialog" title="{i18n&gt;CreatePageDialog.Title}" beforeOpen=".onBeforeOpen" afterClose=".destroy" core:require="{String:\'sap/ui/model/type/String\',CustomString:\'sap/ushell/applications/PageComposer/controller/CustomString\'}"><content><f:SimpleForm id="createPageDialogForm" editable="true"><Label id="createPageIdLabel" text="{i18n&gt;Label.PageID}"/><Input maxLength="35" required="true" id="createPageIdInput" change=".onPageIDChange" liveChange=".onPageIDLiveChange" valueLiveUpdate="true" value="{path:\'/id\',type:\'CustomString\'}"/><Label id="createPageDescriptionLabel" text="{i18n&gt;Label.Description}"/><Input maxLength="100" required="true" id="createPageDescriptionInput" placeholder="{i18n&gt;Placeholder.Description}" liveChange=".onDescriptionLiveChange" valueLiveUpdate="true" valueStateText="{i18n&gt;Message.EmptyDescription}" value="{path:\'/description\',type:\'String\'}"/><Label id="createPageTitleLabel" text="{i18n&gt;Label.PageTitle}"/><Input maxLength="100" required="true" id="createPageTitleInput" placeholder="{i18n&gt;Placeholder.PageTitle}" liveChange=".onTitleLiveChange" valueLiveUpdate="true" valueStateText="{i18n&gt;Message.EmptyTitle}" value="{path:\'/title\',type:\'String\'}"/></f:SimpleForm><core:ComponentContainer id="transportContainer" lifecycle="Application"/></content><beginButton><Button id="createPageSaveButton" type="Emphasized" text="{i18n&gt;Button.Create}" press=".onConfirm" enabled="{path:\'/validation\',formatter:\'.validate\'}"/></beginButton><endButton><Button id="createPageCancelButton" text="{i18n&gt;Button.Cancel}" press=".onCancel"/></endButton></Dialog>',
	"sap/ushell/applications/PageComposer/view/DeleteDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" id="deleteDialogFragment"><Dialog id="deletePageDialog" title="{i18n&gt;DeleteDialog.Title}" type="Message" afterClose=".destroy" state="Warning"><content><Text id="deleteMessage" text="{/message}"/><core:ComponentContainer id="transportContainer" lifecycle="Application"/></content><beginButton><Button id="deleteButton" text="{i18n&gt;DeleteDialog.ConfirmButton}" press=".onConfirm" type="Emphasized" enabled="{path:\'/validation\',formatter:\'.validate\'}"/></beginButton><endButton><Button id="cancelButton" text="{i18n&gt;Button.Cancel}" press="onCancel"/></endButton></Dialog></core:FragmentDefinition>',
	"sap/ushell/applications/PageComposer/view/EditDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" id="editDialogFragment"><Dialog id="editDialog" title="{i18n&gt;EditDialog.Title}" type="Message" afterClose=".destroy" state="Warning"><content><Text id="editMessage" text="{/message}"/><core:ComponentContainer id="transportContainer" lifecycle="Application"/></content><beginButton><Button id="editSaveButton" text="{i18n&gt;Button.Save}" press=".onConfirm" type="Emphasized" enabled="{path:\'/validation\',formatter:\'.validate\'}"/></beginButton><endButton><Button id="editCancelButton" text="{i18n&gt;Button.Cancel}" press="onCancel"/></endButton></Dialog></core:FragmentDefinition>',
	"sap/ushell/applications/PageComposer/view/EditPageHeaderDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core" core:require="{String:\'sap/ui/model/type/String\'}"><Dialog id="editPageHeaderDialog" title="{i18n&gt;Button.EditHeader}" beforeOpen=".onBeforeOpen" afterClose=".destroy"><content><f:SimpleForm editable="true" id="editPageHeaderDialogForm"><Label id="editPageHeaderDialogPageIdLabel" text="{i18n&gt;Label.PageID}" required="true"/><Input id="editPageHeaderDialogPageIdInput" editable="false" value="{/id}"/><Label id="editPageHeaderDialogPageDescriptionLabel" text="{i18n&gt;Label.Description}" required="true"/><Input id="editPageHeaderDialogPageDescriptionInput" maxLength="100" value="{path:\'/description\',type:\'String\'}" liveChange=".onDescriptionLiveChange" valueLiveUpdate="true" valueStateText="{i18n&gt;Message.EmptyDescription}" placeholder="{i18n&gt;Placeholder.Description}"/><Label id="editPageHeaderDialogPageTitleLabel" text="{i18n&gt;Label.PageTitle}" required="true"/><Input id="editPageHeaderDialogPageTitleInput" maxLength="100" value="{path:\'/title\',type:\'String\'}" liveChange=".onTitleLiveChange" valueLiveUpdate="true" valueStateText="{i18n&gt;Message.EmptyTitle}" placeholder="{i18n&gt;Placeholder.PageTitle}"/></f:SimpleForm></content><beginButton><Button id="editPageHeaderDialogConfirmButton" text="{i18n&gt;Button.Ok}" press=".onConfirm" enabled="{path:\'/validation\',formatter:\'.validate\'}" type="Emphasized"/></beginButton><endButton><Button id="editPageHeaderDialogCancelButton" text="{i18n&gt;Button.Cancel}" press=".onCancel"/></endButton></Dialog></core:FragmentDefinition>',
	"sap/ushell/applications/PageComposer/view/ErrorDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" id="errorDialogFragment"><Dialog id="errorDialog" title="{i18n&gt;ErrorDialog.Title}" type="Message" afterClose=".onAfterClose" contentWidth="30rem" state="Error"><content><VBox id="errorDialogMessageWrapper"><Text id="errorDialogMessageText" text="{/message}" class="sapUiSmallMarginBottom"/><Link id="errorDialogMessageLink" text="{i18n&gt;Button.ShowDetails}" visible="{=!${/showDetails}}" press=".onShowDetails"/></VBox><VBox id="errorDialogDetailsWrapper" visible="{/showDetails}"><Text id="errorDialogResponseCodeText" text="{i18n&gt;Label.ResponseCode} {/statusCode} - {/statusText}" class="sapUiSmallMarginBottom"/><Text id="errorDialogDetailsText" text="{i18n&gt;Label.Details}"/><Text id="errorDialogDescriptionText" text="{/description}" renderWhitespace="true"/></VBox></content><buttons><Button id="errorDialogButtonConfirm" text="{i18n&gt;Button.Ok}" press=".onConfirm"/><Button id="errorDialogButtonCopy" text="{i18n&gt;Button.Copy}" press=".onCopy"/></buttons></Dialog></core:FragmentDefinition>',
	"sap/ushell/applications/PageComposer/view/ErrorPage.view.xml":'<mvc:View controllerName="sap.ushell.applications.PageComposer.controller.ErrorPage" height="100%" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m"><MessagePage id="messagePageError" showHeader="false" text="{i18n&gt;ErrorPage.Message}" icon="sap-icon://document"><customDescription><Link text="{i18n&gt;ErrorPage.Link}" press=".onLinkPress"/></customDescription></MessagePage></mvc:View>',
	"sap/ushell/applications/PageComposer/view/Page.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui.launchpad" xmlns:core="sap.ui.core" xmlns:dnd="sap.ui.core.dnd" id="pageFragment"><Page id="page" edit="{/edit}" enableSectionReordering="{/edit}" sections="{/page/content/sections}" sectionDrop=".Page.moveSection" addSectionButtonPressed=".Page.addSection"><sections><Section id="pageSection" class="sapContrastPlus" editable="{/edit}" enableAddButton="false" enableGridBreakpoints="{= !${/edit}}" enableResetButton="false" enableShowHideButton="false" enableVisualizationReordering="{/edit}" title="{title}" showNoVisualizationsText="true" sizeBehavior="{viewSettings&gt;/sizeBehavior}" visualizations="{path:\'visualizations\',factory:\'.Page.visualizationFactory\',key:\'vizId\'}" delete=".Page.deleteSection" titleChange=".collectPageMessages" visualizationDrop=".Page.moveVisualization"/></sections><dragDropConfig><dnd:DropInfo groupName="Section" targetAggregation="sections" drop=".Page.addVisualization"/></dragDropConfig></Page></core:FragmentDefinition>',
	"sap/ushell/applications/PageComposer/view/PageDetail.view.xml":'<mvc:View controllerName="sap.ushell.applications.PageComposer.controller.PageDetail" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.f" xmlns:mvc="sap.ui.core.mvc"><f:DynamicPage id="pageDetail" fitContent="true" class="sapUshellPageLayout sapUiNoContentPadding" backgroundDesign="Transparent"><f:title><f:DynamicPageTitle id="dynamicPageTitle"><f:heading><HBox><Title id="pageId" text="{/page/content/id}"/><ObjectStatus active="true" press=".onErrorMessageClicked" visible="{= !${/page/content/editAllowed}}" class="sapUiSmallMarginBottom sapUiSmallMarginBegin" text="{i18n&gt;Message.NotAssigned}" state="Warning"/></HBox></f:heading><f:expandedContent><HBox displayInline="true" id="hboxExpanded"><ObjectAttribute id="objectAttributeDescriptionExpanded" text="{/page/content/description}"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetail-Header" writeToDom="true"/></customData></ObjectAttribute><ObjectAttribute id="objectAttributeRoleExpanded" visible="false" title="{i18n&gt;Label.AssignedRole}" text="" class="sapUiLargeMarginBegin"/></HBox></f:expandedContent><f:snappedContent><HBox displayInline="true" id="hboxSnapped"><ObjectAttribute id="objectAttributePageIdSnapped" title="{i18n&gt;Label.PageID}" text="{/page/content/id}"/><ObjectAttribute id="objectAttributeRoleSnapped" visible="false" title="{i18n&gt;Label.AssignedRole}" text="assigned role" class="sapUiLargeMarginBegin"/></HBox></f:snappedContent><f:actions><Button id="buttonCopy" text="{i18n&gt;Button.Copy}" type="Transparent" press=".onCopy" visible="{SupportedOperationModel&gt;/copySupported}"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetail-Button-CopyPage" writeToDom="true"/></customData></Button><Button id="buttonDelete" text="{i18n&gt;Button.Delete}" type="Transparent" press=".onDelete" visible="{SupportedOperationModel&gt;/deleteSupported}"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetail-Button-DeletePage" writeToDom="true"/></customData></Button></f:actions><f:navigationActions><Button id="buttonPreview" text="{i18n&gt;Button.PagePreview}" type="Transparent" visible="{SupportedOperationModel&gt;/previewSupported}" press=".preview"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetail-Button-PagePreview" writeToDom="true"/></customData></Button></f:navigationActions></f:DynamicPageTitle></f:title><f:header><f:DynamicPageHeader id="dynamicPageHeader" pinnable="false"><core:Fragment fragmentName="sap.ushell.applications.PageComposer.view.PageInfo" type="XML"/></f:DynamicPageHeader></f:header><f:content><Panel id="panel" height="100%" accessibleRole="Region" backgroundDesign="Transparent" class="sapUiNoContentPadding"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetail-Panel-TileDisplay" writeToDom="true"/></customData><headerToolbar><OverflowToolbar id="layoutOverflowToolbar" design="Transparent" height="3rem" class="sapUshellPageLayoutHeader"><Title id="layoutTitle" class="sapContrastPlus" text="{i18n&gt;Title.Layout}"/><ToolbarSpacer id="layoutToolbarSpacer"/><Button id="layoutButtonEdit" text="{i18n&gt;Button.Edit}" enabled="{/page/content/editAllowed}" type="Emphasized" press=".onEdit"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetail-Button-Edit" writeToDom="true"/></customData></Button></OverflowToolbar></headerToolbar><content><core:Fragment fragmentName="sap.ushell.applications.PageComposer.view.Page" type="XML"/></content></Panel></f:content></f:DynamicPage></mvc:View>',
	"sap/ushell/applications/PageComposer/view/PageDetailEdit.view.xml":'<mvc:View controllerName="sap.ushell.applications.PageComposer.controller.PageDetailEdit" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:l="sap.ui.layout" xmlns:f="sap.f" xmlns:mvc="sap.ui.core.mvc" core:require="{formatMessage:\'sap/base/strings/formatMessage\'}"><f:DynamicPage id="pageDetailEdit" fitContent="true" headerExpanded="{/headerExpanded}" class="sapUshellPageLayout sapUiNoContentPadding"><f:title><f:DynamicPageTitle id="dynamicPageTitle"><f:heading><Title id="pageId" text="{/page/content/id}"/></f:heading><f:expandedContent><HBox displayInline="true" id="hboxExpanded"><ObjectAttribute id="objectAttributeDescriptionExpanded" text="{/page/content/description}"/><ObjectAttribute id="objectAttributeRoleExpanded" visible="false" title="{i18n&gt;Label.AssignedRole}" text="" class="sapUiLargeMarginBegin"/></HBox></f:expandedContent><f:snappedContent/><f:actions><Button id="buttonEditHeader" text="{i18n&gt;Button.EditHeader}" type="Transparent" press=".openEditPageHeaderDialog"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetailEdit-Button-EditHeader" writeToDom="true"/></customData></Button></f:actions><f:navigationActions><Button id="buttonPreview" text="{i18n&gt;Button.PagePreview}" type="Transparent" visible="{SupportedOperationModel&gt;/previewSupported}" press=".preview"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetailEdit-Button-PagePreview" writeToDom="true"/></customData></Button></f:navigationActions></f:DynamicPageTitle></f:title><f:header><f:DynamicPageHeader id="dynamicPageHeader" pinnable="false"><core:Fragment fragmentName="sap.ushell.applications.PageComposer.view.PageInfo" type="XML"/></f:DynamicPageHeader></f:header><f:content><l:DynamicSideContent id="layoutContent" sideContentFallDown="BelowM" sideContentPosition="End" containerQuery="true" showSideContent="{/catalogsExpanded}"><l:mainContent><Panel id="panel" height="100%" accessibleRole="Region" backgroundDesign="Transparent" class="sapUiNoContentPadding"><headerToolbar><OverflowToolbar id="layoutHeader" design="Transparent" height="3rem" class="sapUshellPageLayoutHeader"><Title text="{i18n&gt;Title.Layout}" id="layoutTitle"/><Button id="layoutButtonMessage" icon="sap-icon://message-popup" visible="{= !!(${/messages}.length) }" tooltip="{parts:[\'i18n&gt;Button.Issues\',{path:\'/messages\',formatter:\'._formatLength\'}],formatter:\'formatMessage\'}" text="{= ${/messages}.length }" type="Emphasized" press=".handleMessagePopoverPress"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetailEdit-Button-ErrorMessage" writeToDom="true"/></customData></Button><ToolbarSpacer id="layoutHeaderSpacer"/><Button id="layoutButtonSave" text="{i18n&gt;Button.Save}" type="Emphasized" press=".onSave" enabled="{/dirtyPage}"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetailEdit-Button-Save" writeToDom="true"/></customData></Button><Button id="layoutButtonCancel" text="{i18n&gt;Button.Cancel}" type="Transparent" press=".onCancel"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetailEdit-Button-Cancel" writeToDom="true"/></customData></Button><Button id="contextSelectorButton" text="{parts:[\'i18n&gt;Button.ContextSelector\',\'roles&gt;/activeRoleContextInfo\'],formatter:\'formatMessage\'}" type="Transparent" press=".onOpenContextSelector"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetailEdit-Button-OpenContextSelector" writeToDom="true"/></customData></Button><Button id="toggleCatalogsButton" press=".onUpdateSideContentVisibility" text="{= ${/catalogsExpanded} ? ${i18n&gt;Button.HideCatalogs} : ${i18n&gt;Button.ShowCatalogs}}" type="Transparent"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageDetailEdit-Button-ShowCatalog" writeToDom="true"/></customData></Button></OverflowToolbar></headerToolbar><content><core:Fragment fragmentName="sap.ushell.applications.PageComposer.view.Page" type="XML"/></content></Panel></l:mainContent><l:sideContent><core:Fragment fragmentName="sap.ushell.applications.PageComposer.view.TileSelector" type="XML"/></l:sideContent></l:DynamicSideContent></f:content></f:DynamicPage></mvc:View>',
	"sap/ushell/applications/PageComposer/view/PageInfo.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" id="pageInfoFragment"><HeaderContainer id="pageInfoHeaderContainer"><VBox id="pageInfoTitleWrapper"><ObjectAttribute id="pageInfoTitle" title="{i18n&gt;Label.PageTitle}" text="{/page/content/title}"/></VBox><VBox visible="{/transportSupported}" id="pageInfoMetadataTransportWrapper"><ObjectAttribute id="pageInfoPackage" title="{i18n&gt;Label.Package}" text="{/page/metadata/devclass}"/><ObjectAttribute id="pageInfoWorkbenchRequest" title="{i18n&gt;Label.WorkbenchRequest}" text="{/page/metadata/transportId}" visible="{=!!${/page/metadata/transportId}}"/></VBox><VBox id="pageInfoMetadataCreatedWrapper"><ObjectAttribute id="pageInfoCreatedByFullname" title="{i18n&gt;Label.CreatedByFullname}" text="{/page/content/createdByFullname}"/><ObjectAttribute id="pageInfoCreatedOn" title="{i18n&gt;Label.CreatedOn}" text="{path:\'/page/content/createdOn\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'medium\'}}"/></VBox><VBox id="pageInfoMetadataModifiedWrapper"><ObjectAttribute id="pageInfoModifiedByFullname" title="{i18n&gt;Label.ChangedByFullname}" text="{/page/content/modifiedByFullname}"/><ObjectAttribute id="pageInfoModifiedOn" title="{i18n&gt;Label.ChangedOn}" text="{path:\'/page/content/modifiedOn\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'medium\'}}"/></VBox></HeaderContainer></core:FragmentDefinition>',
	"sap/ushell/applications/PageComposer/view/PageOverview.view.xml":'<mvc:View xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" height="100%" controllerName="sap.ushell.applications.PageComposer.controller.PageOverview"><Page id="pageOverviewPage"><customHeader><Bar id="titlebar"><contentLeft><Title id="title" text="{i18n&gt;PageOverview.Title}" class="sapUiMediumMarginBegin"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageOverview-Header" writeToDom="true"/></customData></Title></contentLeft></Bar></customHeader><content><Table class="sapUiMediumMarginBeginEnd sapUiTinyMarginTopBottom sapUiForceWidthAuto" id="table" ariaLabelledBy="title" busy="{/busy}" items="{path:\'/pages\',key:\'id\',sorter:{path:\'content/modifiedOn\',descending:\'true\'}}" itemPress=".onItemPress" selectionChange=".onSelectionChange" updateFinished=".onTableUpdate" mode="SingleSelectLeft" sticky="ColumnHeaders" noDataText="{i18n&gt;Message.NoPages}"><headerToolbar><OverflowToolbar design="Solid" id="overflowToolbar"><ToolbarSpacer id="toolbarSpacer"/><SearchField id="searchField" showRefreshButton="false" tooltip="{i18n&gt;Tooltip.Search}" search=".onSearch" width="auto"/><Button id="addButton" text="{i18n&gt;Button.Create}" type="Transparent" visible="{SupportedOperationModel&gt;/createSupported}" press=".onAdd"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageOverview-Button-Create" writeToDom="true"/></customData></Button><Button id="copyButton" text="{i18n&gt;Button.Copy}" type="Transparent" enabled="{buttonStates&gt;/isDeleteAndCopyEnabled}" visible="{SupportedOperationModel&gt;/copySupported}" press=".onCopy"><customData><core:CustomData key="help-id" value="LaunchpadPage-compose-PageOverview-Button-Copy" writeToDom="true"/></customData></Button><Button id="deleteButton" text="{i18n&gt;Button.Delete}" type="Transparent" enabled="{buttonStates&gt;/isDeleteAndCopyEnabled}" visible="{SupportedOperationModel&gt;/deleteSupported}" press=".onDelete"><customData><core:CustomData key="help-id" value="FLPPage-manage-PageOverview-Button-Delete" writeToDom="true"/></customData></Button><Button id="sortButton" tooltip="{i18n&gt;Tooltip.SortSettingsButton}" icon="sap-icon://sort" type="Transparent" press=".showViewSettingsDialog(\'sort\')"/><Button id="filterButton" tooltip="{i18n&gt;Tooltip.FilterSettingsButton}" icon="sap-icon://filter" type="Transparent" press=".showViewSettingsDialog(\'filter\')"/><Button id="groupButton" tooltip="{i18n&gt;Tooltip.GroupSettingsButton}" icon="sap-icon://group-2" type="Transparent" press=".showViewSettingsDialog(\'group\')"/></OverflowToolbar></headerToolbar><infoToolbar><OverflowToolbar id="infoFilterBar" visible="false"><Text id="infoFilterLabel"/></OverflowToolbar></infoToolbar><columns><Column id="columnPageId"><ObjectIdentifier title="{i18n&gt;Column.PageID}" text="{i18n&gt;Column.PageDescription}"/></Column><Column id="columnPageTitle"><Text id="columnTextPageTitle" text="{i18n&gt;Column.PageTitle}"/></Column><Column id="columnPageAssignmentStatus" width="12%"><Text id="columnTextPageAssignmentStatus" text="{i18n&gt;Column.PageAssignmentStatus}"/></Column><Column id="columnPageTransport" width="12%" visible="{/transportSupported}"><ObjectIdentifier title="{i18n&gt;Column.PagePackage}" text="{i18n&gt;Column.PageWorkbenchRequest}"/></Column><Column id="columnPageCreated" width="12%"><ObjectIdentifier title="{i18n&gt;Column.PageCreatedBy}" text="{i18n&gt;Column.PageCreatedOn}"/></Column><Column id="columnPageChanged" width="12%"><ObjectIdentifier title="{i18n&gt;Column.PageChangedBy}" text="{i18n&gt;Column.PageChangedOn}"/></Column><Column id="columnEnd" width="4%" hAlign="End"/></columns><items><ColumnListItem id="columnListItemPage" type="Navigation"><cells><ObjectIdentifier id="objectIdentifierPageId" title="{content/id}" text="{content/description}"/></cells><cells><Text id="cellTextPageTitle" text="{content/title}"/></cells><cells><ObjectStatus press="onErrorMessageClicked" text="{=${content/editAllowed} ? ${i18n&gt;Message.StatusAssigned} : ${i18n&gt;Message.NotAssigned} }" active="true" state="{=${content/editAllowed}? \'Success\' : \'Warning\'}"/></cells><cells><ObjectIdentifier id="cellTextPageTransport" title="{metadata/devclass}" text="{metadata/transportId}"/></cells><cells><ObjectIdentifier id="cellTextPageCreated" title="{content/createdByFullname}" text="{path:\'content/createdOn\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'medium\'}}"/></cells><cells><ObjectIdentifier id="cellTextPageChanged" title="{content/modifiedByFullname}" text="{path:\'content/modifiedOn\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'medium\'}}"/></cells><cells><Button id="cellButtonPageEdit" press=".onEdit" icon="sap-icon://edit" tooltip="{i18n&gt;Button.Edit}" enabled="{content/editAllowed}" type="Transparent"/></cells></ColumnListItem></items></Table></content></Page></mvc:View>',
	"sap/ushell/applications/PageComposer/view/PagePreviewDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui.launchpad" xmlns:core="sap.ui.core" xmlns:m="sap.m" core:require="{formatMessage:\'sap/base/strings/formatMessage\'}"><m:Dialog id="pagePreviewDialog" title="{parts:[\'i18n&gt;PagePreviewDialog.title\',\'/page/content/title\'],formatter:\'formatMessage\'}" contentWidth="100%" contentHeight="100%"><m:content><Page id="pagePreview" sections="{/page/content/sections}"><sections><Section id="pagePreviewSection" class="sapContrastPlus" enableGridBreakpoints="true" title="{title}" showNoVisualizationsText="true" sizeBehavior="{viewSettings&gt;/sizeBehavior}" visualizations="{path:\'visualizations\',factory:\'.visualizationFactory\',key:\'vizId\'}"/></sections></Page></m:content><m:endButton><m:Button id="previewCloseButton" text="{i18n&gt;Button.ClosePreview}" press=".close"/></m:endButton></m:Dialog></core:FragmentDefinition>',
	"sap/ushell/applications/PageComposer/view/TileInfoPopover.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:formLayout="sap.ui.layout.form"><ResponsivePopover id="tileInfoPopover" showHeader="false" placement="HorizontalPreferredLeft"><formLayout:SimpleForm id="info" title="{title}" layout="ResponsiveGridLayout" editable="false"><formLayout:content><Label id="subtitleLabel" visible="{= !!${subTitle}}" text="{i18n&gt;TileInfoPopover.Label.Subtitle}"/><Text id="subtitle" visible="{= !!${subTitle}}" text="{subTitle}"/><Label id="iconLabel" visible="{= !!${iconUrl}}" text="{i18n&gt;TileInfoPopover.Label.Icon}"/><core:Icon id="icon" visible="{= !!${iconUrl}}" src="{= ${iconUrl} ? ${iconUrl} : \'sap-icon://border\'}" size="1.5rem" width="1.5rem"/><Label id="semanticObjectLabel" visible="{= !!${semanticObject}}" text="{i18n&gt;TileInfoPopover.Label.SemanticObject}"/><Text id="semanticObject" visible="{= !!${semanticObject}}" text="{semanticObject}"/><Label id="semanticActionLabel" visible="{= !!${semanticAction}}" text="{i18n&gt;TileInfoPopover.Label.SemanticAction}"/><Text id="semanticAction" visible="{= !!${semanticAction}}" text="{semanticAction}"/><Label id="fioriIDLabel" visible="{= !!${fioriId}}" text="{i18n&gt;TileInfoPopover.Label.FioriID}"/><Text id="fioriID" visible="{= !!${fioriId}}" text="{fioriId}"/><Label id="appDetailLabel" visible="{= !!${appDetail}}" text="{i18n&gt;TileInfoPopover.Label.AppDetail}"/><Text id="appDetail" visible="{= !!${appDetail}}" text="{appDetail}"/><Label id="appTypeLabel" visible="{= !!${appType}}" text="{i18n&gt;TileInfoPopover.Label.AppType}"/><Text id="appType" visible="{= !!${appType}}" text="{appType}"/><Label id="tileTypeLabel" visible="{= !!${tileType}}" text="{i18n&gt;TileInfoPopover.Label.TileType}"/><Text id="tileType" visible="{= !!${tileType}}" text="{path:\'tileType\',formatter:\'._formatTileType\'}"/><Label id="deviceWrapperLabel" visible="{= !!${deviceDesktop} || !!${deviceTablet} || !!${devicePhone}}" text="{i18n&gt;TileInfoPopover.Label.AvailableDevices}"/><HBox id="deviceWrapper" visible="{= !!${deviceDesktop} || !!${deviceTablet} || !!${devicePhone}}" justifyContent="SpaceAround"><core:Icon id="deviceDesktop" visible="{= !!${deviceDesktop}}" src="sap-icon://laptop" tooltip="{i18n&gt;Tooltip.Desktop}"/><core:Icon id="deviceTablet" visible="{= !!${deviceTablet}}" src="sap-icon://ipad-2"/><core:Icon id="devicePhone" visible="{= !!${devicePhone}}" src="sap-icon://iphone"/></HBox></formLayout:content></formLayout:SimpleForm></ResponsivePopover></core:FragmentDefinition>',
	"sap/ushell/applications/PageComposer/view/TileSelector.fragment.xml":'<Panel xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:dnd="sap.ui.core.dnd" id="tileSelector" height="100%" accessibleRole="Region" backgroundDesign="Transparent" class="sapUiNoContentPadding" core:require="{formatMessage:\'sap/base/strings/formatMessage\'}"><customData><core:CustomData key="help-id" value="FLPPage-manage-TileSelector-Panel-TileSelector" writeToDom="true"/></customData><layoutData><FlexItemData growFactor="1"/></layoutData><headerToolbar><OverflowToolbar id="tileSelectorToolbar" design="Transparent" height="3rem"><SearchField id="tileSelectorSearchField" showRefreshButton="false" width="auto" value="{/searchText}" tooltip="{i18n&gt;Tooltip.SearchForTiles}" placeholder="{i18n&gt;Placeholder.SearchForTiles}" search=".TileSelector.onSearchTiles"/><ToolbarSpacer/><Button id="tileSelectorAddButton" text="{i18n&gt;Button.Add}" type="Transparent" press=".TileSelector.onAddTiles"><customData><core:CustomData key="help-id" value="FLPPage-manage-TileSelector-Button-Add" writeToDom="true"/></customData></Button><OverflowToolbarButton id="tileSelectorSortButton" icon="sap-icon://sort" text="{i18n&gt;Button.SortCatalogs}" tooltip="{i18n&gt;Button.SortCatalogs}" press=".TileSelector.onSortCatalogsToggle"/><OverflowToolbarButton id="tileSelectorCollapseButton" icon="sap-icon://collapse-all" text="{i18n&gt;Button.CollapseCatalogs}" tooltip="{i18n&gt;Button.CollapseCatalogs}" press=".TileSelector.onCollapseAllCatalogs"/><OverflowToolbarButton id="tileSelectorExpandButton" icon="sap-icon://expand-all" text="{i18n&gt;Button.ExpandCatalogs}" tooltip="{i18n&gt;Button.ExpandCatalogs}" press=".TileSelector.onExpandAllCatalogs"/></OverflowToolbar></headerToolbar><content><Tree id="tileSelectorList" mode="MultiSelect" modeAnimationOn="false" noDataText="{i18n&gt;Message.NoTiles}" items="{path:\'/catalogs\',key:\'vizId\'}" itemPress=".TileSelector.onCatalogItemPress"><infoToolbar><Toolbar id="roleContextInfoToolbar" visible="{=!!${roles&gt;/showRoleContextInfo}}" active="true" press=".onOpenContextSelector"><Label id="roleContextInfo" text="{i18n&gt;Message.RoleContext}"/></Toolbar></infoToolbar><items><CustomTreeItem id="tileSelectorCustomTreeItem" class="sapUshellTileSelectorListItem" type="{= ${catalogTitle} ? \'Active\' : \'Inactive\'}"><HBox id="tileSelectorHbox1" alignItems="Center" width="100%" class="sapUiTinyMargin"><VBox width="0" id="tileSelectorVbox1"><layoutData><FlexItemData growFactor="1"/></layoutData><Title id="tileSelectorCatalogTitle" visible="{= !!${catalogTitle}}" text="{catalogTitle}" wrapping="true"/><Title id="tileSelectorTileTitle" visible="{= !!${title}}" text="{title}" wrapping="true"/><Text id="tileSelectorTileSubtitle" visible="{= !!${subTitle}}" text="{subTitle}"/></VBox><Button id="tileSelectorTileButtonInfo" visible="{= !${catalogTitle}}" icon="sap-icon://hint" type="Transparent" press=".onOpenTileInfo"/><Button id="tileSelectorTileButtonAdd" visible="{= !${catalogTitle}}" text="{i18n&gt;Button.Add}" type="Transparent" press=".TileSelector.onAddTiles"/></HBox></CustomTreeItem></items><dragDropConfig><dnd:DragInfo groupName="Section" sourceAggregation="items" dragStart=".TileSelector.onDragStart"/></dragDropConfig></Tree></content></Panel>',
	"sap/ushell/applications/PageComposer/view/ViewSettingsDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><ViewSettingsDialog id="viewSettingsDialog" sortDescending="true" confirm=".handleDialogConfirm" cancel=".handleCancel" resetFilters=".handleResetFilters"><sortItems><ViewSettingsItem id="IDSort" text="{i18n&gt;Column.PageID}" key="content/id"/><ViewSettingsItem id="DescriptionSort" text="{i18n&gt;Column.PageDescription}" key="content/description"/><ViewSettingsItem id="TitleSort" text="{i18n&gt;Column.PageTitle}" key="content/title"/><ViewSettingsItem id="AssignmentSort" text="{i18n&gt;Column.PageAssignmentStatus}" key="content/editAllowed"/><ViewSettingsItem id="PackageSort" text="{i18n&gt;Column.PagePackage}" key="metadata/devclass"/><ViewSettingsItem id="WorkbenchRequestSort" text="{i18n&gt;Column.PageWorkbenchRequest}" key="metadata/transportId"/><ViewSettingsItem id="CreatedBySort" text="{i18n&gt;Column.PageCreatedBy}" key="content/createdByFullname"/><ViewSettingsItem id="CreatedOnSort" text="{i18n&gt;Column.PageCreatedOn}" key="content/createdOn"/><ViewSettingsItem id="ChangedBySort" text="{i18n&gt;Column.PageChangedBy}" key="content/modifiedByFullname"/><ViewSettingsItem id="ChangedOnSort" text="{i18n&gt;Column.PageChangedOn}" key="content/modifiedOn" selected="true"/></sortItems><filterItems><ViewSettingsFilterItem id="AssignmentFilter" text="{i18n&gt;Column.PageAssignmentStatus}" key="uniqueValues&gt;key" multiSelect="false" items="{path:\'uniqueValues&gt;/editAllowed\',key:\'id\'}"><items><ViewSettingsItem text="{= ${uniqueValues&gt;key} ? ${i18n&gt;Message.StatusAssigned} : ${i18n&gt;Message.NotAssigned} }" key="content/editAllowed___EQ___{uniqueValues&gt;key}"/></items></ViewSettingsFilterItem><ViewSettingsFilterItem id="PackageFilter" text="{i18n&gt;Column.PagePackage}" key="uniqueValues&gt;key" multiSelect="false" items="{path:\'uniqueValues&gt;/devclass\',key:\'id\'}"><items><ViewSettingsItem text="{uniqueValues&gt;key}" key="metadata/devclass___EQ___{uniqueValues&gt;key}"/></items></ViewSettingsFilterItem><ViewSettingsFilterItem id="WorkbenchRequestFilter" text="{i18n&gt;Column.PageWorkbenchRequest}" key="uniqueValues&gt;key" multiSelect="false" items="{path:\'uniqueValues&gt;/transportId\',key:\'id\'}"><items><ViewSettingsItem text="{uniqueValues&gt;key}" key="metadata/transportId___EQ___{uniqueValues&gt;key}"/></items></ViewSettingsFilterItem><ViewSettingsFilterItem id="CreatedByFilter" text="{i18n&gt;Column.PageCreatedBy}" key="uniqueValues&gt;key" multiSelect="false" items="{path:\'uniqueValues&gt;/createdByFullname\',key:\'id\'}"><items><ViewSettingsItem text="{uniqueValues&gt;key}" key="content/createdByFullname___EQ___{uniqueValues&gt;key}"/></items></ViewSettingsFilterItem><ViewSettingsCustomItem id="CreatedOnFilter" text="{i18n&gt;Column.PageCreatedOn}" key="content/createdOn"><customControl><DateRangeSelection id="CreatedOnDateRangeSelection" change=".handleDateRangeSelectionChanged"/></customControl></ViewSettingsCustomItem><ViewSettingsFilterItem id="ChangedByFilter" text="{i18n&gt;Column.PageChangedBy}" key="uniqueValues&gt;key" multiSelect="false" items="{path:\'uniqueValues&gt;/modifiedByFullname\',key:\'id\'}"><items><ViewSettingsItem text="{uniqueValues&gt;key}" key="content/modifiedByFullname___EQ___{uniqueValues&gt;key}"/></items></ViewSettingsFilterItem><ViewSettingsCustomItem id="ChangedOnFilter" text="{i18n&gt;Column.PageChangedOn}" key="content/modifiedOn"><customControl><DateRangeSelection id="ChangedOnDateRangeSelection" change=".handleDateRangeSelectionChanged"/></customControl></ViewSettingsCustomItem></filterItems><groupItems><ViewSettingsItem id="AssignmentGroup" text="{i18n&gt;Column.PageAssignmentStatus}" key="content/editAllowed"/><ViewSettingsItem id="PackageGroup" text="{i18n&gt;Column.PagePackage}" key="metadata/devclass"/><ViewSettingsItem id="WorkbenchRequestGroup" text="{i18n&gt;Column.PageWorkbenchRequest}" key="metadata/transportId"/><ViewSettingsItem id="CreatedByGroup" text="{i18n&gt;Column.PageCreatedBy}" key="content/createdByFullname"/><ViewSettingsItem id="CreatedOnGroup" text="{i18n&gt;Column.PageCreatedOn}" key="content/createdOn"/><ViewSettingsItem id="ChangedByGroup" text="{i18n&gt;Column.PageChangedBy}" key="content/modifiedByFullname"/><ViewSettingsItem id="ChangedOnGroup" text="{i18n&gt;Column.PageChangedOn}" key="content/modifiedOn"/></groupItems></ViewSettingsDialog></core:FragmentDefinition>',
	"sap/ushell/applications/SpaceDesigner/manifest.json":'{"_version":"1.17.0","sap.app":{"i18n":"i18n/i18n.properties","id":"sap.ushell.applications.SpaceDesigner","type":"component","embeddedBy":"","title":"{{SpaceDesigner.AppTitle}}","ach":"CA-FLP-FE-COR","dataSources":{"SpaceRepositoryService":{"uri":"/sap/opu/odata/UI2/FDM_SPACE_REPOSITORY_SRV/","type":"OData","settings":{"odataVersion":"2.0","localUri":"localService/space/metadata.xml"}}},"cdsViews":[],"offline":false},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":false,"phone":false},"fullWidth":true},"sap.ui5":{"resources":{"js":[],"css":[{"uri":"css/style.css"}]},"autoPrefixId":true,"componentUsages":{"transportInformation":{"name":"sap.ushell_abap.transport","lazy":true,"componentData":{"supported":true}}},"dependencies":{"minUI5Version":"1.72.0","libs":{"sap.ui.core":{"lazy":false},"sap.f":{"lazy":false},"sap.m":{"lazy":false},"sap.ui.layout":{"lazy":false},"sap.ushell":{"lazy":false}},"components":{"sap.ushell_abap.transport":{"lazy":true,"manifest":true}}},"models":{"SpaceRepository":{"dataSource":"SpaceRepositoryService","preload":true,"settings":{"defaultCountMode":"None","skipMetadataAnnotationParsing":true,"useBatch":true}},"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"rootView":{"viewName":"sap.ushell.applications.SpaceDesigner.view.App","type":"XML","async":true,"id":"SpaceDesigner"},"handleValidation":false,"config":{"fullWidth":true,"sapFiori2Adaptation":true,"enableCreate":true,"enablePreview":false,"checkLanguageMismatch":true},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","viewPath":"sap.ushell.applications.SpaceDesigner.view","controlId":"spaceDesigner","controlAggregation":"pages","async":true,"fullWidth":true},"routes":[{"pattern":"","name":"overview","target":"overview"},{"pattern":"view/{spaceId}:?query:","name":"view","target":"view"},{"pattern":"edit/{spaceId}:?query:","name":"edit","target":"edit"},{"pattern":"error/{spaceId}","name":"error","target":"error"}],"targets":{"overview":{"viewId":"spaceOverview","viewName":"SpaceOverview"},"view":{"viewId":"view","viewName":"SpaceDetail"},"error":{"viewId":"error","viewName":"ErrorPage"}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/applications/SpaceDesigner/view/App.view.xml":'<mvc:View controllerName="sap.ushell.applications.SpaceDesigner.controller.App" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" height="100%" class="sapUiGlobalBackgroundColor" displayBlock="true"><NavContainer id="spaceDesigner"/></mvc:View>',
	"sap/ushell/applications/SpaceDesigner/view/CopySpaceDialog.fragment.xml":'<Dialog xmlns="sap.m" id="copyDialog" title="{i18n&gt;CopyDialog.Title}" beforeOpen=".onBeforeOpen" afterClose=".destroy" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core" core:require="{formatMessage:\'sap/base/strings/formatMessage\',String:\'sap/ui/model/type/String\',CustomString:\'sap/ushell/applications/SpaceDesigner/controller/CustomString\'}"><content><f:SimpleForm id="copyForm" editable="true"><Text id="copyMessage" text="{parts:[\'i18n&gt;CopyDialog.Message\',\'/sourceId\'],formatter:\'formatMessage\'}"/><Label id="copySpaceIdLabel" text="{i18n&gt;Label.SpaceID}" labelFor="copyId"/><Input maxLength="35" required="true" id="copySpaceIdInput" placeholder="{parts:[\'i18n&gt;Placeholder.CopySpaceTitle\',\'/sourceId\'],formatter:\'formatMessage\'}" change=".onSpaceIDChange" liveChange=".onSpaceIDLiveChange" valueLiveUpdate="true" value="{path:\'/targetId\',type:\'CustomString\'}"/><Label id="copyTitleLabel" text="{i18n&gt;Label.Title}" labelFor="copyTitle"/><Input id="copyTitle" required="true" maxLength="100" value="{path:\'/title\',type:\'String\'}" liveChange=".onTitleLiveChange" valueLiveUpdate="true" valueStateText="{i18n&gt;Message.EmptyTitle}" placeholder="{parts:[\'i18n&gt;Placeholder.CopySpaceTitle\',\'/sourceTitle\'],formatter:\'formatMessage\'}"/></f:SimpleForm><core:ComponentContainer id="transportContainer" lifecycle="Application"/></content><beginButton><Button id="copySpaceSaveButton" type="Emphasized" text="{i18n&gt;Button.Copy}" press=".onConfirm" enabled="{path:\'/validation\',formatter:\'.validate\'}"/></beginButton><endButton><Button id="copySpaceCancelButton" text="{i18n&gt;Button.Cancel}" press=".onCancel"/></endButton></Dialog>',
	"sap/ushell/applications/SpaceDesigner/view/CreateSpaceDialog.fragment.xml":'<Dialog xmlns="sap.m" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core" id="createSpaceDialog" title="{i18n&gt;CreateSpaceDialog.Title}" beforeOpen=".onBeforeOpen" afterClose=".destroy" core:require="{String:\'sap/ui/model/type/String\',CustomString:\'sap/ushell/applications/SpaceDesigner/controller/CustomString\'}"><content><f:SimpleForm id="createSpaceDialogForm" editable="true"><Label id="createSpaceIdLabel" text="{i18n&gt;Label.SpaceID}"/><Input maxLength="35" required="true" id="createSpaceIdInput" change=".onSpaceIDChange" liveChange=".onSpaceIDLiveChange" valueLiveUpdate="true" value="{path:\'/id\',type:\'CustomString\'}"/><Label id="createSpaceTitleLabel" text="{i18n&gt;Label.Title}"/><Input maxLength="100" required="true" id="createSpaceTitleInput" liveChange=".onTitleLiveChange" valueLiveUpdate="true" valueStateText="{i18n&gt;Message.EmptyTitle}" value="{path:\'/title\',type:\'String\'}"/></f:SimpleForm><core:ComponentContainer id="transportContainer" lifecycle="Application"/></content><beginButton><Button id="createSpaceSaveButton" type="Emphasized" text="{i18n&gt;Button.Create}" press=".onConfirm" enabled="{path:\'/validation\',formatter:\'.validate\'}"/></beginButton><endButton><Button id="createSpaceCancelButton" text="{i18n&gt;Button.Cancel}" press=".onCancel"/></endButton></Dialog>',
	"sap/ushell/applications/SpaceDesigner/view/DeleteDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog id="deleteDialog" title="{i18n&gt;DeleteDialog.Title}" type="Message" afterClose=".destroy" state="Warning"><content><Text id="deleteMessage" text="{/message}"/><core:ComponentContainer id="transportContainer" lifecycle="Application"/></content><beginButton><Button id="deleteConfirmButton" text="{i18n&gt;DeleteDialog.ConfirmButton}" press=".onConfirm" type="Emphasized" enabled="{path:\'/validation\',formatter:\'.validate\'}"/></beginButton><endButton><Button id="deleteCancelButton" text="{i18n&gt;Button.Cancel}" press="onCancel"/></endButton></Dialog></core:FragmentDefinition>',
	"sap/ushell/applications/SpaceDesigner/view/EditDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog id="editDialog" title="{i18n&gt;EditDialog.Title}" type="Message" afterClose=".destroy" state="Warning"><content><Text id="editMessage" text="{/message}"/><core:ComponentContainer id="transportContainer" lifecycle="Application"/></content><beginButton><Button id="editSaveButton" text="{i18n&gt;Button.Save}" press=".onConfirm" type="Emphasized" enabled="{path:\'/validation\',formatter:\'.validate\'}"/></beginButton><endButton><Button id="editCancelButton" text="{i18n&gt;Button.Cancel}" press="onCancel"/></endButton></Dialog></core:FragmentDefinition>',
	"sap/ushell/applications/SpaceDesigner/view/ErrorDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog id="errorDialog" title="{i18n&gt;ErrorDialog.Title}" type="Message" afterClose=".onAfterClose" contentWidth="30rem" state="Error"><content><VBox id="errorDialogMessageWrapper"><Text id="errorDialogMessageText" text="{/message}" class="sapUiSmallMarginBottom"/><Link id="errorDialogMessageLink" text="{i18n&gt;Button.ShowDetails}" visible="{=!${/showDetails}}" press=".onShowDetails"/></VBox><VBox id="errorDialogDetailsWrapper" visible="{/showDetails}"><Text id="errorDialogResponseCodeText" text="{i18n&gt;Label.ResponseCode} {/statusCode} - {/statusText}" class="sapUiSmallMarginBottom"/><Text id="errorDialogDetailsText" text="{i18n&gt;Label.Details}"/><Text id="errorDialogDescriptionText" text="{/description}" renderWhitespace="true"/></VBox></content><buttons><Button id="errorDialogButtonConfirm" text="{i18n&gt;Button.Ok}" press=".onConfirm"/><Button id="errorDialogButtonCopy" text="{i18n&gt;Button.Copy}" press=".onCopy"/></buttons></Dialog></core:FragmentDefinition>',
	"sap/ushell/applications/SpaceDesigner/view/ErrorPage.view.xml":'<mvc:View controllerName="sap.ushell.applications.SpaceDesigner.controller.ErrorPage" height="100%" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m"><MessagePage id="messagePageError" showHeader="false" text="{i18n&gt;ErrorPage.Message}" icon="sap-icon://document"><customDescription><Link text="{i18n&gt;ErrorPage.Link}" press=".onLinkPress"/></customDescription></MessagePage></mvc:View>',
	"sap/ushell/applications/SpaceDesigner/view/SpaceDetail.view.xml":'<mvc:View controllerName="sap.ushell.applications.SpaceDesigner.controller.SpaceDetail" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.f" xmlns:mvc="sap.ui.core.mvc"><f:DynamicPage id="spaceDetail" fitContent="true" class="sapUshellSpaceLayout sapUiNoContentPadding" backgroundDesign="Transparent"><f:title><f:DynamicPageTitle id="dynamicPageTitle"><f:heading><Title id="title" text="{/space/content/title}"/></f:heading><f:expandedContent><HBox displayInline="true" id="hboxExpanded"><ObjectAttribute id="objectAttributeSpaceIdExpanded" title="{i18n&gt;Label.SpaceID}" text="{/space/content/id}"><customData><core:CustomData key="help-id" value="FLPSpace-Designer-SpaceDetail-Header" writeToDom="true"/></customData></ObjectAttribute><ObjectAttribute id="objectAttributeRoleExpanded" visible="false" title="{i18n&gt;Label.AssignedRole}" text="" class="sapUiLargeMarginBegin"/></HBox></f:expandedContent><f:snappedContent><HBox displayInline="true" id="hboxSnapped"><ObjectAttribute id="objectAttributeSpaceIdSnapped" title="{i18n&gt;Label.SpaceID}" text="{/space/content/id}"/><ObjectAttribute id="objectAttributeRoleSnapped" visible="false" title="{i18n&gt;Label.AssignedRole}" text="assigned role" class="sapUiLargeMarginBegin"/></HBox></f:snappedContent><f:actions><Button id="buttonCopy" text="{i18n&gt;Button.Copy}" type="Transparent" press=".onCopy" visible="{SupportedOperationModel&gt;/copySupported}"><customData><core:CustomData key="help-id" value="FLPSpace-Designer-SpaceDetail-Button-CopySpace" writeToDom="true"/></customData></Button><Button id="buttonDelete" text="{i18n&gt;Button.Delete}" type="Transparent" press=".onDelete" visible="{SupportedOperationModel&gt;/deleteSupported}"><customData><core:CustomData key="help-id" value="FLPSpace-Designer-SpaceDetail-Button-DeleteSpace" writeToDom="true"/></customData></Button></f:actions></f:DynamicPageTitle></f:title><f:header><f:DynamicPageHeader id="dynamicPageHeader" pinnable="false"><core:Fragment fragmentName="sap.ushell.applications.SpaceDesigner.view.SpaceInfo" type="XML"/></f:DynamicPageHeader></f:header><f:content><Panel id="panel" height="100%" accessibleRole="Region" backgroundDesign="Transparent" class="sapUiNoContentPadding"><customData><core:CustomData key="help-id" value="FLPSpace-Designer-SpaceDetail-Panel-PageListDisplay" writeToDom="true"/></customData><headerToolbar><OverflowToolbar id="layoutOverflowToolbar" design="Transparent" height="3rem" class="sapUshellSpaceLayoutHeader"><Title id="layoutTitle" class="sapContrastPlus" text="{i18n&gt;Title.Layout}"/><ToolbarSpacer id="layoutToolbarSpacer"/><Button id="layoutButtonEdit" text="{i18n&gt;Button.Edit}" type="Emphasized" press=".onEdit"><customData><core:CustomData key="help-id" value="FLPSpace-Designer-SpaceDetail-Button-Edit" writeToDom="true"/></customData></Button></OverflowToolbar></headerToolbar><content/></Panel></f:content></f:DynamicPage></mvc:View>',
	"sap/ushell/applications/SpaceDesigner/view/SpaceInfo.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.f"><HeaderContainer id="spaceInfoHeaderContainer"><VBox id="spaceInfoDescriptionWrapper"><ObjectAttribute id="spaceInfoDescription" title="{i18n&gt;Label.Description}" text="{/space/content/description}"/></VBox><VBox visible="{/transportSupported}" id="spaceInfoMetadataTransportWrapper"><ObjectAttribute id="spaceInfoPackage" title="{i18n&gt;Label.Package}" text="{/space/metadata/devclass}"/><ObjectAttribute id="spaceInfoWorkbenchRequest" title="{i18n&gt;Label.WorkbenchRequest}" text="{/space/metadata/transportId}" visible="{=!!${/space/metadata/transportId}}"/></VBox><VBox id="spaceInfoMetadataCreatedWrapper"><ObjectAttribute id="spaceInfoCreatedByFullname" title="{i18n&gt;Label.CreatedByFullname}" text="{/space/content/createdByFullname}"/><ObjectAttribute id="spaceInfoCreatedOn" title="{i18n&gt;Label.CreatedOn}" text="{path:\'/space/content/createdOn\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'medium\'}}"/></VBox><VBox id="spaceInfoMetadataModifiedWrapper"><ObjectAttribute id="spaceInfoModifiedByFullname" title="{i18n&gt;Label.ChangedByFullname}" text="{/space/content/modifiedByFullname}"/><ObjectAttribute id="spaceInfoModifiedOn" title="{i18n&gt;Label.ChangedOn}" text="{path:\'/space/content/modifiedOn\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'medium\'}}"/></VBox></HeaderContainer></core:FragmentDefinition>',
	"sap/ushell/applications/SpaceDesigner/view/SpaceOverview.view.xml":'<mvc:View xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" height="100%" controllerName="sap.ushell.applications.SpaceDesigner.controller.SpaceOverview"><Page id="spaceOverview"><customHeader><Bar id="titlebar"><contentLeft><Title id="title" text="{i18n&gt;SpaceOverview.Title}" class="sapUiMediumMarginBegin"><customData><core:CustomData key="help-id" value="FLPSpace-Designer-SpaceOverview-Header" writeToDom="true"/></customData></Title></contentLeft></Bar></customHeader><content><Table class="sapUiMediumMarginBeginEnd sapUiTinyMarginTopBottom sapUiForceWidthAuto" id="table" ariaLabelledBy="title" busy="{/busy}" items="{path:\'/spaces\',key:\'id\',sorter:{path:\'content/modifiedOn\',descending:\'true\'}}" itemPress=".onItemPress" selectionChange=".onSelectionChange" updateFinished=".onTableUpdate" mode="SingleSelectLeft" sticky="ColumnHeaders" noDataText="{i18n&gt;Message.NoSpaces}"><headerToolbar><OverflowToolbar design="Solid" id="overflowToolbar"><Title text="Spaces (0)" level="H2"/><ToolbarSpacer id="toolbarSpacer"/><SearchField id="searchField" showRefreshButton="false" tooltip="{i18n&gt;Tooltip.Search}" search=".onSearch" width="auto"/><Button id="addButton" text="{i18n&gt;Button.Create}" type="Transparent" visible="{SupportedOperationModel&gt;/createSupported}" press=".onAdd"><customData><core:CustomData key="help-id" value="FLPSpace-Designer-SpaceOverview-Button-Create" writeToDom="true"/></customData></Button><Button id="copyButton" text="{i18n&gt;Button.Copy}" type="Transparent" enabled="{buttonStates&gt;/isDeleteAndCopyEnabled}" visible="{SupportedOperationModel&gt;/copySupported}" press=".onCopy"><customData><core:CustomData key="help-id" value="FLPSpace-Designer-SpaceOverview-Button-Copy" writeToDom="true"/></customData></Button><Button id="deleteButton" text="{i18n&gt;Button.Delete}" type="Transparent" enabled="{buttonStates&gt;/isDeleteAndCopyEnabled}" visible="{SupportedOperationModel&gt;/deleteSupported}" press=".onDelete"><customData><core:CustomData key="help-id" value="FLPSpace-Designer-SpaceOverview-Button-Delete" writeToDom="true"/></customData></Button></OverflowToolbar></headerToolbar><columns><Column id="columnSpaceId"><ObjectIdentifier title="{i18n&gt;Column.SpaceID}" text="{i18n&gt;Column.SpaceTitle}"/></Column><Column id="columnSpaceDescription"><Text id="columnTextSpaceDescription" text="{i18n&gt;Column.SpaceDescription}"/></Column><Column id="columnSpaceTransport" width="12%" visible="{/transportSupported}"><ObjectIdentifier title="{i18n&gt;Column.SpacePackage}" text="{i18n&gt;Column.SpaceWorkbenchRequest}"/></Column><Column id="columnSpaceCreated" width="12%"><ObjectIdentifier title="{i18n&gt;Column.SpaceCreatedBy}" text="{i18n&gt;Column.SpaceCreatedOn}"/></Column><Column id="columnSpaceChanged" width="12%"><ObjectIdentifier title="{i18n&gt;Column.SpaceChangedBy}" text="{i18n&gt;Column.SpaceChangedOn}"/></Column><Column id="columnEnd" width="4%" hAlign="End"/></columns><items><ColumnListItem id="columnListItemPage" type="Navigation"><cells><ObjectIdentifier id="objectIdentifierSpaceId" title="{content/id}" text="{content/title}"/></cells><cells><Text id="cellTextSpaceDescription" text="{content/description}"/></cells><cells><ObjectIdentifier id="cellTextSpaceTransport" title="{metadata/devclass}" text="{metadata/transportId}"/></cells><cells><ObjectIdentifier id="cellTextSpaceCreated" title="{content/createdByFullname}" text="{path:\'content/createdOn\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'medium\'}}"/></cells><cells><ObjectIdentifier id="cellTextSpaceChanged" title="{content/modifiedByFullname}" text="{path:\'content/modifiedOn\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'medium\'}}"/></cells><cells><Button id="cellButtonSpaceEdit" press=".onEdit" icon="sap-icon://edit" tooltip="{i18n&gt;Button.Edit}" type="Transparent"/></cells></ColumnListItem></items></Table></content></Page></mvc:View>',
	"sap/ushell/components/appfinder/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"sap.ushell.components.appfinder","applicationVersion":{"version":"1.74.0"},"i18n":"../../renderers/fiori2/resources/resources.properties","ach":"CA-FLP-FE-COR","type":"component","title":"{{Component.AppFinder.Title}}"},"sap.ui":{"fullWidth":true,"hideLightBackground":true,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"dependencies":{"minUI5Version":"1.30","libs":{"sap.m":{}}},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"JS","controlId":"catalogViewMasterDetail","controlAggregation":"detailPages","clearAggregation":false,"async":true},"routes":[]},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/cards/Card.view.xml":'<core:View controllerName="sap.ushell.components.cards.Card" xmlns="sap.m" xmlns:core="sap.ui.core"><GenericTile header="{/data/display_title_text}" subheader="{/data/display_subtitle_text}" press="onPress"><TileContent footer="{i18n&gt;cardTileCaption}"/></GenericTile></core:View>',
	"sap/ushell/components/cards/Configuration.view.xml":'<core:View controllerName="sap.ushell.components.cards.Configuration" height="100%" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:codeeditor="sap.ui.codeeditor"><VBox fitContainer="true" justifyContent="SpaceBetween"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" type="Warning" visible="{/config/displayOriginalLanguageWarning}" text="{parts:[\'i18n&gt;edit_configuration.original_locale_not_fit_message\',\'/config/originalLanguage\',\'/config/sapLogonLanguage\'],\'formatter\':\'.formatter\'}"/><Title text="{i18n&gt;configuration.category.card_manifest}" class="sapUiTinyMargin"/><codeeditor:CodeEditor id="manifestEditor" value="{/data/editorValue}" editable="{/config/manifestEditorEditable}" type="json"><codeeditor:layoutData><FlexItemData growFactor="1"/></codeeditor:layoutData></codeeditor:CodeEditor></VBox></core:View>',
	"sap/ushell/components/homepage/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"sap.ushell.components.homepage","applicationVersion":{"version":"1.74.0"},"i18n":"../../renderers/fiori2/resources/resources.properties","ach":"CA-FLP-FE-COR","type":"component","title":"{{Component.Homepage.Title}}"},"sap.ui":{"fullWidth":true,"hideLightBackground":true,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"dependencies":{"minUI5Version":"1.30","libs":{"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/pages/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"sap.ushell.components.pages","applicationVersion":{"version":"1.74.0"},"i18n":"../../renderers/fiori2/resources/resources.properties","ach":"CA-FLP-FE-COR","type":"component","title":"{{Component.Pages.Title}}"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"rootView":{"viewName":"sap.ushell.components.pages.view.PageRuntime","type":"XML","async":true},"dependencies":{"minUI5Version":"1.72","libs":{"sap.m":{},"sap.f":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/pages/view/PageRuntime.view.xml":'<mvc:View height="100%" controllerName="sap.ushell.components.pages.controller.PageRuntime" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:dnd="sap.ui.core.dnd" xmlns:data="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns:lp="sap.ushell.ui.launchpad"><NavContainer id="pagesRuntimeNavContainer"><NavContainer id="pagesNavContainer" pages="{/pages}"><Page data:pageId="{id}" showHeader="false" backgroundDesign="Transparent" floatingFooter="true"><content><lp:Page edit="{viewSettings&gt;/actionModeActive}" showTitle="true" title="{title}" sections="{path:\'sections\',templateShareable:false}" addSectionButtonPressed=".handleEditModeAction(\'sectionAdd\', $event, ${$source&gt;/}, ${$parameters&gt;/})" enableSectionReordering="{viewSettings&gt;/actionModeActive}" sectionDrop=".handleEditModeAction(\'sectionMove\', $event, ${$source&gt;/}, ${$parameters&gt;/})"><lp:sections><lp:Section title="{title}" class="sapContrastPlus" sizeBehavior="{viewSettings&gt;/sizeBehavior}" visible="{path:\'visualizations\',formatter:\'.formatter._sectionVisibility\'}" visualizations="{path:\'visualizations\',factory:\'._visualizationFactory\'}" enableGridBreakpoints="true" editable="{viewSettings&gt;/actionModeActive}" add=".handleEditModeAction(\'visualizationAdd\', $event, ${$source&gt;/}, ${$parameters&gt;/})" delete=".handleEditModeAction(\'sectionDelete\', $event, ${$source&gt;/}, ${$parameters&gt;/})" reset=".handleEditModeAction(\'sectionReset\', $event, ${$source&gt;/}, ${$parameters&gt;/})" sectionVisibilityChange=".handleEditModeAction(\'sectionVisibilityChange\', $event, ${$source&gt;/}, ${$parameters&gt;/})" titleChange=".handleEditModeAction(\'sectionTitleChange\', $event, ${$source&gt;/}, ${$parameters&gt;/})" enableVisualizationReordering="true" visualizationDrop=".visualizationMove($event, ${$source&gt;/}, ${$parameters&gt;/})"/></lp:sections><lp:dragDropConfig><dnd:DropInfo groupName="Section" targetAggregation="sections" drop=".visualizationMove($event, ${$source&gt;/}, ${$parameters&gt;/})"/></lp:dragDropConfig></lp:Page></content><footer><Bar class="sapUshellDashboardFooter" visible="{viewSettings&gt;/actionModeActive}"><contentRight><Button text="{i18n&gt;PageRuntime.EditMode.Save}" type="Emphasized" press=".handleEditModeAction(\'save\', $event, ${$source&gt;/}, ${$parameters&gt;/})"/><Button text="{i18n&gt;PageRuntime.EditMode.Cancel}" press=".handleEditModeAction(\'cancel\', $event, ${$source&gt;/}, ${$parameters&gt;/})"/></contentRight></Bar></footer></Page></NavContainer><MessagePage id="errorPage" showHeader="false" icon="{errorPage&gt;/icon}" text="{errorPage&gt;/text}" description="{errorPage&gt;/description}"><buttons><Button text="{i18n&gt;PageRuntime.CannotLoadPage.DetailsButton}" visible="{= !!${errorPage&gt;/details} &amp;&amp; !${errorPage&gt;/description}}" press="._pressViewDetailsButton"/><Button text="{i18n&gt;PageRuntime.CannotLoadPage.CopyButton}" visible="{= !!${errorPage&gt;/details} }" press="._copyToClipboard"/></buttons></MessagePage></NavContainer></mvc:View>',
	"sap/ushell/components/shell/MeArea/MeAreaPopover.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover id="sapUshellMeAreaPopover" placement="Bottom" showArrow="true" showHeader="false" class="sapUshellPopupContainer sapUiSizeCompact"><content><List class="sapUshellPopoverList" showSeparators="None" includeItemInSelection="true" items="{path:\'/actions\',factory:\'.meAreaPopoverItemFactory\'}"><headerToolbar><Toolbar style="Clear"><Title level="H5" text="{/userName}"/></Toolbar></headerToolbar></List></content></Popover></core:FragmentDefinition>',
	"sap/ushell/components/shell/MenuBar/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"sap.ushell.components.shell.MenuBar","applicationVersion":{"version":"1.74.0"},"i18n":"../../../renderers/fiori2/resources/resources.properties","type":"component","title":"{{Component.MenuBar.Title}}"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"rootView":{"viewName":"sap.ushell.components.shell.MenuBar.view.MenuBar","type":"XML","async":true},"dependencies":{"minUI5Version":"1.72","libs":{"sap.m":{}}},"models":{},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/MenuBar/view/MenuBar.view.xml":'<View xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="sap.ushell.components.shell.MenuBar.controller.MenuBar"><IconTabHeader showOverflowSelectList="true" items="{menu&gt;/}" selectedKey="{viewConfiguration&gt;/selectedKey}" select=".onMenuItemSelection"><items><IconTabFilter text="{menu&gt;title}" key="{menu&gt;uid}" enabled="{viewConfiguration&gt;/enableMenuBarNavigation}"/></items></IconTabHeader></View>',
	"sap/ushell/components/shell/Notifications/Notifications.view.xml":'<mvc:View controllerName="sap.ushell.components.shell.Notifications.Notifications" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" class="sapUshellNotificationsView"><IconTabBar id="notificationIconTabBar" backgroundDesign="Transparent" headerBackgroundDesign="Transparent" expandable="false" selectedKey="sapUshellNotificationIconTabByDate" select="onTabSelected" class="sapUshellNotificationTabBar"><items><IconTabFilter id="sapUshellNotificationIconTabByDate" key="sapUshellNotificationIconTabByDate" text="{i18n&gt;notificationsSortByDate}"><List id="sapUshellNotificationsListDate" class="sapUshellNotificationsList sapContrast sapContrastPlus sapUshellPopoverList" mode="None" noDataText="{i18n&gt;noNotificationsMsg}" growing="true" growingThreshold="10" growingScrollToLoad="true" updateStarted=".onListUpdateStarted" items="{path:\'/notificationsByDateDescending/aNotifications\',templateShareable:true}"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsListItem" type="XML"/></List></IconTabFilter><IconTabFilter id="sapUshellNotificationIconTabByType" key="sapUshellNotificationIconTabByType" text="{i18n&gt;notificationsSortByType}"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsGroupListItem" type="XML"/></IconTabFilter><IconTabFilter id="sapUshellNotificationIconTabByPrio" key="sapUshellNotificationIconTabByPrio" text="{i18n&gt;notificationsSortByPriority}"><List id="sapUshellNotificationsListPriority" class="sapUshellNotificationsList sapContrast sapContrastPlus sapUshellPopoverList" mode="None" noDataText="{i18n&gt;noNotificationsMsg}" growing="true" growingThreshold="10" growingScrollToLoad="true" updateStarted=".onListUpdateStarted" items="{path:\'/notificationsByPriorityDescending/aNotifications\',templateShareable:true}"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsListItem" type="XML"/></List></IconTabFilter></items></IconTabBar></mvc:View>',
	"sap/ushell/components/shell/Notifications/NotificationsGroupListItem.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><List id="sapUshellNotificationsListType" class="sapUshellNotificationsList sapContrastPlus sapContrast sapUshellPopoverList" mode="SingleSelect" noDataText="{i18n&gt;noNotificationsMsg}" items="{/notificationsByTypeDescending}"><NotificationListGroup title="{GroupHeaderText}" collapsed="{Collapsed}" showEmptyGroup="true" enableCollapseButtonWhenEmpty="true" autoPriority="false" datetime="{path:\'CreatedAt\',formatter:\'sap.ushell.utils.formatDate\'}" priority="{path:\'Priority\',formatter:\'.priorityFormatter\'}" busy="{= ${Busy} ? ${Busy} : false}" buttons="{path:\'Actions\',templateShareable:\'true\',sorter:{path:\'Nature\',descending:\'true\'}}" items="{path:\'aNotifications\',templateShareable:\'true\'}" close="onNotificationGroupItemClose" onCollapse="onNotificationGroupItemCollapse"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsListItem" type="XML"/><buttons><Button press="onNotificationGroupItemButtonPress" text="{GroupActionText}"/></buttons></NotificationListGroup></List></core:FragmentDefinition>',
	"sap/ushell/components/shell/Notifications/NotificationsListItem.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><NotificationListItem class="sapUshellNotificationsListItem sapContrastPlus sapContrast" press="onNotificationItemPress" close="onNotificationItemClose" datetime="{path:\'CreatedAt\',formatter:\'sap.ushell.utils.formatDate\'}" description="{SubTitle}" title="{= ${SensitiveText} ? ${SensitiveText} : ${Text}}" buttons="{path:\'Actions\',sorter:{path:\'Nature\',descending:true},templateShareable:true}" unread="{= !${IsRead}}" busy="{= ${Busy} ? ${Busy} : false}" priority="{path:\'Priority\',formatter:\'.priorityFormatter\'}"><buttons><Button text="{ActionText}" press="onNotificationItemButtonPress"/></buttons></NotificationListItem></core:FragmentDefinition>',
	"sap/ushell/components/shell/ProductSwitch/ProductSwitch.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.f"><ResponsivePopover id="sapUshellProductSwitchPopover" placement="Bottom" showArrow="true" showHeader="false" title="{i18n&gt;productSwitch}" class="sapUshellPopupContainer sapUiSizeCompact"><content><f:ProductSwitch change="onProductItemPress" items="{/}"><f:items><f:ProductSwitchItem title="{title}" src="{visual/icon}" subTitle="{subtitle}" targetSrc="{targetUrl}"/></f:items></f:ProductSwitch></content></ResponsivePopover></core:FragmentDefinition>',
	"sap/ushell/components/shell/UserSettings/FlpSettings.view.xml":'<View controllerName="sap.ushell.components.shell.UserSettings.FlpSettings" width="100%" xmlns:m="sap.m"><m:VBox visible="true" class="sapUiSmallMargin"><m:items><m:HBox><m:items><m:Label text="{i18n&gt;AnchorBarLabel}:" class="sapUshellFlpSettingsLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}" id="anchorBarLabel"/><m:VBox><m:items><m:RadioButtonGroup selectedIndex="{config&gt;/displayMode}" ariaLabelledBy="anchorBarLabel" ariaDescribedBy="anchorBarDescription"><m:buttons><m:RadioButton text="{i18n&gt;anchorBarScrollMode}" class="sapUshellAnchorBarScrollMode" ariaLabelledBy="anchorBarLabel"/><m:RadioButton text="{i18n&gt;anchorBarTabMode}" class="sapUshellAnchorBarTabsMode" ariaLabelledBy="anchorBarLabel"/></m:buttons></m:RadioButtonGroup><m:VBox class="sapUshellFlpSettingsDescriptionBorder"><m:items><m:Text text="{i18n&gt;homePageGroupDisplayDescriptionText}" class="sapUshellFlpSettingsDescription" id="anchorBarDescription"/><m:Text text="{i18n&gt;homePageGroupDisplayDescriptionText_secondParagraph}" class="sapUshellFlpSettingsDescription" visible="false"/></m:items></m:VBox></m:items></m:VBox></m:items></m:HBox></m:items></m:VBox></View>',
	"sap/ushell/components/shell/UserSettings/Spaces.view.xml":'<View controllerName="sap.ushell.components.shell.UserSettings.Spaces" xmlns="sap.m"><VBox class="sapUiSmallMargin"><HBox><Label id="spacesModeLabel" text="{i18n&gt;spacesModeLabel}:" labelFor="spacesModeSwitch" class="sapUshellFlpSettingsLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}"/><VBox><Switch id="spacesModeSwitch" type="AcceptReject" change=".setCurrentSpacesMode" state="{config&gt;/isSpacesEnabled}"/><VBox class="sapUshellFlpSettingsDescriptionBorder"><Text id="anchorBarDescription" class="sapUshellFlpSettingsDescription" text="{i18n&gt;spacesModeDescriptionText}"/></VBox></VBox></HBox></VBox></View>',
	"sap/ushell/components/shell/UserSettings/ThemeSelector.view.xml":'<View controllerName="sap.ushell.components.shell.UserSettings.ThemeSelector" xmlns="sap.m" xmlns:core="sap.ui.core"><IconTabBar id="idIconTabBar" applyContentPadding="true" expandable="false"><items><IconTabFilter text="{i18n&gt;AppearanceThemeMenu}"><List items="{path:\'/options\'}" includeItemInSelection="true" mode="SingleSelectMaster" selectionChange="onSelectHandler" id="themeList"><items><CustomListItem selected="{isSelected}" visible="{isVisible}" class="sapUshellAppearanceCustomListItem"><customData><core:CustomData key="themeid" value="{id}" writeToDom="true"/></customData><HBox><HBox class="sapUshellAppearanceItemViewLeft"><core:Icon src="{parts:[{path:\'id\'}],formatter:\'.getIconFormatter\'}" color="{config&gt;/sapUiContentIconColor}" size="1.75rem" class="sapUshellAppearanceIcon"/><Text text="{name}" class="sapUshellAppearanceItemText"><layoutData><FlexItemData styleClass="sapUshellAppearanceFlexItemText"/></layoutData></Text></HBox><HBox class="sapUshellAppearanceItemViewRight"><core:Icon src="sap-icon://sys-enter-2" visible="{isSelected}" color="{config&gt;/sapUiContentIconColor}" size="1.375rem"/></HBox></HBox></CustomListItem></items></List></IconTabFilter><IconTabFilter text="{i18n&gt;AppearanceLayoutAndBehaviorMenu}" id="DisplaySettingsTab"><HBox alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label labelFor="contentDensitySwitch" text="{i18n&gt;AppearanceContentDensityLabel}:" class="sapUshellAppearanceLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}"/><VBox alignItems="Baseline" class="sapUshellAppearanceContentDensityText"><Switch type="Default" id="contentDensitySwitch" class="sapUshellAppearanceSwitchButton" tooltip="{i18n&gt;AppearanceContentDensityTooltip}" change="setCurrentContentDensity" state="{config&gt;/isCozyContentMode}" enabled="{config&gt;/isContentDensitySwitchEnable}"/><Text text="{i18n&gt;appearanceCompactCozyDescriptionText}" class="sapUshellFlpSettingsDescription"/></VBox></HBox><HBox visible="{config&gt;/sizeBehaviorConfigurable}" alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label text="{i18n&gt;AppearanceTileSizeLabel}:" class="sapUshellAppearanceLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}" labelFor="setCurrentTileSize" id="sapUshellAppearanceTileSizeLabel"/><VBox class="sapUshellAppearanceTileSizeText"><RadioButtonGroup select="setCurrentTileSize" selectedIndex="{config&gt;/tileSize}" id="tileSizeRadioButtonGroup"><buttons><RadioButton text="{i18n&gt;AppearanceTileSizeSmall}" class="sapUshellAppearanceTileSizeSmall" ariaLabelledBy="sapUshellAppearanceTileSizeLabel"/><RadioButton text="{i18n&gt;AppearanceTileSizeLarge}" class="sapUshellAppearanceTileSizeLarge" ariaLabelledBy="sapUshellAppearanceTileSizeLabel"/></buttons></RadioButtonGroup><Text text="{i18n&gt;appearanceTileSizeDescriptionText}" class="sapUshellFlpSettingsDescription"/></VBox></HBox><HBox visible="{darkMode&gt;/enabled}" alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label labelFor="{= ${darkMode&gt;/detectionSupported} ? \'darkModeDetectionSwitcher\' : \'darkModeSwitcher\'}" text="{i18n&gt;AppearanceDarkModeLabel}:" class="sapUshellAppearanceLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}"/><VBox visible="{darkMode&gt;/detectionSupported}" alignItems="Baseline" class="sapUshellAppearanceContentDensityText"><Switch type="Default" id="darkModeDetectionSwitcher" class="sapUshellAppearanceSwitchButton" tooltip="{i18n&gt;AppearanceDarkModeDetectionTooltip}" change="changeSystemModeDetection" state="{darkMode&gt;/detectionEnabled}"/><Text text="{i18n&gt;appearanceDarkModeDetectionText}" class="sapUshellFlpSettingsDescription"/><MessageStrip text="{i18n&gt;appearanceDarkModeWarning}" type="Warning" showIcon="true" class="sapUshellFlpSettingsWarning"/></VBox><VBox visible="{=!${darkMode&gt;/detectionSupported}}" alignItems="Baseline" class="sapUshellAppearanceContentDensityText"><Switch type="Default" id="darkModeSwitcher" class="sapUshellAppearanceSwitchButton" tooltip="{i18n&gt;AppearanceDarkModeSwitchTooltip}" change="changeThemeMode" state="{darkMode&gt;/isDarkThemeApplied}"/><Text text="{i18n&gt;appearanceDarkModeSwitchText}" class="sapUshellFlpSettingsDescription"/><MessageStrip text="{i18n&gt;appearanceDarkModeWarning}" type="Warning" showIcon="true" class="sapUshellFlpSettingsWarning"/></VBox></HBox></IconTabFilter></items></IconTabBar></View>',
	"sap/ushell/components/shell/UserSettings/UserSettings.view.xml":'<mvc:View controllerName="sap.ushell.components.shell.UserSettings" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core"><Dialog id="userSettingsDialog" class="sapUshellUserSetting" showHeader="false" contentHeight="42rem" contentWidth="58rem" afterClose="._afterClose" stretch="{device&gt;/system/phone}"><buttons><Button id="userSettingSaveButton" text="{i18n&gt;saveBtn}" type="Emphasized" press="._handleSettingsSave"/><Button id="userSettingCancelButton" text="{i18n&gt;cancelBtn}" press="._dialogCancelButtonHandler"/></buttons><content><Page class="sapUshellSettingsPage" showHeader="true"><customHeader><Bar id="settingsBar"><contentLeft><ToggleButton id="userSettingsNavBackButton" icon="{= ${device&gt;/system/phone} ? \'sap-icon://nav-back\' : \'sap-icon://menu2\'}" press="._navBackButtonPressHandler" tooltip="{i18n&gt;ToggleButtonShow}" visible="false"/></contentLeft><contentMiddle><Text text="{i18n&gt;userSettings}"/></contentMiddle></Bar></customHeader><content><SplitApp id="settingsApp" defaultTransitionNameDetail="show" afterMasterClose="._handleNavButton" afterMasterOpen="._handleNavButton"><masterPages><Page id="userSettingMaster" class="sapUshellUserSettingMaster" showHeader="false"><content><List id="userSettingEntryList" items="{path:\'entries&gt;/entries\',factory:\'._createListEntry\'}" mode="SingleSelectMaster" select="._itemPress"/></content></Page></masterPages></SplitApp></content></Page></content></Dialog></mvc:View>',
	"sap/ushell/components/shell/UserSettings/userAccount/UserAccountImgConsentSelector.fragment.xml":'<core:FragmentDefinition height="100%" width="100%" xmlns:m="sap.m" xmlns:core="sap.ui.core"><m:VBox><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}" id="userImgConsentEnableFlexBox"><m:Label text="{i18n&gt;imgConsentMsg}:" class="sapUshellUserAccountLabel"/></m:FlexBox><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}"><m:Link text="{i18n&gt;userImageConsentDialogShowTermsOfUse}" textAlign="{config&gt;/textAlign}" class="sapUshellUserAccountLabel" press="termsOfUserPress" id="termsOfUseLink"/><m:Label text="{i18n&gt;userImageConsentText}:" visible="false" id="sapUshellUserImageConsentSwitchLabel"/></m:FlexBox><m:FlexBox direction="{config&gt;/textDirection}" id="termsOfUseTextFlexBox" visible="false"><m:Text text="{i18n&gt;userImageConsentDialogTermsOfUse}" class="sapUshellUserConsentDialogTerms"/></m:FlexBox></m:VBox></core:FragmentDefinition>',
	"sap/ushell/components/shell/UserSettings/userAccount/UserAccountSelector.view.xml":'<View controllerName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector" xmlns="sap.m" xmlns:core="sap.ui.core"><IconTabBar id="idIconTabBar" applyContentPadding="true"><items><IconTabFilter text="{i18n&gt;UserAccountFld}"><core:Fragment fragmentName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountSetting" type="XML"/></IconTabFilter><IconTabFilter visible="{config&gt;/imgConsentEnabled}" text="{i18n&gt;ProfileImgId}"><core:Fragment fragmentName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountImgConsentSelector" type="XML"/></IconTabFilter></items></IconTabBar></View>',
	"sap/ushell/components/shell/UserSettings/userAccount/UserAccountSetting.fragment.xml":'<core:FragmentDefinition height="100%" width="100%" xmlns:m="sap.m" xmlns:core="sap.ui.core"><m:VBox class="sapUiSmallMargin"><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}"><m:Label text="{i18n&gt;UserAccountNameFld}:" class="sapUshellUserAccountLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}" labelFor="userAccountuserName"/><m:Input value="{config&gt;/name}" id="userAccountuserName" class="sapUshellUserAccountInput" editable="false"/></m:FlexBox><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}"><m:Label text="{i18n&gt;UserAccountEmailFld}:" class="sapUshellUserAccountLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}" labelFor="userAccountuserMail"/><m:Input value="{config&gt;/mail}" id="userAccountuserMail" class="sapUshellUserAccountInput" editable="false"/></m:FlexBox><m:FlexBox alignItems="{config&gt;/flexAlignItems}" direction="{config&gt;/textDirection}"><m:Label text="{i18n&gt;UserAccountServerFld}:" class="sapUshellUserAccountLabel" width="{config&gt;/labelWidth}" textAlign="{config&gt;/textAlign}" labelFor="userAccountuserServer"/><m:Input value="{config&gt;/server}" id="userAccountuserServer" class="sapUshellUserAccountInput" editable="false"/></m:FlexBox></m:VBox></core:FragmentDefinition>',
	"sap/ushell/components/shell/UserSettings/userAccount/UserAccountSetting.view.xml":'<View controllerName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m"><core:Fragment fragmentName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountSetting" type="XML"/></View>',
	"sap/ushell/components/tiles/action/ActionTile.view.xml":'<View controllerName="sap.ushell.components.tiles.action.ActionTile" height="100%" width="100%" xmlns="sap.ui.core" xmlns:ushell="sap.ushell.ui.tile"><ushell:TileBase id="actionTile" title="{i18n&gt;tile.display.action_chip}" subtitle="{/displayText}" icon="sap-icon://action" press="onPress"/></View>',
	"sap/ushell/components/tiles/action/Configuration.view.xml":'<core:View controllerName="sap.ushell.components.tiles.action.Configuration" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:commonLayout="sap.ui.commons.layout" xmlns="sap.m" xmlns:table="sap.ui.table" xmlns:common="sap.ui.commons"><form:Form id="configuration" maxContainerCols="2" minWidth="1024" editable="true"><form:layout><form:ResponsiveGridLayout/></form:layout><form:FormContainer id="categoryChipConfiguration" title="{i18n&gt;configuration.category.action_chip_configuration}"><form:FormElement label="{i18n&gt;configuration.semantic_object}"><Input id="semantic_objectInput" width="100%" tooltip="{i18n&gt;configuration.semantic_object.tooltip}" maxLength="30" liveChange="onConfigurationInputChange" valueHelpRequest="onValueHelpRequest" showValueHelp="true" showSuggestion="true" value="{/value}" enabled="{/config/editable}"/></form:FormElement><form:FormElement label="{i18n&gt;configuration.semantic_action}"><Input id="semantic_actionInput" value="{/config/semantic_action}" maxLength="50" liveChange="onConfigurationInputChange" enabled="{/config/editable}" valueHelpRequest="onActionValueHelpRequest" showValueHelp="true" showSuggestion="true" width="100%" tooltip="{i18n&gt;configuration.semantic_action.tooltip}"/></form:FormElement></form:FormContainer><form:FormContainer id="categoryTargetApplication" title="{i18n&gt;configuration.category.target_application}"><form:FormElement id="targetType" label="{i18n&gt;configuration.target_applicationType}"><ComboBox id="targetTypeInput" selectedKey="{/config/navigation_provider}" enabled="{/config/editable}" selectionChange="onApplicationTypeChange"/></form:FormElement><form:FormElement id="application_description" label="{i18n&gt;configuration.target_application.description}"><Input id="target_application_descriptionInput" value="{/config/display_title_text}" liveChange="onConfigurationInputChange" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_application.description.tooltip}"/></form:FormElement><form:FormElement id="application_url" label="{i18n&gt;configuration.target_application.url}"><Input id="target_application_urlInput" value="{/config/url}" enabled="{/config/editable}" maxLength="512" liveChange="onConfigurationInputChange" width="100%" tooltip="{i18n&gt;configuration.target_application.url.tooltip}"/></form:FormElement><form:FormElement id="application_component" label="{i18n&gt;configuration.target_application.component}"><Input id="target_application_componentInput" value="{/config/ui5_component}" enabled="{/config/editable}" liveChange="onConfigurationInputChange" width="100%" tooltip="{i18n&gt;configuration.target_application.component.tooltip}"/></form:FormElement><form:FormElement id="navigation_provider_role" label="{i18n&gt;configuration.navigation_provider_role}"><Input id="navigation_provider_roleInput" valueHelpRequest="onRoleValueHelpRequest" showValueHelp="true" showTableSuggestionValueHelp="true" enabled="{/config/editable}" showSuggestion="true" value="{/value}" width="100%" maxLength="10" class="sapUshellTargetMappingToUpperCase" tooltip="{i18n&gt;configuration.navigation_provider_role.tooltip}" liveChange="onConfigurationInputChange"><suggestionColumns><Column hAlign="Begin" popinDisplay="Inline" demandPopin="true"><Label text="{i18n&gt;configuration.navigation_provider_role}"/></Column><Column hAlign="Begin" popinDisplay="Inline" demandPopin="true"><Label text="{i18n&gt;configuration.navigation_provider_instance}"/></Column></suggestionColumns></Input></form:FormElement><form:FormElement id="navigation_provider_instance" label="{i18n&gt;configuration.navigation_provider_instance}"><Input id="navigation_provider_instanceInput" value="{/value}" width="100%" maxLength="32" valueHelpRequest="onInstanceValueHelpRequest" enabled="{/config/editable}" showValueHelp="true" showSuggestion="true" suggest="instanceSuggest" tooltip="{i18n&gt;configuration.navigation_provider_instance.tooltip}" liveChange="onConfigurationInputChange" class="sapUshellTargetMappingToUpperCase"/></form:FormElement><form:FormElement id="target_application_alias" label="{i18n&gt;configuration.target_application_alias}"><Input id="target_application_aliasInput" value="{/value}" width="100%" valueHelpRequest="onAliasValueHelpRequest" enabled="{/config/editable}" showValueHelp="true" showSuggestion="true" suggest="aliasSuggest" tooltip="{i18n&gt;configuration.target_application_alias.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_application_id" label="{i18n&gt;configuration.target_application_id}"><Input id="target_application_idInput" value="{/config/target_application_id}" width="100%" maxLength="32" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_application_id.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_transaction" label="{i18n&gt;configuration.target_transaction}"><Input id="target_transactionInput" value="{/config/transaction/code}" width="100%" maxLength="20" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_transaction.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_wcf_application_id" label="{i18n&gt;configuration.target_wcf.application_id}"><Input id="target_wcf_application_idInput" value="{/config/wcf/application_id}" width="100%" maxLength="30" enabled="{/config/editable}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_web_dynpro_application" label="{i18n&gt;configuration.target_web_dynpro.application}"><Input id="target_web_dynpro_applicationInput" value="{/config/web_dynpro/application}" width="100%" maxLength="30" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_web_dynpro_application.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_web_dynpro_configuration" label="{i18n&gt;configuration.target_web_dynpro.configuration}"><Input id="target_web_dynpro_configurationInput" value="{/config/web_dynpro/configuration}" width="100%" maxLength="32" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_web_dynpro_application.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_system_alias" label="{i18n&gt;configuration.target_system_alias}"><Input id="target_system_aliasInput" value="{/config/target_system_alias}" width="100%" maxLength="30" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_system_alias.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="application_type_deprecated" label=""><MessageStrip text="{i18n&gt;applicationTypeDeprecated}" type="Warning" showIcon="true"/></form:FormElement></form:FormContainer><form:FormContainer id="categoryGeneral" title="{i18n&gt;configuration.category.general}"><form:layoutData><layout:GridData span="L12 M12 S12"/></form:layoutData><form:FormElement label="{i18n&gt;configuration.display_info_text}"><Input id="additionalInfo" value="{/config/display_info_text}" enabled="{/config/editable}" width="100%" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement label="{i18n&gt;configuration.form_factor}" tooltip="{i18n&gt;configuration.form_factor.tooltip}"><CheckBox id="desktopCB" text="{i18n&gt;configuration.form_factor_desktop}" select="onFormFactorChange" selected="{/config/desktopChecked}" enabled="{/config/manualFormFactor}"/><CheckBox id="tabletCB" text="{i18n&gt;configuration.form_factor_tablet}" select="onFormFactorChange" selected="{/config/tabletChecked}" enabled="{/config/manualFormFactor}"/><CheckBox id="phoneCB" text="{i18n&gt;configuration.form_factor_phone}" select="onFormFactorChange" selected="{/config/phoneChecked}" enabled="{/config/manualFormFactor}"/></form:FormElement><form:FormElement label="{i18n&gt;configuration.signature.table.title}"><VBox><table:Table id="mappingSignatureTable" rows="{/config/rows}" selectionBehavior="Row" selectionMode="Multi" visibleRowCount="5" enableColumnReordering="false" rowHeight="30px"><table:Column id="nameCol" width="82px"><Label text="{i18n&gt;configuration.signature.table.name}"/><table:template><common:TextField value="{name}" editable="{editable}" placeholder="{i18n&gt;configuration.signature.table.nameFieldLbl}" change="checkDuplicateNames"/></table:template></table:Column><table:Column id="mandatoryCol" width="92px" hAlign="Center"><Label text="{i18n&gt;configuration.signature.table.mandatory}"/><table:template><common:CheckBox checked="{mandatory}" editable="{editable}" change="handleMandatoryChange"/></table:template></table:Column><table:Column id="valueCol" width="85px"><Label text="{i18n&gt;configuration.signature.table.value}"/><table:template><common:TextField value="{value}" editable="{editable}" enabled="{valEnabled}"/></table:template></table:Column><table:Column id="isRegExCol" width="162px" hAlign="Center"><Label text="{i18n&gt;configuration.signature.table.isRegEx}"/><table:template><common:CheckBox checked="{isRegularExpression}" editable="{editable}" enabled="{valEnabled}"/></table:template></table:Column><table:Column id="defValueCol" width="110px"><Label text="{i18n&gt;configuration.signature.table.defaultValue}"/><table:template><common:TextField value="{defaultValue}" editable="{editable}" enabled="{defValEnabled}"/></table:template></table:Column><table:Column id="renameToCol" width="82px" visible="{= ${/config/navigation_provider} !== \'LPD\' }"><Label text="{i18n&gt;configuration.signature.table.renameTo}" tooltip="{i18n&gt;configuration.signature.table.renameTo.tooltip}"/><table:template><common:TextField value="{rename_to}" editable="{editable}"/></table:template></table:Column></table:Table><commonLayout:MatrixLayout><commonLayout:MatrixLayoutRow><commonLayout:MatrixLayoutCell><common:CheckBox id="isUnknownAllowed" class="" enabled="{/config/editable}" text="{i18n&gt;configuration.signature.table.allowUndefined}" checked="{/config/isUnknownAllowed}" width="400px"/></commonLayout:MatrixLayoutCell></commonLayout:MatrixLayoutRow><commonLayout:MatrixLayoutRow><commonLayout:MatrixLayoutCell hAlign="Right"><common:Button id="addRow" enabled="{/config/editable}" text="{i18n&gt;configuration.signature.table.add}" press="addRow" width="100px"/><common:Button id="deleteRow" enabled="{/config/editable}" text="{i18n&gt;configuration.signature.table.delete}" press="deleteRow" width="100px"/></commonLayout:MatrixLayoutCell></commonLayout:MatrixLayoutRow></commonLayout:MatrixLayout></VBox></form:FormElement></form:FormContainer></form:Form></core:View>',
	"sap/ushell/components/tiles/applauncher/Configuration.view.xml":'<core:View controllerName="sap.ushell.components.tiles.applauncher.Configuration" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:table="sap.ui.table" xmlns:clayout="sap.ui.commons.layout" xmlns:common="sap.ui.commons"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" visible="false"/><form:SimpleForm id="configuration" maxContainerCols="2" minWidth="1024" editable="true"><form:content><core:Title id="categoryCommon" text="{i18n&gt;configuration.category.general}"/><Label text="{i18n&gt;configuration.display_title_text}"/><Input id="titleInput" value="{/config/display_title_text}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.display_title_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_subtitle_text}"/><Input id="subtitleInput" value="{/config/display_subtitle_text}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.display_subtitle_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.keywords}"/><Input id="keywordsInput" value="{/config/display_search_keywords}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.keywords.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_icon_url}"/><Input id="iconInput" value="{/config/display_icon_url}" enabled="{/config/editable}" placeholder="sap-icon://inbox" tooltip="{i18n&gt;configuration.display_icon_url.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onIconValueHelpRequest" showValueHelp="true"/><Label text="{i18n&gt;configuration.display_info_text}"/><Input id="infoInput" value="{/config/display_info_text}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.display_info_text.tooltip}" editable="{/config/isLocaleSuitable}"/><core:Title id="categoryNavigation" text="{i18n&gt;configuration.category.navigation}"/><Label text="{i18n&gt;configuration.navigation_use_semantic_object}"/><CheckBox id="useLpdCheckbox" selected="{/config/navigation_use_semantic_object}" tooltip="{i18n&gt;configuration.navigation_use_semantic_object.tooltip}" select="onCheckBoxChange" enabled="{/config/editable}"/><Label text="{i18n&gt;configuration.semantic_object}"/><Input id="navigation_semantic_objectInput" width="100%" tooltip="{i18n&gt;configuration.semantic_object.tooltip}" maxLength="30" liveChange="onConfigurationInputChange" valueHelpRequest="onValueHelpRequest" showValueHelp="true" showSuggestion="true" enabled="{= ${/enabled} &amp;&amp; ${/config/editable}}" value="{/value}"/><Label text="{i18n&gt;configuration.navigation_semantic_action}"/><Input id="navigation_semantic_actionInput" value="{/config/navigation_semantic_action}" width="100%" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" maxLength="50" valueHelpRequest="onActionValueHelpRequest" showValueHelp="true" showSuggestion="true" tooltip="{i18n&gt;configuration.navigation_semantic_action.tooltip}" liveChange="onConfigurationInputChange"/><Label text="{i18n&gt;configuration.navigation_semantic_parameters}"/><Input id="navigation_semantic_parametersInput" value="{/config/navigation_semantic_parameters}" width="100%" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_parameters.tooltip}"/><Label text="{i18n&gt;configuration.navigation_target_url}"/><Input id="targetUrl" value="{/config/navigation_target_url}" type="Url" width="100%" tooltip="{i18n&gt;configuration.navigation_target_url.tooltip}"/><Label/><core:Title id="categoryTileActions" text="{i18n&gt;configuration.category.tile_actions}"/><table:Table id="tileActions" rows="{/config/tile_actions_rows}" selectionBehavior="Row" selectionMode="Multi" visibleRowCount="3" enableColumnReordering="false" rowHeight="30px"><table:Column id="menuItem" width="80px" tooltip="{i18n&gt;configuration.tile_actions.table.menu_item_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.menu_item}"/><table:template><common:TextField value="{menu_title}" editable="{editable}" valueState="{valueState}"/></table:template></table:Column><table:Column id="targetType" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.target_type_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.target_type}"/><table:template><common:ComboBox id="targetTypeCB" value="{target_type}" editable="{editable}" change="handleTargetTypeChange"/></table:template></table:Column><table:Column id="navigationTarget" width="162px" tooltip="{i18n&gt;configuration.tile_actions.table.navigation_target_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.navigation_target}"/><table:template><Input liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionValueHelp" showValueHelp="{isTargetTypeIntent}" showSuggestion="{isTargetTypeIntent}" value="{navigation_target}" editable="{editable}"/></table:template></table:Column><table:Column id="action" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.action_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.action}"/><table:template><common:TextField value="{action}" enabled="{isTargetTypeIntent}" editable="{editable}"/></table:template></table:Column><table:Column id="icon" width="110px" tooltip="{i18n&gt;configuration.tile_actions.table.icon_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.icon}"/><table:template><Input value="{icon}" placeholder="sap-icon://inbox" editable="{editable}" valueStateText="{iconValueStateText}" valueState="{iconValueState}" liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionIconValueHelp" showValueHelp="true"/></table:template></table:Column></table:Table><Label/><clayout:MatrixLayout><clayout:MatrixLayoutRow><clayout:MatrixLayoutCell hAlign="End"><common:Button id="addRow" text="{i18n&gt;configuration.tile_actions.table.add}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.add_tooltip}" press="addRow" width="100px"/><common:Button id="deleteRow" text="{i18n&gt;configuration.tile_actions.table.remove}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.remove_tooltip}" press="deleteRow" width="100px"/></clayout:MatrixLayoutCell></clayout:MatrixLayoutRow></clayout:MatrixLayout></form:content></form:SimpleForm><HBox visible="false"><Dialog id="selectIconDialog" leftButton="ok" rightButton="cancel" title="{i18n&gt;configuration.select_icon}"><content><layout:ResponsiveFlowLayout id="icons"/><HBox visible="true"><Button id="ok" enabled="{/config/ok.enabled}" text="{i18n&gt;configuration.ok}"/><Button id="cancel" text="{i18n&gt;configuration.cancel}" press="onSelectIconClose"/></HBox></content></Dialog></HBox></core:View>',
	"sap/ushell/components/tiles/applauncherdynamic/Configuration.view.xml":'<core:View controllerName="sap.ushell.components.tiles.applauncherdynamic.Configuration" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:table="sap.ui.table" xmlns:clayout="sap.ui.commons.layout" xmlns:common="sap.ui.commons"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" visible="false"/><form:SimpleForm id="configuration" maxContainerCols="8" minWidth="1024" editable="true"><form:content><core:Title id="categoryCommon" text="{i18n&gt;configuration.category.general}"/><Label text="{i18n&gt;configuration.display_title_text}"/><Input id="titleInput" value="{/config/display_title_text}" width="100%" tooltip="{i18n&gt;configuration.display_title_text.tooltip}" enabled="{/config/editable}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_subtitle_text}"/><Input id="subtitleInput" value="{/config/display_subtitle_text}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_subtitle_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.keywords}"/><Input id="keywordsInput" value="{/config/display_search_keywords}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.keywords.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_icon_url}"/><Input id="iconInput" value="{/config/display_icon_url}" enabled="{/config/editable}" placeholder="sap-icon://inbox" tooltip="{i18n&gt;configuration.display_icon_url.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onIconValueHelpRequest" showValueHelp="true"/><Label text="{i18n&gt;configuration.display_info_text}"/><Input id="infoInput" value="{/config/display_info_text}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_info_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_number_unit}"/><Input id="number_unitInput" value="{/config/display_number_unit}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_number_unit.tooltip}"/><core:Title id="categoryDynamicData" text="{i18n&gt;configuration.category.dynamic_data}"/><Label text="{i18n&gt;configuration.service_url}"/><Input id="serviceUrlInput" value="{/config/service_url}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.service_url.tooltip}"/><Label text="{i18n&gt;configuration.service_refresh_interval}"/><Input id="refreshInput" value="{/config/service_refresh_interval}" type="Number" enabled="{/config/editable}" placeholder="{i18n&gt;configuration.seconds}" tooltip="{i18n&gt;configuration.seconds.tooltip}"/><core:Title id="categoryNavigation" text="{i18n&gt;configuration.category.navigation}"/><Label text="{i18n&gt;configuration.navigation_use_semantic_object}"/><CheckBox id="useLpdCheckbox" selected="{/config/navigation_use_semantic_object}" select="onCheckBoxChange" tooltip="{i18n&gt;configuration.navigation_use_semantic_object.tooltip}" enabled="{/config/editable}"/><Label text="{i18n&gt;configuration.semantic_object}"/><Input id="navigation_semantic_objectInput" width="100%" tooltip="{i18n&gt;configuration.semantic_object.tooltip}" maxLength="30" liveChange="onConfigurationInputChange" valueHelpRequest="onValueHelpRequest" showValueHelp="true" showSuggestion="true" enabled="{= ${/enabled} &amp;&amp; ${/config/editable}}" value="{/value}"/><Label text="{i18n&gt;configuration.navigation_semantic_action}"/><Input id="navigation_semantic_actionInput" value="{/config/navigation_semantic_action}" width="100%" maxLength="50" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_action.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onActionValueHelpRequest" showValueHelp="true" showSuggestion="true"/><Label text="{i18n&gt;configuration.navigation_semantic_parameters}"/><Input id="navigation_semantic_parametersInput" value="{/config/navigation_semantic_parameters}" width="100%" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_parameters.tooltip}"/><Label text="{i18n&gt;configuration.navigation_target_url}"/><Input id="targetUrl" value="{/config/navigation_target_url}" type="Url" width="100%" tooltip="{i18n&gt;configuration.navigation_target_url.tooltip}"/><core:Title id="categoryTileActions" text="{i18n&gt;configuration.category.tile_actions}"/><table:Table id="tileActions" rows="{/config/tile_actions_rows}" selectionBehavior="Row" selectionMode="Multi" visibleRowCount="3" enableColumnReordering="false" rowHeight="30px"><table:Column id="menuItem" width="80px" tooltip="{i18n&gt;configuration.tile_actions.table.menu_item_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.menu_item}"/><table:template><common:TextField value="{menu_title}" enabled="{editable}" valueState="{valueState}"/></table:template></table:Column><table:Column id="targetType" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.target_type_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.target_type}"/><table:template><common:ComboBox id="targetTypeCB" value="{target_type}" enabled="{editable}" change="handleTargetTypeChange"/></table:template></table:Column><table:Column id="navigationTarget" width="162px" tooltip="{i18n&gt;configuration.tile_actions.table.navigation_target_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.navigation_target}"/><table:template><Input liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionValueHelp" showValueHelp="{isTargetTypeIntent}" showSuggestion="{isTargetTypeIntent}" value="{navigation_target}" enabled="{editable}"/></table:template></table:Column><table:Column id="action" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.action_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.action}"/><table:template><common:TextField value="{action}" enabled="{isTargetTypeIntent}"/></table:template></table:Column><table:Column id="icon" width="110px" tooltip="{i18n&gt;configuration.tile_actions.table.icon_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.icon}"/><table:template><Input value="{icon}" placeholder="sap-icon://inbox" enabled="{/config/editable}" valueState="{iconValueState}" valueStateText="{iconValueStateText}" liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionIconValueHelp" showValueHelp="true"/></table:template></table:Column></table:Table><Label/><clayout:MatrixLayout><clayout:MatrixLayoutRow><clayout:MatrixLayoutCell hAlign="End"><common:Button id="addRow" text="{i18n&gt;configuration.tile_actions.table.add}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.add_tooltip}" press="addRow" width="100px"/><common:Button id="deleteRow" text="{i18n&gt;configuration.tile_actions.table.remove}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.remove_tooltip}" press="deleteRow" width="100px"/></clayout:MatrixLayoutCell></clayout:MatrixLayoutRow></clayout:MatrixLayout></form:content></form:SimpleForm><HBox visible="false"><Dialog id="selectIconDialog" leftButton="ok" rightButton="cancel" title="{i18n&gt;configuration.select_icon}"><content><layout:ResponsiveFlowLayout id="icons"/><HBox visible="true"><Button id="ok" enabled="{/config/ok.enabled}" text="{i18n&gt;configuration.ok}"/><Button id="cancel" text="{i18n&gt;configuration.cancel}" press="onSelectIconClose"/></HBox></content></Dialog></HBox></core:View>',
	"sap/ushell/components/tiles/cdm/applauncher/manifest.json":'{"_version":"1.12.0","sap.flp":{"type":"tile","tileSize":"1x1"},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncher","type":"component","applicationVersion":{"version":"1.0.0"},"title":"{{title}}","tags":{"keywords":[]},"ach":"CA-FE-FLP-COR"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncher","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncher.StaticTile","type":"JS"},"handleValidation":false,"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json":'{"_version":"1.1.0","sap.flp":{"type":"tile","tileSize":"1x1"},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncherdynamic","_version":"1.0.0","type":"component","applicationVersion":{"version":"1.0.0"},"title":"{{title}}","description":"","tags":{"keywords":[]},"ach":"CA-FLP-FE-COR"},"sap.ui":{"_version":"1.1.0","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncherdynamic","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile","type":"JS"},"handleValidation":false}}',
	"sap/ushell/manifest.json":'{"_version":"1.9.0","sap.app":{"id":"sap.ushell","type":"library","embeds":["applications/PageComposer","applications/SpaceDesigner","components/appfinder","components/factsheet","components/homepage","components/pages","components/shell/MeArea","components/shell/MenuBar","components/shell/Notifications","components/shell/ProductSwitch","components/shell/Search","components/shell/UserImage","components/shell/UserSettings","components/tiles/cdm/applauncher","components/tiles/cdm/applauncherdynamic","plugins/appwarmup","plugins/ghostapp","plugins/rta-personalize","plugins/rta","renderers/fiori2/search/container"],"applicationVersion":{"version":"1.74.0"},"title":"SAP library: sap.ushell","description":"SAP library: sap.ushell","resources":"resources.json","offline":true,"openSourceComponents":[{"name":"touchpunch","packagedWithMySelf":true,"version":"0.0.0"},{"name":"resize_event","packagedWithMySelf":true,"version":"0.0.0"}]},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.74","libs":{"sap.ui.core":{"minVersion":"1.74.0"},"sap.ui.layout":{"minVersion":"1.74.0"},"sap.m":{"minVersion":"1.74.0"},"sap.ui.table":{"minVersion":"1.74.0","lazy":true}}},"library":{"i18n":false}}}',
	"sap/ushell/plugins/appwarmup/manifest.json":'{"_version":"1.1.0","sap.app":{"_version":"1.1.0","id":"sap.ushell.plugins.appwarmup","type":"component","applicationVersion":{"version":"1.0.0"}},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.54.0","libs":{"sap.ui.core":{"minVersion":"1.54.0"}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/plugins/ghostapp/manifest.json":'{"_version":"1.2.0","sap.app":{"_version":"1.2.0","id":"sap.ushell.plugins.ghostapp","i18n":"i18n/i18n.properties","type":"application","applicationVersion":{"version":"11.7.0-SNAPSHOT"},"title":"Warmup Application","description":"List report app for code warm-up during idle time","tags":{"keywords":[]},"ach":"MM-FIO-IM-SGM","dataSources":{"mainService":{"uri":"/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/","type":"OData","settings":{"localUri":"localService/metadata.xml"}}},"offline":false,"resources":"resources.json","sourceTemplate":{"id":"ui5template.smarttemplate","version":"1.0.0"}},"sap.fiori":{"_version":"1.1.0","registrationIds":["F1595"],"archeType":"analytical"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_bluecrystal"]},"sap.ui5":{"_version":"1.1.0","services":{"ShellUIService":{"factoryName":"sap.ushell.plugins.appwarmup.ShellUIService"}},"resources":{"js":[],"css":[]},"config":{"sapFiori2Adaptation":true},"dependencies":{"minUI5Version":"1.53.0-SNAPSHOT","libs":{"sap.ui.core":{},"sap.m":{"lazy":false},"sap.ui.comp":{"lazy":false},"sap.ui.generic.app":{"minVersion":"1.34.0"},"sap.uxap":{"lazy":false},"sap.suite.ui.generic.template":{}}},"models":{"":{"dataSource":"mainService","preload":true,"settings":{"defaultBindingMode":"TwoWay","defaultCountMode":"Inline","refreshAfterChange":false}}},"extends":{"extensions":{}},"contentDensities":{"compact":true,"cozy":true},"componentName":"sap.ushell.plugins.ghostapp"},"sap.ui.generic.app":{"_version":"1.1.0","pages":[{"entitySet":"MaterialMultiStockByDates","component":{"name":"sap.suite.ui.generic.template.ListReport","list":true,"settings":{"smartVariantManagement":true}}}]},"sap.platform.abap":{"_version":"1.1.0","uri":"/sap/bc/ui5_ui5/sap/stock_multimas1"},"sap.platform.hcp":{"_version":"1.1.0","uri":""},"sap.copilot":{"_version":"1.0.0","contextAnalysis":{"allowAddingObjectsFromAppScreenToCollection":false}}}',
	"sap/ushell/plugins/rta-personalize/manifest.json":'{"_version":"1.1.0","sap.app":{"_version":"1.1.0","i18n":"i18n/i18n.properties","id":"sap.ushell.plugins.rta-personalize","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.dt":{"minVersion":"1.30.1","lazy":true},"sap.ui.rta":{"minVersion":"1.30.1","lazy":true}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/plugins/rta/manifest.json":'{"_version":"1.1.0","sap.app":{"_version":"1.1.0","i18n":"i18n/i18n.properties","id":"sap.ushell.plugins.rta","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.dt":{"minVersion":"1.30.1","lazy":true},"sap.ui.rta":{"minVersion":"1.30.1","lazy":true}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/renderers/fiori2/HeadEndItemsOverflowPopover.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover id="headEndItemsOverflow" placement="Bottom" showHeader="false" showArrow="true" class="sapUshellPopupContainer sapUiSizeCompact" afterClose=".destroyHeadEndItemsOverflow"><content><List class="sapUshellPopoverList" showSeparators="None" items="{path:\'/headEndItems\',filters:{path:\'\',test:\'.isHeadEndItemInOverflow\'},factory:\'.headEndItemsOverflowItemFactory\'}"/></content></Popover></core:FragmentDefinition>',
	"sap/ushell/ui/QuickAccess.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog id="quickAccess" title="{i18n&gt;quickAccessDialog_title}" verticalScrolling="false" contentWidth="25rem" draggable="true" resizable="true" stretch="{device&gt;/system/phone}"><buttons><Button id="quickAccessCloseButton" text="{i18n&gt;closeBtn}" press="._closeDialog"/></buttons><content><IconTabBar id="quickAccessIconTabBar" class="sapUshellMeAreaTabBar" stretchContentHeight="true" backgroundDesign="Transparent" expandable="false"><items><IconTabFilter id="recentActivityFilter" text="{i18n&gt;recentActivities}"><content><ScrollContainer horizontal="false" vertical="true" height="100%" width="100%"><List id="sapUshellActivityListrecentActivities" showSeparators="None" items="{/recentActivities}" noDataText="{i18n&gt;recentActivitiesNoDataText}" itemPress="._itemPress"><items><StandardListItem class="sapUshellQuickAccessListIcon" type="Active" title="{parts:[{path:\'title\'},{path:\'appType\'}],formatter:\'._titleFormatter\'}" description="{parts:[{path:\'appType\'}],formatter:\'._descriptionFormatter\'}" icon="{= ${icon} ? ${icon} : \'sap-icon://header\'}" iconInset="false" info="{timestamp}"/></items></List></ScrollContainer></content></IconTabFilter><IconTabFilter id="frequentlyUsedFilter" text="{i18n&gt;frequentActivities}"><content><ScrollContainer horizontal="false" vertical="true" height="100%" width="100%"><List id="sapUshellActivityListfrequentActivities" showSeparators="None" items="{/frequentActivities}" noDataText="{i18n&gt;frequentActivitiesNoDataText}" itemPress="._itemPress"><items><StandardListItem class="sapUshellQuickAccessListIcon" type="Active" title="{parts:[{path:\'title\'},{path:\'appType\'}],formatter:\'._titleFormatter\'}" description="{parts:[{path:\'appType\'}],formatter:\'._descriptionFormatter\'}" icon="{= ${icon} ? ${icon} : \'sap-icon://header\'}" iconInset="false"/></items></List></ScrollContainer></content></IconTabFilter></items></IconTabBar></content></Dialog></core:FragmentDefinition>',
	"sap/ushell/ui/ShellHeader.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui" xmlns:core="sap.ui.core" xmlns:shell="sap.ushell.ui.shell"><ShellHeader id="shell-header" showLogo="{/showLogo}" visible="{/headerVisible}" homeUri="{/rootIntent}" headItems="{path:\'/headItems\',factory:\'.shellUpdateAggItem\'}" headEndItems="{path:\'/headEndItems\',factory:\'.shellUpdateAggItem\',filters:[{path:\'\',test:\'.isHeadEndItemNotInOverflow\'}]}" centralAreaElement="{/centralAreaElement}" title="{/title}"><appTitle><shell:ShellAppTitle id="shellAppTitle" text="{/application/title}" tooltip="{i18n&gt;shellNavMenu_openMenuTooltip}"/></appTitle></ShellHeader></core:FragmentDefinition>',
	"sap/ushell/ui/ShellLayout.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui.shell" xmlns:core="sap.ui.core" xmlns:ui="sap.ushell.ui"><ShellLayout floatingContainerVisible="false" toolAreaVisible="{/currentState/toolAreaVisible}" enableCanvasShapes="{/enableBackGroundShapes}" id="shell"><canvasSplitContainer><SplitContainer id="shell-split" showSecondaryContent="{/currentState/showPane}" subHeader="{path:\'/currentState/subHeader\',factory:\'.shellUpdateAggItem\'}" secondaryContent="{path:\'/currentState/paneContent\',factory:\'.shellUpdateAggItem\'}"><content><core:ComponentContainer id="menuBarComponentContainer" async="true"/><ui:AppContainer id="viewPortContainer" beforeNavigate=".onBeforeNavigate" afterNavigate=".onAfterNavigate"/></content><secondaryContent/></SplitContainer></canvasSplitContainer><rightFloatingContainer><RightFloatingContainer id="right-floating-container" top="6.875" hideItemsAfterPresentation="true" visible="{/currentState/showRightFloatingContainer}" floatingContainerItems="{path:\'/currentState/RightFloatingContainerItems\',factory:\'.shellUpdateAggItem\'}"/></rightFloatingContainer></ShellLayout></core:FragmentDefinition>',
	"sap/ushell/ui/launchpad/Section.control.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:dnd="sap.ui.core.dnd" xmlns:f="sap.f" xmlns:fc="sap.f.cards" xmlns:fdnd="sap.f.dnd" type="XML"><VBox id="content" class="sapUshellSection"><Title id="title" class="sapUshellSectionTitle sapContrastPlus" text="{$this&gt;title}" titleStyle="H4" visible="{= !${$this&gt;editable} &amp;&amp; ${$this&gt;showSection}}"/><OverflowToolbar id="header" class="sapUshellSectionHeader" visible="{$this&gt;editable}"><Label id="label" text="Section Title:" labelFor="title-edit"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow"/></layoutData></Label><Input id="title-edit" value="{$this&gt;title}" placeholder="{$this.i18n&gt;Section.TitlePlaceholder}" valueLiveUpdate="true" maxLength="100" required="true" change=".fireTitleChange"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" shrinkable="true" minWidth="10rem" maxWidth="40rem"/></layoutData></Input><ToolbarSpacer/><Button id="addVisualization" text="{$this.i18n&gt;Section.Button.AddVisualization}" type="Transparent" press=".fireAdd" visible="{$this&gt;enableAddButton}"/><Button id="showHide" text="{= ${$this&gt;showSection} ? ${$this.i18n&gt;Section.Button.Hide} : ${$this.i18n&gt;Section.Button.Show} }" type="Transparent" press=".setShowSection(!${$this&gt;showSection}, $event)" visible="{$this&gt;enableShowHideButton}"/><Button id="reset" text="{$this.i18n&gt;Section.Button.Reset}" type="Transparent" press=".fireReset" visible="{$this&gt;enableResetButton}"/><Button id="delete" text="{$this.i18n&gt;Section.Button.Delete}" type="Transparent" press=".fireDelete" visible="{$this&gt;enableDeleteButton}"/></OverflowToolbar><Text id="noVisualizationsText" class="sapUshellSectionNoVisualizationsText" text="{$this&gt;noVisualizationsText}" textAlign="Center" visible="{= ${$this&gt;editable} &amp;&amp; ${$this&gt;showNoVisualizationsText}}"/><f:GridContainer id="innerGrid" class="sapUshellSectionGrid" visible="{= ${$this&gt;editable} || ${$this&gt;showSection} }" containerQuery="true"><f:layout><f:GridContainerSettings rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layout><f:layoutXS><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? 4 : 0 }" rowSize="4.375rem" columnSize="4.375rem" gap="0.5rem"/></f:layoutXS><f:layoutS><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? 4 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutS><f:layoutM><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? 6 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutM><f:layoutL><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? ${$this&gt;sizeBehavior} === \'Small\' ? 12 : 10 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutL><f:layoutXL><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? ${$this&gt;sizeBehavior} === \'Small\' ? 16 : 14 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutXL><f:dragDropConfig><dnd:DragInfo enabled="{$this&gt;enableVisualizationReordering}" groupName="Section" sourceAggregation="items" dragStart="._dragVisualization"/><fdnd:GridDropInfo enabled="{$this&gt;enableVisualizationReordering}" groupName="Section" dropLayout="Horizontal" dropPosition="Between" targetAggregation="items" dropIndicatorSize="._getVisualizationLayoutData" drop="._reorderVisualizations"/></f:dragDropConfig></f:GridContainer></VBox></core:FragmentDefinition>',
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
	"sap/ushell/EventHub.js":function(){(function(){"use strict";var d=(!window.sap||!sap.ui||!sap.ui.define)?function(v,c){return c();}:sap.ui.define;return d([],function(){var _={pendingEvents:{},subscribers:{},dispatchOperations:{},store:c()};function c(){return{nextKey:0,objectToKey:new WeakMap(),keyToObject:{}};}function l(M,D,C){if(jQuery&&jQuery.sap&&jQuery.sap.log&&jQuery.sap.log.error){jQuery.sap.log.error(M,D,"sap.ushell.EventHub");return;}if(window.console){var o=[M,D];if(C){o.push("error caused by:");o.push(C);}window.console.error.apply(window.console,o);}}function a(o){var M="An exception was raised while executing a registered callback on event '"+o.eventName+"'",D="Data passed to the event were: '"+o.eventData+"'";if(o.error.stack){D+=" Error details: "+o.error.stack;}l(M,D,o.fnCausedBy);}function s(o,C,D){var R;try{R=C(D);}catch(v){a({eventName:o,eventData:D,fnCausedBy:C,error:v});}return R;}function J(H){if(typeof arguments[2]==="function"){return y(H,arguments[2]);}return arguments[2];}function b(H){if(typeof arguments[2]==="string"&&arguments[2].indexOf("<function")===0){return z(H,arguments[2]);}return arguments[2];}function e(H,D,P){if(typeof D==="object"||typeof D==="function"){try{var S=[D,J.bind(null,H)];if(P){S.push(3);}return JSON.stringify.apply(JSON,S);}catch(o){l(""+o,o.stack,e);}}return D;}function f(H,D){try{return JSON.parse(D,b.bind(null,H));}catch(o){return D;}}function g(H,o,S){if(!H.subscribers[o]){H.subscribers[o]=[];}H.subscribers[o].push(S);}function u(H,o,v){H.subscribers[o]=(H.subscribers[o]||[]).map(function(S){return S.filter(function(L){return L.fn!==v;});}).filter(function(G){return G.length>0;});}function h(){var D,o=new Promise(function(R){D=R;}),v={dispatching:o,cancelled:false,cancel:function(){v.cancelled=true;},complete:function(){D();}};return v;}function i(H,o){if(!H.subscribers.hasOwnProperty(o)){return null;}var D=h(),S=H.subscribers[o],G=S.map(function(v){return j(H,o,v,D,0);});Promise.all(G).then(D.complete,D.complete);return D;}function j(H,o,S,D,v){var O=S.length,C=S.slice(v);return C.reduce(function(P,F){return P.then(function(G){if(D.cancelled){if(G){u(H,o,F.fn);}return G;}return n(H,o,F,S).then(function(I){if(I){D.cancelled=true;}return I;});});},Promise.resolve(false)).then(function(F){if(!F&&O<S.length){return j(H,o,S,D,O);}return F;});}function n(H,o,S,v){return new Promise(function(R){var D=f(H,H.pendingEvents[o]);setTimeout(function(){if(S.called&&v.offed){R(false);return;}S.called=true;var O=v.offed;s(o,S.fn,D);var C=v.offed;if(C){u(H,o,S.fn);}R(!O&&C);},0);});}function k(H,o,S){return function(){S.forEach(function(L){if(L.called){u(H,o,L.fn);}});S.offed=true;return{off:k(H,o,[])};};}function m(H,o,S){return function(C){var v={fn:C,called:false};S.push(v);if(H.pendingEvents.hasOwnProperty(o)){var D=H.dispatchOperations[o];if(!D){n(H,o,v,S);}else{D.dispatching.then(function(){if(!v.called){n(H,o,v,S);}});}}return{do:m(H,o,S),off:k(H,o,S)};};}function p(H,o){var S=[];g(H,o,S);return{do:m(H,o,S),off:k(H,o,S)};}function q(H,o){var D=p(H,o);D.off();return D;}function r(H,o,D){var S=e(H,D);if(H.pendingEvents.hasOwnProperty(o)&&H.pendingEvents[o]===S){return this;}H.pendingEvents[o]=S;var v=H.dispatchOperations[o];if(v){v.cancel();}var N=i(H,o);H.dispatchOperations[o]=N;return this;}function t(H,o){return f(H,H.pendingEvents[o]);}function w(){var o=Array.prototype.slice.call(arguments);o.shift();var C=0,O=new Array(o.length).join(",").split(",").map(function(){return 1;}),v=[],D={do:function(F){o.forEach(function(G,I){G.do(function(I,V){v[I]=V;C+=O[I];O[I]=0;if(C===o.length){F.apply(null,v);}}.bind(null,I));});return{off:D.off};},off:function(){var F=o.reduce(function(F,G){return G.off();},function(){});return{off:F};}};return D;}function x(H,o){var D=H.dispatchOperations[o];return D?D.dispatching:Promise.resolve();}function y(H,o){if(H.store.objectToKey.has(o)){return H.store.objectToKey.get(o);}H.store.nextKey++;var K="<"+typeof o+">#"+H.store.nextKey;H.store.keyToObject[K]=o;H.store.objectToKey.set(o,K);return K;}function z(H,K){return H.store.keyToObject[K];}function A(H){var o={};o.emit=r.bind(o,H);o.on=p.bind(null,H);o.once=q.bind(null,H);o.last=t.bind(null,H);o.join=w.bind(null,H);o.wait=x.bind(null,H);o._reset=function(H){H.pendingEvents={};H.subscribers={};H.dispatchOperations={};H.store=c();}.bind(null,H);return o;}function B(C){var D={pendingEvents:{},subscribers:{},dispatchOperations:{},store:c()},F=A(D),G=f(D,e(D,C));function H(o){var v=o.charAt(0);if(v.match(/[a-zA-Z0-9]/)){throw new Error("Invalid path separator '"+v+"'. Please ensure path starts with a non alphanumeric character");}var X=o.split(v);X.shift();return X;}function I(v,o){var X=v,Y="";if(arguments.length===2){X=o;Y=v;}return Y+"/"+X.join("/");}function K(v){return Object.prototype.toString.apply(v)==="[object Array]";}function L(v){return Object(v)!==v;}function M(v){return(K(v)?v.length:Object.keys(v).length)===0;}function N(v,X,Y,Z){var $="",a1=v,b1=[];Y.reduce(function(c1,d1,e1){$=I($,[d1]);a1=a1[d1];if(e1===Y.length-1){if(!L(Z)&&!L(a1)&&Object.keys(a1).length>0){var f1,g1=Object.keys(a1).reduce(function(o,d1){o[d1]=true;return o;},{}),h1=Object.keys(Z).some(function(d1){f1=d1;var o=g1.hasOwnProperty(d1);delete g1[d1];var m1=!L(a1[d1])&&Object.keys(a1[d1]).length>0;return!o||m1;}),i1=(Object.keys(g1).length>0),j1=(h1||i1);if(j1){var k1=h1?"One or more values are not defined in the channel contract or are defined as a non-empty object/array, for example, check '"+f1+"'.":"Some keys are missing in the event data: "+Object.keys(g1).join(", ")+".";throw new Error("Cannot write value '"+e(D,Z,true)+"' to path '"+$+"'. "+k1+" All childrens in the value must appear in the channel contract and must have a simple value or should be defined as an empty complex value");}var l1=Object.keys(Z).map(function(d1){return{serializedPath:I($,[d1]),value:Z[d1]};});Array.prototype.push.apply(b1,l1);}c1[d1]=Z;}else if(!c1.hasOwnProperty(d1)){c1[d1]=K(a1)?[]:{};}b1.push({serializedPath:$,value:c1[d1]});return c1[d1];},X);return b1;}function O(o,v){var X="",Y=v.reduce(function(Z,$){X+="/"+$;if(K(Z)&&!$.match(/^[0-9]+$/)){throw new Error("Invalid array index '"+$+"' provided in path '"+X+"'");}if(!Z.hasOwnProperty($)){throw new Error("The item '"+$+"' from path "+X+" cannot be accessed in the object: "+e(D,Z));}return Z[$];},o);return Y;}function P(o,v,X){return v.reduce(function(Y,Z,$){var a1=$===(v.length-1);if(Y.hasOwnProperty(Z)){return Y[Z];}return a1?X:{};},o);}function Q(o,v){v.pop();var X=o,Y=[];return v.reduce(function(Z,$){X=X[$];Y.push($);Z.push({serializedPath:I(Y),value:X});return Z;},[]);}function R(o){return o.map(function(v){var X=v.serializedPath;if(!D.subscribers.hasOwnProperty(X)||D.subscribers[X].length===0){return null;}return{path:X,value:v.value};}).filter(function(v){return!!v;});}function S(o,v){var X=H(o);O(C,X);var Y=N(C,G,X,v);Y.forEach(function(Z){F.emit(Z.serializedPath,Z.value);});}function T(o){var v=H(o),X=O(C,v);return P(G,v,X);}function U(o){var v=H(o),X=I(v),Y=F.last(X),Z=D.pendingEvents.hasOwnProperty(X);if(Z){return F.on(X);}Y=O(C,v);if(typeof Y!=="undefined"&&(L(Y)||!M(f(F,e(F,Y))))){F.emit(X,Y);}return F.on(X);}function V(o){var v=U(o);v.off();return v;}function W(o){var v=H(o),X=Q(G,v),Y=R(X).map(function(Z){return F.wait(Z.path,Z.value);});return Promise.all(Y.concat(F.wait(o)));}return{emit:S,on:U,once:V,last:T,wait:W,join:w.bind(null,F)};}var E=A(_);E.createChannel=B.bind(null);return E;},false);})();
},
	"sap/ushell/bootstrap/appFinder.js":function(){(function(){"use strict";var b,B=document.querySelector("script[src$=\"sap/ushell/bootstrap/appFinder.js\"]");if(!B){throw new Error("cdm.js: could not identify homepage bootstrap script tag!");}b=B.src.match(/(.*\/)sap\/ushell\/bootstrap\/appFinder\.js$/i)[1];window["sap-ui-config"]={resourceroots:{"":b},"xx-async":true};
function l(u,c){var p=u.length,e=0;function a(E){p--;if(E.type==="error"){e++;}E.target.removeEventListener("load",a);E.target.removeEventListener("error",a);if(p===0&&e===0&&c){c();}}for(var i=0;i<u.length;i++){var s=document.createElement("script");s.addEventListener("load",a);s.addEventListener("error",a);s.src=b+u[i];document.head.appendChild(s);}}
l(["sap/ui/thirdparty/baseuri.js","sap/ui/thirdparty/es6-promise.js","sap/ui/thirdparty/es6-string-methods.js"],function(){l(["ui5loader.js"],function(){l(["ui5loader-autoconfig.js"],function(){sap.ui.require(["sap/ushell/bootstrap/appfinder/appFinder-dev"],function(){sap.ui.require(["sap/ui/core/Core"],function(c){c.boot();});});});});});}());
},
	"sap/ushell/bootstrap/cdm.js":function(){(function(){"use strict";var b,B=document.querySelector("script[src$=\"sap/ushell/bootstrap/cdm.js\"]");if(!B){throw new Error("cdm.js: could not identify cdm bootstrap script tag!");}b=B.src.match(/(.*\/)sap\/ushell\/bootstrap\/cdm\.js$/i)[1];
function l(u,c){var p=u.length,e=0;function a(E){p--;if(E.type==="error"){e++;}E.target.removeEventListener("load",a);E.target.removeEventListener("error",a);if(p===0&&e===0&&c){c();}}for(var i=0;i<u.length;i++){var s=document.createElement("script");s.addEventListener("load",a);s.addEventListener("error",a);s.src=b+u[i];document.head.appendChild(s);}}
l(["sap/ui/thirdparty/baseuri.js","sap/ui/thirdparty/es6-promise.js","sap/ui/thirdparty/es6-string-methods.js","sap/ui/thirdparty/es6-object-assign.js","sap/ui/thirdparty/es6-shim-nopromise.js"],function(){l(["ui5loader-dbg.js"],function(){l(["sap/ushell/bootstrap/ui5loader-config.js"],function(){l(["ui5loader-autoconfig-dbg.js"],function(){sap.ui.require(["sap/ushell/bootstrap/cdm/cdm-def-dev"],function(){sap.ui.require(["sap/ui/core/Core"],function(c){c.boot();});});});});});});}());
},
	"sap/ushell/bootstrap/homepage.js":function(){(function(){"use strict";var b,B=document.querySelector("script[src$=\"sap/ushell/bootstrap/homepage.js\"]");if(!B){throw new Error("cdm.js: could not identify homepage bootstrap script tag!");}b=B.src.match(/(.*\/)sap\/ushell\/bootstrap\/homepage\.js$/i)[1];window["sap-ui-config"]={resourceroots:{"":b},"xx-async":true};
function l(u,c){var p=u.length,e=0;function a(E){p--;if(E.type==="error"){e++;}E.target.removeEventListener("load",a);E.target.removeEventListener("error",a);if(p===0&&e===0&&c){c();}}for(var i=0;i<u.length;i++){var s=document.createElement("script");s.addEventListener("load",a);s.addEventListener("error",a);s.src=b+u[i];document.head.appendChild(s);}}
l(["sap/ui/thirdparty/baseuri.js","sap/ui/thirdparty/es6-promise.js","sap/ui/thirdparty/es6-string-methods.js"],function(){l(["ui5loader.js"],function(){l(["ui5loader-autoconfig.js"],function(){sap.ui.require(["sap/ushell/bootstrap/homepage/homepage-dev"],function(){sap.ui.require(["sap/ui/core/Core"],function(c){c.boot();});});});});});}());
},
	"sap/ushell/bootstrap/ui5loader-config.js":function(){(function(){"use strict";var u=window.sap&&window.sap.ui&&window.sap.ui.loader;if(!u){throw new Error("FLP bootstrap: ui5loader is needed, but could not be found");}var c={},s=document.getElementById("sap-ui-bootstrap"),S=s&&s.getAttribute("src"),r=/^((?:.*\/)?resources\/~\d{14}~\/)/,b;if(S&&r.test(S)){b=r.exec(S)[1];window["sap-ui-config"]=window["sap-ui-config"]||{};window["sap-ui-config"].resourceRoots=window["sap-ui-config"].resourceRoots||{};window["sap-ui-config"].resourceRoots[""]=b;}u.config(c);}());
},
	"sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.view.js":function(){sap.ui.require(["sap/suite/ui/commons/HarveyBallMicroChart","sap/suite/ui/commons/HarveyBallMicroChartItem","sap/suite/ui/commons/TileContent","sap/suite/ui/commons/GenericTile"],function(H,a,T,G){"use strict";sap.ui.jsview("tiles.indicatorHarveyBall.HarveyBallTile",{getControllerName:function(){},createContent:function(){var m=new H({total:"{/value}",size:"{/size}",totalLabel:"{/totalLabel}",items:[new a({fraction:"{/fractionValue}",fractionLabel:"{/fractionLabel}",color:"{/color}"})]});var t=new T({size:"{/size}",content:m});this.oTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t]});}});});
},
	"sap/ushell/components/tiles/indicatorTileUtils/indicatorTileHelper.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper");
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper=function(t){this.tile=t;};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setErrorState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Failed);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadingState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loading);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadedState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loaded);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendDown=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Down);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendUp=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Up);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendNeutral=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.None);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdGood=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdBad=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdCritical=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdNeutral=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.calculateThreshold=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTile=function(t){this.tile=t;};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.getTile=function(){return this.tile;};
}());
},
	"sap/ushell/components/tiles/sbtilecontent.js":function(){jQuery.sap.declare("sap.ushell.components.tiles.sbtilecontent");sap.ui.define(["sap/m/TileContent","sap/m/TileContentRenderer","sap/ui/core/Control"],function(T,R,C){"use strict";
var t=C.extend("numeric.TileContent_Timestamp",{
ontap:function(e){if(this.getParent().getRefreshOption()){e.preventDefault();e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}this.getParent().fireRefresh();}},
renderer:function(r,c){r.write("<div");r.writeElementData(c);r.addClass("sapMTileCntFtrTxt");if(c.getParent().getRefreshOption()){r.addClass("sapMLnk");}r.writeClasses();r.addStyle("position","absolute");r.addStyle("z-index","2");r.addStyle(r.getConfiguration().getRTL()?"left":"right","auto");r.writeStyles();r.write(">");var a=c.getParent().getTimestamp();if(a){if(!c.getParent().getRefreshOption()){r.writeEscaped(a);}else if(r.getConfiguration().getRTL()){r.writeEscaped(a+"\u2009");r.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner");}else{r.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner");r.writeEscaped("\u2009"+a);}}r.write("</div>");}
});
return T.extend("sap.ushell.components.tiles.sbtilecontent",{metadata:{properties:{timestamp:{type:"string"},refreshOption:{type:"boolean"}},events:{refresh:{}}},init:function(){this.addDependent(this._oTimestamp=new t());},getAltText:function(){var a=T.prototype.getAltText.apply(this,arguments);if(this.getTimestamp()){a+=(a===""?"":"\n")+this.getTimestamp();}return a;},renderer:{_renderFooter:function(r,c){R._renderFooter.apply(this,arguments);r.renderControl(c._oTimestamp);}}});},true);
},
	"sap/ushell/renderers/fiori2/search/SearchConfiguration.js":function(){(function(g){"use strict";sap.ui.define(['sap/ushell/renderers/fiori2/search/controls/SearchResultListSelectionHandler','sap/base/Log'],function(D,L){var a=D.getMetadata().getName();jQuery.sap.declare('sap.ushell.renderers.fiori2.search.SearchConfiguration');var u={multiSelect:{type:'bool'},sinaProvider:{type:'string'},odataProvider:{type:'bool'},searchBusinessObjects:{type:'bool'},charts:{type:'bool'},maps:{type:'bool'},mapProdiver:{type:'object'},newpie:{type:'bool'},personalizationStorage:{type:'string'},boSuggestions:{type:'bool'},_tweetAttribute:{type:'string'},_eshClickableObjectType:{type:'bool'},defaultSearchScopeApps:{type:'bool'},searchScopeWithoutAll:{type:'bool'},suggestionKeyboardRelaxationTime:{type:'int'},suggestionStartingCharacters:{type:'int'}};var S=sap.ushell.renderers.fiori2.search.SearchConfiguration=function(){this.init.apply(this,arguments);};S.prototype={init:function(p){try{var c=g['sap-ushell-config'].renderers.fiori2.componentData.config.esearch;jQuery.extend(true,this,c);}catch(e){}this.handleOutdatedConfigurationParameters();this.setDefaults();this.readUrlParameters();this.setModulePaths();this.createDefaultDataSourceConfig();},setModulePaths:function(){if(!this.modulePaths){return;}for(var i=0;i<this.modulePaths.length;++i){var m=this.modulePaths[i];jQuery.sap.registerModulePath(m.moduleName,m.urlPrefix);}},handleOutdatedConfigurationParameters:function(){try{var c=g['sap-ushell-config'].renderers.fiori2.componentData.config;if(c.searchBusinessObjects!==undefined&&this.searchBusinessObjects===undefined){if(c.searchBusinessObjects==='hidden'||c.searchBusinessObjects===false){this.searchBusinessObjects=false;}else{this.searchBusinessObjects=true;}}if(c.enableSearch!==undefined&&this.enableSearch===undefined){this.enableSearch=c.enableSearch;}}catch(e){}},setDefaults:function(){if(this.searchBusinessObjects===undefined){this.searchBusinessObjects=true;}if(this.odataProvider===undefined){this.odataProvider=false;}if(this.multiSelect===undefined){this.multiSelect=true;}if(this.charts===undefined){this.charts=true;}if(this.maps===undefined){this.maps=undefined;}if(this.mapProvider===undefined){this.mapProvider=undefined;}if(this.newpie===undefined){this.newpie=false;}if(this.dataSources===undefined){this.dataSources={};}if(this.enableSearch===undefined){this.enableSearch=true;}if(this.personalizationStorage===undefined){this.personalizationStorage='auto';}if(this.boSuggestions===undefined){this.boSuggestions=false;}if(this._eshClickableObjectType===undefined){this._eshClickableObjectType=true;}if(this.defaultSearchScopeApps===undefined){this.defaultSearchScopeApps=false;}if(this.searchScopeWithoutAll===undefined){this.searchScopeWithoutAll=false;}if(this.suggestionKeyboardRelaxationTime===undefined){this.suggestionKeyboardRelaxationTime=400;}if(this.suggestionStartingCharacters===undefined){this.suggestionStartingCharacters=3;}this.dataSourceConfigurations={};this.dataSourceConfigurations_Regexes=[];if(this.dataSources){for(var i=0;i<this.dataSources.length;i++){var d=this.dataSources[i];if(d.id){this.dataSourceConfigurations[d.id]=d;}else if(d.regex){var f=d.regexFlags||undefined;var r=new RegExp(d.regex,f);if(r){d.regex=r;this.dataSourceConfigurations_Regexes.push(d);}}else{var m="Following datasource configuration does neither include a valid id nor a regular expression, therefore it is ignored:\n"+JSON.stringify(d);L.warning(m,'sap.ushell.renderers.fiori2.search.SearchConfiguration');}}}this.dataSources=undefined;this.documentDataSource={searchResultListItem:'sap.ushell.renderers.fiori2.search.controls.SearchResultListItemDocument'};this.dataSourceConfigurations.noteprocessorurl=this.dataSourceConfigurations.noteprocessorurl||{};this.dataSourceConfigurations.noteprocessorurl.searchResultListItem=this.dataSourceConfigurations.noteprocessorurl.searchResultListItem||'sap.ushell.renderers.fiori2.search.controls.SearchResultListItemNote';this.dataSourceConfigurations.noteprocessorurl.searchResultListSelectionHandler=this.dataSourceConfigurations.noteprocessorurl.searchResultListSelectionHandler||'sap.ushell.renderers.fiori2.search.controls.SearchResultListSelectionHandlerNote';},createDefaultDataSourceConfig:function(){this.defaultDataSourceConfig={searchResultListItem:undefined,searchResultListItemControl:undefined,searchResultListItemContent:undefined,searchResultListItemContentControl:undefined,searchResultListSelectionHandler:a,searchResultListSelectionHandlerControl:D};},readUrlParameters:function(){var p=this.parseUrlParameters();for(var b in p){if(b==='demoMode'){this.searchBusinessObjects=true;this.enableSearch=true;continue;}var c=u[b];if(!c){continue;}var v=p[b];switch(c.type){case'bool':v=(v==='true'||v==='');break;default:}this[b]=v;}},parseUrlParameters:function(){var U=sap.ushell.Container.getService("URLParsing");var p=U.parseParameters(g.location.search);var n={};for(var k in p){var v=p[k];if(v.length!==1){continue;}v=v[0];if(typeof v!=='string'){continue;}n[k]=v;}return n;},loadCustomModulesAsync:function(){var t=this;if(t._loadCustomModulesProm){return t._loadCustomModulesProm;}var d,b=[];for(var c in t.dataSourceConfigurations){d=t.loadCustomModulesForDataSourceIdAsync(c);b.push(d);}t._loadCustomModulesProm=Promise.all(b);return t._loadCustomModulesProm;},loadCustomModulesForDataSourcesAsync:function(d,b){var c=[];for(var i=0;i<d.length;i++){var e=Array.isArray(b)&&b.length>i&&b[i]||{};var f=this.loadCustomModulesForDataSourceAsync(d[i],e);c.push(f);}return Promise.all(c);},loadCustomModulesForDataSourceAsync:function(d,b){b=b||{};return this.loadCustomModulesForDataSourceIdAsync(d.id,b);},loadCustomModulesForDataSourceIdAsync:function(d,b){if(!d){return Promise.resolve();}this._dataSourceLoadingProms=this._dataSourceLoadingProms||{};var c=this._dataSourceLoadingProms[d];if(!c){var e=[{moduleAttrName:"searchResultListItem",controlAttrName:"searchResultListItemControl"},{moduleAttrName:"searchResultListItemContent",controlAttrName:"searchResultListItemContentControl"},{moduleAttrName:"searchResultListSelectionHandler",controlAttrName:"searchResultListSelectionHandlerControl"}];var f=this._prepareDataSourceConfigurationForDataSource(d,b);var h,j=[];for(var i=0;i<e.length;i++){h=this._doLoadCustomModulesAsync(d,f,e[i].moduleAttrName,e[i].controlAttrName);j.push(h);}c=Promise.all(j);c._resolvedOrFailed=false;c.then(function(){c._resolvedOrFailed=true;});this._dataSourceLoadingProms[d]=c;}return c;},_doLoadCustomModulesAsync:function(d,b,m,c,f,h){var t=this;return new Promise(function(r,i){if(b[m]&&(!b[c]||b[c]==t.defaultDataSourceConfig[c])){try{sap.ui.require([b[m].replace(/[.]/g,'/')],function(k){b[c]=k;r();});}catch(e){var j="Could not load custom module '"+b[m]+"' for data source with id '"+d+"'. ";j+="Falling back to default data source configuration.";L.warning(j,'sap.ushell.renderers.fiori2.search.SearchConfiguration');b[m]=f||t.defaultDataSourceConfig[m];b[c]=h||t.defaultDataSourceConfig[c];r();}}else{if(!b[c]){b[m]=f||t.defaultDataSourceConfig[m];b[c]=h||t.defaultDataSourceConfig[c];}r();}});},getDataSourceConfig:function(d){if(this._dataSourceLoadingProms&&this._dataSourceLoadingProms[d.id]&&!this._dataSourceLoadingProms[d.id]._resolvedOrFailed){return this.defaultDataSourceConfig;}var c=this.dataSourceConfigurations[d.id];if(!c){c=this.defaultDataSourceConfig;this.dataSourceConfigurations[d.id]=c;}return c;},_prepareDataSourceConfigurationForDataSource:function(d,b){var c={};if(this.dataSourceConfigurations[d]){c=this.dataSourceConfigurations[d];}else{for(var i=0;i<this.dataSourceConfigurations_Regexes.length;i++){if(this.dataSourceConfigurations_Regexes[i].regex.test(d)){c=this.dataSourceConfigurations_Regexes[i];break;}}}if(b&&b.isDocumentConnector){if(!c.searchResultListItem){c.searchResultListItem=this.documentDataSource.searchResultListItem;}else{var m="Will attempt to load '"+c.searchResultListItem+"' instead of '"+this.documentDataSource.searchResultListItem+"' for data source '"+d+"'";L.warning(m,'sap.ushell.renderers.fiori2.search.SearchConfiguration');}}this.dataSourceConfigurations[d]=c;return c;},isLaunchpad:function(){try{return!!sap.ushell.Container.getService("CrossApplicationNavigation");}catch(e){return false;}},getSina:function(){return{};}};var s;
S.getInstance=function(){if(s){return s;}s=new S();return s;};
return S;});})(window);
},
	"sap/ushell/renderers/fiori2/search/SearchFacetDialogModel.js":function(){(function(g){"use strict";sap.ui.define(['sap/ushell/renderers/fiori2/search/SearchModel'],function(S){return S.extend("sap.ushell.renderers.fiori2.search.SearchFacetDialogModel",{constructor:function(s){var t=this;S.prototype.constructor.apply(t,[{searchModel:s}]);t.aFilters=[];},prepareFacetList:function(){var t=this;var m=t.getDataSource();t.setProperty('/facetDialog',t.oFacetFormatter.getDialogFacetsFromMetaData(m,t));},facetDialogSingleCall:function(p){var t=this;t.chartQuery.dimension=p.sAttribute;t.chartQuery.top=p.sAttributeLimit;return t.chartQuery.getResultSetAsync().then(function(r){var f=t.oFacetFormatter.getDialogFacetsFromChartQuery(r,t,p.bInitialFilters);var F=jQuery.extend(true,{},f);f.items4pie=F.items;var a=0,b=0,c=0,d=0;for(var i=0;i<f.items4pie.length;i++){if(i<9){f.items4pie[i].pieReady=true;if(f.items4pie[i].value>0){a+=f.items4pie[i].value;}}else{f.items4pie[i].pieReady=false;if(f.items4pie[i].value>0){b+=f.items4pie[i].value;}}}c=b*100/(a+b);c=Math.ceil(c);d=a/9;d=Math.floor(d);if(c>0){var n=f.items4pie[0].clone([true,true]);n.value=d;n.label=sap.ushell.resources.i18n.getText("facetPieChartOverflowText2",[c,9]);n.pieReady=true;n.valueLabel=""+d;n.isPieChartDummy=true;f.items4pie.push(n);}for(var j=0;j<f.items4pie.length;j++){f.items4pie[j].percentageMissingInBigPie=c;}t.setProperty(p.sBindingPath+"/items4pie",f.items4pie);t.setProperty(p.sBindingPath+"/items",f.items);},function(e){var a=sap.ushell.resources.i18n.getText('searchError');var b=e.message;sap.m.MessageBox.error(b,{icon:sap.m.MessageBox.Icon.NONE,title:a,actions:sap.m.MessageBox.Action.OK,onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit});});},resetChartQueryFilterConditions:function(){var t=this;if(t.chartQuery){t.chartQuery.resetConditions();}},hasFilterCondition:function(f){var t=this;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){return true;}}return false;},hasFilter:function(i){var t=this;var f=i.filterCondition;return t.hasFilterCondition(f);},addFilter:function(i){var t=this;if(!t.hasFilter(i)){t.aFilters.push(i);}},removeFilter:function(a){var t=this;var f=a.filterCondition;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){t.aFilters.splice(i,1);return;}}},changeFilterAdvaced:function(a,A){var t=this;var f=a.filterCondition;for(var i=0;i<t.aFilters.length;i++){if(t.aFilters[i].filterCondition.equals&&t.aFilters[i].filterCondition.equals(f)){t.aFilters[i].advanced=A;return;}}},addFilterCondition:function(f,a){this.chartQuery.filter.autoInsertCondition(f);},getAttributeDataType:function(f){switch(f.dataType){case"Integer":return"integer";case"Double":return"number";case"Timestamp":return"timestamp";case"Date":return"date";case"String":if(f.matchingStrategy===this.sinaNext.MatchingStrategy.Text){return"text";}return"string";default:return"string";}}});});})(window);
},
	"sap/ushell/renderers/fiori2/search/SearchModel.js":function(){(function(g){"use strict";sap.ui.define(['sap/ushell/renderers/fiori2/search/SearchHelper','sap/ushell/renderers/fiori2/search/SearchResultListFormatter','sap/ushell/renderers/fiori2/search/SearchFacetsFormatter','sap/ushell/renderers/fiori2/search/SearchTabStripsFormatter','sap/ushell/renderers/fiori2/search/suggestions/SuggestionHandler','sap/ushell/renderers/fiori2/search/SearchConfiguration','sap/ushell/renderers/fiori2/search/personalization/PersonalizationStorage','sap/ushell/renderers/fiori2/search/eventlogging/EventLogger','sap/ushell/renderers/fiori2/search/SearchUrlParser'],function(S,c,d,f,h,l,P,E,m){
sap.ushell.renderers.fiori2.search.getModelSingleton=function(){if(!sap.ushell.renderers.fiori2.search.oModel){sap.ushell.renderers.fiori2.search.oModel=new sap.ushell.renderers.fiori2.search.SearchModel();}return sap.ushell.renderers.fiori2.search.oModel;};
var n;
var o=sap.ui.model.json.JSONModel.extend("sap.ushell.renderers.fiori2.search.SearchModel",{
constructor:function(p){var t=this;p=p||{};sap.ui.model.json.JSONModel.prototype.constructor.apply(t,[]);t.config=l.getInstance();t.setSizeLimit(1000);t.suggestionHandler=new h({model:this});t.searchApplications=S.refuseOutdatedRequests(t.searchApplications,'search');t.pageSize=10;t.appTopDefault=20;t.boTopDefault=t.pageSize;t.setProperty('/isQueryInvalidated',true);t.setProperty('/isBusy',false);t.setProperty('/busyDelay',0);t.setProperty('/tableColumns',[]);t.setProperty('/tableSortableColumns',[]);t.setProperty('/tableResults',[]);t.setProperty('/results',[]);t.setProperty('/appResults',[]);t.setProperty('/boResults',[]);t.setProperty('/origBoResults',[]);t.setProperty('/count',0);t.setProperty('/boCount',0);t.setProperty('/appCount',0);t.setProperty('/facets',[]);t.setProperty('/dataSources',[t.allDataSource,t.appDataSource]);t.setProperty('/appSearchDataSource',null);t.setProperty('/currentPersoServiceProvider',null);t.setProperty('/businessObjSearchEnabled',true);t.setProperty('/initializingObjSearch',false);t.setProperty('/suggestions',[]);t.setProperty('/resultToDisplay',S.loadResultViewType());t.setProperty('/displaySwitchVisibility',false);t.setProperty('/documentTitle','Search');t.setProperty('/top',t.boTopDefault);t.setProperty('/orderBy',{});t.setProperty('/facetVisibility',false);t.setProperty('/focusIndex',0);t.setProperty('/errors',[]);t.setProperty('/isErrorPopovered',false);this.setProperty("/nlqSuccess",false);this.setProperty("/nlqDescription","");this.setProperty("/firstSearchWasExecuted",false);t.setProperty('/multiSelectionAvailable',false);t.setProperty('/multiSelectionEnabled',false);t.setProperty('/multiSelection/actions',[]);if(p.searchModel&&p.searchModel._initBusinessObjSearchProm){t._initBusinessObjSearchProm=p.searchModel._initBusinessObjSearchProm;t.oFacetFormatter=new sap.ushell.renderers.fiori2.search.SearchFacetsFormatter(t);}t.initBusinessObjSearch();t.searchUrlParser=new m({model:this});},
createSina:function(){var s=new jQuery.Deferred();sap.ui.require(['sap/ushell/renderers/fiori2/search/sinaNext/sina/sinaFactory'],function(a){if(!this.config.searchBusinessObjects){a.createAsync('dummy').then(function(b){s.resolve(b);},function(e){s.reject(e);});return;}var t=[];if(window.location.href.indexOf("demo/FioriLaunchpad.")!==-1){t=['sample'];}else{t=['abap_odata','inav2','dummy'];}if(this.config.sinaConfiguration){t=[this.config.sinaConfiguration];}a.createByTrialAsync(t).then(function(b){s.resolve(b);},function(e){s.reject(e);});}.bind(this));return s;},
initBusinessObjSearch:function(){var t=this;if(t._initBusinessObjSearchProm){return t._initBusinessObjSearchProm;}t.setProperty("/initializingObjSearch",true);t.setProperty("/isBusy",true);var a={label:sap.ushell.resources.i18n.getText("genericLoading"),labelPlural:sap.ushell.resources.i18n.getText("genericLoading"),enabled:false,id:'$$Loading$$'};t.setProperty("/dataSource",a);t.setProperty("/dataSources",[a]);t._initBusinessObjSearchProm=this.createSina().then(function(s){t.sinaNext=s;t.eventLogger=E.newInstance({sinaNext:t.sinaNext});t.eventLogger.logEvent({type:t.eventLogger.SESSION_START});t.createAllAndAppDataSource();t.setProperty('/defaultDataSource',t.allDataSource);if(t.config.defaultSearchScopeApps||t.config.searchScopeWithoutAll){t.setProperty('/defaultDataSource',t.appDataSource);}if(s.provider.id==='dummy'){t.setProperty('/defaultDataSource',t.appDataSource);t.setProperty('/businessObjSearchEnabled',false);t.config.searchBusinessObjects=false;t.setProperty('/facetVisibility',false);}if(s.provider.id==='inav2'&&t.config.isLaunchpad()){sap.ushell.Container.addRemoteSystem(new sap.ushell.System({alias:"ENTERPRISE_SEARCH",platform:"abap",baseUrl:"/ENTERPRISE_SEARCH"}));}t.setProperty('/uiFilter',t.sinaNext.createFilter());t.loadDataSources();t.resetDataSource(false);t.resetFilterConditions(false);t.query=t.sinaNext.createSearchQuery();if(t.config.multiSelect){t.query.setMultiSelectFacets(true);}t.oFacetFormatter=new sap.ushell.renderers.fiori2.search.SearchFacetsFormatter(t);t.tabStripFormatter=new f.Formatter(t.allDataSource);t.dataSourceTree=t.tabStripFormatter.tree;t.setProperty("/initializingObjSearch",false);t.setProperty("/isBusy",false);},function(e){var b=sap.ushell.resources.i18n.getText('searchError');var i=sap.ushell.resources.i18n.getText('searchInitialError');if(e.message){i=i+" "+e.message;}sap.m.MessageBox.error(i,{icon:sap.m.MessageBox.Icon.NONE,title:b,actions:sap.m.MessageBox.Action.OK,onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit});});return t._initBusinessObjSearchProm;},
initPersonalization:function(){var t=this;if(this.initPersonalizationPromise){return this.initPersonalizationPromise;}this.initPersonalizationPromise=P.getInstance().then(function(p){var a=false;try{a=p.getItem('search-facet-panel-button-state');}catch(e){}t.setFacetVisibility(a,false);},function(){return jQuery.Deferred().resolve(true);});return this.initPersonalizationPromise;},
isBusinessObjSearchConfigured:function(){try{var a=window['sap-ushell-config'].renderers.fiori2.componentData.config;return a.searchBusinessObjects!=='hidden';}catch(e){return true;}},
isBusinessObjSearchEnabled:function(){return this.getProperty('/businessObjSearchEnabled');},
setProperty:function(a,v,C,A){var t=this;var r=sap.ui.model.json.JSONModel.prototype.setProperty.apply(this,arguments);switch(a){case'/boResults':case'/appResults':t.calculateResultList();break;case'/appCount':case'/boCount':r=t.setProperty('/count',t.getProperty('/appCount')+t.getProperty('/boCount'));break;default:break;}return r;},
getPersonalizationStorageInstance:function(){return P.getInstanceSync();},
getSearchBoxTerm:function(){return this.getProperty('/uiFilter/searchTerm')||'';},
setSearchBoxTerm:function(s,a){var t=this;var b=s.replace(/^\s+/,"");this.setProperty('/uiFilter/searchTerm',b);this.calculateSearchButtonStatus();if(b.length===0){return;}if(a||a===undefined){t._firePerspectiveQuery();}},
getLastSearchTerm:function(){return this.query.getSearchTerm();},
setFacetVisibility:function(v,a){if(sap.ui.Device.system.phone){v=false;}this.setProperty('/facetVisibility',v);try{this.getPersonalizationStorageInstance().setItem('search-facet-panel-button-state',v);}catch(e){}if((a||a===undefined)){this._firePerspectiveQuery({preserveFormerResults:true});}},
getFacetVisibility:function(){return this.getProperty('/facetVisibility');},
getTop:function(){return this.getProperty('/top');},
setTop:function(t,a){this.setProperty('/top',t);if(a||a===undefined){this._firePerspectiveQuery({preserveFormerResults:true});}},
resetTop:function(){this.setProperty('/focusIndex',0);if(this.isAppCategory()){this.setTop(this.appTopDefault,false);}else{this.setTop(this.boTopDefault,false);}},
getOrderBy:function(){return this.getProperty('/orderBy');},
setOrderBy:function(a,b){this.setProperty('/orderBy',a);if(b||b===undefined){this._firePerspectiveQuery({preserveFormerResults:true});}},
resetOrderBy:function(a){this.setProperty('/orderBy',{});if(a||a===undefined){this._firePerspectiveQuery({preserveFormerResults:true});}},
isEqualOrderBy:function(a,q){if(!a.orderBy){return q.length===0;}if(q.length!==1){return false;}var b=q[0];if(b.id!==a.orderBy){return false;}if(a.sortOrder==='ASC'){return b.order===this.sinaNext.SortOrder.Ascending;}return b.order===this.sinaNext.SortOrder.Descending;},
getDocumentTitle:function(){var s=this.getSearchBoxTerm();var a=this.getDataSource().label;var t;if(this.getDataSource()===this.allDataSource){t=sap.ushell.resources.i18n.getText('searchTileTitleProposalAll',[s]);}else{t=sap.ushell.resources.i18n.getText('searchTileTitleProposal',[s,a]);}return t;},
resetQuery:function(){if(this.getProperty('/initializingObjSearch')){return;}S.hasher.reset();this.resetTop();this.setSearchBoxTerm('');this.resetDataSource(false);this.resetFilterConditions(false);this.query.resetConditions();this.query.setSearchTerm('random-jgfhfdskjghrtekjhg');this.setProperty('/facets',[]);this.setProperty('/results',[]);this.setProperty('/appResults',[]);this.setProperty('/boResults',[]);this.setProperty('/origBoResults',[]);this.setProperty('/count',0);this.setProperty('/boCount',0);this.setProperty('/appCount',0);},
createAllAndAppDataSource:function(){this.allDataSource=this.sinaNext.getAllDataSource();this.allDataSource.label=sap.ushell.resources.i18n.getText("label_all");this.allDataSource.labelPlural=sap.ushell.resources.i18n.getText("label_all");this.appDataSource=this.sinaNext._createDataSource({id:'$$APPS$$',label:sap.ushell.resources.i18n.getText("label_apps"),labelPlural:sap.ushell.resources.i18n.getText("label_apps"),type:this.sinaNext.DataSourceType.Category});},
loadDataSources:function(){var t=this;var a=this.sinaNext.getBusinessObjectDataSources();a=a.slice();var b=[];a.forEach(function(e){if(!e.usage.appSearch){b.push(e);}else{t.setProperty("/appSearchDataSource",e);}});if(!this.config.odataProvider&&this.config.isLaunchpad()){b.splice(0,0,this.appDataSource);if(!this.config.searchScopeWithoutAll){b.splice(0,0,this.allDataSource);}}else{b.splice(0,0,this.allDataSource);}this.setProperty("/dataSources",b);this.setProperty("/searchTermPlaceholder",this.calculatePlaceholder());},
resetDataSource:function(a){this.setDataSource(this.getDefaultDataSource(),a);},
isAllCategory:function(){var a=this.getProperty("/uiFilter/dataSource");return a===this.allDataSource;},
isOtherCategory:function(){var a=this.getProperty("/uiFilter/dataSource");return a.type===this.sinaNext.DataSourceType.Category&&!this.isAllCategory();},
isAppCategory:function(){var a=this.getProperty("/uiFilter/dataSource");return a===this.appDataSource;},
getDataSource:function(){return this.getProperty("/uiFilter/dataSource");},
getDefaultDataSource:function(){return this.getProperty("/defaultDataSource");},
setDataSource:function(a,b,r){if(this.getDataSource()!==a){this.eventLogger.logEvent({type:this.eventLogger.DATASOURCE_CHANGE,dataSourceId:a.id});}this.updateDataSourceList(a);this.getProperty("/uiFilter").setDataSource(a);if(r||r===undefined){this.resetTop();}this.setProperty("/searchTermPlaceholder",this.calculatePlaceholder());this.calculateSearchButtonStatus();if(b||b===undefined){this._firePerspectiveQuery();}},
getServerDataSources:function(){var t=this;if(t.getDataSourcesDeffered){return t.getDataSourcesDeffered;}t.getDataSourcesDeffered=t.sina.getDataSources().then(function(a){return jQuery.grep(a,function(b){return b.getType()!=='Category';});});return t.getDataSourcesDeffered;},
notifyFilterChanged:function(){jQuery.each(this.aBindings,function(i,b){if(b.sPath==='/uiFilter/rootCondition'){b.checkUpdate(true);}});},
addFilterCondition:function(a,b){if(a.attribute||a.conditions){this.getProperty("/uiFilter").autoInsertCondition(a);}else{this.setDataSource(a,false);}if(b||b===undefined){this._firePerspectiveQuery({preserveFormerResults:false});}this.notifyFilterChanged();},
removeFilterCondition:function(a,b){if(a.attribute||a.conditions){this.getProperty("/uiFilter").autoRemoveCondition(a);}else{this.setDataSource(a,false);}if(b||b===undefined){this._firePerspectiveQuery({preserveFormerResults:true});}this.notifyFilterChanged();},
resetFilterConditions:function(a){this.getProperty("/uiFilter").resetConditions();if(a||a===undefined){this._firePerspectiveQuery();}this.notifyFilterChanged();},
doSuggestion:function(){this.suggestionHandler.doSuggestion(this.getProperty('/uiFilter').clone());},
abortSuggestions:function(){this.suggestionHandler.abortSuggestions();},
autoSelectAppSuggestion:function(a){return this.suggestionHandler.autoSelectAppSuggestion(a);},
_firePerspectiveQuery:function(a,p){var t=this;this.initBusinessObjSearch().then(function(){var b=function(){return t._doFirePerspectiveQuery(a,p);};t.initPersonalization().then(b);});},
_doFirePerspectiveQuery:function(a,p){var t=this;var b,e;if(jQuery.isPlainObject(a)){b=a.deserialization;e=a.preserveFormerResults;}else{b=a||undefined;e=p||undefined;}var u=this.getProperty('/uiFilter');if(u.equals(this.query.filter)&&this.getTop()===this.query.top&&this.isEqualOrderBy(this.getOrderBy(),this.query.sortOrder)&&this.getCalculateFacetsFlag()===this.query.calculateFacets&&!this.getProperty('/isQueryInvalidated')){return(new jQuery.Deferred()).resolve();}if(S.getUrlParameter('nlq')==='true'){this.query.setNlq(true);}if((this.query.filter.dataSource&&u.dataSource!==this.query.filter.dataSource)||(this.query.filter.searchTerm&&u.searchTerm!==this.query.filter.searchTerm)){this.resetOrderBy(false);}if(!b&&!e){if(!u.equals(this.query.filter)){this.resetTop();}}if(u.searchTerm!==this.query.filter.searchTerm||!u.rootCondition.equals(this.query.filter.rootCondition)){this.tabStripFormatter.invalidate(this.getDataSource());}if(this.getProperty('/isQueryInvalidated')===true){this.query.resetResultSet();this.setProperty('/isQueryInvalidated',false);}this.query.setFilter(this.getProperty('/uiFilter').clone());this.query.setTop(this.getTop());this.query.setSortOrder(this.assembleSortOrder());this.query.setCalculateFacets(this.getCalculateFacetsFlag());this.cleanErrors();this.setProperty("/queryFilter",this.query.filter);sap.ui.getCore().getEventBus().publish("allSearchStarted");if(b){this.setProperty('/busyDelay',0);}else{this.setProperty('/busyDelay',600);}this.setProperty('/isBusy',true);this.abortSuggestions();this.calculateVisibility();this.updateSearchURLSilently(b);this.eventLogger.logEvent({type:this.eventLogger.SEARCH_REQUEST,searchTerm:this.getProperty('/uiFilter/searchTerm'),dataSourceKey:this.getProperty('/uiFilter/dataSource').id});return jQuery.when.apply(null,[this.normalSearch(e),this.appSearch()]).then(function(){t.setProperty('/tabStrips',t.tabStripFormatter.format(t.getDataSource(),t.perspective,t));return t.oFacetFormatter.getFacets(t.getDataSource(),t.perspective,t).then(function(i){if(i&&i.length>0){i[0].change=jQuery.sap.now();t.setProperty('/facets',i);}});}).always(function(){document.title=t.getDocumentTitle();sap.ui.getCore().getEventBus().publish("allSearchFinished");t.setProperty('/isBusy',false);t.setProperty("/firstSearchWasExecuted",true);t.notifyFilterChanged();});},
assembleSortOrder:function(){var a=this.getOrderBy();if(!a.orderBy){return[];}var b=this.sinaNext.SortOrder.Ascending;if(a.sortOrder==='DESC'){b=this.sinaNext.SortOrder.Descending;}return[{id:a.orderBy,order:b}];},
getCalculateFacetsFlag:function(){if(this.getDataSource().type===this.sinaNext.DataSourceType.Category||this.getFacetVisibility()){return true;}return false;},
appSearch:function(){var t=this;this.setProperty("/appResults",[]);this.setProperty("/appCount",0);if(!this.isAllCategory()&&!this.isAppCategory()){return jQuery.when(true);}var a=this.query.filter.dataSource===this.allDataSource?this.appTopDefault:this.query.top;return this.searchApplications(this.query.filter.searchTerm,a,0).then(function(r){t.setProperty("/appCount",r.totalResults);t.setProperty("/appResults",r.getElements());},function(e){t.pushError({type:"error",title:e.name,description:e,keep:e.keep});return jQuery.when(true);});},
searchApplications:function(s,t,a){return sap.ushell.Container.getService("Search").queryApplications({searchTerm:s,top:t,skip:a});},
transferLog:function(a){var b=a.getMessages();for(var i=0;i<b.length;++i){var e=b[i];this.pushError({type:e.severity,title:e.text,description:''});}},
normalSearch:function(p){var t=this;if(!p){t.resetAndDisableMultiSelection();}if(!t.isBusinessObjSearchEnabled()||t.isAppCategory()){this.setProperty("/boResults",[]);this.setProperty("/origBoResults",[]);this.setProperty("/boCount",0);this.setProperty("/nlqSuccess",false);this.setProperty("/nlqDescription","");return jQuery.when(true);}var q=new jQuery.Deferred();var s=function(a){t.transferLog(a.log);t.perspective=a;t.setProperty("/nlqSuccess",false);if(a.nlqSuccess){t.setProperty("/nlqSuccess",true);t.setProperty("/nlqDescription",a.title);}t._afterSearchPrepareResultList(t.perspective,p).then(function(){q.resolve();});};var e=function(a){t.normalSearchErrorHandling(a);t.perspective=null;q.resolve();};t.setDataSource(t.getDataSource(),false,false);t.query.setCalculateFacets(t.getCalculateFacetsFlag());t.query.getResultSetAsync().then(function(a){return s(a);},e);return q;},
_prepareTableResults:function(r){var t=this;var i,j,k;var e=[];var p=this.sinaNext.dataSourceMap[this.getDataSource().id].attributesMetadata;for(i=0;i<p.length;i++){if(p[i].usage.Detail&&p[i].group===undefined&&p[i].type!=="GeoJson"&&p[i].id.match(/latitude|longitude/i)==null&&p[i].type!==t.sinaNext.AttributeType.ImageUrl){e.push(p[i]);}}var q=function(a,b){if(a.usage.Detail.displayOrder<b.usage.Detail.displayOrder){return-1;}if(a.usage.Detail.displayOrder>b.usage.Detail.displayOrder){return 1;}return 0;};e.sort(q);var s=r;var u="\u2013";for(i=0;i<r.length;i++){s[i].cells=[];for(j=0;j<e.length;j++){s[i].cells[j]={};}}for(i=0;i<r.length;i++){var v=r[i].itemattributes;for(j=0;j<e.length;j++){for(k=0;k<v.length;k++){if(e[j].id===v[k].key){s[i].cells[j]={value:v[k].value.trim().length!==0?v[k].value:u};}}}if(r[i].hasTitleDescription){s[i].cells.unshift({value:r[i].titleDescription.trim().length!==0?r[i].titleDescription:u});}s[i].cells.unshift({value:r[i].title.trim().length!==0?r[i].title:u,uri:r[i].uri,titleNavigation:r[i].titleNavigation,isTitle:true});if(r[i].navigationObjects!==undefined&&r[i].navigationObjects.length>0){s[i].cells.push({value:sap.ushell.resources.i18n.getText("intents"),navigationObjects:r[i].navigationObjects,isRelatedApps:true});}}t.setProperty("/tableResults",s);var w=[];var x=[];for(i=0;i<e.length;i++){if(e[i].id.match(/latitude|longitude/i)==null&&e[i].type!==t.sinaNext.AttributeType.ImageUrl){w.push({name:e[i].label,attributeId:e[i].id});}}if(r[0].hasTitleDescription){var y=r[0].titleDescriptionLabel+" ("+sap.ushell.resources.i18n.getText("titleDescription")+")";w.unshift({name:y,attributeId:"SEARCH_TABLE_TITLE_DESCRIPTION_COLUMN"});}w.unshift({name:t.getDataSource().label,attributeId:"SEARCH_TABLE_TITLE_COLUMN"});var z=s[0].cells.length-1;if(s[0].cells[z].isRelatedApps){w.push({name:sap.ushell.resources.i18n.getText("intents"),attributeId:"SEARCH_APPS_AS_ID"});}for(i=0;i<w.length;i++){w[i].key="searchColumnKey"+i;w[i].index=i;}t.setProperty("/tableColumns",w);for(i=0;i<p.length;i++){var A=p[i];if(A.isSortable){x.push({name:A.label,key:"searchSortableColumnKey"+i,attributeId:A.id,selected:t.getProperty("/orderBy").orderBy===A.id});}}var B=function(a,b){if(a.name<b.name){return-1;}if(a.name>b.name){return 1;}return 0;};x.sort(B);x.unshift({name:sap.ushell.resources.i18n.getText("defaultRank"),key:"searchSortableColumnKeyDefault",attributeId:"",selected:jQuery.isEmptyObject(t.getProperty("/orderBy"))});t.setProperty("/tableSortableColumns",x);},
_afterSearchPrepareResultList:function(s,p){var t=this;t.setProperty("/boCount",s.totalCount);var i;t.setProperty("/boResults",[]);t.setProperty("/origBoResults",s.items);t.setProperty("/boCount",0);var a=new c();var b=a.format(s,t.query.filter.searchTerm);var e;var j=[];var k=[];for(i=0;i<b.length;i++){e=b[i];j.push(e.dataSource);k.push({isDocumentConnector:e.isDocumentConnector});}var q=t.config.loadCustomModulesForDataSourcesAsync(j,k);var r=$.Deferred();Promise.all([Promise.resolve(s),q]).then(function(u){var s=u[0];if(!t.isAllCategory()&&!t.isOtherCategory()&&!t.isAppCategory()&&s.totalCount>0){if(s.items[0].titleDescriptionAttributes.length>0){b.forEach(function(v){v.hasTitleDescription=true;});}t._prepareTableResults(b);}t.setProperty("/boCount",s.totalCount);t.setProperty("/boResults",b);t.enableOrDisableMultiSelection();r.resolve();});return r.promise();},
resetAndDisableMultiSelection:function(){this.setProperty("/multiSelectionAvailable",false);this.setProperty("/multiSelectionEnabled",false);},
enableOrDisableMultiSelection:function(){var a=this.getDataSource();var b=this.config.getDataSourceConfig(a);var s=new b.searchResultListSelectionHandlerControl();if(s){this.setProperty("/multiSelectionAvailable",s.isMultiSelectionAvailable());}else{this.setProperty("/multiSelectionAvailable",false);}},
_endWith:function(s,a){return s.indexOf(a,s.length-a.length)!==-1;},
calculatePlaceholder:function(){var t=this;if(t.isAllCategory()){return sap.ushell.resources.i18n.getText("search");}return sap.ushell.resources.i18n.getText("searchInPlaceholder",t.getDataSource().labelPlural);},
updateDataSourceList:function(a){var b=this.getProperty('/dataSources');if(!this.config.searchScopeWithoutAll){while(b.length>0&&b[0]!==this.allDataSource){b.shift();}}if(a===this.allDataSource||a===this.appDataSource){return;}if(a&&a.id){if(a.id.indexOf('~')>=0){return;}}for(var i=0;i<b.length;++i){var e=b[i];if(e===a){return;}}b.unshift(a);this.setProperty('/dataSources',b);},
invalidateQuery:function(){this.setProperty('/isQueryInvalidated',true);},
autoStartApp:function(){var t=this;if(t.getProperty("/appCount")&&t.getProperty("/appCount")===1&&t.getProperty("/count")&&t.getProperty("/count")===1){var a=t.getProperty("/appResults");if(a&&a.length>0&&a[0]&&a[0].url&&t.getProperty('/uiFilter/searchTerm')&&a[0].tooltip&&t.getProperty('/uiFilter/searchTerm').toLowerCase().trim()===a[0].tooltip.toLowerCase().trim()){if(a[0].url[0]==='#'){window.location.href=a[0].url;}else{window.open(a[0].url,'_blank');}}}},
getResultToDisplay:function(){return this.getProperty('/resultToDisplay');},
setResultToDisplay:function(t){this.setProperty('/resultToDisplay',t);S.saveResultViewType(t);},
calculateVisibility:function(){var t=this;if(t.isAppCategory()){t.setResultToDisplay("appSearchResult");t.setProperty('/displaySwitchVisibility',false);}else if(t.isAllCategory()||t.isOtherCategory()){t.setResultToDisplay("searchResultList");t.setProperty('/displaySwitchVisibility',false);}else{var r=t.getResultToDisplay();if(!(r==="searchResultList"||r==="searchResultTable"||r==="searchResultMap")){t.setResultToDisplay("searchResultList");}t.setProperty('/displaySwitchVisibility',true);}},
calculateSearchButtonStatus:function(){if(this.getDataSource()===this.getProperty('/defaultDataSource')&&this.getSearchBoxTerm().length===0){this.setProperty('/searchButtonStatus','close');}else{this.setProperty('/searchButtonStatus','search');}},
calculateResultList:function(){var t=this;var r=[];var b=t.getProperty('/boResults');if(b&&b.length){r.push.apply(r,b);}var a=t.getProperty('/appResults');if(a&&a.length>0){var e={type:'appcontainer',tiles:a};if(r.length>0){if(r.length>3){r.splice(3,0,e);}else{r.push(e);}}else{r=[e];}}sap.ui.model.json.JSONModel.prototype.setProperty.apply(this,['/results',r]);},
getDebugInfo:function(){var t=[this.sinaNext.getDebugInfo()];return t.join('\n');},
getErrors:function(){return this.getProperty('/errors');},
cleanErrors:function(){this.setProperty('/errors',jQuery.grep(this.getProperty('/errors'),function(e){return e.keep;}));},
pushError:function(e){var t=this;e.title=e.title==="[object Object]"?sap.ushell.resources.i18n.getText('searchError'):e.title;var a=this.getProperty('/errors');a.push(e);t.setProperty('/errors',a);},
normalSearchErrorHandling:function(e){if(!e){return;}this.setProperty("/boResults",[]);this.setProperty("/origBoResults",[]);this.setProperty("/boCount",0);this.setProperty("/nlqSuccess",false);this.setProperty("/nlqDescription","");var s=function(t){return t.replace(/<(?:.|\n)*?>|[{}]/gm,'');};if(e instanceof this.sinaNext.core.Exception){this.pushError({type:"error",title:e.message,description:s(e.description)+'\n'+this.getDebugInfo(),keep:e.keep});return;}this.pushError({type:"error",title:e.toString(),description:e.toString()+'\n'+this.getDebugInfo(),keep:e.keep});},
updateSearchURLSilently:function(a){if(a){S.hasher.init();}else{var H=this.renderSearchURL();S.hasher.setHash(H);}},
renderSearchURL:function(){return this.searchUrlParser.render();},
parseURL:function(){this.searchUrlParser.parse();}
});
o.injectSearchShellHelper=function(_){n=n||_;};
return o;});})(window);
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configuratorFactory.js":function(){window.sinaRequire=window.sinaRequire||(window.sap&&window.sap.ui&&window.sap.ui.require)||window.require;window.sinaDefine=window.sinaDefine||(window.sap&&window.sap.ui&&window.sap.ui.define)||window.define;window.sinaLog=window.sinaLog||(window.jQuery&&window.jQuery.sap&&window.jQuery.sap.log)||window.console;sinaDefine(['../core/core','./configurators/CustomFunctionConfigurator','./configurators/TemplateConfigurator','./configurators/TextResourceConfigurator','./configurators/SimpleValueConfigurator','./configurators/ListConfigurator','./configurators/ObjectConfigurator'],function(c,C,T,a,S,L,O){"use strict";var b=[C,L,O,T,a,S];var m={createConfiguratorAsync:function(o){o.createConfiguratorAsync=m.createConfiguratorAsync.bind(m);for(var i=0;i<b.length;++i){var d=b[i];if(d.prototype.isSuitable(o)){return m._createAsync(d,o);}}},_createAsync:function(d,o){var e=new d(o);return c.Promise.resolve().then(function(){return e.initResourceBundleAsync();}).then(function(){return e.initAsync();}).then(function(){return e;});}};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/Configurator.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";return c.defineClass({_init:function(o){this.type=o.type;this.typeContext=o.typeContext;this.configuration=o.configuration;this.createConfiguratorAsync=o.createConfiguratorAsync;},createContext:function(o,a){if(!o){return{objectStack:[a],configuratorStack:[this]};}var b=o.objectStack.slice();b.push(a);var d=o.configuratorStack.slice();d.push(this);return{objectStack:b,configuratorStack:d};},getResourceBundle:function(a){for(var i=a.configuratorStack.length-1;i>=0;--i){var b=a.configuratorStack[i];if(b.resourceBundle){return b.resourceBundle;}}},getEvaluateTemplateFunction:function(a){var b=function(e,o){return function(t){return e(t,o);};};for(var i=a.configuratorStack.length-1;i>=0;--i){var d=a.configuratorStack[i];var o=a.objectStack[i];if(d.type&&d.type.evaluateTemplate){return b(d.type.evaluateTemplate,o);}}},initResourceBundleAsync:function(){if(!this.configuration.resourceBundle){return undefined;}return this.loadResourceBundleAsync(this.configuration.resourceBundle).then(function(r){this.resourceBundle=r;}.bind(this));},loadResourceBundleAsync:function(u){if(!window.jQuery){return c.Promise.resolve({getText:function(i){return i;}});}return new c.Promise(function(r,a){jQuery.sap.resources({url:u,async:true}).then(function(b){r(b);},function(e){a(e);});});},configure:function(){},configureAsync:function(){var a=arguments;return c.Promise.resolve().then(function(){return this.configure.apply(this,a);}.bind(this));},isInitialOrForced:function(v){if(this.force||typeof v==='undefined'||(c.isObject(v)&&v===null)||(c.isString(v)&&v.length===0)){return true;}return false;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/CustomFunctionConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(){if(c.isObject(this.configuration)){this.customFunction=this.configuration.func;this.force=this.configuration.force;return;}this.customFunction=this.configuration;this.force=false;},isSuitable:function(o){if(c.isFunction(o.configuration)){return true;}if(c.isObject(o.configuration)&&o.configuration.hasOwnProperty('func')){return true;}},configure:function(v,a){if(this.isInitialOrForced(v)){return this.customFunction(v,a);}return v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/ListConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(){this.elements=[];this.cache={};var p=[];for(var i=0;i<this.configuration.length;++i){var e=this.configuration[i];p.push(this.createElementConfiguratorAsync(this.type,e,i));}return c.Promise.all(p);},isSuitable:function(o){if(o.typeContext&&o.typeContext.multiple&&c.isList(o.configuration)){return true;}},createElementConfiguratorAsync:function(t,a,i){return this.createConfiguratorAsync({type:t,configuration:a}).then(function(b){this.elements.push({configuration:a,configurator:b,id:i});}.bind(this));},getElement:function(l){var a=this.typeContext.getElementId(l);var e=this.cache[a];if(e){return e;}for(var i=0;i<this.elements.length;++i){e=this.elements[i];if(this.matchId(l,e)){this.cache[a]=e;return e;}}},matchId:function(l,e){var a=this.typeContext.getElementId(l);var b=this.typeContext.getElementId(e.configuration);var m;if(c.isObject(b)&&b.hasOwnProperty('regExp')){if(!b.regExpObj){b.regExpObj=new RegExp(b.regExp,b.regExpFlags);}m=b.regExpObj.test(a);}else{m=a===b;}return m;},createEmptyUsedElements:function(){var u=[];for(var i=0;i<this.elements.length;++i){u.push(false);}return u;},configure:function(l,a){if(!l){l=[];}a=this.createContext(a,l);var u=this.createEmptyUsedElements();var e,b,n;for(var i=0;i<l.length;++i){b=l[i];e=this.getElement(b);if(!e){continue;}var d=e.configurator.configure(b,a);if(d!==b){l[i]=d;}u[e.id]={index:i};}var f;var g=0;if(this.typeContext.createElement){for(var j=0;j<u.length;++j){var h=u[j];e=this.elements[j];if(h){f=h;continue;}var t=this.typeContext.createElement(e.configuration,a);n=e.configurator.configure(t,a);var k=(f?f.index:-1)+g+1;l.splice(k,0,n);g++;if(this.typeContext.postProcessCreatedElement){this.typeContext.postProcessCreatedElement(n,a);}}}return l;},configureAsync:function(l,a){if(!l){l=[];}a=this.createContext(a,l);var u=this.createEmptyUsedElements();var b;var n=0;var d=function(f){if(f>=l.length){return null;}var g=l[f];var h=this.getElement(g);if(!h){return d(f+1);}u[h.id]={index:f};return c.Promise.resolve().then(function(){return h.configurator.configureAsync(g,a);}).then(function(i){if(i!==g){l[f]=i;}return d(f+1);});}.bind(this);var e=function(f){if(f>=this.elements.length){return null;}var g=this.elements[f];var h=u[f];if(h){b=h;return e(f+1);}var t=this.typeContext.createElement(g.configuration,a);return c.Promise.resolve().then(function(){return g.configurator.configureAsync(t,a);}).then(function(i){var j=(b?b.index:-1)+n+1;l.splice(j,0,i);n++;if(this.typeContext.postProcessCreatedElement){this.typeContext.postProcessCreatedElement(i,a);}return e(f+1);}.bind(this));}.bind(this);return c.Promise.resolve().then(function(){return d(0);}).then(function(){if(!this.typeContext.createElement){return null;}return e(0);}.bind(this)).then(function(){return l;});}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/ObjectConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(o){this.properties=[];var p=[];for(var i=0;i<this.type.properties.length;++i){var a=this.type.properties[i];var b=this.configuration[a.name];if(!b){continue;}p.push(this.createPropertyConfiguratorAsync(a,b));}return c.Promise.all(p);},createPropertyConfiguratorAsync:function(p,a){return this.createConfiguratorAsync({type:p.type,typeContext:p,configuration:a}).then(function(b){this.properties.push({name:p.name,configurator:b});}.bind(this));},isSuitable:function(o){if(c.isObject(o.configuration)&&c.isObject(o.type)&&o.type.type==='object'){return true;}},configure:function(o,a){a=this.createContext(a,o);this.object=o;for(var i=0;i<this.properties.length;++i){var p=this.properties[i];o[p.name]=p.configurator.configure(o[p.name],a);}return o;},configureAsync:function(o,a){a=this.createContext(a,o);this.object=o;var b=function(p){return c.Promise.resolve().then(function(){return p.configurator.configureAsync(o[p.name],a);}).then(function(v){o[p.name]=v;});};return c.Promise.all(c.map(this.properties,b)).then(function(){return o;});}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/SimpleValueConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(){if(c.isObject(this.configuration)){this.value=this.configuration.value;this.force=this.configuration.force;return;}this.value=this.configuration;this.force=false;},isSuitable:function(o){if(c.isString(o.type)&&['string','integer','object'].indexOf(o.type)>=0){return true;}return false;},configure:function(v,a){if(this.isInitialOrForced(v)){return this.value;}return v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/TemplateConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(){this.template=this.configuration.template;this.force=this.configuration.force;},isSuitable:function(o){if(c.isString(o.type)&&['string'].indexOf(o.type)>=0&&c.isObject(o.configuration)&&o.configuration.hasOwnProperty('template')){return true;}return false;},configure:function(v,a){if(this.isInitialOrForced(v)){var e=this.getEvaluateTemplateFunction(a);return e(this.configuration.template);}return v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/configurationEngine/configurators/TextResourceConfigurator.js":function(){sinaDefine(['../../core/core','./Configurator'],function(c,C){"use strict";return C.derive({initAsync:function(){this.resourceKey=this.configuration.resourceKey;this.force=this.configuration.force;},isSuitable:function(o){if(c.isString(o.type)&&['string'].indexOf(o.type)>=0&&c.isObject(o.configuration)&&o.configuration.resourceKey){return true;}return false;},configure:function(v,a){if(this.isInitialOrForced(v)){var r=this.resourceBundle||this.getResourceBundle(a);return r.getText(this.resourceKey);}return v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/core/LabelCalculator.js":function(){sinaDefine(['./core'],function(c){"use strict";var D=c.Exception.derive({_init:function(p){p.message='Duplicate node';c.Exception.prototype._init.apply(this,arguments);this.node=p.node;}});var N=c.defineClass({_init:function(p,n,l){this.parent=p;this.nodeId=n;this.labelCalculator=l;this.childMap={};this.children=[];},insert:function(k,o){if(k.length===0){this.data=this.labelCalculator.options.data(o);this.obj=o;this.calculateLabel();return;}var a=k[0];var s=this.childMap[a];if(k.length===1&&s){throw new D({node:s});}if(!s){s=new N(this,a,this.labelCalculator);this.childMap[a]=s;this.children.push(s);if(this.children.length===2){this.children[0].recalculateLabels();}}s.insert(k.slice(1),o);},recalculateLabels:function(){var l=[];this.collectLeafs(l);for(var i=0;i<l.length;++i){l[i].calculateLabel();}},collectLeafs:function(l){if(this.isLeaf()){l.push(this);return;}for(var i=0;i<this.children.length;++i){this.children[i].collectLeafs(l);}},isLeaf:function(){return this.children.length===0;},hasSibling:function(){return this.parent&&this.parent.children.length>=2;},isChildOfRoot:function(){return this.parent&&this.parent.nodeId==='__ROOT';},collectPath:function(k,f){if(!this.parent){return;}if(f||this.hasSibling()||this.isChildOfRoot()){k.push(this.nodeId);f=true;}if(this.parent){this.parent.collectPath(k,f);}},calculateLabel:function(){var k=[];this.collectPath(k);k.reverse();this.labelCalculator.options.setLabel(this.obj,k,this.data);}});return c.defineClass({_init:function(o){this.options=o;this.rootNode=new N(null,'__ROOT',this);},calculateLabel:function(o){var k=this.options.key(o);try{this.rootNode.insert(k,o);}catch(e){if(e instanceof D){this.options.setFallbackLabel(e.node.obj,e.node.data);this.options.setFallbackLabel(o,this.options.data(o));return;}throw e;}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/core/Log.js":function(){sinaDefine(['./core'],function(c){"use strict";var L=c.defineClass({ERROR:'error',WARNING:'warning',INFO:'info',_init:function(){this.messages=[];},getMessages:function(){return this.messages;},addMessage:function(s,t){this.messages.push({severity:s,text:t});}});return L;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/core/ajax.js":function(){sinaDefine(['./core','./util'],function(c,u){"use strict";var m={};m.parseHeaders=function(h){var a={};var l=h.split('\n');for(var i=0;i<l.length;++i){var b=l[i];var d=b.indexOf(':');if(d>=0){var n=b.slice(0,d).toLowerCase();var v=b.slice(d+1);a[n]=v.trim();}}return a;};m.encodeUrlParameters=function(p){var r=[];for(var n in p){var v=p[n];r.push(encodeURIComponent(n)+'='+encodeURIComponent(v));}return r.join('&');};m.addEncodedUrlParameters=function(a,p){if(!p){return a;}var e=m.encodeUrlParameters(p);if(e.length>0){a+='?'+e;}return a;};m.Exception=c.Exception.derive({_init:function(x){this.xhttp=x;this.status=x.status;this.statusText=x.statusText;this.responseText=x.responseText;this.headers=m.parseHeaders(x.getAllResponseHeaders());c.Exception.prototype._init.apply(this,[{message:this.status+': '+this.statusText,description:this.responseText}]);}});m.request=function(p){return new Promise(function(r,a){var x=new XMLHttpRequest();x.onreadystatechange=function(){if(x.readyState==4&&(x.status==200||x.status==201||x.status==204)){r({data:x.responseText,headers:m.parseHeaders(x.getAllResponseHeaders())});return;}if(x.readyState==4){a(new m.Exception(x));}};var b=m.addEncodedUrlParameters(p.url,p.parameters);x.open(p.method,b,true);for(var h in p.headers){var d=p.headers[h];x.setRequestHeader(h,d);}x.send(p.data);});};m.Client=c.defineClass({_init:function(p){this._client=new m._Client(p);this.recordOptions={mode:u.getUrlParameter('recordingMode')||p.recordingMode||"none",path:u.getUrlParameter('recordingPath')||p.recordingPath||"",requestNormalization:p.requestNormalization||this._defaultRequestNormalization};this.records={};},_encodeObj:function(d){var r=[];for(var p in d){if(d.hasOwnProperty(p)){r.push(encodeURIComponent(p)+"="+encodeURIComponent(d[p]));}}return r.join("&");},getJson:function(a,d){var t=this;if(d){var D='?'+t._encodeObj(d);a=a+D;}if(t.recordOptions.mode==="none"){return t._client.getJson(a);}if(t.recordOptions.mode==="replay"){return t._replay(a,null);}return t._client.getJson(a).then(function(r){return t._record(a,null,r);});},getXML:function(a){var t=this;if(t.recordOptions.mode==="none"){return t._client.getXML(a);}if(t.recordOptions.mode==="replay"){return t._replayXML(a);}return t._client.getXML(a).then(function(r){return t._recordXML(a,r);});},postJson:function(a,p){p=JSON.parse(JSON.stringify(p));var t=this;if(t.recordOptions.mode==="none"){return t._client.postJson(a,p);}if(t.recordOptions.mode==="replay"){return t._replay(a,p);}return t._client.postJson(a,p).then(function(r){return t._record(a,p,r);});},mergeJson:function(a,p){p=JSON.parse(JSON.stringify(p));var t=this;if(t.recordOptions.mode==="none"){return t._client.mergeJson(a,p);}if(t.recordOptions.mode==="replay"){return t._replay(a,p);}return t._client.mergeJson(a,p).then(function(r){return t._record(a,p,r);});},request:function(p){return this._client.request(p);},_record:function(a,p,r){var t=this;var k=a+JSON.stringify(t.recordOptions.requestNormalization(p));if(t.records[k]===undefined&&k.indexOf("NotToRecord")===-1){t.records[k]=JSON.parse(JSON.stringify(r.data));}return t._client.putJson(t.recordOptions.path,t.records).then(function(){return r;});},_recordXML:function(a,r){var t=this;var k=a;if(t.records[k]===undefined&&k.indexOf("NotToRecord")===-1){t.records[k]=r;}return t._client.putJson(t.recordOptions.path,t.records).then(function(){return r;});},_replay:function(a,p){var t=this;var k=a+JSON.stringify(t.recordOptions.requestNormalization(p));return t._client.getJson(t.recordOptions.path).then(function(r){return{data:r.data[k]};});},_replayXML:function(a){var t=this;var k=a;return t._client.getJson(t.recordOptions.path).then(function(r){return r.data[k];});},_defaultRequestNormalization:function(p){if(p===null){return"";}delete p.SessionID;delete p.SessionTimestamp;return p;}});m._Client=c.defineClass({_init:function(p){this.csrf=p.csrf;this.csrfByPassCache=p.csrfByPassCache||false;this.csrfToken=null;this.csrfFetchRequest=p.csrfFetchRequest||null;},jsonHeaders:{'Content-Type':'application/json','Accept':'application/json'},xmlHeaders:{'Content-Type':'application/xml','Accept':'application/xml'},getJson:function(a){return this.request({headers:this.jsonHeaders,method:'GET',url:a}).then(function(r){if(r.data.length===0){r.data='{}';}if(typeof(r.data)!=="object"){r.data=JSON.parse(r.data);}return r;});},getXML:function(a){return this.request({headers:this.xmlHeaders,method:'GET',url:a}).then(function(r){return r.data;});},postJson:function(a,d){return this.request({headers:this.jsonHeaders,method:'POST',url:a,data:JSON.stringify(d)}).then(function(r){if(r.data.length===0){r.data='{}';}if(typeof(r.data)!=="object"){r.data=JSON.parse(r.data);}return r;});},mergeJson:function(a,d){return this.request({headers:this.jsonHeaders,method:'MERGE',url:a,data:JSON.stringify(d)}).then(function(r){if(r.data.length===0){r.data='{}';}if(typeof(r.data)!=="object"){r.data=JSON.parse(r.data);}return r;});},putJson:function(d,a){return this.request({method:'PUT',url:d,data:JSON.stringify(a)}).catch(function(e){throw e;});},_fetchCsrf:function(){if(this.csrfFetchRequestPromise){return this.csrfFetchRequestPromise;}this.csrfFetchRequest.headers=this.csrfFetchRequest.headers||{};this.csrfFetchRequest.headers['x-csrf-token']='fetch';this.csrfFetchRequest.parameters=this.csrfFetchRequest.parameters||{};if(this.csrfByPassCache){this.csrfFetchRequest.parameters._=Date.now();}this.csrfFetchRequestPromise=m.request(this.csrfFetchRequest).then(function(r){this.csrfFetchRequestPromise=null;this.csrfToken=r.headers['x-csrf-token'];return r;}.bind(this));return this.csrfFetchRequestPromise;},_requestWithCsrf:function(p,r){if(m.addEncodedUrlParameters(this.csrfFetchRequest.url,this.csrfFetchRequest.parameters)===m.addEncodedUrlParameters(p.url,p.parameters)){return this._fetchCsrf();}if(r&&!this.csrfToken){return this._fetchCsrf().then(function(){return this._requestWithCsrf(p,false);}.bind(this));}p.headers=p.headers||{};p.headers['x-csrf-token']=this.csrfToken;return m.request(p).catch(function(e){if(r&&e.headers['x-csrf-token']&&e.headers['x-csrf-token'].toLowerCase()==='required'){return this._fetchCsrf().then(function(){return this._requestWithCsrf(p,false);}.bind(this));}return c.Promise.reject(e);}.bind(this));},request:function(p){if(!this.csrf){return m.request(p);}if(!this.csrfFetchRequest){this.csrfFetchRequest=p;}return this._requestWithCsrf(p,true);}});return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/core/core.js":function(){window.sinaRequire=window.sinaRequire||(window.sap&&window.sap.ui&&window.sap.ui.require)||window.require;window.sinaDefine=window.sinaDefine||(window.sap&&window.sap.ui&&window.sap.ui.define)||window.define;window.sinaLog=window.sinaLog||(window.jQuery&&window.jQuery.sap&&window.jQuery.sap.log)||window.console;sinaDefine([],function(){"use strict";var m={};m.map=function(l,c,h){var r=[];for(var i=0;i<l.length;++i){r.push(c.apply(h,[l[i]]));}return r;};m.filter=function(l,c){var r=[];for(var i=0;i<l.length;++i){var h=l[i];if(c(h)){r.push(h);}}return r;};m.object=function(p){var T=function(){};T.prototype=p;return new T();};m.extend=function(o,c){for(var k in c){o[k]=c[k];}return o;};m.firstCharToUpper=function(t,r){if(r){if(t[0]==='_'){t=t.slice(1);}}return t[0].toUpperCase()+t.slice(1);};m.isList=function(o){if(Object.prototype.toString.call(o)==='[object Array]'){return true;}return false;};m.isObject=function(o){if(m.isList(o)){return false;}return typeof o==='object';};m.isEmptyObject=function(o){for(var p in o){if(o.hasOwnProperty(p)){return false;}}return JSON.stringify(o)===JSON.stringify({});};m.isFunction=function(o){return typeof o==='function';};m.isString=function(o){return(typeof o)==='string';};m.isSimple=function(o){return(typeof o)!=='object'&&(typeof o)!=='function';};m.Promise=Promise;var g=function(){var c=(function(){return function(){if(arguments[0]==='_suppress_init_'){return;}this._genericInit.apply(this,arguments);};})();return c;};var B=g();B.prototype={_getClassHierarchyPrototypes:function(){var p=[];var c=this.constructor.prototype;while(c){p.push(c);c=c.constructor.superPrototype;}p.reverse();return p;},_genericInit:function(){var c=arguments[0]||{};var p=this._getClassHierarchyPrototypes();for(var i=0;i<p.length;++i){var h=p[i];if(h.hasOwnProperty('_beforeInitProperties')){h._beforeInitProperties.apply(this,arguments);}this._initPropertiesOfPrototype(h,c);if(h.hasOwnProperty('_afterInitProperties')){h._afterInitProperties.apply(this,arguments);}}if(this._init){this._init.apply(this,arguments);}},_initPropertiesOfPrototype:function(p,c){var s=function(j,l,n){if(!j.aggregation){return;}if(!n){return;}if(m.isList(n)){for(var i=0;i<n.length;++i){var o=n[i];o.parent=l;}}else{n.parent=l;}};if(!p.hasOwnProperty('_meta')||!p._meta.properties){return;}for(var h in p._meta.properties){var j=p._meta.properties[h];var k=c[h];if(k!==undefined){this[h]=k;s(j,this,this[h]);continue;}if(j.required){throw new m.Exception('initialization property missing:'+h);}if(j.default!==undefined){if(m.isFunction(j.default)){this[h]=j.default.apply(this,[]);}else{this[h]=j.default;}}s(j,this,this[h]);}},_initClone:function(){},_equals:function(o){if(!o){return false;}if(!m.isObject(o)){return false;}if(o.constructor!==this.constructor){return false;}return true;},equals:function(o,c){var p=this._getClassHierarchyPrototypes();for(var i=0;i<p.length;++i){var h=p[i];if(!h.hasOwnProperty('_equals')){continue;}if(!h._equals.apply(this,[o,c])){return false;}}return true;},clone:function(){var c=new this.constructor('_suppress_init_');var p=this._getClassHierarchyPrototypes();for(var i=0;i<p.length;++i){var h=p[i];if(!h.hasOwnProperty('_initClone')){continue;}h._initClone.apply(c,[this]);}return c;}};B.prototype.constructor=B;var a=function(p,c){var h='get'+m.firstCharToUpper(c,true);if(p[h]){return;}p[h]=function(v){return this[c];};};var b=function(p,c){var h='set'+m.firstCharToUpper(c,true);if(p[h]){return;}p[h]=function(v){this[c]=v;};};var d=function(p){if(!p.hasOwnProperty('_meta')){return;}var c=p._meta.properties;if(!c){return;}for(var h in c){var i=c[h];if(i.getter){a(p,h);}if(i.setter){b(p,h);}}};var e=function(p,c){var C=g();if(!p){p=B;}C.prototype=m.extend(new p('_suppress_init_'),c);C.superPrototype=p.prototype;C.prototype.constructor=C;d(C.prototype);C.derive=function(h){return e(C,h);};return C;};m.defineClass=function(p){return e(null,p);};m.Exception=m.defineClass({_init:function(p){if(m.isString(p)){this.previous=null;this.message=p;this.description='';return;}this.previous=p.previous;this.message=p.message;this.description=p.description||'';},toString:function(){if(this.description){return this.message+'\n'+this.description;}return this.message;}});m.equals=function(o,c,h){if(m.isList(o)){return m._equalsList(o,c,h);}if(m.isObject(o)){return m._equalsObject(o,c,h);}return o===c;};m._equalsList=function(l,c,o){if(o===undefined){o=true;}if(l.length!==c.length){return false;}if(o){for(var i=0;i<l.length;++i){if(!m.equals(l[i],c[i],o)){return false;}}return true;}var h={};for(var j=0;j<l.length;++j){var n=l[j];var p=false;for(var k=0;k<c.length;++k){var q=c[k];if(h[k]){continue;}if(m.equals(n,q,o)){p=true;h[k]=true;break;}}if(!p){return false;}}return true;};m._equalsObject=function(o,c,h){if(o.equals){return o.equals(c);}if(!m.isObject(c)){return false;}for(var p in o){var i=o[p];var j=c[p];if(!m.equals(i,j,h)){return false;}}return true;};m.clone=function(o){if(m.isList(o)){return m._cloneList(o);}if(m.isObject(o)){return m._cloneObject(o);}return o;};m._cloneList=function(l){var c=[];for(var i=0;i<l.length;++i){var h=l[i];c.push(m.clone(h));}return c;};m._cloneObject=function(o){if(o.clone){return o.clone();}var c={};for(var p in o){var v=o[p];c[p]=m.clone(v);}return c;};var f=0;m.generateId=function(){return'#'+(++f);};m.generateGuid=function(){return'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16).toUpperCase();});};m.executeSequentialAsync=function(t,c){if(!t){return m.Promise.resolve();}var h=function(i){if(i>=t.length){return undefined;}var j=t[i];return Promise.resolve().then(function(){if(c){return c(j);}return j();}).then(function(){return h(i+1);});};return h(0);};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/core/lang.js":function(){sinaDefine(['./core'],function(c){"use strict";return{getLanguagePreferences:function(){var a=typeof InstallTrigger!=='undefined';var b=false||!!document.documentMode;var d=!b&&!!window.StyleMedia;var e=!!window.chrome&&!!window.chrome.webstore;var l=[];if(b||d){var f=window.navigator.browserLanguage||window.navigator.language;l.splice(0,0,this._getLanguageCountryObject(f));}else if(a||e){var g=window.navigator.language;var h=window.navigator.languages.slice();var j=h.indexOf(g);if(j>-1){h.splice(j,1);}l.splice(0,0,this._getLanguageCountryObject(g));for(var i=0;i<h.length;i++){var k=this._getLanguageCountryObject(h[i]);if(k){l.splice(l.length,0,k);}}}else{l.splice(0,0,this._getLanguageCountryObject(window.navigator.language));}return l;},_getLanguageCountryObject:function(l){var a,b;var d={};if(l.length===2){a=l;b='';}else if(l.length===5&&l.indexOf('-')===2){a=l.substr(0,2);b=l.substr(3);}else{return undefined;}d.Language=a;d.Country=b;return d;}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/core/util.js":function(){sinaDefine(['./core'],function(c){"use strict";var m={};m.sampleProviderInstanceCounter=0;m.timeoutDecorator=function(o,t){var d=function(){var a=this;var b=arguments;return new c.Promise(function(r,e){var f=false;var g=setTimeout(function(){f=true;e(new c.Exception('timeout'));},t);return o.apply(a,b).then(function(h){if(f){return;}clearTimeout(g);r(h);},function(h){if(f){return;}clearTimeout(g);e(h);});});};return d;};m.refuseOutdatedResponsesDecorator=function(o){var a=0;var d=function(){var r=++a;return o.apply(this,arguments).then(function(b){return new c.Promise(function(e,f){if(r!==a){return;}e(b);});},function(e){return new c.Promise(function(b,f){if(r!==a){return;}f(e);});});};d.abort=function(){++a;};return d;};m.getUrlParameter=function(n,u){if(!u){u=window.location.href;}n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),a=r.exec(u);if(!a){return null;}if(!a[2]){return'';}return decodeURIComponent(a[2].replace(/\+/g," "));};m.filterString=function(t,r){for(var i=0;i<r.length;++i){var a=r[i];var b=0;while(b>=0){b=t.indexOf(a);if(b>=0){t=t.slice(0,b)+t.slice(b+a.length);}}}return t;};m.generateTimestamp=function(){var p=function(n,a){var s="000000000"+n;return s.substr(s.length-a);};var d=new Date();return''+d.getUTCFullYear()+p(d.getUTCMonth()+1,2)+p(d.getUTCDate(),2)+p(d.getUTCHours(),2)+p(d.getUTCMinutes(),2)+p(d.getUTCSeconds(),2)+p(d.getUTCMilliseconds(),3);};m.DelayedConsumer=c.defineClass({_init:function(p){p=p||{};this.timeDelay=p.timeDelay||1000;this.consumer=p.consumer||function(){};this.consumerContext=p.consumerContext||null;this.objects=[];},add:function(o){this.objects.push(o);if(this.objects.length===1){setTimeout(this.consume.bind(this),this.timeDelay);}},consume:function(){this.consumer.apply(this.consumerContext,[this.objects]);this.objects=[];}});m.dateToJson=function(d){return{type:'Timestamp',value:d.toJSON()};};m.dateFromJson=function(j){if(j.type!=='Timestamp'){throw new c.Exception('Not a timestampe '+j);}return new Date(j.value);};m.addPotentialNavTargetsToAttribute=function(r){if(r.items){var a=r.items;for(var i=0;i<a.length;i++){var b=a[i];b=this.addGeoDataIfAvailable(b);var d=b.detailAttributes;for(var j=0;j<d.length;j++){var e=d[j];var s=e.sina;var v=e.value;var f=e.metadata;if(typeof v==='string'&&e.metadata.type!=="ImageUrl"){var g=v.match(/^[^\0-\x20,:;<>@\[\\\]^_`]+@[^\0-,.-@\[\\\]^_`\{\|\}~]+\.[^\0-,.-@\[\\\]^_`\{\|\}~]+$/g);var h=v.match(/^(?!\d*$)(?=(?:[()\[\]+\-\/ ]*\d[()\[\]+\-\/ ]*){9,15}$)\+?(?:\d+|\(\d+(?: \d+)*\)|\[\d+\]|[\/ ]|\d-\d)+$/g);var u=v.match(/^https?:\/\/(?=[^\/])\S+$/gi);if(f.semantics==s.AttributeSemanticsType.EmailAddress){e.defaultNavigationTarget=s._createNavigationTarget({label:v,targetUrl:'mailto:'+v});}else if(f.semantics==s.AttributeSemanticsType.PhoneNr){e.defaultNavigationTarget=s._createNavigationTarget({label:v,targetUrl:'tel:'+v});}else if(f.semantics==s.AttributeSemanticsType.HTTPURL){e.defaultNavigationTarget=s._createNavigationTarget({label:v,targetUrl:v,target:"_blank"});}else if(g!==null&&g.length===1){e.defaultNavigationTarget=s._createNavigationTarget({label:g[0],targetUrl:'mailto:'+g[0]});}else if(h!==null&&h[0].match(/\d\d\d/)!==null){e.defaultNavigationTarget=s._createNavigationTarget({label:h[0],targetUrl:'tel:'+h[0]});}else if(u!==null&&u[0].match(/\w\w\w/)!==null){e.defaultNavigationTarget=s._createNavigationTarget({label:u[0],targetUrl:u[0],target:"_blank"});}}}}}return r;};m.removePureAdvancedSearchFacets=function(r){var d=r.sina.getDataSource(r.query.filter.dataSource.id);for(var i=0;i<r.facets.length;i++){var a=r.facets[i].query.dimension;var b=d.attributeMetadataMap[a];if(b&&b.usage.AdvancedSearch&&b.usage.Facet===undefined){r.facets.splice(i,1);i=i-1;}}return r;};m.isMapsAttribute=function(a,r,i){var b=false;var l,d,n,v,e,f,g,h;n=a.id;v=a.value;if(n.match(/latitude/i)!==null){if(!isNaN(v)){g=n;l=v;e=i;}b=true;}else if(n.match(/longitude/i)!==null){if(!isNaN(v)){h=n;d=v;f=i;}b=true;}else if(n.match(/LOC_4326/)){f=i;e=i;var L=JSON.parse(v);var C=L.coordinates;if(C&&C.length>1){d=C[0];l=C[1];}b=true;}if(r===undefined||r===true){return b;}return{lat:l,lon:d,latAttribName:g,lonAttribName:h,latIndex:e,lonIndex:f};};m.addGeoDataIfAvailable=function(a){var r,b,l,d,e,f,g;b=a.detailAttributes;for(var i=0;i<b.length;i++){r=this.isMapsAttribute(b[i],false,i);l=r.lat?r.lat:l;d=r.lon?r.lon:d;f=r.latIndex?r.latIndex:f;g=r.lonIndex?r.lonIndex:g;if(l&&d){break;}}if(l&&d){if(f===g){b.splice(f,1);}else if(f>g){b.splice(f,1);b.splice(g,1);}else{b.splice(g,1);b.splice(f,1);}var n={sina:a.sina,type:"GeoJson",id:"LOC_4326",label:"LOC_4326",isCurrency:false,IsBoolean:false,IsKey:false,IsSortable:true,isUnitOfMeasure:false,semanticObjectType:[],isQuantity:"",usage:{"Map":"coordinates"}};var v='{ "type": "Point", "coordinates": ['+d+', '+l+', 0] }';var h={id:"LOC_4326",label:"LOC_4326",isHighlighted:false,value:v,valueFormatted:v,valueHighlighted:a.sina,metadata:n,sina:a.sina};b.push(h);e=a.sina.getDataSource(a.dataSource.id);if(!e.attributeMetadataMap.LOC_4326){e.attributesMetadata.push(n);e.attributeMetadataMap.LOC_4326=n;}else{e.attributeMetadataMap.LOC_4326.type="GeoJson";e.attributeMetadataMap.LOC_4326.usage={"Map":"coordinates"};}}return a;};m.cacheDecorator=function(o){var a={};return function(i){if(a.hasOwnProperty(i)){return a[i];}var v=o.apply(this,[i]);a[i]=v;return v;};};m.escapeRegExp=function(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");};m.evaluateTemplate=function(t,o){var p=new RegExp('{{(.*)}}');var g=function(t){var a=p.exec(t);if(!a){return null;}return a[1];};var r=function(t,a,v){var b=new RegExp('{{'+m.escapeRegExp(a)+'}}','g');t=t.replace(b,v);return t;};var e=function(t){var a=g(t);if(!a){return t;}t=r(t,a,o[a]);return e(t);};return e(t);};m.extractRegExp=new RegExp('<b>(.*?)<\\/b>','g');m.extractHighlightedTerms=function(t){var a;var r=[];do{a=m.extractRegExp.exec(t);if(a){r.push(a[1]);}}while(a);return r;};m.appendRemovingDuplicates=function(l,a){for(var i=0;i<a.length;++i){var e=a[i];if(l.indexOf(e)<0){l.push(e);}}};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/FacetParser.js":function(){sinaDefine(['../../core/core','../../sina/SearchQuery','./typeConverter'],function(c,S,t){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},parse:function(q,d){if(d.ValueHelp){this.prepareValueHelpFacet(q,d);}var f=[];if(!d.Facets||!d.Facets.results){return[];}for(var i=0;i<d.Facets.results.length;i++){var a=d.Facets.results[i];var b=a.Type;if(b==='DataSource'){f.push(this.parseDataSourceFacet(q,a));}else{if(q.filter.dataSource.type===q.sina.DataSourceType.Category){continue;}f.push(this.parseChartFacet(q,a));}}return c.Promise.all(f);},prepareValueHelpFacet:function(q,d){var s=d.ValueHelp.results;var a=this.sina.getDataSource(q.filter.dataSource.id);var b=d.ValueHelpAttribute;var m=a.getAttributeMetadata(b);var e={Id:d.ValueHelpAttribute,Name:m.label,Type:"AttributeValue",Values:{results:[]}};var r=[];for(var i=0;i<s.length;i++){var f=s[i];r.push({Description:f.ValueFormatted,NumberOfObjects:f.NumberOfInstances,Type:"AttributeValue",ValueLow:f.Value,ValueLowFormatted:f.ValueFormatted,ValueHigh:"",ValueHighFormatted:""});}e.Values.results=r;d.Facets={};d.Facets.results=[];d.Facets.results[0]=e;},parseDataSourceFacet:function(q,f){var d=q;if(q instanceof S){d=this.sina.createDataSourceQuery({dataSource:q.filter.dataSource,filter:q.filter.clone()});}var a=[];for(var i=0;i<f.Values.results.length;i++){var b=f.Values.results[i];var e=this.sina.getDataSource(b.ValueLow);if(!e){e=this.sina._createDataSource({type:this.sina.DataSourceType.Category,id:b.ValueLow,label:b.Description});}a.push(this.sina._createDataSourceResultSetItem({dataSource:e,dimensionValueFormatted:e.labelPlural,measureValue:b.NumberOfObjects,measureValueFormatted:(b.NumberOfObjects).toString()}));}var r=this.sina._createDataSourceResultSet({title:q.filter.dataSource.label,items:a,query:d});if(q instanceof S){return d._setResultSet(r);}return r;},createAttributeFilterCondition:function(a,m,b){if(b.Type==="AttributeRange"){var d=[];if(b.ValueLow&&b.ValueLow.length!==0){d.push(this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Ge,value:t.odata2Sina(m.type,b.ValueLow)}));}if(b.ValueHigh&&b.ValueHigh.length!==0){d.push(this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Le,value:t.odata2Sina(m.type,b.ValueHigh)}));}return this.sina.createComplexCondition({attributeLabel:m.label,valueLabel:b.Description,operator:this.sina.LogicalOperator.And,conditions:d});}return this.sina.createSimpleCondition({attributeLabel:m.label,attribute:a,value:t.odata2Sina(m.type,b.ValueLow),valueLabel:b.Description});},parseChartFacet:function(q,f){var d=this.sina.getDataSource(q.filter.dataSource.id);var a=f.Id;var m=d.getAttributeMetadata(a);var b,e=q;if(q instanceof S){b=q.filter.clone();b.setDataSource(d);b.setRootCondition(q.filter.rootCondition.clone());e=this.sina.createChartQuery({filter:b,dimension:f.Id});}var g=[];for(var i=0;i<f.Values.results.length;i++){var h=f.Values.results[i];g.push(this.sina._createChartResultSetItem({filterCondition:this.createAttributeFilterCondition(a,m,h),dimensionValueFormatted:h.Description,measureValue:h.NumberOfObjects,measureValueFormatted:h.ValueLowFormatted}));}var r=this.sina._createChartResultSet({title:m.label,items:g,query:e});if(q instanceof S){return e._setResultSet(r);}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/ItemParser.js":function(){sinaDefine(['../../sina/SinaObject','../../core/util','./typeConverter'],function(S,u,T){"use strict";return S.derive({_init:function(p){this.provider=p;this.sina=p.sina;this.intentsResolver=this.sina._createFioriIntentsResolver();this.suvNavTargetResolver=this.sina._createSuvNavTargetResolver();},parse:function(s,d){if(d.ResultList.SearchResults===null){return Promise.resolve([]);}var i=d.ResultList.SearchResults.results;return this.parseItems(i);},parseItems:function(a){var b=[];for(var i=0;i<a.length;++i){var c=a[i];var d=this.parseItem(c);b.push(d);}return Promise.all(b);},parseItem:function(i){var j;var a={};var t=[];var b=[];var d=[];var s,c,e,f;var g={};var w=[];var h=[];var k;var l=this.sina.getDataSource(i.DataSourceId);var m,n,o,p;var q=[];var r=i.Score/100;for(j=0;j<i.Attributes.results.length;j++){m=i.Attributes.results[j];n=l.getAttributeMetadata(m.Id);o=this.sina._createSearchResultSetItemAttribute({id:m.Id,label:n.label,value:T.odata2Sina(n.type,m.Value),valueFormatted:m.ValueFormatted!==undefined?m.ValueFormatted:m.Value,valueHighlighted:m.Snippet||'',isHighlighted:m.Snippet.indexOf("<b>")>-1&&m.Snippet.indexOf("</b>")>-1,metadata:n,groups:[]});o.valueHighlighted=m.Snippet;a[o.id]=o;u.appendRemovingDuplicates(q,u.extractHighlightedTerms(o.valueHighlighted));if(n.suvUrlAttribute&&n.suvMimeTypeAttribute){e=a[n.suvUrlAttribute]||n.suvUrlAttribute.id;f=a[n.suvMimeTypeAttribute]||n.suvMimeTypeAttribute.id;g[m.Id]={suvThumbnailAttribute:o,suvTargetUrlAttribute:e,suvTargetMimeTypeAttribute:f};}if(n.usage.Navigation){if(n.usage.Navigation.mainNavigation){k=this.sina._createNavigationTarget({label:o.value,targetUrl:o.value,target:"_blank"});}}if(n.usage.Detail){d.push(o);}if(!n.usage.Title&&!n.usage.Detail&&!n.isDescription&&(o.isHighlighted||(o.descriptionAttribute&&o.descriptionAttribute.isHighlighted))&&!this._parentHasUsage(n,["Detail","Title"])){w.push(o);}if(n.usage.Title){t.push(o);}if(n.usage.TitleDescription){b.push(o);}p=l.attributeMetadataMap[o.id]._private.semanticObjectType;if(p&&p.length>0){h.push({name:p,value:o.value,type:o.metadata.type});}}for(c in g){s=g[c];if(typeof s.suvTargetUrlAttribute==="string"){s.suvTargetUrlAttribute=a[s.suvTargetUrlAttribute];}if(typeof s.suvTargetMimeTypeAttribute==="string"){s.suvTargetMimeTypeAttribute=a[s.suvTargetMimeTypeAttribute];}if(!(s.suvTargetUrlAttribute||s.suvTargetMimeTypeAttribute)){delete g[c];}}t.sort(function(z,A){return z.metadata.usage.Title.displayOrder-A.metadata.usage.Title.displayOrder;});d.sort(function(z,A){return z.metadata.usage.Detail.displayOrder-A.metadata.usage.Detail.displayOrder;});var v=this._parseHitAttributes(i,l,q);w=w.concat(v);d=d.concat(w);this.suvNavTargetResolver.resolveSuvNavTargets(l,g,q);var x=this.sina._createSearchResultSetItem({dataSource:l,titleAttributes:t,titleDescriptionAttributes:b,detailAttributes:d,defaultNavigationTarget:k,navigationTargets:[],score:r});x._private.allAttributesMap=a;x._private.semanticObjectTypeAttributes=h;var y=this.sina._createItemPostParser({searchResultSetItem:x});return y.postParseResultSetItem();},_parentHasUsage:function(m,a){for(var i=0;i<m.groups.length;i++){var g=m.groups[i].group;var h=false;for(var j=0;j<a.length;j++){if(g.usage[a[j]]!==undefined){h=true;break;}}if(h||this._parentHasUsage(g,a)){return true;}}return false;},_parseHitAttributes:function(a,d,s){var h=[];if(a.HitAttributes!==null){for(var i=0;i<a.HitAttributes.results.length;i++){var b=a.HitAttributes.results[i];var m=d.getAttributeMetadata(b.Id);var v=T.odata2Sina(m.type,u.filterString(b.Snippet,['<b>','</b>']));var c=this.sina._createSearchResultSetItemAttribute({id:b.Id,label:m.label,value:v,valueFormatted:v,valueHighlighted:b.Snippet,isHighlighted:b.Snippet.indexOf("<b>")>-1&&b.Snippet.indexOf("</b>")>-1,metadata:m});u.appendRemovingDuplicates(s,u.extractHighlightedTerms(c.valueHighlighted));h.push(c);}}return h;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/MetadataParser.js":function(){sinaDefine(['../../core/core','../../sina/SinaObject','./typeConverter','./labelCalculation'],function(c,S,t,l){"use strict";return S.derive({_init:function(p){this._provider=p;this._sina=p.sina;this._labelCalculator=l.createLabelCalculator();this._appSearchDataSource=undefined;},getAppSearchDataSource:function(){return this._appSearchDataSource;},parseDataSourceData:function(d,s){for(var i=0;i<d.length;++i){var a=d[i];var b=a.Name;if(!b){b=a.Id;}var e=a.NamePlural;if(!e){e=b;}var f=this._sina._createDataSource({id:a.Id,label:b,labelPlural:e,type:this._sina.DataSourceType.BusinessObject,usage:a.Id.endsWith("TRANSACTIONS~")?{appSearch:{}}:{},attributesMetadata:[{id:'dummy'}]});f._private.system=a.SourceSystem;f._private.client=a.SourceClient;f._private.semanticObjectType=a.SemanticObjectTypeId;f._private.annotations=a.Annotations&&a.Annotations.results||[];this._labelCalculator.calculateLabel(f);this._fillMetadataBufferForDataSource(f,a.Attributes.results);s.registerObjectType({type:f.id,label:f.label,properties:f.attributesMetadata});if(f.id.endsWith("TRANSACTIONS~")&&this._appSearchDataSource===undefined){this._appSearchDataSource=f;}}},_fillMetadataBufferForDataSource:function(d,a){if(d.attributesMetadata[0].id!=='dummy'){return;}d.attributesMetadata=[];d.attributeMetadataMap={};var i;var b=[];var e=[];var f=[];var g=[];var h;var j={dataSourceAnnotations:{},attributeAnnotations:{}};j.dataSourceAnnotations=this._parseAnnotationsIntoJsonStructure(d._private.annotations);for(i=0;i<a.length;i++){h=a[i];var p=this._fillMetadataBufferForAttribute(d,h);var k=h.Annotations&&h.Annotations.results||[];var m=this._parseAnnotationsIntoJsonStructure(k);j.attributeAnnotations[p.id.toUpperCase()]=m;this._parseSemanticsAnnotation(h,m);if(p._private.temporaryUsage.Title!==undefined){b.push(p);}if(p._private.temporaryUsage.Detail!==undefined){if(h.isSummary){e.push(p);}else{f.push(p);}}}var n=this._sina._createCDSAnnotationsParser({dataSource:d,cdsAnnotations:j});var o=n.parseCDSAnnotationsForDataSource();if(!o.dataSourceIsCdsBased){this._sortAttributesOfNonCDSBasedDataSource(d,b,g,e,f);}for(i=0;i<d.attributesMetadata.length;i++){h=d.attributesMetadata[i];if(h._private.temporaryUsage){for(var u in h._private.temporaryUsage){if(u!="Title"&&u!="Detail"){h.usage[u]=h._private.temporaryUsage[u];}}}}},_fillMetadataBufferForAttribute:function(d,a){var b=a.Displayed&&a.DisplayOrder?a.DisplayOrder:-1;var e=this._parseAttributeTypeAndFormat(a);var p=this._sina._createAttributeMetadata({id:a.Id,label:a.Name!==""?a.Name:a.Id,isKey:a.Key,isSortable:a.Sortable,usage:{},type:e.type,format:e.format,matchingStrategy:this._parseMatchingStrategy(a)});p._private.semanticObjectType=a.SemanticObjectTypeId;p._private.temporaryUsage=a.UIAreas?this._parseUsage(a,b):{};d.attributesMetadata.push(p);d.attributeMetadataMap[p.id]=p;return p;},_parseSemanticsAnnotation:function(r,a){var h=false,s="SEMANTICS";for(var b in a){if(b.substr(0,s.length)==s){h=true;break;}}if(r.Semantics&&!h){var d;switch(r.Semantics){case"EMAIL.ADDRESS":case"TELEPHONE.TYPE":case"CURRENCYCODE":case"UNITOFMEASURE":d="TRUE";break;case"QUANTITY.UNITOFMEASURE":case"AMOUNT.CURRENCYCODE":d=r.UnitAttribute;break;}if(d){a[s+r.Semantics]=d;}}},_sortAttributesOfNonCDSBasedDataSource:function(d,a,b,e,f){var i,g;a.sort(this._createSortFunction("Title"));for(i=0;i<a.length;++i){var h=a[i].id;g=d.getAttributeMetadata(h);g.usage.Title=g._private.temporaryUsage.Title;g.usage.Title.displayOrder=i;}var s=this._createSortFunction("Detail");e.sort(s);f.sort(s);b.push.apply(b,e);b.push.apply(b,f);for(i=0;i<b.length;++i){b[i].usage.Detail=b[i]._private.temporaryUsage.Detail;b[i].usage.Detail.displayOrder=i;}},_arrayIncludesEntry:function(a,e,b){var i;if(b){for(i=0;i<a.length;i++){if(b(a[i],e)){return true;}}}else{for(i=0;i<a.length;i++){if(a[i]==e){return true;}}}return false;},_parseAnnotationsIntoJsonStructure:function(a){if(a.length==0){return{};}var i,j;var p={};var b,d;var f,g;var h;var k=[];var m;var n=function(w,x){return w.annotationPointer==x.annotationPointer&&w.annotationName==x.annotationName;};try{for(j=0;j<a.length;j++){b=/\[\d+\]$/g;g=p;h=a[j].Name.split(".");for(i=0;i<h.length;i++){f=h[i].toUpperCase();d=b.exec(f);if(d!==null){f=f.substring(0,d.index);}g[f]=g[f]||{};if(d!==null&&d[0].length>0){m={annotationPointer:g,annotationName:f};if(!this._arrayIncludesEntry(k,m,n)){k.push(m);}if(i<h.length-1){g[f][d[0]]=g[f][d[0]]||{};g=g[f][d[0]];}else{g[f][d[0]]=a[j].Value;}}else if(i<h.length-1){g=g[f];}else{g[f]=a[j].Value;}}}var o;var q;var r,s,u;var v=/\[\d+\]/g;for(j=0;j<k.length;j++){o=k[j].annotationPointer;f=k[j].annotationName;q=o[f];r=[];u={};for(s in q){if(s.match(v)){r.push(q[s]);}else{u[s]=q[s];}}if(Object.keys(u).length>0){r.push(u);}o[f]=r;}}catch(e){return{};}return p;},_createSortFunction:function(u){return function(a,b){if(a._private.temporaryUsage[u].displayOrder<b._private.temporaryUsage[u].displayOrder){return-1;}else if(a._private.temporaryUsage[u].displayOrder>b._private.temporaryUsage[u].displayOrder){return 1;}return 0;};},_parseMatchingStrategy:function(a){if(a.TextIndexed){return this._sina.MatchingStrategy.Text;}return this._sina.MatchingStrategy.Exact;},_parseAttributeTypeAndFormat:function(a){for(var i=0;i<a.UIAreas.results.length;i++){var p=a.UIAreas.results[i];var b=p.Id;switch(b){case'SUMMARY':continue;case'DETAILS':continue;case'TITLE':continue;case'#HIDDEN':case'HIDDEN':continue;case'FACTSHEET':continue;case'DETAILIMAGE':case'PREVIEWIMAGE':return{type:this._sina.AttributeType.ImageUrl};case'LONGTEXT':return{type:this._sina.AttributeType.String,format:this._sina.AttributeFormatType.LongText};default:throw new c.Exception('Unknown presentation usage '+p);}}switch(a.EDMType){case'Edm.String':case'Edm.Binary':case'Edm.Boolean':case'Edm.Byte':case'Edm.Guid':return{type:this._sina.AttributeType.String};case'Edm.Double':case'Edm.Decimal':case'Edm.Float':return{type:this._sina.AttributeType.Double};case'Edm.Int16':case'Edm.Int32':case'Edm.Int64':return{type:this._sina.AttributeType.Integer};case'Edm.Time':return{type:this._sina.AttributeType.Time};case'Edm.DateTime':if(a.TypeLength>8){return{type:this._sina.AttributeType.Timestamp};}return{type:this._sina.AttributeType.Date};case'GeoJson':return{type:this._sina.AttributeType.GeoJson};default:throw new c.Exception('Unknown data type '+a.EDMType);}},_parseUsage:function(a,d){var u=a.UIAreas.results;var b=a.AdvancedSearchRelevant;var f=a.Facet;var e={};u.forEach(function(g){var i=g.Id;if(i==="TITLE"){e.Title={displayOrder:d};}if(i==="SUMMARY"||i==="DETAILIMAGE"||i==="PREVIEWIMAGE"){a.isSummary=true;e.Detail={displayOrder:d};}if(i==="DETAILS"||i==="LONGTEXT"){e.Detail={displayOrder:d};}});if(b){e.AdvancedSearch={};}if(f){e.Facet={};}return e;},parseDynamicMetadata:function(s){var a;try{a=s.ResultList.SearchResults.results;}catch(e){return;}for(var i=0;i<a.length;++i){var b=a[i];if(!b.HitAttributes||!b.HitAttributes.results){continue;}var d=this._sina.getDataSource(b.DataSourceId);var h=b.HitAttributes.results;for(var j=0;j<h.length;++j){var f=h[j];this.parseDynamicAtributeMetadata(d,f);}}},parseDynamicAtributeMetadata:function(d,a){var b;var m=d.getAttributeMetadata(a.Id);if(m){if(!m._private.dynamic){return;}a.UIAreas=a.UIAreas||{results:[]};b=this._parseAttributeTypeAndFormat(a);m.label=a.Name;m.type=b.type;m.format=b.format;}else{a.UIAreas=a.UIAreas||{results:[]};b=this._parseAttributeTypeAndFormat(a);m=this._sina._createAttributeMetadata({id:a.Id,label:a.Name,isKey:false,isSortable:false,usage:{},type:b.type,format:b.format,matchingStrategy:this._sina.MatchingStrategy.Exact,_private:{dynamic:true}});d.attributesMetadata.push(m);d.attributeMetadataMap[m.id]=m;}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/NlqParser.js":function(){sinaDefine(['../../core/core','../../core/util'],function(c,u){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},getActiveResult:function(r){for(var i=0;i<r.length;++i){var a=r[i];if(a.IsCurrentQuery){return a;}}return null;},parse:function(d){var n={success:false,description:''};if(!d||!d.ResultList||!d.ResultList.NLQQueries||!d.ResultList.NLQQueries.results){return n;}var r=d.ResultList.NLQQueries.results;var a=this.getActiveResult(r);if(!a){return n;}n.success=true;n.description=a.Description;return n;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/Provider.js":function(){sinaDefine(['../../core/core','../../core/util','../../core/lang','../../sina/SinaObject','./ajax','./ajaxTemplates','./conditionSerializer','./dataSourceSerializer','./FacetParser','./ItemParser','./NlqParser','./suggestionParser','./suggestionTermSplitter','./labelCalculation','./UserEventLogger','./MetadataParser'],function(c,u,l,S,a,b,d,e,F,I,N,f,s,g,U,M){"use strict";return S.derive({id:'abap_odata',_initAsync:function(h){this.requestPrefix='/sap/opu/odata/sap/ESH_SEARCH_SRV';this.sina=h.sina;this.ajaxClient=a.createAjaxClient();this.metadataLoadPromises={};this.internalMetadata={};this.labelCalculator=g.createLabelCalculator();this.userEventLogger=new U(this);this.metadataParser=new M(this);this.itemParser=new I(this);this.nlqParser=new N(this);this.facetParser=new F(this);this.suggestionParser=new f(this,this.itemParser);this.sessionId=c.generateGuid();this.sorsNavigationTargetGenerator=this.sina._createSorsNavigationTargetGenerator({urlPrefix:'#Action-search&/top=10&filter=',getPropertyMetadata:function(m){return{name:m.id,label:m.label,semanticObjectType:m._private.semanticObjectType,response:!!(m.usage&&(m.usage.Detail||m.usage.Title)),request:true};}});return this.loadServerInfo().then(function(i){this.serverInfo=i.d.results[0];if(!this.supports('Search')){return Promise.reject(new c.Exception('Enterprise Search is not active'));}return this.loadBusinessObjectDataSources();}.bind(this)).then(function(){return{capabilities:this.sina._createCapabilities({fuzzy:false})};}.bind(this));},supports:function(h,k){for(var i=0;i<this.serverInfo.Services.results.length;++i){var m=this.serverInfo.Services.results[i];if(m.Id==h){if(!k){return true;}for(var j=0;j<m.Capabilities.length;++j){var n=m.Capabilities[j];if(n.Capability===k){return true;}}}}return false;},loadServerInfo:function(){var r=this.buildQueryUrl(this.requestPrefix,"/ServerInfos?$expand=Services/Capabilities");var h=this.buildQueryUrl(this.requestPrefix,"/$metadata");var i=this.ajaxClient.getJson(r);var m=this.ajaxClient.getXML(h);return Promise.all([i,m]).then(function(v){var j=v[0];var k=v[1];var p=new DOMParser();var D=p.parseFromString(k,"text/xml");if(D.documentElement.nodeName!="parsererror"){this.serviceXML=D;}return j.data;}.bind(this));},loadBusinessObjectDataSources:function(){var r="/DataSources?$expand=Annotations,Attributes/UIAreas,Attributes/Annotations&$filter=Type eq 'View'";if(this.serviceXML){var h="Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=DataSource]>NavigationProperty[Name=Annotations],"+"Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=DataSourceAttribute]>NavigationProperty[Name=Annotations]";var i=this.serviceXML.querySelectorAll(h);if(i.length!=2){r="/DataSources?$expand=Attributes/UIAreas&$filter=Type eq 'View'";}var j="Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=DataSource]>Property[Name=IsInternal]";if(this.isQueryPropertySupported(j)){r=r+" and IsInternal eq false";}}var k=this.buildQueryUrl(this.requestPrefix,r);return this.ajaxClient.getJson(k).then(function(m){var n=m.data.d.results;this.metadataParser.parseDataSourceData(n,this.sorsNavigationTargetGenerator);this.sorsNavigationTargetGenerator.finishRegistration();}.bind(this));},assembleOrderBy:function(q){var r=[];for(var i=0;i<q.sortOrder.length;++i){var h=q.sortOrder[i];var j=(h.order===this.sina.SortOrder.Descending)?'desc':'asc';r.push({AttributeId:h.id,SortOrder:j});}return r;},executeSearchQuery:function(q){var i,r;var h=b.searchRequest;if(q.nlq){h=b.nlqSearchRequest;}var j="Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=SearchOptions]>Property[Name=ClientServiceName]";if(!this.isQueryPropertySupported(j)){delete h.d.QueryOptions.ClientServiceName;}h=JSON.parse(JSON.stringify(h));var k=q.filter.rootCondition.clone();var m=d.serialize(q.filter.dataSource,k);if(m.SubFilters.length!==0){h.d.Filter=m;}else{delete h.d.Filter;}h.d.DataSources=[e.serialize(q.filter.dataSource)];h.d.QueryOptions.SearchTerms=q.filter.searchTerm;h.d.QueryOptions.Top=q.top;h.d.QueryOptions.Skip=q.skip;h.d.OrderBy=this.assembleOrderBy(q);this.addSessionId(h);if(!q.calculateFacets){delete h.d.MaxFacetValues;delete h.d.Facets;}else{h.d.MaxFacetValues=5;h.d.Facets=[{"Values":[]}];}var n=this.buildQueryUrl(this.requestPrefix,"/SearchQueries");return this.ajaxClient.postJson(n,h).then(function(o){r=o;return this.metadataParser.parseDynamicMetadata(r.data.d);}.bind(this)).then(function(){return this.itemParser.parse(q,r.data.d);}.bind(this)).then(function(o){i=o;return this.facetParser.parse(q,r.data.d);}.bind(this)).then(function(o){var p=this.nlqParser.parse(r.data.d);var t=p.success?p.description:'Search Result List';return this.sina._createSearchResultSet({id:r.data.d.ResultList.ExecutionID,title:t,query:q,items:i,nlqSuccess:p.success,totalCount:r.data.d.ResultList.TotalHits,facets:o});}.bind(this)).then(function(o){this.sorsNavigationTargetGenerator.generateNavigationTargets(o);return o;}.bind(this));},executeChartQuery:function(q){var r="";var h={};var i=q.filter.rootCondition.clone();var j;if(this.decideValueHelp(q)){h=JSON.parse(JSON.stringify(b.valueHelperRequest));h.d.ValueHelpAttribute=q.dimension;j=d.serialize(q.filter.dataSource,i);if(j.SubFilters.length!==0){h.d.Filter=j;}else{delete h.d.Filter;}h.d.ValueFilter=this.getFilterValueFromConditionTree(q.dimension,j);h.d.QueryOptions.SearchTerms=q.filter.searchTerm;h.d.DataSources=[e.serialize(q.filter.dataSource)];r=this.buildQueryUrl(this.requestPrefix,"/ValueHelpQueries");}else{h=JSON.parse(JSON.stringify(b.chartRequest));j=d.serialize(q.filter.dataSource,i);if(j.SubFilters.length!==0){h.d.Filter=j;}else{delete h.d.Filter;}h.d.DataSources=[e.serialize(q.filter.dataSource)];h.d.QueryOptions.SearchTerms=q.filter.searchTerm;h.d.QueryOptions.Skip=0;this.addSessionId(h);h.d.FacetRequests=[{DataSourceAttribute:q.dimension}];h.d.MaxFacetValues=q.top;r=this.buildQueryUrl(this.requestPrefix,"/SearchQueries");}return this.ajaxClient.postJson(r,h).then(function(k){return this.facetParser.parse(q,k.data.d);}.bind(this)).then(function(k){if(k.length>0){return k[0];}return this.sina._createChartResultSet({title:q.filter.dataSource.getAttributeMetadata(q.dimension).label,items:[],query:q});}.bind(this));},decideValueHelp:function(q){var h=q.filter.rootCondition.conditions;for(var i=0;i<h.length;i++){if(q.filter._getAttribute(h[i])===q.dimension){return true;}}return false;},executeSuggestionQuery:function(q){return c.Promise.all([this.executeRegularSuggestionQuery(q),this.executeObjectSuggestionQuery(q)]).then(function(r){var h=[];h.push.apply(h,r[1]);h.push.apply(h,r[0]);return this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:h});}.bind(this));},isObjectSuggestionQuery:function(q){return q.types.indexOf('Object')>=0&&q.filter.dataSource.type===q.sina.DataSourceType.BusinessObject;},executeObjectSuggestionQuery:function(q){if(!this.supports('ObjectSuggestions')||!this.isObjectSuggestionQuery(q)){return c.Promise.resolve([]);}var r=JSON.parse(JSON.stringify(b.objectSuggestionRequest));var h=q.filter.rootCondition.clone();var i=d.serialize(q.filter.dataSource,h);if(i.SubFilters.length!==0){r.d.Filter=i;}else{delete r.d.Filter;}r.d.DataSources=[e.serialize(q.filter.dataSource)];r.d.QueryOptions.Top=q.top;r.d.QueryOptions.Skip=q.skip;r.d.QueryOptions.SearchTerms=q.filter.searchTerm;this.addSessionId(r);var j=this.buildQueryUrl(this.requestPrefix,"/SuggestionsQueries");return this.ajaxClient.postJson(j,r).then(function(k){return this.suggestionParser.parseObjectSuggestions(q,k.data);}.bind(this));},executeRegularSuggestionQuery:function(q){var r=JSON.parse(JSON.stringify(b.suggestionRequest));var h=q.filter.searchTerm;var i=s.split(this,h);var j=q.filter.rootCondition.clone();var k=d.serialize(q.filter.dataSource,j);if(k.SubFilters.length!==0){r.d.Filter=k;}else{delete r.d.Filter;}r.d.DataSources=[e.serialize(q.filter.dataSource)];r.d.QueryOptions.Top=q.top;r.d.QueryOptions.Skip=q.skip;r.d.SuggestionInput=i.suggestionTerm;r.d.QueryOptions.SearchTerms=i.searchTerm===null?"":i.searchTerm;if(!this.includeSuggestionTypes(q,r)){return[];}this.addSessionId(r);var m=this.buildQueryUrl(this.requestPrefix,"/SuggestionsQueries");return this.ajaxClient.postJson(m,r).then(function(n){return this.suggestionParser.parseRegularSuggestions(q,n.data);}.bind(this)).then(function(n){s.concatenate(this,i,n);return n;}.bind(this));},includeSuggestionTypes:function(q,h){var k={SearchTerm:{Data:'IncludeAttributeSuggestions',History:'IncludeHistorySuggestions'},Object:{},DataSource:{Data:'IncludeDataSourceSuggestions'}};var m=q.types;var n=q.calculationModes;var o=false;for(var i=0;i<m.length;i++){var p=m[i];for(var j=0;j<n.length;j++){var r=n[j];var v=k[p][r];if(typeof v==='undefined'){continue;}h.d[v]=true;o=true;}}return o;},addSessionId:function(r){r.d.QueryOptions.ClientSessionID=this.sessionId;var t=new Date().getTime();r.d.QueryOptions.ClientCallTimestamp="\\/Date("+t+")\\/";},getFilterValueFromConditionTree:function(h,j){if(j.ConditionAttribute&&j.ConditionAttribute===h){return j.ConditionValue;}else if(j.SubFilters){var i;var r=null;for(i=0;r===null&&i<j.SubFilters.length;i++){r=this.getFilterValueFromConditionTree(h,j.SubFilters[i]);}return r;}return null;},getConfigurationAsync:function(){var r=this.buildQueryUrl(this.requestPrefix,"/PersonalizedSearchMainSwitches?$filter=Selected eq true");return this.ajaxClient.getJson(r).then(function(h){var i={personalizedSearch:false,personalizedSearchIsEditable:false};switch(h.data.d.results[0].MainSwitch){case 3:i.isPersonalizedSearchEditable=true;break;case 4:i.isPersonalizedSearchEditable=true;break;case 2:i.isPersonalizedSearchEditable=false;break;case 1:i.isPersonalizedSearchEditable=false;break;}r=this.buildQueryUrl(this.requestPrefix,"/Users('<current>')");return this.ajaxClient.getJson(r).then(function(h){if(h.data.d.IsEnabledForPersonalizedSearch){i.personalizedSearch=true;}return this.sina._createConfiguration(i);}.bind(this));}.bind(this));},saveConfigurationAsync:function(h){var i={"IsEnabledForPersonalizedSearch":h.personalizedSearch};var r=this.buildQueryUrl(this.requestPrefix,"/Users('<current>')");return this.ajaxClient.mergeJson(r,i);},resetPersonalizedSearchDataAsync:function(){var h={"ClearPersonalizedSearchHistory":true};var r=this.buildQueryUrl(this.requestPrefix,"/Users('<current>')");return this.ajaxClient.mergeJson(r,h);},logUserEvent:function(h){return this.userEventLogger.logUserEvent(h);},buildQueryUrl:function(q,h){var w=window.location.href;var r="";var i="";var j="";var k="";i=w.indexOf("esh-system=sid(");if(i!==-1){var m=w.substring(i).indexOf(")");if(m!==-1){j=w.substring(i+15,i+m);if(j.length!==0){k=";o=sid("+j+")";}}}if(j.length===0){i=w.indexOf("esh-system=");if(i!==-1){var n=w.substring(i).indexOf("&");var o=w.substring(i).indexOf("#");if(n!==-1&&o!==-1){if(n<o){j=w.substring(i+11,i+n);}else{j=w.substring(i+11,i+o);}}if(n!==-1&&o===-1){j=w.substring(i+11,i+n);}if(n===-1&&o!==-1){j=w.substring(i+11,i+o);}if(n===-1&&o===-1){j=w.substring(i+11);}}if(j.length!==0){k=";o="+j;}}r=q+k+h;return r;},getDebugInfo:function(){return'Searchsystem: '+this.serverInfo.SystemId+' Client: '+this.serverInfo.Client+' SinaProvider :'+this.id;},isQueryPropertySupported:function(p){if(this.serviceXML===undefined){return false;}var h=this.serviceXML.querySelectorAll(p);if(h.length>0){return true;}return false;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/UserEventLogger.js":function(){sinaDefine(['../../core/core','../../core/util','./ajaxTemplates'],function(c,u,a){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.delayedConsumer=new u.DelayedConsumer({timeDelay:2000,consumer:this.processEvents,consumerContext:this});},logUserEvent:function(e){e.timeStamp=new Date().getTime();if(e.type!=='ITEM_NAVIGATE'){this.delayedConsumer.add(e);}if(e.type==='ITEM_NAVIGATE'&&e.sourceUrlArray.length!==0){this.incrementClickCounter(e.targetUrl,e.systemAndClient);}},processEvents:function(e){var t=this;var r={ID:1,SessionID:this.provider.sessionId,Events:[]};for(var i=0;i<e.length;++i){var b=e[i];var d="\\/Date("+b.timeStamp+")\\/";var o={ID:i+1,Type:b.type,Timestamp:d,ExecutionID:b.executionId,Parameters:[]};for(var n in b){if(n==='type'||n==='timeStamp'){continue;}var v=b[n];if(typeof v==='undefined'){continue;}if(typeof v!=='object'){v=v.toString();}else{v=JSON.stringify(v);}o.Parameters.push({Name:n,Value:v});}r.Events.push(o);}var f=t.provider.buildQueryUrl(t.provider.requestPrefix,"/InteractionEventLists");return t.provider.ajaxClient.postJson(f,r);},incrementClickCounter:function(t,s){if(!t){return undefined;}if(t.indexOf("#")===-1){return undefined;}var g=function(H){return H.split("-")[0];};var b=function(H){return H.split("-")[1].split("&")[0];};var d=function(p){var m=p;var n=[];for(var i=0,o=m.length;i<o;i++){var q=m[i];if(q.indexOf("sap-system")!==-1){continue;}var v=q.split("=")[0];var w=q.split("=")[1];n.push({Name:v,Value:w});}return n;};var e=this;var h=t.split("?");var f=g(h[0]).split("#")[1];var j=b(h[0]);var k=h[1]!==undefined?d(h[1].split("&")):[];var r=JSON.parse(JSON.stringify(a.navigationEvent));r.SemanticObjectType=f;r.Intent=j;if(s.systemId.length===0||s.client.length===0){delete r.System;delete r.Client;}else{r.System=s.systemId;r.Client=s.client;}r.Parameters=k;var l=e.provider.buildQueryUrl(e.provider.requestPrefix,"/NavigationEvents");return e.provider.ajaxClient.postJson(l,r);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/ajax.js":function(){sinaDefine(['../../core/core','../../core/ajax'],function(c,a){"use strict";var m={};m.Exception=c.Exception.derive({_init:function(d){c.Exception.prototype._init.apply(this,[d]);}});var p=function(d){try{var f=JSON.parse(d.responseText);var g=[];if(f&&f.error&&f.error.code){g.push(f.error.code);}if(f&&f.error&&f.error.message&&f.error.message.value){g.push(f.error.message.value);}if(g.length===0){return c.Promise.reject(d);}return c.Promise.reject(new m.Exception({message:g.join('\n'),previous:d}));}catch(e){return c.Promise.reject(d);}};var b=function(o){return function(){return o.apply(this,arguments).then(function(r){return r;},function(e){if(!(e instanceof a.Exception)){return c.Promise.reject(e);}return p(e);});};};var _=function(n){if(n.SubFilters!==undefined){delete n.ActAsQueryPart;for(var i=0;i<n.SubFilters.length;i++){_(n.SubFilters[i]);}}};m.createAjaxClient=function(){var d=new a.Client({csrf:true,requestNormalization:function(e){if(e===null){return{};}if(e.Events!==undefined){return{"NotToRecord":true};}delete e.SessionID;delete e.SessionTimestamp;if(e.d&&e.d.QueryOptions){delete e.d.QueryOptions.ClientSessionID;delete e.d.QueryOptions.ClientCallTimestamp;delete e.d.QueryOptions.ClientServiceName;delete e.d.QueryOptions.ClientLastExecutionID;}if(e.d){var f=JSON.stringify(e);var h='"DataSources":[';var g=']';var i=f.indexOf(h);var j=i+f.substring(i).indexOf(g)+g.length;var k=',"ExcludedDataSources":[]';f=[f.slice(0,j),k,f.slice(j)].join('');e=JSON.parse(f);}if(e.d.Filter){_(e.d.Filter);}return e;}});d.postJson=b(d.postJson);d.getJson=b(d.getJson);d.mergeJson=b(d.mergeJson);return d;};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/ajaxTemplates.js":function(){sinaDefine([],function(){"use strict";var m={};m.searchRequest={"d":{"Id":"1","QueryOptions":{"SearchTerms":"","Top":10,"Skip":0,"SearchType":"","ClientSessionID":"","ClientServiceName":"","ClientLastExecutionID":""},"DataSources":[],"OrderBy":[],"ResultList":{"SearchResults":[{"HitAttributes":[],"Attributes":[]}]},"ExecutionDetails":[],"MaxFacetValues":5,"Facets":[{"Values":[]}]}};m.nlqSearchRequest={"d":{"Id":"1","ActivateNLQ":true,"QueryOptions":{"SearchTerms":"","Top":10,"Skip":0,"SearchType":"","ClientSessionID":"","ClientServiceName":"","ClientLastExecutionID":""},"DataSources":[],"OrderBy":[],"ResultList":{"SearchResults":[{"HitAttributes":[],"Attributes":[]}],"NLQQueries":[{"NLQConnectorQueries":[{"SearchFilter":{"SubFilters":[{"SubFilters":[{"SubFilters":[{"SubFilters":[{"SubFilters":[{"SubFilters":[]}]}]}]}]}]}}]}]},"ExecutionDetails":[],"MaxFacetValues":5,"Facets":[{"Values":[]}]}};m.chartRequest={"d":{"Id":"1","DataSources":[],"QueryOptions":{"SearchTerms":"","Skip":0,"SearchType":"F"},"FacetRequests":[],"MaxFacetValues":5,"Facets":[{"Values":[]}],"ExecutionDetails":[]}};m.valueHelperRequest={"d":{"Id":"1","ValueHelpAttribute":"","ValueFilter":"","DataSources":[],"QueryOptions":{"Top":1000,"Skip":0,"SearchType":"V"},"ValueHelp":[]}};m.suggestionRequest={"d":{"Id":"1","SuggestionInput":"","IncludeAttributeSuggestions":false,"IncludeHistorySuggestions":false,"IncludeDataSourceSuggestions":false,"DetailLevel":1,"QueryOptions":{"Top":0,"Skip":0,"SearchType":"S","SearchTerms":""},"Filter":{},"DataSources":[],"Suggestions":[],"ExecutionDetails":[]}};m.objectSuggestionRequest={"d":{"Id":"1","IncludeAttributeSuggestions":true,"QueryOptions":{"SearchTerms":"a","Top":10,"Skip":0},"DataSources":[{"Id":"UIA000~EPM_BPA_DEMO~","Type":"View"}],"ObjectSuggestions":{"SearchResults":[{"HitAttributes":[],"Attributes":[]}]},"ExecutionDetails":[]}};m.navigationEvent={"SemanticObjectType":"","Intent":"","System":"","Client":"","Parameters":[]};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/conditionSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator','./typeConverter'],function(c,C,a,t){"use strict";var b=c.defineClass({_init:function(d){this.dataSource=d;},convertSinaToOdataOperator:function(s){switch(s){case a.Eq:return'EQ';case a.Lt:return'LT';case a.Gt:return'GT';case a.Le:return'LE';case a.Ge:return'GE';case a.Co:return'EQ';case a.Bw:return'EQ';case a.Ew:return'EQ';case'And':return"AND";case'Or':return"OR";default:throw new c.Exception('unknow comparison operator '+s);}},serializeComplexCondition:function(d){var r={"Id":1,"OperatorType":this.convertSinaToOdataOperator(d.operator),"SubFilters":[]};var e="Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=SearchFilter]>Property[Name=ActAsQueryPart]";if(d.sina.provider.isQueryPropertySupported(e)){r.ActAsQueryPart=true;}var s=d.conditions;for(var i=0;i<s.length;++i){var f=s[i];r.SubFilters.push(this.serialize(f));}return r;},serializeSimpleCondition:function(d){var m;var e;var f;m=this.dataSource.getAttributeMetadata(d.attribute);e=m.type;f={"ConditionAttribute":d.attribute,"ConditionOperator":this.convertSinaToOdataOperator(d.operator),"ConditionValue":t.sina2Odata(e,d.value,{operator:d.operator})};return f;},serializeBetweenCondition:function(d){var m;var e;var f;var v;var g;m=this.dataSource.getAttributeMetadata(d.conditions[0].attribute);e=m.type;if(d.conditions[0].operator==="Ge"){v=d.conditions[0].value;g=d.conditions[1].value;}else{v=d.conditions[1].value;g=d.conditions[0].value;}f={"ConditionAttribute":d.conditions[0].attribute,"ConditionOperator":"BT","ConditionValue":t.sina2Odata(e,v),"ConditionValueHigh":t.sina2Odata(e,g)};return f;},serialize:function(d){if(d instanceof C){if(d.operator==="And"&&d.conditions[0]&&(d.conditions[0].operator==="Ge"||d.conditions[0].operator==="Gt"||d.conditions[0].operator==="Le"||d.conditions[0].operator==="Lt")){if(d.conditions.length===1){return this.serializeSimpleCondition(d.conditions[0]);}return this.serializeBetweenCondition(d);}return this.serializeComplexCondition(d);}return this.serializeSimpleCondition(d);}});return{serialize:function(d,e){var s=new b(d);return s.serialize(e);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/dataSourceSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator'],function(c,C,a){"use strict";return{serialize:function(d){if(d===d.sina.getAllDataSource()){return{Id:'<All>',Type:'Category'};}var t;switch(d.type){case d.sina.DataSourceType.Category:t='Category';break;case d.sina.DataSourceType.BusinessObject:t='View';break;}return{Id:d.id,Type:t};}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/labelCalculation.js":function(){sinaDefine(['../../core/core','../../core/LabelCalculator'],function(c,L){"use strict";var m={};m.createLabelCalculator=function(){return new L({key:function(d){return[d.labelPlural,d._private.system,d._private.client];},data:function(d){return{label:d.label,labelPlural:d.labelPlural};},setLabel:function(d,l,a){l[0]=a.label;d.label=l.join(' ');l[0]=a.labelPlural;d.labelPlural=l.join(' ');},setFallbackLabel:function(d,a){d.label=a.label+' duplicate '+d.id;d.labelPlural=d.label;}});};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/qunit/test.js":function(){sinaDefine(['./testLabelCalculator','./testConfiguration','./testAjaxClient'],function(){"use strict";});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/qunit/testAjaxClient.js":function(){sinaDefine(['../../../core/ajax','../ajaxTemplates'],function(a,b){"use strict";QUnit.test('AjaxClient-1',function(c){var d=c.async();var e=new a.Client({csrf:true});e.getJson('/sap/es/ina/GetServerInfo').then(function(s){e.postJson('/sap/es/ina/GetResponse',b.loadDataSourcesRequest).then(function(r){c.ok(r.data.ItemLists[0].Items.length>0);d();});});});QUnit.test('AjaxClient-2',function(c){var d=c.async();var e=new a.Client({csrf:true,csrfFetchRequest:{method:'GET',url:'/sap/es/ina/GetServerInfo',headers:a.Client.prototype.jsonHeaders}});e.postJson('/sap/es/ina/GetResponse',b.loadDataSourcesRequest).then(function(r){c.ok(r.data.ItemLists[0].Items.length>0);d();});});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/qunit/testConfiguration.js":function(){sinaDefine(['../../../sina/sinaFactory'],function(s){"use strict";QUnit.test('Configuration',function(a){var d=a.async();s.createAsync('../Provider').then(function(b){b.getConfigurationAsync().then(function(c){c.setPersonalizedSearch(false);c.saveAsync().then(function(){c.resetPersonalizedSearchDataAsync().then(function(){a.equal(1,1);d();});});});});});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/qunit/testLabelCalculator.js":function(){sinaDefine(['../LabelCalculator'],function(L){"use strict";var t=function(a,s){var d=[];var l=new L();for(var i=0;i<s.length;++i){var b=s[i];l.calculateLabel(b.dataSource);d.push(b.dataSource);for(var j=0;j<=i;++j){a.equal(b.labels[j],d[j].label,'label comparison');a.equal(b.labelsPlural[j],d[j].labelPlural,'label plural comparison');}}};QUnit.test("LabelCalculator 1",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER002~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order'],labelsPlural:['Purchase Orders','Sales Orders']},{dataSource:{id:'CES002~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order CER','Sales Order CES'],labelsPlural:['Purchase Orders','Sales Orders CER','Sales Orders CES']},{dataSource:{id:'CES003~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order CER','Sales Order CES 002','Sales Order CES 003'],labelsPlural:['Purchase Orders','Sales Orders CER','Sales Orders CES 002','Sales Orders CES 003']}]);});QUnit.test("LabelCalculator 2",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER003~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003']},{dataSource:{id:'CES003~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003','Purchase Order CES'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003','Purchase Orders CES']},{dataSource:{id:'CES003~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003','Purchase Order CES','Sales Order'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003','Purchase Orders CES','Sales Orders']}]);});QUnit.test("LabelCalculator - system and client not sufficient for unique key",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER002~EPM_PO_DEMO_2~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order','Purchase Order#1'],labelsPlural:['Purchase Orders','Purchase Orders#1']}]);});QUnit.test("LabelCalculator - category",function(a){t(a,[{dataSource:{id:'EPM_Demo',label:'Procurement',labelPlural:'Procurement'},labels:['Procurement'],labelsPlural:['Procurement']}]);});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/suggestionParser.js":function(){sinaDefine(['../../core/core','./typeConverter'],function(c,t){"use strict";return c.defineClass({_init:function(p,i){this.provider=p;this.sina=p.sina;this.itemParser=i;},parseObjectSuggestions:function(q,d){if(!d.d.ObjectSuggestions||!d.d.ObjectSuggestions.SearchResults||!d.d.ObjectSuggestions.SearchResults.results){return[];}var s=[];var o=d.d.ObjectSuggestions.SearchResults.results;for(var i=0;i<o.length;++i){var a=o[i];s.push(this.parseObjectSuggestion(a));}return c.Promise.all(s);},parseObjectSuggestion:function(o){return this.itemParser.parseItem(o).then(function(a){var b=c.map(a.titleAttributes,function(d){return d.valueFormatted;}).join(' ');return this.sina._createObjectSuggestion({calculationMode:this.sina.SuggestionCalculationMode.Data,label:b,object:a});}.bind(this));},parseRegularSuggestions:function(q,d){var s=[];var a;var p;var b=[];var e;var f;if(!d.d.Suggestions||!d.d.Suggestions.results){return[];}var r=d.d.Suggestions.results;for(var i=0;i<r.length;i++){a=null;e=r[i];switch(e.Type){case'H':a=this.parseSearchTermSuggestion(q,e);break;case'A':a=this.parseSearchTermAndDataSourceSuggestion(q,e);a.type='A';a.cell=e;break;case'M':a=this.parseDataSourceSuggestion(q,e);break;}if(a){if(a.type==='A'){if(b[a.searchTerm]===undefined){f=this._getParentCell(a.cell);p=this.parseSearchTermSuggestion(q,f);b[a.searchTerm]=p;}delete a.type;delete a.cell;b[a.searchTerm].childSuggestions.push(a);}else{s.push(a);}}}Object.keys(b).forEach(function(k){s.push(b[k]);});return s;},parseDataSourceSuggestion:function(q,a){var b=this.sina.SuggestionCalculationMode.Data;var d=this.sina.getDataSource(a.FromDataSource);if(!d){return null;}var f=q.filter.clone();f.setDataSource(d);return this.sina._createDataSourceSuggestion({calculationMode:b,dataSource:d,label:a.SearchTermsHighlighted});},parseSearchTermSuggestion:function(q,a){var b=this.parseCalculationMode(a.Type);var f=q.filter.clone();f.setSearchTerm(a.SearchTerms);return this.sina._createSearchTermSuggestion({searchTerm:a.SearchTerms,calculationMode:b,filter:f,label:a.SearchTermsHighlighted});},parseSearchTermAndDataSourceSuggestion:function(q,a){var b=this.parseCalculationMode(a.Type);var f=q.filter.clone();f.setSearchTerm(a.SearchTerms);var d=this.sina.getDataSource(a.FromDataSource);if(!d){return null;}f.setDataSource(d);return this.sina._createSearchTermAndDataSourceSuggestion({searchTerm:a.SearchTerms,dataSource:d,calculationMode:b,filter:f,label:a.SearchTermsHighlighted});},parseCalculationMode:function(s){switch(s){case'H':return this.sina.SuggestionCalculationMode.History;case'A':case'M':return this.sina.SuggestionCalculationMode.Data;}},_getParentCell:function(a){var p={};p=a;p.FromDataSource="<All>";p.FromDataSourceAttribute="";p.Type="A";return p;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/suggestionTermSplitter.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";var S=c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},split:function(t){var s=t.lastIndexOf(' ');if(s<0){return{searchTerm:null,suggestionTerm:t};}var a=t.slice(0,s);a=a.replace(/\s+$/,"");if(a.length===0){return{searchTerm:null,suggestionTerm:t};}var b=t.slice(s);b=b.replace(/^\s+/,"");if(b.length===0){return{searchTerm:null,suggestionTerm:t};}return{searchTerm:a,suggestionTerm:b};},concatenate:function(s,a){if(!s.searchTerm){return;}var t;var b=[];var d=s.searchTerm.split(' ');for(var k=0;k<d.length;k++){t=d[k];t=t.trim();b.push({term:t,regExp:new RegExp(this.escapeRegExp(t),'i')});}for(var i=0;i<a.length;++i){var e=a[i];var n=[];for(var j=0;j<b.length;++j){var f=b[j];if(!f.regExp.test(e.filter.searchTerm)){n.push(f.term);}}var p=[];var g=n.join(' ');for(var l=0;l<n.length;l++){t=n[l];p.push('<b>'+t+'</b>');}p=p.join(' ');e.label=p+' '+e.label;e.filter.searchTerm=e.searchTerm=g+' '+e.filter.searchTerm;this.concatenate(s,e.childSuggestions);}},escapeRegExp:function(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");}});return{split:function(p,t){var s=new S(p,t);return s.split(t);},concatenate:function(p,s,a){var b=new S(p);return b.concatenate(s,a);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/abap_odata/typeConverter.js":function(){sinaDefine(['../../core/core','../../sina/util','../../sina/AttributeType'],function(c,s,A){"use strict";return{sina2Odata:function(a,v,b){b=b||{};switch(a){case A.Double:return v.toString();case A.Integer:return v.toString();case A.String:return this.sina2OdataString(v,b);case A.ImageUrl:return v;case A.ImageBlob:throw new c.Exception('not implemented');case A.GeoJson:return v;case A.Date:return this.sina2OdataDate(v);case A.Time:return this.sina2OdataTime(v);case A.Timestamp:return this.sina2OdataTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},odata2Sina:function(a,v){switch(a){case A.Double:return parseFloat(v);case A.Integer:return parseInt(v,10);case A.String:return v;case A.ImageUrl:return v;case A.ImageBlob:throw new c.Exception('not implemented');case A.GeoJson:return v;case A.Date:return this.odata2SinaDate(v);case A.Time:return this.odata2SinaTime(v);case A.Timestamp:return this.odata2SinaTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},odata2SinaTimestamp:function(v){if(v.length===0){return"";}v=v.trim();var y,m,d,h,a,b,e;y=parseInt(v.slice(0,4),10);m=parseInt(v.slice(5,7),10);d=parseInt(v.slice(8,10),10);h=parseInt(v.slice(11,13),10);a=parseInt(v.slice(14,16),10);b=parseInt(v.slice(17,19),10);e=parseInt(v.slice(20,20+6),10);return new Date(Date.UTC(y,m-1,d,h,a,b,e/1000));},sina2OdataTimestamp:function(v){if(v.length===0){return"";}var y=v.getUTCFullYear();var m=v.getUTCMonth()+1;var d=v.getUTCDate();var h=v.getUTCHours();var a=v.getUTCMinutes();var b=v.getUTCSeconds();var e=v.getUTCMilliseconds()*1000;var r=this.addLeadingZeros(y.toString(),4)+'-'+this.addLeadingZeros(m.toString(),2)+'-'+this.addLeadingZeros(d.toString(),2)+'T'+this.addLeadingZeros(h.toString(),2)+':'+this.addLeadingZeros(a.toString(),2)+':'+this.addLeadingZeros(b.toString(),2)+'.'+this.addLeadingZeros(e.toString(),7)+'Z';return r;},odata2SinaTime:function(v){if(v.length===0){return"";}v=v.trim();return v;},sina2OdataTime:function(v){if(v.length===0){return"";}return v;},odata2SinaDate:function(v){if(v.length===0){return"";}v=v.trim();return v.slice(0,4)+'/'+v.slice(5,7)+'/'+v.slice(8,10);},sina2OdataDate:function(v){if(v.length===0){return"";}return v.slice(0,4)+'-'+v.slice(5,7)+'-'+v.slice(8,10);},sina2OdataString:function(v,a){return s.convertOperator2Wildcards(v,a.operator);},addLeadingZeros:function(v,l){return'00000000000000'.slice(0,l-v.length)+v;}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/dummy/Provider.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";return c.defineClass({id:'dummy',_initAsync:function(p){return Promise.resolve();}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/FacetParser.js":function(){sinaDefine(['../../core/core','../../sina/SearchQuery','./typeConverter'],function(c,S,t){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.Exception=c.Exception.derive({_init:function(a){c.Exception.prototype._init.apply(this,[a]);}});},parse:function(q,d,l){var v=d['@com.sap.vocabularies.Search.v1.Facets'];if(d.error&&!v){return c.Promise.reject(new this.Exception({message:d.error.message,description:'Server-side Error',previous:d.error}));}if(!v){return Promise.resolve([]);}if(d.error){l.addMessage(l.WARNING,'Server-side Warning: '+d.error.message);}var f=[];for(var i=0;i<v.length;i++){var a=v[i];var r;if(q.filter.dataSource===q.sina.getAllDataSource()){try{r=this.parseDataSourceFacet(q,a);}catch(e){l.addMessage(l.WARNING,'Error occurred by parsing result item number '+i+': '+e.message);}}else{if(q.filter.dataSource.type===q.sina.DataSourceType.Category){continue;}if(a["@com.sap.vocabularies.Search.v1.Facet"].Dimensions[0].PropertyType==="GeometryPolygonFacet"){continue;}try{r=this.parseChartFacet(q,a);}catch(e){l.addMessage(l.WARNING,'Error occurred by parsing result item number '+i+': '+e.message);}}f.push(r);}return c.Promise.all(f);},parseDataSourceFacet:function(q,f){var d=q;if(q instanceof S){d=this.sina.createDataSourceQuery({dataSource:q.filter.dataSource,filter:q.filter.clone()});}var a=[];for(var i=0;i<f.Items.length;i++){var b=f.Items[i];var e=this.sina.getDataSource(b.scope);if(!e){e=this.sina._createDataSource({type:this.sina.DataSourceType.Category,id:b.ValueLow,label:b.Description});}a.push(this.sina._createDataSourceResultSetItem({dataSource:e,dimensionValueFormatted:e.labelPlural,measureValue:b._Count,measureValueFormatted:(b._Count).toString()}));}var r=this.sina._createDataSourceResultSet({title:q.filter.dataSource.label,items:a,query:d});if(q instanceof S){return d._setResultSet(r);}return r;},createAttributeFilterCondition:function(a,m,b){if(typeof b[a]==='object'&&(b[a].hasOwnProperty('From')||b[a].hasOwnProperty('From'))){var f=this.sina.createComplexCondition({attributeLabel:m.label,valueLabel:this.formatFacetValue(b[a],m),operator:this.sina.LogicalOperator.And,conditions:[]});var l,u;if(!b[a].From){u=this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Le,value:t.odata2Sina(m.type,b[a].To)});f.conditions.push(u);}else if(!b[a].To){l=this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Ge,value:t.odata2Sina(m.type,b[a].From)});f.conditions.push(l);}else{l=this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Ge,value:t.odata2Sina(m.type,b[a].From)});f.conditions.push(l);u=this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Le,value:t.odata2Sina(m.type,b[a].To)});f.conditions.push(u);}return f;}return this.sina.createSimpleCondition({attributeLabel:m.label,attribute:a,value:b[a],valueLabel:t.odata2Sina(m.type,b[a])});},formatFacetValue:function(v,m){var i='';if(v['@com.sap.vocabularies.Common.v1.Label']){return v['@com.sap.vocabularies.Common.v1.Label'];}if(typeof v==='object'&&(v.hasOwnProperty('From')||v.hasOwnProperty('To'))){v=(v.From||i)+'...'+(v.To||i);}return v;},parseChartFacet:function(q,f){var d=q.filter.dataSource;var a='';if(q.dimension){a=q.dimension;}else if(f["@com.sap.vocabularies.Search.v1.Facet"]&&f["@com.sap.vocabularies.Search.v1.Facet"].Dimensions&&f["@com.sap.vocabularies.Search.v1.Facet"].Dimensions[0]&&f["@com.sap.vocabularies.Search.v1.Facet"].Dimensions[0].PropertyName){a=f["@com.sap.vocabularies.Search.v1.Facet"].Dimensions[0].PropertyName;}var m=d.getAttributeMetadata(a);var b=[];var e;var g=q;e=q.filter.clone();e.setDataSource(d);e.setRootCondition(q.filter.rootCondition.clone());g=this.sina.createChartQuery({filter:e,dimension:a});for(var i=0;i<f.Items.length;i++){var h=f.Items[i];b.push(this.sina._createChartResultSetItem({filterCondition:this.createAttributeFilterCondition(a,m,h),dimensionValueFormatted:this.formatFacetValue(h[a],m),measureValue:h._Count,measureValueFormatted:h._Count}));}var r=this.sina._createChartResultSet({title:m.label,items:b,query:g});if(q instanceof S){return g._setResultSet(r);}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/ItemParser.js":function(){sinaDefine(['../../core/core','../../core/util','./typeConverter','../../sina/AttributeType'],function(c,u,T,A){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.intentsResolver=this.sina._createFioriIntentsResolver();this.suvNavTargetResolver=this.sina._createSuvNavTargetResolver();this.Exception=c.Exception.derive({_init:function(a){c.Exception.prototype._init.apply(this,[a]);}});},parse:function(s,d,l){if(d.error&&!d.value){return c.Promise.reject(new this.Exception({message:d.error.message,description:'Server-side Error',previous:d.error}));}if(!d.value){return Promise.resolve([]);}if(d.error){l.addMessage(l.WARNING,'Server-side Warning: '+d.error.message);}var a=d.value;var b=[];for(var i=0;i<a.length;++i){var f=a[i];var g;try{g=this.parseItem(f);b.push(g);}catch(e){l.addMessage(l.WARNING,'Error occurred by parsing result item number '+i+': '+e.message);}}return Promise.all(b);},parseItem:function(i){var t=[];var d=[];var a=[];var b;var e={};var s={};var f=i['@odata.context'];var p=f.lastIndexOf('#');if(p>-1){f=f.slice(p+1);}var g=this.sina.getDataSource(f);var w=i['@com.sap.vocabularies.Search.v1.WhyFound']||{};var m={};var h='';var j={};var k,l,n,o;var q=[];var r;var v=i["@com.sap.vocabularies.Search.v1.Ranking"];var x=this.preParseItem(i);for(var y in x){var z=x[y];m=g.getAttributeMetadata(y);if(!m){throw'unknown attribute '+y;}if(m.id=="LOC_4326"){m.usage={Detail:{displayOrder:-1}};}var B=T.odata2Sina(m.type,z.value);var C;C=undefined;for(var D in w){if(D===y&&w[D][0]){C=w[D][0];delete w[D];}}C=this.calculateValueHighlighted(z,m,C);var _=function(C){if(typeof C==='string'&&C.length>0){return true;}if(Array.isArray(C)&&C.length>0){return true;}return false;};var E=typeof(B)==="string"?B:JSON.stringify(B);var F=C;b=this.sina._createSearchResultSetItemAttribute({id:m.id,label:m.label,value:B,valueFormatted:E,valueHighlighted:F,isHighlighted:_(C),metadata:m,groups:[]});u.appendRemovingDuplicates(q,u.extractHighlightedTerms(b.valueHighlighted));if(m.suvUrlAttribute&&m.suvMimeTypeAttribute){n=e[m.suvUrlAttribute]||m.suvUrlAttribute.id;o=e[m.suvMimeTypeAttribute]||m.suvMimeTypeAttribute.id;j[m.id]={suvThumbnailAttribute:b,suvTargetUrlAttribute:n,suvTargetMimeTypeAttribute:o};}if(m.usage.Title){t.push(b);}if(m.usage.TitleDescription){a.push(b);}if(m.usage.Detail){d.push(b);}if(m.usage.Navigation){if(m.usage.Navigation.mainNavigation){r=this.sina._createNavigationTarget({label:b.value,targetUrl:b.value,target:"_blank"});}}e[b.id]=b;h=g.attributeMetadataMap[m.id]._private.semanticObjectType||'';if(h.length>0){s[h]=B;}}for(l in j){k=j[l];if(typeof k.suvTargetUrlAttribute==="string"){k.suvTargetUrlAttribute=e[k.suvTargetUrlAttribute];}if(typeof k.suvTargetMimeTypeAttribute==="string"){k.suvTargetMimeTypeAttribute=e[k.suvTargetMimeTypeAttribute];}if(!(k.suvTargetUrlAttribute||k.suvTargetMimeTypeAttribute)){delete j[l];}}t.sort(function(L,M){return L.metadata.usage.Title.displayOrder-M.metadata.usage.Title.displayOrder;});d.sort(function(L,M){return L.metadata.usage.Detail.displayOrder-M.metadata.usage.Detail.displayOrder;});for(var G in w){if(w[G][0]){m=g.getAttributeMetadata(G);var H=w[G][0];var I=typeof(H)==="string"?H:JSON.stringify(H);b=this.sina._createSearchResultSetItemAttribute({id:m.id||G,label:m.label||G,value:null,valueFormatted:I,valueHighlighted:I,isHighlighted:true,metadata:m});d.push(b);delete w[G];}}this.suvNavTargetResolver.resolveSuvNavTargets(g,j,q);var J=this.sina._createSearchResultSetItem({dataSource:g,titleAttributes:t,titleDescriptionAttributes:a,detailAttributes:d,defaultNavigationTarget:r,navigationTargets:[],score:v});J._private.allAttributesMap=e;J._private.semanticObjectTypeAttributes=s;var K=this.sina._createItemPostParser({searchResultSetItem:J});return K.postParseResultSetItem();},preParseItem:function(i){var a={};for(var o in i){if(o[0]==='@'||o[0]==='_'){continue;}var v=i[o];var p;var s=o.split('@');p=s[0];var b=a[p];if(!b){b={};a[p]=b;}if(s.length===1){b.value=v;continue;}if(s.length===2){b[s[1]]=v;continue;}throw'more than two @ in property name';}return a;},_getFirstItemIfArray:function(v){if(Array.isArray(v)){v=v[0];}return v;},calculateValueHighlighted:function(s,m,a){var i='com.sap.vocabularies.Search.v1.Highlighted';var b='com.sap.vocabularies.Search.v1.Snippets';var v='';if(m.format==='MultilineText'){v=s[i];if(v){return this._getFirstItemIfArray(v);}v=s[b];if(v){return this._getFirstItemIfArray(v);}return a;}v=s[b];if(v){return this._getFirstItemIfArray(v);}v=s[i];if(v){return this._getFirstItemIfArray(v);}return this._getFirstItemIfArray(a);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/MetadataParser.js":function(){sinaDefine(['../../core/core','./typeConverter'],function(c,t){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.presentationUsageConversionMap={TITLE:'TITLE',SUMMARY:'SUMMARY',DETAIL:'DETAIL',IMAGE:'IMAGE',THUMBNAIL:'THUMBNAIL',HIDDEN:'HIDDEN'};this.accessUsageConversionMap={AUTO_FACET:'AUTO_FACET',SUGGESTION:'SUGGESTION'};},_getWindow:function(){if(typeof window==="undefined"){return new Promise(function(r,a){sinaRequire(['jsdom','fs'],function(j,f){var b=f.readFileSync("./node_modules/jquery/dist/jquery.js","utf-8");j.env({html:"<html><body></body></html>",src:[b],done:function(e,w){if(!e){r(w);}else{a(e);}}});});});}return Promise.resolve(window);},parseResponse:function(m){var a=this;var b={businessObjectMap:{},businessObjectList:[],dataSourceMap:{},dataSourcesList:[]};return this._getWindow().then(function(w){w.$(m).find('Schema').each(function(){var $=w.$(this);var h=a._parseEntityType($,w);a._parseEntityContainer($,h,b,w);});return Promise.resolve(b);});},_parseEntityType:function(s,w){var a=this;var h={};s=w.$(s);s.find('EntityType').each(function(){var b=w.$(this).attr('Name');var d={schema:s.attr('Namespace'),keys:[],attributeMap:{},resourceBundle:'',labelResourceBundle:'',label:'',labelPlural:'',annotations:{}};h[b]=d;w.$(this).find('Key>PropertyRef').each(function(){d.keys.push(w.$(this).attr('Name'));});w.$(this).find('Annotation[Term="Search.searchable"]').each(function(){w.$(this).siblings('Annotation').each(function(){var $=w.$(this);var f=$.attr('Term');if(f!==undefined&&f.length>0){f=f.toUpperCase();var g=a._getValueFromElement(this);if(f==='ENTERPRISESEARCHHANA.UIRESOURCE.LABEL.BUNDLE'){var r=g;try{d.resourceBundle=jQuery.sap.resources({url:r,language:sap.ui.getCore().getConfiguration().getLanguage()});}catch(e){sinaLog.error("Resource bundle of "+b+" '"+r+"' can't be found:"+e.toString());}}else if(f==='ENTERPRISESEARCHHANA.UIRESOURCE.LABEL.KEY'){var k=g;if(k&&d.resourceBundle){var T=d.resourceBundle.getText(k);if(T){d.labelResourceBundle=T;}}}else if(f==='UI.HEADERINFO.TYPENAME'){d.label=g;}else if(f==='UI.HEADERINFO.TYPENAMEPLURAL'){d.labelPlural=g;}else if(f==='UI.HEADERINFO.TITLE.TYPE'){a._setAnnotationValue(d.annotations,f,g);}else if(f==='UI.HEADERINFO.TITLE.VALUEQUALIFIER'){a._setAnnotationValue(d.annotations,f,g);}else{a._setAnnotationValue(d.annotations,f,g);}}});});w.$(this).find('Property').each(function(e){var f=w.$(this).attr('Name');var g={labelRaw:f,label:null,type:w.$(this).attr('Type'),presentationUsage:[],isFacet:false,isSortable:false,supportsTextSearch:false,displayOrder:e,annotationsAttr:{},unknownAnnotation:[]};d.attributeMap[f]=g;w.$(this).find('Annotation').each(function(){var k=w.$(this).attr('Term');if(k!==undefined&&k.length>0){k=k.toUpperCase();var l=a._getValueFromElement(this);if(l==undefined){w.$(this).children("Collection").children("Record").each(function(){l=l||[];var m={};l.push(m);w.$(this).children("PropertyValue").each(function(){var n=w.$(this).attr("property");if(n!==undefined&&n.length>0){n=n.toUpperCase();var o=a._getValueFromElement(this);if(o!==undefined){m[n]=o;}}});});}if(l!==undefined){switch(k){case'SAP.COMMON.LABEL':if(!g.label){g.label=l;}break;case'ENTERPRISESEARCHHANA.UIRESOURCE.LABEL.KEY':if(l&&d.resourceBundle){var T=d.resourceBundle.getText(l);if(T){g.label=T;}}break;case'ENTERPRISESEARCH.KEY':g.isKey=l;break;case'ENTERPRISESEARCH.PRESENTATIONMODE':w.$(this).find('Collection>String').each(function(){var p=a._getValueFromElement(this);p=a.presentationUsageConversionMap[p];if(p){g.presentationUsage.push(p);}});break;case'ENTERPRISESEARCHHANA.ISSORTABLE':g.isSortable=l;break;case'ENTERPRISESEARCHHANA.SUPPORTSTEXTSEARCH':g.supportsTextSearch=l;break;case'ENTERPRISESEARCH.FILTERINGFACET.DEFAULT':g.isFacet=l;break;case'ENTERPRISESEARCH.DISPLAYORDER':g.displayOrder=l;break;default:if(k.startsWith("UI")||k.startsWith("OBJECTMODEL")||k.startsWith("SEMANTICS")){a._setAnnotationValue(g.annotationsAttr,k,l);}else{g.unknownAnnotation.push(w.$(this));}}}}});var j=g.annotationsAttr.UI&&g.annotationsAttr.UI.IDENTIFICATION;if(j){if(j.POSITION!==undefined){g.displayOrder=j.POSITION;}else if(Array.isArray(j)){for(var i=0;i<j.length;i++){if(j[i].TYPE==undefined&&j[i].POSITION!==undefined){g.displayOrder=j[i].POSITION;break;}}}}});});return h;},_setAnnotationValue:function(a,b,v){var d=b.split(".");var e;var f=a;var g="___temporaryDummyEntriesForArrays___";var i;for(i=0;i<d.length-1;i++){e=d[i];if(f[e]===undefined){f[e]={};f=f[e];}else if(Array.isArray(f[e])){f[g]=f[g]||{};if(!f[g][e]){f[g][e]={};f[e].push(f[g][e]);}f=f[g][e];}else if(typeof f[e]==="object"){f=f[e];}else if(typeof f[e]==="boolean"){f[e]={};f=f[e];}else{return;}}if(i<d.length){e=d[i];if(f[e]===undefined){f[e]=v;}else if(Array.isArray(f[e])){if(Array.isArray(v)){f[e]=f[e].concat(v);}else{f[g]=f[g]||{};if(!f[g][e]){f[g][e]=v;f[e].push(f[g][e]);}else{for(var p in v){if(!f[g][e][p]){f[g][e][p]=v[p];}}}}}}},_getValueFromElement:function(a){var $=window.$(a);var v=$.text();if(!v||v.trim().length==0){v=undefined;if($.attr('string')!==undefined){v=$.attr('string');}else if($.attr('decimal')!==undefined){try{v=Number.parseFloat($.attr('decimal'));if(isNaN(v)){v=undefined;}}catch(e){v=undefined;}}else if($.attr('int')!==undefined){try{v=Number.parseInt($.attr('int'),10);if(isNaN(v)){v=undefined;}}catch(e){v=undefined;}}else if($.attr('bool')!==undefined){v=$.attr('bool')=="true";}}return v;},_parseEntityContainer:function(s,h,a,w){var b=this;s.find('EntityContainer>EntitySet').each(function(){if(w.$(this).attr('Name')&&w.$(this).attr('EntityType')){var n=w.$(this).attr('Name');var e=w.$(this).attr('EntityType');var d=e.slice(e.lastIndexOf('.')+1);var f=h[d];if(f===undefined){throw'EntityType '+d+' has no corresponding meta data!';}var g=b.sina._createDataSource({id:n,label:f.labelResourceBundle||f.label||n,labelPlural:f.labelResourceBundle||f.labelPlural||f.label||n,type:b.sina.DataSourceType.BusinessObject,attributesMetadata:[{id:'dummy'}]});g.annotations=f.annotations;a.dataSourceMap[g.id]=g;a.dataSourcesList.push(g);f.name=n;f.dataSource=g;a.businessObjectMap[n]=f;a.businessObjectList.push(f);}});},fillMetadataBuffer:function(d,a){if(d.attributesMetadata[0].id!=='dummy'){return;}d.attributesMetadata=[];d.attributeMetadataMap={};var b={dataSourceAnnotations:{},attributeAnnotations:{}};b.dataSourceAnnotations=d.annotations;for(var f in a.attributeMap){try{this.fillPublicMetadataBuffer(d,a.attributeMap[f],b);}catch(e){}}var p=this.sina._createCDSAnnotationsParser({dataSource:d,cdsAnnotations:b});p.parseCDSAnnotationsForDataSource();},fillPublicMetadataBuffer:function(d,a,b){var e=a.displayOrder;var f=b.attributeAnnotations[a.labelRaw]={};jQuery.extend(f,a.annotationsAttr);var g=this._parseAttributeTypeAndFormat(a);if(g.type){var p=this.sina._createAttributeMetadata({id:a.labelRaw,label:a.label||a.labelRaw,isKey:a.isKey||false,isSortable:a.isSortable,usage:this._parseUsage(a,e)||{},type:g.type,format:g.format,matchingStrategy:this._parseMatchingStrategy(a)});p._private.semanticObjectType=a.SemanticObjectTypeId;d.attributesMetadata.push(p);d.attributeMetadataMap[p.id]=p;}},_parseMatchingStrategy:function(a){if(a.supportsTextSearch===true){return this.sina.MatchingStrategy.Text;}return this.sina.MatchingStrategy.Exact;},_parseAttributeTypeAndFormat:function(a){for(var i=0;i<a.presentationUsage.length;i++){var p=a.presentationUsage[i]||'';switch(p.toUpperCase()){case'SUMMARY':continue;case'DETAIL':continue;case'TITLE':continue;case'HIDDEN':continue;case'FACTSHEET':continue;case'THUMBNAIL':case'IMAGE':return{type:this.sina.AttributeType.ImageUrl};case'LONGTEXT':return{type:this.sina.AttributeType.String,format:this.sina.AttributeFormatType.Longtext};default:throw new c.Exception('Unknown presentation usage '+p);}}switch(a.type){case'Edm.Binary':if(a.annotationsAttr){if(a.annotationsAttr.SEMANTICS&&a.annotationsAttr.SEMANTICS.CONTACT&&a.annotationsAttr.SEMANTICS.CONTACT.PHOTO||a.annotationsAttr.SEMANTICS&&a.annotationsAttr.SEMANTICS.IMAGEURL){return{type:this.sina.AttributeType.ImageBlob};}}case'Edm.String':case'Edm.Boolean':case'Edm.Byte':case'Edm.Guid':return{type:this.sina.AttributeType.String};case'Edm.Double':case'Edm.Decimal':case'Edm.Float':case'Edm.Single':case'Edm.SingleRange':return{type:this.sina.AttributeType.Double};case'Edm.Int16':case'Edm.Int32':case'Edm.Int64':return{type:this.sina.AttributeType.Integer};case'Edm.Time':return{type:this.sina.AttributeType.Time};case'Edm.Date':return{type:this.sina.AttributeType.Date};case'Edm.DateTime':case'Edm.DateTimeOffset':if(a.TypeLength!==undefined&&a.TypeLength<=8){return{type:this.sina.AttributeType.Date};}return{type:this.sina.AttributeType.Timestamp};case'Collection(Edm.String)':return{type:this.sina.AttributeType.String};case'Edm.GeometryPoint':return{type:this.sina.AttributeType.GeoJson};case'GeoJson':return{type:this.sina.AttributeType.GeoJson};default:return null;}},_parseUsage:function(a,d){var u={};for(var i=0;i<a.presentationUsage.length;i++){var b=a.presentationUsage[i].toUpperCase()||'';if(b==="TITLE"){u.Title={displayOrder:d};}if(b==="SUMMARY"||b==="DETAIL"||b==="IMAGE"||b==="THUMBNAIL"||b==="LONGTEXT"){u.Detail={displayOrder:d};}}if(a.isFacet){u.AdvancedSearch={displayOrder:d};u.Facet={displayOrder:d};}return u;},parseDynamicMetadata:function(s){var d=s.data;if(!d){return;}var m=d['@com.sap.vocabularies.Search.v1.Metadata'];if(!m){return;}var a=this.getUniqueDataSourceFromSearchResult(s);if(!a){return;}for(var b in m){var e=m[b];this.parseDynamicAttributeMetadata(a,b,e);}},parseDynamicAttributeMetadata:function(d,a,b){var e=d.getAttributeMetadata(a);var f=this._parseAttributeTypeAndFormat({presentationUsage:[],type:b.$Type});if(e){if(!e._private.dynamic){return;}e.label=b['@SAP.Common.Label'];e.type=f.type;e.format=f.format;}else{e=this.sina._createAttributeMetadata({id:a,label:b['@SAP.Common.Label'],isKey:false,isSortable:false,usage:{},type:f.type,format:f.format,matchingStrategy:this.sina.MatchingStrategy.Exact,_private:{dynamic:true}});d.attributesMetadata.push(e);d.attributeMetadataMap[e.id]=e;}},getUniqueDataSourceFromSearchResult:function(s){var d=s.data;if(!d){return;}var a=d.value;if(!a){return;}var b,p;for(var i=0;i<a.length;++i){var e=a[i];var f=e['@odata.context'];if(!f){return;}b=f.split('#')[1];if(!b){return;}if(p&&p!==b){return;}p=b;}return this.sina.getDataSource(b);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/Provider.js":function(){sinaDefine(['../../core/core','../../core/util','../../core/Log','../../core/lang','../../sina/SinaObject','./ajax','./conditionSerializer','./FacetParser','./ItemParser','./suggestionParser','./suggestionTermSplitter','./MetadataParser'],function(c,u,L,l,S,a,b,F,I,d,s,M){"use strict";return S.derive({id:'hana_odata',_initAsync:function(e){if(e.url){this.requestPrefix=e.url;}else{this.requestPrefix='/sap/es/odata';}this.sina=e.sina;this.ajaxClient=a.createAjaxClient();this.metadataLoadPromises={};this.internalMetadata={};this.metadataParser=new M(this);this.itemParser=new I(this);this.facetParser=new F(this);this.suggestionParser=new d(this);return this.loadServerInfo().then(function(f){this.serverInfo=f;if(!this.supports('Search')){return Promise.reject(new c.Exception('Enterprise Search is not active'));}return this.loadBusinessObjectDataSources();}.bind(this)).then(function(){if(this.sina.dataSources.length===0){return Promise.reject(new c.Exception('Enterprise Search is not active - no datasources'));}return{capabilities:this.sina._createCapabilities({fuzzy:false})};}.bind(this));},supports:function(e,f){var g=this.serverInfo.services;for(var h in g){if(h===e){if(!f){return true;}var i=g[h].Capabilities;for(var j=0;j<i.length;++j){var k=i[j];if(k===f){return true;}}}}return false;},loadServerInfo:function(){var e={rawServerInfo:{Services:[{Service:'Search',Capabilities:[{Capability:'SemanticObjectType'}]},{Service:'Suggestions2',Capabilities:[{Capability:'ScopeTypes'}]}]},services:{Suggestions:{suggestionTypes:['objectdata']},Search:{capabilities:['SemanticObjectType']}}};return Promise.resolve(e);},loadBusinessObjectDataSources:function(){var t=this;var r=this.buildQueryUrl(this.requestPrefix,"/$metadata");return this.ajaxClient.getXML(r).then(function(e){t.metadataParser.parseResponse(e).then(function(f){for(var i=0;i<f.dataSourcesList.length;++i){var g=f.dataSourcesList[i];t.metadataParser.fillMetadataBuffer(g,f.businessObjectMap[g.id]);}});});},assembleOrderBy:function(q){var r=[];for(var i=0;i<q.sortOrder.length;++i){var e=q.sortOrder[i];var f=(e.order===this.sina.SortOrder.Descending)?'desc':'asc';r.push({AttributeId:e.id,SortOrder:f});}return r;},translateOrder:function(o){var r='desc';if(o==='Ascending'){r='asc';}return r;},executeSearchQuery:function(q){var r=q.filter.rootCondition.clone();var f=b.serialize(q.filter.dataSource,r);var e=this._escapeSearchTerm(q.filter.searchTerm);var g=q.filter.dataSource;var t=q.top||10;var h=q.skip||0;var i=q.facetTop||5;var o=q.sortOrder;var k='';var m="Search.search(query='";if(g!==this.sina.getAllDataSource()){m+="SCOPE:"+g.id+" ";}var p='';var n='';if(e){p='(';n=')';}m+=f+" "+p+e+n+"')";var v='filter('+m+')';var w={$count:true,$top:t,$skip:h,$apply:v,whyfound:true};if(Array.isArray(o)){for(var j=0;j<o.length;j++){var x=o[j];if(j===0){k+=x.id+' '+this.translateOrder(x.order);}else{k+=','+x.id+' '+this.translateOrder(x.order);}}}if(k.length>0){w.$orderby=k;}var y=this.buildQueryUrl(this.requestPrefix,'/$all');if(q.calculateFacets){w.facets='all';w.facetlimit=i;}var z,A;var B=new L();return this.ajaxClient.getJson(y,w).then(function(C){A=C;return this.metadataParser.parseDynamicMetadata(A);}.bind(this)).then(function(C){return this.itemParser.parse(q,A.data,B);}.bind(this)).then(function(C){z=C;var D=A.data['@com.sap.vocabularies.Search.v1.SearchStatistics'].ConnectorStatistics;if(q.getDataSource()===this.sina.getAllDataSource()&&D&&Array.isArray(D)&&D.length===1){var E=[{"@com.sap.vocabularies.Search.v1.Facet":{"PropertyName":"scope","isConnectorFacet":true},"Items":[{"scope":D[0].OdataID,"_Count":A.data["@odata.count"]}]}];return this.facetParser.parse(q,E);}return this.facetParser.parse(q,A.data,B);}.bind(this)).then(function(C){return this.sina._createSearchResultSet({title:'Search Result List',query:q,items:z,totalCount:A.data['@odata.count']||0,facets:C,log:B});}.bind(this));},executeChartQuery:function(q){var e=this._escapeSearchTerm(q.filter.searchTerm);var f=q.filter.dataSource;var r=q.filter.rootCondition.clone();var g=new L();var h=15;var i=r.removeAttributeConditions(q.dimension);var j=i.deleted;var k=b.serialize(f,r);var t=q.top||5;var m="Search.search(query='";if(f!==this.sina.getAllDataSource()){m+="SCOPE:"+f.id+" ";}var p='';var n='';if(e){p='(';n=')';}if(j===true){if(!i.value||i.value===''||i.value.match(/^[*\s]+$/g)!==null){i.value='*';m+='('+i.attribute+':"*") '+p+e;}else{m+='('+i.attribute+':EQ:"'+i.value+'*") '+p+e;}}else{m+=k+" "+p+e;}m+=n+"')";var o='filter('+m+')';var v={$count:true,$top:0,$apply:o};var w=this.buildQueryUrl(this.requestPrefix,'/$all');var x='all';v.facetlimit=t;if(q.dimension){x=q.dimension;var y=q.filter.dataSource.getAttributeMetadata(q.dimension);if((y.type==='Double'||y.type==='Integer')&&t>=20){v.facetlimit=h;}}v.facets=x;return this.ajaxClient.getJson(w,v).then(function(z){var A=this.facetParser.parse(q,z.data,g);return A;}.bind(this)).then(function(z){if(z.length>0){return z[0];}return this.sina._createChartResultSet({title:q.filter.dataSource.getAttributeMetadata(q.dimension).label,items:[],query:q,log:g});}.bind(this));},executeSuggestionQuery:function(q){var e={SearchTerm:{Data:'SuggestObjectData',History:'SuggestSearchHistory'},Object:{},DataSource:{Data:'SuggestDataSources'}};var f=q.types;var g=q.calculationModes;var h=c.Promise.resolve({items:[]});for(var i=0;i<f.length;i++){var k=f[i];for(var j=0;j<g.length;j++){var m=g[j];var v=e[k][m];switch(v){case"SuggestObjectData":return this._fireSuggestionQuery(q);default:return h;}}}},_escapeSearchTerm:function(t){if(t){t=t.replace(/[\\]/g,'\\$&');}return t;},_fireSuggestionQuery:function(q){var e=this._escapeSearchTerm(q.filter.searchTerm);var f=q.filter.dataSource;var r=q.filter.rootCondition.clone();var g=b.serialize(q.filter.dataSource,r);var t=q.top||10;var h=q.skip||0;var i="GetSuggestion(term='"+e+"')";var j={$top:t,$skip:h};var k='';if(f!==this.sina.getAllDataSource()){k+="SCOPE:"+f.id;}if(g){k+=" "+g;}if(k){k="filter(Search.search(query='"+k+"'))";j.$apply=k;}var m=this.buildQueryUrl(this.requestPrefix,'/$all/'+i);return this.ajaxClient.getJson(m,j).then(function(n){var o=[];if(n.data.value){o=this.suggestionParser.parse(q,n.data.value);}return this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:o});}.bind(this));},_fireSuggestionQueryV5:function(q){var e=this._escapeSearchTerm(q.filter.searchTerm);var f=s.split(this,e);var g=q.filter.dataSource;var r=q.filter.rootCondition.clone();var h=b.serialize(q.filter.dataSource,r);var i="GetSuggestion(term='";if(g!==this.sina.getAllDataSource()){i+="SCOPE:"+g.id+" ";}i+=h+" "+e+"')";var j={};var k=this.buildQueryUrl(this.requestPrefix,'/$all/'+i);return this.ajaxClient.getJson(k,j).then(function(m){var n=[];if(m.data.value){n=this.suggestionParser.parse(q,m.data.value);}s.concatenate(this,f,n);return this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:n});}.bind(this));},getFilterValueFromConditionTree:function(e,f){if(f.ConditionAttribute&&f.ConditionAttribute===e){return f.ConditionValue;}else if(f.SubFilters){var i;var r=null;for(i=0;r===null&&i<f.SubFilters.length;i++){r=this.getFilterValueFromConditionTree(e,f.SubFilters[i]);}return r;}return null;},logUserEvent:function(e){},buildQueryUrl:function(q,e){var r=q+'/v20411'+e;return r;},getDebugInfo:function(){return' SinaProvider :'+this.id;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/ajax.js":function(){sinaDefine(['../../core/core','../../core/ajax'],function(c,a){"use strict";var m={};m.Exception=c.Exception.derive({_init:function(d){c.Exception.prototype._init.apply(this,[d]);}});var p=function(d){try{return c.Promise.reject(new m.Exception({message:JSON.parse(d.responseText).error.details,description:'Error by hana odata ajax call',previous:d}));}catch(e){return c.Promise.reject(d);}};var b=function(o){return function(){return o.apply(this,arguments).then(function(r){return r;},function(e){if(!(e instanceof a.Exception)){return c.Promise.reject(e);}return p(e);});};};m.createAjaxClient=function(){var d=new a.Client({csrf:false});d.postJson=b(d.postJson);d.getJson=b(d.getJson);d.mergeJson=b(d.mergeJson);return d;};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/conditionSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator','./typeConverter','../../sina/AttributeType'],function(c,C,a,t,A){"use strict";var b=c.defineClass({_init:function(d){this.dataSource=d;},convertSinaToOdataOperator:function(s){switch(s){case a.Eq:return':EQ(S)';case a.Lt:return':LT';case a.Gt:return':GT';case a.Le:return':LE';case a.Ge:return':GE';case a.Co:return':EQ';case a.Bw:return':EQ';case a.Ew:return':EQ';case'And':return"AND";case'Or':return"OR";default:throw new c.Exception('unknow comparison operator '+s);}},serializeComplexCondition:function(d){var r={"Id":1,"OperatorType":this.convertSinaToOdataOperator(d.operator),"SubFilters":[]};var s=d.conditions;for(var i=0;i<s.length;++i){var e=s[i];r.SubFilters.push(this.serialize(e));}var f="";if(r.SubFilters.length>1){f=r.SubFilters.join(' '+r.OperatorType+' ');}else if(r.SubFilters.length===1){f=r.SubFilters[0];}if(r.SubFilters.length>1){f='('+f+')';}return f;},serializeSimpleCondition:function(d){var m;var e;var f;m=this.dataSource.getAttributeMetadata(d.attribute);e=m.type;var g=t.sina2Odata(e,d.value,{operator:d.operator});var h=this.convertSinaToOdataOperator(d.operator);f={"ConditionAttribute":d.attribute,"ConditionOperator":h,"ConditionValue":g};var q='';if(e===A.String||e===A.Timestamp){q='"';}var r='';if(e===A.String&&g.match(/^[*\s]+$/g)!==null&&h===':EQ'){r+='('+f.ConditionAttribute+':'+q+f.ConditionValue+q+')';}else{r+='('+f.ConditionAttribute+f.ConditionOperator+':'+q+f.ConditionValue+q+')';}return r;},serializeBetweenCondition:function(d){var m;var e;m=this.dataSource.getAttributeMetadata(d.conditions[0].attribute);e=m.type;var q='';if(e===A.Date||e===A.Time||e===A.Timestamp){q='"';}var r=d.conditions[0].attribute+this.convertSinaToOdataOperator(d.conditions[0].operator)+':'+q+t.sina2Odata(e,d.conditions[0].value,{operator:d.conditions[0].operator})+q;r+=" AND ";r+=d.conditions[1].attribute+this.convertSinaToOdataOperator(d.conditions[1].operator)+":"+q+t.sina2Odata(e,d.conditions[1].value,{operator:d.conditions[1].operator})+q;r="("+r+")";return r;},serialize:function(d){if(d instanceof C){if(d.operator==="And"&&d.conditions.length>1&&d.conditions[0]&&(d.conditions[0].operator==="Ge"||d.conditions[0].operator==="Gt"||d.conditions[0].operator==="Le"||d.conditions[0].operator==="Lt")){return this.serializeBetweenCondition(d);}return this.serializeComplexCondition(d);}return this.serializeSimpleCondition(d);}});return{serialize:function(d,e){var s=new b(d);return s.serialize(e);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/dataSourceSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator'],function(c,C,a){"use strict";return{serialize:function(d){if(d===d.sina.getAllDataSource()){return{Id:'<All>',Type:'Category'};}var t;switch(d.type){case d.sina.DataSourceType.Category:t='Category';break;case d.sina.DataSourceType.BusinessObject:t='View';break;}return{Id:d.id,Type:t};}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/suggestionParser.js":function(){sinaDefine(['../../core/core','./typeConverter'],function(c,t){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},parse:function(q,d){var s=[];var a;var b;for(var i=0;i<d.length;i++){a=null;b=d[i];a=this.parseSearchTermSuggestion(q,b);s.push(a);}return s;},parseDataSourceSuggestion:function(q,a){var b=this.sina.SuggestionCalculationMode.Data;var d=this.sina.getDataSource(a.FromDataSource);if(!d){return null;}var f=q.filter.clone();f.setDataSource(d);return this.sina._createDataSourceSuggestion({calculationMode:b,dataSource:d,label:a.SearchTermsHighlighted});},parseSearchTermSuggestion:function(q,a){var f=q.filter.clone();f.setSearchTerm(a.term);return this.sina._createSearchTermSuggestion({searchTerm:a.term,calculationMode:this.sina.SuggestionCalculationMode.Data,filter:f,label:a.highlighted||a.term});},parseSearchTermAndDataSourceSuggestion:function(q,a){var b=this.parseCalculationMode(a.Type);var f=q.filter.clone();f.setSearchTerm(a.SearchTerms);var d=this.sina.getDataSource(a.FromDataSource);if(!d){return null;}f.setDataSource(d);return this.sina._createSearchTermAndDataSourceSuggestion({searchTerm:a.SearchTerms,dataSource:d,calculationMode:b,filter:f,label:a.SearchTermsHighlighted});},parseCalculationMode:function(s){switch(s){case'H':return this.sina.SuggestionCalculationMode.History;case'A':case'M':return this.sina.SuggestionCalculationMode.Data;}},_getParentCell:function(a){var p={};p=a;p.FromDataSource="<All>";p.FromDataSourceAttribute="";p.Type="A";return p;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/suggestionTermSplitter.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";var S=c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},split:function(t){var s=t.lastIndexOf(' ');if(s<0){return{searchTerm:null,suggestionTerm:t};}var a=t.slice(0,s);a=a.replace(/\s+$/,"");if(a.length===0){return{searchTerm:null,suggestionTerm:t};}var b=t.slice(s);b=b.replace(/^\s+/,"");if(b.length===0){return{searchTerm:null,suggestionTerm:t};}return{searchTerm:a,suggestionTerm:b};},concatenate:function(s,a){if(!s.searchTerm){return;}var t;var b=[];var d=s.searchTerm.split(' ');for(var k=0;k<d.length;k++){t=d[k];t=t.trim();b.push({term:t,regExp:new RegExp(this.escapeRegExp(t),'i')});}for(var i=0;i<a.length;++i){var e=a[i];var n=[];for(var j=0;j<b.length;++j){var f=b[j];if(!f.regExp.test(e.filter.searchTerm)){n.push(f.term);}}var p=[];var g=n.join(' ');for(var l=0;l<n.length;l++){t=n[l];p.push('<b>'+t+'</b>');}p=p.join(' ');e.label=p+' '+e.label;e.filter.searchTerm=e.searchTerm=g+' '+e.filter.searchTerm;this.concatenate(s,e.childSuggestions);}},escapeRegExp:function(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");}});return{split:function(p,t){var s=new S(p,t);return s.split(t);},concatenate:function(p,s,a){var b=new S(p);return b.concatenate(s,a);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/hana_odata/typeConverter.js":function(){sinaDefine(['../../core/core','../../sina/util','../../sina/AttributeType'],function(c,s,A){"use strict";return{sina2Odata:function(a,v,b){switch(a){case A.Double:return v.toString();case A.Integer:return v.toString();case A.String:return this.sina2OdataString(v,b);case A.ImageUrl:case A.ImageBlob:return v;case A.GeoJson:return v;case A.Date:return this.sina2OdataDate(v);case A.Time:return this.sina2OdataTime(v);case A.Timestamp:return this.sina2OdataTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},sina2OdataString:function(v,a){return s.convertOperator2Wildcards(v,a.operator);},odata2Sina:function(a,v){switch(a){case A.Double:if(!v){return 0.000;}return parseFloat(v);case A.Integer:if(!v){return 0;}return parseInt(v,10);case A.String:if(!v){return'';}return v;case A.ImageUrl:case A.ImageBlob:if(!v){return'';}return v;case A.GeoJson:if(!v){return{};}return v;case A.Date:if(!v){return'1970-01-01';}return this.odata2SinaDate(v);case A.Time:if(!v){return'00:00:00';}return this.odata2SinaTime(v);case A.Timestamp:if(!v){return'1970-01-01T00:00:00.0000000Z';}return this.odata2SinaTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},odata2SinaTimestamp:function(v){return new Date(Date.parse(v));},sina2OdataTimestamp:function(v){var y=v.getUTCFullYear();var m=v.getUTCMonth()+1;var d=v.getUTCDate();var h=v.getUTCHours();var a=v.getUTCMinutes();var b=v.getUTCSeconds();var r=this.addLeadingZeros(y.toString(),4)+'-'+this.addLeadingZeros(m.toString(),2)+'-'+this.addLeadingZeros(d.toString(),2)+'T'+this.addLeadingZeros(h.toString(),2)+':'+this.addLeadingZeros(a.toString(),2)+':'+this.addLeadingZeros(b.toString(),2)+'Z';return r;},odata2SinaTime:function(v){v=v.trim();return v;},sina2OdataTime:function(v){return v;},odata2SinaDate:function(v){v=v.trim();return v.slice(0,4)+'/'+v.slice(5,7)+'/'+v.slice(8,10);},sina2OdataDate:function(v){return v.slice(0,4)+'-'+v.slice(5,7)+'-'+v.slice(8,10);},addLeadingZeros:function(v,l){return'00000000000000'.slice(0,l-v.length)+v;}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/FacetParser.js":function(){sinaDefine(['../../core/core','./pivotTableParser','../../sina/SearchQuery','./typeConverter'],function(c,p,S,t){"use strict";return c.defineClass({_init:function(a){this.provider=a;this.sina=a.sina;},parse:function(q,d){var f=[];if(!d.ResultsetFacets||!d.ResultsetFacets.Elements){return[];}for(var i=0;i<d.ResultsetFacets.Elements.length;i++){var a=d.ResultsetFacets.Elements[i];var b=a.Metadata.Cube.ObjectName;if(b==='$$DataSources$$'){f.push(this.parseDataSourceFacet(q,a));}else{if(q.filter.dataSource.type===q.sina.DataSourceType.Category){continue;}f.push(this.parseChartFacet(q,a));}}return c.Promise.all(f);},parseDataSourceFacet:function(q,f){var d=q;if(q instanceof S){d=this.sina.createDataSourceQuery({dataSource:q.filter.dataSource,filter:q.filter.clone()});}var a=p.parse(f.ResultSet);var b=[];for(var i=0;i<a.cells.length;i++){var e=a.cells[i];var g=this.sina.getDataSource(e.$$DataSource$$[0].Value);if(!g){g=this.sina._createDataSource({type:this.sina.DataSourceType.Category,id:e.$$DataSource$$[0].Value,label:e.$$DataSource$$[0].ValueFormatted});}b.push(this.sina._createDataSourceResultSetItem({dataSource:g,dimensionValueFormatted:e.$$DataSource$$[0].ValueFormatted,measureValue:e.Value,measureValueFormatted:e.ValueFormatted}));}var r=this.sina._createDataSourceResultSet({title:q.filter.dataSource.label,items:b,query:d});if(q instanceof S){return d._setResultSet(r);}return r;},createAttributeFilterCondition:function(a,m,b){switch(b.$$AttributeValue$$.length){case 2:return this.sina.createSimpleCondition({attribute:a,value:t.ina2Sina(m.type,b.$$AttributeValue$$[0].Value),attributeLabel:m.label,valueLabel:b.$$AttributeValue$$[0].ValueFormatted});case 3:var d=this.sina.createComplexCondition({attributeLabel:m.label,valueLabel:b.$$AttributeValue$$[0].ValueFormatted,operator:this.sina.LogicalOperator.And});var e=[];if(b.$$AttributeValue$$[1].Value){e.push(this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Ge,value:t.ina2Sina(m.type,b.$$AttributeValue$$[1].Value)}));}if(b.$$AttributeValue$$[2].Value){e.push(this.sina.createSimpleCondition({attribute:a,operator:this.sina.ComparisonOperator.Le,value:t.ina2Sina(m.type,b.$$AttributeValue$$[2].Value)}));}d.conditions=e;return d;default:throw new c.Exception('parse error facets');}},parseChartFacet:function(q,f){var d=this.sina.getDataSource(f.Metadata.Cube.DataSource.ObjectName);var a=f.Metadata.Cube.ObjectName;var m=d.getAttributeMetadata(a);var b=q;if(q instanceof S){var e=q.filter.clone();e.setDataSource(d);e.setRootCondition(q.filter.rootCondition.clone());b=this.sina.createChartQuery({filter:e,dimension:f.Metadata.Cube.ObjectName});}var g=p.parse(f.ResultSet);var h=[];for(var i=0;i<g.cells.length;i++){var j=g.cells[i];h.push(this.sina._createChartResultSetItem({filterCondition:this.createAttributeFilterCondition(a,m,j),dimensionValueFormatted:j.$$AttributeValue$$[0].ValueFormatted||j.$$AttributeValue$$[0].Value,measureValue:j.Value,measureValueFormatted:j.ValueFormatted}));}var r=this.sina._createChartResultSet({title:m.label,items:h,query:b});if(q instanceof S){return b._setResultSet(r);}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/ItemParser.js":function(){sinaDefine(['../../core/core','../../core/util','./pivotTableParser','./typeConverter','../tools/fiori/FioriIntentsResolver','../../sina/NavigationTarget'],function(c,u,p,t,I,N){"use strict";return c.defineClass({_init:function(a){this.provider=a;this.sina=a.sina;this.intentsResolver=this.sina._createFioriIntentsResolver();},parse:function(s,d){var a=this.parseTotalCount(d);d=p.parse(d);if(d.axes.length===0){return Promise.resolve({totalCount:0,items:[]});}var b=d.axes[0];var e=[];for(var i=0;i<b.length;++i){var f=b[i];this.provider.metadataParser.parseSearchRequestMetadata(f);var g=this.parseItem(f);e.push(g);}return Promise.all(e).then(function(h){return{totalCount:a,items:h};});},parseTotalCount:function(d){if(d.ItemLists&&d.ItemLists[0]&&d.ItemLists[0].TotalCount){return d.ItemLists[0].TotalCount.Value;}return 0;},parseItem:function(a){var b=[];var d=[];var s=[];var e=this.sina.getDataSource(a.$$DataSourceMetaData$$[0].ObjectName);for(var m=0;m<a.$$ResultItemAttributes$$.length;++m){var f=a.$$ResultItemAttributes$$[m];var g=e.getAttributeMetadata(f.Name);var h=this.sina._createSearchResultSetItemAttribute({id:f.Name,label:e.getAttributeMetadata(f.Name).label,value:t.ina2Sina(g.type,f.Value),valueFormatted:f.ValueFormatted||f.Value,valueHighlighted:f.ValueFormatted||f.Value,isHighlighted:false,metadata:g});if(g.usage.Title){b.push(h);}if(g.usage.Detail){d.push(h);}for(var i=0;i<a.$$AttributeMetadata$$.length;i++){var j=a.$$AttributeMetadata$$[i];if(j.Name==f.Name){if(j.SemanticObjectType&&j.SemanticObjectType.length>0){s.push({name:j.SemanticObjectType,value:h.value,type:h.metadata.type});}break;}}}b.sort(function(x,y){return x.metadata.usage.Title.displayOrder-y.metadata.usage.Title.displayOrder;});d.sort(function(x,y){return x.metadata.usage.Detail.displayOrder-y.metadata.usage.Detail.displayOrder;});this.parseWhyFound(e,b,d,a);var l;for(var k=0;k<a.$$RelatedActions$$.length;++k){var r=a.$$RelatedActions$$[k];if(r.Type==="GeneralUri"||r.Type==="SAPNavigation"){var n=r.Description;var o=encodeURI(r.Uri);l=this.sina._createNavigationTarget({label:n,targetUrl:o});}}var q=a.$$DataSourceMetaData$$[0].SemanticObjectType;var v=a.$$DataSourceMetaData$$[0].SystemId;var w=a.$$DataSourceMetaData$$[0].Client;return this.intentsResolver.resolveIntents({semanticObjectType:q,semanticObjectTypeAttributes:s,systemId:v,client:w,fallbackDefaultNavigationTarget:l}).then(function(x){var y=x&&x.defaultNavigationTarget;var z=x&&x.navigationTargets;var A=this.sina._createSearchResultSetItem({dataSource:e,titleAttributes:b,titleDescriptionAttributes:[],detailAttributes:d,defaultNavigationTarget:y,navigationTargets:z});return A;}.bind(this));},parseWhyFound:function(d,a,b,e){var i,w,f,j,g;for(i=0;i<e.$$WhyFound$$.length;i++){w=e.$$WhyFound$$[i];f=this.getResponseAttributeId(d,w.Name);for(j=0;j<a.length;++j){g=a[j];if(f===g.id){w.matched=true;g.valueHighlighted=w.Value;g.isHighlighted=true;break;}}for(j=0;j<b.length;++j){g=b[j];if(f===g.id){w.matched=true;g.valueHighlighted=w.Value;g.isHighlighted=true;break;}}}for(i=0;i<e.$$WhyFound$$.length;i++){w=e.$$WhyFound$$[i];if(w.matched){continue;}f=this.getResponseAttributeId(d,w.Name);var m=d.getAttributeMetadata(f);if(!m){throw new c.Exception('metadata misssing for '+f);}g=this.sina._createSearchResultSetItemAttribute({id:m.id,label:m.label,value:null,valueFormatted:u.filterString(w.Value,['<b>','</b>']),valueHighlighted:w.Value,isHighlighted:true,metadata:m});b.push(g);}},getResponseAttributeId:function(d,r){var a=this.provider.getInternalMetadataAttribute(d,r);if(!a){return r;}var b=this.provider.getInternalMetadataAttribute(d,a.correspondingSearchAttributeName);if(!b){return r;}return b.Name;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/MetadataParser.js":function(){sinaDefine(['../../core/core','./pivotTableParser','./typeConverter'],function(c,p,t){"use strict";return c.defineClass({_init:function(a){this.provider=a;this.sina=a.sina;},normalizeAttributeMetadata:function(a){a.IsKey=a.isKey;},parseRequestAttributes:function(d,a){var b=a.Cube.Dimensions;var f=[];for(var i=0;i<b.length;++i){var e=b[i];if(e.Name.slice(0,2)==='$$'){continue;}var g=e.Attributes[0];this.normalizeAttributeMetadata(g);f.push(g);}this.provider.fillInternalMetadata(d,'metadataRequest',f);},parseResponseAttributes:function(d,a){var f=[];var b=a.Cube.Dimensions[0].Attributes;for(var i=0;i<b.length;++i){var e=b[i];if(e.Name.slice(0,2)==='$$'){continue;}this.normalizeAttributeMetadata(e);f.push(e);}this.provider.fillInternalMetadata(d,'metadataRequest',f);},parseMetadataRequestMetadata:function(d,a){var m=this.provider.getInternalMetadataLoadStatus(d);if(m.metadataRequest){return;}this.parseRequestAttributes(d,a);this.parseResponseAttributes(d,a);this.fillPublicMetadataBuffer(d);},parseSearchRequestMetadata:function(i){var d=this.sina.getDataSource(i.$$DataSourceMetaData$$[0].ObjectName);var m=this.provider.getInternalMetadataLoadStatus(d);if(m.searchRequest){return;}this.provider.fillInternalMetadata(d,'searchRequest',i.$$AttributeMetadata$$);this.fillPublicMetadataBuffer(d);this.calculateAttributeDisplayOrder(d,i);},fillPublicMetadataBuffer:function(d){d.attributesMetadata=[];d.attributeMetadataMap={};var a=this.provider.getInternalMetadataAttributes(d);for(var i=0;i<a.length;++i){var b=a[i];var e=this._parseAttributeTypeAndFormat(b);var f=this.sina._createAttributeMetadata({type:e.type,format:e.format,id:b.Name,label:b.Description,isSortable:this._parseIsSortable(b),isKey:b.IsKey,matchingStrategy:this._parseMatchingStrategy(b),usage:this._parseUsage(b)});d.attributesMetadata.push(f);d.attributeMetadataMap[b.Name]=f;}d._configure();},calculateAttributeDisplayOrder:function(d,a){var b,e,i;var f=[];var g=[];var h=[];var k=[];for(var j=0;j<a.$$ResultItemAttributes$$.length;++j){var l=a.$$ResultItemAttributes$$[j];var m=this.provider.getInternalMetadataAttribute(d,l.Name);if(m.presentationUsage.indexOf('Title')>=0||m.IsTitle){f.push(l.Name);}if(m.presentationUsage.indexOf('Summary')>=0||m.presentationUsage.indexOf('Image')>=0||m.presentationUsage.indexOf('Thumbnail')>=0){g.push(l.Name);}else if(m.presentationUsage.indexOf('Detail')>=0){h.push(l.Name);}}for(i=0;i<f.length;++i){b=f[i];e=d.getAttributeMetadata(b);e.usage.Title.displayOrder=i;}k.push.apply(k,g);k.push.apply(k,h);for(i=0;i<k.length;++i){b=k[i];e=d.getAttributeMetadata(b);e.usage.Detail.displayOrder=i;}},_parseIsSortable:function(a){if(typeof a.IsSortable==='undefined'){return false;}return a.IsSortable;},_parseMatchingStrategy:function(a){if(a.hasFulltextIndex){return this.sina.MatchingStrategy.Text;}return this.sina.MatchingStrategy.Exact;},_parseUsage:function(a){var u={};if(a.presentationUsage.indexOf('Title')>=0||a.IsTitle){u.Title={displayOrder:0};}if(a.presentationUsage.indexOf('Summary')>=0||a.presentationUsage.indexOf('Image')>=0||a.presentationUsage.indexOf('Thumbnail')>=0||a.presentationUsage.indexOf('Detail')>=0){u.Detail={displayOrder:0};}if(a.accessUsage.indexOf('AutoFacet')>=0){u.Facet={displayOrder:0};}if(a.accessUsage.indexOf('AdvancedSearch')>=0){u.AdvancedSearch={displayOrder:0};}return u;},_parseAttributeTypeAndFormat:function(a){for(var i=0;i<a.presentationUsage.length;i++){var b=a.presentationUsage[i];switch(b){case'Summary':continue;case'Detail':continue;case'Title':continue;case'Hidden':continue;case'FactSheet':continue;case'Thumbnail':case'Image':return{type:this.sina.AttributeType.ImageUrl};case'Text':return{type:this.sina.AttributeType.String,format:this.sina.AttributeFormatType.Longtext};default:throw new c.Exception('Unknown presentation usage '+b);}}switch(a.DataType){case'Integer':case'Long':return{type:this.sina.AttributeType.Integer};case'Double':return{type:this.sina.AttributeType.Double};case'String':return{type:this.sina.AttributeType.String};case'Date':return{type:this.sina.AttributeType.Date};case'Time':return{type:this.sina.AttributeType.Time};case'Timestamp':return{type:this.sina.AttributeType.Timestamp};case'GeoJson':return{type:this.sina.AttributeType.GeoJson};default:throw new c.Exception('Unknown data type '+a.DataType);}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/Provider.js":function(){sinaDefine(['../../core/core','../../core/util','../../core/lang','./ajax','./ajaxTemplates','./pivotTableParser','./conditionSerializer','./dataSourceSerializer','./FacetParser','./ItemParser','./suggestionParser','./suggestionTermSplitter','./labelCalculation','./UserEventLogger','./MetadataParser'],function(c,u,l,a,b,p,d,e,F,I,s,f,g,U,M){"use strict";return c.defineClass({id:'inav2',_initAsync:function(h){this.urlPrefix='/sap/es/ina';this.getServerInfoUrl=this.urlPrefix+'/GetServerInfo';this.getResponseUrl=this.urlPrefix+'/GetResponse';this.sina=h.sina;this.ajaxClient=a.createAjaxClient();this.metadataLoadPromises={};this.internalMetadata={};this.labelCalculator=g.createLabelCalculator();this.userEventLogger=new U(this);this.metadataParser=new M(this);this.itemParser=new I(this);this.facetParser=new F(this);this.executeSearchQuery=this.addMetadataLoadDecorator(this.executeSearchQuery);this.executeChartQuery=this.addMetadataLoadDecorator(this.executeChartQuery);this.executeSuggestionQuery=this.addMetadataLoadDecorator(this.executeSuggestionQuery);this.sessionId=c.generateGuid();return this.loadServerInfo().then(function(i){this.serverInfo=i;this.userEventLogger.delayedInit();if(!this.supports('Search')){return Promise.reject(new c.Exception('Enterprise Search is not active'));}return this.loadBusinessObjectDataSources();}.bind(this)).then(function(){return{capabilities:this.sina._createCapabilities({fuzzy:this.supports('Search','OptionFuzzy')})};}.bind(this));},addMetadataLoadDecorator:function(h){return function(){var i=arguments;var q=arguments[0];var j=q.filter.dataSource;return Promise.resolve().then(function(){return this.loadMetadata(j);}.bind(this)).then(function(){return h.apply(this,i);}.bind(this));}.bind(this);},loadMetadata:function(h){if(h.type===this.sina.DataSourceType.Category){return c.Promise.resolve();}var i=this.metadataLoadPromises[h.id];if(i){return i;}b.loadDataSourceMetadataRequest.DataSource.ObjectName=h.id;this.addLanguagePreferences(b.loadDataSourceMetadataRequest);i=this.ajaxClient.postJson(this.getResponseUrl,b.loadDataSourceMetadataRequest).then(function(r){this.metadataParser.parseMetadataRequestMetadata(h,r.data);}.bind(this));this.metadataLoadPromises[h.id]=i;return i;},supports:function(h,k){for(var i=0;i<this.serverInfo.Services.length;++i){var m=this.serverInfo.Services[i];if(m.Service==h){if(!k){return true;}for(var j=0;j<m.Capabilities.length;++j){var n=m.Capabilities[j];if(n.Capability===k){return true;}}}}return false;},loadServerInfo:function(){return this.ajaxClient.getJson(this.getServerInfoUrl).then(function(r){return r.data;});},loadBusinessObjectDataSources:function(){var t=this;t.addLanguagePreferences(b.loadDataSourcesRequest);if(t.supports('Search','PluralDescriptionForDataSource')){b.loadDataSourcesRequest.Search.NamedValues.push({AttributeName:"DescriptionPlural",Name:"DescriptionPlural"});}return t.ajaxClient.postJson(t.getResponseUrl,b.loadDataSourcesRequest).then(function(r){t._processDataSourcesResponse(r,false);},function(h){var i=t.serverInfo.ServerInfo.SystemId+t.serverInfo.ServerInfo.Client+"~ESH_CONNECTOR~";b.fallbackLoadDataSourcesRequest.DataSource.ObjectName=i;return t.ajaxClient.postJson(t.getResponseUrl,b.fallbackLoadDataSourcesRequest).then(function(r){t._processDataSourcesResponse(r,true);});});},_processDataSourcesResponse:function(r,h){var j=p.parse(r.data);var k=j.axes[0];for(var i=0;i<k.length;++i){var m=k[i];var n='';var o='';var q='';if(!h){if(c.isObject(m.Description)){n=m.Description.Value;}else{n=m.Description;}if(c.isObject(m.DescriptionPlural)){o=m.DescriptionPlural.Value;}else{o=m.DescriptionPlural;}if(c.isObject(m.ObjectName)){q=m.ObjectName.Value;}else{q=m.ObjectName;}}else{m.$$ResultItemAttributes$$.forEach(function(v){if(v.Name==="DESCRIPTION"){n=v.Value;}if(v.Name==="DESCRIPTION_PLURAL"){o=v.Value;}if(v.Name==="OBJECT_NAME"){q=v.Value;}});}if(!n){n=q;}if(!o){o=n;}var t=this.sina._createDataSource({id:q,label:n,labelPlural:o,type:this.sina.DataSourceType.BusinessObject,attributesMetadata:[{id:'dummy'}]});this.labelCalculator.calculateLabel(t);}},getInternalMetadataAttributes:function(h){var i=[];var j=this.internalMetadata[h.id];if(!j){return i;}for(var k in j.data){i.push(j.data[k]);}return i;},getInternalMetadataAttribute:function(h,i){return this.internalMetadata[h.id].data[i];},getInternalMetadataLoadStatus:function(h){var i=this.internalMetadata[h.id];if(!i){return{};}return i.loadStatus;},fillInternalMetadata:function(h,j,k){var m=this.internalMetadata[h.id];if(!m){m={loadStatus:{},data:{}};this.internalMetadata[h.id]=m;}for(var i=0;i<k.length;++i){var n=k[i];var o=m.data[n.Name];if(!o){o={};m.data[n.Name]=o;}for(var q in n){o[q]=n[q];}}m.loadStatus[j]=true;},addTemplateConditions:function(r){r.addCondition({attribute:'$$RenderingTemplatePlatform$$',operator:this.sina.ComparisonOperator.Eq,value:'html'});r.addCondition({attribute:'$$RenderingTemplateTechnology$$',operator:this.sina.ComparisonOperator.Eq,value:'Tempo'});r.addCondition({attribute:'$$RenderingTemplateType$$',operator:this.sina.ComparisonOperator.Eq,value:'ResultItem'});r.addCondition({attribute:'$$RenderingTemplateType$$',operator:this.sina.ComparisonOperator.Eq,value:'ItemDetails'});},assembleOrderBy:function(q){var r=[];for(var i=0;i<q.sortOrder.length;++i){var h=q.sortOrder[i];var j=(h.order===this.sina.SortOrder.Descending)?'DESC':'ASC';r.push({AttributeName:h.id,SortOrder:j});}return r;},executeSearchQuery:function(q){var h,r;var i=q.filter.rootCondition.clone();this.addTemplateConditions(i);b.searchRequest.Search.Filter=d.serialize(q.filter.dataSource,i);b.searchRequest.DataSource=e.serialize(q.filter.dataSource);b.searchRequest.Search.SearchTerms=q.filter.searchTerm;b.searchRequest.Search.Top=q.top;b.searchRequest.Search.Skip=q.skip;b.searchRequest.Options=this.assembleRequestOptions(q);b.searchRequest.Search.OrderBy=this.assembleOrderBy(q);b.searchRequest.Search.Expand=['Grid','Items','TotalCount'];this.addLanguagePreferences(b.searchRequest);this.addSessionId(b.searchRequest);if(q.calculateFacets){b.searchRequest.Search.Expand.push('ResultsetFacets');}return this.ajaxClient.postJson(this.getResponseUrl,b.searchRequest).then(function(j){r=j;return this.itemParser.parse(q,r.data);}.bind(this)).then(function(j){h=j;return this.facetParser.parse(q,r.data);}.bind(this)).then(function(j){return this.sina._createSearchResultSet({id:r.data.ExecutionID,title:'Search Result List',query:q,items:h.items,totalCount:h.totalCount,facets:j});}.bind(this));},executeChartQuery:function(q){var r=q.filter.rootCondition.clone();this.addTemplateConditions(r);b.chartRequest.Search.Filter=d.serialize(q.filter.dataSource,r);b.chartRequest.DataSource=e.serialize(q.filter.dataSource);b.chartRequest.Search.SearchTerms=q.filter.searchTerm;b.chartRequest.Search.Top=1;b.chartRequest.Search.Skip=0;b.chartRequest.Facets.Attributes=[q.dimension];b.chartRequest.Facets.MaxNumberOfReturnValues=q.top;b.chartRequest.Options=this.assembleRequestOptions(q);this.addLanguagePreferences(b.chartRequest);this.addSessionId(b.chartRequest);return this.ajaxClient.postJson(this.getResponseUrl,b.chartRequest).then(function(h){return this.facetParser.parse(q,h.data);}.bind(this)).then(function(h){if(h.length>0){return h[0];}return this.sina._createChartResultSet({title:q.filter.dataSource.getAttributeMetadata(q.dimension).label,items:[],query:q});}.bind(this));},executeSuggestionQuery:function(q){var h=q.filter.searchTerm;var i=f.split(this,h);var r=q.filter.rootCondition.clone();if(i.searchTerm){r.addCondition(q.sina.createSimpleCondition({attribute:'$$SearchTerms$$',value:i.searchTerm}));}r.addCondition(q.sina.createSimpleCondition({attribute:'$$SuggestionTerms$$',value:i.suggestionTerm}));b.suggestionRequest.Suggestions2.Filter=d.serialize(q.filter.dataSource,r);b.suggestionRequest.DataSource=e.serialize(q.filter.dataSource);b.suggestionRequest.Options=this.assembleSuggestionOptions(q);if(b.suggestionRequest.Options.length===0){return this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:[]});}b.suggestionRequest.Suggestions2.Top=q.top;b.suggestionRequest.Suggestions2.Skip=q.skip;this.addLanguagePreferences(b.suggestionRequest);this.addSessionId(b.suggestionRequest);return this.ajaxClient.postJson(this.getResponseUrl,b.suggestionRequest).then(function(j){var k=s.parse(this,q,j.data);f.concatenate(this,i,k);return this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:k});}.bind(this));},addSessionId:function(r){if(!this.supports('Search','SessionHandling')){delete r.SessionID;delete r.SessionTimestamp;return;}r.SessionID=this.sessionId;r.SessionTimestamp=parseInt(u.generateTimestamp(),10);},addLanguagePreferences:function(r){if(!this.supports('Search','LanguagePreferences')){delete r.LanguagePreferences;return;}r.LanguagePreferences=l.getLanguagePreferences();},assembleSuggestionOptions:function(q){var h={SearchTerm:{Data:'SuggestObjectData',History:'SuggestSearchHistory'},Object:{},DataSource:{Data:'SuggestDataSources'}};if(!this.supports('Suggestions2','ScopeTypes')){delete h.SearchTerm.History;delete h.DataSource.Data;}var o=[];var k=q.types;var m=q.calculationModes;for(var i=0;i<k.length;i++){var n=k[i];for(var j=0;j<m.length;j++){var r=m[j];var v=h[n][r];if(!v){continue;}o.push(v);}}return o;},assembleRequestOptions:function(q){var O=['SynchronousRun'];if(this.decideValueHelp(q)){O.push('ValueHelpMode');}return O;},decideValueHelp:function(q){var h=q.filter.rootCondition.conditions;for(var i=0;i<h.length;i++){if(q.filter._getAttribute(h[i])===q.dimension){return true;}}return false;},getConfigurationAsync:function(){if(!this.supports('PersonalizedSearch','SetUserStatus')){return c.Promise.resolve(this.sina._createConfiguration({personalizedSearch:false,personalizedSearchIsEditable:false}));}return this.ajaxClient.postJson(this.getResponseUrl,b.getConfigurationRequest).then(function(r){var h={personalizedSearch:false,personalizedSearchIsEditable:false};h.personalizedSearch=r.data.Data.PersonalizedSearch.SessionUserActive;switch(r.data.Data.PersonalizedSearch.PersonalizationPolicy){case'Opt-In':h.isPersonalizedSearchEditable=true;break;case'Opt-Out':h.isPersonalizedSearchEditable=true;break;case'Enforced':h.isPersonalizedSearchEditable=false;break;case'Disabled':h.isPersonalizedSearchEditable=false;break;}return this.sina._createConfiguration(h);}.bind(this));},saveConfigurationAsync:function(h){if(!this.supports('PersonalizedSearch','SetUserStatus')){return c.Promise.resolve();}b.saveConfigurationRequest.SearchConfiguration.Data.PersonalizedSearch.SessionUserActive=h.personalizedSearch;return this.ajaxClient.postJson(this.getResponseUrl,b.saveConfigurationRequest);},resetPersonalizedSearchDataAsync:function(){if(!this.supports('PersonalizedSearch','ResetUserData')){return c.Promise.resolve();}return this.ajaxClient.postJson(this.getResponseUrl,b.resetPersonalizedSearchDataRequest);},logUserEvent:function(h){return this.userEventLogger.logUserEvent(h);},getDebugInfo:function(){return'Searchsystem: '+this.serverInfo.ServerInfo.SystemId+' Client: '+this.serverInfo.ServerInfo.Client;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/UserEventLogger.js":function(){sinaDefine(['../../core/core','../../core/util','./ajaxTemplates'],function(c,u,a){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;this.eventLoggingActive=false;this.clickCounterActive=false;this.delayedConsumer=new u.DelayedConsumer({timeDelay:2000,consumer:this.processEvents,consumerContext:this});},delayedInit:function(){this.eventLoggingActive=this.provider.supports('SearchInteractionLogging','SearchInteractionLogging');this.clickCounterActive=this.provider.supports('PersonalizedSearch');},logUserEvent:function(e){e.timeStamp=u.generateTimestamp();if(this.eventLoggingActive&&e.type!=='ITEM_NAVIGATE'){this.delayedConsumer.add(e);}if(this.clickCounterActive&&e.type==='ITEM_NAVIGATE'&&e.sourceUrlArray.length!==0){this.incrementClickCounter(e.sourceUrlArray,e.targetUrl,e.systemAndClient);}},processEvents:function(e){var r={SearchInteractionLogging:{SessionID:this.provider.sessionId,EventList:[]}};for(var i=0;i<e.length;++i){var b=e[i];var d={Type:b.type,Timestamp:b.timeStamp,ParameterList:[]};for(var n in b){if(n==='type'||n==='timeStamp'){continue;}var v=b[n];d.ParameterList.push({Name:n,Value:v});}r.SearchInteractionLogging.EventList.push(d);}return this.provider.ajaxClient.postJson(this.provider.getResponseUrl,r);},incrementClickCounter:function(s,t,b){if(!t){return undefined;}if(t.indexOf("#")===-1){return undefined;}if(!this.provider.supports("PersonalizedSearch","SetUserStatus")){return undefined;}var g=function(H){return H.split("-")[0];};var d=function(H){return H.split("-")[1].split("&")[0];};var e=function(p){var o=p;var q=[];for(var i=0,r=o.length;i<r;i++){var v=o[i];if(v.indexOf("sap-system")!==-1){continue;}var w=v.split("=")[0];var x=v.split("=")[1];q.push({Name:w,Value:x});}return q;};var N=a.incrementClickCounterRequest.SearchConfiguration.ClientEvent.NavigationEventList;var h=s;var f=g(h[0]);N[0].SourceApplication.SemanticObjectType=f;var j=d(h[0]);N[0].SourceApplication.Intent=j;var k=h[1]!==undefined?e(h[1].split("&")):[];N[0].SourceApplication.ParameterList=k;h=t.split("?");var l=g(h[0]).split("#")[1];N[1].TargetApplication.SemanticObjectType=l;var m=d(h[0]);N[1].TargetApplication.Intent=m;var n=h[1]!==undefined?e(h[1].split("&")):[];N[1].TargetApplication.ParameterList=n;var S={"System":b.systemId,"Client":b.client};delete N[1].TargetApplication.System;delete N[1].TargetApplication.Client;N[1].TargetApplication=jQuery.extend(N[1].TargetApplication,S);return this.provider.ajaxClient.postJson(this.provider.getResponseUrl,a.incrementClickCounterRequest);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/ajax.js":function(){sinaDefine(['../../core/core','../../core/ajax'],function(c,a){"use strict";var m={};m.Exception=c.Exception.derive({_init:function(d){c.Exception.prototype._init.apply(this,[d]);}});var p=function(d){try{var f=JSON.parse(d.responseText);var g=f.Error.Code+': '+f.Error.Message;var h=[];if(f.ErrorDetails){for(var i=0;i<f.ErrorDetails.length;++i){var k=f.ErrorDetails[i];h.push(k.Code+': '+k.Message);}}if(f.Messages){for(var j=0;j<f.Messages.length;++j){var l=f.Messages[j];h.push(l.Number+': '+l.Text+' ('+l.Type+')');}}h=h.join('\n');return c.Promise.reject(new m.Exception({message:g,description:h,previous:d}));}catch(e){return c.Promise.reject(d);}};var b=function(o){return function(){return o.apply(this,arguments).then(function(r){return r;},function(e){if(!(e instanceof a.Exception)){return c.Promise.reject(e);}return p(e);});};};m.createAjaxClient=function(){var d=new a.Client({csrf:true,csrfByPassCache:true});d.postJson=b(d.postJson);d.getJson=b(d.getJson);d.mergeJson=b(d.mergeJson);return d;};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/ajaxTemplates.js":function(){sinaDefine([],function(){"use strict";var m={};m.loadDataSourcesRequest={"DataSource":{"ObjectName":"$$DataSources$$","PackageName":"ABAP"},"Options":["SynchronousRun"],"Search":{"Top":1000,"Skip":0,"OrderBy":[{"AttributeName":"Description","SortOrder":"ASC"},{"AttributeName":"ObjectName","SortOrder":"ASC"}],"Expand":["Grid","Items"],"Filter":{"Selection":{"Operator":{"Code":"And","SubSelections":[{"MemberOperand":{"AttributeName":"SupportedService","Comparison":"=","Value":"Search"}},{"MemberOperand":{"AttributeName":"Type","Comparison":"=","Value":"View"}}]}}},"NamedValues":[{"AttributeName":"ObjectName","Name":"ObjectName"},{"AttributeName":"Description","Name":"Description"},{"AttributeName":"Type","Name":"Type"}]},"SearchTerms":"*","ServiceVersion":204};m.fallbackLoadDataSourcesRequest={"DataSource":{"SchemaName":"","PackageName":"ABAP","ObjectName":"","type":"Connector"},"Search":{"Top":1000,"Skip":0,"OrderBy":[{"AttributeName":"DESCRIPTION","SortOrder":"ASC"}],"Expand":["Grid","Items","TotalCount"],"Filter":{},"NamedValues":[{"AttributeName":"$$ResultItemAttributes$$","Name":"$$ResultItemAttributes$$"},{"AttributeName":"$$RelatedActions$$","Name":"$$RelatedActions$$"}],"SearchTerms":"*","SelectedValues":[]},"SearchTerms":"*"};m.searchRequest={"DataSource":{},"Options":["SynchronousRun"],"Search":{"Expand":["Grid","Items","ResultsetFacets","TotalCount"],"Filter":{"Selection":{"Operator":{"Code":"And","SubSelections":[{"MemberOperand":{"AttributeName":"$$RenderingTemplatePlatform$$","Comparison":"=","Value":"html"}},{"MemberOperand":{"AttributeName":"$$RenderingTemplateTechnology$$","Comparison":"=","Value":"Tempo"}},{"MemberOperand":{"AttributeName":"$$RenderingTemplateType$$","Comparison":"=","Value":"ResultItem"}}]}}},"Top":10,"Skip":0,"SearchTerms":"S*","NamedValues":[{"Function":"WhyFound","Name":"$$WhyFound$$"},{"Function":"RelatedActions","Name":"$$RelatedActions$$"},{"AttributeName":"$$RelatedActions.Proxy$$"}]},"ServiceVersion":204};m.chartRequest={"DataSource":{},"Options":["SynchronousRun"],"Search":{"Expand":["Grid","ResultsetFacets","TotalCount"],"Filter":{},"Top":10,"Skip":0,"SearchTerms":"*","NamedValues":[{"Function":"WhyFound","Name":"$$WhyFound$$"},{"AttributeName":"$$RelatedActions$$"},{"AttributeName":"$$RelatedActions.Proxy$$"}],"OrderBy":[]},"ServiceVersion":204,"Facets":{"MaxNumberOfReturnValues":1000,"Attributes":[]}};m.suggestionRequest={"DataSource":{},"Options":["SynchronousRun"],"Suggestions2":{"Expand":["Grid","Items"],"Precalculated":false,"AttributeNames":[]},"ServiceVersion":204};m.getConfigurationRequest={"SearchConfiguration":{"Action":"Get","Data":{"PersonalizedSearch":{}}}};m.saveConfigurationRequest={"SearchConfiguration":{"Action":"Update","Data":{"PersonalizedSearch":{"SessionUserActive":true}}}};m.resetPersonalizedSearchDataRequest={"SearchConfiguration":{"Action":"Update","Data":{"PersonalizedSearch":{"ResetUserData":true}}}};m.incrementClickCounterRequest={"SearchConfiguration":{"Action":"Update","ClientEvent":{"NavigationEventList":[{"SourceApplication":{"SemanticObjectType":"Action","Intent":"search","ParameterList":[{"Name":"searchterm","Value":"*"},{"Name":"datasource","Value":"{\"label\":\"Purchase Order\",\"labelPlural\":\"Purchase Orders\",\"SchemaName\":{\"label\":\"\",\"value\":\"\"},\"PackageName\":{\"label\":\"ABAP\",\"value\":\"ABAP\"},\"ObjectName\":{\"label\":\"CES002~EPM_PO_DEMO~\",\"value\":\"CES002~EPM_PO_DEMO~\"},\"Type\":\"BusinessObject\"}"},{"Name":"top","Value":"10"},{"Name":"filter","Value":"{\"operator\":\"And\",\"label\":\"DefaultRoot\",\"conditions\":[]}"}]}},{"TargetApplication":{"SemanticObjectType":"EPMPurchaseOrder","Intent":"displayFactSheet","ParameterList":[{"Name":"PurchaseOrderInternalId","Value":"3440B5B014B21EE798DDB43D63E56068"}]}}]}}};m.loadDataSourceMetadataRequest={"DataSource":{"ObjectName":"CER002~EPM_EMPLOYEES_DEMO~","PackageName":"ABAP","SchemaName":""},"Options":["SynchronousRun"],"Metadata":{"Context":"Search","Expand":["Cube"]},"ServiceVersion":204};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/conditionSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator','./typeConverter'],function(c,C,a,t){"use strict";var b=c.defineClass({_init:function(d){this.dataSource=d;},convertSinaToInaOperator:function(s){switch(s){case a.Eq:return'=';case a.Lt:return'<';case a.Gt:return'>';case a.Le:return'<=';case a.Ge:return'>=';case a.Co:return'=';case a.Bw:return'=';case a.Ew:return'=';default:throw new c.Exception('unknow comparison operator '+s);}},serializeComplexCondition:function(d){var r={Selection:{Operator:{Code:d.operator,SubSelections:[]}}};var s=d.conditions;for(var i=0;i<s.length;++i){var e=s[i];r.Selection.Operator.SubSelections.push(this.serialize(e));}return r;},serializeSimpleCondition:function(d){if(!d.value){return undefined;}var e=d.attribute;var f;if(e.slice(0,2)==='$$'){f=this.dataSource.sina.AttributeType.String;}else{var m=this.dataSource.getAttributeMetadata(e);f=m.type;}var o='MemberOperand';if(e==='$$SuggestionTerms$$'||e==='$$SearchTerms$$'){o='SearchOperand';}var r={};r[o]={AttributeName:e,Comparison:this.convertSinaToInaOperator(d.operator),Value:t.sina2Ina(f,d.value,{operator:d.operator})};return r;},serialize:function(d){if(d instanceof C){return this.serializeComplexCondition(d);}return this.serializeSimpleCondition(d);}});return{serialize:function(d,e){var s=new b(d);return s.serialize(e);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/dataSourceSerializer.js":function(){sinaDefine(['../../core/core','../../sina/ComplexCondition','../../sina/ComparisonOperator'],function(c,C,a){"use strict";return{serialize:function(d){if(d.id==='All'&&d.type===d.sina.DataSourceType.Category){return{ObjectName:'$$ALL$$',PackageName:'ABAP',SchemaName:'',Type:'Category'};}var t;switch(d.type){case d.sina.DataSourceType.Category:t='Category';break;case d.sina.DataSourceType.BusinessObject:t='Connector';break;}return{ObjectName:d.id,PackageName:'ABAP',SchemaName:'',Type:t};}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/labelCalculation.js":function(){sinaDefine(['../../core/core','../../core/LabelCalculator'],function(c,L){"use strict";var m={};var s=function(i){if(i[6]!=='~'){return{system:'__DUMMY',client:'__DUMMY'};}return{system:i.slice(0,3),client:i.slice(3,6)};};m.createLabelCalculator=function(){return new L({key:function(d){var a=s(d.id);return[d.labelPlural,a.system,a.client];},data:function(d){return{label:d.label,labelPlural:d.labelPlural};},setLabel:function(d,l,a){l[0]=a.label;d.label=l.join(' ');l[0]=a.labelPlural;d.labelPlural=l.join(' ');},setFallbackLabel:function(d,a){d.label=a.label+' duplicate '+d.id;d.labelPlural=d.label;}});};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/pivotTableParser.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";var m={};m.ResultSetParser=function(){this._init.apply(this,arguments);};m.ResultSetParser.prototype={_init:function(o){this.resultSet=o.resultSet;},parseNamedValue:function(n){var v;var a;var b;for(var p in n){switch(p){case'Name':a=n[p];break;case'Value':v=n[p];break;default:if(!b){b={};}b[p]=n[p];}}if(b){b.Value=v;return{name:a,value:b};}return{name:a,value:v};},formatItem:function(a){var l;if(a.NamedValues){l=a.NamedValues;}if(!l){return a;}var o={};for(var i=0;i<l.length;++i){var n=l[i];var p=this.parseNamedValue(n);o[p.name]=this.formatItem(p.value);}return o;},formatItems:function(a){var r={};for(var i=0;i<a.length;++i){var b=a[i];var f=this.formatItem(b);c.extend(r,f);}return r;},parse:function(){if(!this.resultSet.Grids||!this.resultSet.Grids[0]||!this.resultSet.Grids[0].Axes){return{cells:[],axes:[]};}this.enhance(this.resultSet);var g=this.resultSet.Grids[0];if(g.Cells.length>0){return this.parseWithCells(g);}return this.parseWithoutCells(g);},parseWithCells:function(g){var r={cells:[]};for(var i=0;i<g.Cells.length;i++){var a=g.Cells[i];var b=[];for(var j=0;j<a.Index.length;j++){var d=a.Index[j];var e=g.Axes[j];var f=this.resolve(e,d);b.push.apply(b,f);}var h=c.extend({},a);delete h.Index;b.push(h);r.cells.push(this.formatItems(b));}return r;},parseWithoutCells:function(g){var r={axes:[]};for(var i=0;i<g.Axes.length;++i){var a=g.Axes[i];var b=[];r.axes.push(b);for(var j=0;j<a.Tuples.length;++j){var d=this.resolve(a,j);b.push(this.formatItems(d));}}return r;},resolve:function(a,b){var d=[];if(a.Tuples.length===0){return d;}var t=a.Tuples[b];for(var i=0;i<t.length;++i){var e=t[i];var f=a.Dimensions[i].ItemList.Items[e];d.push(f);}return d;},enhance:function(r){var a={};for(var i=0;i<r.ItemLists.length;++i){var b=r.ItemLists[i];a[b.Name]=b;}for(var h=0;h<r.Grids.length;++h){var g=r.Grids[h];for(var j=0;j<g.Axes.length;++j){var d=g.Axes[j];for(var k=0;k<d.Dimensions.length;++k){var e=d.Dimensions[k];e.ItemList=a[e.ItemListName];}}}}};m.parse=function(r){var p=new m.ResultSetParser({resultSet:r});return p.parse();};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/qunit/test.js":function(){sinaDefine(['./testLabelCalculator','./testConfiguration','./testAjaxClient'],function(){"use strict";});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/qunit/testAjaxClient.js":function(){sinaDefine(['../../../core/ajax','../ajaxTemplates'],function(a,b){"use strict";QUnit.test('AjaxClient-1',function(c){var d=c.async();var e=new a.Client({csrf:true});e.getJson('/sap/es/ina/GetServerInfo').then(function(s){e.postJson('/sap/es/ina/GetResponse',b.loadDataSourcesRequest).then(function(r){c.ok(r.data.ItemLists[0].Items.length>0);d();});});});QUnit.test('AjaxClient-2',function(c){var d=c.async();var e=new a.Client({csrf:true,csrfFetchRequest:{method:'GET',url:'/sap/es/ina/GetServerInfo',headers:a.Client.prototype.jsonHeaders}});e.postJson('/sap/es/ina/GetResponse',b.loadDataSourcesRequest).then(function(r){c.ok(r.data.ItemLists[0].Items.length>0);d();});});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/qunit/testConfiguration.js":function(){sinaDefine(['../../../sina/sinaFactory'],function(s){"use strict";QUnit.test('Configuration',function(a){var d=a.async();s.createAsync('../Provider').then(function(b){b.getConfigurationAsync().then(function(c){c.setPersonalizedSearch(false);c.saveAsync().then(function(){c.resetPersonalizedSearchDataAsync().then(function(){a.equal(1,1);d();});});});});});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/qunit/testLabelCalculator.js":function(){sinaDefine(['../LabelCalculator'],function(L){"use strict";var t=function(a,s){var d=[];var l=new L();for(var i=0;i<s.length;++i){var b=s[i];l.calculateLabel(b.dataSource);d.push(b.dataSource);for(var j=0;j<=i;++j){a.equal(b.labels[j],d[j].label,'label comparison');a.equal(b.labelsPlural[j],d[j].labelPlural,'label plural comparison');}}};QUnit.test("LabelCalculator 1",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER002~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order'],labelsPlural:['Purchase Orders','Sales Orders']},{dataSource:{id:'CES002~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order CER','Sales Order CES'],labelsPlural:['Purchase Orders','Sales Orders CER','Sales Orders CES']},{dataSource:{id:'CES003~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order','Sales Order CER','Sales Order CES 002','Sales Order CES 003'],labelsPlural:['Purchase Orders','Sales Orders CER','Sales Orders CES 002','Sales Orders CES 003']}]);});QUnit.test("LabelCalculator 2",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER003~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003']},{dataSource:{id:'CES003~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003','Purchase Order CES'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003','Purchase Orders CES']},{dataSource:{id:'CES003~EPM_SO_DEMO~',label:'Sales Order',labelPlural:'Sales Orders'},labels:['Purchase Order CER 002','Purchase Order CER 003','Purchase Order CES','Sales Order'],labelsPlural:['Purchase Orders CER 002','Purchase Orders CER 003','Purchase Orders CES','Sales Orders']}]);});QUnit.test("LabelCalculator - system and client not sufficient for unique key",function(a){t(a,[{dataSource:{id:'CER002~EPM_PO_DEMO~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order'],labelsPlural:['Purchase Orders']},{dataSource:{id:'CER002~EPM_PO_DEMO_2~',label:'Purchase Order',labelPlural:'Purchase Orders'},labels:['Purchase Order','Purchase Order#1'],labelsPlural:['Purchase Orders','Purchase Orders#1']}]);});QUnit.test("LabelCalculator - category",function(a){t(a,[{dataSource:{id:'EPM_Demo',label:'Procurement',labelPlural:'Procurement'},labels:['Procurement'],labelsPlural:['Procurement']}]);});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/suggestionParser.js":function(){sinaDefine(['../../core/core','./pivotTableParser','./typeConverter'],function(c,p,t){"use strict";var S=c.defineClass({_init:function(a){this.provider=a;this.sina=a.sina;},parseSuggestions:function(q,d){d=p.parse(d);var s=[];var a;var b;for(var i=0;i<d.cells.length;i++){a=null;var e=d.cells[i];if(e.$$Attribute$$!=='$$AllAttributes$$'){continue;}switch(e.$$Term$$.Scope){case'SearchHistory':if(e.$$DataSource$$==='$$AllDataSources$$'){a=this.parseSearchTermSuggestion(q,e);}break;case'ObjectData':if(e.$$DataSource$$==='$$AllDataSources$$'){a=this.parseSearchTermSuggestion(q,e);b=a;}else{a=this.parseSearchTermAndDataSourceSuggestion(q,e);if(a&&a.filter.dataSource!==b.filter.dataSource){b.childSuggestions.push(a);}a=null;}break;case'DataSources':if(e.$$DataSource$$==='$$AllDataSources$$'){a=this.parseDataSourceSuggestion(q,e);}break;}if(a){s.push(a);}}return s;},parseDataSourceSuggestion:function(q,a){var d=this.sina.getDataSource(a.$$Term$$.Value);if(!d){return null;}var f=q.filter.clone();f.setDataSource(d);return this.sina._createDataSourceSuggestion({calculationMode:this.sina.SuggestionCalculationMode.Data,dataSource:d,label:a.$$Term$$.ValueFormatted});},parseSearchTermSuggestion:function(q,a){var b=this.parseCalculationMode(a.$$Term$$.Scope);var f=q.filter.clone();f.setSearchTerm(a.$$Term$$.Value);return this.sina._createSearchTermSuggestion({searchTerm:a.$$Term$$.Value,calculationMode:b,filter:f,label:a.$$Term$$.ValueFormatted});},parseSearchTermAndDataSourceSuggestion:function(q,a){var b=this.parseCalculationMode(a.$$Term$$.Scope);var f=q.filter.clone();f.setSearchTerm(a.$$Term$$.Value);var d=this.sina.getDataSource(a.$$DataSource$$);if(!d){return null;}f.setDataSource(d);return this.sina._createSearchTermAndDataSourceSuggestion({searchTerm:a.$$Term$$.Value,dataSource:d,calculationMode:b,filter:f,label:a.$$Term$$.ValueFormatted});},parseCalculationMode:function(s){switch(s){case'SearchHistory':return this.sina.SuggestionCalculationMode.History;case'ObjectData':return this.sina.SuggestionCalculationMode.Data;}}});return{parse:function(a,s,d){var b=new S(a);return b.parseSuggestions(s,d);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/suggestionTermSplitter.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";var S=c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},split:function(t){var s=t.lastIndexOf(' ');if(s<0){return{searchTerm:null,suggestionTerm:t};}var a=t.slice(0,s);a=a.replace(/\s+$/,"");if(a.length===0){return{searchTerm:null,suggestionTerm:t};}var b=t.slice(s);b=b.replace(/^\s+/,"");if(b.length===0){return{searchTerm:null,suggestionTerm:t};}return{searchTerm:a,suggestionTerm:b};},concatenate:function(s,a){if(!s.searchTerm){return;}var t;var b=[];var d=s.searchTerm.split(' ');for(var k=0;k<d.length;k++){t=d[k];t=t.trim();b.push({term:t,regExp:new RegExp(this.escapeRegExp(t),'i')});}for(var i=0;i<a.length;++i){var e=a[i];if(e.suggestionType!==this.sina.SuggestionType.SearchTerm&&e.suggestionType!==this.sina.SuggestionType.SearchTermAndDataSource){continue;}var n=[];for(var j=0;j<b.length;++j){var f=b[j];if(!f.regExp.test(e.filter.searchTerm)){n.push(f.term);}}var p=[];var g=n.join(' ');for(var l=0;l<n.length;l++){t=n[l];p.push('<b>'+t+'</b>');}p=p.join(' ');e.label=p+' '+e.label;e.filter.searchTerm=e.searchTerm=g+' '+e.filter.searchTerm;this.concatenate(s,e.childSuggestions);}},escapeRegExp:function(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");}});return{split:function(p,t){var s=new S(p,t);return s.split(t);},concatenate:function(p,s,a){var b=new S(p);return b.concatenate(s,a);}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/inav2/typeConverter.js":function(){sinaDefine(['../../core/core','../../sina/util','../../sina/AttributeType','../../sina/ComparisonOperator'],function(c,s,A,C){"use strict";return{sina2Ina:function(a,v,b){b=b||{};switch(a){case A.Double:return v.toString();case A.Integer:return v.toString();case A.String:return this.sina2InaString(v,b);case A.ImageUrl:return v;case A.ImageBlob:throw new c.Exception('not implemented');case A.GeoJson:return v;case A.Date:return this.sina2InaDate(v,b);case A.Time:return this.sina2InaTime(v);case A.Timestamp:return this.sina2InaTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},ina2Sina:function(a,v){switch(a){case A.Double:return parseFloat(v);case A.Integer:return parseInt(v,10);case A.String:return v;case A.ImageUrl:return v;case A.ImageBlob:throw new c.Exception('not implemented');case A.GeoJson:return v;case A.Date:return this.ina2SinaDate(v);case A.Time:return this.ina2SinaTime(v);case A.Timestamp:return this.ina2SinaTimestamp(v);default:throw new c.Exception('unknown attribute type '+a);}},ina2SinaTimestamp:function(v){v=v.trim();var y,m,a,h,b,e,f;if(v.indexOf('-')>=0){y=parseInt(v.slice(0,4),10);m=parseInt(v.slice(5,7),10);a=parseInt(v.slice(8,10),10);h=parseInt(v.slice(11,13),10);b=parseInt(v.slice(14,16),10);e=parseInt(v.slice(17,19),10);f=parseInt(v.slice(20,20+6),10);}else{y=parseInt(v.slice(0,4),10);m=parseInt(v.slice(4,6),10);a=parseInt(v.slice(6,8),10);h=parseInt(v.slice(8,10),10);b=parseInt(v.slice(10,12),10);e=parseInt(v.slice(12,14),10);f=parseInt(v.slice(15,15+6),10);}var d=new Date(Date.UTC(y,m-1,a,h,b,e,f/1000));return d;},sina2InaTimestamp:function(v){var y=v.getUTCFullYear();var m=v.getUTCMonth()+1;var d=v.getUTCDate();var h=v.getUTCHours();var a=v.getUTCMinutes();var b=v.getUTCSeconds();var e=v.getUTCMilliseconds()*1000;var r=this.addLeadingZeros(y.toString(),4)+'-'+this.addLeadingZeros(m.toString(),2)+'-'+this.addLeadingZeros(d.toString(),2)+' '+this.addLeadingZeros(h.toString(),2)+':'+this.addLeadingZeros(a.toString(),2)+':'+this.addLeadingZeros(b.toString(),2)+'.'+this.addLeadingZeros(e.toString(),6);return r;},ina2SinaTime:function(v){v=v.trim();if(v.length===6){return v.slice(0,2)+':'+v.slice(2,4)+':'+v.slice(4,6);}if(v.length===8){return v.slice(0,2)+':'+v.slice(3,5)+':'+v.slice(6,8);}throw new c.Exception('time conversion error '+v);},sina2InaTime:function(v){return v.slice(0,2)+':'+v.slice(3,5)+':'+v.slice(6,8);},ina2SinaDate:function(v){v=v.trim();if(v.length===8){return v.slice(0,4)+'/'+v.slice(4,6)+'/'+v.slice(6,8);}if(v.length===27){return v.slice(0,4)+'/'+v.slice(5,7)+'/'+v.slice(8,10);}throw new c.Exception('date conversion error '+v);},sina2InaDate:function(v,a){var r=v.slice(0,4)+'-'+v.slice(5,7)+'-'+v.slice(8,10);if(a.operator===C.Lt||a.operator===C.Le){r+=' 23:59:59.0000000';}else{r+=' 00:00:00.0000000';}return r;},sina2InaString:function(v,a){return s.convertOperator2Wildcards(v,a.operator);},addLeadingZeros:function(v,l){return'00000000000000'.slice(0,l-v.length)+v;}};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/multi/FacetMode.js":function(){sinaDefine([],function(){"use strict";return{'tree':'tree','flat':'flat'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/multi/FederationMethod.js":function(){sinaDefine(['./FederationType'],function(F){"use strict";var m={};m.ranking={};m.ranking.sort=function(r){var c=[];for(var j=0;j<r.length;j++){c=c.concat(r[j]);}c.sort(function(a,b){var d=b.score-a.score;return d;});return c;};m.roundRobin={};m.roundRobin.sort=function(r){var s=[];for(var i=0;i<r.length;i++){s=m.roundRobin.mergeMultiResults(s,r[i],i+1);}return s;};m.roundRobin.mergeMultiResults=function(f,s,a){if(a<1){return[];}if(a===1){return s;}var b=f.length;var c=s.length;var r=[];for(var k=0;k<b;k++){r.push(f[k]);}for(var i=0;i<b;i++){if(i>=c){break;}r.splice(a*(i+1)-1,0,s[i]);}if(c>b){r=r.concat(s.slice(b-c));}return r;};m.advancedRoundRobin={};m.advancedRoundRobin.sort=function(c){var d=[];for(var j=0;j<c.length;j++){d=d.concat(c[j]);}var e;var f={};for(var i=0;i<d.length;i++){e=d[i].dataSource.id;if(!f[e]){f[e]=[];}f[e].push(d[i]);}var g=[];var h=0;for(var k in f){var l=f[k][0];e=l.dataSource.id;var s=l.score;g.push({dataSourceId:e,score:s,index:h});h++;}g.sort(function(a,b){var t=b.score-a.score;if(t===0){t=a.index-b.index;}return t;});var n=[];var o=0;for(var r=0;r<d.length;){var p=g[o];var q=f[p.dataSourceId];if(q.length>0){n.push(q.shift());r++;}o=(o+1)%g.length;}return n;};return m;});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/multi/FederationType.js":function(){sinaDefine([],function(){"use strict";return{'ranking':'ranking','round_robin':'roundRobin','advanced_round_robin':'advancedRoundRobin'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/multi/Provider.js":function(){sinaDefine(['../../core/core','../../sina/sinaFactory','./ProviderHelper','./FederationMethod','./FederationType','./FacetMode'],function(c,s,P,F,a,b){"use strict";return c.defineClass({id:'multi',_initAsync:function(p){this.sina=p.sina;this.facetMode=b[p.facetMode]||b.flat;this.federationType=a[p.federationType]||a.advanced_round_robin;this.multiSina=[];this.multiDataSourceMap={};this.sina.dataSourceMap[this.sina.allDataSource.id]=this.sina.allDataSource;this.providerHelper=new P(this);this.federationMethod=F;var d=function(e){if(e>=p.subProviders.length){if(this.multiSina.length<1){return c.Promise.reject(new c.Exception('sina creation by trial failed'));}return undefined;}var f=p.subProviders[e];return s.createAsync(f).then(function(g){this.providerHelper.updateProviderId(g);for(var i=0;i<g.dataSources.length;i++){var h=g.dataSources[i];var m=this.providerHelper.calculateMultiDataSourceId(h.id,g.provider.id);this.providerHelper.createMultiDataSource(m,h);this.multiDataSourceMap[m]=h;}this.multiSina.push(g);return d(e+1);}.bind(this),function(){return d(e+1);});}.bind(this);return d(0);},executeSearchQuery:function(q){var t=this;var d;t.searchResultSet=t.sina._createSearchResultSet({title:'Search Multi Result List',query:q,items:[],totalCount:0,facets:[]});t.searchResultSetItemList=[];if(q.filter.dataSource===t.sina.allDataSource){t.searchResultSet.facets.push(t.sina._createDataSourceResultSet({title:q.filter.dataSource.label,items:[],query:q}));var e=[];for(var i=0;i<t.multiSina.length;i++){d=t.multiSina[i].createSearchQuery({calculateFacets:q.calculateFacets,multiSelectFacets:q.multiSelectFacets,dataSource:t.multiSina[i].allDataSource,searchTerm:q.getSearchTerm(),top:q.top,skip:q.skip,sortOrder:q.sortOrder});e.push(d.getResultSetAsync());}return c.Promise.all(e).then(function(r){for(var j=0;j<r.length;j++){var g=r[j];for(var k=0;k<g.items.length;k++){var h=g.items[k];var m=t.providerHelper.calculateMultiDataSourceId(h.dataSource.id,h.sina.provider.id);var l=t.sina.dataSourceMap[m];h.dataSource=l;h.sina=t.sina;}t.searchResultSet.totalCount+=g.totalCount;t.searchResultSetItemList.push(g.items);if(g.facets[0]){if(t.facetMode===b.tree){var f=t.sina.getDataSource(t.providerHelper.calculateMultiDataSourceId(g.query.filter.dataSource.id,g.sina.provider.id));t.searchResultSet.facets[0].items.push(t.sina._createDataSourceResultSetItem({dataSource:f,dimensionValueFormatted:t.providerHelper.calculateMultiDataSourceLabel(g.query.filter.dataSource.label,g.sina.provider),measureValue:g.totalCount,measureValueFormatted:g.totalCount}));}else{var n=t.providerHelper.updateDataSourceFacets(g.facets);n[0].items.forEach(function(o){t.searchResultSet.facets[0].items.push(o);});}}}t.searchResultSet.items=t.federationMethod[t.federationType].sort(t.searchResultSetItemList);t.searchResultSet.items=t.searchResultSet.items.slice(q.skip,q.top);return t.searchResultSet;});}var f=t.multiDataSourceMap[q.filter.dataSource.id];d=f.sina.createSearchQuery({calculateFacets:q.calculateFacets,multiSelectFacets:q.multiSelectFacets,dataSource:f,searchTerm:q.getSearchTerm(),rootCondition:q.getRootCondition(),top:q.top,skip:q.skip,sortOrder:q.sortOrder});return d.getResultSetAsync().then(function(g){t.searchResultSet.items=g.items;t.searchResultSet.totalCount=g.totalCount;for(var i=0;i<t.searchResultSet.items.length;i++){var r=t.searchResultSet.items[i];var h=t.providerHelper.calculateMultiDataSourceId(r.dataSource.id,r.sina.provider.id);t.providerHelper.updateAttributesMetadata(r.dataSource,t.sina.dataSourceMap[h]);r.dataSource=t.sina.dataSourceMap[h];r.sina=t.sina;}var m;if(g.facets.length===1&&g.facets[0].items[0].dataSource){m=g.facets;m[0].title=t.providerHelper.calculateMultiDataSourceLabel(g.facets[0].title,g.facets[0].sina.provider);t.providerHelper.updateDataSourceFacets(m);}else{m=[];for(var k=0;k<g.facets.length;k++){var j=g.facets[k];m.push(t.providerHelper.createMultiChartResultSet(j));}}t.searchResultSet.facets=m;return t.searchResultSet;});},executeChartQuery:function(q){var t=this;var d=t.multiDataSourceMap[q.filter.dataSource.id];var e=d.sina.createChartQuery({dimension:q.dimension,dataSource:d,searchTerm:q.getSearchTerm(),rootCondition:q.getRootCondition(),top:q.top,skip:q.skip,sortOrder:q.sortOrder});return e.getResultSetAsync().then(function(f){return t.providerHelper.createMultiChartResultSet(f);});},executeSuggestionQuery:function(q){var t=this;var d;if(q.filter.dataSource===t.sina.allDataSource){var e=[];for(var i=0;i<t.multiSina.length;i++){d=t.multiSina[i].createSuggestionQuery({types:q.types,calculationModes:q.calculationModes,dataSource:t.multiSina[i].allDataSource,searchTerm:q.getSearchTerm(),top:q.top,skip:q.skip,sortOrder:q.sortOrder});e.push(d.getResultSetAsync());}return c.Promise.all(e).then(function(r){var m=t.sina._createSuggestionResultSet({title:'Multi Suggestions',query:q,items:[]});for(var j=0;j<r.length;j++){var g=t.providerHelper.updateSuggestionDataSource(r[j]);m.items=t.federationMethod.roundRobin.mergeMultiResults(m.items,g.items,j+1);}return m;});}var f=t.multiDataSourceMap[q.filter.dataSource.id];d=f.sina.createSuggestionQuery({types:q.types,calculationModes:q.calculationModes,dataSource:f,searchTerm:q.getSearchTerm(),top:q.top,skip:q.skip,sortOrder:q.sortOrder});return d.getResultSetAsync().then(function(r){return t.providerHelper.updateSuggestionDataSource(r);});}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/multi/ProviderHelper.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";return c.defineClass({_init:function(p){this.provider=p;this.sina=p.sina;},calculateMultiDataSourceLabel:function(l,p){if(p.label){var i=p.label||p.id;return l+' - '+i;}return l;},calculateMultiDataSourceId:function(i,a){return a+'_'+i;},updateProviderId:function(a){var i=0;for(;;){if(i!==0){a.provider.id=a.provider.id+"_"+i;}var d=this.findSinaById(a.provider.id);if(d){i++;continue;}else{break;}}},createMultiDataSource:function(i,d){return this.sina._createDataSource({id:i,label:this.calculateMultiDataSourceLabel(d.label,d.sina.provider),labelPlural:this.calculateMultiDataSourceLabel(d.labelPlural,d.sina.provider),type:d.type,hidden:d.hidden,attributesMetadata:d.attributesMetadata});},findSinaById:function(p){for(var i=0;i<this.provider.multiSina.length;i++){var a=this.provider.multiSina[i];if(p===a.provider.id){return a;}}return undefined;},updateAttributesMetadata:function(d,a){a.attributesMetadata=d.attributesMetadata;a.attributeMetadataMap=d.attributeMetadataMap;},updateSuggestionDataSource:function(r){for(var i=0;i<r.items.length;i++){var a=r.items[i];if(a.childSuggestions){for(var j=0;j<a.childSuggestions.length;j++){var b=a.childSuggestions[j];var d=this.calculateMultiDataSourceId(b.dataSource.id,b.sina.provider.id);b.dataSource=this.sina.dataSourceMap[d];b.filter.dataSource=this.sina.dataSourceMap[d];}}if(a.dataSource){var m=this.calculateMultiDataSourceId(a.dataSource.id,a.sina.provider.id);var e=this.createMultiDataSource(m,a.dataSource);a.dataSource=e;a.sina=this.sina;}}return r;},createMultiChartResultSet:function(a){var t=this;var m=t.sina._createChartResultSet({id:a.id,items:[],query:a.query,title:a.title});for(var i=0;i<a.items.length;i++){var b=a.items[i];var d=t.sina.parseConditionFromJson(b.filterCondition.toJson());m.items.push(t.sina._createChartResultSetItem({filterCondition:d,dimensionValueFormatted:b.dimensionValueFormatted,measureValue:b.measureValue,measureValueFormatted:b.measureValueFormatted}));}return m;},updateDataSourceFacets:function(r){for(var j=0;j<r[0].items.length;j++){var f=r[0].items[j];if(f.dataSource){var a=this.calculateMultiDataSourceId(f.dataSource.id,f.sina.provider.id);if(!this.provider.multiDataSourceMap[a]){this.createMultiDataSource(a,f.dataSource);this.provider.multiDataSourceMap[a]=f.dataSource;}f.dataSource=this.sina.dataSourceMap[a];}}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/Provider.js":function(){sinaDefine(['../../core/core','../../core/util','./template','./template2','../../sina/NavigationTarget'],function(c,u,t,a,N){"use strict";return c.defineClass({id:'sample',instanceCounterStr:"0",_initAsync:function(p){var b=this;b.sina=p.sina;b.NavigationTarget=N;this.sina.util.sampleProviderInstanceCounter++;b.instanceCounterStr=""+this.sina.util.sampleProviderInstanceCounter;var d;var f=0;if(document.location.href.indexOf("use=sample1")>0){f=1;}else if(document.location.href.indexOf("use=sample2")>0){f=2;}if(f===1){b.templateProvider=a;}else if(f===2){b.templateProvider=t;}else if(parseInt(b.instanceCounterStr,10)%2===1){b.templateProvider=t;}else{b.templateProvider=a;}d=b.templateProvider(b);d._init(d);var r=c.Promise.resolve({capabilities:this.sina._createCapabilities({fuzzy:false})});return r;},getSuggestionList:function(b){var l=this._stringify(b);var r=new RegExp("\"valueFormatted\"\:\"([^\{/]+?)\",\"valueHighlighted","g");var m=[];l.replace(r,function(){m.push(arguments[1]);});var s=m.toString().split(' ');s=s.toString().split(',');m=m.concat(s);m=m.filter(function(i,p){if(i!==''){return m.indexOf(i)==p;}});return m;},_stringify:function(o){var b=[];var s=JSON.stringify(o,function(k,v){if(typeof v==='object'&&v!==null){if(b.indexOf(v)!==-1){return undefined;}b.push(v);}return v;});b=null;return s;},adjustImageViewing:function(){var b,d,l;try{$(".sapUshellSearchResultListItem-Image").on('mouseenter',function(){b=$(this).clone();$('body').append(b);d=($(window).height()-$(b).outerHeight())*0.33;l=($(window).width()-$(b).outerWidth())*0.33;b.css({position:"absolute",top:d+"px",left:l+"px"}).show();});$(".sapUshellSearchResultListItem-Image").on('mouseleave',function(){b.remove();});}catch(e){}},applyFilters:function(b,s){var d=[];if(!s.filter.rootCondition.conditions.length>0||!s.filter.rootCondition.conditions[0].conditions.length>0){return b;}var e=[];var f=[];for(var g=0;g<s.filter.rootCondition.conditions.length;g++){var l=s.filter.rootCondition.conditions[g].conditions;for(var h=0;h<l.length;h++){e.push([l[h].attribute,l[h].value]);f.push(l[h].attribute);}}var o=false;for(var i=0;i<b.length;i++){var q=b[i];var r=[];for(var j=0;j<e.length;j++){o=false;for(var k=0;k<q.detailAttributes.length;k++){var v=q.detailAttributes[k];if(v.id===e[j][0]&&v.value===e[j][1]){o=true;}}for(var m=0;m<q.titleAttributes.length;m++){var w=q.titleAttributes[m];if(w.id===e[j][0]&&w.value===e[j][1]){o=true;}}e[j][2]=o;r.push(o);}if(r.toString().match(/false/)===null){d.push(q);}else{var x=[];var y=f.filter(function(q,A){return f.indexOf(q)==A;});for(var n=0;n<y.length;n++){o=false;var z=y[n];for(var p=0;p<e.length;p++){if(e[p][0]===z&&e[p][2]===true){o=true;break;}}x.push(o);}if(x.toString().match(/false/)===null){d.push(q);}}}return d;},adjustHighlights:function(b,s){var n=[];var d="";for(var i=0;i<b.length;i++){var e=b[i];var f=true;d="";e.titleHighlighted=this.addHighlight(e.title,s);if(e.titleHighlighted!==e.title){f=false;}for(var j=0;j<e.detailAttributes.length;j++){var g=e.detailAttributes[j];d=g.metadata.type;if(d==="String"||d==="Integer"){g.valueHighlighted=this.addHighlight(g.valueFormatted,s);if(g.valueHighlighted!==g.valueFormatted){f=false;}}}for(var k=0;k<e.titleAttributes.length;k++){var h=e.titleAttributes[k];d=h.metadata.type;if(d==="String"||d==="Integer"||d==="ImageUrl"){h.valueHighlighted=this.addHighlight(h.valueFormatted,s);if(h.valueHighlighted!==h.valueFormatted){f=false;}}}if(f===false||s==="*"){n.push(e);}}return n;},addHighlight:function(h,s){if(typeof h!=="string"||typeof s!=="string"){return h;}var p=h.toLowerCase().indexOf(s.toLowerCase());if(p>-1){var b=p+s.length;var n=h.substring(0,p)+'<b>'+h.substring(p,b)+'</b>'+h.substring(b);return n;}return h;},addSuvLinkToSearchResultItem:function(s,b,d){var e=this.sina._createSuvNavTargetResolver();if(!b){b='/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/docs/folklorist_authors_and_publications.suv';}if(!d){d=[];}var f={};f.obj={suvThumbnailAttribute:s,suvTargetMimeTypeAttribute:{value:'application/vnd.sap.universal-viewer+suv'},suvTargetUrlAttribute:{value:b}};e.resolveSuvNavTargets(null,f,d);},augmentDetailAttributes:function(r){for(var i=0;i<r.length;i++){var b=r[i].detailAttributes;for(var j=0;j<b.length;j++){var d=b[j];d=u.addPotentialNavTargetsToAttribute(this.sina,d);}}return r;},executeSearchQuery:function(s){var b=this;b.searchQuery=s;return new c.Promise(function(r,d){var e,f,g;var i=b.templateProvider(b);var h=i.searchResultSetItemArray;h=b.augmentDetailAttributes(h);var j=i.searchResultSetItemArray2;j=b.augmentDetailAttributes(j);var k=h.concat(j);var l;if(i.searchResultSetItemArray3){l=i.searchResultSetItemArray3;k=h.concat(l);}b.searchQuery=s;f=s.filter.searchTerm;g=s.filter.dataSource.id;var m=b.generateFacets(s);var n;if(g==="Scientists"||g==="Folklorists"){n=b.adjustHighlights(h,f);n=b.applyFilters(n,s);e=b.sina._createSearchResultSet({items:n,facets:m,type:"",query:s,title:"",totalCount:n.length});}else if(g==="Mysterious_Sightings"||g==="Urban_Legends"){n=b.adjustHighlights(j,f);n=b.applyFilters(n,s);e=b.sina._createSearchResultSet({items:n,facets:m,type:"",query:s,title:"",totalCount:n.length});}else if(g==="Publications"){n=b.adjustHighlights(l,f);n=b.applyFilters(n,s);e=b.sina._createSearchResultSet({items:n,facets:m,type:"",query:s,title:"",totalCount:n.length});}else if(g==="All"){n=b.adjustHighlights(h,f);n=b.applyFilters(n,s);var o=n.length;n=b.adjustHighlights(j,f);n=b.applyFilters(n,s);var p=n.length;var q="";if(l){n=b.adjustHighlights(l,f);n=b.applyFilters(n,s);q=n.length;}m[0].items[0].measureValue=o;m[0].items[0].measureValueFormatted=''+o;m[0].items[1].measureValue=p;m[0].items[1].measureValueFormatted=''+p;if(l&&m[0].items.length>2){m[0].items[2].measureValue=q;m[0].items[2].measureValueFormatted=''+q;}n=b.adjustHighlights(k,f);n=b.applyFilters(n,s);e=b.sina._createSearchResultSet({items:n,facets:m,type:"",query:s,title:"",totalCount:n.length});}r(e);});},executeSuggestionQuery:function(q){var b=this;var d=q.filter.searchTerm;var e=this.templateProvider(this);var f=e.searchResultSetItemArray.concat(e.searchResultSetItemArray2).concat(e.searchResultSetItemArray3);var g=this.getSuggestionList(f);var h=g.filter(function(s){var k=new RegExp("^"+d,"gi");return s.match(k);});if(h.length===0){h=g;}var j=[];var S=function(k){var l=b.sina.SuggestionCalculationMode.Data;var m=q.filter.clone();m.setSearchTerm(k);return b.sina._createSearchTermSuggestion({searchTerm:k,calculationMode:l,filter:m,label:k});};for(var i=0;i<h.length;i++){j.push(new S(h[i]));}var r=this.sina._createSuggestionResultSet({title:'Suggestions',query:q,items:j});return new c.Promise(function(k,l){k(r);});},executeChartQuery:function(q){var b=this.generateFacets(q);var w=1;if(q.dimension==="LOCATION"||b.length===1){w=0;}return new c.Promise(function(r,d){r(b[w]);});},getChartResultSetItemsForLocations:function(r){var b=[];var d=this;var l;var e=[];var f,i,j,k,g;for(i=0;i<r.length;i++){g=r[i].detailAttributes;for(j=0;j<g.length;j++){if(g[j].id==="LOCATION"){l=g[j].value;if(e.indexOf(l)===-1){e.push(l);f=d.sina._createChartResultSetItem({filterCondition:d.sina.createSimpleCondition({attribute:"LOCATION",operator:d.sina.ComparisonOperator.Equals,value:l}),dimensionValueFormatted:l,measureValue:1,measureValueFormatted:'1',dataSource:d.searchQuery.filter.dataSource});b.push(f);}else{for(k=0;k<b.length;k++){if(b[k].filterCondition.value===l){b[k].measureValue=b[k].measureValue+1;b[k].measureValueFormatted=''+b[k].measureValue;}}}}}}return b;},getChartResultSetItemsForPublications:function(r){var b=[];var d=this;var l;var e=[];var f,i,j,k,g;for(i=0;i<r.length;i++){g=r[i].detailAttributes;for(j=0;j<g.length;j++){if(g[j].id==="PUBLICATION"){l=g[j].value;if(e.indexOf(l)===-1){e.push(l);f=d.sina._createChartResultSetItem({filterCondition:d.sina.createSimpleCondition({attribute:"PUBLICATION",operator:d.sina.ComparisonOperator.Equals,value:l}),dimensionValueFormatted:l,measureValue:1,measureValueFormatted:'1',dataSource:d.searchQuery.filter.dataSource});b.push(f);}else{for(k=0;k<b.length;k++){if(b[k].filterCondition.value===l){b[k].measureValue=b[k].measureValue+1;b[k].measureValueFormatted=''+b[k].measureValue;}}}}}}return b;},getSientistOrFolkloristFacet:function(s,r){var b=this;var d;var e=[];var f,i,j,k,g,h;var l=[];for(i=0;i<r.length;i++){g=r[i].titleAttributes;if(s.filter.dataSource.id==="Mysterious_Sightings"||s.filter.dataSource.id==="Urban_Legends"||s.filter.dataSource.id==="Publications"){g=r[i].detailAttributes;}for(j=0;j<g.length;j++){if(g[j].id==="SCIENTIST"||g[j].id==="FOLKLORIST"){d=g[j].value;h=g[j].id;if(e.indexOf(d)===-1){e.push(d);f=b.sina._createChartResultSetItem({filterCondition:b.sina.createSimpleCondition({attribute:g[j].id,operator:b.sina.ComparisonOperator.Equals,value:d}),dimensionValueFormatted:d,measureValue:1,measureValueFormatted:'1',dataSource:b.searchQuery.filter.dataSource});l.push(f);}else{for(k=0;k<l.length;k++){if(l[k].filterCondition.value===d){l[k].measureValue=l[k].measureValue+1;l[k].measureValueFormatted=''+l[k].measureValue;}}}}}}return[l,h];},getTopFacetOnly:function(s){var b=this;var d=s.filter.sina.allDataSource;var e=[b.sina._createDataSourceResultSetItem({dataSource:s.filter.sina.dataSources[1],dimensionValueFormatted:d.labelPlural,measureValue:4,measureValueFormatted:'4'}),b.sina._createDataSourceResultSetItem({dataSource:s.filter.sina.dataSources[2],dimensionValueFormatted:d.labelPlural,measureValue:5,measureValueFormatted:'5'}),b.sina._createDataSourceResultSetItem({dataSource:s.filter.sina.dataSources[3],dimensionValueFormatted:d.labelPlural,measureValue:1,measureValueFormatted:'1'})];var f=[b.sina._createDataSourceResultSet({title:s.filter.dataSource.label,titleHighlighted:s.filter.dataSource.label,items:e,query:s})];return f;},generateFacets:function(s){var b=this;if(s.filter.dataSource.id==="All"){return b.getTopFacetOnly(s);}var d=[];var e;var g=this.templateProvider(this);var f=b.sina.createFilter({searchTerm:b.searchQuery.filter.searchTerm,dataSource:b.searchQuery.filter.dataSource,rootCondition:b.searchQuery.filter.rootCondition.clone()});var h=[];var r,i,j;if(s.filter.dataSource.id==="Publications"){r=g.searchResultSetItemArray3;}else if(s.filter.dataSource.id==="Scientists"||s.filter.dataSource.id==="Folklorists"){r=g.searchResultSetItemArray;}else if(s.filter.dataSource.id==="Urban_Legends"||s.filter.dataSource.id==="Mysterious_Sightings"){r=g.searchResultSetItemArray2;}if(s.filter.dataSource.id==="Scientists"||s.filter.dataSource.id==="Mysterious_Sightings"){h=b.getChartResultSetItemsForLocations(r);e=b.sina._createChartResultSet({items:h,query:b.sina.createChartQuery({filter:f,dimension:"LOCATION"}),title:"Locations",type:''});d.push(e);}i=b.getSientistOrFolkloristFacet(s,r);h=i[0];j=i[1];e=b.sina._createChartResultSet({items:h,query:b.sina.createChartQuery({filter:f,dimension:j}),title:j.charAt(0).toUpperCase()+j.slice(1).toLowerCase()+"s",type:''});d.push(e);return d;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template.js":function(){sinaDefine(['./template_metadata','./template_details_folklorists','./template_details_legends','./template_details_publications'],function(t,a,b,c){"use strict";this.template_metadata=t;this.template_details_folklorists=a;this.template_details_legends=b;this.template_details_publications=c;return function(C){var g={};g.metadata=[];g.metadata2=[];g.metadata3=[];g.getMetadataById=function(l,k){var r=null;for(var i=0;i<l.length;i++){if(l[i].id===k){r=l[i];break;}}return r;};g.searchResultSetItemArray=[];g.searchResultSetItemArray2=[];g.searchResultSetItemArray3=[];g.chartResultSetArray=[];var d,e;g._init=function(m){var k=m.metadata;var l=m.metadata2;var n=m.metadata3;C.sina._createDataSource({id:"Folklorists",label:"Folklorist",labelPlural:"Folklorists",type:C.sina.DataSourceType.BusinessObject,attributesMetadata:k});C.sina._createDataSource({id:"Urban_Legends",label:"Urban Legend",labelPlural:"Urban Legends",type:C.sina.DataSourceType.BusinessObject,attributesMetadata:l});C.sina._createDataSource({id:"Publications",label:"Publication",labelPlural:"Publications",type:C.sina.DataSourceType.BusinessObject,attributesMetadata:n});};if(C.sina){g.metadata=t(C).metadata;g.metadata2=t(C).metadata2;g.metadata3=t(C).metadata3;}if(C.searchQuery&&C.searchQuery.filter&&C.searchQuery.filter.dataSource&&C.sina&&C.NavigationTarget&&C.sina.getDataSource("Folklorists")){var s=[];var f=C.searchQuery.filter.searchTerm;f=f.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var h=f.split(" ");for(var i=0;i<h.length;i++){var j=h[i];if(j.match(/\w/)!==null){s.push(j);}}d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Andrew McCain',valueFormatted:'Andrew McCain',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).george;C.addSuvLinkToSearchResultItem(e[10],null,s);g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Carol Mandelbaum',valueFormatted:'Carol Mandelbaum',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).shira;g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Ryan Anderson',valueFormatted:'Ryan Anderson',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).benjamin;g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Simon Kingston',valueFormatted:'Simon Kingston',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).richard;g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Cynthia MacDonald',valueFormatted:'Cynthia MacDonald',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).rosalie;g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Douglas Milford',valueFormatted:'Douglas Milford',metadata:g.getMetadataById(g.metadata,"FOLKLORIST")})];e=a(C,g).bill;g.searchResultSetItemArray.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Folklorists"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'Sewer Alligator',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).alligator;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e,defaultNavigationTarget:new C.NavigationTarget({label:'Alligators in the Sewers, Wikipedia',targetUrl:'https://en.wikipedia.org/wiki/Sewer_alligator',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'Slender Man',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).slenderman;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,detailAttributes:e,titleDescriptionAttributes:[],defaultNavigationTarget:new C.NavigationTarget({label:'Slender Man, Wikipedia',targetUrl:'https://en.wikipedia.org/wiki/Slender_Man',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'Chupacabra',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).chupacabra;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,detailAttributes:e,titleDescriptionAttributes:[],defaultNavigationTarget:new C.NavigationTarget({label:'Chupacabra, Wikipedia',targetUrl:'https://en.wikipedia.org/wiki/Chupacabra',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'Vanishing Hitchhiker',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).hitchhiker;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,detailAttributes:e,titleDescriptionAttributes:[],defaultNavigationTarget:new C.NavigationTarget({label:'Vanishing Hitchhiker, Wikipedia',targetUrl:'https://en.wikipedia.org/wiki/Vanishing_hitchhiker',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'Vanishing Hitchhiker',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).hitchhiker2;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,detailAttributes:e,titleDescriptionAttributes:[],defaultNavigationTarget:new C.NavigationTarget({label:'Journal Article "The Vanishing Hitchhiker" by Richard K. Beardsley and Cynthia MacDonald in the California Folklore Quarterly.',targetUrl:'https://www.jstor.org/stable/1495600',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'The Baby Train',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];e=b(C,g).babytrain;g.searchResultSetItemArray2.push(C.sina._createSearchResultSetItem({title:d[0].valueFormatted,titleHighlighted:d[0].valueFormatted,dataSource:C.sina.getDataSource("Urban_Legends"),titleAttributes:d,detailAttributes:e,titleDescriptionAttributes:[],defaultNavigationTarget:new C.NavigationTarget({label:"Baby Train, Wikipedia",targetUrl:'https://en.wikipedia.org/wiki/Baby_Train',target:'_blank'})}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'Sewer Alligator',valueFormatted:'Sewer Alligator',valueHighlighted:'Sewer Alligator',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).alligatorbook;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'Sewer Alligator',titleHighlighted:'Sewer Alligator',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'Slender Man',valueFormatted:'Slender Man',valueHighlighted:'Slender Man',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).slendermanbook;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'Slender Man',titleHighlighted:'Slender Man',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'Chupacabra',valueFormatted:'Chupacabra',valueHighlighted:'Chupacabra',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).chupacabrabook;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'Chupacabra',titleHighlighted:'Chupacabra',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'Vanishing Hitchhiker',valueFormatted:'Vanishing Hitchhiker',valueHighlighted:'Vanishing Hitchhiker',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).hitchhikerbook;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'Vanishing Hitchhiker',titleHighlighted:'Vanishing Hitchhiker',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'Vanishing Hitchhiker',valueFormatted:'Vanishing Hitchhiker',valueHighlighted:'Vanishing Hitchhiker',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).hitchhiker2book;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'Vanishing Hitchhiker',titleHighlighted:'Vanishing Hitchhiker',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));d=[C.sina._createSearchResultSetItemAttribute({id:'CAPTION',value:'The Baby Train',valueFormatted:'The Baby Train',valueHighlighted:'The Baby Train',isHighlighted:false,label:'Caption',metadata:g.getMetadataById(g.metadata3,"PUB")})];e=c(C,g).babytrainbook;C.addSuvLinkToSearchResultItem(e[0],null,s);g.searchResultSetItemArray3.push(C.sina._createSearchResultSetItem({dataSource:C.sina.getDataSource("Publications"),title:'The Baby Train',titleHighlighted:'The Baby Train',titleAttributes:d,titleDescriptionAttributes:[],detailAttributes:e}));}return g;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template2.js":function(){sinaDefine([],function(){"use strict";return function(c){var g={};g.metadata=[];g.metadata2=[];g.getMetadataById=function(l,a){var r=null;for(var i=0;i<l.length;i++){if(l[i].id===a){r=l[i];break;}}return r;};g.searchResultSetItemArray=[];g.searchResultSetItemArray2=[];g.chartResultSetArray=[];var t,d;g._init=function(m){var a=m.metadata;var b=m.metadata2;c.sina._createDataSource({id:"Scientists",label:"Scientist",labelPlural:"Scientists",type:c.sina.DataSourceType.BusinessObject,attributesMetadata:a});c.sina._createDataSource({id:"Mysterious_Sightings",label:"Mysterious Sighting",labelPlural:"Mysterious Sightings",type:c.sina.DataSourceType.BusinessObject,attributesMetadata:b});};if(c.sina){g.metadata=[c.sina._createAttributeMetadata({id:'SCIENTIST',label:'Scientist',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOCATION',label:'Location',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOC_4326',label:'LOC_4326',type:c.sina.AttributeType.GeoJson,usage:{type:'Detail',displayOrder:1},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SEX',label:'Sex',type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,hasDescription:true,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SEX_DESC',label:'Description for Gender',type:c.sina.AttributeType.String,usage:'detail',isSortable:false,isKey:false,isDescription:true,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DISCIPLINE',label:'Discipline',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DESC',label:'Descritption',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PIC',label:'picture',type:c.sina.AttributeType.ImageUrl,usage:'title',presentationUsage:'Thumbnail',format:'round',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SALARY',label:'Salary',type:c.sina.AttributeType.Integer,usage:'detail',isSortable:true,isQuantity:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'CURRENCY',label:'Currency',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isCurrency:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'HEIGHT',label:'Height',type:c.sina.AttributeType.Integer,usage:'detail',isSortable:true,isQuantity:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'UOM_HEIGHT',label:'Unit of Measure for Height Attribute',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isUnitOfMeasure:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PHONE',label:'Phone',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'EMAIL',label:'Email',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact})];g.metadata2=[c.sina._createAttributeMetadata({id:'CAPTION',label:'Caption',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:'title',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOCATION',label:'Location',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOC_4326',label:'LOC_4326',type:c.sina.AttributeType.GeoJson,usage:{type:'Detail',displayOrder:1},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SCIENTIST',label:'Scientist',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DESC',label:'Descritption',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,format:c.sina.AttributeFormatType.LongText,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PIC',label:'picture',type:c.sina.AttributeType.ImageUrl,usage:'title',presentationUsage:'Thumbnail',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'URL',label:'URL',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact})];}if(c.searchQuery&&c.searchQuery.filter&&c.searchQuery.filter.dataSource&&c.sina&&c.NavigationTarget&&c.sina.getDataSource("Scientists")){t=[c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Hannah White',valueFormatted:'Hannah White',metadata:g.getMetadataById(g.metadata,"SCIENTIST")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'2800',valueFormatted:'1000.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'175',valueFormatted:'175',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Galapagos',valueFormatted:'Galapagos',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'PHONE',valueHighlighted:'',isHighlighted:false,label:'Phone',value:'+1 212 6539539',valueFormatted:'+1 212 6539539',metadata:g.getMetadataById(g.metadata,"PHONE")}),c.sina._createSearchResultSetItemAttribute({id:'EMAIL',valueHighlighted:'',isHighlighted:false,label:'Contact',value:'hannah.white@acme.com',valueFormatted:'hannah.white@acme.com',metadata:g.getMetadataById(g.metadata,"EMAIL")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Hannah White (Field Office, Allagash, Maine)',value:'{ "type": "Point", "coordinates": [-69.040601, 47.082589] }',valueFormatted:'{ "type": "Point", "coordinates": [-69.040601, 47.082589] }',defaultNavigationTarget:c.sina._createNavigationTarget({label:'Send Mail',targetUrl:'mailto:hanna.white@acme.com'}),metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Multidisciplinary',valueFormatted:'Multidisciplinary',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Female',valueFormatted:'Female',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scientist_hannah.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scientist_hannah.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];g.searchResultSetItemArray.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Scientists"),titleAttributes:t,titleDescriptionAttributes:[],detailAttributes:d}));t=[c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Barry Williamson',valueFormatted:'Barry Williamson',metadata:g.getMetadataById(g.metadata,"SCIENTIST")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'3000',valueFormatted:'3000.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'188',valueFormatted:'188',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Cyprus',valueFormatted:'Off East Cyprus',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Barry Williamson (Offices)',value:'{ "type": "Point", "coordinates": [-118.236036, 34.050492] }',valueFormatted:'{ "type": "Point", "coordinates": [-118.236036, 34.050492] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Ancient History',valueFormatted:'Ancient History',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scientist_RobertSarmast.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scientist_RobertSarmast.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];g.searchResultSetItemArray.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Scientists"),titleAttributes:t,titleDescriptionAttributes:[],detailAttributes:d}));t=[c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Conrad Atkinson',valueFormatted:'Conrad Atkinson',metadata:g.getMetadataById(g.metadata,"SCIENTIST")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'3200',valueFormatted:'3200.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'165',valueFormatted:'165',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Baalbek',valueFormatted:'Baalbek, Lebanon',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Conrad Atkinson (NYU)',value:'{ "type": "Point", "coordinates": [-73.995589, 40.730355] }',valueFormatted:'{ "type": "Point", "coordinates": [-73.995589, 40.730355] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Archeology',valueFormatted:'Archeology',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/sitchin.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/sitchin.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];g.searchResultSetItemArray.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Scientists"),titleAttributes:t,titleDescriptionAttributes:[],detailAttributes:d}));t=[c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Roger Murdoch',valueFormatted:'Roger Murdoch',metadata:g.getMetadataById(g.metadata,"SCIENTIST")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'2100',valueFormatted:'2100.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'182',valueFormatted:'182',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Baalbek',valueFormatted:'Baalbek, Lebanon',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Roger Murdoch (Eridu Books)',value:'{ "type": "Point", "coordinates": [-1.387958, 50.933494] }',valueFormatted:'{ "type": "Point", "coordinates": [-1.387958, 50.933494] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Egyptology',valueFormatted:'Egyptology',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/alford.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/alford.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];g.searchResultSetItemArray.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Scientists"),titleAttributes:t,titleDescriptionAttributes:[],detailAttributes:d}));t=[c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Alan Cameron',valueFormatted:'Alan Cameron',metadata:g.getMetadataById(g.metadata,"SCIENTIST")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'1500',valueFormatted:'1500.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'195',valueFormatted:'195',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Gbekli Tepe',valueFormatted:'Gbekli Tepe, Turkey',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Alan Cameron (Institut fr Ur- und Frhgeschichte, Erlangen)',value:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',valueFormatted:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Prehistory',valueFormatted:'Prehistory',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/kschmidt.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/kschmidt.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];g.searchResultSetItemArray.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Scientists"),titleAttributes:t,titleDescriptionAttributes:[],detailAttributes:d}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'5123',valueFormatted:'5123.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'169',valueFormatted:'169',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Quote',value:'I heard the sound of a baby crying... I heard the sound of a baby crying... I heard the sound of a baby crying... I heard the sound of a baby crying... ',valueFormatted:'"I heard the sound of a baby crying... I heard the sound of a baby crying... I heard the sound of a baby crying... I heard the sound of a baby crying... "',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Galapagos',valueFormatted:'Galapagos',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Isabela Island, Ecuador',value:'{ "type": "Point", "coordinates": [-91.132139, -0.828628] }',valueFormatted:'{ "type": "Point", "coordinates": [-91.132139, -0.828628] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Hannah White',valueFormatted:'Hannah White',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/galapagos.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/galapagos.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:'Alien species pathways to the Galapagos Islands, Ecuador',targetUrl:'https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5597199/',target:'_blank'})}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'4300',valueFormatted:'4300.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'171',valueFormatted:'171',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Cyprus',valueFormatted:'Off East Cyprus',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Barry Williamson',valueFormatted:'Barry Williamson',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Atlantis, Off East Cyprus',value:'{ "type": "Point", "coordinates": [35.102514, 34.824097] }',valueFormatted:'{ "type": "Point", "coordinates": [35.102514, 34.824097] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Quote',value:'The discovery could mean a tourism bonanza for Cyprus once the word gets out',valueFormatted:'"The discovery could mean a tourism bonanza for Cyprus once the word gets out"',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/atlantis.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/atlantis.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:'Barry Williamson on the Hunt for Atlantis',targetUrl:'https://www.youtube.com/watch?v=6f8jzITECRM',target:'_blank'})}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Baalbek',valueFormatted:'Baalbek, Lebanon',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Conrad Atkinson',valueFormatted:'Conrad Atkinson',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Stone of the Pregnant Woman (Hajar al-Hibla), Baalbek, Lebanon',value:'{ "type": "Point", "coordinates": [36.199993, 33.999453] }',valueFormatted:'{ "type": "Point", "coordinates": [36.199993, 33.999453] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'it would be impossible for ancient humans with their limited technology to accomplish such a thing',valueFormatted:'it would be impossible for ancient humans with their limited technology to accomplish such a thing',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/megalith.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/megalith.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:'In The News: Baalbek',targetUrl:'http://www.sitchin.com/landplace.htm',target:'_blank'})}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Baalbek',valueFormatted:'Baalbek, Lebanon',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Roger Murdoch',valueFormatted:'Roger Murdoch',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Temple Compex, Baalbek, Lebanon',value:'{ "type": "Point", "coordinates": [36.204944, 34.006899] }',valueFormatted:'{ "type": "Point", "coordinates": [36.204944, 34.006899] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Was the temple platorm a huge landing site for the aliens who once visited our planet?',valueFormatted:'Was the temple platorm a huge landing site for the aliens who once visited our planet?',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/heliopolis.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/heliopolis.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:'The Mystery of the Stones at Baalbek',targetUrl:'http://www.eridu.co.uk/Author/Mysteries_of_the_World/Baalbek/baalbek2.html',target:'_blank'})}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Wycliffe Well',valueFormatted:'Wycliffe Well',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Hannah White',valueFormatted:'Hannah White',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Wycliffe Well, NT, Australia',value:'{ "type": "Point", "coordinates": [134.236761, -20.795279] }',valueFormatted:'{ "type": "Point", "coordinates": [134.236761, -20.795279] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Numerous people have reported seeing strange lights in the sky while staying a Wycliffe.',valueFormatted:'Numerous people have reported seeing strange lights in the sky while staying a Wycliffe.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/Wycliffe_Well.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/Wycliffe_Well.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:'Wycliffe Well Australia\'s premier UFO hotspot',targetUrl:'https://www.youtube.com/watch?v=hMDRHqcatyg',target:'_blank'})}));t=[c.sina._createSearchResultSetItemAttribute({id:'CAPTION',valueHighlighted:'',isHighlighted:false,label:'Caption',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata2,"CAPTION")})];d=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Gbekli Tepe',valueFormatted:'Gbekli Tepe',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'SCIENTIST',valueHighlighted:'',isHighlighted:false,label:'Scientist',value:'Alan Cameron',valueFormatted:'Alan Cameron',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Gbekli Tepe, anlurfa',value:'{ "type": "Point", "coordinates": [38.855842, 37.217718] }',valueFormatted:'{ "type": "Point", "coordinates": [38.855842, 37.217718] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'11,000 year old stone structures that predate stonehenge by 6,000 years - crafted and arranged by prehistoric people who had not yet developed metal tools or even pottery; but no evidence that people resided there.',valueFormatted:'11,000 year old stone structures that predate stonehenge by 6,000 years - crafted and arranged by prehistoric people who had not yet developed metal tools or even pottery; but no evidence that people resided there.',metadata:g.getMetadataById(g.metadata2,"SCIENTIST")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/Goebekli_Tepe_Urfa.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/Goebekli_Tepe_Urfa.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];g.searchResultSetItemArray2.push(c.sina._createSearchResultSetItem({title:t[0].valueFormatted,titleHighlighted:t[0].valueFormatted,dataSource:c.sina.getDataSource("Mysterious_Sightings"),titleAttributes:t,detailAttributes:d,titleDescriptionAttributes:[],defaultNavigationTarget:new c.NavigationTarget({label:"Gobekli Tepe: The World's First Temple?",targetUrl:'https://www.smithsonianmag.com/history/gobekli-tepe-the-worlds-first-temple-83613665/',target:'_blank'})}));}return g;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template_details_folklorists.js":function(){sinaDefine([],function(){"use strict";return function(c,g){var r={};r.george=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'2800',valueFormatted:'1000.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'175',valueFormatted:'175',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Schaumburg, Illinois',valueFormatted:'Schaumburg, Illinois',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'WEBSITE',valueHighlighted:'',isHighlighted:false,label:'Website',value:'https://www.abebooks.com/Journal-American-Folklore-Society-Vol-368/22552416159/bd',valueFormatted:'https://www.abebooks.com/Journal-American-Folklore-Society-Vol-368/22552416159/bd',metadata:g.getMetadataById(g.metadata,"WEBSITE")}),c.sina._createSearchResultSetItemAttribute({id:'SUMMARY',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'While most legends are based on rumors, embellished half truths or unsubstantiated claims, the legend of aligators in the sewers can be traced back to historical documentation.',valueFormatted:'While most legends are based on rumors, embellished half truths or unsubstantiated claims, the legend of aligators in the sewers can be traced back to historical documentation.',metadata:g.getMetadataById(g.metadata,"SUMMARY")}),c.sina._createSearchResultSetItemAttribute({id:'PHONE',valueHighlighted:'',isHighlighted:false,label:'Phone',value:'+1 212 6539539',valueFormatted:'+1 212 6539539',metadata:g.getMetadataById(g.metadata,"PHONE")}),c.sina._createSearchResultSetItemAttribute({id:'EMAIL',valueHighlighted:'',isHighlighted:false,label:'Contact',value:'andrew.mccain@acme.com',valueFormatted:'andrew.mccain@acme.com',metadata:g.getMetadataById(g.metadata,"EMAIL")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Andrew McCain (Field Office, Schaumburg, Illinois',value:'{ "type": "Point", "coordinates": [-69.040601, 47.082589] }',valueFormatted:'{ "type": "Point", "coordinates": [-69.040601, 47.082589] }',defaultNavigationTarget:c.sina._createNavigationTarget({label:'Send Mail',targetUrl:'mailto:andrew.mccain@acme.com'}),metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Alligator Legends',valueFormatted:'Alligator Legends',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata,"PUB")})];r.shira=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'3000',valueFormatted:'3000.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'188',valueFormatted:'188',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'University of Georgia',valueFormatted:'University of Georgia',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Carol Mandelbaum (Offices)',value:'{ "type": "Point", "coordinates": [-118.236036, 34.050492] }',valueFormatted:'{ "type": "Point", "coordinates": [-118.236036, 34.050492] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Entertainment and Media Studies',valueFormatted:'Entertainment and Media Studies',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Female',valueFormatted:'Female',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_chess.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_chess.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];r.benjamin=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'3200',valueFormatted:'3200.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'165',valueFormatted:'165',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Center for Inquiry (CFI), Amherst, New York',valueFormatted:'Center for Inquiry (CFI), Amherst, New York',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Center for Inquiry (CFI), Amherst, New York',value:'{ "type": "Point", "coordinates": [-73.995589, 40.730355] }',valueFormatted:'{ "type": "Point", "coordinates": [-73.995589, 40.730355] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Paranormal Investigations',valueFormatted:'Paranormal Investigations',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_radford.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_radford.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];r.richard=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'2100',valueFormatted:'2100.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'182',valueFormatted:'182',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Site Location',value:'Cripple Creek, Colorado',valueFormatted:'Cripple Creek, Colorado',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'University of California, Berkeley',value:'{ "type": "Point", "coordinates": [-1.387958, 50.933494] }',valueFormatted:'{ "type": "Point", "coordinates": [-1.387958, 50.933494] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Anthropologist',valueFormatted:'Anthropologist',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_beardfy.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_beardsley.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];r.rosalie=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'1500',valueFormatted:'1500.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'195',valueFormatted:'195',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Birthplace',value:'Des Plaines, Illinois',valueFormatted:'Des Plaines, Illinois',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'Tulelake, California',value:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',valueFormatted:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Applied Anthropology',valueFormatted:'Applied Anthropology',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Female',valueFormatted:'Female',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_handkey.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/folklorist_handkey.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];r.bill=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'1500',valueFormatted:'1500.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'195',valueFormatted:'195',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Birthplace',value:'Bundaberg, Australia',valueFormatted:'Bundaberg, Australia',metadata:g.getMetadataById(g.metadata,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'fieldoffice',valueHighlighted:'',isHighlighted:false,label:'A small town north of Sydney',value:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',valueFormatted:'{ "type": "Point", "coordinates": [11.016959, 49.600319] }',metadata:g.getMetadataById(g.metadata,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DISCIPLINE',valueHighlighted:'',isHighlighted:false,label:'Discipline',value:'Author and folklorist',valueFormatted:'Author and folklorist',metadata:g.getMetadataById(g.metadata,"DISCIPLINE")}),c.sina._createSearchResultSetItemAttribute({id:'SEX',valueHighlighted:'',isHighlighted:false,label:'Sex',value:'',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"SEX"),description:c.sina._createSearchResultSetItemAttribute({id:'SEX_DESC',valueHighlighted:'',isHighlighted:false,label:'Description for Gender',value:'Male',valueFormatted:'Male',metadata:g.getMetadataById(g.metadata,"SEX_DESC")})}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scott.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/scott.jpg',metadata:g.getMetadataById(g.metadata,"PIC")})];return r;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template_details_legends.js":function(){sinaDefine([],function(){"use strict";return function(c,g){var r={};r.alligator=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'5123',valueFormatted:'5123.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'169',valueFormatted:'169',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Quote',value:'In "The World Beneath The City" (1959), Robert Daley describes the history of the problems encountered while developing the network of utilities beneath Manhattan island, and reports that sewer inspectors first saw aligators in 1935, and that their average length was about 2 feet.',valueFormatted:'In "The World Beneath The City" (1959), Robert Daley describes the history of the problems encountered while developing the network of utilities beneath Manhattan island, and reports that sewer inspectors first saw aligators in 1935, and that their average length was about 2 feet.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'NYC',valueFormatted:'NYC',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'New York City',value:'{ "type": "Point", "coordinates": [-91.132139, -0.828628] }',valueFormatted:'{ "type": "Point", "coordinates": [-91.132139, -0.828628] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Andrew McCain',valueFormatted:'Andrew McCain',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/alligator.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/alligator.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];r.slenderman=[c.sina._createSearchResultSetItemAttribute({id:'SALARY',valueHighlighted:'',isHighlighted:false,label:'Salary',value:'4300',valueFormatted:'4300.00',metadata:g.getMetadataById(g.metadata,"SALARY"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'CURRENCY',valueHighlighted:'',isHighlighted:false,label:'Currency',value:'Euro',valueFormatted:'',metadata:g.getMetadataById(g.metadata,"CURRENCY")})}),c.sina._createSearchResultSetItemAttribute({id:'HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Height',value:'171',valueFormatted:'171',metadata:g.getMetadataById(g.metadata,"HEIGHT"),unitOfMeasure:c.sina._createSearchResultSetItemAttribute({id:'UOM_HEIGHT',valueHighlighted:'',isHighlighted:false,label:'Unit of Measure for Height',value:'cm',valueFormatted:'cm',metadata:g.getMetadataById(g.metadata,"UOM_HEIGHT")})}),c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'University of Georgia',valueFormatted:'University of Georgia',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Carol Mandelbaum',valueFormatted:'Carol Mandelbaum',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'University of Georgia',value:'{ "type": "Point", "coordinates": [35.102514, 34.824097] }',valueFormatted:'{ "type": "Point", "coordinates": [35.102514, 34.824097] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Slender Man is a fictional character that originated as an Internet meme created by Something Awful forums user Victor Surge in 2009, depicted as a thin, unnaturally tall man with a blank and usually featureless face and wearing a black suit, commonly said to stalk, abduct, or traumatize people, particularly children.',valueFormatted:'Slender Man is a fictional character that originated as an Internet meme created by Something Awful forums user Victor Surge in 2009, depicted as a thin, unnaturally tall man with a blank and usually featureless face and wearing a black suit, commonly said to stalk, abduct, or traumatize people, particularly children.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/slender_man.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/slender_man.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];r.chupacabra=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Puerto Rico',valueFormatted:'Puerto Rico',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Ryan Anderson',valueFormatted:'Ryan Anderson',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Chupacabra, sighting, Puerto Rico',value:'{ "type": "Point", "coordinates": [36.199993, 33.999453] }',valueFormatted:'{ "type": "Point", "coordinates": [36.199993, 33.999453] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'The first sightings of the Chupacabra were reported in Puerto Rico. The name originates from the their reported habit of attacking and drinking the blood of livestock, including goats.',valueFormatted:'The first sightings of the Chupacabra were reported in Puerto Rico. The name originates from the their reported habit of attacking and drinking the blood of livestock, including goats.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/chupacabra.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/chupacabra.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];r.hitchhiker=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'University of California, Berkeley',valueFormatted:'University of California, Berkeley',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Cynthia MacDonald',valueFormatted:'Cynthia MacDonald',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'University of California, Berkeley',value:'{ "type": "Point", "coordinates": [36.204944, 34.006899] }',valueFormatted:'{ "type": "Point", "coordinates": [36.204944, 34.006899] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'People traveling by vehicle encounter a hitchhiker who later vanishes without explanation, sometimes from the moving vehicle. The vanishing hitchhiker can also leave information that encourages the motorist to later try to make contact with them.',valueFormatted:'People traveling by vehicle encounter a hitchhiker who later vanishes without explanation, sometimes from the moving vehicle. The vanishing hitchhiker can also leave information that encourages the motorist to later try to make contact with them.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/hitchhiker.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/hitchhiker.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];r.hitchhiker2=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'Cripple Creek, Colorado',valueFormatted:'Cripple Creek, Colorado',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Simon Kingston',valueFormatted:'Simon Kingston',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'Wycliffe Well, NT, Australia',value:'{ "type": "Point", "coordinates": [134.236761, -20.795279] }',valueFormatted:'{ "type": "Point", "coordinates": [134.236761, -20.795279] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'The general public became widely aware of the legend after the publication of the book "The Vanishing Hitchhiker" (1981) in which the author, Harold Brunvan, suggests that the legend can be traced as far back as the 1870s and has parallels in Korea, Russia, China, and among Mormons and people living in Arkansas mountains.',valueFormatted:'The general public became widely aware of the legend after the publication of the book "The Vanishing Hitchhiker" (1981) in which the author, Harold Brunvan, suggests that the legend can be traced as far back as the 1870s and has parallels in Korea, Russia, China, and among Mormons and people living in Arkansas mountains.',metadata:g.getMetadataById(g.metadata2,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/vanishing.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/vanishing.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];r.babytrain=[c.sina._createSearchResultSetItemAttribute({id:'LOCATION',valueHighlighted:'',isHighlighted:false,label:'Location',value:'A Small Town',valueFormatted:'A Small Town',metadata:g.getMetadataById(g.metadata2,"LOCATION")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Douglas Milford',valueFormatted:'Douglas Milford',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'sightinglocation',valueHighlighted:'',isHighlighted:false,label:'a little town on the coast, not too far north of Sydney',value:'{ "type": "Point", "coordinates": [38.855842, 37.217718] }',valueFormatted:'{ "type": "Point", "coordinates": [38.855842, 37.217718] }',metadata:g.getMetadataById(g.metadata2,"LOC_4326")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Legend has it there was a small town which had an unusually high birth rate because a train would pass through the center of town at 5 am and blow its whistle, waking up all the townsfolk. Since it was too late to go back to sleep and too early to get up, residents passed the time by cuddling up. This resulted in a mini baby-boom.',valueFormatted:'Legend has it there was a small town which had an unusually high birth rate because a train would pass through the center of town at 5 am and blow its whistle, waking up all the townsfolk. Since it was too late to go back to sleep and too early to get up, residents passed the time by cuddling up. This resulted in a mini baby-boom.',metadata:g.getMetadataById(g.metadata2,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'PIC',valueHighlighted:'',isHighlighted:false,label:'Picture',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/babytrain.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/babytrain.jpg',metadata:g.getMetadataById(g.metadata2,"PIC")})];return r;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template_details_publications.js":function(){sinaDefine([],function(){"use strict";return function(c,g){var r={};r.alligatorbook=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Quote',value:'Robert Daley\'s "The World Beneath The City" (1959), a history of the problems said aware to be involved in developing the network of utilities beneath Manhattan island, aware of reports that sewer inspectors first saw aligators in 1935, and confirms that their average length was about 2 feet. ',valueFormatted:'Robert Daley\'s "The World Beneath The City" (1959), a history of the problems said aware to be involved in developing the network of utilities beneath Manhattan island, aware of reports that sewer inspectors first saw aligators in 1935, and confirms that their average length was about 2 feet. ',metadata:g.getMetadataById(g.metadata3,"DESC")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Andrew McCain',valueFormatted:'Andrew McCain',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")})];r.slendermanbook=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Carol Mandelbaum',valueFormatted:'Carol Mandelbaum',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Slender Man is a fictional character that originated as an Internet meme created by Something Awful forums user Victor Surge in 2009, depicted as a thin, unnaturally tall man with a blank and usually featureless face and wearing a black suit, commonly said to stalk, abduct, or traumatize people, particularly children.',valueFormatted:'Slender Man is a fictional character that originated as an Internet meme created by Something Awful forums user Victor Surge in 2009, depicted as a thin, unnaturally tall man with a blank and usually featureless face and wearing a black suit, commonly said to stalk, abduct, or traumatize people, particularly children.',metadata:g.getMetadataById(g.metadata3,"DESC")})];r.chupacabrabook=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Ryan Anderson',valueFormatted:'Ryan Anderson',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:' The first purported sightings were reported in Puerto Rico. The name comes from the animal\'s reported habit of attacking and drinking the blood of livestock, including goats.',valueFormatted:' The first purported sightings were reported in Puerto Rico. The name comes from the animal\'s reported habit of attacking and drinking the blood of livestock, including goats.',metadata:g.getMetadataById(g.metadata3,"DESC")})];r.hitchhikerbook=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Cynthia MacDonald',valueFormatted:'Cynthia MacDonald',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'People traveling by vehicle meet with or are accompanied by a hitchhiker who subsequently vanishes without explanation, often from a moving vehicle. The vanishing hitchhiker can also leave some form of information that encourages the motorist to make subsequent contact.',valueFormatted:'People traveling by vehicle meet with or are accompanied by a hitchhiker who subsequently vanishes without explanation, often from a moving vehicle. The vanishing hitchhiker can also leave some form of information that encourages the motorist to make subsequent contact.',metadata:g.getMetadataById(g.metadata3,"DESC")})];r.hitchhiker2book=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Simon Kingston',valueFormatted:'Simon Kingston',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'The general public became widely aware of the legend after the publication of the book "The Vanishing Hitchhiker" (1981) in which the author, Harold Brunvan, suggests that the legend can be traced as far back as the 1870s and has parallels in Korea, Russia, China, and among Mormons and people living in Arkansas mountains.',valueFormatted:'The general public became widely aware of the legend after the publication of the book "The Vanishing Hitchhiker" (1981) in which the author, Harold Brunvan, suggests that the legend can be traced as far back as the 1870s and has parallels in Korea, Russia, China, and among Mormons and people living in Arkansas mountains.',metadata:g.getMetadataById(g.metadata3,"DESC")})];r.babytrainbook=[c.sina._createSearchResultSetItemAttribute({id:'PUBLICATION',valueHighlighted:'',isHighlighted:false,label:'Publication',value:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',valueFormatted:'/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/images/suv_thumbnail.jpg',metadata:g.getMetadataById(g.metadata3,"PUB")}),c.sina._createSearchResultSetItemAttribute({id:'FOLKLORIST',valueHighlighted:'',isHighlighted:false,label:'Folklorist',value:'Douglas Milford',valueFormatted:'Douglas Milford',metadata:g.getMetadataById(g.metadata3,"FOLKLORIST")}),c.sina._createSearchResultSetItemAttribute({id:'DESC',valueHighlighted:'',isHighlighted:false,label:'Summary',value:'Legend has it there was a small town which had an unusually high birth rate because a train would pass through the center of town at 5 am and blow its whistle, waking up all the townsfolk. Since it was too late to go back to sleep and too early to get up, residents passed the time by cuddling up. This resulted in a mini baby-boom.',valueFormatted:'Legend has it there was a small town which had an unusually high birth rate because a train would pass through the center of town at 5 am and blow its whistle, waking up all the townsfolk. Since it was too late to go back to sleep and too early to get up, residents passed the time by cuddling up. This resulted in a mini baby-boom.',metadata:g.getMetadataById(g.metadata3,"DESC")})];return r;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/sample/template_metadata.js":function(){sinaDefine([],function(){"use strict";return function(c){var r={};r.metadata=[c.sina._createAttributeMetadata({id:'FOLKLORIST',label:'Folklorist',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOCATION',label:'Location',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'WEBSITE',label:'Website',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0}},isURL:true,isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SUMMARY',label:'Summary',type:c.sina.AttributeType.String,format:c.sina.AttributeFormatType.LongText,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0}},isURL:true,isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOC_4326',label:'LOC_4326',type:c.sina.AttributeType.GeoJson,usage:{type:'Detail',displayOrder:1},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SEX',label:'Sex',type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,hasDescription:true,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SEX_DESC',label:'Description for Gender',type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:false,isKey:false,isDescription:true,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DISCIPLINE',label:'Discipline',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DESC',label:'Descritption',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PIC',label:'picture',type:c.sina.AttributeType.ImageUrl,usage:'title',presentationUsage:'Thumbnail',format:'round',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'SALARY',label:'Salary',type:c.sina.AttributeType.Integer,usage:'detail',isSortable:true,isQuantity:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'CURRENCY',label:'Currency',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isCurrency:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'HEIGHT',label:'Height',type:c.sina.AttributeType.Integer,usage:'detail',isSortable:true,isQuantity:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'UOM_HEIGHT',label:'Unit of Measure for Height Attribute',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isUnitOfMeasure:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PHONE',label:'Phone',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PUB',label:'Publication',type:c.sina.AttributeType.ImageUrl,format:c.sina.AttributeFormatType.DocumentThumbnail,usage:{Title:'Title',AdvancedSearch:{displayOrder:0}},presentationUsage:'Thumbnail',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'EMAIL',label:'Email',type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact})];r.metadata2=[c.sina._createAttributeMetadata({id:'CAPTION',label:'Caption',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:'title',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOCATION',label:'Location',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'LOC_4326',label:'LOC_4326',type:c.sina.AttributeType.GeoJson,usage:{type:'Detail',displayOrder:1},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'FOLKLORIST',label:'Folklorist',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Title:'Title',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DESC',label:'Descritption',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,format:c.sina.AttributeFormatType.LongText,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'PIC',label:'picture',type:c.sina.AttributeType.ImageUrl,usage:'title',presentationUsage:'Thumbnail',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'URL',label:'URL',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact})];r.metadata3=[c.sina._createAttributeMetadata({id:'PUB',label:'Publication',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.ImageUrl,format:c.sina.AttributeFormatType.DocumentThumbnail,usage:{Title:'Title',AdvancedSearch:{displayOrder:0}},presentationUsage:'Thumbnail',isSortable:false,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'FOLKLORIST',label:'Folklorist',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,usage:{Detail:'Detail',AdvancedSearch:{displayOrder:0},Facet:{}},isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact}),c.sina._createAttributeMetadata({id:'DESC',label:'Description',dataType:c.sina.AttributeType.String,type:c.sina.AttributeType.String,format:c.sina.AttributeFormatType.LongText,usage:'detail',isSortable:true,isKey:false,matchingStrategy:c.sina.MatchingStrategy.Exact})];return r;};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/ItemPostParser.js":function(){sinaDefine(['../../sina/SinaObject'],function(S){"use strict";return S.derive({_init:function(p){this._searchResultSetItem=p.searchResultSetItem;this._dataSource=p.searchResultSetItem.dataSource;this._allAttributesMap=p.allAttributesMap||p.searchResultSetItem._private.allAttributesMap;this._intentsResolver=this.sina._createFioriIntentsResolver();},postParseResultSetItem:function(){var p=this.enhanceResultSetItemWithNavigationTargets();this.enhanceResultSetItemWithGroups();return p;},enhanceResultSetItemWithNavigationTargets:function(){var t=this;var s=t._dataSource._private.semanticObjectType;var a=t._searchResultSetItem._private.semanticObjectTypeAttributes;var b=t._dataSource._private.system;var c=t._dataSource._private.client;return t._intentsResolver.resolveIntents({semanticObjectType:s,semanticObjectTypeAttributes:a,systemId:b,client:c,fallbackDefaultNavigationTarget:t._searchResultSetItem.defaultNavigationTarget}).then(function(d){var e=d&&d.defaultNavigationTarget;var n=d&&d.navigationTargets;if(e){t._searchResultSetItem.defaultNavigationTarget=e;e.parent=t._searchResultSetItem;}if(n){t._searchResultSetItem.navigationTargets=n;for(var i=0;i<n.length;i++){n[i].parent=t._searchResultSetItem;}}return t._searchResultSetItem;});},enhanceResultSetItemWithGroups:function(){var a=this._searchResultSetItem.dataSource.attributesMetadata;for(var i=0;i<a.length;i++){var b=a[i];if(b.type===this.sina.AttributeType.Group){var g=this._addAttributeGroup(b);if(b.usage.Detail){this._searchResultSetItem.detailAttributes.push(g);}if(b.usage.Title){this._searchResultSetItem.titleAttributes.push(g);}if(b.usage.TitleDescription){this._searchResultSetItem.titleDescriptionAttributes.push(g);}}}this.sortAttributes();},sortAttributes:function(){var c=function(a){return function(b,d){var e=b.metadata.usage&&b.metadata.usage[a]?b.metadata.usage[a].displayOrder:undefined;var f=d.metadata.usage&&d.metadata.usage[a]?d.metadata.usage[a].displayOrder:undefined;if(e===undefined||f===undefined){if(f!==undefined){return 1;}return-1;}return e-f;};};this._searchResultSetItem.titleAttributes.sort(c("Title"));this._searchResultSetItem.titleDescriptionAttributes.sort(c("TitleDescription"));this._searchResultSetItem.detailAttributes.sort(c("Detail"));},_addAttributeGroup:function(a){var g=this.sina._createSearchResultSetItemAttributeGroup({id:a.id,metadata:a,label:a.label,template:a.template,attributes:[],groups:[]});var p,c;if(a._private){p=a._private.parentAttribute;c=a._private.childAttribute;}for(var k=0;k<a.attributes.length;k++){var b=a.attributes[k];var d=b.attribute;var e;if(d.type===this.sina.AttributeType.Group){e=this._addAttributeGroup(d,this._allAttributesMap);}else{e=this._allAttributesMap[d.id];}if(e){var f=this.sina._createSearchResultSetItemAttributeGroupMembership({group:g,attribute:e,metadata:b});g.attributes.push(f);e.groups.push(f);}if(d==p){g._private.parentAttribute=e;}else if(d==c){g._private.childAttribute=e;}}return g;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/cds/CDSAnnotationsParser.js":function(){sinaDefine(['../../../sina/SinaObject'],function(S){"use strict";return S.derive({_init:function(p){this._datasource=p.dataSource;this._cdsAnnotations=p.cdsAnnotations;this._parsedAttributes={};this._knownAttributeGroups={};this._knownAttributeGroupsArray=[];this._attributeGroupReplacements={};this._AttributeUsagePrio={HIGH:"HIGH",MEDIUM:"MEDIUM",NONE:"NONE"};this._detailUsageStubsMap={};this._detailUsageStubsPrioHigh=[];this._detailUsageStubsPrioMedium=[];this._detailUsageStubsPrioNone=[];this._defaultTextArrangement=this.sina.AttributeGroupTextArrangement.TextLast;},parseCDSAnnotationsForDataSource:function(){this._parsingResult={dataSourceIsCdsBased:false,detailAttributesAreSorted:false,titleAttributesAreSorted:false};this._parseDefaultTextArrangement();this._parseAttributeAnnotations();this._parseDataSourceAnnotations();return this._parsingResult;},_addDetailUsageStub:function(a,d,p){var b;if(typeof a==="string"){b=a;a=undefined;}else{b=a.id;}var u={attribute:a,displayOrder:d,prio:p,obsolete:false};this._detailUsageStubsMap[b]=u;if(p===this._AttributeUsagePrio.HIGH){this._detailUsageStubsPrioHigh.push(u);}else if(p===this._AttributeUsagePrio.MEDIUM){this._detailUsageStubsPrioMedium.push(u);}else{this._detailUsageStubsPrioNone.push(u);}},_getDetailUsageStub:function(a){if(!a){return undefined;}var b;if(typeof a==="string"){b=a;}else{b=a.id;}return this._detailUsageStubsMap[b];},_setParsedAttribute:function(a,b){this._parsedAttributes[a.toUpperCase()]=b;},_getParsedAttribute:function(a){return this._parsedAttributes[a.toUpperCase()];},_setknownAttributeGroup:function(q,a){this._knownAttributeGroups[q.toUpperCase()]=a;},_getknownAttributeGroup:function(q){return this._knownAttributeGroups[q.toUpperCase()];},_parseDefaultTextArrangement:function(){try{var d=this._deriveTextArrangementFromCdsAnnotation(this._cdsAnnotations.dataSourceAnnotations.UI&&this._cdsAnnotations.dataSourceAnnotations.UI.TEXTARRANGEMENT);this._defaultTextArrangement=d||this._defaultTextArrangement;}catch(e){}},_parseDataSourceAnnotations:function(){if(Object.keys(this._cdsAnnotations.dataSourceAnnotations).length>0){try{var u=this._cdsAnnotations.dataSourceAnnotations.UI;var h=u&&u.HEADERINFO;var t=h&&h.TITLE;var a,g,b;if(t){a=t.TYPE&&t.TYPE.toUpperCase();if(a==="AS_CONNECTED_FIELDS"){g=t.VALUEQUALIFIER;if(g&&g.trim().length>0){b=this._getknownAttributeGroup(g);if(b){b.usage.Title={displayOrder:1};}}}else if(!a){var c=t.VALUE;if(c){var d=this._getParsedAttribute(c);if(d){d.usage.Title={displayOrder:1};}}}var f=t.URL;if(f){var i=this._getParsedAttribute(f);if(i){i.usage.Navigation={mainNavigation:true};}}}var j=h&&h.DESCRIPTION;if(j){a=j.TYPE;if(a==="AS_CONNECTED_FIELDS"){g=j.VALUEQUALIFIER;if(g&&g.trim().length>0){b=this._getknownAttributeGroup(g);if(b){b.usage.TitleDescription={displayOrder:1};}}}else if(!a){var k=j.VALUE;if(k){var l=this._getParsedAttribute(k);if(l){l.usage.TitleDescription={};}}}}}catch(e){}}},_parseAttributeAnnotations:function(){for(var a in this._datasource.attributeMetadataMap){this._parseSingleAttribute(a);}this._datasource.attributesMetadata=this._datasource.attributesMetadata.concat(this._knownAttributeGroupsArray);this._datasource.attributeMetadataMap=Object.assign(this._datasource.attributeMetadataMap,this._knownAttributeGroups);this._sortAttributes();},_parseSingleAttribute:function(a){var p=this._getParsedAttribute(a);if(!p){p=this._getPropertyFromObject(this._datasource.attributeMetadataMap,a);this._setParsedAttribute(p.id,p);var b=this._cdsAnnotations.attributeAnnotations[p.id]||{};if(Object.keys(b).length>0){this._parsingResult.dataSourceIsCdsBased=true;try{if(b.UI!==undefined){this._parseSingleAnnotationOrArray(p,b.UI.IDENTIFICATION,this._parseIdentification);this._parseSingleAnnotationOrArray(p,b.UI.CONNECTEDFIELDS,this._parseConnectedFields);this._parseURLsForDocumentResultItemThumbnail(p,b.UI.IDENTIFICATION,b.SEMANTICS);if(b.UI.MULTILINETEXT!==undefined){p.format=this.sina.AttributeFormatType.MultilineText;}}this._parseSemantics(p,b.SEMANTICS);this._parseDescriptionAttribute(p,b.OBJECTMODEL,b.UI);}catch(e){}}}return p;},_parseConnectedFields:function(a,c){var q=c.QUALIFIER;if(q){var b={};if(c.NAME){b[c.NAME]=a;}this._createAttributeGroup(q,c.GROUPLABEL,c.TEMPLATE,b);}},_createAttributeGroup:function(q,l,t,a){var b=this._getknownAttributeGroup(q);if(!b){b=this.sina._createAttributeGroupMetadata({id:q,label:l||"",template:t||"",attributes:[],usage:{}});this._setknownAttributeGroup(q,b);this._knownAttributeGroupsArray.push(b);this._datasource.attributeGroupsMetadata.push(b);this._datasource.attributeGroupMetadataMap[q]=b;var u=this._getDetailUsageStub(q);if(u){u.attribute=b;}}else{if(l&&!b.label){b.label=l;}if(t&&!b.template){b.template=t;}}if(a){for(var n in a){var c=a[n];var d=this.sina._createAttributeGroupMembership({group:b,attribute:c,nameInGroup:n});b.attributes.push(d);c.groups.push(d);}}return b;},_parseIdentification:function(a,i){this._parseAttributePositions(a,i);},_parseAttributePositions:function(a,i){var b=i.IMPORTANCE&&i.IMPORTANCE.toUpperCase();var p=i.POSITION;if(b&&!p){p=Number.MAX_VALUE;}if(p!==undefined){switch(b){case"HIGH":case"MEDIUM":case undefined:p=this._parsePosition(p);var t=i.TYPE&&i.TYPE.toUpperCase();switch(t){case"AS_CONNECTED_FIELDS":var q=i.VALUEQUALIFIER;if(q){var c=this._getknownAttributeGroup(q);if(c){a=c;}else{a=q;}}case undefined:var u=this._getDetailUsageStub(a);if(u){if(!u.attribute&&typeof a!=="string"){u.attribute=a;}}else{var d;if(b==="HIGH"){d=this._AttributeUsagePrio.HIGH;}else if(b==="MEDIUM"){d=this._AttributeUsagePrio.MEDIUM;}else{d=this._AttributeUsagePrio.NONE;}this._addDetailUsageStub(a,p,d);}}}}},_parseURLsForDocumentResultItemThumbnail:function(a,b,s){if(!(s&&s.IMAGEURL)){return;}var u;if(b){if(Array.isArray(b)){for(var i=0;i<b.length;i++){if(b[i].URL){u=b[i].URL;break;}}}else{u=b.URL;}}if(u&&s&&s.IMAGEURL){var c=this._getPropertyFromObject(this._cdsAnnotations.attributeAnnotations,u);if(c){var m=c.SEMANTICS&&c.SEMANTICS.URL&&c.SEMANTICS.URL.MIMETYPE;if(m){var d=this._getPropertyFromObject(this._datasource.attributeMetadataMap,u);var e=this._getPropertyFromObject(this._datasource.attributeMetadataMap,m);a.suvUrlAttribute=d;a.suvMimeTypeAttribute=e;a.format=this.sina.AttributeFormatType.DocumentThumbnail;}}}},_parseSemantics:function(a,s){if(s){if(s.CONTACT&&s.CONTACT.PHOTO!==undefined){a.format=this.sina.AttributeFormatType.Round;if(a.type!==this.sina.AttributeType.ImageBlob){a.type=this.sina.AttributeType.ImageUrl;}}if(s.IMAGEURL!==undefined){if(a.type!==this.sina.AttributeType.ImageBlob){a.type=this.sina.AttributeType.ImageUrl;}}if(s.NAME!==undefined){if(s.NAME.GIVENNAME!==undefined){a.semantics=this.sina.AttributeSemanticsType.FirstName;}if(s.NAME.FAMILYNAME!==undefined){a.semantics=this.sina.AttributeSemanticsType.LastName;}}if(s.EMAIL&&s.EMAIL.ADDRESS!==undefined){a.semantics=this.sina.AttributeSemanticsType.EmailAddress;}if(s.TELEPHONE&&s.TELEPHONE.TYPE!==undefined){a.semantics=this.sina.AttributeSemanticsType.PhoneNr;}if(s&&s.URL!==undefined){a.semantics=this.sina.AttributeSemanticsType.HTTPURL;}if(s&&s.CURRENCYCODE!==undefined){a._private.isCurrency=true;}if(s&&s.UNITOFMEASURE!==undefined){a._private.isUnitOfMeasure=true;}var u,t;var b=s.QUANTITY&&s.QUANTITY.UNITOFMEASURE;if(b){a._private.isQuantity=true;u=this._parseSingleAttribute(b);if(u){if(u._private.isUnitOfMeasure){t="{"+a.id+"} {"+u.id+"}";this._createAttributeGroupForParentChildAttributes(a,u,"____UnitOfMeasureGroup",t);}}}var c=s.AMOUNT&&s.AMOUNT.CURRENCYCODE;if(c){u=this._parseSingleAttribute(c);if(u){if(u._private.isCurrency){t="{"+a.id+"} {"+u.id+"}";this._createAttributeGroupForParentChildAttributes(a,u,"____CurrencyGroup",t);}}}}},_parseDescriptionAttribute:function(a,o,u){var d=o&&o.TEXT&&o.TEXT.ELEMENT;if(d){if(Array.isArray(d)){if(d.length>0){d=d[0];}else{return;}}var b=this._parseSingleAttribute(d);if(b){var t=this._deriveTextArrangementFromCdsAnnotation(u&&u.TEXTARRANGEMENT)||this._defaultTextArrangement;var c=!(a.semantics==this.sina.AttributeSemanticsType.FirstName&&b.semantics==this.sina.AttributeSemanticsType.LastName||b.semantics==this.sina.AttributeSemanticsType.FirstName&&a.semantics==this.sina.AttributeSemanticsType.LastName);var p=c?"(":"";var e=c?")":"";var f;if(t===this.sina.AttributeGroupTextArrangement.TextFirst){f="{"+b.id+"} "+p+"{"+a.id+"}"+e;}else if(t===this.sina.AttributeGroupTextArrangement.TextLast){f="{"+a.id+"} "+p+"{"+b.id+"}"+e;}else if(t===this.sina.AttributeGroupTextArrangement.TextOnly){f="{"+b.id+"}";}else{f="{"+a.id+"} "+p+"{"+b.id+"}"+e;}var g=this._createAttributeGroupForParentChildAttributes(a,b,"____Description",f);g._private.isDescription=true;g._private.textArrangement=t;if(a._private.isUnitOfMeasure||b._private.isUnitOfMeasure){g._private.isUnitOfMeasure=true;}if(a._private.isCurrency||b._private.isCurrency){g._private.isCurrency=true;}}}},_deriveTextArrangementFromCdsAnnotation:function(c){if(c){switch(c.toUpperCase()){case"TEXT_FIRST":return this.sina.AttributeGroupTextArrangement.TextFirst;case"TEXT_LAST":return this.sina.AttributeGroupTextArrangement.TextLast;case"TEXT_ONLY":return this.sina.AttributeGroupTextArrangement.TextOnly;case"TEXT_SEPARATE":return this.sina.AttributeGroupTextArrangement.TextSeparate;}}return undefined;},_createAttributeGroupForParentChildAttributes:function(p,c,q,t){var a=p.id+q;var b={};b[p.id]=p;b[c.id]=c;var d=this._createAttributeGroup(a,p.label,t,b);var o=this._getDetailUsageStub(p);if(o){o.obsolete=true;this._addDetailUsageStub(d,o.displayOrder,o.prio);}this._replaceAttributeWithGroup(p,d);d._private.parentAttribute=p;d._private.childAttribute=c;if(c._private&&c._private.isCurrency){d._private.isCurrency=true;}if(c._private&&c._private.isUnitOfMeasure){d._private.isUnitOfMeasure=true;}return d;},_replaceAttributeWithGroup:function(a,b){this._setParsedAttribute(a.id,b);for(var i=0;i<a.groups.length;i++){var g=a.groups[i];if(g.group!=b){g.attribute=b;}}},_sortAttributes:function(){var s=function(b,c){if(b.displayOrder<c.displayOrder){return-1;}else if(b.displayOrder>c.displayOrder){return 1;}return 0;};var i,a;if(this._detailUsageStubsPrioHigh.length>0||this._detailUsageStubsPrioMedium.length>0){this._detailUsageStubsPrioHigh.sort(s);this._detailUsageStubsPrioMedium.sort(s);var _=this._detailUsageStubsPrioHigh.concat(this._detailUsageStubsPrioMedium);for(i=0;i<_.length;i++){if(!_[i].obsolete){a=_;break;}}}if(!a){a=this._detailUsageStubsPrioNone.sort(s);}for(i=0;i<a.length;i++){var e=a[i];if(!e.obsolete&&e.attribute&&typeof e.attribute!=="string"){e.attribute.usage=e.attribute.usage||{};e.attribute.usage.Detail={displayOrder:i};}}this._parsingResult.detailAttributesAreSorted=true;},_parseSingleAnnotationOrArray:function(a,b,p){if(b!==undefined){if(Array.isArray(b)){for(var j=0;j<b.length;j++){p.apply(this,[a,b[j]]);}}else{p.apply(this,[a,b]);}}},_parsePosition:function(p){if(typeof p==='string'){try{p=parseInt(p,10);}catch(e){p=Number.MAX_VALUE;}}if(typeof p!=='number'||isNaN(p)){p=Number.MAX_VALUE;}return p;},_getPropertyFromObject:function(o,p){if(o[p]){return o[p];}p=p.toLowerCase();for(var k in o){if(k.toLowerCase()===p){return o[k];}}return undefined;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/fiori/FioriIntentsResolver.js":function(){sinaDefine(['../../../sina/SinaObject','./NavigationTargetForIntent'],function(S,N){"use strict";return S.derive({_init:function(){if(typeof sap!=="undefined"&&sap.ushell&&sap.ushell.Container){this._launchpadNavigation=sap.ushell.Container.getService("SmartNavigation")||sap.ushell.Container.getService("CrossApplicationNavigation");this._fioriFrontendSystemInfo={systemId:sap.ushell.Container.getLogonSystem().getName(),client:sap.ushell.Container.getLogonSystem().getClient()};this._primaryIntentAction="-displayFactSheet";this._suppressInSearchTag="suppressInEnterpriseSearch".toLowerCase();}},resolveIntents:function(a){var t=this;if(!t._launchpadNavigation||!a){return Promise.resolve({defaultNavigationTarget:a.fallbackDefaultNavigationTarget});}if(Array.isArray(a)){var p=[];for(var k=0;k<a.length;k++){var b=t._doResolveIntents(a[k]);p.push(b);}return Promise.all(p);}return t._doResolveIntents(a);},_doResolveIntents:function(a){var t=this;var s=a.semanticObjectType;var b=a.semanticObjectTypeAttributes;var c=a.systemId;var d=a.client;var f=a.fallbackDefaultNavigationTarget;if(!s||s.length===0){return Promise.resolve({defaultNavigationTarget:f});}if(!b||b.length===0){return Promise.resolve();}var e={};var v;for(var i=0;i<b.length;i++){v=this.convertAttributeValueToUI5DataTypeFormats(b[i].value,b[i].type);e[b[i].name]=v;}var g={};g.systemId=c||(t._fioriFrontendSystemInfo&&t._fioriFrontendSystemInfo.systemId);g.client=d||(t._fioriFrontendSystemInfo.client&&t._fioriFrontendSystemInfo.client);if(c&&c.trim().length>0&&d&&d.trim().length>0&&(!t._fioriFrontendSystemInfo||!(t._fioriFrontendSystemInfo.systemId===c&&t._fioriFrontendSystemInfo.client===d))){g.urlParameter="sap-system=sid("+c+"."+d+")";}var p=new Promise(function(r,j){if(t._launchpadNavigation.getPrimaryIntent){t._launchpadNavigation.getPrimaryIntent(s,e).done(function(k){r(k);}).fail(function(){r();});}else{r();}});var h=new Promise(function(r,j){var k;if(t._launchpadNavigation.getLinks){k=t._launchpadNavigation.getLinks({semanticObject:s,params:e,withAtLeastOneUsedParam:true,sortResultOnTexts:true});}else{k=t._launchpadNavigation.getSemanticObjectLinks(s,e);}k.done(function(l){r(l);}).fail(function(){r();});});return Promise.all([p,h]).then(function(j){var i;var k=j[0];var l,m=j[1];var n;var r={};var o;if(k&&!t._shallIntentBeSuppressed(k)){o=t._getNavigationTargetForIntent(k,g);r.defaultNavigationTarget=o;}var q=r.defaultNavigationTarget!==undefined;r.navigationTargets=[];if(m){for(i=0;i<m.length;i++){l=m[i];if(t._shallIntentBeSuppressed(l)){continue;}n=t._getNavigationTargetForIntent(l,g);if(!q&&l.intent.substring(l.intent.indexOf("-"),l.intent.indexOf("?"))===t._primaryIntentAction){r.defaultNavigationTarget=n;q=true;}else if(!o||!n.isEqualTo(o)){r.navigationTargets.push(n);}}}return r;});},_shallIntentBeSuppressed:function(a){if(a.tags){for(var i=0;i<a.tags.length;i++){if(a.tags[i].toLowerCase()===this._suppressInSearchTag){return true;}}}return false;},_getNavigationTargetForIntent:function(i,s){var t=this;var a=i.intent;if(s.urlParameter){if(a.indexOf('?')===-1){a+="?";}else{a+="&";}a+=s.urlParameter;}var e={target:{shellHash:a}};var b=t._launchpadNavigation.hrefForExternal(e);var n=t.sina._createNavigationTargetForIntent({label:i.text,targetUrl:b,externalTarget:e,systemId:s.systemId,client:s.client});return n;},convertAttributeValueToUI5DataTypeFormats:function(v,s){var y,m,d,h,a,b,c;switch(s){case this.sina.AttributeType.Timestamp:y=v.getUTCFullYear();m=v.getUTCMonth()+1;d=v.getUTCDate();h=v.getUTCHours();a=v.getUTCMinutes();b=v.getUTCSeconds();c=v.getUTCMilliseconds()*1000;v=this.addLeadingZeros(y.toString(),4)+'-'+this.addLeadingZeros(m.toString(),2)+'-'+this.addLeadingZeros(d.toString(),2)+'T'+this.addLeadingZeros(h.toString(),2)+':'+this.addLeadingZeros(a.toString(),2)+':'+this.addLeadingZeros(b.toString(),2)+'.'+this.addLeadingZeros(c.toString(),3);break;case this.sina.AttributeType.Date:v=v.slice(0,4)+'-'+v.slice(5,7)+'-'+v.slice(8,10);break;}return v;},addLeadingZeros:function(v,l){return'00000000000000'.slice(0,l-v.length)+v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/fiori/NavigationTargetForIntent.js":function(){sinaDefine(['../../../sina/NavigationTarget'],function(N){"use strict";var _;if(typeof sap!=="undefined"&&sap.ushell&&sap.ushell.Container){_=(sap.ushell.Container.getService("SmartNavigation")||sap.ushell.Container.getService("CrossApplicationNavigation"));}return N.derive({_meta:{properties:{externalTarget:{required:true},systemId:{required:false},client:{required:false}}},performNavigation:function(p){p=p||{};var s=p.suppressTracking||false;var t=p.trackingOnly||false;if(_){if(!s){this._trackNavigation();}if(!t){_.toExternal(this.externalTarget);}}else{N.prototype.performNavigation.apply(this,arguments);}},_trackNavigation:function(){if(_&&_.trackNavigation){_.trackNavigation({target:this.externalTarget.target});}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/fiori/SuvNavTargetResolver.js":function(){sinaDefine(['../../../sina/SinaObject'],function(S){"use strict";var g=function(){var t=[];$.each(document.styleSheets,function(i,c){if(c.href){var f=c.href.toString();var r=/themes\/(.+)\/library.css/;var m=r.exec(f);if(m!==null){t.push(m[1]);return false;}}return true;});return t[0];};var a=function(u){var r=u;var t=g();if(!t){return r;}t="sap-theme="+t+"&";if(u.indexOf("sap-theme=")===-1){if(u.indexOf("?")!==-1){r=u.replace("?","?"+t);}}return r;};return S.derive({_init:function(){this.suvMimeType="application/vnd.sap.universal-viewer+suv";this.suvViewerBasePath="/sap/bc/ui5_ui5/ui2/ushell/resources/sap/fileviewer/viewer/web/viewer.html?file=";},addHighlightTermsToUrl:function(u,h){if(!h){return u;}u+='&searchTerms='+encodeURIComponent(JSON.stringify({'terms':h}));return u;},resolveSuvNavTargets:function(d,s,b){for(var c in s){var o;var e=s[c];var t=e.suvThumbnailAttribute;if(e.suvTargetMimeTypeAttribute.value===this.suvMimeType){o=this.suvViewerBasePath+encodeURIComponent(e.suvTargetUrlAttribute.value);o=this.addHighlightTermsToUrl(o,b);o=a(o);t.defaultNavigationTarget=this.sina._createNavigationTarget({label:e.suvTargetUrlAttribute.value,targetUrl:o,target:'_blank'});}else{o=e.suvTargetUrlAttribute.value;t.defaultNavigationTarget=this.sina._createNavigationTarget({label:e.suvTargetUrlAttribute.value,targetUrl:o,target:'_blank'});}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/sors/JoinConditions.js":function(){sinaDefine(['../../../core/core','./NavigationTargetTemplate'],function(c,N){"use strict";return c.defineClass({_init:function(p){this.sina=p.sina;this.navigationTargetGenerator=p.navigationTargetGenerator;this.sourceObjectType=p.sourceObjectType;this.targetObjectType=p.targetObjectType;this.conditions=[];},add:function(a){this.conditions.push(a);},hasDuplicateSemanticObject:function(){var m={};for(var i=0;i<this.conditions.length;++i){var a=this.conditions[i];if(m[a.semanticObjectType]){return true;}m[a.semanticObjectType]=true;}return false;},hasDistinctValue:function(s,p){var v;for(var i=0;i<this.conditions.length;++i){var a=this.conditions[i];if(a.semanticObjectType!==s){continue;}if(!v){v=a[p];continue;}if(v!==a[p]){return false;}}return true;},generateNavigationTargetTemplates:function(){if(this.hasDuplicateSemanticObject()){return this.createSingleConditionsTemplates();}return this.createMultipleConditionsTemplates();},createSingleConditionsTemplates:function(){var n=[];for(var i=0;i<this.conditions.length;++i){var a=this.conditions[i];var s=this.hasDistinctValue(a.semanticObjectType,'sourcePropertyName');var t=this.hasDistinctValue(a.semanticObjectType,'targetPropertyName');if(!s&&!t){continue;}var b=new N({sina:this.sina,navigationTargetGenerator:this.navigationTargetGenerator,label:'dummy',sourceObjectType:this.sourceObjectType,targetObjectType:this.targetObjectType,conditions:[a]});b._condition=a;n.push(b);}this.assembleSingleConditionTemplateLabels(n);return n;},createMultipleConditionsTemplates:function(){return[new N({sina:this.sina,navigationTargetGenerator:this.navigationTargetGenerator,label:this.navigationTargetGenerator.objectTypeMap[this.targetObjectType].label,sourceObjectType:this.sourceObjectType,targetObjectType:this.targetObjectType,conditions:this.conditions})];},assembleSingleConditionTemplateLabels:function(n){var t={};var a,l,b,m;for(var i=0;i<n.length;++i){b=n[i];m=this.navigationTargetGenerator.objectTypeMap[this.targetObjectType];l=m.label+' to:'+m.propertyMap[b._condition.targetPropertyName].label;b.label=l;a=t[l];if(!a){a=[];t[l]=a;}a.push(b);}m=this.navigationTargetGenerator.objectTypeMap[this.sourceObjectType];for(l in t){a=t[l];if(a.length>1){for(var j=0;j<a.length;++j){b=a[j];b.label+=' from:'+m.propertyMap[b._condition.sourcePropertyName].label;}}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/sors/NavigationTargetGenerator.js":function(){sinaDefine(['../../../core/core','../../../core/util','../../../sina/SinaObject','./JoinConditions'],function(c,u,S,J){"use strict";return S.derive({_init:function(p){this.active=this.checkActive();this.getPropertyMetadata=p.getPropertyMetadata;this.urlPrefix=p.urlPrefix;this.navigationTargetTemplatesInitialized=false;this.navigationTargetTemplatesMap={};this.objectTypeMap={};this.ignoredSemanticObjectTypes={LastChangedByUser:true,CreationDate:true,CreatedByUser:true};},checkActive:function(){var s=u.getUrlParameter('sors');if(s==='true'){return true;}return false;},cleanup:function(){this.objectTypeMap=null;},registerObjectType:function(o){if(!this.active){return;}var m={type:o.type,label:o.label,propertyMap:{}};this.objectTypeMap[o.type]=m;for(var i=0;i<o.properties.length;++i){var p=o.properties[i];var a=this.getPropertyMetadata(p);this.filterSemanticObjectType(a);m.propertyMap[a.name]=a;}},filterSemanticObjectType:function(p){if(this.ignoredSemanticObjectTypes[p.semanticObjectType]){delete p.semanticObjectType;}},finishRegistration:function(){if(!this.active){return;}this.calculateNavigationTargetTemplates();},calculateNavigationTargetTemplates:function(){if(this.navigationTargetTemplatesInitialized){return;}var j=this.collectJoinConditions();this.navigationTargetTemplatesMap=this.createNavTargetTemplatesFromJoinConditions(j);this.cleanup();this.navigationTargetTemplatesInitialized=true;},createNavTargetTemplatesFromJoinConditions:function(j){var n={};for(var s in j){var o=j[s];var a=[];for(var t in o){var b=o[t];if(!b){continue;}a.push.apply(a,b.generateNavigationTargetTemplates());}if(a.length!==0){n[s]=a;}}return n;},collectJoinConditions:function(){var s=this.createIndex();var j={};for(var o in this.objectTypeMap){var a=this.collectJoinConditionsForObjectType(s,o);if(!c.isEmptyObject(a)){j[o]=a;}}return j;},collectJoinConditionsForObjectType:function(s,o){var a={};var b=this.objectTypeMap[o];var g=function(f){var l=a[f];if(!l){l=new J({sina:this.sina,navigationTargetGenerator:this,sourceObjectType:o,targetObjectType:f});a[f]=l;}return l;}.bind(this);for(var p in b.propertyMap){var d=b.propertyMap[p];var e=d.semanticObjectType;if(!d.response){continue;}if(!e){continue;}var t=s[e];for(var f in t){if(f===b.type){continue;}var h=this.objectTypeMap[f];var i=t[f];for(var j in i){var k=h.propertyMap[j];if(!k.request){continue;}var l=g(f);l.add({sourcePropertyName:p,targetPropertyName:j,semanticObjectType:e});}}}return a;},createIndex:function(){var s={};for(var o in this.objectTypeMap){this.createIndexForObjectType(s,o);}return s;},createIndexForObjectType:function(s,o){var a=this.objectTypeMap[o];for(var p in a.propertyMap){var b=a.propertyMap[p];var d=b.semanticObjectType;if(!d){continue;}var e=s[d];if(!e){e={};s[d]=e;}var f=e[a.type];if(!f){f={};e[a.type]=f;}var g=f[p];if(!g){g=true;f[p]=true;}}},formatItem:function(a){var b=function(d,e){for(var i=0;i<e.length;++i){var f=e[i];d[f.id]=f;}};var d={};b(d,a.detailAttributes);b(d,a.titleAttributes);return d;},generateNavigationTargetsForItem:function(a){var n=this.navigationTargetTemplatesMap[a.dataSource.id];if(!n){return undefined;}var f=this.formatItem(a);var b=[];for(var i=0;i<n.length;++i){var d=n[i];var e=d.generate(f);if(!e){continue;}b.push(e);}return b;},generateNavigationTargets:function(s){if(!this.active){return;}for(var i=0;i<s.items.length;++i){var a=s.items[i];var n=this.generateNavigationTargetsForItem(a);a.navigationTargets=a.navigationTargets||[];a.navigationTargets.push.apply(a.navigationTargets,n);}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/providers/tools/sors/NavigationTargetTemplate.js":function(){sinaDefine(['../../../core/core'],function(c){"use strict";return c.defineClass({_init:function(p){this.sina=p.sina;this.navigationTargetGenerator=p.navigationTargetGenerator;this.label=p.label;this.sourceObjectType=p.sourceObjectType;this.targetObjectType=p.targetObjectType;this.conditions=p.conditions;},generate:function(d){var a=this.sina.getDataSource(this.targetObjectType);var f=this.sina.createFilter({dataSource:a,searchTerm:'*'});for(var i=0;i<this.conditions.length;++i){var b=this.conditions[i];var e=this.sina.createSimpleCondition({attribute:b.targetPropertyName,attributeLabel:a.getAttributeMetadata(b.targetPropertyName).label,operator:this.sina.ComparisonOperator.Eq,value:d[b.sourcePropertyName].value,valueLabel:d[b.sourcePropertyName].valueFormatted});f.autoInsertCondition(e);}return this.sina._createNavigationTarget({label:this.label,targetUrl:this.navigationTargetGenerator.urlPrefix+encodeURIComponent(JSON.stringify(f.toJson()))});}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeFormatType.js":function(){sinaDefine([],function(){"use strict";return{Round:'Round',DocumentThumbnail:'DocumentThumbnail',LongText:'LongText',MultilineText:'MultilineText'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeGroupMembership.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{group:{required:true},attribute:{required:true},nameInGroup:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeGroupMetadata.js":function(){sinaDefine(['../core/core','./SinaObject','./AttributeType','./AttributeMetadataBase'],function(c,S,A,a){"use strict";return a.derive({_meta:{properties:{type:{required:false,default:A.Group},label:{required:false},isSortable:{required:false,default:false},template:{required:false},attributes:{required:true,default:function(){return[];}}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeGroupTextArrangement.js":function(){sinaDefine([],function(){"use strict";return{TextFirst:'TextFirst',TextLast:'TextLast',TextOnly:'TextOnly',TextSeparate:'TextSeparate'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeMetadata.js":function(){sinaDefine(['../core/core','./SinaObject','./AttributeMetadataBase'],function(c,S,A){"use strict";return A.derive({_meta:{properties:{type:{required:true},label:{required:true},isSortable:{required:true},format:{required:false},isKey:{required:true},semantics:{required:false},matchingStrategy:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeMetadataBase.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{id:{required:true},usage:{required:true},displayOrder:{required:false},groups:{required:false,default:function(){return[];}}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeSemanticsType.js":function(){sinaDefine([],function(){"use strict";return{PhoneNr:'PhoneNr',EmailAddress:'EmailAddress',HTTPURL:'HTTPURL',FirstName:'FirstName',LastName:'LastName'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeType.js":function(){sinaDefine([],function(){"use strict";return{Double:'Double',Integer:'Integer',String:'String',ImageUrl:'ImageUrl',ImageBlob:'ImageBlob',GeoJson:'GeoJson',Date:'Date',Time:'Time',Timestamp:'Timestamp',Group:'Group'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/AttributeUsageType.js":function(){sinaDefine([],function(){"use strict";return{AdvancedSearch:'AdvancedSearch',Facet:'Facet',Title:'Title',Detail:'Detail',Navigation:'Navigation'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Capabilities.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{fuzzy:{required:false,default:false}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ChartQuery.js":function(){sinaDefine(['../core/core','./FacetQuery'],function(c,F){"use strict";return F.derive({_meta:{properties:{top:{default:5},dimension:{required:true}}},_initClone:function(o){this.dimension=o.dimension;},_equals:function(o){return this.dimension===o.dimension;},_execute:function(q){return this.sina.provider.executeChartQuery(q);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ChartResultSet.js":function(){sinaDefine(['../core/core','./FacetResultSet','./FacetType'],function(c,F,a){"use strict";return F.derive({type:a.Chart});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ChartResultSetItem.js":function(){sinaDefine(['../core/core','./FacetResultSetItem'],function(c,F){"use strict";return F.derive({_meta:{properties:{filterCondition:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ComparisonOperator.js":function(){sinaDefine([],function(){"use strict";return{'Eq':'Eq','Gt':'Gt','Lt':'Lt','Ge':'Ge','Le':'Le','Co':'Co','Bw':'Bw','Ew':'Ew'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ComplexCondition.js":function(){sinaDefine(['../core/core','./Condition','./ConditionType'],function(c,C,a){"use strict";return C.derive({_meta:{properties:{operator:{required:false,default:function(){return this.sina.LogicalOperator.And;}},conditions:{required:false,default:function(){return[];}}}},type:a.Complex,_initClone:function(o){this.operator=o.operator;this.conditions=[];for(var i=0;i<o.conditions.length;++i){this.conditions.push(o.conditions[i].clone());}},_equals:function(o){if(this.operator!==o.operator){return false;}if(this.conditions.length!==o.conditions.length){return false;}var m={};for(var i=0;i<this.conditions.length;++i){var b=this.conditions[i];var d=false;for(var j=0;j<o.conditions.length;++j){if(m[j]){continue;}var e=o.conditions[j];if(b.equals(e)){d=true;m[j]=true;break;}}if(!d){return false;}}return true;},addCondition:function(b){if(!(b instanceof C)){b=this.sina.createSimpleCondition(b);}this.conditions.push(b);},removeConditionAt:function(i){this.conditions.splice(i,1);},hasFilters:function(){return this.conditions.length>=1;},removeAttributeConditions:function(b){var r={deleted:false,attribute:'',value:''};for(var i=0;i<this.conditions.length;++i){var s=this.conditions[i];switch(s.type){case a.Complex:r=s.removeAttributeConditions(b);break;case a.Simple:if(s.attribute===b){r={deleted:true,attribute:s.attribute,value:s.value};this.removeConditionAt(i);i--;}break;}}this.cleanup();return r;},cleanup:function(){var r=false;var d=function(b){for(var i=0;i<b.conditions.length;++i){var s=b.conditions[i];switch(s.type){case a.Complex:d(s);if(s.conditions.length===0){r=true;b.removeConditionAt(i);i--;}break;case a.Simple:break;}}};do{r=false;d(this);}while(r);},resetConditions:function(){this.conditions.splice(0,this.conditions.length);},_getAttribute:function(){if(this.conditions.length===0){return null;}return this.conditions[0]._getAttribute();},toJson:function(){var r={type:'Complex',operator:this.operator,conditions:[],valueLabel:this.valueLabel,attributeLabel:this.attributeLabel};for(var i=0;i<this.conditions.length;++i){var b=this.conditions[i];r.conditions.push(b.toJson());}if(this.userDefined){r.userDefined=true;}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Condition.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{attributeLabel:{required:false},valueLabel:{required:false},userDefined:{required:false}}},_initClone:function(o){this.attributeLabel=o.attributeLabel;this.valueLabel=o.valueLabel;this.userDefined=o.userDefined;},_equals:function(o){return true;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ConditionType.js":function(){sinaDefine([],function(){"use strict";return{Simple:'Simple',Complex:'Complex'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Configuration.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{personalizedSearch:{required:true,setter:true},isPersonalizedSearchEditable:{required:true}}},resetPersonalizedSearchDataAsync:function(){return this.sina.provider.resetPersonalizedSearchDataAsync(this);},saveAsync:function(){return this.sina.provider.saveConfigurationAsync(this);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSource.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{type:{required:true},id:{required:true},label:{required:true},labelPlural:{required:false},hidden:{required:false,default:false},usage:{required:false,default:{}},attributesMetadata:{required:false,default:function(){return[];}},attributeMetadataMap:{required:false,default:function(){return{};}},attributeGroupsMetadata:{required:false,default:function(){return[];}},attributeGroupMetadataMap:{required:false,default:function(){return{};}}}},equals:function(){throw new c.Exception('use === operator for comparison of datasources');},_afterInitProperties:function(){if(!this.labelPlural||this.labelPlural.length===0){this.labelPlural=this.label;}if(this.type===this.sina.DataSourceType.BusinessObject&&this.attributesMetadata.length===0){throw'attributes of datasource are missing';}this.attributeMetadataMap=this.createAttributeMetadataMap(this.attributesMetadata);},_configure:function(){var f=this.sina.metadataFormatters;if(!f){return;}for(var i=0;i<f.length;++i){var a=f[i];a.format({dataSources:[this]});}},createAttributeMetadataMap:function(a){var m={};for(var i=0;i<a.length;++i){var b=a[i];m[b.id]=b;}return m;},getAttributeMetadata:function(i){return this.attributeMetadataMap[i];},toJson:function(){return{type:this.type,id:this.id,label:this.label,labelPlural:this.labelPlural};}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSourceQuery.js":function(){sinaDefine(['../core/core','./FacetQuery'],function(c,F){"use strict";return F.derive({_meta:{properties:{dataSource:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSourceResultSet.js":function(){sinaDefine(['../core/core','./FacetResultSet','./FacetType'],function(c,F,a){"use strict";return F.derive({type:a.DataSource});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSourceResultSetItem.js":function(){sinaDefine(['../core/core','./FacetResultSetItem'],function(c,F){"use strict";return F.derive({_meta:{properties:{dataSource:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSourceSuggestion.js":function(){sinaDefine(['../core/core','./Suggestion','./SuggestionType'],function(c,S,a){"use strict";return S.derive({type:a.DataSource,_meta:{properties:{dataSource:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/DataSourceType.js":function(){sinaDefine([],function(){"use strict";return{BusinessObject:'BusinessObject',Category:'Category'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/EqualsMode.js":function(){sinaDefine([],function(){"use strict";return{CheckFireQuery:'CheckFireQuery'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/FacetQuery.js":function(){sinaDefine(['../core/core','./Query'],function(c,Q){"use strict";return Q.derive({});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/FacetResultSet.js":function(){sinaDefine(['../core/core','./ResultSet'],function(c,R){"use strict";return R.derive({toString:function(){var r=[];r.push('--Facet');r.push(R.prototype.toString.apply(this,arguments));return r.join('\n');}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/FacetResultSetItem.js":function(){sinaDefine(['../core/core','./ResultSetItem'],function(c,R){"use strict";return R.derive({_meta:{properties:{dimensionValueFormatted:{required:true},measureValue:{required:true},measureValueFormatted:{required:true}}},toString:function(){return this.dimensionValueFormatted+':'+this.measureValueFormatted;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/FacetType.js":function(){sinaDefine([],function(){"use strict";return{Chart:'Chart',DataSource:'DataSource'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Filter.js":function(){sinaDefine(['../core/core','./SinaObject','./SimpleCondition','./ComplexCondition'],function(c,S,a,C){"use strict";return S.derive({_meta:{properties:{dataSource:{required:false,default:function(){return this.sina.getAllDataSource();}},searchTerm:{required:false,default:'',setter:true},rootCondition:{required:false,default:function(){return this.sina.createComplexCondition();},setter:true}}},_initClone:function(o){this.dataSource=o.dataSource;this.searchTerm=o.searchTerm;this.rootCondition=o.rootCondition.clone();},_equals:function(o){return this.dataSource===o.dataSource&&this.searchTerm===o.searchTerm&&this.rootCondition.equals(o.rootCondition);},_getAttribute:function(b){if(b instanceof a){return b.attribute;}for(var i=0;i<b.conditions.length;++i){var d=this._getAttribute(b.conditions[i]);if(d){return d;}}},setDataSource:function(d){if(this.dataSource===d){return;}this.dataSource=d;this.resetConditions();},resetConditions:function(){this.rootCondition.resetConditions();},autoInsertCondition:function(b){if(!(this.rootCondition instanceof C)){throw new c.Exception('cannot auto insert condition - condition is not a complex condition');}var d=this._getAttribute(b);var m,e;for(var i=0;i<this.rootCondition.conditions.length;++i){e=this.rootCondition.conditions[i];var f=this._getAttribute(e);if(f===d){m=e;break;}}if(!m){m=this.sina.createComplexCondition({operator:this.sina.LogicalOperator.Or});this.rootCondition.addCondition(m);}for(var j=0;j<m.conditions.length;++j){e=m.conditions[j];if(e.equals(b)){return;}}m.addCondition(b);},autoRemoveCondition:function(b){var r=function(d,b){for(var i=0;i<d.conditions.length;++i){var s=d.conditions[i];if(s.equals(b)){d.removeConditionAt(i);i--;continue;}if(s instanceof C){r(s,b);if(s.conditions.length===0){d.removeConditionAt(i);i--;continue;}}}};r(this.rootCondition,b);},toJson:function(){return{dataSource:this.dataSource.toJson(),searchTerm:this.searchTerm,rootCondition:this.rootCondition.toJson()};}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/LogicalOperator.js":function(){sinaDefine([],function(){"use strict";return{And:'And',Or:'Or'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/MatchingStrategy.js":function(){sinaDefine([],function(){"use strict";return{Exact:'Exact',Text:'Text'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/NavigationTarget.js":function(){sinaDefine(['./SinaObject'],function(S){"use strict";return S.derive({_meta:{properties:{targetUrl:{required:true},label:{required:true},target:{required:false}}},performNavigation:function(p){p=p||{};var t=p.trackingOnly||false;if(!t){if(this.target){window.open(this.targetUrl,this.target);}else{window.open(this.targetUrl);}}},isEqualTo:function(o){if(!o){return false;}return this.targetUrl==o.targetUrl;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ObjectSuggestion.js":function(){sinaDefine(['../core/core','./Suggestion','./SuggestionType'],function(c,S,a){"use strict";return S.derive({type:a.Object,_meta:{properties:{object:{required:true,aggregation:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Query.js":function(){sinaDefine(['../core/core','../core/util','./SinaObject'],function(c,u,S){"use strict";return S.derive({_meta:{properties:{filter:{required:false,default:function(){return this.sina.createFilter();}},top:{required:false,default:10,setter:true},skip:{required:false,default:0,setter:true},sortOrder:{required:false,default:function(){return[];},setter:true}}},_afterInitProperties:function(p){if(p.dataSource){this.filter.setDataSource(p.dataSource);}if(p.searchTerm){this.filter.setSearchTerm(p.searchTerm);}if(p.rootCondition){this.filter.setRootCondition(p.rootCondition);}if(this.requestTimeout){this._execute=u.timeoutDecorator(this._execute,this.requestTimeout);}this._execute=u.refuseOutdatedResponsesDecorator(this._execute);},_initClone:function(o){this.top=o.top;this.skip=o.skip;this.filter=o.filter.clone();this.sortOrder=c.clone(o.sortOrder);},_equals:function(o){return this.top===o.top&&this.skip===o.skip&&this.filter.equals(o.filter)&&c.equals(this.sortOrder,o.sortOrder);},abort:function(){this._execute.abort();},getResultSetAsync:function(){if(this.equals(this._lastQuery,this.sina.EqualsMode.CheckFireQuery)){return this._resultSetPromise;}if(this._lastQuery&&!this.filter.equals(this._lastQuery.filter)){this.setSkip(0);}this._lastQuery=this._createReadOnlyClone();var r;this._resultSetPromise=this._execute(this._lastQuery).then(function(R){r=R;}).then(function(){return this._formatResultSetAsync(r);}.bind(this)).then(function(){return r;});return this._resultSetPromise;},_formatResultSetAsync:function(r){},_setResultSet:function(r){this._lastQuery=this._createReadOnlyClone();this._resultSetPromise=c.Promise.resolve().then(function(){return this._formatResultSetAsync(r);}.bind(this)).then(function(){return r;});return this._resultSetPromise;},_createReadOnlyClone:function(){var q=this.clone();q.getResultSetAsync=function(){throw new c.Exception('this query is readonly');};return q;},resetResultSet:function(){this._lastQuery=null;this._resultSetPromise=null;},getSearchTerm:function(){return this.filter.searchTerm;},getDataSource:function(){return this.filter.dataSource;},getRootCondition:function(){return this.filter.rootCondition;},setSearchTerm:function(s){this.filter.setSearchTerm(s);},setDataSource:function(d){this.filter.setDataSource(d);},setRootCondition:function(r){this.filter.setRootCondition(r);},resetConditions:function(){this.filter.resetConditions();},autoInsertCondition:function(a){this.filter.autoInsertCondition(a);},autoRemoveCondition:function(a){this.filter.autoRemoveCondition(a);},setFilter:function(f){if(!this.filter.equals(f)){this.setSkip(0);}this.filter=f;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ResultSet.js":function(){sinaDefine(['../core/core','./SinaObject','../core/Log'],function(c,S,L){"use strict";return S.derive({_meta:{properties:{id:{required:false,default:function(){return c.generateId();}},title:{required:true},items:{required:false,default:function(){return[];},aggregation:true},query:{required:true},log:{required:false,default:function(){return new L();}}}},toString:function(){var r=[];for(var i=0;i<this.items.length;++i){var a=this.items[i];r.push(a.toString());}return r.join('\n');}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/ResultSetItem.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchQuery.js":function(){sinaDefine(['../core/core','./Query'],function(c,Q){"use strict";return Q.derive({_meta:{properties:{calculateFacets:{required:false,default:false,setter:true},multiSelectFacets:{required:false,default:false,setter:true},nlq:{required:false,default:false,setter:true},facetTop:{required:false,default:5,setter:true}}},_initClone:function(o){this.calculateFacets=o.calculateFacets;this.multiSelectFacets=o.multiSelectFacets;this.nlq=o.nlq;this.facetTop=o.facetTop;},_equals:function(o,m){if(this.nlq!==o.nlq){return false;}if(this.multiSelectFacets!==o.multiSelectFacets){return false;}if(this.facetTop!==o.facetTop){return false;}switch(m){case this.sina.EqualsMode.CheckFireQuery:if(o.calculateFacets&&!this.calculateFacets){return true;}return this.calculateFacets===o.calculateFacets;default:return this.calculateFacets===o.calculateFacets;}},_execute:function(q){var f;var a=[];if(this.multiSelectFacets){f=this._collectAttributesWithFilter(q);a=this._createChartQueries(q,f);}var r=[];r.push(this.sina.provider.executeSearchQuery(q));for(var i=0;i<a.length;++i){var b=a[i];var d=q.filter.dataSource.getAttributeMetadata(b.dimension);if(d.usage.Facet){r.push(b.getResultSetAsync());}}return Promise.all(r).then(function(e){var s=e[0];var g=e.slice(1);this._mergeFacetsToSearchResultSet(s,g);return s;}.bind(this));},_formatResultSetAsync:function(r){return c.executeSequentialAsync(this.sina.searchResultSetFormatters,function(f){return f.formatAsync(r);});},_collectAttributesWithFilter:function(q){var a={};this._doCollectAttributes(a,q.filter.rootCondition);return Object.keys(a);},_doCollectAttributes:function(a,b){switch(b.type){case this.sina.ConditionType.Simple:a[b.attribute]=true;break;case this.sina.ConditionType.Complex:for(var i=0;i<b.conditions.length;++i){var s=b.conditions[i];this._doCollectAttributes(a,s);}break;}},_createChartQuery:function(q,f){var a=this.sina.createChartQuery({dimension:f,top:this.facetTop});a.setFilter(q.filter.clone());a.filter.rootCondition.removeAttributeConditions(f);return a;},_createChartQueries:function(q,f){var a=[];for(var i=0;i<f.length;++i){var b=f[i];var d=this._createChartQuery(q,b);a.push(d);}return a;},_mergeFacetsToSearchResultSet:function(s,a){this._addSelectedFiltersToSearchResultSet(s);for(var i=0;i<a.length;++i){var b=a[i];this._addChartResultSetToSearchResultSet(s,b);}},_calculateFacetTitle:function(a,d){var b=a._getAttribute();var e=d.getAttributeMetadata(b);return e.label;},_addSelectedFiltersToSearchResultSet:function(s){for(var j=0;j<s.query.filter.rootCondition.conditions.length;j++){var a=s.query.filter.rootCondition.conditions[j].conditions;var b=this._calculateFacetTitle(a[0],s.query.filter.dataSource);var d;switch(a[0].type){case this.sina.ConditionType.Simple:d=a[0].attribute;break;case this.sina.ConditionType.Complex:d=a[0].conditions[0].attribute;break;}var m=this._findMatchFacet(d,s.facets);var e=s.facets[m];if(!e){var f=this._createChartQuery(s.query,d);e=this.sina._createChartResultSet({title:b,items:[],query:f});s.facets.splice(m,1,e);}var g=null;if(a.length===1){g=s.totalCount;}var h=[];for(var k=0;k<a.length;k++){var i;if(this._findFilterConditionInFacetItemList(a[k],e.items)>=0){i=this._findFilterConditionInFacetItemList(a[k],e.items);h.push(e.items[i]);}else{h.push(this.sina._createChartResultSetItem({filterCondition:a[k],dimensionValueFormatted:a[k].valueLabel||a[k].value,measureValue:g,measureValueFormatted:a[k].valueLabel||a[k].value}));}}e.items=h;}},_addChartResultSetToSearchResultSet:function(s,d){if(d.items.length===0){return;}var e=d.query.dimension;var f=this._findMatchFacet(e,s.facets);var g=s.facets[f];var h=g.items;var i=false;var j=[];for(var m=0;m<h.length;m++){var k=this._findFilterConditionInFacetItemList(h[m].filterCondition,d.items);if(k>=0){if(this._isRangeFacet(d.query)){j.push(d.items[k]);}}else{if(this._isRangeFacet(d.query)){i=true;}j.push(h[m]);}}j.sort(function(a,b){return b.measureValue-a.measureValue;});if(this._isRangeFacet(d.query)){if(i){d.items=j;}}else{d.items=d.items.concat(j);}s.facets.splice(f,1,d);},_findMatchFacet:function(d,f){var i=0;for(;i<f.length;i++){var a=f[i];if(a.query.dimension===d){break;}}return i;},_findFilterConditionInFacetItemList:function(f,a){var b=-1;for(var i=0;i<a.length;i++){var d=a[i];if(f.equals(d.filterCondition)){b=i;break;}}return b;},_isRangeFacet:function(q){var d=q.filter.dataSource.getAttributeMetadata(q.dimension);if(d.type===q.sina.AttributeType.Double){return true;}return false;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSet.js":function(){sinaDefine(['../core/core','./ResultSet'],function(c,R){"use strict";return R.derive({_meta:{properties:{facets:{required:false,default:function(){return[];}},totalCount:{required:true},nlqSuccess:{required:false,default:false}}},toString:function(){var r=[];r.push(R.prototype.toString.apply(this,arguments));for(var i=0;i<this.facets.length;++i){var f=this.facets[i];r.push(f.toString());}return r.join('\n');}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSetItem.js":function(){sinaDefine(['../core/core','./ResultSetItem'],function(c,R){"use strict";return R.derive({_meta:{properties:{dataSource:{required:true},titleAttributes:{required:true,aggregation:true},titleDescriptionAttributes:{required:false,aggregation:true},detailAttributes:{required:true,aggregation:true},defaultNavigationTarget:{required:false,aggregation:true},navigationTargets:{required:false,aggregation:true},score:{required:false,default:0}}},toString:function(){var i;var r=[];var t=[];for(i=0;i<this.titleAttributes.length;++i){var a=this.titleAttributes[i];t.push(a.toString());}r.push('--'+t.join(' '));for(i=0;i<this.detailAttributes.length;++i){var d=this.detailAttributes[i];r.push(d.toString());}return r.join('\n');}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSetItemAttribute.js":function(){sinaDefine(['../core/core','./SinaObject','./SearchResultSetItemAttributeBase'],function(c,S,a){"use strict";return a.derive({_meta:{properties:{label:{required:true},value:{required:true},valueFormatted:{required:false},valueHighlighted:{required:false},isHighlighted:{required:true},unitOfMeasure:{required:false},description:{required:false},defaultNavigationTarget:{required:false,aggregation:true},navigationTargets:{required:false,aggregation:true}}},toString:function(){return this.label+':'+this.valueFormatted;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSetItemAttributeBase.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{id:{required:true},metadata:{required:true},groups:{required:false,defaul:function(){return[];}}}},toString:function(){return this.id;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSetItemAttributeGroup.js":function(){sinaDefine(['../core/core','./SinaObject','./SearchResultSetItemAttributeBase'],function(c,S,a){"use strict";return a.derive({_meta:{properties:{label:{required:false},template:{required:false},attributes:{required:true,default:function(){return[];}}}},toString:function(){var v="",p=0;var m,r=RegExp("{[a-z]+}","gi");while((m=r.exec(this.template))!==null){v+=this.template.substring(p,m.index);var b=m[0].slice(1,-1);v+=this.attributes[b]&&this.attributes[b].valueFormatted||"";p=r.lastIndex;}v+=this.template.substring(p);return this.label+':'+v;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchResultSetItemAttributeGroupMembership.js":function(){sinaDefine(['../core/core','./SinaObject'],function(c,S){"use strict";return S.derive({_meta:{properties:{group:{required:true},attribute:{required:true},metadata:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchTermAndDataSourceSuggestion.js":function(){sinaDefine(['../core/core','./SearchTermSuggestion','./SuggestionType'],function(c,S,a){"use strict";return S.derive({type:a.SearchTermAndDataSource,_meta:{properties:{dataSource:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SearchTermSuggestion.js":function(){sinaDefine(['../core/core','./Suggestion','./SuggestionType'],function(c,S,a){"use strict";return S.derive({type:a.SearchTerm,_meta:{properties:{searchTerm:{required:true},filter:{required:true},childSuggestions:{required:false,default:function(){return[];}}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SimpleCondition.js":function(){sinaDefine(['../core/core','../core/util','./Condition','./ConditionType'],function(c,u,C,a){"use strict";return C.derive({_meta:{properties:{operator:{required:false,default:function(){return this.sina.ComparisonOperator.Eq;}},attribute:{required:true},value:{required:true}}},type:a.Simple,_initClone:function(o){this.operator=o.operator;this.attribute=o.attribute;this.value=o.value;},_equals:function(o){if(this.attribute!==o.attribute||this.operator!==o.operator){return false;}if(this.value.equals){return this.value.equals(o.value.equals);}if(this.value instanceof Date&&o.value instanceof Date){return this.value.getTime()===o.value.getTime();}return this.value===o.value;},_getAttribute:function(){return this.attribute;},toJson:function(){var j;if(this.value instanceof Date){j=u.dateToJson(this.value);}else{j=this.value;}var r={type:'Simple',operator:this.operator,attribute:this.attribute,value:j,valueLabel:this.valueLabel,attributeLabel:this.attributeLabel};if(this.userDefined){r.userDefined=true;}return r;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Sina.js":function(){sinaDefine(['../core/core','../core/util','./SearchQuery','./ChartQuery','./DataSourceQuery','./SuggestionQuery','./Filter','./DataSource','./ComplexCondition','./SimpleCondition','./AttributeMetadata','./AttributeGroupMetadata','./AttributeGroupMembership','./SearchResultSetItemAttribute','./SearchResultSetItemAttributeGroup','./SearchResultSetItemAttributeGroupMembership','./SearchResultSetItem','./SearchResultSet','./AttributeType','./AttributeFormatType','./AttributeSemanticsType','./AttributeGroupTextArrangement','./DataSourceType','./SuggestionType','./SuggestionCalculationMode','./FacetType','./MatchingStrategy','./LogicalOperator','./ComparisonOperator','./AttributeUsageType','./FacetResultSet','./FacetResultSetItem','./SearchTermSuggestion','./SearchTermAndDataSourceSuggestion','./DataSourceSuggestion','./ObjectSuggestion','./SuggestionResultSet','./ChartResultSet','./DataSourceResultSet','./ChartResultSetItem','./DataSourceResultSetItem','./EqualsMode','./SortOrder','./Capabilities','./ConditionType','./Configuration','../providers/inav2/typeConverter','./NavigationTarget','../providers/tools/fiori/FioriIntentsResolver','../providers/tools/fiori/NavigationTargetForIntent','../providers/tools/cds/CDSAnnotationsParser','../providers/tools/ItemPostParser','../providers/tools/fiori/SuvNavTargetResolver','../providers/tools/sors/NavigationTargetGenerator','./formatters/ConfigSearchResultSetFormatter','./formatters/ConfigMetadataFormatter','./formatters/Formatter','./formatters/NavtargetsInResultSetFormatter','./formatters/RemovePureAdvancedSearchFacetsFormatter','./formatters/ResultValueFormatter'],function(c,u,S,C,D,a,F,b,d,e,A,f,g,h,k,l,m,n,o,p,q,r,s,t,v,w,M,L,x,y,z,B,E,G,H,O,I,J,K,N,P,Q,R,T,U,V,W,X,Y,Z,$,_,a1,b1,c1,d1,e1,f1,g1,h1){"use strict";return c.defineClass({AttributeType:o,AttributeFormatType:p,AttributeSemanticsType:q,AttributeGroupTextArrangement:r,DataSourceType:s,AttributeUsageType:y,MatchingStrategy:M,LogicalOperator:L,ComparisonOperator:x,FacetType:w,SuggestionCalculationMode:v,SuggestionType:t,EqualsMode:Q,SortOrder:R,ConditionType:U,SearchResultSet:n,SearchResultSetItem:m,SearchResultSetItemAttribute:h,ObjectSuggestion:O,_init:function(i){this.core=c;this.util=u;this.inav2TypeConverter=W;this.provider=i;this.createSearchQuery=this.generateFactoryMethod(S);this.createChartQuery=this.generateFactoryMethod(C);this.createSuggestionQuery=this.generateFactoryMethod(a);this.createDataSourceQuery=this.generateFactoryMethod(D);this.createFilter=this.generateFactoryMethod(F);this.createComplexCondition=this.generateFactoryMethod(d);this.createSimpleCondition=this.generateFactoryMethod(e);this._createAttributeMetadata=this.generateFactoryMethod(A);this._createAttributeGroupMetadata=this.generateFactoryMethod(f);this._createAttributeGroupMembership=this.generateFactoryMethod(g);this._createSearchResultSetItemAttribute=this.generateFactoryMethod(h);this._createSearchResultSetItemAttributeGroup=this.generateFactoryMethod(k);this._createSearchResultSetItemAttributeGroupMembership=this.generateFactoryMethod(l);this._createSearchResultSetItem=this.generateFactoryMethod(m);this._createSearchResultSet=this.generateFactoryMethod(n);this._createSearchTermSuggestion=this.generateFactoryMethod(E);this._createSearchTermAndDataSourceSuggestion=this.generateFactoryMethod(G);this._createDataSourceSuggestion=this.generateFactoryMethod(H);this._createObjectSuggestion=this.generateFactoryMethod(O);this._createSuggestionResultSet=this.generateFactoryMethod(I);this._createChartResultSet=this.generateFactoryMethod(J);this._createDataSourceResultSet=this.generateFactoryMethod(K);this._createChartResultSetItem=this.generateFactoryMethod(N);this._createDataSourceResultSetItem=this.generateFactoryMethod(P);this._createCapabilities=this.generateFactoryMethod(T);this._createConfiguration=this.generateFactoryMethod(V);this._createNavigationTarget=this.generateFactoryMethod(X);this._createSorsNavigationTargetGenerator=this.generateFactoryMethod(b1);this._createFioriIntentsResolver=this.generateFactoryMethod(Y);this._createNavigationTargetForIntent=this.generateFactoryMethod(Z);this._createCDSAnnotationsParser=this.generateFactoryMethod($);this._createItemPostParser=this.generateFactoryMethod(_);this._createSuvNavTargetResolver=this.generateFactoryMethod(a1);this.searchResultSetFormatters=[];this.metadataFormatters=[];this.dataSources=[];this.dataSourceMap={};this.allDataSource=this._createDataSource({id:'All',label:'All',type:this.DataSourceType.Category});this.searchResultSetFormatters.push(new f1());this.searchResultSetFormatters.push(new h1());},_initAsync:function(i){i=i||{};this.isDummyProvider=i.provider.indexOf("dummy")>-1;this.provider.label=i.label;return c.Promise.resolve().then(function(){return this._evaluateConfigurationAsync(i);}.bind(this)).then(function(){i.sina=this;return this.provider._initAsync.apply(this.provider,[i]);}.bind(this)).then(function(j){j=j||{};this.capabilities=j.capabilities||this._createCapabilities();return this._formatMetadataAsync();}.bind(this)).then(function(){if(this.getBusinessObjectDataSources().length===0&&!this.isDummyProvider){return Promise.reject(new c.Exception('Not active - no datasources'));}}.bind(this));},_formatMetadataAsync:function(){return c.executeSequentialAsync(this.metadataFormatters,function(i){return i.formatAsync({dataSources:this.dataSources});}.bind(this));},_evaluateConfigurationAsync:function(i1){var j1=[];if(i1.searchResultSetFormatters){for(var i=0;i<i1.searchResultSetFormatters.length;++i){var k1=i1.searchResultSetFormatters[i];if(!(k1 instanceof e1)){k1=new c1(k1);}this.searchResultSetFormatters.push(k1);j1.push(k1.initAsync());}}if(i1.metadataFormatters){for(var j=0;j<i1.metadataFormatters.length;++j){var l1=i1.metadataFormatters[j];if(!(l1 instanceof e1)){l1=new d1(l1);}this.metadataFormatters.push(l1);j1.push(l1.initAsync());}}return c.Promise.all(j1);},loadMetadata:function(i){if(this.provider.loadMetadata){return this.provider.loadMetadata(i);}return c.Promise.resolve();},createDataSourceMap:function(j){var i1={};for(var i=0;i<j.length;++i){var j1=j[i];i1[j1.id]=j1;}return i1;},generateFactoryMethod:function(i){return function(j){j=j||{};j.sina=this;return new i(j);};},_createDataSource:function(i){i=i||{};i.sina=this;var j=new b(i);if(this.dataSourceMap[j.id]===j){throw new c.Exception('cannot create an already existing datasource: "'+j.id+'"');}this.dataSources.push(j);this.dataSourceMap[j.id]=j;return j;},getAllDataSource:function(){return this.allDataSource;},getBusinessObjectDataSources:function(){var j=[];for(var i=0;i<this.dataSources.length;++i){var i1=this.dataSources[i];if(!i1.hidden&&i1.type===this.DataSourceType.BusinessObject){j.push(i1);}}return j;},getDataSource:function(i){return this.dataSourceMap[i];},getConfigurationAsync:function(i){if(!this.provider.getConfigurationAsync){return c.Promise.resolve(this._createConfiguration({personalizedSearch:false,isPersonalizedSearchEditable:false}));}i=i||{};if(this.configurationPromise&&!i.forceReload){return this.configurationPromise;}this.configurationPromise=this.provider.getConfigurationAsync();return this.configurationPromise;},logUserEvent:function(i){if(!this.provider.logUserEvent){return;}this.provider.logUserEvent(i);},getDebugInfo:function(){var i=['Sina Provider:'+this.provider.id];if(this.provider.getDebugInfo){var j=this.provider.getDebugInfo();if(j){i.push(j);}}return i.join('\n');},parseDataSourceFromJson:function(j){var i=this.getDataSource(j.id);if(i){return i;}if(j.type!==this.DataSourceType.Category){throw new c.Exception('Datasource in URL does not exist '+j.id);}i=this._createDataSource(j);return i;},parseSimpleConditionFromJson:function(j){var i;if(c.isObject(j.value)){i=u.dateFromJson(j.value);}else{i=j.value;}var i1;if(j.userDefined){i1=true;}else{i1=false;}return this.createSimpleCondition({operator:j.operator,attribute:j.attribute,value:i,attributeLabel:j.attributeLabel,valueLabel:j.valueLabel,userDefined:i1});},parseComplexConditionFromJson:function(j){var i1=[];for(var i=0;i<j.conditions.length;++i){var j1=j.conditions[i];i1.push(this.parseConditionFromJson(j1));}var k1;if(j.userDefined){k1=true;}else{k1=false;}return this.createComplexCondition({operator:j.operator,conditions:i1,attributeLabel:j.attributeLabel,valueLabel:j.valueLabel,userDefined:k1});},parseConditionFromJson:function(j){switch(j.type){case'Simple':return this.parseSimpleConditionFromJson(j);case'Complex':return this.parseComplexConditionFromJson(j);default:throw new c.Exception('unknown condition type "'+j.type+'"');}},parseFilterFromJson:function(j){return this.createFilter({searchTerm:j.searchTerm,rootCondition:this.parseConditionFromJson(j.rootCondition),dataSource:this.parseDataSourceFromJson(j.dataSource)});}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SinaObject.js":function(){sinaDefine(['../core/core'],function(c){"use strict";return c.defineClass({_meta:{properties:{sina:{required:false,getter:true},_private:{required:false,default:function(){return{};}}}},_initClone:function(o){this.sina=o.sina;},_equals:function(o){return this.sina===o.sina;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SortOrder.js":function(){sinaDefine([],function(){"use strict";return{Ascending:'Ascending',Descending:'Descending'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/Suggestion.js":function(){sinaDefine(['../core/core','./ResultSetItem'],function(c,R){"use strict";return R.derive({_meta:{properties:{calculationMode:{required:true},label:{required:true}}}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SuggestionCalculationMode.js":function(){sinaDefine([],function(){"use strict";return{Data:'Data',History:'History'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SuggestionQuery.js":function(){sinaDefine(['../core/core','../core/util','./Query','./SuggestionType','./SuggestionCalculationMode'],function(c,u,Q,S,a){"use strict";return Q.derive({_meta:{properties:{types:{default:function(){return[S.DataSource,S.Object,S.SearchTerm];},setter:true},calculationModes:{default:function(){return[a.Data,a.History];},setter:true}}},requestTimeout:false,_initClone:function(o){this.types=o.types.slice();this.calculationModes=o.calculationModes.slice();},_equals:function(o){return c.equals(this.types,o.types,false)&&c.equals(this.calculationModes,o.calculationModes,false);},_execute:function(q){return this.sina.provider.executeSuggestionQuery(q);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SuggestionResultSet.js":function(){sinaDefine(['../core/core','./ResultSet'],function(c,R){"use strict";return R.derive({});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/SuggestionType.js":function(){sinaDefine([],function(){"use strict";return{SearchTerm:'SearchTerm',SearchTermAndDataSource:'SearchTermAndDataSource',Object:'Object',DataSource:'DataSource'};});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/ConfigFormatter.js":function(){sinaDefine(['../../core/core','./Formatter','../../configurationEngine/configuratorFactory'],function(c,F,a){"use strict";return F.derive({_init:function(t,b){this.type=t;this.configuration=b;},initAsync:function(){return a.createConfiguratorAsync({type:this.type,configuration:this.configuration}).then(function(b){this.configurator=b;}.bind(this));},formatAsync:function(o){return this.configurator.configureAsync(o);},format:function(o){return this.configurator.configure(o);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/ConfigMetadataFormatter.js":function(){sinaDefine(['../../core/core','./ConfigFormatter'],function(c,C){"use strict";var m={type:'object',typeName:'DataSources',properties:[{name:'dataSources',multiple:true,getElementId:function(d){return d.id;},type:{type:'object',typeName:'DataSource',properties:[{name:'label',type:'string'},{name:'labelPlural',type:'string'},{name:'attributesMetadata',multiple:true,getElementId:function(a){return a.id;},type:{type:'object',typeName:'AttributeMetadata',properties:[{name:'label',type:'string'},{name:'format',type:'string'}]}}]}}]};return C.derive({_init:function(a){return C.prototype._init.apply(this,[m,a]);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/ConfigSearchResultSetFormatter.js":function(){sinaDefine(['../../core/core','./ConfigFormatter','../../core/util'],function(c,C,u){"use strict";var a=function(e){if(e.__templateAttributeMapCache){return e.__templateAttributeMapCache;}var m=e.__templateAttributeMapCache={};var f;for(var i=0;i<e.detailAttributes.length;++i){f=e.detailAttributes[i];m[f.id]=f.value;}for(var j=0;j<e.titleAttributes.length;++j){f=e.titleAttributes[j];m[f.id]=f.value;}return m;};var b={type:'object',typeName:'SearchResultSetItemAttribute',properties:[{name:'label',type:'string'},{name:'value',type:'string'},{name:'valueFormatted',type:'string'},{name:'valueHighlighted',type:'string'}]};var d={name:'detailAttributes',multiple:true,getElementId:function(e){return e.id;},createElement:function(e,f){var g=f.objectStack[0].sina;var h=g._createAttributeMetadata({type:g.AttributeType.String,id:e.id,label:'',isSortable:false,isKey:false,matchingStrategy:g.MatchingStrategy.Exact,usage:{Detail:{}}});var n=g._createSearchResultSetItemAttribute({id:e.id,label:'',value:'',valueFormatted:'',valueHighlighted:'',isHighlighted:false,metadata:h});n.parent=f.objectStack[2];return n;},postProcessCreatedElement:function(e){e.valueFormatted=e.valueFormatted||e.value;e.valueHighlighted=e.valueHighlighted||e.valueFormatted;},type:b};var t=c.extend({},d);t.name='titleAttributes';var s={type:'object',typeName:'SearchResultSet',properties:[{name:'items',multiple:true,getElementId:function(i){return i.dataSource.id;},type:{type:'object',typeName:'SearchResultResultSetItem',evaluateTemplate:function(e,i){var f=a(i);return u.evaluateTemplate(e,f);},properties:[{name:'title',type:'string'},t,d,{name:'navigationTargets',multiple:true,getElementId:function(n){return n.label;},createElement:function(n,e){var f=e.objectStack[0].sina;var g=f._createNavigationTarget({label:'',targetUrl:''});g.parent=e.objectStack[2];return g;},type:{type:'object',typeName:'NavigationTarget',properties:[{name:'label',type:'string'},{name:'targetUrl',type:'string'}]}}]}}]};return C.derive({_init:function(e){return C.prototype._init.apply(this,[s,e]);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/Formatter.js":function(){sinaDefine(['../../core/core'],function(c){"use strict";return c.defineClass({initAsync:function(){},format:function(o){return o;},formatAsync:function(o){o=this.format(o);return c.Promise.resolve(o);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/NavtargetsInResultSetFormatter.js":function(){sinaDefine(['../../core/core','./Formatter','../../core/util'],function(c,F,u){"use strict";return F.derive({initAsync:function(){},format:function(r){return r;},formatAsync:function(r){r=u.addPotentialNavTargetsToAttribute(r);return c.Promise.resolve(r);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/RemovePureAdvancedSearchFacetsFormatter.js":function(){sinaDefine(['../../core/core','./Formatter','../../core/util'],function(c,F,u){"use strict";return F.derive({initAsync:function(){},format:function(r){return u.removePureAdvancedSearchFacets(r);},formatAsync:function(r){r=u.removePureAdvancedSearchFacets(r);return c.Promise.resolve(r);}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/formatters/ResultValueFormatter.js":function(){sinaDefine(['../../core/core','./Formatter'],function(c,F){"use strict";return F.derive({initAsync:function(){},format:function(r){return this._formatDataInUI5Form(r);},formatAsync:function(r){r=this._formatDataInUI5Form(r);return c.Promise.resolve(r);},_formatDataInUI5Form:function(r){if(!sap&&!sap.ui&&!sap.ui.core&&!sap.ui.core.format){return r;}var t=this;t.sina=r.sina;r.items.forEach(function(i){if(t.sina.getDataSource(i.dataSource.id)===undefined){return;}if(jQuery.isEmptyObject(t.sina.getDataSource(i.dataSource.id).attributeMetadataMap)){return;}t.attributeMap=t.sina.getDataSource(i.dataSource.id).attributeMetadataMap;i.titleAttributes.forEach(function(a){t._formatHybridAttribute(a);});i.titleDescriptionAttributes.forEach(function(a){t._formatHybridAttribute(a);});i.detailAttributes.forEach(function(a){t._formatHybridAttribute(a);});});return r;},_formatHybridAttribute:function(a){var t=this;if(a.metadata.type&&a.metadata.type===t.sina.AttributeType.Group){for(var i=0;i<a.attributes.length;i++){t._formatHybridAttribute(a.attributes[i].attribute);}}else{t._formatSingleAttribute(a);}},_formatSingleAttribute:function(a){var t=this;a.valueFormatted=t._getFormattedValue(a);if(a.valueHighlighted===undefined||a.valueHighlighted.length===0){a.valueHighlighted=a.valueFormatted;if(a.isHighlighted){a.valueHighlighted='<b>'+a.valueHighlighted+'</b>';}}},_getFormattedValue:function(a){if(this.attributeMap[a.id]===undefined){return a.valueFormatted;}var t=this.sina.AttributeType;var u=undefined;var v=a.value;switch(this.attributeMap[a.id].type){case t.Integer:u=sap.ui.core.format.NumberFormat.getIntegerInstance();break;case t.Double:u=sap.ui.core.format.NumberFormat.getFloatInstance({});break;case t.Timestamp:if(isNaN(Date.parse(a.value))===false){u=sap.ui.core.format.DateFormat.getDateTimeInstance();}break;case t.Date:if(isNaN(Date.parse(a.value))===false){u=sap.ui.core.format.DateFormat.getDateInstance();v=new Date(a.value);}break;case t.Time:if(isNaN(Date.parse("1970/01/01 "+a.value))===false){u=sap.ui.core.format.DateFormat.getTimeInstance();v=new Date("1970/01/01 "+a.value);}break;}if(u&&u.format(v)!==undefined){return u.format(v);}return a.valueFormatted;}});});
},
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/sinaFactory.js":'// Copyright (c) 2009-2017 SAP SE, All Rights Reserved\nwindow.sinaRequire=window.sinaRequire||(window.sap&&window.sap.ui&&window.sap.ui.require)||window.require;window.sinaDefine=window.sinaDefine||(window.sap&&window.sap.ui&&window.sap.ui.define)||window.define;window.sinaLog=window.sinaLog||(window.jQuery&&window.jQuery.sap&&window.jQuery.sap.log)||window.console;var modules=["../core/core","../core/util","./Sina"];var isSapRequire=window.sap&&window.sap.ui&&window.sap.ui.require&&window.sap.ui.require===window.sinaRequire;if(!isSapRequire){modules.push("module");}sinaDefine(modules,function(c,u,S,m){"use strict";return{createAsync:function(a){return this._normalizeConfiguration(a).then(function(a){return new c.Promise(function(r,b){sinaRequire([a.provider],function(p){var d=new p();var s=new S(d);return s._initAsync.apply(s,[a]).then(function(){r(s);},function(e){b(e);});},function(e){sinaLog.error("require error: "+e);b(e);});});});},createByTrialAsync:function(i,a){var b;return Promise.all(c.map(i,this._normalizeConfiguration.bind(this))).then(function(n){b=n;return this._mixinUrlConfiguration(b);}.bind(this)).then(function(){return this._createSinaRecursively(b,a);}.bind(this));},_normalizeConfiguration:function(a){return new c.Promise(function(r,b){if(c.isString(a)&&a.indexOf("/")>=0&&a.indexOf("Provider")<0&&a[0]!=="{"){sinaRequire([a],function(a){this._normalizeConfiguration(a).then(function(a){r(a);});}.bind(this));return;}if(c.isString(a)&&a[0]!=="{"){a=\'{ "provider" : "\'+a+\'"}\';}if(c.isString(a)){a=JSON.parse(a);}if(a.provider.indexOf("/")<0){if(isSapRequire){a.provider=this._calculateProviderUrlSap(a.provider);}else{a.provider=this._calculateProviderUrl(a.provider);}}r(a);}.bind(this));},_calculateProviderUrlSap:function(p){var a="sap/ushell/renderers/fiori2/search/sinaNext/providers/";var s="/Provider";return a+p+s;},_calculateProviderUrl:function(p){var a=m.uri.split("/").slice(0,-1).join("/")+"/../providers/";var s="/Provider";return a+p+s;},_readConfigurationFromUrl:function(){var s=u.getUrlParameter("sinaConfiguration");if(s){return this._normalizeConfiguration(s);}var a=u.getUrlParameter("sinaProvider");if(a){return this._normalizeConfiguration(a);}return c.Promise.resolve();},_createSinaRecursively:function(a,b){b=b||function(){return true;};var d=function(i){if(i>=a.length){return c.Promise.reject(new c.Exception("sina creation by trial failed"));}var e=a[i];return this.createAsync(e).then(function(s){if(b(s)){return s;}return d(i+1);},function(){return d(i+1);});}.bind(this);return d(0);},_mixinUrlConfiguration:function(a){return this._readConfigurationFromUrl().then(function(b){if(!b){return;}var f=false;for(var i=0;i<a.length;++i){var d=a[i];if(d.provider.indexOf("/dummy/Provider")<0&&d.provider!==b.provider){a.splice(i,1);i--;continue;}if(d.provider===b.provider){f=true;this._mergeConfiguration(d,b);}}if(!f){a.splice(0,0,b);}}.bind(this));},_mergeConfiguration:function(a,b){for(var p in b){a[p]=b[p];}}};});\n',
	"sap/ushell/renderers/fiori2/search/sinaNext/sina/util.js":function(){sinaDefine(['./ComparisonOperator'],function(C){"use strict";var m={};m.convertOperator2Wildcards=function(v,o){if(o===C.Eq){return v;}var r=[];var a=v.split(' ');for(var i=0;i<a.length;i++){var t=a[i].trim();if(t.length===0){continue;}switch(o){case C.Co:t='*'+t+'*';break;case C.Bw:t=t+'*';break;case C.Ew:t='*'+t;break;default:break;}r.push(t);}return r.join(' ');};return m;});
},
	"sap/ushell/services/SmartNavigation.js":function(){(function(){"use strict";sap.ui.define(["sap/ushell/services/Container","sap/ushell/services/AppConfiguration","sap/ushell/services/Personalization","sap/ushell/services/URLParsing","sap/ushell/services/CrossApplicationNavigation","sap/ushell/services/_SmartNavigation/complements","sap/ushell/utils"],function(c,a,p,u,C,P,b){c=sap.ushell.Container;u=c.getService("URLParsing");C=c.getService("CrossApplicationNavigation");p=c.getService("Personalization");
function d(o,s,e){return new S(o,s,e,P,a,p,u,C,b);}
d.hasNoAdapter=true;return d;});sap.ushell.services.SmartNavigation=S;
function S(c,p,s,P,a,o,u,C,b){if(!S.instance){Object.defineProperty(S,"instance",{value:Object.create(null,{getLinks:{value:function(A){var d=C.getLinks(A);if(!P.isTrackingEnabled(s,b)){return jQuery.when(d);}var e=a.getCurrentApplication(),f=e.sShellHash,g=e.componentHandle;if(e.componentHandle){g=e.componentHandle.getInstance();}if(!f){jQuery.sap.log.warning("Call to SmartNavigation#getLinks() simply delegated to CrossApplicationNavigation#getLinks()"+" because oAppConfiguration#getCurrentApplication()#sShellHash evaluates to undefined.");return d;}return jQuery.when(d,P.getNavigationOccurrences(f,o,g,u)).then(function(l,n){if(n.length===0){return l;}return P.prepareLinksForSorting(l,n,u).sort(function(L,O){return O.clickCount-L.clickCount;});});}},toExternal:{value:function(A){var _=arguments,d=P.getHashFromOArgs(A.target,u),t=function(){return C.toExternal.apply(C,_);};if(!P.isTrackingEnabled(s,b)){return jQuery.when(t());}var e=a.getCurrentApplication(),f=e.sShellHash,g=e.componentHandle;if(e.componentHandle){g=e.componentHandle.getInstance();}if(!f){jQuery.sap.log.warning("Current shell hash could not be identified. Navigation will not be tracked.",null,"sap.ushell.services.SmartNavigation");return jQuery.when(t());}if(!d){jQuery.sap.log.warning("Destination hash does not conform with the ushell guidelines. Navigation will not be tracked.",null,"sap.ushell.services.SmartNavigation");return jQuery.when(t());}return P.recordNavigationOccurrences(f,d,o,g,u).then(t);}},hrefForExternal:{value:function(){var h=C.hrefForExternal.apply(C,arguments);return h;}},getPrimaryIntent:{value:function(){var d=C.getPrimaryIntent.apply(C,arguments);return d;}},trackNavigation:{value:function(A){if(!P.isTrackingEnabled(s,b)){jQuery.sap.log.debug("Call to SmartNavigation#trackNavigation() ignored"+" because Service is not enabled via Configuration",null,"sap.ushell.services.SmartNavigation");return jQuery.when(null);}var t=A.target,d=a.getCurrentApplication(),f=d.sShellHash,D;if(!f){jQuery.sap.log.warning("Call to SmartNavigation#trackNavigation() simply ignored"+" because oAppConfiguration#getCurrentApplication()#sShellHash evaluates to undefined.");return jQuery.when(null);}D=P.getHashFromOArgs(t,u);if(!D){jQuery.sap.log.warning("Navigation not tracked - no valid destination provided",null,"sap.ushell.services.SmartNavigation");return jQuery.when(null);}jQuery.sap.log.debug("Navigation to "+D+" was tracked out of "+f,null,"sap.ushell.services.SmartNavigation");return P.recordNavigationOccurrences(f,D,o,d.componentHandle.getInstance(),u);}},constructor:{value:S}})});}return S.instance;}
})();
},
	"sap/ushell/services/_SmartNavigation/complements.js":function(){(function(){"use strict";var i=null,c={STATISTIC_COLLECTION_WINDOW_DAYS:90,PERS_CONTAINER_KEY_PREFIX:"ushell.smartnav.",ONE_DAY_IN_MILLISECOND:24*60*60*1000},h=Object.create(null,{"":{value:0|0}});sap.ui.define([],function(){if(!i){i=Object.create(null,{getHashCode:{value:g,configurable:true},getBaseHashPart:{value:b,configurable:true},getHashFromOArgs:{value:d,configurable:true},getPersContainerKey:{value:e,configurable:true},getNavigationOccurrences:{value:f,configurable:true},prepareLinksForSorting:{value:p,configurable:true},mapClickCountsIntoLinkItems:{value:m,configurable:true},recordNavigationOccurrences:{value:r,configurable:true},updateHistoryEntryWithCurrentUsage:{value:u,configurable:true},isTrackingEnabled:{value:a,configurable:true}});Object.keys(c).forEach(function(n){Object.defineProperty(i,n,{value:c[n]});});}return i;});
function a(C,U){return U.isDefined(C)&&U.isDefined(C.config)&&U.isDefined(C.config.isTrackingEnabled)?C.config.isTrackingEnabled:false;}
function g(v){var s=v+"";return h[s]||(function(j){var H=0|0;while(j--){H=(H<<5)-H+(s.charCodeAt(j)|0);H|=0;}h[s]=H;return H;})(s.length);}
function b(U,I){var t=U.parseShellHash(I);if(t&&t.semanticObject&&t.action){return t.semanticObject+"-"+t.action;}throw"Invalid intent `"+I+"`";}
function d(o,U){if(!o){return null;}if(o.shellHash&&U.parseShellHash(o.shellHash)){return b(U,o.shellHash);}if(o.semanticObject&&o.action){return o.semanticObject+"-"+o.action;}return null;}
function e(s){return c.PERS_CONTAINER_KEY_PREFIX+g(s);}
function f(F,P,C){var s=e(F);return P.getContainer(s,{keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.HIGH,clientStorageAllowed:true},C).then(function(o){return o.getItemKeys().map(function(j){var k=o.getItemValue(j);return Object.keys(k.actions).map(function(l){var n=k.actions[l];return{intent:j+"-"+l,clickCount:n.dailyFrequency.reduce(function(q,t){return q+t;},0)};});}).reduce(function(E,j){Array.prototype.push.apply(E,j);return E;},[]);});}
function p(l,n,U){return m(l,n,U);}
function m(l,n,U){var N=Object.create(null);n.forEach(function(o){N[o.intent]=o;});l.forEach(function(L){var B=b(U,L.intent),o=N[B];L.clickCount=o?o.clickCount:0;});return l;}
function r(F,t,P,C,U){var T=U.parseShellHash(t),s=e(F),j=T.semanticObject,o;return P.getContainer(s,{keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.HIGH,clientStorageAllowed:true},C).then(function(k){o=k;return o.getItemValue(j);}).then(function(k){var l,n=T.action;if(!k){k=new S();}l=k.actions[n];if(!l){l=new A();k.actions[n]=l;}u(k);u(l);return k;}).then(function(k){o.setItemValue(j,k);return o.save();});}
function u(H){var n=Date.now(),t=n-H.latestVisit,D=Math.floor(t/c.ONE_DAY_IN_MILLISECOND);while(D--){H.dailyFrequency.unshift(0);if(H.dailyFrequency.length>c.STATISTIC_COLLECTION_WINDOW_DAYS){H.dailyFrequency.pop();}}++H.dailyFrequency[0];H.latestVisit=n;return H;}
function S(){return{actions:{},latestVisit:Date.now(),dailyFrequency:[0]};}
function A(){return{latestVisit:Date.now(),dailyFrequency:[0]};}
})();
}
},"sap/ushell/library-preload"
);
//# sourceMappingURL=library-preload.js.map