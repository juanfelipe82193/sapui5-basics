// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["jquery.sap.global","sap/suite/ui/commons/UnifiedThingInspector","sap/ui/core/format/NumberFormat","sap/viz/ui5/data/FlattenedDataset","sap/ui/core/Locale","sap/ui/model/type/DateTime","sap/ui/model/type/Time","sap/ui/model/type/Date","sap/ui/model/type/Float","sap/ui/model/type/Integer","sap/ui/model/json/JSONModel","sap/ui/core/Control","sap/m/Image","sap/m/Link","sap/m/Text","sap/ui/core/library","sap/ui/layout/VerticalLayout","sap/m/Label","sap/ui/layout/form/SimpleForm","sap/suite/ui/commons/UnifiedThingGroup","sap/ui/ux3/ThingGroup","sap/ui/core/HTML","sap/m/Column","sap/m/ColumnListItem","sap/m/library","sap/m/Table","sap/m/Page","sap/m/VBox","sap/m/Input","sap/m/List","sap/m/StandardListItem","sap/ui/model/FilterOperator","sap/m/DateTimeInput","sap/ui/model/Filter","sap/m/ViewSettingsItem","sap/m/ViewSettingsCustomItem","sap/ui/core/CustomData","sap/m/ViewSettingsDialog","sap/ui/model/Sorter","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/viz/ui5/Area","sap/viz/ui5/Bar","sap/viz/ui5/Bubble","sap/viz/ui5/Column","sap/viz/ui5/StackedColumn","sap/viz/ui5/StackedColumn100","sap/viz/ui5/Donut","sap/viz/ui5/Heatmap","sap/viz/ui5/HorizontalArea","sap/viz/ui5/Line","sap/viz/ui5/Pie","sap/viz/ui5/Scatter","sap/viz/ui5/Treemap","sap/viz/ui5/types/Title","sap/suite/ui/commons/KpiTile","sap/ui/model/odata/ODataModel","sap/suite/ui/commons/FacetOverview","sap/suite/ui/commons/library","sap/ui/layout/Grid","sap/ui/vbm/VBI","sap/ui/layout/HorizontalLayout","sap/ui/core/Icon","sap/m/Carousel","sap/ui/core/IconPool","sap/ushell/resources","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/LinkActionSheet","sap/ushell/services/AppConfiguration","sap/m/ActionSheet","sap/ushell/ui/footerbar/JamDiscussButton","sap/ushell/ui/footerbar/JamShareButton"],function($,U,N,F,L,D,T,c,d,I,J,C,f,g,h,q,V,r,S,s,t,H,u,v,w,x,P,y,z,A,B,E,G,K,M,O,Q,R,W,X,Y,Z,_,a1,b1,c1,d1,e1,f1,g1,h1,i1,j1,k1,l1,m1,n1,o1,p1,q1,r1,s1,t1,u1,v1,w1,x1,y1,z1,A1,B1,C1,D1){"use strict";var E1=w.URLHelper;var F1=w.PlacementType;var G1=q1.FacetOverviewHeight;var H1=w.DateTimeInputType;var I1=w.ListMode;var J1=w.ListSeparators;var K1=w.BackgroundDesign;var L1=w.ListType;var M1=q.TextAlign;var N1={},O1=[],P1={},Q1={},R1="displayFactSheet",S1,T1;S1=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();if(sap.ui.getCore().getConfiguration().getLanguage()==="ZH"){S1=new L("zh_CN");}function U1(a){return a<0;}function V1(a){var b=Number(a).toFixed(0);if(U1(a)){b=Number(b)*-1;}return b;}function W1(a,b){var e,o,i,n;if(!a){return"";}o=new RegExp(N.oDefaultFloatFormat.groupingSeparator,"g");if(b>=0){b=parseInt(b,10);n=N.getFloatInstance({minFractionDigits:b,maxFractionDigits:b},S1);}else{n=N.getFloatInstance({minFractionDigits:0,maxFractionDigits:99},S1);}e=n.format(a);i=e.replace(/[\D]/g,"");if(i&&i.length>6){a=a.replace(o,"");if(V1(a)<1000){return N.getIntegerInstance().format(a);}n=N.getFloatInstance({minFractionDigits:1,maxFractionDigits:1,style:"short"},S1);return n.format(a);}return e;}function X1(){var o="",i,j,p,a,b,m,e,k,n,l,D2;b=this.getElementBinding().sPath.split("/")[1];m=this.getModel();e=this.mBindingInfos.value.parameters;k=this.mBindingInfos.value.parts;for(i=0;i<e.length;i+=1){o=o+e[i].string;}for(j=0;j<k.length;j+=1){p=k[j].path;l="{"+p+"}";a=m.oData[b][p];o=o.replace(l,a);}n=k2(o);if($.isNumeric(n)){D2=this.mBindingInfos.value.parts.filter(function(E2){return(E2.path===p);});n=W1(n,D2[0].type.oFormatOptions.maxFractionDigits);this.setDoubleFontSize(true);}this.setValue(n);this.getElementBinding().detachChange(X1);}var Y1=function(){var a="";if(T1.getName()&&T1.getDescription()){a=T1.getName()+", "+T1.getDescription();}else if(T1.getName()&&!T1.getDescription()){a=T1.getName();}else if(!T1.getName()&&T1.getDescription()){a=T1.getDescription();}return a;};var Z1=function(a){var b,e,i;b=a.slice(1).split("/");e="/";for(i=0;i<b.length;i+=1){if((b[i].indexOf("(")>0)&&(b[i].indexOf("sid(")<0)){break;}else{e+=b[i]+"/";}}return e;};var $1=function(a,m){var e,b,i,n;b=a.slice(m.sServiceUrl.length+1);if(b.indexOf("/")>=0){i=b.split("/");n=i[i.length];e=i[i.length-1];if(e.indexOf("(")>=0){e=e.slice(e.indexOf("("));}e=this.getNavEntitySet(e,n,m.getMetadata());}else if(b.indexOf("(")>=0){e=b.slice(0,b.indexOf("("));}else if(b.indexOf("?")>=0){e=b.slice(0,b.indexOf("?"));}else{e=b;}return e;};var _1=function(a,m){var e,k="",o,b;e=a.slice(m.sServiceUrl.length+1);if(e.indexOf("(")>=0){k=e.slice(e.indexOf("(")+1,e.indexOf(")"));if(k.indexOf("=")<=0){o=m.getServiceMetadata();b=c2($1(a,m),o);k=a2(b,o)+"="+k;}}return k;};var a2=function(e,m){var i,j,a;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.namespace===e.slice(0,e.lastIndexOf("."))){for(j=0;j<a.entityType.length;j+=1){if(a.entityType[j].name===e.slice(e.lastIndexOf(".")+1)){return a.entityType[j].key.propertyRef[0].name;}}}}};var b2=function(e,m){var i,j,a,b;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){b=a.entityContainer[0].entitySet;for(j=b.length-1;j>=0;j-=1){if(b[j].entityType===e){return b[j].name;}}}}};var c2=function(e,m,b){var i,j,a,k,l;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){k=a.entityContainer[0].entitySet;for(j=k.length-1;j>=0;j-=1){if(k[j].name===e){if(b){l=k[j].entityType.slice(a.namespace.length+1);}else{l=k[j].entityType;}return l;}}}}};var d2=function(e,n,m){var i,j,k,a,b,l,o;a=e.split(".");for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];l=a[0];if(a.length>2){for(k=1;k<a.length-1;k+=1){l+="."+a[k];}}if(b.namespace===l){for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===a[a.length-1]){if(b.entityType[j].navigationProperty){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){o=b.entityType[j].navigationProperty[k];return{name:o.relationship,toRole:o.toRole};}}}}}}}};var e2=function(e,n,m){var a,b,o,i,l,j,p,k;a=c2(e,m);if(n.charAt(0)==="@"){if(N1.termDefinitions&&N1.termDefinitions[n]){b=N1.termDefinitions[n];if(b.indexOf("Collection")>=0){b=b.slice(b.indexOf("(")+1,b.indexOf(")"));}return b2(b,m);}}else{o=d2(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){l=m.dataServices.schema[i];if(l.entityContainer&&l.entityContainer[0].associationSet){for(j=l.entityContainer[0].associationSet.length-1;j>=0;j-=1){p=l.entityContainer[0].associationSet[j];if(p.association===o.name){for(k=0;k<p.end.length;k+=1){if(p.end[k].role===o.toRole){return p.end[k].entitySet;}}}}}}}}};var f2=function(e,n,m){var i,j,k,a,o,b,l,p,D2;a=c2(e,m);p=a.split(".")[a.split(".").length-1];o=d2(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];for(j=0;j<b.entityType.length&&!D2;j+=1){if(b.entityType[j].name===p){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){D2=b.entityType[j].navigationProperty[k].toRole;break;}}}}for(j=b.association.length-1;j>=0;j-=1){l=b.association[j];if(b.namespace+"."+l.name===o.name){for(k=0;k<l.end.length;k+=1){if(l.end[k].role===D2){return l.end[k].multiplicity;}}}}}}else{jQuery.sap.log.error("\""+n+"\" wasn't found in the metadata document. Check whether the corresponding search connector is active.");return 0;}};var g2=function(e,m){var o,a,b,i;o={};if(N1.expand){if(N1.expand[c2(e,m)]){a=N1.expand[c2(e,m)];b=[];for(i in a){if(a.hasOwnProperty(i)){b.push(a[i]);}}o.expand=b.join(", ");}}return o;};var h2=function(a,e,o){var m,b,j,k,l,n;for(m=o.dataServices.schema.length-1;m>=0;m-=1){b=o.dataServices.schema[m];for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===e.split(".")[e.split(".").length-1]){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===a){for(l=0;l<b.association.length;l+=1){for(n=b.association[l].end.length-1;n>=0;n-=1){if(b.association[l].end[n].role===b.entityType[j].navigationProperty[k].toRole){return(b.association[l].end[n].type);}}}}}}}}};var i2=function(p,o){var b={},j;b.parts=[];b.parameters=[];for(j=p.length-1;j>=0;j-=1){if(p[j].Type==="Path"){if(p[j].EdmType){switch(p[j].EdmType){case"Edm.DateTimeOffset":case"Edm.DateTime":b.parts.push({path:p[j].Value,type:new D({"UTC":true})});break;case"Edm.Time":b.parts.push({path:p[j].Value+"/ms",type:new T({source:{pattern:"timestamp"},UTC:true})});break;case"Edm.Date":b.parts.push({path:p[j].Value,type:new c({"UTC":true})});break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":b.parts.push({path:p[j].Value,type:new d()});break;case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":b.parts.push({path:p[j].Value,type:new I()});break;default:b.parts.push({path:p[j].Value});break;}}else{b.parts.push({path:p[j].Value});}}else if(p[j].Type==="String"){b.parameters.unshift({string:p[j].Value});}}b.formatter=function(){var a="",e,k,l,i,m="",n=false,D2=0,E2=0;if(arguments&&arguments.length>=1){e=arguments.length-1;l="";i=0;if(p&&p[0]&&(p[0].Type==="String")&&(p[0].Value.substr(0,1)==="#")){n=true;}for(k=0;k<p.length;k+=1){if(p[k].Type==="Path"){l=arguments[e];if(!l||(l.length===0)){if(a.length>i){if(a.indexOf("(")>i){a=a.substr(0,i);}else{a=a.substr(0,i);l=a;}}}else{if(n){l=encodeURIComponent(l);}a+=l;D2+=1;}e-=1;i=a.length;}else{i=a.length;m=p[k].Value;if(m.indexOf("(")!==-1){E2+=1;}if((l&&l.length>0)||(m.indexOf("(")!==-1)||(m&&(m.substr(0,1)==="#"))){a+=p[k].Value;}else{m="";}}}if(o){a=o(a);}a=a.trim();if((D2===1)&&(E2>0)&&(a.substr(0,1)==="(")&&(a.substr(-1)===")")){a=a.substr(1,a.length-2);}return a.trim();}};return b;};var j2=function(o,p){var k;for(k in o){if(o.hasOwnProperty(k)){if(k==="__metadata"){continue;}else if(k===p){return o[k];}else if(typeof o[k]==="object"){return j2(o[k],p);}}}};var k2=function(a){var l,n,b,e={},i;l=a.lastIndexOf("/");n=a.slice(0,l);b=a.slice(l+1);if(!Q1[a]){e=new J();e.loadData(n,null,false);Q1[a]=e.getData();}else{e=Q1[a];}if(Q1[a]&&Q1[a].d){if(!Q1[a].d[b]){i=j2(Q1[a].d,b);}else{i=Q1[a].d[b];}}return i;};var l2=function(o,e,m,a){var b,i,n,j,k,l,p,D2;b=new C();i=n2(o.Value,o.EdmType,e);if(o.Value&&o.Value["com.sap.vocabularies.UI.v1.IsImageURL"]){b=new f({height:"50px"});if(i.BindingInfo){b.bindProperty("src",i.BindingInfo);}else{b.setProperty("src",i.String);}}else{if(o.UrlRef||o.Url||(o.Target&&o.Target.Path)){b=new g({wrapping:true});}else{b=new h();if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){b.setTextAlign(M1.End);}}b.addStyleClass("sapFactsheetUtiDataField");if(i.BindingInfo){b.bindProperty("text",i.BindingInfo);}else{b.setProperty("text",i.String);}}if((o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigation")&&m){n=o.Target.Path;if(N1[e][n.slice(1)]){if(n.charAt(0)==="@"){if(n.indexOf("/")<0){j=N1[e][n.slice(1)].UrlRef;}else{j=N1[e][n.slice(1,n.indexOf("/"))].UrlRef;}b.bindProperty("href",o2(j));}}b.attachPress(function(E2){return false;});}if(o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url.String){b.setHref(o.Url.String);}else{b.bindProperty("href",o2(o.Url));k=new h({wrapping:true});if(i.BindingInfo){k.bindProperty("text",jQuery.extend({},i.BindingInfo));}else{k.setProperty("text",i.String);}b.setVisible(false);l=new V();l.addContent(b);l.addContent(k);if(!O1[O1.indexOf(a)].Links){O1[O1.indexOf(a)].Links=[];}if(o.Url.Apply){p=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));D2=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("?"));}O1[O1.indexOf(a)].Links.push({sSemanticObject:p,sIntend:D2,oVL:l});}}if(l){return l;}return b;};var m2=function(o,l,p,b){var a,e="",i="",m,j,k,n;a=new r(l);a.addStyleClass("sapFactsheetUtiLabel");if(b){e=":";}if(o.Label){if(o.Label.String){a.setText(o.Label.String.trim()+e);a.setTooltip(o.Label.String.trim());}else if(o.Label.Path){a.bindProperty("text",o.Label.Path);a.bindProperty("tooltip",o.Label.Path);}}else if(o.Value){if(o.Value.Path&&p){m=p[o.Value.Path];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}}else if(o.Value.Apply&&(o.Value.Apply.Name==="odata.concat")){for(k in o.Value.Apply.Parameters){if(o.Value.Apply.Parameters.hasOwnProperty(k)){n=o.Value.Apply.Parameters[k];if(n.Type==="Path"){m=p[n.Value];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}break;}}}}a.setText(i+e);a.setTooltip(i);}return a;};var n2=function(o,e,a){var b={},p=[],k=[],l=[],i,j,m,n,D2,E2,F2,G2,H2,I2,J2,K2;var L2=function(a,M2,N2){var m,O2={};m=N1.propertyAnnotations[a];if(m&&m[M2]&&m[M2][N2]){if(m[M2][N2].Path){O2.Type="Path";O2.Value=m[M2][N2].Path;}else{O2.Type="String";O2.Value=m[M2][N2].String;}}return O2;};if(!o){return false;}if(o.Apply){if(o.Apply.Name==="odata.concat"){if(a&&N1.propertyAnnotations&&N1.propertyAnnotations[a]){n=o.Apply.Parameters;for(j=0;j<n.length;j+=1){p.push(n[j]);if(n[j].Type==="Path"){m=L2(a,n[j].Value,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(m)){p.push({Type:"String",Value:" "});p.push({Type:m.Type,Value:m.Value});}m=L2(a,n[j].Value,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(m)){p.push({Type:"String",Value:" "});p.push({Type:m.Type,Value:m.Value});}}}b.BindingInfo=i2(p);}else{b.BindingInfo=i2(o.Apply.Parameters);}}}else if(o.Path){if(o.Path.charAt(0)==="@"){D2=N1[a][o.Path.slice(1,o.Path.indexOf("/"))].UrlRef;E2=o.Path.slice(o.Path.indexOf("/")+1);if(D2&&D2.Apply){F2=D2.Apply.Parameters;switch(D2.Apply.Name){case"odata.concat":k=F2;k.push({Type:"String",Value:"/"+E2});break;case"odata.fillUriTemplate":G2=F2[0].Value.split("{");for(i in G2){if(G2.hasOwnProperty(i)){if(G2[i].indexOf("}")<0){k.push({Type:"String",Value:G2[i]});}else{H2=G2[i].split("}");for(j=1;j<F2.length;j+=1){if(F2[j].Name===H2[0]){I2=F2[j].Value;if(I2.Path){k.push({Type:"Path",Value:I2.Path});}else if(I2.Apply&&I2.Apply.Name&&(I2.Apply.Name.toLowerCase()==="odata.uriencode")){J2=I2.Apply.Parameters[0];k.push({Type:J2.Type,Value:encodeURIComponent(J2.Value)});k.push({Type:"String",Value:"{"+encodeURIComponent(J2.Value)+"}"});}}}k.push({Type:"String",Value:H2[1]});}}}k.push({Type:"String",Value:"/"+E2});b.fnChange=X1;break;default:break;}b.BindingInfo=i2(k,k2);}else if(D2&&D2.Path){k.push({Type:"Path",Value:D2.Path},{Type:"String",Value:"/"+E2});b.BindingInfo=i2(k,k2);}else if(D2&&D2.String){b.String=k2(D2.String+"/"+E2);}}else{b.BindingInfo={};switch(e){case"Edm.DateTimeOffset":case"Edm.DateTime":b.BindingInfo={path:o.Path,type:new D({"UTC":true})};break;case"Edm.Time":b.BindingInfo={path:o.Path+"/ms",type:new T({source:{pattern:"timestamp"},UTC:true})};break;case"Edm.Date":b.BindingInfo={path:o.Path,type:new c({"UTC":true})};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":if((e==="Edm.Decimal")||(e==="Edm.Double")||(e==="Edm.Single")){K2=new d();}else if((e==="Edm.Int16")||(e==="Edm.Int32")||(e==="Edm.Int64")){K2=new I();}if(N1.propertyAnnotations){l.push({Type:"Path",Value:o.Path,EdmType:e},{Type:"String",Value:" "});m=L2(a,o.Path,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(m)){l.push({Type:m.Type,Value:m.Value});}m=L2(a,o.Path,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(m)){l.push({Type:m.Type,Value:m.Value});}b.BindingInfo=i2(l);}else{b.BindingInfo={path:o.Path,type:K2};}break;default:b.BindingInfo={path:o.Path};break;}}}else if(o.String){b.String=o.String;}return b;};var o2=function(o){var a=[],p,b,j,e,i={},k,l,m;if(o&&o.Apply){p=o.Apply.Parameters;switch(o.Apply.Name){case"odata.fillUriTemplate":p[0].Value=p[0].Value.trim();b=p[0].Value.split("{");for(j=0;j<b.length;j+=1){if(b[j].indexOf("}")<0){a.push({"Value":b[j],"Type":"String"});}else{e=b[j].split("}");i={};i.Value=e[0];i.Type="Path";for(j=1;j<p.length;j+=1){if(p[j].Name===i.Value){k=p[j].Value;if(k.Path){i.Value=k.Path;}else if(k.Apply&&k.Apply.Name&&k.Apply.Name.toLowerCase()==="odata.uriencode"){i.Value=k.Apply.Parameters[0].Value;}break;}}a.push(i);a.push({"Value":e[1],"Type":"String"});}}l=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(l&&l.url){m=jQuery.sap.getUriParameters(l.url).get("sap-system");if(m){a.push({Type:"String",Value:"&sap-system="+m});}}break;default:break;}}return i2(a);};var p2=function(o){var a=M1.Begin;if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){a=M1.End;}return a;};var q2=function(m,e,a,o,b,k){var i,j=0,l=0,n=0,p=0,D2,E2,F2,G2,H2,I2;if(!b){b=m.getServiceMetadata();}if(!a){a=[];}D2=c2(e,b);I2=new S({labelMinWidth:150,maxContainerCols:2});E2=(N1.propertyExtensions)?N1.propertyExtensions[D2]:[];if(o&&o.High){l=o.High;}if(o&&o.Medium){n=o.Medium;}if(o&&o.Low){p=o.Low;}for(i=0;i<a.length;i+=1){F2=x2(a[i]);if(o&&(F2==="High")){if(l){l-=1;}else{continue;}}else if(o&&(F2==="Medium")){if(n){n-=1;}else{continue;}}else if(o&&(F2==="Low")){if(p){p-=1;}else{continue;}}if(o&&o.Total&&(j>=o.Total)){break;}j+=1;G2=new C().setModel(m);H2=m2(a[i],{textAlign:M1.End},E2,false);H2.addStyleClass("sapFactsheetUtiFormPadding");G2=l2(a[i],D2,b,k);G2.addStyleClass("sapFactsheetUtiFormPadding");if(G2.setTextAlign){G2.setTextAlign(M1.Begin);}I2.addContent(H2);I2.addContent(G2);}I2.addStyleClass("sapFactsheetUtiFormLayout");return I2;};var r2=function(m,e,o,b,a){var j="",k=[],i,l,n,p,D2,E2,F2,G2,H2,I2,J2,K2,L2,M2,N2;l=m.getServiceMetadata();switch(o.RecordType){case"com.sap.vocabularies.UI.v1.ReferenceFacet":n=new s();if(o.Label&&o.Label.String){n.setTitle(o.Label.String);}p=o.Target.AnnotationPath;D2=p.substring(p.lastIndexOf("@")+1);p=p.substring(0,p.lastIndexOf("@")-1);if(p){j=f2(e,p,l);}E2=D2.split("#");switch(E2[0]){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":case"com.sap.vocabularies.UI.v1.Badge":case"com.sap.vocabularies.UI.v1.Identification":if(p){F2=e2(e,p,l);L2=c2(F2,l);}else{L2=c2(e,l);}if(E2[0]==="com.sap.vocabularies.UI.v1.Chart"){D2="com.sap.vocabularies.UI.v1.LineItem";}M2=N1[L2][D2];if(N1.propertyExtensions){N2=N1.propertyExtensions[L2];}if(j==="*"&&E2[0]!=="com.sap.vocabularies.UI.v1.Identification"){G2=t2(m,M2,L2,l,b+"/"+p,o,N2,a);n.setContent(G2);}if(E2[0]==="com.sap.vocabularies.UI.v1.Identification"){H2=N1[L2]["com.sap.vocabularies.UI.v1.Identification"];I2=new V({width:"100%"}).setModel(m);if(p){I2.addContent(q2(m,F2,H2,null,null,a)).addStyleClass("sapFactsheetUtiPanel");I2.bindElement(b+"/"+p);}else{I2.addContent(q2(m,e,H2,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}n.setContent(I2);}break;case"com.sap.vocabularies.UI.v1.StatusInfo":if(p){F2=e2(e,p,l);J2=N1[c2(F2,l)]["com.sap.vocabularies.UI.v1.StatusInfo"];n.setContent(q2(m,F2,J2,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p));}else{J2=N1[c2(e,l)]["com.sap.vocabularies.UI.v1.StatusInfo"];n.setContent(q2(m,e,J2,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}break;case"com.sap.vocabularies.UI.v1.FieldGroup":K2=N1[c2(e,l)][D2];if(K2){if(!n.getTitle()||(n.getTitle()==="")){if(K2.Label){if(K2.Label.String){n.setTitle(K2.Label.String);}else if(K2.Label.Path){n.bindProperty("title",K2.Label.Path);}}}if(p){F2=e2(e,p,l);n.setContent(q2(m,F2,K2.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p));}else{n.setContent(q2(m,e,K2.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}}break;default:break;}return n;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":n=new t({title:o.Label.String});n.setContent(s2(o));return n;case"com.sap.vocabularies.UI.v1.CollectionFacet":for(i=0;i<o.Facets.length;i+=1){k.push(r2(m,e,o.Facets[i],b,a));}return k;default:break;}};var s2=function(o){var i,a,b;switch(o.UrlContentType.String){case"image/png":case"image/jpeg":case"image/gif":i=new f({width:"100%"});if(o.Url.String){i.setSrc(o.Url.String);}return i;default:a=new H();if(o.Url.String){a.setContent("<iframe src = '"+o.Url.String+"' width='100%' height='250px' frameborder='0'></iframe>");}else if(o.Url.Path){a.bindProperty("content",{path:o.Url.Path,formatter:function(){b="<iframe src = '"+o.Url.Path+"' width='100%' height='250px' frameborder='0'></iframe>";return b;}});}return a;}};var t2=function(m,a,e,o,b,l,n,D2){var E2=[],F2=[],G2=[],H2=[],I2=[],J2=[],K2=false,i,k,L2,M2,N2,O2,P2,Q2,R2,S2,T2,U2,V2,W2,X2,Y2,Z2,$2,_2,a3,b3;_2=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(!o){o=m.getServiceMetadata();}L2=(N1.propertyExtensions)?N1.propertyExtensions[e]:[];M2=6;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){M2=5;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){M2=4;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){M2=3;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){M2=2;}N2=0;O2=0;for(i=0;i<a.length;i+=1){P2=x2(a[i]);if(P2==="High"){N2+=1;}}if(M2>N2){O2=M2-N2;}else if(M2<N2){N2=M2;}H2.push(new u({visible:false}));G2.push(new h().bindText("__metadata/uri"));for(i=0;i<a.length;i+=1){b3="";S2=new C();P2=x2(a[i]);S2=l2(a[i],e,o,D2);Q2=m2(a[i],null,L2);if(a[i].Value.Path){Y2=a[i].Value.Path;if(n&&n[Y2]&&n[Y2]["http://www.sap.com/Protocols/SAPData"]&&n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable){Q2.data("IsSortable",n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable);if(n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable==="true"){K2=true;}}else{Q2.data("IsSortable","true");K2=true;}if(n&&n[Y2]&&n[Y2]["http://www.sap.com/Protocols/SAPData"]&&n[Y2]["http://www.sap.com/Protocols/SAPData"].filterable){Q2.data("IsFilterable",n[Y2]["http://www.sap.com/Protocols/SAPData"].filterable);if(n[Y2]["http://www.sap.com/Protocols/SAPData"].filterable==="true"){K2=true;}}else{Q2.data("IsFilterable","true");K2=true;}}else{a3=true;for(k=0;k<a[i].Value.Apply.Parameters.length;k+=1){if(a[i].Value.Apply.Parameters[k].Type==="Path"){Y2=a[i].Value.Apply.Parameters[k].Value;if(n[Y2]&&n[Y2]["http://www.sap.com/Protocols/SAPData"]&&n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable){if(n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable==="false"){a3=false;b3="";break;}}if(b3){b3+=";";}b3+=Y2;}}Y2=b3;if(a3===false){Q2.data("IsSortable","false");}else{Q2.data("IsSortable","true");K2=true;}Q2.data("IsFilterable","false");}if(a[i].EdmType){Q2.data("EdmType",a[i].EdmType);}Q2.data("ColumnName",Y2);E2.push(Q2);F2.push(S2);if(P2==="High"){if(N2>0){R2=true;N2-=1;}else{R2=false;}}else if(P2==="Medium"){if(O2>0){R2=true;O2-=1;}else{R2=false;}}else{R2=false;}H2.push(new u({header:Q2,hAlign:p2(a[i]),visible:R2}));G2.push(S2);}T2=new v({type:L1.Navigation,unread:false,cells:G2});if(l){U2=l.Label.String;}T2.attachPress({aColumns:a,aLabels:E2,aControls:F2,sTitle:U2},function(j,p){var i,i3,j3,Q2,k3,l3,m3;i3=j.getSource().getCells()[0].getText().substr(j.getSource().getCells()[0].getText().lastIndexOf("/"));j3=new x({backgroundDesign:K1.Transparent,showSeparators:J1.None,columns:[new u({hAlign:M1.End}),new u()]});j3.addStyleClass("sapFactsheetUtiPanel");j3.addStyleClass("sapFactsheetUtiTilePadding");j3.addStyleClass("sapFactsheetUtiTableNoTopBorder");j3.bindElement(i3);for(i=0;i<a.length;i+=1){Q2=E2[i].clone();Q2.setText(Q2.getText()+":");m3=F2[i].clone();Q2.setLabelFor(m3);j3.addItem(new v({cells:[Q2,m3]}));}k3=new s({content:j3,title:U2,description:Y1()});l3=new P({title:T1.getTitle(),showNavButton:true,content:[k3]});T1.navigateToPage(l3,true);T1.attachAfterNavigate(j3,function(j){if(j.getParameters().getParameters().toId.indexOf("__page")>=0){var n3;n3=j3.getItems();if(n3.length>0&&O1.indexOf(D2)>=0){O1[O1.indexOf(D2)].bLoaded=true;O1[O1.indexOf(D2)].bProcessed=false;O1[O1.indexOf(D2)].bIsTable=true;O1[O1.indexOf(D2)].oTableItems=n3;B2(O1.indexOf(D2));}}});});V2=new x({growing:true,columns:H2});V2.setModel(m);V2.bindItems({path:b,template:T2});var c3=new y({items:[new z({placeholder:_2.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,i3,j3,k3,i;p=j.getSource().getParent().getParent().getId();i3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));j3=i3.getFilterItems();for(i=0;i<j3.length;i+=1){if(j3[i]instanceof O&&j3[i].getKey()===this.oParent.data("ColumnName")){k3=j3[i];break;}}if(k3){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){k3.setSelected(false);k3.setFilterCount(0);}else{k3.setSelected(true);k3.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});var d3=new y({items:[new A({mode:I1.SingleSelectLeft,includeItemInSelection:true,items:[new B({title:_2.getText("USHELL_FACTSHEET_GREATER_THEN")}).data("FilterOperator",E.GT),new B({title:_2.getText("USHELL_FACTSHEET_EQUALS")}).data("FilterOperator",E.EQ),new B({title:_2.getText("USHELL_FACTSHEET_LESS_THEN")}).data("FilterOperator",E.LT)]}),new z({placeholder:_2.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,i3,j3,k3,i;p=j.getSource().getParent().getParent().getId();i3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));j3=i3.getFilterItems();for(i=0;i<j3.length;i+=1){if((j3[i]instanceof O)&&(j3[i].getKey()===this.oParent.data("ColumnName"))){k3=j3[i];break;}}if(k3){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){k3.setSelected(false);k3.setFilterCount(0);}else{k3.setSelected(true);k3.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});new y({items:[new A({mode:I1.SingleSelectLeft,includeItemInSelection:true,items:[new B({title:_2.getText("USHELL_FACTSHEET_AFTER")}).data("FilterOperator",E.GT),new B({title:_2.getText("USHELL_FACTSHEET_AT")}).data("FilterOperator",E.EQ),new B({title:_2.getText("USHELL_FACTSHEET_BEFORE")}).data("FilterOperator",E.LT)]}),new G({type:H1.Date,valueFormat:new D({pattern:"yyyy/MM/dd HH:mm:ss UTC+00:00"}).getOutputPattern(),placeholder:_2.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,i3,j3,k3,i;p=j.getSource().getParent().getParent().getId();i3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));j3=i3.getFilterItems();for(i=0;i<j3.length;i+=1){if((j3[i]instanceof O)&&(j3[i].getKey()===this.oParent.data("ColumnName"))){k3=j3[i];break;}}if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){k3.setSelected(false);k3.setFilterCount(0);}else{k3.setSelected(true);k3.setFilterCount(1);}}}).addStyleClass("sapFactsheetUtiFilterInput")]});var e3=function(S2){var j=[],p=S2.getItems(),i,i3,j3;if(p[0].getParent().data("EdmType")==="Edm.String"&&p[0].getValue()){j.push(new K(p[0].getParent().data("ColumnName"),E.Contains,p[0].getValue()));}else if(p[0].getParent().data("EdmType")==="Edm.Decimal"&&p[1].getValue()){for(i=0;i<p[0].getItems().length;i+=1){if(p[0].getItems()[i].getSelected()===true){i3=p[0].getItems()[i].data("FilterOperator");break;}}j3=p[1].getValue();for(i=j3.length-1;i>0;i-=1){if(j3[i]===","){j3=j3.replace(j3[i],".");break;}}j.push(new K(p[1].getParent().data("ColumnName"),i3,j3));}else if(p[0].getParent().data("EdmType")==="Edm.Date"&&p[1].getValue()){for(i=0;i<p[0].getItems().length;i+=1){if(p[0].getItems()[i].getSelected()===true){i3=p[0].getItems()[i].data("FilterOperator");break;}}j.push(new K(p[1].getParent().data("ColumnName"),i3,p[1].getValue()));}else{j.push(new K(p[0].getParent().data("ColumnName"),E.EQ,p[0].getValue()));}return j;};var f3=function(p){var i3=p.getSource(),j3=i3.getFilterItems(),i,j,k3;for(i=0;i<j3.length;i+=1){if(j3[i]&&j3[i]instanceof O){j3[i].setSelected(false);j3[i].setFilterCount(0);k3=j3[i].getCustomControl().getItems();for(j=0;j<k3.length;j+=1){if((k3[j]instanceof z)||(k3[j]instanceof G)){k3[j].setValue("");}if((k3[j]instanceof A)&&(k3[j].getSelectedItem()!==null)){k3[j].removeSelections();}}}}};var g3=f3;for(i=0;i<H2.length;i+=1){if(H2[i+1]){Q2=E2[i].clone();if(Q2.getText()&&(Q2.data("IsSortable")==="true")&&H2[i+1].getVisible()){W2=new M({text:Q2.getText(),key:Q2.data("ColumnName")});if(i===0){W2.setSelected(true);}W2.Sort=Q2.Sort;I2.push(W2);}if(Q2.getText()&&(Q2.data("IsFilterable")==="true")){if(Q2.data("EdmType")==="Edm.String"){$2=c3.clone().data("ColumnName",Q2.data("ColumnName")).data("EdmType",Q2.data("EdmType"));}else if(Q2.data("EdmType")==="Edm.Decimal"){$2=d3.clone().data("ColumnName",Q2.data("ColumnName")).data("EdmType",Q2.data("EdmType"));}if((Q2.data("EdmType")==="Edm.String")||(Q2.data("EdmType")==="Edm.Decimal")){Z2=new O({key:Q2.data("ColumnName"),text:Q2.getText(),customControl:$2,customData:new Q({key:"callback",value:e3})});J2.push(Z2);}}}}X2=new R({sortItems:I2,filterItems:J2,cancel:g3,resetFilters:f3,confirm:function(j){var i3=[],j3=[],k3=[],l3=[],i,p,m3,n3,o3,p3,q3;m3=j.getParameters();n3=V2.getBinding("items");if(m3.sortItem){o3=m3.sortItem.getKey();p3=m3.sortDescending;if(o3.indexOf(";")>0){j3=o3.split(";");for(i=0;i<j3.length;i+=1){i3.push(new W(j3[i],p3));}}else if(o3){i3.push(new W(o3,p3));}n3.sort(i3);}p=m3;for(i=0;i<p.filterItems.length;i+=1){if(p.filterItems[i]instanceof O){q3=p.filterItems[i].getCustomData()[0].getValue();k3=q3.apply(this,[p.filterItems[i].getCustomControl()]);if(k3){if(!Array.isArray(k3)){k3=[k3];}l3=l3.concat(k3);}}else if(p.filterItems[i]instanceof M){k3=p.filterItems[i].getCustomData()[0].getValue();if(k3){if(!Array.isArray(k3)){k3=[k3];}l3=l3.concat(k3);}}}n3.filter(l3);}});if(K2===true&&(I2.length>0||J2.length>0)){V2.setHeaderToolbar(new X({content:[new r(),new Y(),new Z({icon:"sap-icon://drop-down-list",press:function(){X2.open();},tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("P13NDIALOG_VIEW_SETTINGS")})]}));}V2.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));var h3=(function(D2){return function(j){var p=this.getItems();if(p.length===0){this.setNoDataText(_2.getText("FACETOVERVIEW_NO_CONTENT_TEXT"));}else{this.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));}if(p.length>0&&O1.indexOf(D2)>=0){O1[O1.indexOf(D2)].bLoaded=true;O1[O1.indexOf(D2)].bProcessed=false;O1[O1.indexOf(D2)].bIsTable=true;O1[O1.indexOf(D2)].oTableItems=p;}B2(O1.indexOf(D2));};}(D2));V2.attachUpdateFinished(h3);return V2;};var u2=function(a,o,b,e){var i;switch(a){case"com.sap.vocabularies.UI.v1.ChartType/Area":i=new _({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bar":i=new a1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bubble":i=new b1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Column":i=new c1({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":i=new d1({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":i=new e1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Donut":i=new f1({});break;case"com.sap.vocabularies.UI.v1.ChartType/HeatMap":i=new g1({});break;case"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":i=new h1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Line":i=new i1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Pie":i=new j1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Scatter":i=new k1({});break;case"com.sap.vocabularies.UI.v1.ChartType/TreeMap":i=new l1({});break;case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked100":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/Radar":case"com.sap.vocabularies.UI.v1.ChartType/Waterfall":break;}if(i){if(o&&o.String){i.setTitle(new m1({visible:true,text:o.String}));}if(b&&b.String){i.setTooltip(b.String);}i.setWidth("100%");i.setHeight("17rem");i.setDataset(e);}else{i=new h({});}return i;};var v2=function(i){var a;i=i||1;if(jQuery.device.is.phone){a=(7*i)+"rem";}else{a=(11*i-1)+"rem";}return a;};var w2=function(a){var b=0,e=0,j=0,i,o;for(i=0;i<a.length;i+=1){o=x2(a[i]);if(o){switch(o){case"High":b+=1;break;case"Medium":e+=1;break;case"Low":j+=1;break;}}}return{High:b,Medium:e,Low:j};};var x2=function(o){var e="";if(o.Importance){e=o.Importance.EnumMember;}else if(o["com.sap.vocabularies.UI.v1.Importance"]){e=o["com.sap.vocabularies.UI.v1.Importance"].EnumMember;}return e.substr(e.indexOf("/")+1);};var y2=function(m,a,e,b){var i=false,o,j,k,l;o=new n1({doubleFontSize:false});if(a.ValueFormat){j=a.ValueFormat.NumberOfFractionalDigits.Int;}if(a.Title&&a.Title.String){o.setDescription(a.Title.String);}else if(a.Title&&a.Title.Path){o.bindProperty("description",{path:a.Title.Path});}if(a.Value&&a.Value.String){o.setValue(a.Value.String);}else if(a.Value&&a.Value.Path){k=n2(a.Value,a.Value.EdmType,e);if(k.fnChange){o.setModel(m);o.bindElement(b);o.getElementBinding().attachChange(k.fnChange,o);}if(k.String){if($.isNumeric(k.String)){i=true;o.setValue(W1(k.String,j));}else{o.setValue(k.String);}}else if(k.BindingInfo){l=k.BindingInfo;if(l.parts&&l.parts.length===2){o.bindProperty("valueUnit",l.parts[0]);l.parts[1].type=undefined;l.parts[1].formatter=(function(){return function(n){return W1(n,j);};}(j));o.bindProperty("value",l.parts[1]);}else if(l.parts&&l.parts.length===1){l.parts[0].type=undefined;l.parts[0].formatter=(function(){return function(n){return W1(n,j);};}(j));o.bindProperty("value",l);}else{o.bindProperty("value",l);}}}if(a.Value.EdmType==="Edm.Decimal"||a.Value.EdmType==="Edm.Double"||a.Value.EdmType==="Edm.Single"||a.Value.EdmType==="Edm.Int16"||a.Value.EdmType==="Edm.Int32"||a.Value.EdmType==="Edm.Int64"||i===true){o.setDoubleFontSize(true);}return o;};var z2=function(m){var a=[],b=[],e,i,k;var j=function(o){if(l(o)===false){if(Array.isArray(o)){for(i=0;i<o.length;i+=1){l(o[i]);}}else if(typeof o==="object"){for(k in o){if(o.hasOwnProperty(k)){if(o[k].constructor!==String){j(o[k]);}}}}}};var l=function(o){if(o.RecordType&&o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url&&o.Url.Apply){e=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));if(a.indexOf(e)<0){a.push(e);}return true;}}else{return false;}};for(k in N1){if(N1.hasOwnProperty(k)){if(k.indexOf(m.dataServices.schema[0].namespace)>=0){j(N1[k]);}}}for(i=0;i<a.length;i+=1){if(!P1.hasOwnProperty(a[i])){b.push(a[i]);}}return b;};var A2=function(a){var i,o,l,b;if(a.length>0){o=new J();l="/sap/opu/odata/UI2/INTEROP/SemanticObjects?$expand=Links&$format=json";b="&$filter=id%20eq%20%27";for(i=0;i<a.length;i+=1){if(b.length>22){b+="%20or%20id%20eq%20%27"+a[i]+"%27";}else{b+=a[i]+"%27";}}l+=l+b;o.loadData(l);o.attachRequestCompleted(function(){var e=[],i,j,k;if(this.getData().d&&this.getData().d.results){k=this.getData().d.results;for(i=0;i<k.length;i+=1){P1[k[i].id]="";e=k[i].Links.results;for(j=0;j<e.length;j+=1){P1[e[j].id.slice(0,e[j].id.indexOf("~"))]="";}}}P1.InteropCompleted=true;B2();});}else{P1.InteropCompleted=true;}};var B2=function(a){var i,j,k,n,b,e,l;if(P1.InteropCompleted===true){for(i=0;i<O1.length;i+=1){if(O1[i].bLoaded&&!O1[i].bProcessed&&O1[i].Links){l=O1[i].Links;for(j=0;j<l.length;j+=1){if(P1.hasOwnProperty(l[j].sIntend)===true){if(O1[i].bIsTable===true){if(O1[i].oTableItems){b=O1[i].oTableItems;for(k=0;k<b.length;k+=1){e=b[k].getCells();for(n=0;n<e.length;n+=1){if(e[n]instanceof V&&e[n].getContent()[0].getBindingInfo("href").parts===l[j].oVL.getContent()[0].getBindingInfo("href").parts&&e[n].getContent()[1].getBindingInfo("text").parts===l[j].oVL.getContent()[1].getBindingInfo("text").parts){e[n].getContent()[0].setVisible(true);e[n].getContent()[1].setVisible(false);}}}}}else{l[j].oVL.getContent()[0].setVisible(true);l[j].oVL.getContent()[1].setVisible(false);}}else if(O1[i].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}O1[i].bProcessed=true;}}}}if(a>=0){if(O1[a].bLoaded&&!O1[a].bProcessed&&O1[a].Links){l=O1[a].Links;for(j=0;j<l.length;j+=1){if(O1[a].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}}}}};var C2=function(e,l,T1){var m={},n=[],p=0,D2=0,E2=0,i,j,F2,G2,H2,I2,J2,K2,L2,M2,N2,O2,P2,Q2,R2,S2,T2,U2,V2,W2,X2,Y2,Z2,$2,_2,a3,b3,c3,d3,e3,f3,g3,h3,i3,j3,k3,l3,m3,n3,o3,p3,q3,r3,s3,t3,u3,v3;F2=Z1(e);U2=l.substring(0,l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));V2=l.substring(l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));if(window.location.search.indexOf("cbn_keep_anno_case%3Dtrue")===-1){V2=V2.toLowerCase();}G2=new o1(F2,{annotationURI:U2+V2,loadAnnotationsJoined:true,loadMetadataAsync:false,json:true});G2.setCountSupported(false);T1.setModel(G2);H2=$1(e,G2);I2="/"+e.slice(F2.length);J2=G2.getServiceMetadata();N1=G2.getServiceAnnotations();K2=c2(H2,J2);L2=N1[K2]["com.sap.vocabularies.UI.v1.HeaderInfo"];M2=N1[K2]["com.sap.vocabularies.UI.v1.Facets"];T1.bindElement(I2,g2(H2,J2));W2=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");P1.InteropCompleted=false;A2(z2(J2));T1.addStyleClass("sapFactsheetUtiThingType"+H2.replace(/\s/g,""));if(L2.TypeName.String){T1.setTitle(L2.TypeName.String);}else if(L2.TypeName.Path){T1.bindProperty("title",{path:L2.TypeName.Path});}if(L2.ImageUrl&&L2.ImageUrl.String){T1.setIcon(L2.ImageUrl.String);}else if(L2.ImageUrl&&L2.ImageUrl.Path){T1.bindProperty("icon",{path:L2.ImageUrl.Path});}else if(L2.TypeImageUrl&&L2.TypeImageUrl.String){T1.setIcon(L2.TypeImageUrl.String);}else if(L2.TypeImageUrl&&L2.TypeImageUrl.Path){T1.bindProperty("icon",{path:L2.TypeImageUrl.Path});}if(L2.Title.Value.String){T1.setName(L2.Title.Value.String);}else{T1.bindProperty("name",n2(L2.Title.Value,L2.Title.EdmType,K2).BindingInfo);}if(L2.Description&&L2.Description.Value){if(L2.Description.Value.String){T1.setDescription(L2.Description.Value.String);}else{T1.bindProperty("description",n2(L2.Description.Value,L2.Description.EdmType,K2).BindingInfo);}}for(s3 in N1[K2]){if(N1[K2].hasOwnProperty(s3)){if(s3.search("com.sap.vocabularies.UI.v1.DataPoint")!==-1){t3=N1[K2][s3];if(t3){T1.addKpi(y2(G2,t3,K2,I2));E2+=1;}}if(E2>=3){break;}}}for(i=0;i<M2.length;i+=1){if(M2[i]["com.sap.vocabularies.UI.v1.IsSummary"]){Q2=M2[i];break;}}if(Q2){X2=15;for(j=0;j<Q2.Facets.length;j+=1){Y2=Q2.Facets[j].Target.AnnotationPath.substring(Q2.Facets[j].Target.AnnotationPath.lastIndexOf("@")+1);N2=Q2.Facets[j].Target.AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);Q2.Facets[j].NavPath=N2;Z2=e2(H2,N2,J2);Q2.Facets[j].NavEntitySet=Z2;if(Z2){$2=Z2;}else{$2=H2;}Q2.Facets[j].EntitySet=$2;_2=c2(Z2,J2);if(_2){a3=_2;}else{a3=K2;}Q2.Facets[j].EntityType=a3;b3=[];if(N1[a3][Y2].length){b3=N1[a3][Y2];}else if(N1[a3][Y2].Data.length){b3=N1[a3][Y2].Data;}Q2.Facets[j].Content=b3;for(i=0;i<b3.length;i+=1){c3=x2(b3[i]);if(c3==="High"){p+=1;}else if(c3==="Medium"){D2+=1;}}}if(p>=X2){p=X2;D2=0;}else if((p+D2)>X2){D2=X2-p;if(D2<0){D2=0;}}if(jQuery.device.is.phone){D2=0;}e3=X2-p-D2;m3=new p1({title:W2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT")});O1=[];O1.push(m3);O1[0].bLoaded=false;O1[0].bProcessed=false;O1[0].bIsTable=false;f3=[];h3=D2+p;for(j=0;j<Q2.Facets.length;j+=1){i3=q2(G2,Q2.Facets[j].EntitySet,Q2.Facets[j].Content,{High:p,Medium:D2,Low:0},null,m3).addStyleClass("sapFactsheetUtiTilePadding");if(j>0){i3.addStyleClass("sapFactsheetUtiPaddingTop");}if(Q2.Facets[j].NavPath){i3.bindElement(I2+"/"+Q2.Facets[j].NavPath);}g3=w2(Q2.Facets[j].Content);p-=g3.High;D2-=g3.Medium;if(((g3.High>0)&&((p+g3.High)>0))||((g3.Medium>0)&&((D2+g3.Medium)>0))){f3.push(i3);if(j>0){if(e3>0){e3-=1;}else if(D2>0){D2-=1;}else if(p>0){p-=1;}}}if((p<1)&&(D2<1)){break;}}if(p<0){p=0;}if(D2<0){D2=0;}m=new V({content:f3,width:"100%"});j3=v2();l3=1;if((h3>3)&&(h3<=9)){j3=v2(2);l3=2;}else if(h3>9){j3=v2(3);l3=3;}m3.setContent(m);m3.setRowSpan(l3);if(jQuery.device.is.phone){m3.setHeightType(G1.Auto);}else{m3.setHeight(j3);}m3.addStyleClass("sapFactsheetUtiGeneralInformationOverviewFacet");m3.attachPress({facets:Q2},function(o,a){var b,k,D3,E3,m;T1.removeAllFacetContent();D3=new s();D3.setDescription(Y1());D3.setTitle(W2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));D3.addStyleClass("sapFactsheetUtiGeneralInformationUtg");if(a.facets.Facets.length>1){b="L6 M12 S12";}else{b="L12 M12 S12";}O1[0].Links=[];E3=new V({width:"100%"});for(i=0;i<a.facets.Facets.length;i+=1){if(i%2===0){k=new r1({hSpacing:1,vSpacing:1,defaultSpan:b});}m=r2(G2,H2,a.facets.Facets[i],I2,this);m.addStyleClass("sapFactsheetUtiGeneralInformationUtgContent");if((i===0)&&(a.facets.Facets.length>1)&&(m.getTitle().trim()==="")){m.setTitle(W2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));}k.addContent(m);if(i%2!==0){E3.addContent(k);}}O1[0].bLoaded=true;O1[0].bProcessed=false;O1[0].bIsTable=false;B2(0);if(i%2!==0){E3.addContent(k);}D3.setContent(E3);T1.addFacetContent(D3);T1.navigateToDetail();});T1.addFacet(m3);}var w3=function(O2){return function(a){var i,o,b,k,D3,E3,I2,F3,G3,H3,I3,J3,K3,L3,M3;if((O2.cardinality==="*"&&a.results&&a.results.length&&a.results.length!==0)||(O2.cardinality==="1"&&a)){E3=new J();if(O2.cardinality==="*"){if(a.results&&a.results.length){E3.setData(a);}}else{E3.setData({result:a});I2="/result";}o=new o1("/sap/opu/odata/sap/VBI_APPL_DEF_SRV",false);b=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.GeoLocation"];G3=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.HeaderInfo"];H3=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Identification"];if(b.Longitude&&b.Latitude){D3={"Data":{"Set":{"N":[{"name":"Spots","E":[]}]}}};if(O2.cardinality==="1"){if(b.Longitude.Path&&b.Latitude.Path){k=a[b.Longitude.Path]+";"+a[b.Latitude.Path]+";0";}D3.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}else{for(i=0;i<a.results.length;i+=1){if(b.Longitude.Path&&b.Latitude.Path){k=a.results[i][b.Longitude.Path]+";"+a.results[i][b.Latitude.Path]+";0";}D3.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}if(a.results.length!==0){k=a.results[0][b.Longitude.Path]+";"+a.results[0][b.Latitude.Path]+";0";}}}M3=parseInt(a.__count,10);if(Number(M3)){O2.facet.setQuantity(M3);}var N3=function(S3){var T3,U3,V3,W3,X3;T3=$.parseJSON(S3.getParameters().data);if(T3.Action.name==="DETAIL_REQUEST"&&T3.Action.instance){U3=T3.Action.instance;if(E3.oData.results){I2="/results/"+U3.split(".")[1];}L3=G3.TypeName.String.substring(0,17);W3=parseFloat(v2(0.7))*16;X3=parseFloat(v2(1.5))*16;V3={"SAPVB":{"version":"2.0","xmlns:VB":"VB","Windows":{"Remove":{"name":"Detail1"},"Set":{"name":"Detail1","Window":{"id":"Detail1","type":"callout","refParent":"Main","refScene":"","offsetX":"16","offsetY":"-27","modal":"false","width":X3,"height":W3,"caption":L3,"pos.bind":U3+".GeoPosition"}}},"Scenes":{"Set":{"name":"Details","Scene":{"id":"Details","navControlVisible":"false"}}}}};this.load(V3);}};var O3=function(S3){var s3,T3,Z2,U3;if(!I3){I3=l2(G3.Title,O2.navigationType,J2,O2.facet);I3.setModel(E3);I3.bindElement(I2);J3=l2(G3.Description,O2.navigationType,J2,O2.facet);J3.setModel(E3);J3.bindElement(I2);for(s3 in b.Address){if(s3==="label"){F3=l2({Value:b.Address[s3]},O2.navigationType,J2,O2.facet);F3.setModel(E3);F3.bindElement(I2);break;}}U3=7;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){U3=4;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){U3=5;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){U3=2;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){U3=3;}K3=new V({width:"100%"}).setModel(G2);if(O2.navigationPath){Z2=e2(O2.entitySet,O2.navigationPath,J2);K3.addContent(q2(G2,Z2,H3,{High:U3},null,O2.facet));K3.setModel(E3).bindElement(I2);}else{K3.addContent(q2(G2,O2.entitySet,H3,{High:U3},null,O2.facet)).setModel(E3).bindElement(I2);}}else{I3.bindElement(I2);if(J3){J3.bindElement(I2);}if(F3){F3.bindElement(I2);}if(K3){K3.bindElement(I2);}}T3=parseFloat(v2(1.5))*16*0.95+"px";if(I3){I3.placeAt(S3.getParameter("contentarea").id);I3.addStyleClass("sapFactsheetUtiGeoPopupHead");if(jQuery.device.is.phone){I3.addStyleClass("sapFactsheetUtiGeoPopupHeadFontPhone");}I3.setWidth(T3);}if(J3){J3.placeAt(S3.getParameter("contentarea").id);J3.addStyleClass("sapFactsheetUtiGeoPopupDescr");if(jQuery.device.is.phone){J3.addStyleClass("sapFactsheetUtiGeoPopupDescrFontPhone");}J3.setWidth(T3);}if(F3){F3.placeAt(S3.getParameter("contentarea").id);F3.addStyleClass("sapFactsheetUtiGeoPopupText");F3.setWidth(T3);}if(K3&&K3.getContent()[0]&&K3.getContent()[0].getContent&&K3.getContent()[0].getContent().length>0){K3.placeAt(S3.getParameter("contentarea").id);K3.addStyleClass("sapFactsheetUtiGeoPopupText");K3.setWidth(T3);}if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));};var P3=function(S3){if(I3){I3.destroy();I3=undefined;}if(J3){J3.destroy();J3=undefined;}if(F3){F3.destroy();F3=undefined;}if(K3){K3.destroy();K3=undefined;}$(S3.getParameter("contentarea").id).empty();};var Q3=function(O2){return function(a){var S3,T3,U3,V3,i;V3=a.ProjectJSON;V3=V3.indexOf("{")?V3.substr(V3.indexOf("{")):V3;S3=$.parseJSON(V3);S3.SAPVB.Scenes.Set.SceneGeo.initialStartPosition=k;S3.SAPVB.Scenes.Set.SceneGeo.initialZoom=12;S3.SAPVB.Actions.Set.Action.push({id:"200",name:"TAP_ON_MAP",refEvent:"Click",refScene:"MainScene",refVO:"Map"});if(D3){S3.SAPVB.Data=D3.Data;}for(i=0;i<S3.SAPVB.Scenes.Set.SceneGeo.VO.length;i+=1){if(S3.SAPVB.Scenes.Set.SceneGeo.VO[i].datasource==="Spots"){if(S3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale&&S3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale.split(";").length!==3){S3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale="1.0;1.0;1.0";break;}}}O2.facet.getContent().attachSubmit(function(){if(jQuery.device.is.tablet||jQuery.device.is.phone){O2.facet.firePress();}});O2.facet.getContent().load(S3);O2.facet.attachPress("",function(){var W3=[],X3=[],i,Y3;if(!T3){T3=new s1({width:"100%",height:"100%",plugin:false,config:null});T3.addStyleClass("sapFactsheetUtiGeoPopup");}S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.move="false";S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.zoom="false";S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.pitch="false";S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.yaw="false";S3.SAPVB.Scenes.Set.SceneGeo.SuppressedNavControlVisibility="false";T3.load(S3);if(O2.cardinality==="*"){for(i=0;i<E3.oData.results.length;i+=1){W3.push(E3.oData.results[i][b.Longitude.Path]);X3.push(E3.oData.results[i][b.Latitude.Path]);}}T3.attachSubmit(N3);T3.attachOpenWindow(O3);T3.attachCloseWindow(P3);U3=new s({content:T3,title:O2.facetContent.Label.String,description:Y1()});T1.removeAllFacetContent();T1.addFacetContent(U3);T1.navigateToDetail();T1.attachAfterNavigate(W3,function(Z3){if(Z3.getParameters().getParameters().toId.indexOf("-detail-page")!==-1){if(jQuery.device.is.phone){Y3="300px";}else{Y3=Math.floor($("#"+Z3.getParameters().getParameters().toId+"-cont").height()-128)+"px";}T3.setHeight(Y3);if(W3.length>1){T3.zoomToGeoPosition(W3,X3);}}});});};};var R3=function(S3){return function(){T1.removeFacet(S3);};};o.read("VBIApplicationSet('ZFACTSHEETS')","","",false,Q3(O2),R3(O2.facet));}else{O2.facet.setQuantity(undefined);O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);O2.facet.setContent(undefined);O2.facet.setTitle(undefined);}};};var x3=function(O2){return function(a){var b="",i,j,o,k,D3,E3,F3,G3,m,H3,I3,J3,K3,L3,M3,N3,O3,P3,Q3,R3,S3,T3,U3,V3,W3,X3,Y3,Z3,$3,_3,a4;o=new J();if(O2.facetContent.Target&&O2.facetContent.Target.AnnotationPath&&O2.facetContent.Target.AnnotationPath.split("#")[1]&&N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+O2.facetContent.Target.AnnotationPath.split("#")[1]]){k=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+O2.facetContent.Target.AnnotationPath.split("#")[1]];}else{k=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Badge"];}if(O2.cardinality==="*"){if(a.results&&a.results.length){X3=O2.facetContent.Target.AnnotationPath;u3=X3.substring(X3.lastIndexOf("@")+1);if(u3==="com.sap.vocabularies.UI.v1.Chart"){Y3=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Chart"];Z3=N1.propertyExtensions[O2.navigationType];$3=[];for(i=0;i<Y3.Dimensions.length;i+=1){$3.push({axis:1,name:Z3[Y3.Dimensions[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+Y3.Dimensions[i].PropertyPath+"}"});}_3=[];for(i=0;i<Y3.Measures.length;i+=1){_3.push({name:Z3[Y3.Measures[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+Y3.Measures[i].PropertyPath+"}"});}a4=new F({dimensions:$3,measures:_3,data:{path:"/results"}});m=u2(Y3.ChartType.EnumMember,Y3.Title,Y3.Description,a4);m.setModel(o);O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.XL);}else{m=new V({width:"100%"}).addStyleClass("sapFactsheetUtiVLayoutPadding");for(i=0;i<a.results.length;i+=1){F3=new t1().addStyleClass("sapFactsheetUtiHLayoutPadding");D3=l2(k.Title,O2.navigationType,J2,O2.facet);if(D3.setWrapping){D3.setWrapping(false);}sap.ui.getCore().byId(T1.getId()+"-master-page").addDelegate({onAfterShow:(function(F3){return function(){var b4,c4;b4=F3.getParent().getDomRef().clientWidth;c4=b4;if(F3.getContent()[0]){c4-=F3.getContent()[0].getDomRef().clientWidth;if(b4<F3.getContent()[0].getDomRef().clientWidth){F3.getContent()[0].getDomRef().setAttribute("style","width:"+b4+"px");return;}}if(F3.getContent()[1]){c4-=F3.getContent()[1].getDomRef().clientWidth;}if(c4<10){c4=0;}if(F3.getContent()[2]){F3.getContent()[2].getDomRef().setAttribute("style","width:"+c4+"px");}};}(F3))});o=new J();o.setData({result:a.results[i]});D3.setModel(o);D3.bindElement("/result");G3=false;if(a.results[i][k.Title.Value.Path]){G3=true;}if(k.Title.Value.Apply){for(j=0;j<k.Title.Value.Apply.Parameters.length;j+=1){if(k.Title.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][k.Title.Value.Apply.Parameters[j].Value]){G3=true;break;}}}}b="";if(G3){F3.addContent(D3);if(k.MainInfo&&((k.MainInfo.EdmType&&k.MainInfo.EdmType==="Edm.Decimal")||(k.MainInfo.Value&&k.MainInfo.Value.Apply&&k.MainInfo.Value.Apply.Parameters[0]&&k.MainInfo.Value.Apply.Parameters[0].EdmType&&k.MainInfo.Value.Apply.Parameters[0].EdmType==="Edm.Decimal"))){b="comma";}else if(k.MainInfo&&k.MainInfo.Value.Path&&a.results[i][k.MainInfo.Value.Path]){b="dash";}else if(k.MainInfo&&k.MainInfo.Value.Apply){for(j=0;j<k.MainInfo.Value.Apply.Parameters.length;j+=1){if(k.MainInfo.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][k.MainInfo.Value.Apply.Parameters[j].Value]){b="dash";break;}}}}if(b==="dash"){F3.addContent(new H({content:"<span class=\"sapFactsheetUtiSeparatorPadding sapMText\"> &ndash; </span>"}));}if(b==="comma"){F3.addContent(new h({text:", "}).addStyleClass("sapFactsheetUtiSeparatorPaddingForDecimal"));}}if(k.MainInfo){E3=l2(k.MainInfo,O2.navigationType,J2,O2.facet);if(E3.setWrapping){E3.setWrapping(false);}E3.setModel(o);E3.bindElement("/result");F3.addContent(E3);}m.addContent(F3);}}H3=parseInt(a.__count,10);if(Number(H3)){O2.facet.setQuantity(H3);}O2.facet.setContent(m);O2.facet.attachPress({facet:O2.facetContent},function(b4,c4){var m;T1.removeAllFacetContent();O1[O1.indexOf(O2.facet)].Links=[];m=r2(G2,O2.entitySet,c4.facet,O2.bindingPath,this);m.setDescription(Y1());T1.addFacetContent(m);if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=false;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=true;}B2(O1.indexOf(O2.facet));T1.navigateToDetail();});}else{O2.facet.setQuantity(0);O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);}if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));}else{o.setData({result:a});for(V3 in a){if(a.hasOwnProperty(V3)){if(V3!=="__metadata"){if(typeof a[V3]==="string"&&a[V3]){if(parseInt(a[V3],10)!==0){W3=true;break;}}else if(typeof a[V3]==="number"&&parseInt(a[V3],10)!==0){W3=true;break;}}}}if(W3){I3=new V();J3=(N1.propertyExtensions)?N1.propertyExtensions[O2.navigationType]:[];K3=new t1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");L3=m2(k.Title,{},J3,true).addStyleClass("sapFactsheetUtiLabelMargin");D3=l2(k.Title,O2.navigationType,J2,O2.facet);D3.setModel(o);D3.bindElement("/result");K3.addContent(L3);K3.addContent(D3);I3.addContent(K3);if(k.MainInfo){M3=new t1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");N3=m2(k.MainInfo,{},J3,true).addStyleClass("sapFactsheetUtiLabelMargin");E3=l2(k.MainInfo,O2.navigationType,J2,O2.facet);E3.setModel(o);E3.bindElement("/result");M3.addContent(N3);M3.addContent(E3);I3.addContent(M3);}if(k.SecondaryInfo){O3=new t1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");P3=m2(k.SecondaryInfo,{},J3,true).addStyleClass("sapFactsheetUtiLabelMargin");Q3=l2(k.SecondaryInfo,O2.navigationType,J2,O2.facet);Q3.setModel(o);Q3.bindElement("/result");O3.addContent(P3);O3.addContent(Q3);I3.addContent(O3);}if(k.TypeImageUrl||k.ImageUrl){if(k.ImageUrl){R3=k.ImageUrl;}else{R3=k.TypeImageUrl;}S3=new t1();T3="64px";if(jQuery.device.is.phone){T3="48px";}if(R3.String&&(R3.String.substr(0,11)==="sap-icon://")){U3=new u1({size:T3,width:T3});}else{U3=new f({width:T3});}U3.addStyleClass("sapFactsheetUtiRelIcon");if(R3&&R3.String){U3.setSrc(R3.String);}else if(R3&&R3.Path){U3.bindProperty("src",R3.Path);}S3.addContent(U3);S3.addContent(I3);O2.facet.setContent(S3);}else{O2.facet.setContent(I3);}O2.facet.attachPress({facet:O2.facetContent},function(b4,c4){var m;T1.removeAllFacetContent();O1[O1.indexOf(O2.facet)].Links=[];m=r2(G2,O2.entitySet,c4.facet,O2.bindingPath,this);m.setDescription(Y1());T1.addFacetContent(m);if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));T1.navigateToDetail();});}else{O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);}if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));}};};var y3=function(O2){return function(){T1.removeFacet(O2.facet);};};var z3=function(O2){return function(a){var o,b,i,k,D3;b=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.MediaResource"];if(O2.cardinality==="*"){if(a.results&&a.results.length){o=new t1().addStyleClass("sapFactsheetUtiPictureViewerOverview");for(i=0;i<a.results.length;i+=1){o.addContent(new f({src:a.results[i][b.Thumbnail.Url.Path],height:"85px"}));if(i===3){break;}}k=parseInt(a.__count,10);if(Number(k)){O2.facet.setQuantity(k);}O2.facet.setContent(o);O2.facet.attachPress({facet:O2.facetContent,data:a},function(E3,F3){var G3,v3,H3;T1.removeAllFacetContent();D3=new s();if(F3.facet.Label&&F3.facet.Label.String){D3.setTitle(F3.facet.Label.String);}D3.setDescription(Y1());if(jQuery.device.is.phone){v3="350px";}else{v3="550px";}G3=new v1({height:v3});for(i=0;i<F3.data.results.length;i+=1){H3=new f({src:F3.data.results[i][b.Url.Path]});if(jQuery.device.is.phone){H3.addStyleClass("sapFactsheetUtiCarouselMaxImageHeightPhone");}else{H3.addStyleClass("sapFactsheetUtiCarouselMaxImageHeight");}G3.addPage(H3);}D3.setContent(G3);T1.addFacetContent(D3);T1.navigateToDetail();});}else{O2.facet.setQuantity(0);O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);}}};};var A3=function(o,D3){var E3=[],F3={},i,j,k,G3,H3,I3,J3,K3,L3,M3;var N3=function(J2,a){var i,b="";if(J2){if(J2.Path){return a[J2.Path];}else if(J2.String){return J2.String;}else if(J2.Apply.Name==="odata.concat"){for(i=0;i<J2.Apply.Parameters.length;i+=1){if(J2.Apply.Parameters[i].Type==="Path"){b=b+a[J2.Apply.Parameters[i].Value];}else if(J2.Apply.Parameters[i].Type==="String"){b=b+J2.Apply.Parameters[i].Value;}}return b;}}};F3.iCount=0;F3.aContacts=[];for(i=0;i<o.__batchResponses.length;i+=1){if(!o.__batchResponses[i].data){continue;}E3=o.__batchResponses[i].data.results;if(!E3){E3=[];E3.push(o.__batchResponses[i].data);}if(E3.length>0){G3=N1[E3[0].__metadata.type]["com.sap.vocabularies.Communication.v1.Contact"];if(G3){for(j=0;j<E3.length;j+=1){H3=I3=J3="";if(G3.tel){for(k=0;k<G3.tel.length;k+=1){if(G3.tel[k].type&&G3.tel[k].type.EnumMember){K3=N3(G3.tel[k].uri,E3[j]);switch(G3.tel[k].type.EnumMember){case"com.sap.vocabularies.Communication.v1.PhoneType/voice":H3=K3?K3.replace("tel:",""):"";H3=H3?H3.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/cell":I3=K3?K3.replace("tel:",""):"";I3=I3?I3.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/fax":J3=K3?K3.replace("tel:",""):"";J3=J3?J3.replace(";ext=",""):"";break;}}}}M3=G3.email&&G3.email.address?G3.email.address:"";L3=N3(G3.photo,E3[j]);F3.iCount+=1;F3.aContacts.push({fn:N3(G3.fn,E3[j]),title:N3(G3.title,E3[j]),org:N3(G3.org,E3[j]),phone:H3,mobile:I3,fax:J3,photo:L3,email:N3(M3,E3[j]),sEntity:E3[0].__metadata.type,bExistsPhoto:!!L3,bUseIcon:!L3,sOrder:F3.iCount});}}}}if(D3){F3.aContacts.sort(function(a,b){return a[D3]>b[D3]?1:-1;});}return F3;};var B3=function(){return function(o){var i,a,b,k,D3,E3,F3,G3;a=A3(o,"sOrder");b=new r1({defaultSpan:"L6 M6 S12",hSpacing:0,vSpacing:0}).addStyleClass("sapFactsheetUtiContactsGrid");for(i=0;i<a.aContacts.length&&i<4;i+=1){E3=new V();if(a.aContacts[i].photo){F3=new f({height:"55px",src:a.aContacts[i].photo});}else{F3=new u1({size:"50px",src:w1.getIconURI("person-placeholder")}).addStyleClass("sapFactsheetUtiRelIcon");}E3.addContent(F3);E3.addStyleClass("sapFactsheetUtiContactsImage");D3=new V({content:[new h({text:a.aContacts[i].fn}).addStyleClass("sapFactsheetUtiTextName"),new h({text:a.aContacts[i].title}).addStyleClass("sapFactsheetUtiTextValue")]});k=new t1({content:[E3,D3]}).addStyleClass("sapFactsheetUtiContactsBox");b.addContent(k);}m3=sap.ui.getCore().byId(T1.data("contactFacetId"));m3.setQuantity(a.iCount);if(i>0){m3.setContent(b);if(i<=2){G3=G1.M;}else{G3=G1.L;}m3.attachPress(function(){var i,n=[],d3;G2.clearBatch();for(i=0;i<N1[K2]["com.sap.vocabularies.UI.v1.Contacts"].length;i+=1){N2=N1[K2]["com.sap.vocabularies.UI.v1.Contacts"][i].AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);if(N2!==""){d3=I2+"/"+N2;}else{d3=I2;}n.push(G2.createBatchOperation(d3,"GET"));}G2.addBatchReadOperations(n);G2.submitBatch(function(o){var a,H3,I3,J3,K3,L3,M3;M3=jQuery.sap.resources({url:jQuery.sap.getModulePath("sap.ushell.components.container.")+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});a=A3(o,"sEntity");H3=new J();H3.setData(a);I3=new v({type:w.Inactive,unread:false,cells:[new V({content:[new f({src:"{photo}",width:"74px",visible:"{bExistsPhoto}"}),new u1({size:"76px",src:w1.getIconURI("person-placeholder"),visible:"{bUseIcon}"}).addStyleClass("sapFactsheetUtiRelIcon")]}),new V({content:[new h({text:"{fn}"}).addStyleClass("sapFactsheetUtiContactsName"),new r({text:"{title}"}),new r({text:"{org}"})]}),new g({text:"{phone}",href:"tel:{phone}"}),new g({text:"{mobile}",href:"tel:{mobile}"}),new g({text:"{fax}",href:"tel:{fax}"}),new g({text:"{email}",href:"mailto:{email}"})]});J3=new x({threshold:2,inset:false,showUnread:true,scrollToLoad:true,columns:[new u({hAlign:M1.Center,width:"12%",header:new h({text:""})}),new u({hAlign:M1.Begin,header:new h({text:M3.getText("USHELL_FACTSHEET_NAME")})}),new u({hAlign:M1.Begin,width:"12%",header:new h({text:M3.getText("USHELL_FACTSHEET_PHONE")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:M1.Begin,width:"12%",header:new h({text:x1.i18n.getText("mobile")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:M1.Begin,width:"12%",header:new h({text:x1.i18n.getText("fax")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:M1.Begin,width:"26%",header:new h({text:M3.getText("USHELL_FACTSHEET_EMAIL")}),minScreenWidth:"Tablet",demandPopin:true})],items:{path:"/aContacts",template:I3}});K3=new R({sortItems:[new M({key:"fn",text:M3.getText("USHELL_FACTSHEET_NAME")}),new M({key:"phone",text:M3.getText("USHELL_FACTSHEET_PHONE")}),new M({key:"mobile",text:x1.i18n.getText("mobile")}),new M({key:"fax",text:x1.i18n.getText("fax")}),new M({key:"email",text:M3.getText("USHELL_FACTSHEET_EMAIL")})],confirm:function(N3){var O3,P3,Q3=[];O3=N3.getParameters();P3=J3.getBinding("items");if(O3.sortItem){Q3.push(new W(O3.sortItem.getKey(),O3.sortDescending));P3.sort(Q3);}}});J3.setHeaderToolbar(new X({content:[new r(),new Y(),new Z({icon:"sap-icon://drop-down-list",press:function(){K3.open();}})]}));J3.setModel(H3);L3=new s({title:m3.getTitle(),description:Y1(),content:J3});T1.removeAllFacetContent();T1.addFacetContent(L3);T1.navigateToDetail();});});}else{G3=G1.S;m3.addStyleClass("sapFactsheetUtiEmptyTile");m3.setQuantity(0);}m3.setHeightType(jQuery.device.is.phone?G1.Auto:G3);};};for(i=0;i<M2.length;i+=1){if(M2[i]["com.sap.vocabularies.UI.v1.Map"]){N2=M2[i].Target.AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);p3="1";o3=K2;if(N2){o3=h2(N2,K2,J2);p3=f2(H2,N2,J2);}v3="100%";if(jQuery.device.is.phone){v3="150px";}n3=new s1({width:"100%",height:v3,plugin:false,config:null});m3=new p1({title:M2[i].Label.String.trim(),heightType:jQuery.device.is.phone?G1.Auto:G1.L,content:n3});O1.push(m3);O1[O1.length-1].bLoaded=false;O1[O1.length-1].bProcessed=false;O1[O1.length-1].bIsTable=false;O2={cardinality:p3,navigationPath:N2,facet:m3,facetContent:M2[i],navigationType:o3,metadata:J2,bindingPath:I2,entitySet:H2};if(p3==="*"){q3=["$inlinecount=allpages","$top=1000"];}else{q3=[];}G2.read(I2+"/"+N2,"",q3,true,w3(O2));T1.addFacet(m3);}else if(M2[i].Target){N2=M2[i].Target.AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);u3=M2[i].Target.AnnotationPath.substring(M2[i].Target.AnnotationPath.lastIndexOf("@")+1);if(N2){o3=h2(N2,K2,J2);m3=new p1({title:M2[i].Label.String.trim(),heightType:jQuery.device.is.phone?G1.Auto:G1.M});p3=f2(H2,N2,J2);if(p3!==0){O2={cardinality:p3,navigationPath:N2,facet:m3,facetContent:M2[i],navigationType:o3,metadata:J2,bindingPath:I2,entitySet:H2};if(M2[i]["com.sap.vocabularies.UI.v1.Gallery"]){if(p3==="*"){q3=["$inlinecount=allpages"];}else{q3=[];}G2.read(I2+"/"+N2,"",q3,true,z3(O2));}else{O1.push(m3);O1[O1.length-1].bLoaded=false;O1[O1.length-1].bProcessed=false;O1[O1.length-1].bIsTable=false;if(p3==="*"){q3=["$inlinecount=allpages","$top=3"];}else{q3=[];}G2.read(I2+"/"+N2,"",q3,true,x3(O2),y3(O2));}T1.addFacet(m3);}}else if(u3==="com.sap.vocabularies.UI.v1.Contacts"){m3=new p1({title:M2[i].Label.String.trim(),heightType:jQuery.device.is.phone?G1.Auto:G1.M});T1.data("contactFacetId",m3.sId);O2={facet:m3};G2.clearBatch();for(j=0;j<N1[K2][u3].length;j+=1){N2=N1[K2][u3][j].AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);if(N2!==""){p3=f2(H2,N2,J2);if(p3==="*"){d3=I2+"/"+N2+"?$top=4&$inlinecount=allpages";}else{d3=I2+"/"+N2;}}else{d3=I2;}n.push(G2.createBatchOperation(d3,"GET"));}G2.addBatchReadOperations(n);G2.submitBatch(B3(O2));T1.addFacet(m3);}}}k3=new y1();var C3=function(){var b={},i,o,s3,a,k,u3,D3,E3,F3,G3,H3,I3,J3,K3;k3.setAppData({title:T1.getTitle(),subtitle:T1.getName()+" - "+T1.getDescription()});k3.setEnabled(true);I3=sap.ushell.Container.getService("URLParsing");J3=I3.getShellHash(window.location.href);K3=I3.parseShellHash(J3);F3=K3.semanticObject;S2=new z1({showCancelButton:true,placement:F1.Top});P2=_1(e,G2);k=P2.split(",");for(i=0;i<k.length;i+=1){k[i]=k[i].replace("='","=","g");if(k[i].lastIndexOf("'")===k[i].length-1){k[i]=k[i].slice(0,-1);}}for(u3 in N1[K2]){if(N1[K2].hasOwnProperty(u3)){if(u3.indexOf("com.sap.vocabularies.Common.v1.SecondaryKey")===0){D3=N1[K2][u3];for(i=0;i<D3.length;i+=1){E3=this.getBoundContext().getProperty(D3[i].PropertyPath);if(E3){k.push(D3[i].PropertyPath+"="+E3);}}}}}for(i=0;i<k.length;i+=1){s3=k[i].substr(0,k[i].indexOf("="));a=k[i].substr(k[i].indexOf("=")+1,k[i].length);b[decodeURIComponent(s3)]=decodeURIComponent(a);}R2=sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(F3,b);R2.done(jQuery.proxy(function(L3){var i,M3,N3;for(i=0;i<L3.length;i+=1){N3=L3[i].intent;if(N3.indexOf(R1)<0&&N3.indexOf("-analyzeKPIDetails~")<0&&N3.indexOf("-analyzeSBKPIDetails~")<0&&N3.indexOf("-NavigateToMaintainCusProj~")<0&&N3.indexOf("CostCenter-manageCostCenter~")<0&&N3.indexOf("AccountingDocument-analyzeDocumentJournal~")<0&&N3.indexOf("AccountingDocument-analyzeGLLineItem~")<0&&N3.indexOf("ControllingDocument-analyzeCostCenters~")<0&&N3.indexOf("ControllingDocument-analyzeInternalOrders~")<0&&N3.indexOf("ControllingDocument-analyzeMarketSegment~")<0&&N3.indexOf("ControllingDocument-analyzeProfitCentersActuals~")<0&&N3.indexOf("ControllingDocument-analyzeProfitLoss~")<0&&N3.indexOf("ControllingDocument-analyzeProjectsActuals~")<0&&N3.indexOf("PurchaseOrder-create~")<0){M3=sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({target:{shellHash:N3}});S2.addItem(new g({text:L3[i].text,href:M3}));T1.setTransactionsVisible(true);}}}));T1.attachTransactionsButtonPress(function(L3){S2.openBy(L3.getParameter("caller"));});this.detachChange(C3);A1.setWindowTitle(T1.getTitle().trim()+": "+T1.getName().trim()+" ("+T1.getDescription().trim()+")");T1.setActionsVisible(true);r3=new Z({text:W2.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_EMAIL_LINK"),icon:"sap-icon://email",press:function(){E1.triggerEmail("",T1.getName(),window.location.href);}});T2=new B1({placement:F1.Top});G3=e.substr(0,e.lastIndexOf("/")+1);for(o in G2.oData){if(G2.oData.hasOwnProperty(o)){G3=G3+o;H3=o.substring(o.indexOf("(")+1,o.indexOf(")"));break;}}T2.addButton(new C1({jamData:{businessObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:H2,key:H3,name:T1.getTitle(),ui_url:window.location.href}}}));T2.addButton(new D1({jamData:{object:{id:window.location.href,display:new h({text:T1.getTitle()}),share:""},externalObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:H2,key:H3,name:T1.getTitle()}}}));T2.addButton(k3);T2.addButton(r3);T1.attachActionsButtonPress(function(L3){T2.openBy(L3.getParameter("caller"));});O1[0].bLoaded=true;O1[0].bProcessed=false;B2(0);};T1.getElementBinding().attachChange(C3);T1.attachBackAction(function(){history.back();});T1.addDelegate({onAfterRendering:function(){T1._adjustFacetLayout();}});return T1;};return function(a,b){try{T1=C2(a,b,new U({configurationVisible:false}));}catch(e){throw e;}return T1;};},true);
