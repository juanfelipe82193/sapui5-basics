//@ui5-bundle sap/suite/ui/commons/library-preload.js
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilder',["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","./CalculationBuilderItem","./CalculationBuilderExpression","./CalculationBuilderInput","./CalculationBuilderFunction","sap/m/OverflowToolbar","sap/m/OverflowToolbarToggleButton","sap/m/OverflowToolbarButton","sap/m/ToolbarSpacer","sap/m/Title","sap/ui/core/Popup","sap/m/MessageBox","sap/base/util/uid","sap/ui/core/library","sap/m/library"],function(q,l,C,a,b,c,d,O,e,f,T,g,P,M,u,h,L){"use strict";var B=L.ButtonType;var j=h.TitleLevel;var I=Object.freeze({SHOW_EXPRESSION:"sap-icon://notification-2",EXPAND_VARIABLE:"sap-icon://disconnected",FULL_SCREEN:"sap-icon://full-screen",EXIT_FULL_SCREEN:"sap-icon://exit-full-screen"});var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var k=l.CalculationBuilderOperatorType,m=l.CalculationBuilderLogicalOperatorType,n=l.CalculationBuilderComparisonOperatorType,o=l.CalculationBuilderItemType,F=l.CalculationBuilderFunctionType,p=l.CalculationBuilderLayoutType,V=l.CalculationBuilderValidationMode;var N=new RegExp(String.fromCharCode(160),"g");var s={abs:{key:"ABS",title:"ABS - Absolute Value",allowed:true},round:{key:"Round",title:"Round",template:["",",",""],allowed:true},roundup:{key:"RoundUp",title:"Round Up",template:["",",",""],allowed:true},rounddown:{key:"RoundDown",title:"Round Down",template:["",",",""],allowed:true},sqrt:{key:"SQRT",title:"SQRT",allowed:true},"case":{key:"Case",title:"Case",description:"CASE ( \"When\" Expression \"Then\" Expression \"Else\" Expression )",template:["",",","",",",""]},ndiv0:{key:"NDIV0",title:"NDIV0"},nodim:{key:"NODIM",title:"NODIM",description:"NODIM ( Variable )"},sumct:{key:"SUMCT",title:"SUMCT",description:"SUMGT ( Variable )"},sumgt:{key:"SUMGT",title:"SUMGT",description:"SUMGT ( Variable )"},sumrt:{key:"SUMRT",title:"SUMRT",description:"SUMRT ( Variable )"}};
var t=C.extend("sap.suite.ui.commons.CalculationBuilder",{
metadata:{library:"sap.suite.ui.commons",properties:{expression:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},showToolbar:{type:"boolean",group:"Misc",defaultValue:true},wrapItemsInExpression:{type:"boolean",group:"Misc",defaultValue:true},layoutType:{type:"string",group:"Misc",defaultValue:"Default"},showInputToolbar:{type:"boolean",group:"Misc",defaultValue:false},readOnly:{type:"boolean",group:"Misc",defaultValue:false},allowComparisonOperators:{type:"boolean",group:"Misc",defaultValue:true},allowLogicalOperators:{type:"boolean",group:"Misc",defaultValue:true},allowSuggestions:{type:"boolean",group:"Misc",defaultValue:true},allowStringConstants:{type:"boolean",group:"Misc",defaultValue:false},validationMode:{type:"sap.suite.ui.commons.CalculationBuilderValidationMode",group:"Misc",defaultValue:V.LiveChange},disabledDefaultTokens:{type:"string",group:"Misc",defaultValue:""}},defaultAggregation:"items",aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"item",bindable:"bindable",forwarding:{idSuffix:"-expression",aggregation:"items",forwardBinding:true}},variables:{type:"sap.suite.ui.commons.CalculationBuilderVariable",multiple:true,singularName:"Variable",forwarding:{idSuffix:"-expression",aggregation:"variables",forwardBinding:true}},functions:{type:"sap.suite.ui.commons.CalculationBuilderFunction",multiple:true,singularName:"Function",forwarding:{idSuffix:"-expression",aggregation:"functions",forwardBinding:true}},operators:{type:"sap.ui.core.Item",multiple:true,singularName:"Operator",forwarding:{idSuffix:"-expression",aggregation:"operators",forwardBinding:true}},groups:{type:"sap.suite.ui.commons.CalculationBuilderGroup",multiple:true,singularName:"Group",forwarding:{idSuffix:"-expression",aggregation:"groups",forwardBinding:true}}},events:{validateFunction:{parameters:{definition:"object",customFunction:"object",result:"sap.suite.ui.commons.CalculationBuilderValidationResult"}},change:{},afterValidation:{}}},
renderer:function(R,i){var w=i.getWrapItemsInExpression()?" sapCalculationBuilderWrapItems ":"",v=i.getLayoutType()===p.TextualOnly,D=i._bShowInput||v?"":"style=\"display:none\"",x=i._isExpressionVisible(),y=i._isInputVisible(),z=i.getReadOnly();R.write("<div");R.writeControlData(i);R.addClass("sapCalculationBuilder");if(i.getReadOnly()){R.addClass("sapCalculationBuilderReadOnly");}R.writeClasses(i);R.write(">");if(i.getShowToolbar()&&!v){R.renderControl(i.getToolbar());}if(x){i._oExpressionBuilder._bReadOnly=z;R.write("<div class=\"sapCalculationBuilderInsideWrapper"+w+"\">");R.renderControl(i._oExpressionBuilder);R.write("</div>");}if(x&&y){R.write("<div class=\"sapCalculationBuilderDelimiterLine\"></div>");}if(y){i._oInput._bReadOnly=z||(i.getLayoutType()===p.VisualTextualReadOnly);R.write("<div");R.addClass("sapCalculationBuilderInputOuterWrapper");if(i._oInput._bReadOnly){R.addClass("sapCalculationBuilderReadOnly");}if(i.getLayoutType()===p.Default||i.getLayoutType()===p.VisualTextualReadOnly){R.addClass("sapCalculationBuilderInputOuterWrapperMargin");}R.writeClasses();R.write(D+">");R.renderControl(i._oInput);R.write("</div>");}R.write("</div>");}
});
t.prototype.init=function(){this._mDisabledTokens={};this._bShowInput=true;this._oFullScreenContainer=null;this._bIsFullScreen=false;this._oExpressionBuilder=new b(this.getId()+"-expression",{change:function(){this._expressionChanged();this.fireChange();}.bind(this)});this.addDependent(this._oExpressionBuilder);this._oInput=new c(this.getId()+"-input",{change:function(E){var i=E.getParameter("value"),v=this._oInput._stringToItems(i),w=E.getParameter("position");this._oExpressionBuilder._smartRender(v);this._setExpression(this._oInput._convertEmptyHashes(i));if(this.getValidationMode()!==V.FocusOut){this._validateInput(i,w);}else{this._oInput._recreateText({text:i,position:w,errors:this._oExpressionBuilder._aErrors});}this._enableOrDisableExpandAllButton();this.fireChange();}.bind(this)});this.addDependent(this._oInput);};
t.prototype._expressionChanged=function(){var i="";this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();i=this._oInput._itemsToString({items:this._oExpressionBuilder.getItems(),errors:this._oExpressionBuilder._aErrors});this._setExpression(i);this.fireAfterValidation();this._oInput._displayError(this._oExpressionBuilder._aErrors.length!==0);this._oExpressionBuilder._printErrors();this._enableOrDisableExpandAllButton();};
t.prototype.onBeforeRendering=function(){this._resetItems();this._createToolbar();this._oExpressionBuilder._createVariablesMap();this._oInput._aVariables=this.getVariables();if(this._bExpressionSet){this._oExpressionBuilder._setItems(this._oInput._stringToItems(this._sExpressionDirectValue));}this._bExpressionSet=false;this._sExpressionDirectValue="";if(!this._isExpressionVisible()){this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();}this._bRendered=false;};
t.prototype.onAfterRendering=function(){this._setExpression(this._oInput._itemsToString({items:this._oExpressionBuilder.getItems(),errors:this._oExpressionBuilder._aErrors}));this._bRendered=true;this._oInput._displayError(this._oExpressionBuilder._aErrors.length>0);};
t.prototype.getToolbar=function(){return this._oToolbar;};
t.prototype.getInputToolbar=function(){return this._oInput&&this._oInput._oInputToolbar;};
t.prototype.validateParts=function(i){i=i||{};return this._oExpressionBuilder._validateSyntax({items:i.items,from:i.from,to:i.to});};
t.prototype.appendError=function(E){this._oExpressionBuilder._aErrors.push(E);};
t.prototype.getErrors=function(){return this._oExpressionBuilder._aErrors;};
t.prototype.validate=function(){this._resetItems();this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();this.updateErrorsDisplay();};
t.prototype.updateErrorsDisplay=function(){var E=this._oExpressionBuilder._aErrors;if(this._isInputVisible()){this._oInput._recreateText({errors:E});this._oInput._displayError(E.length>0);}if(this._isExpressionVisible()){this._oExpressionBuilder._printErrors();}};
t.prototype.allowFunction=function(i,A){if(!i){return;}var v=s[i.toLowerCase()];if(v){v.allowed=A;}};
t.prototype.updateOrCreateItem=function(K){this._oExpressionBuilder._updateOrCreateItem({key:K});};
t.prototype.getErrors=function(){return this._oExpressionBuilder&&this._oExpressionBuilder._aErrors;};
t.prototype._resetItems=function(){this.getItems().forEach(function(i){i._reset();});};
t.prototype._validateInput=function(i,v){this._oExpressionBuilder._aErrors=this._oExpressionBuilder._validateSyntax();this.fireAfterValidation();this._oInput._recreateText({text:i,position:v,errors:this._oExpressionBuilder._aErrors});this._oExpressionBuilder._printErrors();this._oInput._displayError(this._oExpressionBuilder._aErrors.length>0);};
t.prototype._findInArray=function(K,i,v){return i.some(function(w){var x=v?w["get"+v]():w;return x.toLowerCase()===K;});};
t.prototype._findInItems=function(K,i){K=(K||"").toLowerCase();return i.some(function(v){return v.getKey().toLowerCase()===K;});};
t.prototype._createErrorText=function(E,v){E=E||this.getErrors();var w="",x=0,y=5;for(var i=0;i<E.length&&x<y;i++){if((E[i].index<0||!q.isNumeric(E[i].index))||!v){x++;w+=E[i].title+"\n";}}return w;};
t.prototype._getFunctionMap=function(){return s;};
t.prototype._getFunctionDefinition=function(K){K=(K||"").toLowerCase();return s[K]||q.grep(this.getFunctions(),function(i){return i.getKey().toLowerCase()===K;})[0];};
t.prototype._getFunctionDescription=function(i){var E;if(i.description){return i.description;}E=r.getText("CALCULATION_BUILDER_EXPRESSION_TITLE");if(i.template){var D=(i.key||"")+" ( ";i.template.forEach(function(K){D+=(K?K:E)+" ";});return D+")";}return(i.key||"")+" ( "+E+" )";};
t.prototype._getFunctionTemplateItems=function(i){if(!i){return[];}var v=(i instanceof d)?o.CustomFunction:o.Function;return v===o.Function?(i.template||[]):this._convertToTemplate(i.getItems());};
t.prototype._getFunctionAllowParametersCount=function(K){var i=this._getFunctionTemplateItems(this._getFunctionDefinition(K)),v=i.join("");return(v.match(/,/g)||[]).length+1;};
t.prototype._convertToTemplate=function(i){return i.map(function(v){return v.getKey();});};
t.prototype._isOperator=function(K,A){A=A!==false;K=(K||"").toLowerCase();if(!this._isTokenAllowed(K)){return false;}return this._findInArray(K,Object.keys(k))||(A&&this.getAllowLogicalOperators()&&this._findInArray(K,Object.keys(m)))||(this.getAllowComparisonOperators()&&this._findInArray(K,Object.keys(n)));};
t.prototype._isFunction=function(K){return this._isTokenAllowed(K)&&this._findInArray(K,Object.keys(F));};
t.prototype._isCustomOperator=function(K){return this._findInItems(K,this.getOperators());};
t.prototype._isStringConstant=function(K){return K&&K.length>=2&&K[0]==="\""&&K[K.length-1]==="\"";};
t.prototype._getType=function(K){K=(K||"").toLowerCase();if(!K){return o.Empty;}if(this._isOperator(K)){return o.Operator;}if(this._isCustomOperator(K)){return o.CustomOperator;}if(this._findInArray(K,this.getVariables(),"Key")){return o.Variable;}if(this._isFunction(K)){return o.Function;}if(this._findInArray(K,this.getFunctions(),"Key")){return o.CustomFunction;}if(this.getAllowStringConstants()&&this._isStringConstant(K)){return o.Constant;}if(!isNaN(K)){return o.Constant;}return o.Error;};
t.prototype._createToolbar=function(){if(this._oToolbar){this._oShowInputButton&&this._oShowInputButton.setVisible(this._isInputVisible());this._oToolbarTitle.setText(this.getTitle());this._oToolbarTitle.setVisible(!!this.getTitle());return;}this._oToolbarTitle=new g({titleStyle:j.H4,text:this.getTitle(),visible:!!this.getTitle()});this._oToolbar=new O(this.getId()+"-toolbar",{content:[this._oToolbarTitle,new T()]}).addStyleClass("sapCalculationBuilderToolbar");this._oShowInputButton=new e({type:B.Transparent,icon:I.SHOW_EXPRESSION,tooltip:r.getText("CALCULATION_BUILDER_TOGGLE_EXPRESSION_BUTTON"),pressed:true,press:function(){this.$().find(".sapCalculationBuilderInputOuterWrapper").toggle();this._bShowInput=!this._bShowInput;}.bind(this)});this._oToolbar.addContent(this._oShowInputButton);this._oToolbar.addContent(this._getExpandAllVariablesButton());this._oToolbar.addContent(new e({type:B.Transparent,icon:I.FULL_SCREEN,tooltip:r.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"),press:function(E){var i=E.getSource();this._toggleFullScreen();i.setTooltip(this._bIsFullScreen?r.getText("CALCULATION_BUILDER_EXIT_FULL_SCREEN_BUTTON"):r.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"));i.setIcon(this._bIsFullScreen?I.EXIT_FULL_SCREEN:I.FULL_SCREEN);this.invalidate();}.bind(this)}));this._oFullScreenPopup=new P({modal:true,shadow:false,autoClose:false});this.addDependent(this._oToolbar);};
t.prototype._getExpandAllVariablesButton=function(){if(!this._oExpandAllVariablesButton){this._oExpandAllVariablesButton=new f({type:B.Transparent,icon:I.EXPAND_VARIABLE,tooltip:r.getText("CALCULATION_BUILDER_EXPAND_ALL_BUTTON"),press:function(E){M.show(r.getText("CALCULATION_BUILDER_EXPAND_ALL_MESSAGE_TEXT"),{icon:M.Icon.WARNING,title:r.getText("CALCULATION_BUILDER_EXPAND_ALL_MESSAGE_TITLE"),actions:[M.Action.OK,M.Action.CANCEL],onClose:function(A){if(A===M.Action.OK){this._oExpressionBuilder._expandAllVariables();}}.bind(this)});}.bind(this)});}return this._oExpandAllVariablesButton;};
t.prototype._enableOrDisableExpandAllButton=function(){var i=this.getReadOnly()||this.getLayoutType()===p.VisualTextualReadOnly,$=this._getExpandAllVariablesButton().$();if($[0]){this._getExpandAllVariablesButton().setEnabled(!i&&this.getItems().some(function(v){return v._isVariable()&&v.isExpandable();}));}};
t.prototype.setExpression=function(v){this.setProperty("expression",v);this._sExpressionDirectValue=v;if(this._bRendered||this._sExpressionDirectValue){this._bExpressionSet=true;}this._oInput._setupAriaLabel();return this;};
t.prototype.getExpression=function(){if(this._bExpressionSet){return this._sExpressionDirectValue;}return this._oInput._itemsToString({createInputText:false,items:this.getItems()});};
t.prototype._setExpression=function(v){if(v){v=v.replace(N," ");}this.setProperty("expression",v,true);this._oInput._setupAriaLabel();};
t.prototype._toggleFullScreen=function(){var i=function(){this._oFullScreenContainer={};this._oFullScreenContainer.$content=this.$();if(this._oFullScreenContainer.$content){this._oFullScreenContainer.$tempNode=q("<div></div>");this._oFullScreenContainer.$content.before(this._oFullScreenContainer.$tempNode);this._oFullScreenContainer.$overlay=q("<div id='"+u()+"'></div>");this._oFullScreenContainer.$overlay.addClass("sapCalculationBuilderOverlay");this._oFullScreenContainer.$overlay.append(this._oFullScreenContainer.$content);this._oFullScreenPopup.setContent(this._oFullScreenContainer.$overlay);}this._oFullScreenPopup.open(0,P.Dock.BeginTop,P.Dock.BeginTop,q("body"));}.bind(this);var v=function(){this._oFullScreenContainer.$tempNode.replaceWith(this.$());this._oFullScreenPopup.close();this._oFullScreenContainer.$overlay.remove();}.bind(this);this._bIsFullScreen?v():i();this._bIsFullScreen=!this._bIsFullScreen;};
t.prototype._getGroupMap=function(){return this._oExpressionBuilder._mGroups;};
t.prototype._isExpressionVisible=function(){return this.getLayoutType()!==p.TextualOnly;};
t.prototype._isInputVisible=function(){return this.getLayoutType()!==p.VisualOnly;};
t.prototype._createFunctionObject=function(i){if(!i){return null;}return i instanceof d?{key:i.getKey(),title:i._getLabel(),description:this._getFunctionDescription({key:i.getKey(),description:i.getDescription(),template:this._convertToTemplate(i.getItems())}),type:o.CustomFunction,functionObject:i}:{key:i.key,title:i.title,description:this._getFunctionDescription(i),type:o.Function,functionObject:i};};
t.prototype._getAllFunctions=function(){var i=[];Object.keys(s).forEach(function(K){if(s[K].allowed&&this._isTokenAllowed(K)){i.push(this._createFunctionObject(s[K]));}}.bind(this));this.getFunctions().forEach(function(v){i.push(this._createFunctionObject(v));}.bind(this));return i.sort(function(v,w){return v.title>w.title;});};
t.prototype._isTokenAllowed=function(K){return!this._mDisabledTokens[(K||"").toLowerCase()];};
t.prototype.setDisabledDefaultTokens=function(v){this._mDisabledTokens={};this.setProperty("disabledDefaultTokens",v);if(v){var i=v.split(";");i.forEach(function(w){if(w){this._mDisabledTokens[w.toLowerCase()]=1;}}.bind(this));}return this;};
return t;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderExpression',["sap/ui/thirdparty/jquery","./library","./CalculationBuilderItem","sap/ui/core/Control","sap/ui/core/ValueState","sap/ui/core/Popup","sap/ui/core/TextAlign","sap/ui/core/delegate/ItemNavigation","sap/m/MessageBox","sap/m/OverflowToolbar","sap/m/OverflowToolbarToggleButton","sap/m/OverflowToolbarButton","sap/m/ToolbarSpacer","sap/m/Title","sap/m/ButtonType","sap/m/Button","sap/m/FlexBox","sap/m/FlexRendertype","sap/m/FlexAlignItems","sap/m/library","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/StepInput","sap/m/Input","sap/m/InputType","sap/m/Page","sap/m/List","sap/m/ListMode","sap/m/ListType","sap/m/StandardListItem","sap/m/NavContainer","sap/m/SearchField","sap/m/Label","sap/m/Panel","sap/m/ResponsivePopover","sap/m/PlacementType","sap/m/Toolbar","sap/m/MessageStrip","./CalculationBuilderValidationResult","sap/suite/ui/commons/ControlProxy","sap/ui/core/Icon","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-draggable","sap/ui/thirdparty/jqueryui/jquery-ui-droppable","sap/ui/thirdparty/jqueryui/jquery-ui-selectable"],function(q,l,C,a,V,P,T,I,M,O,b,c,d,e,B,f,F,g,h,j,S,m,n,o,p,r,L,s,t,u,N,v,w,x,R,y,z,A,D,E,G){"use strict";var H=l.CalculationBuilderItemType,J=l.CalculationBuilderOperatorType,K=l.CalculationBuilderComparisonOperatorType,Q=l.CalculationBuilderLogicalOperatorType,U=l.CalculationBuilderLayoutType,W=j.FlexDirection;var X=Object.freeze({PAGE_MAIN:"-pagemain",PAGE_OPERATORS:"-pageoperators",PAGE_CONSTANT:"-pageconstant",PAGE_VARIABLE:"-pagevariable",PAGE_FUNCTIONS:"-pagefunctions"});var Y=Object.freeze({OPERATORS_CATEGORY:"sap-icon://attachment-html",CONSTANTS_CATEGORY:"sap-icon://grid",VARIABLES_CATEGORY:"sap-icon://notes",FUNCTIONS_CATEGORY:"sap-icon://chalkboard",DELETE:"sap-icon://delete"});var Z=Object.freeze({KEY_PREVIOUS:"previous",KEY_NEXT:"next",MOUSE:"mouse"});var $="##DEFAULT##";var _=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var a1=a.extend("sap.suite.ui.commons.CalculationBuilderExpression",{
metadata:{library:"sap.suite.ui.commons",defaultAggregation:"items",aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"item",bindable:"bindable"},variables:{type:"sap.suite.ui.commons.CalculationBuilderVariable",multiple:true,singularName:"Variable"},functions:{type:"sap.suite.ui.commons.CalculationBuilderFunction",multiple:true,singularName:"Function"},operators:{type:"sap.ui.core.Item",multiple:true,singularName:"operator"},groups:{type:"sap.suite.ui.commons.CalculationBuilderGroup",multiple:true,singularName:"Group"}},events:{change:{}}},
renderer:function(k,b1){k.write("<div");k.writeControlData(b1);k.addClass("sapCalculationBuilderInner");k.writeClasses(b1);k.write(">");k.write(b1._renderDelimiter(0));b1.getItems().forEach(function(c1,i){c1._iIndex=i;c1._bReadOnly=b1._bReadOnly;k.renderControl(c1);k.write(b1._renderDelimiter(i+1));},this);if(!b1._bReadOnly){k.renderControl(b1._getNewItem());}k.write("<div class=\"sapCalculationBuilderSelected\"></div>");k.write("</div>");k.write("<div id=\""+b1.getId()+"-erroricon\"  class=\"sapCalculationBuilderExpressionErrorIcon\">");k.renderControl(b1._getErrorIcon());k.write("</div>");}
});
a1.prototype.init=function(){this._aErrors=[];this._bAreSelectedItemsDeleting=false;this._bDragging=false;this._bIsCalculationBuilderRendering=false;};
a1.prototype._renderDelimiter=function(i){var k="";k+="<div class=\"sapCalculationBuilderDelimiter sapCalculationBuilderDroppable\" index=\""+i+"\">";k+="<div class=\"sapCalculationBuilderDroppableLine\"></div>";k+="<div class=\"sapCalculationBuilderDroppableCircle\"></div>";k+="<div class=\"sapCalculationBuilderDelimiterNewButton\">";k+="<span role=\"presentation\" aria-hidden=\"true\" data-sap-ui-icon-content=\"î€¸\""+"class=\"sapUiIcon sapUiIconMirrorInRTL sapCalculationBuilderDelimiterNewButtonIcon\" style=\"font-family:'SAP-icons'\"></span>";k+="</div>";k+="</div>";return k;};
a1.prototype.onBeforeRendering=function(){this._reset();this._createPopup();this.getParent()._enableOrDisableExpandAllButton();this._aErrors=this._validateSyntax();this._fireAfterValidation();this._bIsCalculationBuilderRendering=true;this._bRendered=false;};
a1.prototype.onAfterRendering=function(){this._bIsCalculationBuilderRendering=false;if(!this._bReadOnly){this._setupDroppable();this._setupSelectable();this._setupNewButtonEvents();}this._setupKeyboard();this._bRendered=true;var i=this.getParent();if(i._bRendered){i._setExpression(i._oInput._itemsToString({items:this.getItems(),errors:this._aErrors}));i._oInput._displayError(this._aErrors.length!==0);}};
a1.prototype.onsapfocusleave=function(){if(!this._bAreSelectedItemsDeleting){this._deselect();}};
a1.prototype.onsapenter=function(i){this._handleEnter(i);};
a1.prototype.onsapspace=function(i){if(q(i.target).hasClass("sapCalculationBuilderItem")){this._handleSpace(i);}};
a1.prototype.onsappreviousmodifiers=function(i){if(i.ctrlKey){this._handleCtrlPrevious(i);}};
a1.prototype.onsapnextmodifiers=function(i){if(i.ctrlKey){this._handleCtrlNext(i);}};
a1.prototype.onsapdelete=function(i){this._handleDelete(i);};
a1.prototype.exit=function(){if(this._oPopover){this._oPopover.destroy();}if(this._oItemNavigation){this.removeDelegate(this._oItemNavigation);this._oItemNavigation.destroy();}if(this._oErrorIcon){this._oErrorIcon.destroy();this._oErrorIcon=null;}};
a1.prototype._getErrorIcon=function(){if(!this._oErrorIcon){this._oErrorIcon=new G({src:"sap-icon://message-error",useIconTooltip:false,size:"20px"});}return this._oErrorIcon;};
a1.prototype._createPopup=function(){var i={};this._createPopoverLayout(i);this._createPopoverConstantsItems(i);this._createPopoverFunctionsItems(i);this._createPopoverOperatorsItems(i);this._createPopoverNavContainer(i);this._createPopover(i);};
a1.prototype._reset=function(){this.getItems().forEach(function(i){i._reset();});if(this._oPopover){this._oPopover.destroy();this._oPopover=null;}};
a1.prototype._createPopoverLayout=function(i){var k=function(c1){return new f({text:c1==="*"?"x":c1,press:this._updateOrCreateItem.bind(this,{type:H.Operator,key:c1})}).addStyleClass("sapUiTinyMarginEnd");}.bind(this);var b1=new F({renderType:g.Div});b1.addStyleClass("sapCalculationBuilderItemPopupOperators");Object.keys(J).forEach(function(c1){if(this.getParent()._isTokenAllowed(c1)){var d1=k(J[c1]);if(c1===J[","]){this._attachAriaLabelToButton(d1,_.getText("CALCULATION_BUILDER_COMMA_ARIA_LABEL"));}else if(c1===J["-"]){this._attachAriaLabelToButton(d1,_.getText("CALCULATION_BUILDER_MINUS_ARIA_LABEL"));}b1.addItem(d1);}}.bind(this));i.layout=b1.getItems().length>0?b1:null;};
a1.prototype._createPopoverConstantsItems=function(i){if(this.getParent().getAllowStringConstants()){i.constantInput=new o({width:"100%",placeholder:_.getText("CALCULATION_BUILDER_ADD_CONSTANT_FIELD_PLACEHOLDER_ANY_STRING"),valueStateText:_.getText("CALCULATION_BUILDER_ADD_CONSTANT_FIELD_PLACEHOLDER_ERROR"),liveChange:function(k){var b1=k.getSource(),c1=k.getParameter("value"),d1=c1.indexOf("\"")===-1;b1.setValueState(d1?V.None:V.Error);i.constantInput.okButton.setEnabled(d1);}});}else{i.constantInput=new n({width:"100%",placeholder:_.getText("CALCULATION_BUILDER_ADD_CONSTANT_FIELD_PLACEHOLDER"),textAlign:T.Right,valueStateText:_.getText("CALCULATION_BUILDER_ADD_CONSTANT_FIELD_ERROR_TEXT"),displayValuePrecision:3});}};
a1.prototype._createPopoverVariablesItems=function(i){if(!i){return[];}var k=[];i.forEach(function(d1){var e1=new u({title:d1._getLabel()});e1._calculationBuilderKey=d1.getKey();k.push(e1);},this);k=k.sort(function(o1,o2){return o1.getTitle().localeCompare(o2.getTitle());});var b1=new L({mode:s.SingleSelectMaster,selectionChange:function(d1){this._updateOrCreateItem({type:H.Variable,key:d1.getParameter("listItem")._calculationBuilderKey});}.bind(this),items:k});var c1=new v({placeholder:_.getText("CALCULATION_BUILDER_SEARCH_VARIABLE"),liveChange:function(d1){var e1=d1.getSource().getValue();if(e1||e1===""){b1.removeAllItems();k.forEach(function(f1){if(f1.getTitle().toLowerCase().indexOf(e1.toLowerCase())!==-1){b1.addItem(f1);}});}}});this._aVariableLists.push(b1);return[c1,b1];};
a1.prototype._createPopoverFunctionsItems=function(i){var k=this,b1=this.getParent();var c1=function(d1){return new u({title:d1.title,description:d1.description,type:t.Active,customData:[{key:"functionKey",value:d1.key}],press:d1.press});};i.functionList=new L({mode:s.SingleSelectMaster,itemPress:function(){this.getSelectedItem().firePress();}});b1._getAllFunctions().forEach(function(d1){i.functionList.addItem(c1({key:d1.key,title:d1.title,description:d1.description,press:k._updateOrCreateItem.bind(k,{key:d1.key,type:d1.type,functionObject:d1.functionObject})}));});};
a1.prototype._createPopoverOperatorsItems=function(i){var k=this.getParent();var b1=function(g1,h1){var i1=[];Object.keys(g1).forEach(function(j1){var k1,l1,m1=g1[j1];if(k._isTokenAllowed(j1)){if(typeof m1==="object"){l1=m1.getText();k1=m1.getKey();}else{k1=l1=m1;}var n1=new f({text:l1,press:this._updateOrCreateItem.bind(this,{type:h1,key:k1})}).addStyleClass("sapCalculationBuilderPopoverOperatorsButton").addStyleClass("sapUiTinyMarginEnd");if(j1===K["!="]){this._attachAriaLabelToButton(n1,_.getText("CALCULATION_BUILDER_NOT_EQUAL_ARIA_LABEL"));}i1.push(n1);}}.bind(this));return i1;}.bind(this);var c1=function(g1,h1,i1){var j1=b1(h1,i1);if(j1.length>0){return new x({content:[new w({width:"100%",text:g1}).addStyleClass("sapUiTinyMarginBottom"),j1]});}return null;};i.operatorsItems=[];if(this.getParent().getAllowComparisonOperators()){var d1=c1(_.getText("CALCULATION_BUILDER_COMPARISON_TITLE_SELECT"),K,H.Operator);d1&&i.operatorsItems.push(d1);}if(this.getParent().getAllowLogicalOperators()){var e1=c1(_.getText("CALCULATION_BUILDER_LOGICAL_TITLE_SELECT"),Q,H.Operator);e1&&i.operatorsItems.push(e1);}var f1=this.getParent().getOperators();if(f1.length>0){i.operatorsItems.push(c1(_.getText("CALCULATION_BUILDER_OPERATORS_TITLE"),f1,H.CustomOperator));}};
a1.prototype._createPopoverNavContainer=function(i){var k=function(g1){var h1=f1.getPage(g1);f1.to(h1);};var b1=function(){var g1=new A({type:"Error",showIcon:true}).addStyleClass("sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiTinyMarginTop");this._aStrips.push(g1);return g1;}.bind(this);this._aStrips=[];var c1=[new u({title:_.getText("CALCULATION_BUILDER_CONSTANTS_TITLE"),type:t.Active,description:_.getText("CALCULATION_BUILDER_CONSTANTS_CATEGORY_DESCRIPTION"),icon:Y.CONSTANTS_CATEGORY,press:k.bind(this,this.getId()+X.PAGE_CONSTANT)})];var d1=this._createPopoverVariablesItems(this._mGroups[$]);if(d1.length>0){c1.push(new u({title:_.getText("CALCULATION_BUILDER_VARIABLES_TITLE"),description:_.getText("CALCULATION_BUILDER_VARIABLES_CATEGORY_DESCRIPTION"),icon:Y.VARIABLES_CATEGORY,press:k.bind(this,this.getId()+X.PAGE_VARIABLE),type:t.Active}));}var e1=i.functionList.getItems();if(e1.length>0){c1.push(new u({title:_.getText("CALCULATION_BUILDER_FUNCTIONS_TITLE"),type:t.Active,description:_.getText("CALCULATION_BUILDER_FUNCTIONS_CATEGORY_DESCRIPTION"),icon:Y.FUNCTIONS_CATEGORY,press:k.bind(this,this.getId()+X.PAGE_FUNCTIONS)}));}if(i.operatorsItems.length>0){c1.unshift(new u({title:_.getText("CALCULATION_BUILDER_OPERATORS_TITLE"),type:t.Active,description:_.getText("CALCULATION_BUILDER_OPERATORS_CATEGORY_DESCRIPTION"),icon:Y.OPERATORS_CATEGORY,press:k.bind(this,this.getId()+X.PAGE_OPERATORS)}));}this.getGroups().forEach(function(g1){c1.push(new u({title:g1._getTitle(),type:t.Active,description:g1.getDescription(),icon:g1.getIcon(),press:k.bind(this,this.getId()+g1.getKey())}));}.bind(this));var f1=new N({defaultTransitionName:"show",navigate:function(g1){var h1=g1.getParameters().to;h1.setFooter(this._getPageFooter(h1.getId(),i));}.bind(this),pages:[new r({id:this.getId()+X.PAGE_MAIN,title:_.getText("CALCULATION_BUILDER_DIALOG_TITLE"),content:[b1(),i.layout,new F({direction:W.Column,items:[new L({items:c1})]}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop").addStyleClass("sapCalculationBuilderNavMainPage")]})]});if(i.operatorsItems.length>0){f1.addPage(new r({id:this.getId()+X.PAGE_OPERATORS,content:[b1(),new F({direction:W.Column,items:[i.operatorsItems]}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop")],showNavButton:true,title:_.getText("CALCULATION_BUILDER_OPERATORS_PAGE_TITLE"),navButtonPress:k.bind(this,this.getId()+X.PAGE_MAIN)}));}f1.addPage(new r({id:this.getId()+X.PAGE_CONSTANT,content:[b1(),new F({direction:W.Column,items:[i.constantInput]}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop")],showNavButton:true,title:_.getText("CALCULATION_BUILDER_CONSTANTS_PAGE_TITLE"),navButtonPress:k.bind(this,this.getId()+X.PAGE_MAIN)}));if(d1.length>0){f1.addPage(new r({id:this.getId()+X.PAGE_VARIABLE,content:[b1(),new F({direction:W.Column,items:d1}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop")],showNavButton:true,title:_.getText("CALCULATION_BUILDER_VARIABLES_PAGE_TITLE"),navButtonPress:k.bind(this,this.getId()+X.PAGE_MAIN)}));}if(e1.length>0){f1.addPage(new r({id:this.getId()+X.PAGE_FUNCTIONS,content:[b1(),new F({direction:W.Column,items:[i.functionList]}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop")],showNavButton:true,title:_.getText("CALCULATION_BUILDER_FUNCTIONS_PAGE_TITLE"),navButtonPress:k.bind(this,this.getId()+X.PAGE_MAIN)}));}this.getGroups().forEach(function(g1){var h1=new r({id:this.getId()+g1.getKey(),showNavButton:true,title:g1._getTitle(),navButtonPress:k.bind(this,this.getId()+X.PAGE_MAIN),content:b1()});var i1=g1.getCustomView();if(i1){var j1=new E();j1.setAssociation("control",i1);h1.addContent(j1);}else{h1.addContent(new F({direction:W.Column,items:this._createPopoverVariablesItems(this._mGroups[g1.getKey()])}).addStyleClass("sapUiSmallMarginBeginEnd").addStyleClass("sapUiTinyMarginTop"));}f1.addPage(h1);}.bind(this));i.navContainer=f1;};
a1.prototype._callFunctionFireSelection=function(k){this.getGroups().forEach(function(i){if(i.getCustomView()){i.fireSetSelection({key:k});}});};
a1.prototype._clearVariableLists=function(){this._aVariableLists.forEach(function(i){var k=i.getSelectedItem();if(k){i.setSelectedItem(k,false);}});this._callFunctionFireSelection();};
a1.prototype._setVariableListSelection=function(b1){for(var i=0;i<this._aVariableLists.length;i++){var c1=this._aVariableLists[i],d1=this._aVariableLists[i].getItems();for(var k=0;k<d1.length;k++){if(d1[k]._calculationBuilderKey===b1){c1.setSelectedItem(d1[k],true);return;}}}this._callFunctionFireSelection(b1);};
a1.prototype._sanitizeStringConstant=function(i){if(this.getParent()._isStringConstant(i)){i=i.substring(1,i.length-1);}return i;};
a1.prototype._createPopover=function(k){var b1=function(){var c1=this._oCurrentItem,d1=k.navContainer.getCurrentPage().getId(),e1=k.functionList.getSelectedItem(),f1,g1,h1;k.constantInput.setValue(this.getParent().getAllowStringConstants()?"":0);this._clearVariableLists();if(e1){k.functionList.setSelectedItem(e1,false);}if(!c1){f1=this.getId()+X.PAGE_MAIN;}else{if(c1._isFunction()){h1=c1.getKey();f1=this.getId()+X.PAGE_FUNCTIONS;g1=k.functionList.getItems();for(var i=0;i<g1.length;i++){var i1=g1[i].data("functionKey");if((i1&&i1.toLowerCase())===h1.toLowerCase()){k.functionList.setSelectedItem(g1[i],true);break;}}}else if(c1._isConstant()){var j1=this._sanitizeStringConstant(c1.getKey());k.constantInput.setValue(j1);f1=this.getId()+X.PAGE_CONSTANT;}else if(c1._isVariable()){this._setVariableListSelection(c1.getKey());var k1=c1._oVariable||c1.getVariable(),l1=(k1&&k1.getGroup())||X.PAGE_VARIABLE;f1=this.getId()+l1;}else if(c1._isSecondaryOperator()){f1=this.getId()+X.PAGE_OPERATORS;}else{f1=this.getId()+X.PAGE_MAIN;}}if(f1!==d1){if(f1!==this.getId()+X.PAGE_MAIN){k.navContainer.backToPage(this.getId()+X.PAGE_MAIN);}k.navContainer.to(k.navContainer.getPage(f1),"show");}else{k.navContainer.getCurrentPage().setFooter(this._getPageFooter(d1,k));}var m1=this._oCurrentItem&&this._oCurrentItem._getItemError(),n1=m1&&(" "+m1.title);this._aStrips.forEach(function(o1){o1.setVisible(!!m1);o1.setText(n1?_.getText("CALCULATION_BUILDER_INCORRECT_SYNTAX")+n1:"");});}.bind(this);this._oPopover=new R({showHeader:false,resizable:true,placement:y.PreferredBottomOrFlip,contentWidth:"400px",contentHeight:"450px",content:[k.navContainer],beforeOpen:b1,afterClose:function(){this._bDragging=false;this._clearNewButtonPositions();}.bind(this)});};
a1.prototype._getPageFooter=function(i,k){var b1=false,c1=false,d1=function(){};if(this._oCurrentItem&&!this._oCurrentItem._bIsNew){c1=true;}if(i===(this.getId()+X.PAGE_CONSTANT)){b1=k.constantInput.getValueState()===V.None;d1=function(){var e1=k.constantInput.getValue();if(this.getParent()&&this.getParent().getAllowStringConstants()&&!q.isNumeric(e1)){e1="\""+e1+"\"";}this._updateOrCreateItem({type:H.Constant,key:e1});k.constantInput.setValueState(V.None);}.bind(this);}k.constantInput.okButton=new f({enabled:b1,text:_.getText("CALCULATION_BUILDER_CONFIRM_BUTTON"),press:d1});return new z({content:[new d(),k.constantInput.okButton,new f({enabled:c1,text:_.getText("CALCULATION_BUILDER_DELETE_BUTTON"),press:this._deleteItem.bind(this)}),new f({text:_.getText("CALCULATION_BUILDER_CLOSE_BUTTON"),press:this._instantClose.bind(this)})]});};
a1.prototype._insertFunctionItems=function(i,k){var b1=function(c1){i.push(c1);};if(k&&k.length>0){k.forEach(function(c1){b1(c1);});}else{b1("");}b1(")");};
a1.prototype._updateOrCreateItem=function(k){var b1=!this._oCurrentItem||this._oCurrentItem._bIsNew,c1=this._oCurrentItem&&!this._oCurrentItem.getKey(),d1=this.getParent(),e1=k.functionObject,f1=this.getItems();var g1=function(){var f1=k.type===H.Function?e1.template:d1._convertToTemplate(e1.getItems());this._insertFunctionItems(j1,f1);}.bind(this);var h1=function(){var i=isNaN(this._iCurrentIndex)?this.getItems().length:this._iCurrentIndex,k1=this._getKeys();this._smartRender(k1.slice(0,i).concat(j1,k1.slice(i)));}.bind(this);var i1=function(){for(var i=0;i<f1.length;i++){if(f1[i]===this._oCurrentItem){return i+1;}}return null;}.bind(this);if(b1){var j1=[k.key];if(e1){g1();}h1();}else{this._oCurrentItem.setKey(k.key);if(k.type){this._oCurrentItem._sType=k.type;}if(c1&&e1){var j1=[];this._iCurrentIndex=i1();g1();h1();}}this._instantClose();this._fireChange();};
a1.prototype._expandAllVariables=function(){this.getItems().forEach(function(i){if(i.isExpandable()){i._expandVariable(false);}});this._fireChange();};
a1.prototype._handleDelete=function(i){if(this._isEmptySelected()){return;}this._bAreSelectedItemsDeleting=true;M.show(_.getText("CALCULATION_BUILDER_DELETE_MESSAGE_TEXT"),{icon:M.Icon.WARNING,title:_.getText("CALCULATION_BUILDER_DELETE_MESSAGE_TITLE"),actions:[M.Action.YES,M.Action.CANCEL],onClose:function(k){if(k===M.Action.YES){var b1=this.$().find(".sapCalculationBuilderSelected .sapCalculationBuilderItem"),c1=b1.length,d1=b1.first(),e1=sap.ui.getCore().byId(d1.attr("id"));if(e1){var f1=this._getKeys();f1.splice(e1._iIndex,c1);this._smartRender(f1);this._fireChange();}}this._bAreSelectedItemsDeleting=false;}.bind(this)});};
a1.prototype._handleEnter=function(i){var k=q(i.target),b1;if(this._oItemNavigation&&!this._bReadOnly){if(k.hasClass("sapCalculationBuilderNewItem")){b1=this._getNewItem();if(b1){b1._buttonPress(i);}}else if(k.hasClass("sapCalculationBuilderItem")){b1=this._getItemById(k[0].id);if(b1){b1._buttonPress(i);}}else if(k.hasClass("sapCalculationBuilderItemExpandButton")){b1=this._getItemById(k.closest(".sapCalculationBuilderItem")[0].id);if(b1){b1._expandButtonPress(i);}}}};
a1.prototype._createVariablesMap=function(){this._mGroups={};this._aVariableLists=[];this.getVariables().forEach(function(i){var k=i.getGroup()||$;if(!this._mGroups[k]){this._mGroups[k]=[];}this._mGroups[k].push(i);}.bind(this));};
a1.prototype._handleSpace=function(i){this._selectItem(i.target);};
a1.prototype._handleCtrlNext=function(i){this._moveItems(Z.KEY_NEXT);};
a1.prototype._handleCtrlPrevious=function(i){this._moveItems(Z.KEY_PREVIOUS);};
a1.prototype._getVariableByKey=function(k){var b1=this.getVariables();if(!k){return null;}k=k.toLowerCase();for(var i=0;i<b1.length;i++){if(b1[i].getKey().toLowerCase()===k){return b1[i];}}return null;};
a1.prototype.setTitle=function(i){var k=this._oToolbarTitle;if(k){k.setText(i);k.setVisible(!!i);}this.setProperty("title",i);};
a1.prototype._getKeys=function(){return this.getItems().map(function(i){return i.getKey();});};
a1.prototype._deleteItem=function(){var k=this._getKeys();k.splice(this._oCurrentItem._iIndex,1);this._smartRender(k);this._instantClose();this._fireChange();};
a1.prototype._openDialog=function(i){this._oCurrentItem=i.currentItem;this._iCurrentIndex=i.index;this._oPopover.openBy(i.opener);};
a1.prototype._setupDroppable=function(i){var k=this;i=i||this.$().find(".sapCalculationBuilderDroppable");i.droppable({scope:k.getId()+"-scope",tolerance:"pointer",activeClass:"sapCalculationBuilderDroppableActive",hoverClass:"sapCalculationBuilderDroppableActive",drop:function(b1,ui){if(!ui.draggable.hasClass("sapCalculationBuilderSelected")){k._selectItem(ui.draggable[0]);}k._moveItems(Z.MOUSE,parseInt(q(this).attr("index"),10));k._bDragging=false;},over:function(b1,ui){k._bDragging=true;}});};
a1.prototype._clearNewButtonPositions=function(){var i=this.$();i.find(".sapCalculationBuilderDelimiterNewButton").hide(200);i.find(".sapCalculationBuilderItem").animate({"left":0},300);};
a1.prototype._setupNewButtonEvents=function(){var i=13,k=300;var b1=this.$().find(".sapCalculationBuilderDelimiter[data-events!='bound']"),c1=this.$().find(".sapCalculationBuilderDelimiterNewButton[data-events!='bound']"),d1=this,e1,f1;var g1=function(h1,i1){h1.prev().animate({"left":-i1},k);h1.next().animate({"left":i1},k);};c1.click(function(ev){var h1=q(this),i1=parseInt(h1.parent().attr("index"),10);h1.css("opacity",1);d1._oCurrentItem=null;d1._iCurrentIndex=i1;d1._openDialog({opener:this,index:i1});});c1.attr("data-events","bound");b1.mouseover(function(ev){var h1=q(this);if(!d1._bDragging&&!d1._oPopover.isOpen()){e1=true;f1=setTimeout(function(){if(e1){e1=false;g1(h1,i);h1.find(".sapCalculationBuilderDelimiterNewButton").show(200);}},400);}});b1.mouseout(function(ev){var h1=q(this).find(".sapCalculationBuilderDelimiterNewButton"),i1=q(this);e1=false;clearTimeout(f1);if(d1._bDragging||d1._oPopover.isOpen()){return;}if(!h1.is(':hover')){g1(i1,0);h1.hide(200);}});b1.attr("data-events","bound");};
a1.prototype._setupSelectable=function(){this.$().selectable({cancel:".sapCalculationBuilderCancelSelectable",distance:5,start:function(){this._deselect();this._instantClose();}.bind(this),stop:function(){this._selectItems(this.$().find(".sapCalculationBuilderItem.ui-selected"));}.bind(this)});};
a1.prototype._selectItemsTo=function(i){var k=q(i.next(".sapCalculationBuilderDelimiter")[0]),b1=k.attr("index")-1,c1=this.$(),d1,e1,f1,g1,h1;if(i.parent().hasClass("sapCalculationBuilderSelected")||this._isEmptySelected()){this._selectItem(i);return;}if(b1>this._iLastSelectedIndex){d1=this._iFirstSelectedIndex;e1=b1+1;}else{d1=b1;e1=this._iLastSelectedIndex+1;}this._deselect();g1=c1.find(".sapCalculationBuilderDelimiter[index=\""+d1+"\"]");h1=c1.find(".sapCalculationBuilderDelimiter[index=\""+e1+"\"]");f1=g1.nextUntil(h1,".sapCalculationBuilderItem");this._selectItems(f1);};
a1.prototype._selectItems=function(k){for(var i=0;i<k.length;i++){this._selectItem(k[i]);}};
a1.prototype._selectItem=function(i){var k=this.$().find(".sapCalculationBuilderSelected"),b1=q(i),c1=q(b1.next(".sapCalculationBuilderDelimiter")[0]),d1=k[0].children.length,e1=c1.attr("index")-1,f1=true;if(!this._oItemNavigation||!this._getItemById(b1[0].id)||this._bReadOnly){return;}if(d1===0){this._iFirstSelectedIndex=e1;this._iLastSelectedIndex=e1;}else{if(b1.parent().hasClass("sapCalculationBuilderSelected")){if(this._iFirstSelectedIndex===e1){this._iFirstSelectedIndex++;this._deselectItem(b1,false);}else if(this._iLastSelectedIndex===e1){this._iLastSelectedIndex--;this._deselectItem(b1,true);}else{this._deselect();}this._setCorrectFocus();return;}if((this._iFirstSelectedIndex-e1)===1){this._iFirstSelectedIndex=e1;f1=false;}else if((e1-this._iLastSelectedIndex)===1){this._iLastSelectedIndex=e1;f1=true;}else{this._iFirstSelectedIndex=e1;this._iLastSelectedIndex=e1;this._deselect();}}var g1=this.$();if(this._isEmptySelected()){k.detach().insertBefore(b1);k.draggable({revert:"invalid",cursor:"move",axis:"x",scope:this.getId()+"-scope",helper:function(h1){var i1=k.clone();i1.removeClass("sapCalculationBuilderSelected");i1.addClass("sapCalculationBuilderDraggingSelectedClone");return i1;},start:function(){k.addClass("sapCalculationBuilderDragging");g1.find(".sapCalculationBuilderItemContent").css("cursor","move");},stop:function(){k.removeClass("sapCalculationBuilderDragging");g1.find(".sapCalculationBuilderItemContent").css("cursor","pointer");}});}if(f1){b1.detach().appendTo(k);c1.detach().appendTo(k);}else{c1.detach().prependTo(k);b1.detach().prependTo(k);}if(b1.hasClass("sapCalculationBuilderItem")){b1.draggable("disable");b1.addClass("ui-selected");}this._setCorrectFocus();};
a1.prototype._isEmptySelected=function(){var i=this.$().find(".sapCalculationBuilderSelected");if(i){return i.is(":empty");}return true;};
a1.prototype._deselectItem=function(i,k){var b1=this.$().find(".sapCalculationBuilderSelected"),c1=q(i.next(".sapCalculationBuilderDelimiter")[0]);if(!i.hasClass("ui-selected")){return;}if(k){c1.detach().insertAfter(b1);i.detach().insertAfter(b1);}else{i.detach().insertBefore(b1);c1.detach().insertBefore(b1);}i.draggable("enable");i.removeClass("ui-selected");};
a1.prototype._deselect=function(){var i=this.$().find(".sapCalculationBuilderSelected");if(this._isEmptySelected()){return;}this.$().find(".sapCalculationBuilderSelected .ui-selected").removeClass("ui-selected");i.children().each(function(){var k=q(this);if(k.hasClass("sapCalculationBuilderItem")){k.draggable("enable");}k.detach().insertBefore(i);});};
a1.prototype._setupKeyboard=function(){var i=this.getDomRef(),k=[];this.getItems().forEach(function(b1){k.push(b1.getFocusDomRef());if(b1.isExpandable()){k.push(b1.$("expandbutton"));}});k.push(this._getNewItem().getFocusDomRef());if(!this._oItemNavigation){this._oItemNavigation=new I();this.addDelegate(this._oItemNavigation);}this._oItemNavigation.setRootDomRef(i);this._oItemNavigation.setItemDomRefs(k);this._oItemNavigation.setCycling(true);this._oItemNavigation.setPageSize(250);};
a1.prototype._setCorrectFocus=function(){q(this._oItemNavigation.getFocusedDomRef()).focus();};
a1.prototype._getItemById=function(i){return this.getItems().filter(function(k){return k.getId()===i;})[0];};
a1.prototype._getNewItem=function(){if(!this._oNewItem){this._oNewItem=new C();this._oNewItem._bIsNew=true;this._oNewItem.setParent(this,null,true);}return this._oNewItem;};
a1.prototype._instantClose=function(){var i=this._oPopover.getAggregation("_popup");if(i&&i.oPopup&&i.oPopup.close){i.oPopup.close(0);this._setCorrectFocus();}};
a1.prototype._attachAriaLabelToButton=function(i,k){i.addEventDelegate({onAfterRendering:function(b1){b1.srcControl.$("content").attr("aria-label",k);}});};
a1.prototype._printErrors=function(){this.getItems().forEach(function(i){var k=i._getItemError(),b1=i.$(),c1=!!k?"addClass":"removeClass";b1[c1]("sapCalculationBuilderItemErrorSyntax");});if(this.getParent().getLayoutType()===U.VisualOnly){this._showErrorIcon();}};
a1.prototype._validateSyntax=function(k){var b1=function(){var A1=this.getItems()[q1],B1=A1.getKey();return!A1._isOperator()||B1==="("||B1==="+"||B1==="-"||B1.toLowerCase()==="not";}.bind(this);var c1=function(){var k1=this.getItems(),A1=k1[r1-1];return!A1._isOperator()||A1.getKey()===")";}.bind(this);var d1=function(n1){var A1=n1.getKey().toLowerCase();if(n1._isOperator()){return A1==="not"||A1==="("||A1===")"?A1:"#op#";}return n1._isFunction()?"#fun#":"#col#";};var e1=function(n1){return{index:i,item:n1,items:[],text:n1.getKey()+(n1._isFunction()?"(":"")};};var f1=function(w1){var A1=1,B1=i;i++;for(;i<k1.length;i++){var n1=k1[i],C1=n1.getKey(),D1=e1(n1);w1.items.push(D1);switch(C1){case")":A1--;break;case"(":A1++;break;case",":A1=1;break;}if(n1._isFunction()){f1(D1);w1.text+=D1.text;}else{w1.text+=C1;}if(A1===0){return w1;}}u1.push({index:B1,title:_.getText("CALCULATION_BUILDER_CLOSING_BRACKET_ERROR_TEXT")});return w1;};var g1=function(w1){var A1=this.getParent()._getFunctionAllowParametersCount(w1.item.getKey()),B1=[],C1=[];w1.items.forEach(function(n1){if(n1.item._isComma()){B1.push(C1);C1=[];}else{C1.push(n1);}});if(C1.length>0&&C1[C1.length-1].text===")"){C1.pop();}B1.push(C1);if(B1.length!==A1){u1.push({index:w1.index,title:_.getText(B1.length<A1?"CALCULATION_BUILDER_TOO_LITTLE_PARAMETERS":"CALCULATION_BUILDER_TOO_MANY_PARAMETERS")});}if(B1.length>0){B1.forEach(function(D1){if(D1.length>0){q.merge(u1,this._validateSyntax({from:D1[0].index,to:D1[D1.length-1].index+1}));}else{u1.push({index:w1.index,title:_.getText("CALCULATION_BUILDER_EMPTY_PARAMETER")});}}.bind(this));}}.bind(this);var h1=0;var i1=function(){var A1=n1.getKey()==="+"||n1.getKey()==="-";if(A1){h1++;if(h1>2){u1.push({index:i,title:_.getText("CALCULATION_BUILDER_SYNTAX_ERROR_TEXT")});}}else{h1=0;}};var j1={"#op#":["(","#col#","#fun#","not","+","-"],"(":["(","+","-","#col#","#fun#","not"],")":["#op#",")"],"#col#":["#op#",")"],"#fun#":["(","+","-","#col#","#fun#"],"not":["#col#","#fun#","not","("]};k=k||{};var k1=k.items||this.getItems(),l1,m1,n1,o1,p1,q1=k.from||0,r1=k.to||k1.length,s1=(q1===0&&r1===k1.length),t1=[],u1=[];if(k1.length>0){if(!b1()){u1.push({index:q1,title:_.getText("CALCULATION_BUILDER_FIRST_CHAR_ERROR_TEXT")});}if(!c1()){u1.push({index:r1-1,title:_.getText("CALCULATION_BUILDER_LAST_CHAR_ERROR_TEXT")});}}for(var i=q1;i<r1;i++){n1=k1[i];if(n1._getType()===H.Error){u1.push({index:i,title:_.getText("CALCULATION_BUILDER_SYNTAX_ERROR_TEXT")});continue;}i1();if(!k.skipCustomValidation&&n1._isFunction()){var v1=n1._getCustomFunction(),w1=f1(e1(n1));if(v1&&!v1.getUseDefaultValidation()){var x1=new D();this.getParent().fireValidateFunction({definition:w1,customFunction:v1,result:x1});q.merge(u1,x1.getErrors());}else{g1(w1);}}if(i<r1-1){o1=k1[i+1];l1=d1(k1[i]);m1=d1(o1);p1=o1?o1.getKey().toLowerCase():"";var y1=o1._isCustomOperator()||n1._isCustomOperator();if(j1[l1].indexOf(m1)===-1&&j1[l1].indexOf(p1)===-1&&!y1){var z1={index:i+1};if(n1._isOperator()&&o1._isOperator()){z1.title=_.getText("CALCULATION_BUILDER_BEFORE_OPERATOR_ERROR_TEXT",o1.getKey());}else if(!n1._isOperator()&&!o1._isOperator()){z1.title=_.getText("CALCULATION_BUILDER_BETWEEN_NOT_OPERATORS_ERROR_TEXT",[n1.getKey(),o1.getKey()]);}else if(n1.getKey()===")"&&!o1._isOperator()){z1.title=_.getText("CALCULATION_BUILDER_AFTER_CLOSING_BRACKET_ERROR_TEXT");}else if(!n1._isOperator()&&(o1.getKey()==="(")){z1.title=_.getText("CALCULATION_BUILDER_BEFORE_OPENING_BRACKET_ERROR_TEXT");}else{z1.title=_.getText("CALCULATION_BUILDER_CHAR_ERROR_TEXT");}u1.push(z1);}}if(n1._isFunction()){continue;}if(s1&&n1.getKey()===","){u1.push({index:i,title:_.getText("CALCULATION_BUILDER_WRONG_PARAMETER_MARK")});}if((n1._isOperator()&&n1.getKey()==="(")||n1._isFunction()){t1.push(i);}if(n1._isOperator()&&n1.getKey()===")"){if(t1.length===0){u1.push({index:i,title:_.getText("CALCULATION_BUILDER_OPENING_BRACKET_ERROR_TEXT")});}else{t1.pop();}}}for(i=0;i<t1.length;i++){u1.push({index:t1[i],title:_.getText("CALCULATION_BUILDER_CLOSING_BRACKET_ERROR_TEXT")});}return u1;};
a1.prototype._getType=function(k){return this.getParent()&&this.getParent()._getType(k);};
a1.prototype._moveItems=function(k,b1){var c1=[],d1=this.$(),e1=this.getItems(),f1=d1.find(".sapCalculationBuilderSelected"),g1,h1,i1,j1;if(this._isEmptySelected()){return;}j1=(f1.length>1)?q(f1[0]).children():f1.children();if(k===Z.KEY_PREVIOUS){h1=this._iFirstSelectedIndex-1;}else if(k===Z.KEY_NEXT){h1=this._iLastSelectedIndex+2;}else if(k===Z.MOUSE){h1=b1;}if(h1<0||h1===(e1.length+1)){return;}g1=this.$().find(".sapCalculationBuilderDelimiter[index=\""+h1+"\"]");for(var i=0;i<e1.length+1;i++){i1=e1[i];if(h1===i){j1.each(function(){var d1=q(this),i1;if(d1.hasClass("sapCalculationBuilderItem")){i1=sap.ui.getCore().byId(q(this)[0].id);c1.push(i1);i1._bMovingItem=true;d1.draggable("enable");}d1.css("left",0);d1.detach().insertAfter(g1).removeClass("");g1=d1;});}if(i1&&!i1.$().parent().hasClass("sapCalculationBuilderSelected")&&!i1._bMovingItem){c1.push(i1);}}f1.css("left","");d1.find(".sapCalculationBuilderDelimiter").each(function(i){q(this).attr("index",i);});this.removeAllAggregation("items",true);c1.forEach(function(i1,i){i1._bMovingItem=false;i1._iIndex=i;this.addAggregation("items",i1,true);}.bind(this));this._setupKeyboard();this._selectItems(j1.filter(function(i,el){return q(el).hasClass("sapCalculationBuilderItem");}));this._fireChange();};
a1.prototype._fireAfterValidation=function(){this.getParent().fireAfterValidation();};
a1.prototype._setItems=function(i){this.removeAllAggregation("items",true);(i||[]).forEach(function(k){this.addAggregation("items",this._convertFromNewItem(k),true);}.bind(this));};
a1.prototype._getKeyFromCreatedItem=function(i){return typeof i==="object"?i.getKey():i;};
a1.prototype._convertFromNewItem=function(i){return typeof i==="object"?i:new C({key:i});};
a1.prototype._showErrorIcon=function(){var i=this.$("erroricon"),k=this.getParent(),b1=k._createErrorText(null,true);if(b1){i.show();i.attr("title",k._createErrorText(null,true));}else{i.hide();}};
a1.prototype._smartRender=function(k){var b1="",c1=this.$(),d1=[],e1=this.getItems(),f1=e1.length;var g1=function(i1){i1=this._convertFromNewItem(i1);this.addAggregation("items",i1,true);i1._iIndex=i;if(c1[0]){b1+=i1._render();b1+=this._renderDelimiter(i+1);}i1.bOutput=true;d1.push(i1);}.bind(this);if(!this.getParent()._isExpressionVisible()){this._setItems(k);return;}this._bRendered=false;this._bIsCalculationBuilderRendering=true;this._deselect();for(var i=0;i<k.length;i++){var h1=e1[i],i1=k[i],j1=typeof i1==="object"&&i1.getKey?i1.getKey():i1,k1=i1._sType?i1._sType:"";if(!h1){g1(k[i]);}else if(h1.getKey()!==j1||h1._sType!==k1){h1.setKey(j1,true);h1._sType=k1;var l1=h1.$();l1[0].innerHTML=h1._innerRender();l1.attr("class",h1._getClass());l1.attr("title",h1._getTooltip());h1._setEvents();}}if(k.length<f1){for(var i=k.length;i<e1.length;i++){var l1=e1[i].$();l1.next().remove();l1.remove();this.removeAggregation("items",e1[i],true);}}if(c1[0]&&d1.length>0){c1.find(".sapCalculationBuilderDelimiter").last().after(b1);d1.forEach(function(h1){h1._afterRendering();});this._setupDroppable(c1.find(".sapCalculationBuilderDroppable").filter(function(){return parseInt(q(this).attr("index"),10)>f1;}));}this._bRendered=true;this._setupKeyboard();this._setupNewButtonEvents();this._bIsCalculationBuilderRendering=false;};
a1.prototype._fireChange=function(){this.fireEvent("change");};
return a1;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderFunction',["./library","sap/ui/core/Control"],function(l,C){"use strict";
var a=C.extend("sap.suite.ui.commons.CalculationBuilderFunction",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},useDefaultValidation:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"item"}}}});
a.prototype._getLabel=function(){return this.getLabel()||this.getKey();};
return a;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderGroup',["./library","sap/ui/core/Control"],function(l,C){"use strict";
var a=C.extend("sap.suite.ui.commons.CalculationBuilderGroup",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null}},events:{setSelection:{parameters:{key:"string"}}},aggregations:{customView:{type:"sap.ui.core.Control",multiple:false}}}});
a.prototype._getTitle=function(){return this.getTitle()||this.getKey();};
return a;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderInput',["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","./CalculationBuilderItem","sap/m/List","sap/m/ListMode","sap/m/StandardListItem","sap/m/Popover","sap/m/PlacementType","sap/m/Button","sap/m/ButtonType","sap/m/Menu","sap/m/MenuButton","sap/m/MenuItem","sap/m/OverflowToolbar","sap/m/ToolbarSeparator","sap/m/ToolbarSpacer","sap/m/Title","sap/m/OverflowToolbarToggleButton","sap/ui/core/CustomData","sap/ui/model/Sorter","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/dom/containsOrEquals"],function(q,l,C,a,L,b,S,P,c,B,d,M,f,g,O,T,h,j,k,m,n,J,D,o){"use strict";var E="&nbsp;&nbsp;";var p="â”˜â”˜";var I=l.CalculationBuilderItemType,V=l.CalculationBuilderValidationMode;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var s=function(e){if(typeof e.which==="undefined"){return true;}else if(typeof e.which==="number"&&e.which>0){return!e.ctrlKey&&!e.metaKey&&!e.altKey&&e.which!==8;}return false;};var G=function(e,R){var N,u="",i=0;if(e instanceof q){e=e[0];}var v=e.nodeType;if(!v){while((N=e[i++])){u+=G(N,R);}}else if(v===1||v===9||v===11){for(e=e.firstChild;e;e=e.nextSibling){u+=G(e,R);}}else if(v===3||v===4){u+=R&&q(e).parent().hasClass("sapCalculationBuilderItemTextEmpty")&&e.nodeValue==="Â Â "?"â”˜â”˜":e.nodeValue;}return u;};
var t=C.extend("sap.suite.ui.commons.CalculationBuilderInput",{
metadata:{library:"sap.suite.ui.commons",events:{change:{parameters:{value:"String",position:"integer",validate:"boolean"}}}},
renderer:function(R,i){var e="contenteditable=\"true\"";if(i.getParent().getShowInputToolbar()&&!i._bReadOnly){R.write("<div class=\"sapCalculationBuilderInputToolbarWrapper\">");R.renderControl(i._oInputToolbar);R.write("</div>");}R.write("<div");R.writeControlData(i);R.addClass("sapCalculationBuilderInputWrapper");if(i._bReadOnly){e="";}R.writeClasses(i);R.write(" aria-label=\"\" >");R.write("<div aria-label=\"\" aria-describedby=\""+i.getId()+"-error\" spellcheck=\"false\""+e+" id=\""+i.getId()+"-input\" class=\"sapCalculationBuilderInput\"></div>");R.write("<div id=\""+i.getId()+"-error\" class=\"sapCalculationBuilderInputErrorArea\"></div>");R.write("</div>");}
});
t.prototype.init=function(){this._setupSuggestionList();this._iCarretPosition=0;this._sSuggestionText="";this._aVariables=[];this._oInputToolbar=new O(this.getId()+"-toolbar").addStyleClass("sapCalculationBuilderInputToolbar");this.addDependent(this._oInputToolbar);};
t.prototype.exit=function(){if(this._oPopup){this._oPopup.destroy();}if(this._oInputToolbar){this._oInputToolbar.destroy();}};
t.prototype.onAfterRendering=function(){this._setupKeyPress();this._setupEvents();this._setupAriaLabel();};
t.prototype.onBeforeRendering=function(){this._aFunctions=this.getParent()._getAllFunctions();this._fillInputToolbar();};
t.prototype.getFocusDomRef=function(){return this.getDomRef("input");};
t.prototype._setupEvents=function(){var $=this.$("input");$.blur(function(){this._lastRangeSelection=this._getSelectionRange();}.bind(this));$.mouseup(function(e){this._iCarretPosition=this._getCaretPosition();}.bind(this));};
t.prototype._validate=function(e){var i=this.getParent();if(i&&i.getValidationMode()===V.FocusOut){this.getParent()._validateInput(G(this.$("input")),e?this._iCarretPosition:0);}};
t.prototype._setupKeyPress=function(){var i=this,u=this.getParent(),A=u&&u.getAllowSuggestions()&&D.system.desktop,v="paste input";if(D.browser.msie){v+=" keyup";}this.$("input").on('focus',function(){var $=q(this);$.data('before',G($[0]));}).on(v,function(e){var $=q(this),w=$.data('before'),x=e.key,y=G($[0]);if(i._oPopup.isOpen()&&x==="Enter"){return;}if(w!==y){var z=i._iCarretPosition=i._getCaretPosition();i._storeCurrent();i.fireChange({position:Math.max(0,z),value:G($[0],true)});if(A){i._checkSuggestions(z,y,s(e));if(i._sSuggestionText.length>0){i._filterSuggestionList(i._sSuggestionText);if(i._oSuggestionList.getItems().length===0){i._oPopup.close();}else{i._findCurrentSpan();if(!i._oPopup.isOpen()){var F=sap.ui.getCore().getConfiguration().getRTL(),H=q(i._oCurrentSpan),K=F?-($.width()-H.position().left-H.width()):H.position().left;var N=parseInt(K,10),Q=i.$("input").outerHeight()-(parseInt(q(i._oCurrentSpan).position().top,10)+q(i._oCurrentSpan).height())-10;i._iSuggestionSelectedIndex=-1;i._oPopup.setOffsetX(N);i._oPopup.setOffsetY(-Q);i._oPopup.openBy(i.getDomRef("input"));}}}}}});};
t.prototype._createItemSpan=function(K,e){var i=function(){if(!K){return"sapCalculationBuilderItemTextEmpty";}if(e){return"sapCalculationBuilderItemTextError";}if(this._isOperator(K)){return"sapCalculationBuilderItemTextOperator";}return"sapCalculationBuilderItemTextDefault";}.bind(this);var F=K?"text":"html";var N=q('<span />',{title:e?e.title:"","class":i(),"aria-hidden":D.browser.msie})[F](K||E);return N;};
t.prototype._findCurrentSpan=function(){var e;if(window.getSelection&&window.getSelection().getRangeAt){e=window.getSelection();this._oCurrentSpan=e.anchorNode.parentNode;if(!q(this._oCurrentSpan).is("span")){this._oCurrentSpan=this.$("input").children().first()[0];}}return this._oCurrentSpan;};
t.prototype._setupSuggestionList=function(){var e=new n({path:"grouptitle",descending:false,group:function(i){return i.getProperty("grouptitle");}});var A=function(K){var N=this._createItemSpan(K);q(this._oCurrentSpan).after(N);return N;}.bind(this);var u=function($){var i=$.innerText,v=this._sSuggestionText.toLowerCase(),w=v.length,x=i.toLowerCase(),N="",y=(" "+x).indexOf(" "+v),z;if(y>-1){N+=i.substring(0,y);z=i.substring(y,y+w);N+="<span class=\"sapMInputHighlight\">"+z+"</span>";N+=i.substring(y+w);}else{N=i;}return N;}.bind(this);this._oSuggestionList=new L({mode:b.SingleSelectMaster,showNoData:false,enableBusyIndicator:false,rememberSelections:false,items:{path:"/data",factory:function(i,v){var w=v.getProperty(v.oModel.sPath),x=new S({title:w.title,customData:[new m({key:"key",value:w.key})]});x.addStyleClass("sapCalculationBuilderSuggestionItem");return x;},sorter:e},selectionChange:function(v){var w=v.getParameter("listItem"),x,y,F,K,z;if(w){K=w.getCustomData()[0].getValue();F=this._getFunction(K);q(this._oCurrentSpan).text(F?K+"(":K+"");q(this._oCurrentSpan).removeClass("sapCalculationBuilderItemTextError").addClass("sapCalculationBuilderItemTextDefault");this._iCarretPosition+=(K||"").length+1;if(F){z=this._getFunctionTemplateItems(F);x=z.length;if(x>0){z.forEach(function(K,i){this._oCurrentSpan=A(K)[0];if(!K&&!y){y=this._oCurrentSpan;}if(!y&&K){this._iCarretPosition+=K.length;}if(K&&i!==x-1){this._oCurrentSpan=A(" ");}}.bind(this));}else{y=this._oCurrentSpan=A("")[0];}var H=A(")");if(!y){this._oCurrentSpan=H[0];}}this._storeCurrent();var N=y||this._oCurrentSpan,Q=(N&&N.textContent&&N.textContent.length)||0;this.fireChange({position:this._getCaretPosition(N,F?1:Q),value:G(this.$("input")[0],true)});}this._oPopup.close();}.bind(this)});this._oSuggestionList.addEventDelegate({onAfterRendering:function(){this._oSuggestionList.$().find(".sapMDLILabel, .sapMSLITitleOnly, .sapMDLIValue").each(function(){this.innerHTML=u(this);});}.bind(this)});this._oPopup=new P(this.getId()+"-popup",{contentWidth:"300px",showArrow:false,showHeader:false,placement:c.Vertical,horizontalScrolling:true,content:this._oSuggestionList,initialFocus:this}).attachAfterClose(function(i){this._clearSuggestion();}.bind(this));};
t.prototype._checkSuggestions=function(e,u,v){var w=u[Math.max(e-1,0)];var x=function(w){return this._isOperator(w)||this._isEmptySpace(w);}.bind(this);if(!w||x(w)){this._clearSuggestion();return;}var W=v?w:"",y=v?2:1;e=Math.max(e,0);for(var i=e-y;i>=0;i--){if(x(u[i])){break;}W=u[i]+W;}for(i=e;i<u.length;i++){if(x(u[i])){break;}W=W+u[i];}if(!W){this._clearSuggestion();}this._sSuggestionText=W||"";};
t.prototype._clearSuggestion=function(){this._sSuggestionText="";this._oCurrentSpan={};this._oPopup.close();};
t.prototype._filterSuggestionList=function(e){var i=[];var A=function(K,v,w,x){var y=(v||K).toLowerCase(),z=e.toLowerCase();if((" "+y).indexOf(" "+z)!==-1){i.push({title:v||K,key:K,type:w,grouptitle:x});}};var u=this.getParent();u.getOperators().forEach(function(v){A(v.getKey(),v.getText(),I.CustomOperator,r.getText("CALCULATION_BUILDER_OPERATORS_TITLE"));});this._aVariables.forEach(function(v){var w=v.getGroup(),x,y=r.getText("CALCULATION_BUILDER_VARIABLES_TITLE");if(w){x=u.getGroups().filter(function(z){return z.getKey()===w;})[0];y=x?x.getTitle():y;}A(v.getKey(),v.getLabel(),I.Variable,y);});this._aFunctions.forEach(function(v){A(v.key,v.title,I.Function,r.getText("CALCULATION_BUILDER_FUNCTIONS_TITLE"));});i.sort(function(v,w){return v.title.toUpperCase()<w.title.toUpperCase()?-1:1;});this._oSuggestionList.setModel(new J({"data":i}));};
t.prototype._getCaretPosition=function(u,v){var R,w,x,A=0;var y=function(N){return(u&&N===u)||(!u&&(N===w.anchorNode||N===w.anchorNode.parentNode));};var z=function(N){var F;if(y(N)){return false;}if(N.nodeType===3){A+=N.textContent.length;}else{for(var i=0;i<N.childNodes.length;i++){F=N.childNodes[i];if(y(F)){return false;}A+=F.textContent.length;}}return true;};try{if(window.getSelection&&window.getSelection().getRangeAt){R=window.getSelection().getRangeAt(0);w=window.getSelection();x=this.$("input")[0].childNodes;for(var i=0;i<x.length;i++){if(!z(x[i])){break;}}return(v||R.startOffset)+A;}}catch(e){return this._iCarretPosition;}return 0;};
t.prototype._getSelectionRange=function(){var i,u=0,v=this.$("input")[0];if(typeof window.getSelection!=="undefined"){try{var R=window.getSelection().getRangeAt(0),w=R.cloneRange();if(!o(v,R.startContainer)){return this._lastRangeSelection;}w.selectNodeContents(v);w.setEnd(R.startContainer,R.startOffset);i=w.toString().length;u=i+R.toString().length;}catch(e){u=i=this._iCarretPosition||0;}}return{start:i,length:u-i};};
t.prototype._setCaretPosition=function(e){var u=window.getSelection(),$=this.$("input"),v,R,w,F,x;var y=function(x){var z=$.children(),A,H,K=0;for(var i=0;i<z.length;i++){A=z[i];H=A.innerText||"";if(K+H.length>x){return{spanIndex:i,position:K+H.length-x};}K+=H.length;}return{spanIndex:Math.max(i-1,0),position:100};};if(typeof e==="number"){e=y(e);}w=e&&e.span;if(e){v=$[0];if(!w){w=v&&v.children&&v.children.length>e.spanIndex?v.childNodes[e.spanIndex]:null;}if(w){R=document.createRange();F=w.firstChild?w.firstChild:w;x=Math.min(F.length,e.position);R.setStart(F,x);R.collapse(true);u.removeAllRanges();u.addRange(R);}}};
t.prototype._recreateText=function(e){var u=function(Q){var R;if(Q){if(!this._isEmptySpace(Q)){R=q.grep(e.errors,function(U){return U.index===y;})[0];}if(Q==="â”˜"){Q="";}H+=this._createItemSpan(Q,R)[0].outerHTML;if(!this._isEmptySpace(Q)){y++;}F++;}}.bind(this);var v=function(){for(;i<x.length;i++){w();if(!this._isEmptySpace(x[i])&&x[i]!=="("){i--;break;}W+=x[i];if(x[i]==="("){break;}}u(W);W="";}.bind(this);var w=function(Q){if(!K&&e.position===i){K={spanIndex:F-(Q||0),position:Q||W.length};}};var H="",x,y=0,A=this.getParent().getAllowStringConstants(),z=false,F=0,K=null,W="",N;x=e.text||G(this.$("input")[0],true);for(var i=0;i<x.length;i++){N=x[i];w();if(N==="\""&&A){z=!z;}if(z){W+=N;continue;}if(N==="â”˜"||this._isEmptySpace(N)||this._isOperator(N)){if(this._isFunction(W)){v();}else{u(W);u(N);W="";}if(N==="â”˜"){i++;w(1);}}else{W+=N;}}u(W);var $=this.$("input");$.html(H);if($.is(":focus")){this._showErrorText(true,e.errors);}if(e.position>0){this._setCaretPosition(K||{spanIndex:F-1,position:Number.MAX_SAFE_INTEGER});}};
t.prototype._setupAriaLabel=function(){var e,i,A;if(D.browser.msie){return;}e=this.getParent();i=e._oExpressionBuilder._aErrors;A=r.getText("CALCULATION_BUILDER_EXPRESSION_TITLE")+": "+e.getExpression();if(i.length>0){A+=". "+r.getText("CALCULATION_BUILDER_ERROR_TITLE")+": ";i.forEach(function(u){A+=u.title+" ";});}this.$().attr("aria-label",A);};
t.prototype._showErrorText=function(e,i){var $=this.$("error"),u=this.getParent();i=i||u.getErrors();if((i&&i.length>0)&&e){$.show();$.text(u._createErrorText());}else{$.hide();}};
t.prototype._stringToItems=function(e){var i=[],u="",v="",w=0,x=false;var y=function(){var F,H="";if(v){F=this._getFunction(v);if(F){if(e[w]!=="("){H=I.Error;for(;w<e.length;w++){if(e[w]==="("){H="";break;}if(!this._isEmptySpace(e[w])){w--;break;}}}}var K=new a({key:v});K._sType=H;i.push(K);}v="";return!!F||!!H;}.bind(this);if(typeof e==="undefined"){var z=this.$("input")[0];e=z?G(this.$("input")[0],true):"";}for(;w<e.length;w++){u=e[w];if(u==="\""&&this.getParent().getAllowStringConstants()){v+="\"";if(x){i.push(new a({key:v}));v="";}x=!x;continue;}if(x){v+=u;continue;}if(u==="â”˜"){i.push(new a());w++;continue;}if(this._isEmptySpace(u)){if(v){y();}continue;}var N=e[w+1];if(N&&this._isOperator(u+N,false)){u+=N;w++;}var A=this._isOperator(u,false);if(A){if(y()){continue;}i.push(new a({key:u}));}else{v+=u;}}y();return i;};
t.prototype._itemsToString=function(e){var u=e.items,v="",w="",x=e.createInputText!==false,y,z;for(var i=0;i<u.length;i++){var A=u[i],K=A.getKey(),F=this._isFunction(K);if(x){y=q.grep(e.errors,function(A){return A.index===i;})[0];}var H=K!==","&&K!==")"&&z!=="("&&z;if(x){H?w+=this._createItemSpan(" ",y)[0].outerHTML:"";w+=this._createItemSpan(K+(F?"(":""),y)[0].outerHTML;}v+=(H?" ":"")+K+(F?"(":"");z=F?"(":K;}if(x){this.$("input").html(w);}return v;};
t.prototype.onfocusin=function(e){if(this._bSetCaretOnFocus){this._setCaretPosition(this._iCarretPosition);}this._bSetCaretOnFocus=false;this._showErrorText(true);};
t.prototype.onsapfocusleave=function(e){if(e.relatedControlId&&o(this._oPopup.getDomRef(),sap.ui.getCore().byId(e.relatedControlId).getFocusDomRef())){if(sap.ui.getCore().isMobile()||D.browser.safari){this._bSetCaretOnFocus=true;}this.focus();}else{this._showErrorText(false);this._validate(false);}};
t.prototype.onsappageup=function(e){this._suggestionListKeyHandling({event:e,add:true,toEnd:true});if(!this._oPopup.isOpen()){this._iCarretPosition=G(this.$("input")).length-1;}};
t.prototype.onsapnext=function(e){if(this._iCarretPosition<G(this.$("input")).length-1){this._iCarretPosition++;}};
t.prototype.onsapprev=function(e){if(this._iCarretPosition>0){this._iCarretPosition--;}};
t.prototype.onsappagedown=function(e){this._suggestionListKeyHandling({event:e,add:false,toEnd:true});if(!this._oPopup.isOpen()){this._iCarretPosition=0;}};
t.prototype.onsapdown=function(e){this._suggestionListKeyHandling({event:e,add:true});};
t.prototype.onsapescape=function(e){if(this._oPopup.isOpen()){this._oPopup.close();}};
t.prototype.onsapup=function(e){this._suggestionListKeyHandling({event:e,add:false});};
t.prototype.onsapenter=function(e){if(this._oPopup.isOpen()){this._oSuggestionList.fireSelectionChange({listItem:this._oSuggestionList.getSelectedItem()});}else{this._validate(true);}e.preventDefault();e.stopPropagation();};
t.prototype._suggestionListKeyHandling=function(e){var i=e.event,A=e.add,u=e.toEnd,v,w;if(!this._oPopup.isOpen()||!i){return;}A?this._iSuggestionSelectedIndex++:this._iSuggestionSelectedIndex--;v=this._oSuggestionList.$().find(".sapCalculationBuilderSuggestionItem");w=v.length;if((this._iSuggestionSelectedIndex<0)||(!A&&u)){this._iSuggestionSelectedIndex=w-1;}else if((this._iSuggestionSelectedIndex>=w)||(A&&u)){this._iSuggestionSelectedIndex=0;}this._oSuggestionList.removeSelections(true);sap.ui.getCore().byId(v[this._iSuggestionSelectedIndex].id).setSelected(true).focus();i.preventDefault();i.stopPropagation();};
t.prototype._displayError=function(e){this.$("input")[e?"addClass":"removeClass"]("sapCalculationBuilderInputError");};
t.prototype._insertItemFromToolbar=function(K){var $=this.$("input"),e,N,R;var i=" "+K+" ",F=this._getFunction(K),u=i.length,v;var w=function(){return{start:$.text().length,length:0};};R=this._getSelectionRange()||w();$.focus();this._lastRangeSelection={};e=G($[0],true);if(e[R.start]==="â”˜"&&e[R.start-1]==="â”˜"&&R.length===0){R.start--;R.length+=2;}if(F){i=" "+K+"(";v=this._getFunctionTemplateItems(F);if(v.length>0){v.forEach(function(K){i+=K?K:p;});}else{i+=p;}i+=") ";u=i.indexOf(p)+1;}N=[e.slice(0,R.start),i,e.slice(R.start+R.length)].join('');this.fireChange({value:N,position:R.start+u});this._storeCurrent();};
t.prototype._convertEmptyHashes=function(e){return e?e.replace(new RegExp(p,'g'),"  "):"";};
t.prototype._fillInputToolbar=function(){var e=function(X,Y){return new B({type:d.Transparent,text:X==="*"?"x":X,press:this._insertItemFromToolbar.bind(this,X)}).addStyleClass("sapCalculationBuilderInputToolbarButtons "+Y);}.bind(this);var i=function(X){if(X){return X.map(function(Y){return new g({key:Y.getKey(),text:Y._getLabel()});}).sort(function(Y,Z){return Y.getText().localeCompare(Z.getText());});}return[];};var u=function(X){return X.map(function(Y){return new g({key:Y.getKey(),text:Y.getText()?Y.getText():Y.getKey()});}).sort(function(Y,Z){return Y.getText().localeCompare(Z.getText());});};var v=function(X){return X.map(function(Y){return new g({key:Y,text:Y});});};var w=function(){var H=this.getParent(),X=H.getAllowComparisonOperators(),Y=H.getAllowLogicalOperators(),Z=H.getOperators(),$=Z.length>0,_,a1,b1,c1=[];if(X){_=v(Object.keys(z));c1.push(new g({text:r.getText("CALCULATION_BUILDER_COMPARISON_TITLE"),items:_}));}if(Y){a1=v(Object.keys(A));c1.push(new g({text:r.getText("CALCULATION_BUILDER_LOGICAL_TITLE"),items:v(Object.keys(A))}));}if($){b1=u(Z);c1.push(new g({text:r.getText("CALCULATION_BUILDER_ADDITIONAL_OPERATOR"),items:b1}));}if(c1.length>1){return c1;}if(X){return _;}if(Y){return a1;}if($){return b1;}return[];}.bind(this);var x=function(X){return new f({text:X,menu:new M({itemSelected:function(Y){this._insertItemFromToolbar(Y.getParameters().item.getKey());}.bind(this)})}).addStyleClass("sapCalculationBuilderInputToolbarFunctionMenu").addStyleClass("sapCalculationBuilderInputToolbarMenuButtons");}.bind(this);var y=l.CalculationBuilderOperatorType,z=l.CalculationBuilderComparisonOperatorType,A=l.CalculationBuilderLogicalOperatorType,F=w(),H=this.getParent(),K=!!H.getTitle()&&(H.getLayoutType()===l.CalculationBuilderLayoutType.TextualOnly),N;this._oInputToolbar.removeAllContent();this._oInputToolbar.addContent(new j({text:H.getTitle(),visible:K}));this._oInputToolbar.addContent(new h());Object.keys(y).forEach(function(X){this._oInputToolbar.addContent(e(y[X],""));}.bind(this));this._oInputToolbar.addContent(new T().addStyleClass("sapUiSmallMarginBeginEnd"));if(F.length>0){this._oInputToolbar.addContent(new f({text:r.getText("CALCULATION_BUILDER_OPERATORS_TITLE"),menu:new M({itemSelected:function(X){this._insertItemFromToolbar(X.getParameters().item.getKey());}.bind(this),items:F})}).addStyleClass("sapCalculationBuilderInputToolbarMenuButtons"));}N=this._aFunctions.map(function(X){return new g({key:X.key,text:X.title});});var Q=x(r.getText("CALCULATION_BUILDER_FUNCTIONS_AND_VARIABLES_TITLE"));if(N.length>0){Q.getMenu().addItem(new g({text:r.getText("CALCULATION_BUILDER_FUNCTIONS_TITLE"),items:[N]}));}var R=H._getGroupMap(),U=H.getGroups(),W=R["##DEFAULT##"];if(W&&W.length>0){Q.getMenu().addItem(new g({text:r.getText("CALCULATION_BUILDER_VARIABLES_TITLE"),items:i(W)}));}U.forEach(function(X){var Y=R[X.getKey()];if(Y&&Y.length>0){Q.getMenu().addItem(new g({text:X._getTitle(),items:i(Y)}));}});this._oInputToolbar.addContent(Q);};
t.prototype._isOperator=function(e,A){return this.getParent()&&this.getParent()._isOperator(e,A);};
t.prototype._getFunctionTemplateItems=function(F){return this.getParent()._getFunctionTemplateItems(F);};
t.prototype._isEmptySpace=function(e){return e===String.fromCharCode(160)||e===" ";};
t.prototype._isEmptyItem=function(e){return e===E;};
t.prototype._getText=function(){return this.$("input").text();};
t.prototype._isFunction=function(K){return!!this._getFunction(K);};
t.prototype._getFunction=function(K){var e=this.getParent();return e&&e._isTokenAllowed(K)&&e._getFunctionDefinition(K);};
t.prototype._storeCurrent=function(v){var $=this.$("input");$.data('before',$.text());};
return t;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderItem',["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/m/MessageBox","sap/base/security/encodeXML","./Utils","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-draggable"],function(q,l,C,M,e,U){"use strict";var I=l.CalculationBuilderItemType,O=l.CalculationBuilderOperatorType,L=l.CalculationBuilderLogicalOperatorType;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var a=C.extend("sap.suite.ui.commons.CalculationBuilderItem",{
constructor:function(i,s){if(typeof i!=="string"&&i!==undefined){s=i;}if(s&&s.key){s.key=this._sanitizeKey(s.key);}C.apply(this,arguments);},
metadata:{library:"sap/suite/ui/commons",properties:{key:{type:"string",group:"Misc",defaultValue:null}}},
renderer:function(R,i){R.write(i._render());}
});
a.prototype._innerRender=function(){var h="",A="",s=this._getLabel(),i={"!=":"NOT_EQUAL","-":"MINUS",",":"COMMA"};var R=function(){h+="<div class=\"sapCalculationBuilderItemFocusWrapper\">";h+="<div class=\"sapCalculationBuilderItemFocus\"></div>";h+="</div>";};var f=function(){h+="<div class=\"sapCalculationBuilderItemExpandButtonWrapper\" title=\""+r.getText("CALCULATION_BUILDER_EXPAND_BUTTON_TITLE")+"\">";h+="<div id=\""+this.getId()+"-expandbutton\" class=\"sapCalculationBuilderItemExpandButton "+(this._bReadOnly?"sapMBtnDisabled":"")+"\" tabindex=\"-1\">";if(!this._bReadOnly){h+="<div class=\"sapCalculationBuilderItemExpandButtonFocus\"></div>";}b("î‡¹");h+="</div></div>";}.bind(this);var b=function(c){h+="<span aria-hidden=\"true\" data-sap-ui-icon-content=\""+c+"\" class=\"sapCalculationBuilderEmptyItemIcon sapUiIcon sapUiIconMirrorInRTL\" style=\"font-family:'SAP-icons'\"></span>";};var g=function(t){return" aria-label=\""+r.getText(t)+"\" ";};if(this._bIsNew||this._isEmpty()){A=" title=\""+r.getText("CALCULATION_BUILDER_NEW_ITEM_TITLE")+"\" ";}else if(i[s]){A=g("CALCULATION_BUILDER_"+i[s]+"_ARIA_LABEL");}h+="<div class=\"sapCalculationBuilderItemContentWrapper\">";h+="<div id=\""+this.getId()+"-content\" class=\"sapCalculationBuilderItemContent\""+A+">";R();if(this._isEmpty()){b("î€¸");h+="</div>";}else if(this._bIsNew){b("î€¸");h+="</div>";}else if(this._isFunction()){var F=this._getFunction();h+="<span class=\"sapCalculationBuilderItemLabel sapCalculationBuilderItemFunctionLabel\">";h+=e(F.title||this.getKey());h+="</span>";h+="<span class=\"sapCalculationBuilderItemLabel sapCalculationBuilderItemFunctionBracket\">";h+="&nbsp;(";h+="</span>";h+="</div>";}else{h+="<span class=\"sapCalculationBuilderItemLabel\">";h+=e(s);h+="</span>";h+="</div>";}h+="</div>";if(this._isVariable()&&this.isExpandable()){f();}return h;};
a.prototype._getClass=function(h){var c="",i=this._isEmpty();c+=this._bIsNew?"sapCalculationBuilderNewItem  sapCalculationBuilderCancelSelectable":"sapCalculationBuilderItem";if(i){c+=" sapCalculationBuilderNewItem ";}if(this._isBracket()){c+=" sapCalculationBuilderItemBracket ";}else if(this._isOperator()){c+=" sapCalculationBuilderItemOperator sapCalculationBuilderItemOperatorLength-"+this._getLabel().length+" ";if(this._isLogicalOperator()){c+=" sapCalculationBuilderItemLogicalOperator ";}}else if(this._isCustomOperator()){c+=" sapCalculationBuilderItemOperator sapCalculationBuilderItemCustomOperator ";}else if(this._isFunction()){c+=" sapCalculationBuilderItemFunction ";}else if(this._isConstant()){c+=" sapCalculationBuilderItemConstant ";}else if(this._isVariable()){c+=" sapCalculationBuilderItemVariable ";if(this.isExpandable()){c+=" sapCalculationBuilderItemVariableSeparator ";}}else{c+=" sapCalculationBuilderUnknownItem ";}if(h){c+=" sapCalculationBuilderItemErrorSyntax ";}return c;};
a.prototype._render=function(){if(!this.getParent()){return;}var i=this._hasCorrectParent(),E=this._getItemError(),t=this._getTooltip(),T=t?"title=\""+t+"\"":"",h="";h+="<div class=\""+this._getClass(!!E)+"\" id=\""+this.getId()+"\" tabindex=\""+(i?"-1":"0")+"\""+T+">";h+=this._innerRender();h+="</div>";return h;};
a.prototype.init=function(){this._bIsNew=false;};
a.prototype.onBeforeRendering=function(){this._oVariable=this.getVariable();};
a.prototype.onAfterRendering=function(){this._afterRendering();};
a.prototype._afterRendering=function(){var p=this.getParent();if(!p){return;}this._setEvents();if(!this._bIsNew&&!this._bReadOnly){this._setupDraggable();}if(this._hasCorrectParent(p)){if(!p._bIsCalculationBuilderRendering){p._setupKeyboard();p.getParent()._enableOrDisableExpandAllButton();}}};
a.prototype._setEvents=function(){if(this.isExpandable()){this.$("expandbutton").click(this._expandButtonPress.bind(this));this.$("expandbutton").mousedown(function(E){E.stopPropagation();});}if(!this._bReadOnly){this.$("content").click(this._buttonPress.bind(this));}if(this._isBracket()||this._isFunction()){this._setBracketHover();}};
a.prototype._buttonPress=function(E){var p=this.getParent();if(this._hasCorrectParent(p)&&!p._bDragging){if(E.ctrlKey){p._selectItem(this.$());}else if(E.shiftKey){p._selectItemsTo(this.$());}else{p._deselect();p._openDialog({opener:this,currentItem:this});}}};
a.prototype._expandButtonPress=function(E){if(!this._bReadOnly){this._openExpandConfirmMessageBox();}};
a.prototype.isExpandable=function(){var v=this._oVariable?this._oVariable:this.getVariable();return v&&v.getItems().length>0;};
a.prototype.getVariable=function(){var p=this.getParent();return this._hasCorrectParent(p)&&p._getVariableByKey(this.getKey());};
a.prototype.getType=function(){return this._getType();};
a.prototype._setupDraggable=function(){var p=this.getParent(),$=p.$(),b=this.$();b.draggable({revert:"invalid",axis:"x",delay:100,cursor:"move",helper:function(c){var d=b.clone();d.addClass("sapCalculationBuilderDragging");d.css("pointer-events","none");return d;},scope:p.getId()+"-scope",start:function(){$.find(".sapCalculationBuilderBracket").removeClass("sapCalculationBuilderBracket");$.find(".sapCalculationBuilderItemContent").css("cursor","move");q(this).addClass("sapCalculationBuilderDragging");p._bDragging=true;if(!q(this).hasClass("ui-selected")){p._deselect();}},stop:function(){q(this).removeClass("sapCalculationBuilderDragging");$.find(".sapCalculationBuilderItemContent").css("cursor","pointer");p._bDragging=false;}});U._setupMobileDraggable(b);};
a.prototype._setBracketHover=function(){var $=this.$("content"),b=this._isFunction()?O["("]:this.getKey(),c=b===O[")"],t=c?O["("]:O[")"],T;$.mouseenter(function(E){var o,f,B=0,d=(this._hasCorrectParent()&&this.getParent().getItems())||[],i=c?d.length:0;for(;c?i>=0:i<d.length;(c?i--:i++)){o=d[i];if(o===this){f=true;}if(f){if((o.getKey()===t)||(o._isFunction()&&c)){B--;if(B===0){T=o;break;}}else if((o.getKey()===b)||(o._isFunction()&&!c)){B++;}}}if(T){this.$().addClass("sapCalculationBuilderBracket");T.$().addClass("sapCalculationBuilderBracket");}}.bind(this));$.mouseleave(function(E){this.$().removeClass("sapCalculationBuilderBracket");if(T){T.$().removeClass("sapCalculationBuilderBracket");}}.bind(this));};
a.prototype._expandVariable=function(f){var p=this.getParent(),t,v;if(p){t=p.getItems().indexOf(this);v=p._getVariableByKey(this.getKey());p.insertItem(new a({"key":"("}),t++);v.getItems().forEach(function(i){p.insertItem(i._cloneItem(),t++);});p.insertItem(new a({"key":")"}),t++);p.removeItem(this);if(f){p._aErrors=p._validateSyntax();p._fireChange();}}};
a.prototype._cloneItem=function(){return new a({key:this.getKey()});};
a.prototype._openExpandConfirmMessageBox=function(){M.show(r.getText("CALCULATION_BUILDER_EXPAND_MESSAGE_TEXT",this._getLabel()),{icon:M.Icon.WARNING,title:r.getText("CALCULATION_BUILDER_EXPAND_MESSAGE_TITLE"),actions:[M.Action.OK,M.Action.CANCEL],onClose:function(A){var p;if(A===M.Action.OK){this._expandVariable(true);}else{p=this.getParent();if(p){p._setCorrectFocus();}}}.bind(this)});};
a.prototype._getItemError=function(){var p=this.getParent(),E;if(this._hasCorrectParent(p)){E=q.grep(p._aErrors,function(i){return i.index===this._iIndex;}.bind(this))[0];}return E;};
a.prototype._getLabel=function(){var g=function(){if(this._isMultiplication()){return"X";}var i=this._getItem();if(!i){return this.getKey();}if(i.title){return i.title;}if(i._getLabel){return i._getLabel();}return i.getText()||i.getKey();}.bind(this);if(!this._sLabel){this._sLabel=g();if(this._isFunction()){this._sLabel+=" (";}}return this._sLabel;};
a.prototype._sanitizeKey=function(k){if(!k||typeof k!=="string"){return k;}k=k.replace(/{/g,"&#125;");k=k.replace(/}/g,"&#123;");return k;};
a.prototype._reset=function(){this._sType="";this._sLabel="";this._oVariable="";};
a.prototype.setKey=function(k,s){this._reset();this.setProperty("key",this._sanitizeKey(k),s);var p=this.getParent();if(p&&p._bRendered){p.getParent()&&p.getParent()._expressionChanged();}return this;};
a.prototype.getKey=function(){var k=this.getProperty("key");k=k.replace(/&#125;/g,"{");k=k.replace(/&#123;/g,"}");return k;};
a.prototype._getType=function(){var p=this.getParent();if(!this._sType&&p){this._sType=p._getType(this.getKey());}return this._sType;};
a.prototype._isEmpty=function(){return!this._bIsNew&&!this.getKey();};
a.prototype._isOperator=function(){return this._getType()===I.Operator;};
a.prototype._isSecondaryOperator=function(){var t=this._getType();if(this._getType()===I.Operator){return["+","-","/","x","(",")",","].indexOf(this.getKey())===-1;}return t===I.CustomOperator;};
a.prototype._isCustomOperator=function(){return this._getType()===I.CustomOperator;};
a.prototype._isVariable=function(){return this._getType()===I.Variable;};
a.prototype._isConstant=function(){return this._getType()===I.Constant;};
a.prototype._isFunction=function(){var t=this._getType();return t===I.Function||t===I.CustomFunction;};
a.prototype._getFunction=function(){var t=this._getType();if(t===I.Function||t===I.CustomFunction){var b=this.getParent().getParent();return b._createFunctionObject(b._getFunctionDefinition(this.getKey()));}return null;};
a.prototype._getItemInstance=function(t,c){if(this._getType()===t){var k=this.getKey(),b=this.getParent()[c]();return q.grep(b,function(i){return i.getKey().toLowerCase()===k.toLowerCase();})[0];}return null;};
a.prototype._getItem=function(){var t=this._getType();switch(t){case I.Variable:return this._getVariable();case I.CustomFunction:return this._getCustomFunction();case I.CustomOperator:return this._getCustomOperator();}return null;};
a.prototype._getTooltip=function(){var i=this._getItem();return i&&i.getTooltip_AsString?i.getTooltip_AsString():"";};
a.prototype._getVariable=function(){return this._getItemInstance(I.Variable,"getVariables");};
a.prototype._getCustomFunction=function(){return this._getItemInstance(I.CustomFunction,"getFunctions");};
a.prototype._getCustomOperator=function(){return this._getItemInstance(I.CustomOperator,"getOperators");};
a.prototype._isBracket=function(){return this._isOperator()&&(this.getKey()==="("||this.getKey()===")");};
a.prototype._isAddition=function(){return this._isOperator()&&this.getKey()==="+";};
a.prototype._isSubtraction=function(){return this._isOperator()&&this.getKey()==="-";};
a.prototype._isDivision=function(){return this._isOperator()&&this.getKey()==="/";};
a.prototype._isMultiplication=function(){return this._isOperator()&&this.getKey()==="*";};
a.prototype._isComma=function(){return this._isOperator()&&this.getKey()===",";};
a.prototype._isLogicalOperator=function(){return this._isOperator()&&!!L[this.getKey()];};
a.prototype._hasCorrectParent=function(p){p=p||this.getParent();return p instanceof sap.suite.ui.commons.CalculationBuilderExpression;};
return a;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderValidationResult',["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/base/ManagedObject"],function(q,l,C,M){"use strict";
var a=M.extend("sap.suite.ui.commons.CalculationBuilderValidationResult",{constructor:function(){M.prototype.constructor.apply(this,arguments);this._aErrors=[];}});
a.prototype.addError=function(e){this._aErrors.push(e);};
a.prototype.addErrors=function(e){q.merge(this._aErrors,e);};
a.prototype.getErrors=function(){return this._aErrors;};
return a;});
sap.ui.predefine('sap/suite/ui/commons/CalculationBuilderVariable',["./library","sap/ui/core/Control"],function(l,C){"use strict";
var a=C.extend("sap.suite.ui.commons.CalculationBuilderVariable",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},group:{type:"string",group:"Misc"}},aggregations:{items:{type:"sap.suite.ui.commons.CalculationBuilderItem",multiple:true,singularName:"Item"}}}});
a.prototype._getLabel=function(){return this.getLabel()||this.getKey();};
return a;});
sap.ui.predefine('sap/suite/ui/commons/ControlProxy',["./library","sap/ui/core/Control"],function(l,C){"use strict";
var a=C.extend("sap.suite.ui.commons.ControlProxy",{
metadata:{library:"sap.suite.ui.commons",association:{control:{type:"sap.ui.core.Control",multiple:false}}},
renderer:function(r,p){var i=p.getAssociation("control"),I=sap.ui.getCore().byId(i);r.renderControl(I);}
});
a.prototype.setAssociation=function(A,c){C.prototype.setAssociation.apply(this,arguments);var i=this.getAssociation("control"),I=sap.ui.getCore().byId(i);if(I&&Array.isArray(this.aCustomStyleClasses)){this.aCustomStyleClasses.forEach(function(s){I.addStyleClass(s);});}};
a.prototype.addStyleClass=function(c){C.prototype.addStyleClass.apply(this,arguments);var i=this.getAssociation("control"),I=sap.ui.getCore().byId(i);if(I){I.addStyleClass(c);}};
return a;});
sap.ui.predefine('sap/suite/ui/commons/MicroProcessFlow',["sap/ui/thirdparty/jquery",'./library','sap/ui/core/Control','sap/ui/core/Icon','sap/ui/base/ManagedObject','sap/ui/core/delegate/ItemNavigation',"sap/ui/core/ResizeHandler",],function(q,l,C,I,M,a,R){"use strict";var b=l.MicroProcessFlowRenderType;var L=function(i){return i[i.length-1];};
var c=C.extend("sap.suite.ui.commons.MicroProcessFlow",{
metadata:{library:"sap.suite.ui.commons",properties:{ariaLabel:{type:"string",defaultValue:null},renderType:{type:"sap.suite.ui.commons.MicroProcessFlowRenderType",defaultValue:sap.suite.ui.commons.MicroProcessFlowRenderType.Wrap},width:{type:"sap.ui.core.CSSSize",defaultValue:""}},aggregations:{content:{type:"sap.suite.ui.commons.MicroProcessFlowItem",multiple:true,singularName:"content"}}},
renderer:function(r,m){var d=m.getContent(),w=m.getWidth(),e=d.length;if(!m._bThemeApplied){return;}r.write("<div ");r.writeAttributeEscaped("role","listbox");r.writeControlData(m);if(w){r.addStyle("width",w);}r.writeStyles();r.addClass("sapSuiteUiCommonsMicroProcessFlow");r.writeClasses(m);r.write(">");if(m._hasScrolling()){r.write("<div tabindex=\"0\" id=\""+m.getId()+"-leftscroller\" class=\"sapSuiteUiCommonsMicroProcessFlowScroller sapSuiteUiCommonsMicroProcessFlowLeftScroller\">");r.renderControl(m._getLeftScroller());r.write("<span id=\""+m.getId()+"-leftlabel\" class=\"sapSuiteUiCommonsMicroProcessFlowLeftLabel\"></span>");r.write("</div>");}r.write("<div id=\""+m.getId()+"-content\" class=\"sapSuiteUiCommonsMicroProcessFlowContent\">");r.write("<div id=\""+m.getId()+"-scrolling\" class=\"sapSuiteUiCommonsMicroProcessFlowScrolling sapSuiteUiCommonsMicroProcessFlowScrollingTransition\"");if(m.getRenderType()===b.Wrap){r.addStyle("flex-wrap","wrap");r.writeStyles();}r.write(">");d.forEach(function(o,i){o._setAccessibilityData(i+1,e);r.renderControl(o);});r.write("</div>");r.write("</div>");if(m._hasScrolling()){r.write("<div tabindex=\"0\" id=\""+m.getId()+"-rightscroller\" class=\"sapSuiteUiCommonsMicroProcessFlowScroller sapSuiteUiCommonsMicroProcessFlowRightScroller\">");r.write("<span id=\""+m.getId()+"-rightlabel\" class=\"sapSuiteUiCommonsMicroProcessFlowRightLabel\"></span>");r.renderControl(m._getRightScroller());r.write("</div>");}r.write("</div>");}
});
c.prototype.onExit=function(){if(this._oLeftScroller){this._oLeftScroller.destroy();}if(this._oRightScroller){this._oRightScroller.destroy();}};
c.prototype.init=function(){sap.ui.getCore().attachThemeChanged(function(){this._bThemeApplied=true;this.invalidate();},this);this._bThemeApplied=sap.ui.getCore().isThemeApplied();this._iScrollingIndex=0;this._iLastVisibleIndex=0;this._aEdges=[];this._aWidths=[];};
c.prototype.onAfterRendering=function(){this._correctSeparatorWidth();this._setupKeyboard();if(this._hasScrolling()){this._setupScrolling();this._collectEdgesAndWidths();this._updateScrollingElements();if(this.getRenderType()===b.ScrollingWithResizer){this._oResizer=R.register(this,q.proxy(this._performResizeChanges,this));}}};
c.prototype._performResizeChanges=function(){this._collectEdgesAndWidths();this._updateScrollingElements();};
c.prototype._isLastItem=function(i){return i===this.getContent()[this.getContent().length-1];};
c.prototype._getMaxHeight=function(i){return Math.max.apply(null,this.$().find(".sapSuiteUiCommonsMicroProcessFlowItemWrapper").map(function(){return q(this).height();}).get());};
c.prototype._correctSeparatorWidth=function(){var m=this._getMaxHeight();if(m){this.getContent().forEach(function(i){var s=i.getStepWidth(),S;if(s.indexOf("%")!==-1){S=parseInt(s,10);if(!isNaN(S)){i.$("separator").width(m/S*100);}}},this);}};
c.prototype._firePress=function(){if(this._oItemNavigation){var i=this._oItemNavigation.getFocusedIndex(),d=this.getContent()[i];if(d){d._firePress();}}};
c.prototype._setupKeyboard=function(){var f=this.getDomRef(),d=this.getContent(),D=[];d.forEach(function(o,i){var $=o._getAccessibleItem();D.push($[0]);});if(!this._oItemNavigation){this._oItemNavigation=new a();this.addDelegate(this._oItemNavigation);}this._oItemNavigation.setRootDomRef(f);this._oItemNavigation.setItemDomRefs(D);this._oItemNavigation.setCycling(false);this._oItemNavigation.attachEvent(a.Events.AfterFocus,function(e){if(this._bKeyBoard===true){this._findEdgeItems(e.getParameter("index"));this._updateScrollingElements();}this._bKeyBoard=false;}.bind(this));};
c.prototype._hasScrolling=function(){var r=this.getRenderType();return r===b.Scrolling||r===b.ScrollingWithResizer;};
c.prototype._setupScrolling=function(){var $=this.$("leftscroller"),d=this.$("rightscroller");this._iScrollingIndex=0;this._iLastVisibleIndex=0;$.click(this._scroll.bind(this,-1));d.click(this._scroll.bind(this,1));this._iScrollingIndex<=0?$.hide():$.show();};
c.prototype._updateScrollingElements=function(d){var e=this.getContent(),$=this.$("leftscroller"),f=this.$("rightscroller");$[this._iScrollingIndex<=0?"hide":"show"]();this._iLastVisibleIndex=this._findLastVisibleItemIndex(d);f[this._iLastVisibleIndex>=e.length-1?"hide":"show"]();this.$("leftlabel").text(this._iScrollingIndex);this.$("rightlabel").text(e.length-1-this._iLastVisibleIndex);};
c.prototype._scroll=function(d){var e=this.getContent(),$=this.$("rightscroller"),f=this.$("leftscroller"),g=sap.ui.getCore().getConfiguration().getRTL(),E,t,r;var h=function(){if(d>0){var w=this.$("content").width()-(f.is(":visible")?0:f.width()),n=L(this._aEdges)+L(this._aWidths);if(E+w>n){E-=(E+w-n+$.width());for(var i=0;i<this._aEdges;i++){if(this._aEdges[i]+this._aWidths[i]>E){this._iScrollingIndex=i;break;}}}}}.bind(this);var j=function(){if(!g&&m[0].scrollLeft!=0){this._clearScroll(m);}if(g){r=m.scrollRightRTL();if(r){this._clearScroll(m);}}}.bind(this);var k=this.$("scrolling"),m=k.parent();this._bKeyBoard=false;if(d<0&&this._iScrollingIndex<=0){return;}j();(d<0)?$.show():f.show();this._iScrollingIndex+=d;E=this._aEdges[this._iScrollingIndex];h();t="translateX("+((g?1:-1)*E)+"px)";this.$("scrolling").css("transform",t);if(!k.hasClass("sapSuiteUiCommonsMicroProcessFlowScrollingTransition")){setTimeout(function(){k.addClass("sapSuiteUiCommonsMicroProcessFlowScrollingTransition");},0);}this._updateScrollingElements(d);j();};
c.prototype._clearScroll=function($){var i=sap.ui.getCore().getConfiguration().getRTL();if($&&$[0]){i?$.scrollLeftRTL($[0].scrollWidth-$[0].clientWidth):$[0].scrollLeft=0;}};
c.prototype._findLastVisibleItemIndex=function(d){var s=this._aEdges[this._iScrollingIndex],w=this.$("content").width(),W=w+this.$("rightscroller").width(),e,n=0,f;for(var i=0;i<this._aEdges.length;i++){e=this._aEdges[i];if(e+this._aWidths[i]-10<s+w){n=i;}else{if(e+this._aWidths[i]<s+W){f=true;}else{f=false;break;}}}return f&&d!==-1?this.getContent().length-1:n;};
c.prototype._collectEdgesAndWidths=function(){var s=0,h=0,w=this.$("content").width();this._aEdges=[];this._aWidths=[];this.getContent().forEach(function(o,i){var d=o.$().width();this._aEdges.push(s);this._aWidths.push(d);s+=d;},this);};
c.prototype._getLeftScroller=function(){if(!this._oLeftScroller){this._oLeftScroller=new I(this.getId()+"leftscroller",{src:"sap-icon://nav-back"});this._oLeftScroller.addStyleClass("sapSuiteUiCommonsMicroProcessFlowArrow");}return this._oLeftScroller;};
c.prototype._getRightScroller=function(){if(!this._oRightScroller){this._oRightScroller=new I(this.getId()+"rightscroller",{src:"sap-icon://navigation-right-arrow"});this._oRightScroller.addStyleClass("sapSuiteUiCommonsMicroProcessFlowArrow");}return this._oRightScroller;};
c.prototype._findEdgeItems=function(d){var $=this.$("scrolling"),e=$.parent(),f=this.$("leftscroller"),g=this.$("rightscroller"),h=this.getContent(),j=Math.abs($.position().left),w,E,F=-1,k=-1;if(j<10||d===0){F=0;this._clearScroll(e);}if(d===h.length-1){k=h.length-1;}w=$.width();for(var i=0;i<this._aEdges.length;i++){E=this._aEdges[i];if(F===-1&&E>=j){F=i;}if(k===-1&&(E+this._aWidths[i]>j+w+5)){k=i-1;break;}}this._iScrollingIndex=F;this._iLastVisibleIndex=k!==-1?k:h.length-2;};
c.prototype._processKeyPress=function(){if(this._hasScrolling()){var $=this.$("scrolling");this._bKeyBoard=true;$.removeClass("sapSuiteUiCommonsMicroProcessFlowScrollingTransition");$.css("transform","");}};
c.prototype.onsapspace=function(){this._firePress();};
c.prototype.onsapenter=function(){this._firePress();};
c.prototype.onsapnext=function(e){this._processKeyPress();};
c.prototype.onsapprevious=function(){this._processKeyPress();};
c.prototype.onsaphome=function(e){this._processKeyPress();};
c.prototype.onsapend=function(){this._processKeyPress();};
return c;});
sap.ui.predefine('sap/suite/ui/commons/MicroProcessFlowItem',["sap/ui/thirdparty/jquery",'./library','sap/ui/core/Control','sap/suite/ui/commons/MicroProcessFlow','sap/ui/core/ValueState'],function(q,l,C,M,V){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var D={"Error":"sap-icon://status-negative","None":null,"Success":"sap-icon://status-positive","Warning":"sap-icon://status-critical","Information":"sap-icon://status-inactive"};
var a=C.extend("sap.suite.ui.commons.MicroProcessFlowItem",{
metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Appearance",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:V.Standard},showIntermediary:{type:"boolean",group:"Appearance",defaultValue:false},stepWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:null},showSeparator:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{customControl:{type:"sap.ui.core.Control",multiple:false,singularName:"customControl"},intermediary:{type:"sap.ui.core.Control",multiple:false,singularName:"intermediary"}},events:{press:{allowPreventDefault:true,parameters:{item:"object"}}}},
onAfterRendering:function(){this._setupEvents();this._setAccessibility();},
renderer:function(R,m){var f=function(){R.write("<div");R.writeAttributeEscaped("id",m.getId()+"-separator");R.addClass("sapSuiteUiCommonsMicroProcessFlowItemSeparatorWrapper");R.writeClasses();R.addStyle("width",m._getStepWidth());R.writeStyles();R.write(">");R.write("<div ");R.addClass("sapSuiteUiCommonsMicroProcessFlowItemSeparator");if(!m.getShowSeparator()||I){R.addClass("sapSuiteUiCommonsMicroProcessFlowItemHiddenSeparator");}R.writeClasses();R.write("/>");if(S){b();}R.write("</div>");};var b=function(){var o=m.getIntermediary();R.write("<div class=\"sapSuiteUiCommonsMicroProcessFlowItemIntermediary\" >");if(o){R.renderControl(o);}else{R.write("<div class=\"sapSuiteUiCommonsMicroProcessFlowItemOnHoldElement\" />");}R.write("</div>");};var i=m.getIcon()||m._getIconByState(),I=m.getParent()._isLastItem(m),s=m.getId(),S=m.getShowIntermediary(),c=m.getCustomControl(),t=m.getTitle();R.write("<div ");R.addClass("sapSuiteUiCommonsMicroProcessFlowItemWrapper");R.writeClasses(m);R.writeControlData(m);R.write(">");R.write("<div");if(t){R.writeAttributeEscaped("title",t);}R.writeAttributeEscaped("id",s+"-item");R.writeAttribute("class","sapSuiteUiCommonsMicroProcessFlowItemContent");R.write(">");if(c){R.renderControl(c);}else{R.write("<div tabindex=\"0\" id=\""+s+"-itemContent\" class=\"sapSuiteUiCommonsMicroProcessFlowItem sapSuiteUiCommonsMicroProcessFlowItem"+m.getState()+"\"");R.writeAttributeEscaped("aria-label",m._getAriaText());R.write(">");if(i){R.renderControl(new sap.ui.core.Icon({tooltip:m.getTitle(),src:i}).addStyleClass("sapSuiteUiCommonsMicroProcessFlowItemIcon"));}R.write("</div>");}R.write("</div>");if(!I||S){f();}R.write("</div>");}
});
a.prototype.getFocusDomRef=function(){var c=this.getCustomControl();return c?c.getFocusDomRef():this.getDomRef("itemContent");};
a.prototype._setAccessibility=function(){var $=this._getAccessibleItem(),A=this._getAriaText();if($.attr("tabindex")!=="0"){$.attr("tabindex",0);}$.attr("aria-label",A);$.attr("aria-posinset",this._iIndex);$.attr("aria-setsize",this._iItemsCount);};
a.prototype._getAccessibleItem=function(){var $=q(this.getFocusDomRef());return $.attr("tabindex")==="0"?$:this.$("item");};
a.prototype._setupEvents=function(){var $=this.$("item"),h=this.hasListeners("press");$.on("touchstart click",this._click.bind(this));if(h){$.mousedown(function(e){q(this).addClass("sapSuiteUiCommonsMicroProcessFlowItemPressed");});$.mouseup(function(e){q(this).removeClass("sapSuiteUiCommonsMicroProcessFlowItemPressed");});}if(h){$.css("cursor","pointer");$.attr("role","button");}};
a.prototype._getAriaText=function(){var t=r.getText("MICRO_PROCESS_FLOW_ITEM");switch(this.getState()){case V.Error:t+=" - "+r.getText("MICRO_PROCESS_FLOW_ERROR");break;case V.Warning:t+=" - "+r.getText("MICRO_PROCESS_FLOW_WARNING");break;case V.Success:t+=" - "+r.getText("MICRO_PROCESS_FLOW_SUCCESS");break;case V.Information:t+=" - "+r.getText("MICRO_PROCESS_FLOW_INFORMATION");break;}if(this.getTitle()){t+=" - "+this.getTitle();}return t;};
a.prototype._isCompact=function(){return q("body").hasClass("sapUiSizeCompact")||this.$().is(".sapUiSizeCompact")||this.$().closest(".sapUiSizeCompact").length>0;};
a.prototype._getStepWidth=function(){var w=this.getStepWidth();if(!w){w=this._isCompact()?"1rem":"1.5rem";}return w;};
a.prototype._setAccessibilityData=function(i,I){this._iIndex=i;this._iItemsCount=I;};
a.prototype._click=function(e){var p=this.getParent();if(p){p._bKeyBoard=false;}this._firePress(e);};
a.prototype._firePress=function(e){if(this.hasListeners("press")){this.firePress({item:this.getFocusDomRef()});if(e.preventDefault){e.preventDefault();}if(e.stopPropagation){e.stopPropagation();}}};
a.prototype._getIconByState=function(){return D[this.getState()];};
return a;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/CropCustomShapeHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var C=H.extend("sap.suite.ui.commons.imageeditor.CropCustomShapeHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.x==="number","X must be a number.");a(typeof p.y==="number","Y must be a number.");a(typeof p.width==="number","Width must be a number.");a(typeof p.height==="number","Height value must be a number.");a(typeof p.oldWidth==="number","Old width value must be a number.");a(typeof p.oldHeight==="number","Old height value must be a number.");this._iX=p.x;this._iY=p.y;this._iWidth=p.width;this._iHeight=p.height;this._iOldWidth=p.oldWidth;this._iOldHeight=p.oldHeight;}});
C.prototype.getX=function(){return this._iX;};
C.prototype.getY=function(){return this._iY;};
C.prototype.getWidth=function(){return this._iWidth;};
C.prototype.getHeight=function(){return this._iHeight;};
C.prototype.getOldWidth=function(){return this._iOldWidth;};
C.prototype.getOldHeight=function(){return this._iOldHeight;};
C.prototype.compare=function(h){var m=["getWidth","getHeight"];return this._compare(h,m);};
return C;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/CropEllipseHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var C=H.extend("sap.suite.ui.commons.imageeditor.CropEllipseHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.x==="number","X must be a number.");a(typeof p.y==="number","Y must be a number.");a(typeof p.rx==="number","RX value must be a number.");a(typeof p.ry==="number","RY value must be a number.");a(typeof p.width==="number","Width must be a number.");a(typeof p.height==="number","Height value must be a number.");a(typeof p.oldWidth==="number","Old width value must be a number.");a(typeof p.oldHeight==="number","Old height value must be a number.");this._iX=p.x;this._iY=p.y;this._iRx=p.rx;this._iRy=p.ry;this._iWidth=p.width;this._iHeight=p.height;this._iOldWidth=p.oldWidth;this._iOldHeight=p.oldHeight;}});
C.prototype.getX=function(){return this._iX;};
C.prototype.getY=function(){return this._iY;};
C.prototype.getRx=function(){return this._iRx;};
C.prototype.getRy=function(){return this._iRy;};
C.prototype.getWidth=function(){return this._iWidth;};
C.prototype.getHeight=function(){return this._iHeight;};
C.prototype.getOldWidth=function(){return this._iOldWidth;};
C.prototype.getOldHeight=function(){return this._iOldHeight;};
C.prototype.compare=function(h){var m=["getWidth","getHeight"];return this._compare(h,m);};
return C;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/CropRectangleHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var C=H.extend("sap.suite.ui.commons.imageeditor.CropRectangleHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.x==="number","X must be a number.");a(typeof p.y==="number","Y must be a number.");a(typeof p.width==="number","Width must be a number.");a(typeof p.height==="number","Height value must be a number.");a(typeof p.oldWidth==="number","Old width value must be a number.");a(typeof p.oldHeight==="number","Old height value must be a number.");this._iX=p.x;this._iY=p.y;this._iWidth=p.width;this._iHeight=p.height;this._iOldWidth=p.oldWidth;this._iOldHeight=p.oldHeight;}});
C.prototype.getX=function(){return this._iX;};
C.prototype.getY=function(){return this._iY;};
C.prototype.getWidth=function(){return this._iWidth;};
C.prototype.getHeight=function(){return this._iHeight;};
C.prototype.getOldWidth=function(){return this._iOldWidth;};
C.prototype.getOldHeight=function(){return this._iOldHeight;};
C.prototype.compare=function(h){var m=["getWidth","getHeight"];return this._compare(h,m);};
return C;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/CustomSizeItem',["sap/ui/core/Element"],function(E){"use strict";
var C=E.extend("sap.suite.ui.commons.imageeditor.CustomSizeItem",{metadata:{properties:{width:{type:"float",defaultValue:0},height:{type:"float",defaultValue:0},label:{type:"string",defaultValue:""},icon:{type:"sap.ui.core.URI",defaultValue:""},relative:{type:"boolean",defaultValue:false}}}});
return C;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/FilterHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var F=H.extend("sap.suite.ui.commons.imageeditor.FilterHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.type==="string","Filter type must be a string.");a(typeof p.value==="number","Filter value must be a number.");a(typeof p.unit==="string","Filter unit must be a string.");this._sType=p.type;this._iValue=p.value;this._sUnit=p.unit;}});
F.prototype.getType=function(){return this._sType;};
F.prototype.getValue=function(){return this._iValue;};
F.prototype.getUnit=function(){return this._sUnit;};
F.prototype.compare=function(h){return false;};
return F;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/FilterUtils',[],function(){"use strict";var F=function(){};
F.grayscale=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*(0.2126+0.7874*(1-v))+g*(0.7152-0.7152*(1-v))+b*(0.0722-0.0722*(1-v));I.data[i+1]=r*(0.2126-0.2126*(1-v))+g*(0.7152+0.2848*(1-v))+b*(0.0722-0.0722*(1-v));I.data[i+2]=r*(0.2126-0.2126*(1-v))+g*(0.7152-0.7152*(1-v))+b*(0.0722+0.9278*(1-v));}};
F.sepia=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*(0.393+0.607*(1-v))+g*(0.769-0.769*(1-v))+b*(0.189-0.189*(1-v));I.data[i+1]=r*(0.349-0.349*(1-v))+g*(0.686+0.314*(1-v))+b*(0.168-0.168*(1-v));I.data[i+2]=r*(0.272-0.272*(1-v))+g*(0.534-0.534*(1-v))+b*(0.131+0.869*(1-v));}};
F.saturate=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*(0.213+0.787*v)+g*(0.715-0.715*v)+b*(0.072-0.072*v);I.data[i+1]=r*(0.213-0.213*v)+g*(0.715+0.285*v)+b*(0.072-0.072*v);I.data[i+2]=r*(0.213-0.213*v)+g*(0.715-0.715*v)+b*(0.072+0.928*v);}};
F.invert=function(I,v){var r,g,b,f,a,c;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];f=(255-r);a=(255-g);c=(255-b);I.data[i]=r-((r-f)*v);I.data[i+1]=g-((g-a)*v);I.data[i+2]=b-((b-c)*v);}};
F.brightness=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*v;I.data[i+1]=g*v;I.data[i+2]=b*v;}};
F.contrast=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*v+((-0.5*v)+0.5)*255;I.data[i+1]=g*v+((-0.5*v)+0.5)*255;I.data[i+2]=b*v+((-0.5*v)+0.5)*255;}};
F.hueRotate=function(I,v){var r,g,b;for(var i=0;i<I.data.length;i+=4){r=I.data[i];g=I.data[i+1];b=I.data[i+2];I.data[i]=r*(0.2126+Math.cos(v)*0.7874-Math.sin(v)*0.2126)+g*(0.7152-Math.cos(v)*0.7152-Math.sin(v)*0.7152)+b*(0.0722-Math.cos(v)*0.0722+Math.sin(v)*0.9278);I.data[i+1]=r*(0.2126-Math.cos(v)*0.2126+Math.sin(v)*0.143)+g*(0.7152+Math.cos(v)*0.285+Math.sin(v)*0.140)+b*(0.0722-Math.cos(v)*0.0722-Math.sin(v)*0.283);I.data[i+2]=r*(0.2126-Math.cos(v)*0.2126-Math.sin(v)*0.7874)+g*(0.7152-Math.cos(v)*0.7152+Math.sin(v)*0.7152)+b*(0.0722+Math.cos(v)*0.9278+Math.sin(v)*0.0722);}};
return F;},true);
sap.ui.predefine('sap/suite/ui/commons/imageeditor/FlipHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var F=H.extend("sap.suite.ui.commons.imageeditor.FlipHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.vertical==="boolean","Vertical must be a boolean.");a(typeof p.horizontal==="boolean","Horizontal value must be a bolean.");this._bVertical=p.vertical;this._bHorizontal=p.horizontal;}});
F.prototype.getVertical=function(){return this._bVertical;};
F.prototype.getHorizontal=function(){return this._bHorizontal;};
F.prototype.compare=function(h){return false;};
return F;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/HistoryItem',["sap/ui/base/Object"],function(B){"use strict";
var H=B.extend("sap.suite.ui.commons.imageeditor.HistoryItem",{metadata:{"abstract":true}});
H.prototype._isSameClass=function(h){return this.getMetadata().getName()===h.getMetadata().getName();};
H.prototype._compare=function(h,m){var t=this;return this._isSameClass(h)&&m.reduce(function(e,M){return t[M]()===h[M]();},true);};
return H;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ImageEditor',["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/suite/ui/commons/library","sap/ui/core/library","sap/m/library","sap/base/Log","sap/ui/Device","sap/m/MessageToast","sap/ui/core/Icon","./ResizeHistoryItem","./RotateHistoryItem","./CropRectangleHistoryItem","./CropEllipseHistoryItem","./CropCustomShapeHistoryItem","./FilterHistoryItem","./FlipHistoryItem","./FilterUtils","sap/ui/core/util/File","sap/suite/ui/commons/Utils","./ImageEditorRenderer","sap/ui/thirdparty/jqueryui/jquery-ui-draggable","sap/ui/thirdparty/jqueryui/jquery-ui-resizable"],function(q,C,l,a,M,L,D,b,I,R,c,d,e,f,F,g,h,j,S){"use strict";var k=l.ImageEditorMode,m=l.ImageFormat,r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var n=C.extend("sap.suite.ui.commons.imageeditor.ImageEditor",{metadata:{library:"sap.suite.ui.commons",properties:{src:{type:"any",defaultValue:""},customShapeSrc:{type:"any",defaultValue:""},mode:{type:"sap.suite.ui.commons.ImageEditorMode",defaultValue:k.Default},keepCropAspectRatio:{type:"boolean",defaultValue:true},keepResizeAspectRatio:{type:"boolean",defaultValue:true},scaleCropArea:{type:"boolean",defaultValue:false}},events:{loaded:{},error:{},customShapeLoaded:{},customShapeError:{},sizeChanged:{parameters:{width:{type:"int"},height:{type:"int"},originalWidth:{type:"int"},originalHeight:{type:"int"}}},cropAreaChanged:{parameters:{cropArea:{type:"object"},originalCropArea:{type:"object"}}},zoomChanged:{parameters:{zoom:{type:"int"}}},historyChanged:{history:{type:"sap.suite.ui.commons.imageeditor.HistoryItem[]"},index:{type:"int"}}}}});
n.LIMITS=Object.freeze({WIDTH_MIN:1,WIDTH_MAX:8192,HEIGHT_MIN:1,HEIGHT_MAX:8192,MAX_CANVAS_SIZE:67108864,MAX_SAFARI_MOBILE_CANVAS_SIZE:16777216,ROTATION_MIN:-360,ROTATION_MAX:360,SEPIA_MIN:0,SEPIA_MAX:100,GRAYSCALE_MIN:0,GRAYSCALE_MAX:100,SATURATE_MIN:0,SATURATE_MAX:500,INVERT_MIN:0,INVERT_MAX:100,BRIGHTNESS_MIN:0,BRIGHTNESS_MAX:500,CONTRAST_MIN:0,CONTRAST_MAX:500,CROP_AREA_MIN:1});n.ZOOM_MILESTONES=[5,10,25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500];var o=Object.freeze({CROP_AREA_SHORTER_SIDE_OFFSET:0.8,DEFAULT_ZOOM_MILESTONE:100});
n.prototype.init=function(){this._oCanvas=document.createElement("canvas");this._initCanvas();this._initOrigImg();this._initCustomShapeImg();this._fZoom=o.DEFAULT_ZOOM_MILESTONE;this._oSavedImg=document.createElement("canvas");this._oSavedImg.width=0;this._oSavedImg.height=0;};
n.prototype._initOrigImg=function(){var t=this;this._oOrigImg=new Image();this._oOrigImg.crossOrigin="Anonymous";this._oOrigImg.onload=function(){t._bImageLoaded=true;t._drawImage(t._oOrigImg);t._storeCurrentImg();t._applyExifOrientation();if(t._isReady()){t._onAfterIsReady();}if(t.getCustomShapeLoaded()&&!D.browser.msie){t._renderCustomShapeMask();}t.fireLoaded();};this._oOrigImg.onerror=function(E){t.fireError();};};
n.prototype._initCustomShapeImg=function(){var t=this;this._oCustomShapeImg=new Image();this._oCustomShapeImg.crossOrigin="Anonymous";this._oCustomShapeImg.onload=function(){t._bCustomShapeLoaded=true;t.$().addClass("sapSuiteUiCommonsImageEditorModeCropCustomShapeLoaded");t._renderCustomShapeMask();t.fireCustomShapeLoaded();};this._oCustomShapeImg.onerror=function(){t.fireCustomShapeError();};};
n.prototype._getExifOrientation=function(p){var s=new FileReader(),O,t,v,u,w,x,T,i,V,E,o={FIRST_CHECK:65496,SECOND_CHECK:9,THIRD_CHECK:65505,CORRECT_FORMAT_CHECK:1165519206,LITTLE_CHECK:18761,FOURTH_CHECK:65280,EXIF_CHECK:274,ERR_GENERAL:-1,ERR_FILE_FORMAT:-2,OFFSET_STEP:2,OFFSET_STEP_MED:4,OFFSET_STEP_BIG:6};return new Promise(function(y){s.onload=function(z){t=z.target.result;v=new DataView(t);u=v.byteLength;O=2;E=0;try{V=v.getUint16(0,false);if(V!==o.FIRST_CHECK){E=o.ERR_FILE_FORMAT;}while(!E&&O<=u-1){V=v.getUint16(O+o.OFFSET_STEP,false);if(V<o.SECOND_CHECK){E=o.ERR_GENERAL;break;}w=v.getUint16(O,false);O=O+2;if(w===o.THIRD_CHECK){V=v.getUint32(O+=o.OFFSET_STEP,false);if(V!==o.CORRECT_FORMAT_CHECK){E=o.ERR_GENERAL;break;}x=v.getUint16(O+=o.OFFSET_STEP_BIG,false)===o.LITTLE_CHECK;O+=v.getUint32(O+o.OFFSET_STEP_MED,x);T=v.getUint16(O,x);O+=2;for(i=0;i<=T-1;i++){V=v.getUint16(O+(i*12),x);if(V===o.EXIF_CHECK){return y(v.getUint16(O+(i*12)+8,x));}}}else if((w&o.FOURTH_CHECK)!==o.FOURTH_CHECK){E=o.ERR_GENERAL;break;}else{O+=v.getUint16(O,false);}}return y(E);}catch(A){return y(o.ERR_FILE_FORMAT);}};s.readAsArrayBuffer(p);});};
n.prototype._handleExifOrientation=function(i){var t=this;this._getExifOrientation(i).then(function(O){switch(O){case 1:t._iExifRotation=0;break;case 2:t._iExifRotation=0;t._bExifFlip=true;break;case 3:t._iExifRotation=180;break;case 4:t._bExifFlip=true;t._iExifRotation=180;break;case 5:t._bExifFlip=true;t._iExifRotation=90;break;case 6:t._iExifRotation=90;break;case 7:t._bExifFlip=true;t._iExifRotation=-90;break;case 8:t._iExifRotation=-90;break;default:t._iExifRotation=0;break;}t._applyExifOrientation();});};
n.prototype._applyExifOrientation=function(){if(this.getLoaded()){if(this._iExifRotation){this._setRotation(this._iExifRotation);this._storeCurrentImg();}if(this._bExifFlip){this._flipHorizontal();this._storeCurrentImg();}}};
n.prototype._renderCustomShapeMask=function(){var i=document.createElement("canvas"),p=i.getContext("2d"),w,H;this._oCustomShapeImg.width=500;this._oCustomShapeImg.height=this._oCustomShapeImg.naturalHeight*this._oCustomShapeImg.width/this._oCustomShapeImg.naturalWidth;q("body").prepend(this._oCustomShapeImg);w=this._oCustomShapeImg.clientWidth;H=this._oCustomShapeImg.clientHeight;q(this._oCustomShapeImg).remove();if(w>=H){i.width=this._oCanvas.width;i.height=H*(this._oCanvas.width/w);}else{i.height=this._oCanvas.height;i.width=w*(this._oCanvas.height/H);}this._oCustomShapeImg.width=i.width;this._oCustomShapeImg.height=i.height;p.drawImage(this._oCustomShapeImg,0,0,this._oCustomShapeImg.width,this._oCustomShapeImg.height);p.globalCompositeOperation="source-in";p.fillStyle="black";p.fillRect(0,0,i.width,i.height);this._sBlackCustomShapeUrl=i.toDataURL();if(this.$("overlayMaskCustomBlack")[0]){this.$("overlayMaskCustomBlack")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sBlackCustomShapeUrl);}p.fillStyle="white";p.fillRect(0,0,i.width,i.height);this._sWhiteCustomShapeUrl=i.toDataURL();if(this.$("overlayMaskCustomWhite")[0]){this.$("overlayMaskCustomWhite")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sWhiteCustomShapeUrl);}};
n.prototype.onAfterRendering=function(){this._$Container=this.$("canvasInnerContainer");this._$Container.prepend(this._oCanvas);this._initContainer();this._initCropArea();if(this._isReady()){this._onAfterIsReady();}};
n.prototype.setSrc=function(s){this.setProperty("src",s,true);var t=this,i,u;this._reset();if(typeof s==="string"){i=s;this._oOriginalBlob=this._fetchUrlAsBlob(i).then(function(B){t._handleExifOrientation(B);t._oOriginalBlob=B;t._sOriginalFileType=B.type;});if(!i.startsWith("data:image")){this._sOriginalFileName=this._getFileNameFromUrl(i);}}else if(s instanceof Blob){u=window.URL;i=u.createObjectURL(s);u.revokeObjectURL(s);t._handleExifOrientation(s);this._oOriginalBlob=s;this._sOriginalFileType=s.type;if(s instanceof File){this._sOriginalFileName=s.name;}}if(i){this._oOrigImg.src=i;}else{this.fireLoaded();}return this;};
n.prototype.setScaleCropArea=function(s){this.setProperty("scaleCropArea",s,true);return this;};
n.prototype.setCustomShapeSrc=function(s){this.setProperty("customShapeSrc",s,true);var t=this,i,u;t._bCustomShapeLoaded=false;if(typeof s==="string"){if((D.browser.msie||D.browser.firefox)&&s.startsWith("data:image/svg+xml;base64,")){this._handleSvgString(atob(s.slice("data:image/svg+xml;base64,".length)));}else{i=s;}}else if(s instanceof Blob){if(s instanceof File&&s.type==="image/svg+xml"){var p=new FileReader();p.onload=function(E){t._handleSvgString(E.target.result);};p.readAsText(s);}else{u=window.URL;i=u.createObjectURL(s);u.revokeObjectURL(s);this._setCustomShapeSrc(i);}}if(i){this._setCustomShapeSrc(i);}else if(!s){this._sBlackCustomShapeUrl="";this._sWhiteCustomShapeUrl="";if(this.$("overlayMaskCustomBlack")[0]){this.$("overlayMaskCustomBlack")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sBlackCustomShapeUrl);}if(this.$("overlayMaskCustomWhite")[0]){this.$("overlayMaskCustomWhite")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",this._sWhiteCustomShapeUrl);}this.$().removeClass("sapSuiteUiCommonsImageEditorModeCropCustomShapeLoaded");this.fireCustomShapeLoaded();}return this;};
n.prototype._handleSvgString=function(s){var i,p;if(D.browser.msie){throw Error("SVG files cannot be used as shapes for custom crop in Internet Explorer. Please use a different image source or a different browser.");}var t=new DOMParser().parseFromString(s,"image/svg+xml");if(t.documentElement.width.baseVal.value>0){t.documentElement.width.baseVal.valueAsString=t.documentElement.width.baseVal.value.toString()+"px";}if(t.documentElement.height.baseVal.value>0){t.documentElement.height.baseVal.valueAsString=t.documentElement.height.baseVal.value.toString()+"px";}p=new XMLSerializer().serializeToString(t);i="data:image/svg+xml;base64,"+btoa(p);this._setCustomShapeSrc(i);};
n.prototype._setCustomShapeSrc=function(s){this._oCustomShapeImg.src=s;};
n.prototype.setKeepCropAspectRatio=function(K){this.setProperty("keepCropAspectRatio",K,true);this._updateResizableCropAspectRatio();return this;};
n.prototype.setKeepResizeAspectRatio=function(K){this.setProperty("keepResizeAspectRatio",K,true);this._updateResizableResizeAspectRatio();return this;};
n.prototype.getLoaded=function(){return!!this.getSrc()&&this._bImageLoaded;};
n.prototype.getCustomShapeLoaded=function(){return!!this.getCustomShapeSrc()&&this._bCustomShapeLoaded;};
n.prototype.setSize=function(w,H,p){this._throwIfNotLoaded("setSize");var O,i,s;w=this._constraintValue(w,n.LIMITS.WIDTH_MIN,n.LIMITS.WIDTH_MAX);H=this._constraintValue(H,n.LIMITS.HEIGHT_MIN,n.LIMITS.HEIGHT_MAX);s=this._limitCanvasSize(w,H);w=s.width;H=s.height;this._cancelPreview();O=this.getWidth();i=this.getHeight();this._setCanvasSize(w,H);this._addHistory(new R({width:w,height:H,oldWidth:O,oldHeight:i}),p);return this;};
n.prototype.getWidth=function(){this._throwIfNotLoaded("getWidth");return this._getLastImg().width;};
n.prototype.getPreviewWidth=function(){this._throwIfNotLoaded("getPreviewWidth");return this._oCanvas.width;};
n.prototype.setWidth=function(w,p){this._throwIfNotLoaded("setWidth");var O=this.getHeight(),i=this.getWidth(),H=this.getPreviewHeight(),s;w=this._constraintValue(w,n.LIMITS.WIDTH_MIN,n.LIMITS.WIDTH_MAX);if(this.getKeepResizeAspectRatio()){H=Math.round(w*H/this.getPreviewWidth());}s=this._limitCanvasSize(w,H);w=s.width;H=s.height;this._cancelPreview();this._setCanvasSize(w,H);this._addHistory(new R({width:w,height:H,oldWidth:i,oldHeight:O}),p);return this;};
n.prototype.getHeight=function(){this._throwIfNotLoaded("getHeight");return this._getLastImg().height;};
n.prototype.getPreviewHeight=function(){this._throwIfNotLoaded("getPreviewHeight");return this._oCanvas.height;};
n.prototype.setHeight=function(H,p){this._throwIfNotLoaded("setHeight");var O=this.getWidth(),i=this.getHeight(),w=this.getPreviewWidth(),s;H=this._constraintValue(H,n.LIMITS.HEIGHT_MIN,n.LIMITS.HEIGHT_MAX);if(this.getKeepResizeAspectRatio()){w=Math.round(H*w/this.getPreviewHeight());}s=this._limitCanvasSize(w,H);w=s.width;H=s.height;this._cancelPreview();this._setCanvasSize(w,H);this._addHistory(new R({width:w,height:H,oldWidth:O,oldHeight:i}),p);return this;};
n.prototype.rotate=function(i,p){this._throwIfNotLoaded("rotate");i=this._constraintValue(i,n.LIMITS.ROTATION_MIN,n.LIMITS.ROTATION_MAX);this._cancelPreview();this._setRotation(i);this._addHistory(new c({degrees:i}),p);return this;};
n.prototype.flipVertical=function(p){this._throwIfNotLoaded("flipVertical");this._cancelPreview();this._flipVertical();this._addHistory(new g({vertical:true,horizontal:false}),p);return this;};
n.prototype.flipHorizontal=function(p){this._throwIfNotLoaded("flipHorizontal");this._cancelPreview();this._flipHorizontal();this._addHistory(new g({vertical:false,horizontal:true}),p);return this;};
n.prototype.flip=function(v,H,p){this._throwIfNotLoaded("flip");this._cancelPreview();this._flip(v,H);this._addHistory(new g({vertical:v,horizontal:H}),p);return this;};
n.prototype.applyVisibleCrop=function(p){this._throwIfNotReady("applyVisibleCrop");switch(this.getMode()){case k.CropRectangle:{this._applyRectangleCrop(p);break;}case k.CropEllipse:{this._applyEllipseCrop(p);break;}case k.CropCustomShape:{this._throwIfCustomShapeNotLoaded("applyVisibleCrop CropCustomShape");this._applyCustomShapeCrop(p);break;}default:{L.warning("No cropping mode is selected, applyVisibleCrop does nothing");break;}}};
n.prototype.rectangleCrop=function(x,y,w,H,p){this._throwIfNotLoaded("rectangleCrop");var O=this.getWidth(),i=this.getHeight();this._cancelPreview();this._rectangleCrop(x,y,w,H);this._addHistory(new d({x:Math.round(x),y:Math.round(y),width:Math.round(w),height:Math.round(H),oldWidth:O,oldHeight:i}),p);this._limitCurrentCropArea();};
n.prototype.ellipseCrop=function(x,y,X,Y,p){this._throwIfNotLoaded("ellipseCrop");var O=this.getWidth(),i=this.getHeight();this._cancelPreview();this._ellipseCrop(x,y,X,Y);this._addHistory(new e({x:Math.round(x),y:Math.round(y),rx:Math.round(X),ry:Math.round(Y),width:Math.round(X*2),height:Math.round(Y*2),oldWidth:O,oldHeight:i}),p);this._limitCurrentCropArea();};
n.prototype.customShapeCrop=function(x,y,w,H,p){this._throwIfNotLoaded("customShapeCrop");this._throwIfCustomShapeNotLoaded("customShapeCrop");var O=this.getWidth(),i=this.getHeight();this._cancelPreview();this._customShapeCrop(x,y,w,H);this._addHistory(new f({x:Math.round(x),y:Math.round(y),width:Math.round(w),height:Math.round(H),oldWidth:O,oldHeight:i}),p);this._limitCurrentCropArea();};
n.prototype.setCropArea=function(x,y,w,H){this._throwIfNotLoaded("setCropArea");var i=this._limitCropArea(x,y,w,H);this._setCropArea(i.x,i.y,i.width,i.height);return this;};
n.prototype.setCropAreaByRatio=function(w,H){this._throwIfNotLoaded("setCropAreaByRatio");var O=this._oCanvas.width/this._oCanvas.height,i=w/H,W,p,x,y,s;if(typeof w!=="number"||typeof H!=="number"){return this;}if(O>=i){p=o.CROP_AREA_SHORTER_SIDE_OFFSET;W=this._oCanvas.height*p*i;W=100*W/this._oCanvas.width;p*=100;x=(100-W)/2;y=(100-p)/2;}else{W=o.CROP_AREA_SHORTER_SIDE_OFFSET;p=this._oCanvas.width*W/i;p=100*p/this._oCanvas.height;W*=100;y=(100-p)/2;x=(100-W)/2;}s=this._transposePercentToImageCoordsPx(x,y,W,p);this._setCropArea(s.x,s.y,s.width,s.height);return this;};
n.prototype.setCustomShapeCropAreaRatio=function(){this._throwIfNotLoaded("setCustomShapeCropAreaRatio");this._throwIfCustomShapeNotLoaded("setCustomShapeCropAreaRatio");this.setCropAreaByRatio(this._oCustomShapeImg.width,this._oCustomShapeImg.height);return this;};
n.prototype.setCropAreaBySize=function(w,H){this._throwIfNotLoaded("setCropAreaBySize");var i=this._limitCropArea(null,null,w,H);this._setCropArea(null,null,i.width,i.height);return this;};
n.prototype.getCropArea=function(){return this._oCropArea?q.extend({},this._oCropArea):null;};
n.prototype.zoom=function(z,p){this._setZoom(z,p);return this;};
n.prototype.zoomIn=function(p){this._zoomIn(p);return this;};
n.prototype.zoomOut=function(p){this._zoomOut(p);return this;};
n.prototype.zoomToFit=function(){this._throwIfNotReady("zoomToFit");this._zoomToFit();return this;};
n.prototype.getZoomLevel=function(){return this._fZoom;};
n.prototype.sepia=function(v,p){this._throwIfNotLoaded("sepia");this._constraintValue(v,n.LIMITS.SEPIA_MIN,n.LIMITS.SEPIA_MAX);this._cancelPreview();this._addHistory(new F({type:"sepia",value:v,unit:"%"}),p);};
n.prototype.grayscale=function(v,p){this._throwIfNotLoaded("grayscale");this._constraintValue(v,n.LIMITS.GRAYSCALE_MIN,n.LIMITS.GRAYSCALE_MAX);this._cancelPreview();this._addHistory(new F({type:"grayscale",value:v,unit:"%"}),p);};
n.prototype.saturate=function(v,p){this._throwIfNotLoaded("saturate");this._constraintValue(v,n.LIMITS.SATURATE_MIN,n.LIMITS.SATURATE_MAX);this._cancelPreview();this._addHistory(new F({type:"saturate",value:v,unit:"%"}),p);};
n.prototype.invert=function(v,p){this._throwIfNotLoaded("invert");this._constraintValue(v,n.LIMITS.INVERT_MIN,n.LIMITS.INVERT_MAX);this._cancelPreview();this._addHistory(new F({type:"invert",value:v,unit:"%"}),p);};
n.prototype.brightness=function(v,p){this._throwIfNotLoaded("brightness");this._constraintValue(v,n.LIMITS.BRIGHTNESS_MIN,n.LIMITS.BRIGHTNESS_MAX);this._cancelPreview();this._addHistory(new F({type:"brightness",value:v,unit:"%"}),p);};
n.prototype.contrast=function(v,p){this._throwIfNotLoaded("contrast");this._constraintValue(v,n.LIMITS.CONTRAST_MIN,n.LIMITS.CONTRAST_MAX);this._cancelPreview();this._addHistory(new F({type:"contrast",value:v,unit:"%"}),p);};
n.prototype.applyPreview=function(){this._throwIfNotLoaded("applyPreview");this._applyPreview();};
n.prototype.cancelPreview=function(){this._throwIfNotLoaded("cancelPreview");this._cancelPreview();};
n.prototype.undo=function(){this._throwIfNotLoaded("undo");this._jumpToHistory(this._iHistoryIndex+1);};
n.prototype.redo=function(){this._throwIfNotLoaded("redo");this._jumpToHistory(this._iHistoryIndex-1);};
n.prototype.jumpToHistory=function(i){this._throwIfNotLoaded("jumpToHistory");this._jumpToHistory(i);};
n.prototype.getHistory=function(){return this._aHistory;};
n.prototype.getHistoryIndex=function(){return this._iHistoryIndex;};
n.prototype.getImagePngDataURL=function(){this._throwIfNotLoaded("getImagePngDataURL");return this._getFinalisedCanvas().toDataURL("image/png");};
n.prototype.getImageJpegDataURL=function(Q){this._throwIfNotLoaded("getImageJpegDataURL");return this._getFinalisedCanvas().toDataURL("image/jpeg",Q);};
n.prototype.getImageDataURL=function(s,Q){this._throwIfNotLoaded("getImageDataURL");s=this._convertImageFormatEnumToMime(s)||this._getFileFormat();return this._getFinalisedCanvas().toDataURL(s,Q);};
n.prototype.getImageAsBlob=function(s,Q){this._throwIfNotLoaded("getImageAsBlob");var t=this,p;s=this._convertImageFormatEnumToMime(s)||this._getFileFormat();if(this._aHistory.length===0){p=this._getOriginalBlob();}else{p=new Promise(function(i,u){var v=t._getFinalisedCanvas();if(v.toBlob){v.toBlob(function(B){i(B);},s,Q);}else{t._createBlob(v,s,Q).then(function(B){i(B);});}});}return p;};
n.prototype.openSaveDialog=function(s,i,Q){this._throwIfNotLoaded("openSaveDialog");var p,E;s=s||this._getFileName();i=this._convertImageFormatEnumToMime(i)||this._getFileFormat();E=i.split("/")[1];if(this._aHistory.length===0){this._getOriginalBlob().then(function(B){j.save(B,s,E,i);});}else{p=this._getFinalisedCanvas();if(p.toBlob){p.toBlob(function(B){j.save(B,s,E,i);},i,Q);}else{this._createBlob(p,i,Q).then(function(B){j.save(B,s,E,i);});}}};
n.prototype.getFileName=function(){return this._getFullFileName();};
n.prototype._throwIfNotLoaded=function(s){if(!this.getLoaded()){throw Error("Cannot call "+s+" before image is set and loaded");}};
n.prototype._throwIfNotReady=function(s){if(!this._isReady()){throw Error("Cannot call "+s+" before image is set and loaded and control is rendered");}};
n.prototype._throwIfCustomShapeNotLoaded=function(s){if(!this.getCustomShapeLoaded()){throw Error("Cannot call "+s+" before custom shape is set and loaded");}};
n.prototype._onAfterIsReady=function(){var t=this;this.$().removeClass("sapSuiteUiCommonsImageEditorEmpty");t._refreshContainerSize();this._$Container.css({width:this._oCanvas.width*this._getScale(),height:this._oCanvas.height*this._getScale()});if(!this.getCropArea()){this.setCropAreaByRatio(this.getWidth(),this.getHeight());}else{this._setCropArea(this._oCropArea.x,this._oCropArea.y,this._oCropArea.width,this._oCropArea.height);}this.getDomRef().onmousewheel=this._onMouseWheel.bind(this);this.getDomRef().onmousedown=this._onMouseDown.bind(this);};
n.prototype._isReady=function(){return!!this._$Container&&this.getLoaded();};
n.prototype._createBlob=function(i,t,Q){var p=this;return new Promise(function(s,u){var v=i.toDataURL(t,Q).split(",")[1];setTimeout(function(){s(p._convertDataUriToBlob(v,t));});});};
n.prototype._convertDataUriToBlob=function(B,s){var p=atob(B),t=p.length,A=new Uint8Array(t);for(var i=0;i<t;i++){A[i]=p.charCodeAt(i);}return new Blob([A],{type:s});};
n.prototype._fetchUrlAsBlob=function(s){var p,i,B,t;if(window.fetch){p=fetch(s).then(function(u){return u.blob();}).then(function(u){return u;});}else{if(s.startsWith("data:image")){i=s.split(",");B=i[1];t=i[0].split(";")[0].split(":")[1];p=Promise.resolve(this._convertDataUriToBlob(B,t));}else{p=new Promise(function(u,v){var x=new XMLHttpRequest();x.open("GET",s);x.responseType="blob";x.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){if(this.status===200){u(x.response);}else{v();}}};x.send();});}}return p;};
n.prototype._getOriginalBlob=function(){var p;if(this._oOriginalBlob instanceof Promise){p=this._oOriginalBlob;}else{p=Promise.resolve(this._oOriginalBlob);}return p;};
n.prototype._getFileNameFromUrl=function(u){return u.split("#")[0].split("?")[0].split("/").pop();};
n.prototype._getFileName=function(){var s=this._sOriginalFileName||"image",i;i=s.lastIndexOf(".");if(i>0){s=s.slice(0,i);}return s;};
n.prototype._getFullFileName=function(){return this._sOriginalFileName;};
n.prototype._convertImageFormatEnumToMime=function(s){switch(s){case m.Png:s="image/png";break;case m.Jpeg:s="image/jpeg";break;default:break;}return s;};
n.prototype._getFileFormat=function(){return this._sOriginalFileType;};
n.prototype._updateTransformation=function(){this._oCanvas.style.transform="scale("+this._getScale()+")";};
n.prototype._refreshContainerSize=function(){if(!this._$Container||!this._$Container[0]||!this._isReady()){return;}this._$Container.css({width:this._oCanvas.width*this._getScale(),height:this._oCanvas.height*this._getScale()});this._refreshOverlayMask();};
n.prototype._refreshOverlayMask=function(){var O=this.$().find(".sapSuiteUiCommonsImageEditorCropOverlayContainer")[0];if(!O||!this._$Container){return;}this._$Container[0].removeChild(O);this._$Container[0].insertBefore(O,this._oCanvas.nextSibling);};
n.prototype._refreshCropContainerSize=function(){var i=this.getCropArea(),p,$;if(i){p=this._transposeImageCoordsPxToPercent(i.x,i.y,i.width,i.height);$=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle");$.css({left:p.x+"%",top:p.y+"%"});$.width(p.width+"%");$.height(p.height+"%");}};
n.prototype._refreshCropContainerLook=function(){function i(P){return P/parseFloat(getComputedStyle(document.documentElement).fontSize);}var $=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle"),p=i($.width()),s=i($.height()),t=Math.min(p,s);$.removeClass("sapSuiteUiCommonsImageEditorCropInnerRectangleSmall sapSuiteUiCommonsImageEditorCropInnerRectangleVerySmall sapSuiteUiCommonsImageEditorCropInnerRectangleExtraSmall");if(t<1.25){$.addClass("sapSuiteUiCommonsImageEditorCropInnerRectangleExtraSmall");}else if(t<2){$.addClass("sapSuiteUiCommonsImageEditorCropInnerRectangleVerySmall");}else if(t<3){$.addClass("sapSuiteUiCommonsImageEditorCropInnerRectangleSmall");}};
n.prototype._initCanvas=function(){this._oCanvas.id=this.getId()+"-image";this._oCanvas.classList.add("sapSuiteUiCommonsImageEditorCanvas");this._oContext=this._oCanvas.getContext("2d");};
n.prototype._initContainer=function(){var t=this,H=this.$().find(".sapSuiteUiCommonsImageEditorTransformHandlers .sapSuiteUiCommonsImageEditorHandlerContainer");this._$Container.resizable({containment:"parent",aspectRatio:this.getKeepResizeAspectRatio(),start:function(E,u){t.$("image").addClass("sapSuiteUiCommonsImageEditorCanvasResize");t.$("image").css("transform","");q(this).css({top:u.position.top,left:u.position.left,width:u.size.width,height:u.size.height});},stop:function(E,u){var N=u.size.width*t._oCanvas.width/u.originalSize.width,i=u.size.height*t._oCanvas.height/u.originalSize.height,O=t._oCanvas.width,p=t._oCanvas.height;t.$("image").removeClass("sapSuiteUiCommonsImageEditorCanvasResize");t._$Container.css({top:"",left:""});t.setSize(N,i,true);t._refreshContainerSize();t._updateTransformation();t.fireSizeChanged({width:t.getPreviewWidth(),height:t.getPreviewHeight(),originalWidth:O,originalHeight:p});},handles:{nw:H.filter(".ui-resizable-nw"),ne:H.filter(".ui-resizable-ne"),sw:H.filter(".ui-resizable-sw"),se:H.filter(".ui-resizable-se"),n:H.filter(".ui-resizable-n"),s:H.filter(".ui-resizable-s"),w:H.filter(".ui-resizable-w"),e:H.filter(".ui-resizable-e")}});S._setupMobileDraggable(this._$Container);};
n.prototype._initCropArea=function(){var t=this,B=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle"),H=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle .sapSuiteUiCommonsImageEditorHandlerContainer"),i=this.$().find(".sapSuiteUiCommonsImageEditorDragHandlerContainer")[0];function p(E,u){var v=getComputedStyle(u.helper[0]);t._setOverlayMaskSize(u.position.left,u.position.top,u.size?u.size.width:parseFloat(v.width),u.size?u.size.height:parseFloat(v.height),"px");t._refreshCropContainerLook();}function s(E,u){var $=q(this),v=this.getBoundingClientRect(),P=$.position(),w=t._transposeViewportCoordsToImageCoords(P.left,P.top,v.width,v.height),O=t.getCropArea(),x;x=t._limitCropArea(w.x,w.y,w.width,w.height);t._setCropArea(x.x,x.y,x.width,x.height);x=t.getCropArea();t.fireCropAreaChanged({cropArea:x,originalCropArea:O});}B.resizable({aspectRatio:this.getKeepCropAspectRatio(),containment:"parent",minWidth:n.LIMITS.CROP_AREA_MIN,minHeight:n.LIMITS.CROP_AREA_MIN,resize:p,stop:s,handles:{nw:H.filter(".ui-resizable-nw"),ne:H.filter(".ui-resizable-ne"),sw:H.filter(".ui-resizable-sw"),se:H.filter(".ui-resizable-se"),n:H.filter(".ui-resizable-n"),s:H.filter(".ui-resizable-s"),w:H.filter(".ui-resizable-w"),e:H.filter(".ui-resizable-e")}});i.onmousewheel=this._onMouseWheel.bind(this);B.draggable({containment:"parent",handle:i,drag:p,stop:s});S._setupMobileDraggable(B);B.css("position","absolute");};
n.prototype._getLastImg=function(){return this._oSavedImg;};
n.prototype._storeCurrentImg=function(){this._oSavedImg.width=this._oCanvas.width;this._oSavedImg.height=this._oCanvas.height;this._oSavedImg.getContext("2d").drawImage(this._oCanvas,0,0);};
n.prototype._addHistory=function(H,p){if(p){this._oPreview=H;}else{this._addNewHistory(H);this._oPreview=null;}this._updateFilters();};
n.prototype._applyPreview=function(){if(!this._oPreview){return;}this._addNewHistory(this._oPreview);this._oPreview=null;};
n.prototype._addNewHistory=function(N){this._aHistory=this._aHistory.slice(this._iHistoryIndex);this._iHistoryIndex=0;if(this._aHistory.length===0||!this._aHistory[0].compare(N)){this._aHistory.unshift(N);this._storeCurrentImg();this._fireHistoryChanged();}};
n.prototype._cancelPreview=function(){if(!this._oPreview){return;}this._oPreview=null;this._updateFilters();this._drawImage(this._getLastImg());};
n.prototype._jumpToHistory=function(p){var s=this._iHistoryIndex,H,i;this._iHistoryIndex=Math.min(this._aHistory.length,Math.max(0,p));if(s===this._iHistoryIndex){return;}if(s<this._iHistoryIndex){this._drawImage(this._oOrigImg);this._storeCurrentImg();this._applyExifOrientation();i=this._aHistory.length-1;}else{i=s-1;}for(i;i>=this._iHistoryIndex;i--){H=this._aHistory[i];switch(H.getMetadata().getName()){case"sap.suite.ui.commons.imageeditor.RotateHistoryItem":{this._setRotation(H.getDegrees());break;}case"sap.suite.ui.commons.imageeditor.ResizeHistoryItem":{this._setCanvasSize(H.getWidth(),H.getHeight());break;}case"sap.suite.ui.commons.imageeditor.FlipHistoryItem":{this._flip(H.getVertical(),H.getHorizontal());break;}case"sap.suite.ui.commons.imageeditor.FilterHistoryItem":{if(this._needsManualFilter()){this._applyFilterItem(H);}break;}case"sap.suite.ui.commons.imageeditor.CropRectangleHistoryItem":{this._rectangleCrop(H.getX(),H.getY(),H.getWidth(),H.getHeight());break;}case"sap.suite.ui.commons.imageeditor.CropEllipseHistoryItem":{this._ellipseCrop(H.getX(),H.getY(),H.getRx(),H.getRy());break;}case"sap.suite.ui.commons.imageeditor.CropCustomShapeHistoryItem":{this._customShapeCrop(H.getX(),H.getY(),H.getWidth(),H.getHeight());break;}default:{break;}}this._storeCurrentImg();}this._updateFilters();this._fireHistoryChanged();};
n.prototype._fireHistoryChanged=function(){this.fireHistoryChanged({history:this._aHistory.slice(),index:this._iHistoryIndex});};
n.prototype._onMouseDown=function(E){if(E.button!==0||(E.target!==this.getDomRef()&&E.target!==this._oCanvas)){return;}var t=this,s=E.clientX,i=E.clientY;E.preventDefault();function p(E){var v=E.clientX,w=E.clientY,x=v-s,y=w-i,z=t.getDomRef();z.scrollLeft-=x;z.scrollTop-=y;s=v;i=w;}function u(){document.removeEventListener("mousemove",p);document.removeEventListener("mouseup",u);}document.addEventListener("mousemove",p);document.addEventListener("mouseup",u);};
n.prototype._onMouseWheel=function(E){if(!E.ctrlKey){return;}E.preventDefault();var z=E.wheelDeltaY>0?this._zoomIn.bind(this):this._zoomOut.bind(this);z({x:(E.clientX-this._$Container[0].getBoundingClientRect().x)/this.getZoomLevel()*100,y:(E.clientY-this._$Container[0].getBoundingClientRect().y)/this.getZoomLevel()*100});this.fireZoomChanged({zoom:this._fZoom});};
n.prototype._limitCropArea=function(x,y,w,H,i){var p=this._getMaxCropAreaWidth(i),s=this._getMinCropAreaWidth(i),t=this._getMaxCropAreaHeight(i),u=this._getMinCropAreaHeight(i);x=x&&x<0?0:x;y=y&&y<0?0:y;w=this._constraintValue(w,s,p);H=this._constraintValue(H,u,t);if(x+w>this.getWidth()){x-=(x+w)-this.getWidth();}if(y+H>this.getHeight()){y-=(y+H)-this.getHeight();}return{x:x,y:y,width:w,height:H};};
n.prototype._limitCurrentCropArea=function(){var i=this.getCropArea();if(i){this.setCropArea(i.x,i.y,i.width,i.height);}};
n.prototype._getMaxCropAreaWidth=function(i){var p,s=this.getCropArea();if(i&&this.getKeepCropAspectRatio()&&s&&this.getWidth()/this.getHeight()>s.width/s.height){p=s.width*this._getMaxCropAreaHeight()/s.height;}else{p=this.getWidth();}return Math.round(p);};
n.prototype._getMinCropAreaWidth=function(i){var p,s=this.getCropArea();if(i&&this.getKeepCropAspectRatio()&&s&&s.width>s.height){s=this.getCropArea();p=s.width*this._getMinCropAreaHeight()/s.height;}else{p=n.LIMITS.CROP_AREA_MIN;}return Math.round(p);};
n.prototype._getMaxCropAreaHeight=function(i){var p,s=this.getCropArea();if(i&&this.getKeepCropAspectRatio()&&s&&this.getWidth()/this.getHeight()<s.width/s.height){s=this.getCropArea();p=s.height*this._getMaxCropAreaWidth()/s.width;}else{p=this.getHeight();}return Math.round(p);};
n.prototype._getMinCropAreaHeight=function(i){var p,s=this.getCropArea();if(i&&this.getKeepCropAspectRatio()&&s&&s.width<s.height){s=this.getCropArea();p=s.height*this._getMinCropAreaWidth()/s.width;}else{p=n.LIMITS.CROP_AREA_MIN;}return Math.round(p);};
n.prototype._scaleCropArea=function(O,N){var i=this.getCropArea();if(i&&typeof i.x==="number"&&typeof i.width==="number"){i.newWidth=i.width*(O/N);i.newHeight=i.height*(O/N);i.x+=(i.width-i.newWidth)/2;i.y+=(i.height-i.newHeight)/2;i=this._limitCropArea(i.x,i.y,i.newWidth,i.newHeight,true);this._setCropArea(i.x,i.y,i.width,i.height);}};
n.prototype._setCropArea=function(x,y,w,H){this._oCropArea={x:x,y:y,width:w,height:H};if(!this._isReady()){return;}var p;if(typeof this._oCropArea.x!=="number"){this._oCropArea.x=(this.getWidth()-w)/2;this._oCropArea.y=(this.getHeight()-H)/2;}p=this._transposeImageCoordsPxToPercent(this._oCropArea.x,this._oCropArea.y,this._oCropArea.width,this._oCropArea.height);this._refreshCropContainerSize();this._setOverlayMaskSize(p.x,p.y,p.width,p.height,"%");this._refreshOverlayMask();this._refreshCropContainerLook();this._updateCropAreaHandlerColors();};
n.prototype._setOverlayMaskSize=function(x,y,w,H,u){var $;$=this.$("overlayMaskRect");$.attr({x:x+u,y:y+u,width:w+u,height:H+u});$=this.$("overlayMaskEllipse");$.attr({cx:(x+w/2)+u,cy:(y+H/2)+u,rx:(w/2)+u,ry:(H/2)+u});$=this.$("overlayMaskCustomBlack");$.attr({x:x+u,y:y+u,width:w+u,height:H+u});$=this.$("overlayMaskCustomWhite");$.attr({x:x+u,y:y+u,width:w+u,height:H+u});};
n.prototype._constraintValue=function(v,i,p){if(isNaN(v)||v<i){v=i;}else if(v>p){v=p;}return Math.round(v);};
n.prototype._setZoom=function(z,p){var O=this._fZoom,t=this.getDomRef(),T,i,s,u,v,w,x,y;this._fZoom=parseFloat(z.toFixed(2));if(this._fZoom<=0){this._fZoom=1;}p=p||{};if(t){s=t.clientWidth;u=t.clientHeight;v=t.scrollLeft;w=t.scrollTop;}this._updateTransformation();this._refreshContainerSize();if(t){T=t.getBoundingClientRect();i=this._$Container[0].getBoundingClientRect();p.x=p.x||(t.clientWidth/2+T.x-(i.x-((s-t.clientWidth)/2)))/O*100;p.y=p.y||(t.clientHeight/2+T.y-(i.y-((u-t.clientHeight)/2)))/O*100;}if(p.x&&p.y){x=t.scrollLeft+(p.x/100*this.getZoomLevel()-t.scrollLeft)-(p.x/100*O-v);y=t.scrollTop+(p.y/100*this.getZoomLevel()-t.scrollTop)-(p.y/100*O-w);}if(t&&p.x){t.scrollLeft=x;}if(t&&p.y){t.scrollTop=y;}if(this.getScaleCropArea()){this._scaleCropArea(O,this._fZoom);}this._refreshCropContainerLook();};
n.prototype._getScale=function(){return this._fZoom/100;};
n.prototype._zoomIn=function(p){var s=n.ZOOM_MILESTONES.indexOf(this._fZoom),z=this._fZoom,i;if(s>=0&&s<n.ZOOM_MILESTONES.length-1){z=n.ZOOM_MILESTONES[s+1];}else{for(i=0;i<n.ZOOM_MILESTONES.length;i++){if(n.ZOOM_MILESTONES[i]>z){z=n.ZOOM_MILESTONES[i];break;}}}this._setZoom(z,p);};
n.prototype._zoomOut=function(p){var s=n.ZOOM_MILESTONES.indexOf(this._fZoom),z=this._fZoom,i;if(s>0){z=n.ZOOM_MILESTONES[s-1];}else{for(i=n.ZOOM_MILESTONES.length-1;i>=0;i--){if(n.ZOOM_MILESTONES[i]<z){z=n.ZOOM_MILESTONES[i];break;}}}this._setZoom(z,p);};
n.prototype._zoomToFit=function(){this._$Container.css({width:"",height:"",margin:"0px"});this._oCanvas.style.maxWidth="100%";this._oCanvas.style.maxHeight="100%";this._oCanvas.style.transform="";var z=this._oCanvas.getBoundingClientRect().width*100/this._oCanvas.width;this._oCanvas.style.maxWidth="";this._oCanvas.style.maxHeight="";this._$Container.css({margin:"auto"});this.zoom(z);};
n.prototype._setCanvasSize=function(w,H){var i=this._getLastImg();this._oCanvas.width=w;this._oCanvas.height=H;this._oContext.drawImage(i,0,0,i.width,i.height,0,0,w,H);this._refreshContainerSize();};
n.prototype._setRotation=function(i){var p=this._getLastImg(),s,t,u;s=this._degToRad(i);this._oCanvas.width=Math.abs(p.width*Math.cos(s))+Math.abs(p.height*Math.sin(s));this._oCanvas.height=Math.abs(p.width*Math.sin(s))+Math.abs(p.height*Math.cos(s));t=this._limitCanvasSize(this._oCanvas.width,this._oCanvas.height);u=t.width/this._oCanvas.width;this._oCanvas.width=t.width;this._oCanvas.height=t.height;this._oContext.save();this._oContext.translate(this._oCanvas.width/2,this._oCanvas.height/2);this._oContext.rotate(s);this._oContext.translate(-this._oCanvas.width/2,-this._oCanvas.height/2);this._oContext.drawImage(p,0,0,p.width,p.height,Math.round((this._oCanvas.width-p.width*u)/2),Math.round((this._oCanvas.height-p.height*u)/2),p.width*u,p.height*u);this._oContext.restore();this._refreshContainerSize();};
n.prototype._flipVertical=function(){this._flip(true,false);};
n.prototype._flipHorizontal=function(){this._flip(false,true);};
n.prototype._flip=function(v,H){var i=this._getLastImg(),t=document.createElement("canvas"),p=t.getContext("2d");t.width=i.width;t.height=i.height;p.translate(H?i.width:0,v?i.height:0);p.scale(H?-1:1,v?-1:1);p.drawImage(i,0,0);this._oContext.clearRect(0,0,this._oCanvas.width,this._oCanvas.height);this._oContext.drawImage(t,0,0);};
n.prototype._transposeViewportCoordsToImageCoords=function(x,y,w,H){if(!this._isReady()){return{x:0,y:0,width:0,height:0};}var i=this._oCanvas.getBoundingClientRect(),p=this._oCanvas.width/i.width,s=this._oCanvas.height/i.height;return{x:x*p,y:y*s,width:w*p,height:H*s};};
n.prototype._transposeImageCoordsToViewportCoords=function(x,y,w,H){if(!this._isReady()){return{x:0,y:0,width:0,height:0};}var i=this._oCanvas.getBoundingClientRect(),p=this._oCanvas.width/i.width,s=this._oCanvas.height/i.height;return{x:x/p,y:y/s,width:w/p,height:H/s};};
n.prototype._transposeImageCoordsPxToPercent=function(x,y,w,H){return{x:x*100/this._oCanvas.width,y:y*100/this._oCanvas.height,width:w*100/this._oCanvas.width,height:H*100/this._oCanvas.height};};
n.prototype._transposePercentToImageCoordsPx=function(x,y,w,H){return{x:x*this._oCanvas.width/100,y:y*this._oCanvas.height/100,width:w*this._oCanvas.width/100,height:H*this._oCanvas.height/100};};
n.prototype._transposeViewPortPxToPercent=function(x,y,w,H){var i=this._$Container[0].getBoundingClientRect();return{x:x*100/i.width,y:y*100/i.height,width:w*100/i.width,height:H*100/i.height};};
n.prototype._updateCropAreaHandlerColors=function(){var s;if(!this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle").is(":visible")){return;}var t=this;this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle .sapSuiteUiCommonsImageEditorHandlerContainer").each(function(){var $=q(this);if(!$.is(":visible")||$.width()===0||$.height()===0){return;}s=t._getContrastColorForElement(this);for(var i=0;i<this.childElementCount;i++){this.children[i].style.background=s;}});};
n.prototype._getContrastColorForElement=function(E){var i=this._oCanvas.getBoundingClientRect(),p=E.getBoundingClientRect(),s=this._transposeViewportCoordsToImageCoords(p.left-i.left,p.top-i.top,p.width,p.height),t=this._getContrastColorForRectangleArea(s.x,s.y,s.width,s.height);return t;};
n.prototype._getContrastColorForRectangleArea=function(x,y,w,H){var A=this._getRectangleAreaAvg(x,y,w,H);return A>0.5*0.5?"white":"black";};
n.prototype._getRectangleAreaAvg=function(x,y,w,H){if(w===0||H===0){return 0;}var p=this._oContext.getImageData(x,y,Math.ceil(w),Math.ceil(H)).data,s=0,t,G,B,A;for(var i=0;i<p.length;i+=4){t=1-(p[i]/255);G=1-(p[i+1]/255);B=1-(p[i+2]/255);A=p[i+3]/255;s+=(0.2126*t*t+0.7152*G*G+0.0722*B*B)*A;}return s/(p.length/4);};
n.prototype._updateResizableCropAspectRatio=function(){var B=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle"),K=this.getKeepCropAspectRatio();this._updateResizableAspectRatio(B,K);};
n.prototype._updateResizableResizeAspectRatio=function(){var K=this.getKeepResizeAspectRatio();this._updateResizableAspectRatio(this._$Container,K);};
n.prototype._updateResizableAspectRatio=function($,K){if($&&$.data("uiResizable")){$.resizable("option","aspectRatio",K).data("uiResizable")._aspectRatio=K;}};
n.prototype._applyRectangleCrop=function(p){var i=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle")[0].getBoundingClientRect(),s=this._oCanvas.getBoundingClientRect(),t=this._transposeViewportCoordsToImageCoords(i.left-s.left,i.top-s.top,i.width,i.height);this.rectangleCrop(t.x,t.y,t.width,t.height,p);};
n.prototype._rectangleCrop=function(x,y,w,H){var t=document.createElement("canvas");t.width=Math.round(w);t.height=Math.round(H);t.getContext("2d").drawImage(this._oCanvas,x,y,w,H,0,0,w,H);this._drawImage(t);this._refreshCropContainerSize();};
n.prototype._applyEllipseCrop=function(p){var i,s,t;i=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle")[0].getBoundingClientRect();s=this._oCanvas.getBoundingClientRect();t=this._transposeViewportCoordsToImageCoords(i.left-s.left,i.top-s.top,i.width,i.height);this.ellipseCrop(t.width/2+t.x,t.height/2+t.y,t.width/2,t.height/2,p);};
n.prototype._ellipseCrop=function(x,y,X,Y){var t=document.createElement("canvas"),i=X*2,p=Y*2,s=t.getContext("2d");t.width=Math.round(i);t.height=Math.round(p);if(!s.ellipse){s.save();s.translate(X,Y);s.scale(X,Y);s.arc(0,0,1,0,360);s.restore();}else{s.ellipse(X,Y,X,Y,0,0,2*Math.PI);}s.fill();s.globalCompositeOperation="source-in";s.drawImage(this._oCanvas,x-X,y-Y,i,p,0,0,i,p);this._drawImage(t);this._refreshCropContainerSize();};
n.prototype._applyCustomShapeCrop=function(p){var i,s,t;i=this.$().find(".sapSuiteUiCommonsImageEditorCropInnerRectangle")[0].getBoundingClientRect();s=this._oCanvas.getBoundingClientRect();t=this._transposeViewportCoordsToImageCoords(i.left-s.left,i.top-s.top,i.width,i.height);this.customShapeCrop(t.x,t.y,t.width,t.height,p);};
n.prototype._customShapeCrop=function(x,y,w,H){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=w;t.height=H;i.drawImage(this._oCustomShapeImg,0,0,w,H);i.globalCompositeOperation="source-in";i.drawImage(this._oCanvas,x,y,w,H,0,0,w,H);i.globalCompositeOperation="source-over";this._drawImage(t);this._refreshCropContainerSize();};
n.prototype._getFinalisedCanvas=function(){var w=this.getWidth(),H=this.getHeight(),i,t,p;i=this._getLastImg().getContext("2d").getImageData(0,0,w,H);this._applyFilterHistory(i);t=document.createElement("canvas");p=t.getContext("2d");t.width=w;t.height=H;p.putImageData(i,0,0);return t;};
n.prototype._applyFilterHistory=function(p){var s;for(var i=this._aHistory.length-1;i>=this._iHistoryIndex;i--){if(this._aHistory[i].isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){s=this._aHistory[i];h[s.getType()](p,s.getValue()/100);}}};
n.prototype._applyFilterItem=function(i){var p=this._getLastImg(),s=p.getContext("2d"),t=s.getImageData(0,0,p.width,p.height);h[i.getType()](t,i.getValue()/100);this._oContext.putImageData(t,0,0);};
n.prototype._updateFilters=function(){var s="",H;function p(t){return t.getType()+"("+t.getValue()+t.getUnit()+") ";}if(this._needsManualFilter()){if(this._isReady()){if(this._oPreview&&this._oPreview.isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){this._applyFilterItem(this._oPreview);}}}else{for(var i=this._aHistory.length-1;i>=this._iHistoryIndex;i--){H=this._aHistory[i];if(H.isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){s+=p(H);}}if(this._oPreview&&this._oPreview.isA("sap.suite.ui.commons.imageeditor.FilterHistoryItem")){s+=p(this._oPreview);}this._oCanvas.style.filter=s.trim();}};
n.prototype._needsManualFilter=function(){return D.browser.msie||D.os.name===D.os.OS.IOS;};
n.prototype._isMobileSafari=function(){return D.os.name===D.os.OS.IOS&&D.browser.name===D.browser.BROWSER.SAFARI;};
n.prototype._reset=function(){this.$().addClass("sapSuiteUiCommonsImageEditorEmpty");this._aHistory=[];this._iHistoryIndex=0;this._oPreview=null;this._bImageLoaded=false;this._oCropArea=null;this._oCanvas.width=0;this._oCanvas.height=0;this._oOriginalBlob=null;this._sOriginalFileName=null;this._sOriginalFileType=null;this._iExifRotation=null;this._bExifFlip=false;this._updateFilters();this._refreshContainerSize();};
n.prototype._drawImage=function(s){var i=this._limitCanvasSize(s.width,s.height);this._oCanvas.width=i.width;this._oCanvas.height=i.height;this._oContext.drawImage(s,0,0,s.width,s.height,0,0,this._oCanvas.width,this._oCanvas.height);this._refreshContainerSize();};
n.prototype._limitCanvasSize=function(w,H,s){var i=this._isMobileSafari()?n.LIMITS.MAX_SAFARI_MOBILE_CANVAS_SIZE:n.LIMITS.MAX_CANVAS_SIZE,N=w,p=H,t;if(w*H>i){t=Math.sqrt(i/(w*H));N=Math.floor(w*t);p=Math.floor(p*N/w);if(!s){this.fireSizeChanged({width:N,height:p,originalWidth:w,originalHeight:H});b.show(r.getText("IMGEDITOR_SCALE_WARNING",[N,p,w,H]),{duration:6000});}}return{width:N,height:p};};
n.prototype._degToRad=function(i){return i*Math.PI/180;};
n.prototype._RadToDeg=function(i){return i*180/Math.PI;};
n.prototype._getCropAreaDragIcon=function(){if(!this._cropAreaDragIcon){this._cropAreaDragIcon=new I({src:"sap-icon://move",useIconTooltip:false});}return this._cropAreaDragIcon;};
return n;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ImageEditorContainer',["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/suite/ui/commons/library","sap/ui/core/library","sap/m/library","./ImageEditor","sap/m/OverflowToolbar","sap/m/OverflowToolbarButton","sap/m/OverflowToolbarToggleButton","sap/m/OverflowToolbarLayoutData","sap/m/ToggleButton","sap/m/ToolbarSeparator","sap/m/ToolbarSpacer","sap/m/Label","sap/m/Slider","sap/m/Input","sap/m/CheckBox","sap/ui/model/json/JSONModel","sap/m/MenuButton","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/Select","sap/m/Button","sap/ui/core/Item","sap/m/ResponsivePopover","sap/m/List","sap/m/StandardListItem","sap/m/CustomListItem","sap/m/FlexBox","sap/m/FlexItemData","sap/m/IconTabBar","sap/m/IconTabFilter","sap/ui/core/Icon","sap/ui/core/HTML","sap/m/Switch","sap/suite/ui/commons/ControlProxy","sap/base/Log","sap/ui/unified/FileUploader","sap/ui/base/ManagedObjectObserver","sap/ui/core/ResizeHandler","./ImageEditorContainerRenderer"],function(q,C,l,a,M,I,O,b,c,d,T,e,f,L,S,g,h,J,j,k,m,n,B,o,R,p,r,s,F,t,u,v,w,H,x,y,z,A,D,E){"use strict";var G=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var K=M.InputType,N=M.ListType,P=l.ImageEditorMode,Q=l.ImageEditorContainerMode,U=l.ImageEditorContainerButton,V=a.ValueState,W=M.ListMode,X=M.ButtonType,Y=M.FlexDirection,Z=M.FlexRendertype,$=M.FlexJustifyContent,_=M.FlexAlignItems,a1=M.IconTabDensityMode,b1=M.BackgroundDesign,c1=M.SwitchType,d1=a.TextAlign,e1=Object.freeze({WIDTH:{min:I.LIMITS.WIDTH_MIN,max:I.LIMITS.WIDTH_MAX,callback:"_setWidth"},HEIGHT:{min:I.LIMITS.HEIGHT_MIN,max:I.LIMITS.HEIGHT_MAX,callback:"_setHeight"},ROTATION:{min:I.LIMITS.ROTATION_MIN,max:I.LIMITS.ROTATION_MAX,callback:"_rotate"},FILTER:{callback:"_applyCurrentFilter"}}),f1=Object.freeze({CUSTOMSIZE:"sap-icon://write-new-document",ORIGINALSIZE:"sap-icon://table-view",ROTATELEFT:"sap-icon://response",ROTATERIGHT:"sap-icon://forward",CROPRECTANGLE:"sap-icon://color-fill",CROPELLIPSE:"sap-icon://circle-task-2",CROPCUSTOMSHAPE:"sap-icon://add-favorite",TRANSFORM:"sap-icon://draw-rectangle",FILTER:"sap-icon://palette",CROP:"sap-icon://crop",UNDO:"sap-icon://undo",DROPDOWN:"sap-icon://slim-arrow-down",ZONES:"sap-icon://tag",LOCK:"sap-icon://locked",RESET:"sap-icon://reset",FLIPVERTICAL:"sap-icon://resize-vertical",FLIPHORIZONTAL:"sap-icon://resize-horizontal",RELATIVE:"sap-icon://resize",ZOOMIN:"sap-icon://zoom-in",ZOOMOUT:"sap-icon://zoom-out",ZOOMFIT:"sap-icon://popup-window"});
var g1=C.extend("sap.suite.ui.commons.imageeditor.ImageEditorContainer",{metadata:{library:"sap.suite.ui.commons",properties:{mode:{type:"sap.suite.ui.commons.ImageEditorContainerMode",defaultValue:Q.Filter},enabledButtons:{type:"sap.suite.ui.commons.ImageEditorContainerButton[]",defaultValue:[U.Filter,U.Transform,U.Crop]}},defaultAggregation:"imageEditor",aggregations:{imageEditor:{type:"sap.suite.ui.commons.imageeditor.ImageEditor",multiple:false,singularName:"imageEditor"},customToolbarControls:{type:"sap.ui.core.Control",multiple:true,singularName:"customToolbarControl"},customResizeItems:{type:"sap.suite.ui.commons.imageeditor.CustomSizeItem",multiple:true,singularName:"customResizeItem"},customRectangleCropItems:{type:"sap.suite.ui.commons.imageeditor.CustomSizeItem",multiple:true,singularName:"customRectangleCropItem"},customEllipseCropItems:{type:"sap.suite.ui.commons.imageeditor.CustomSizeItem",multiple:true,singularName:"customEllipseCropItem"}}}});
var h1=Object.freeze({NUM_KEPT_ITEMS:2});
g1.prototype.init=function(){var i={enabled:false,mode:null,zoom:100,transform:{keepAspectRatio:true,width:null,height:null,widthValueState:V.None,widthValueStateText:null,heightValueState:V.None,heightValueStateText:null,rotate:0,rotateValueState:V.None,rotateValueStateText:null,selectedTypeKey:"Resize",flipVertical:false,flipHorizontal:false,resizes:[{key:"custom",text:G.getText("IMGEDITOR_CUSTOM_SIZE"),icon:f1.CUSTOMSIZE,unlockRatio:true},{key:"original",text:G.getText("IMGEDITOR_ORIGINAL_SIZE"),icon:f1.ORIGINALSIZE}],rotates:[{key:"90left",text:G.getText("IMGEDITOR_ROTATE_90LEFT"),rotate:-90,icon:f1.ROTATELEFT},{key:"90right",text:G.getText("IMGEDITOR_ROTATE_90RIGHT"),rotate:90,icon:f1.ROTATERIGHT},{key:"45left",text:G.getText("IMGEDITOR_ROTATE_45LEFT"),rotate:-45,icon:f1.ROTATELEFT},{key:"45right",text:G.getText("IMGEDITOR_ROTATE_45RIGHT"),rotate:45,icon:f1.ROTATERIGHT}],flips:[{key:"vertical",text:G.getText("IMGEDITOR_FLIP_VERTICAL"),icon:f1.FLIPVERTICAL,flipVertical:true,flipHorizontal:false},{key:"horizontal",text:G.getText("IMGEDITOR_FLIP_HORIZONTAL"),icon:f1.FLIPHORIZONTAL,flipVertical:false,flipHorizontal:true}]},crop:{scaleCropArea:false,customShapeLoaded:false,zoom:100,zoomValueState:V.None,zoomValueStateText:null,width:null,widthValueState:V.None,widthValueStateText:null,height:null,heightValueState:V.None,heightValueStateText:null,keepAspectRatio:true,selectedTypeKey:"Rectangle",selectedType:null,enabled:true,areaRectangle:{x:10,y:10,width:80,height:80},types:[{key:"Rectangle",text:"\ue17b",icon:f1.CROPRECTANGLE,apply:"applyVisibleCrop"},{key:"Ellipse",text:"\ue255",icon:f1.CROPELLIPSE,apply:"applyVisibleCrop"},{key:"CustomShape",text:"\ue057",icon:f1.CROPCUSTOMSHAPE,apply:"applyVisibleCrop"}],ratiosRectangle:[{key:"custom",text:G.getText("IMGEDITOR_CUSTOM_SIZE"),icon:f1.CUSTOMSIZE,unlockRatio:true,relative:true},{key:"original",text:G.getText("IMGEDITOR_CROP_RATIO_ORIGINAL"),width:null,height:null,icon:f1.ORIGINALSIZE,relative:true}],ratiosCircle:[{key:"custom",text:G.getText("IMGEDITOR_CUSTOM_SIZE"),icon:f1.CUSTOMSIZE,unlockRatio:true,relative:true},{key:"original",text:G.getText("IMGEDITOR_CROP_RATIO_ORIGINAL"),width:null,height:null,icon:f1.ORIGINALSIZE,relative:true}],ratiosCustomShape:[{key:"custom",text:G.getText("IMGEDITOR_CUSTOM_SIZE"),icon:f1.CUSTOMSIZE,unlockRatio:true,relative:true},{key:"original",text:G.getText("IMGEDITOR_CROP_RATIO_ORIGINAL"),callback:"_setCustomShapeCropAreaRatio",icon:f1.ORIGINALSIZE,relative:true}]},filter:{filterValueState:V.None,filterValueStateText:null,selectedFilter:null,filters:[{text:G.getText("IMGEDITOR_FILTER_BRIGHTNESS"),type:"brightness",value:100,defaultValue:100,unit:"%",min:I.LIMITS.BRIGHTNESS_MIN,max:I.LIMITS.BRIGHTNESS_MAX},{text:G.getText("IMGEDITOR_FILTER_CONTRAST"),type:"contrast",value:100,defaultValue:100,unit:"%",min:I.LIMITS.CONTRAST_MIN,max:I.LIMITS.CONTRAST_MAX},{text:G.getText("IMGEDITOR_FILTER_SATURATION"),type:"saturate",value:100,defaultValue:100,unit:"%",min:I.LIMITS.SATURATE_MIN,max:I.LIMITS.SATURATE_MAX},{text:G.getText("IMGEDITOR_FILTER_GRAYSCALE"),type:"grayscale",value:0,defaultValue:0,unit:"%",min:I.LIMITS.GRAYSCALE_MIN,max:I.LIMITS.GRAYSCALE_MAX},{text:G.getText("IMGEDITOR_FILTER_INVERT"),type:"invert",value:0,defaultValue:0,unit:"%",min:I.LIMITS.INVERT_MIN,max:I.LIMITS.INVERT_MAX},{text:G.getText("IMGEDITOR_FILTER_SEPIA"),type:"sepia",value:0,defaultValue:0,unit:"%",min:I.LIMITS.SEPIA_MIN,max:I.LIMITS.SEPIA_MAX}]},history:[],historyIndex:0};this._bFirstTimeRendered=true;this._oObserver=new D(this._onManagedObjectChange.bind(this));this._oObserver.observe(this,{properties:["enabledButtons"],aggregations:["customToolbarControls"]});this._oModel=new J(i);this._oThumbnailCanvas=document.createElement("canvas");this._updateToolbarsContent();this["_setMode"+this.getMode()]();};
g1.prototype.onBeforeRendering=function(){if(this._sResizeHandlerId){E.deregister(this._sResizeHandlerId);}};
g1.prototype.onAfterRendering=function(){var i=this;this._bIsSmallSize=this._isSmallSize();function i1(){sap.ui.getCore().detachThemeChanged(i1);i._zoomToFit();}if(this._bFirstTimeRendered&&this.getImageEditor()){this._bFirstTimeRendered=false;if(sap.ui.getCore().isThemeApplied()){this._zoomToFit();}else{sap.ui.getCore().attachThemeChanged(i1);}}this._sResizeHandlerId=E.register(this,this._onResize.bind(this));};
g1.prototype.onExit=function(){if(this._sResizeHandlerId){E.deregister(this._sResizeHandlerId);}};
g1.prototype._onResize=function(){var i=this._isSmallSize();if(this._bIsSmallSize!==i){this._bIsSmallSize=i;this.rerender();}};
g1.prototype._isSmallSize=function(){var i=(sap.m.ScreenSizes&&sap.m.ScreenSizes.table)||600;return this.$()[0]&&this.$().width()<i;};
g1.prototype._zoomToFit=function(){var i=this.getImageEditor();if(i&&i._isReady()&&this.getDomRef()){i.zoomToFit();this._oModel.setProperty("/zoom",i.getZoomLevel());this._refreshCropAreaSize();}};
g1.prototype.exit=function(){this._oObserver.disconnect();this._oObserver.destroy();};
g1.prototype.setMode=function(i){this.setProperty("mode",i,true);this["_setMode"+this.getMode()]();return this;};
g1.prototype.setImageEditor=function(i){this._detachEditorEvents(this.getImageEditor());this.setAggregation("imageEditor",i);this._attachEditorEvents(i);if(i&&i.getLoaded()){this._onImageLoaded();}if(i&&i.getCustomShapeLoaded()){this._onCustomShapeLoaded();}return this;};
g1.prototype.destroyImageEditor=function(){this._detachEditorEvents(this.getImageEditor());this.destroyAggregation("imageEditor");this._oModel.setProperty("/enabled",false);return this;};
g1.prototype.getToolbar=function(){return this._getHeaderToolbar();};
g1.prototype.getToolbarIds=function(){return{filter:this.getId()+"-filterButton",crop:this.getId()+"-cropButton",transform:this.getId()+"-transformButton",undo:this.getId()+"-undoButton",history:this.getId()+"-historyButton",zoomIn:this.getId()+"-zoominButton",zoomOut:this.getId()+"-zoomoutButton",zoomToFit:this.getId()+"-zoomToFitButton",zoomLabel:this.getId()+"-zoomLabel",separator:this.getId()+"-separator"};};
g1.prototype.getMobileHeaderToolbar=function(){return this._getMobileHeaderToolbar();};
g1.prototype.getMobileZoomToolbar=function(){return this._getMobileZoomToolbar();};
g1.prototype.getMobileZoomToolbarIds=function(){return{zoomIn:this.getId()+"-mobileZoominButton",zoomLabel:this.getId()+"-mobileZoomLabel",zoomOut:this.getId()+"-mobilezoomoutButton",zoomToFit:this.getId()+"-mobileZoomToFitButton",scaleSwitch:this.getId()+"-mobileScaleSwitch",scaleLabel:this.getId()+"-mobileScaleLabel"};};
g1.prototype.getMobileFooterToolbar=function(){return this._getMobileFooterToolbar();};
g1.prototype.getMobileFooterToolbarIds=function(){return{filter:this.getId()+"-mobileFilterButton",crop:this.getId()+"-mobileCropButton",transform:this.getId()+"-mobileTransformButton",undo:this.getId()+"-mobileUndoButton",history:this.getId()+"-mobileHistoryButton",apply:this.getId()+"-mobileApplyButton"};};
g1.prototype._attachEditorEvents=function(i){if(!i){return;}i.attachLoaded(this._onImageLoaded,this);i.attachCustomShapeLoaded(this._onCustomShapeLoaded,this);i.attachError(this._onImageError,this);i.attachCropAreaChanged(this._onCropAreaChange,this);i.attachHistoryChanged(this._onHistoryChange,this);i.attachSizeChanged(this._onSizeChange,this);i.attachZoomChanged(this._onZoomChange,this);};
g1.prototype._detachEditorEvents=function(i){if(!i){return;}i.detachLoaded(this._onImageLoaded,this);i.detachCustomShapeLoaded(this._onCustomShapeLoaded,this);i.detachError(this._onImageError,this);i.detachCropAreaChanged(this._onCropAreaChange,this);i.detachHistoryChanged(this._onHistoryChange,this);i.detachSizeChanged(this._onSizeChange,this);i.detachZoomChanged(this._onZoomChange,this);};
g1.prototype._onManagedObjectChange=function(i){if(i.object===this._oMobileHeaderToolbar){this._oMobileHeaderToolbar.setVisible(i.object.getContent().length>0);}else if(i.object===this){this._updateToolbarsContent();}};
g1.prototype._refreshImageSize=function(){if(!this.getImageEditor()||!this.getImageEditor().getLoaded()){return;}var i=this.getImageEditor().getWidth(),i1=this.getImageEditor().getHeight();this._oModel.setProperty("/transform/resizes/1/width",i);this._oModel.setProperty("/transform/resizes/1/height",i1);this._oModel.setProperty("/crop/ratiosRectangle/1/width",i);this._oModel.setProperty("/crop/ratiosRectangle/1/height",i1);this._oModel.setProperty("/crop/ratiosCircle/1/width",i);this._oModel.setProperty("/crop/ratiosCircle/1/height",i1);this._updateCurrentSize(i,i1);};
g1.prototype._refreshCropAreaSize=function(){var i=this.getImageEditor().getCropArea();if(!i){return;}this._updateCropSize(Math.round(i.width),Math.round(i.height));};
g1.prototype._onImageLoaded=function(){var i=this.getImageEditor();this._resetValueStates();this._oModel.setProperty("/enabled",!!i.getSrc());if(!i.getSrc()){this._changeOptionsPanelContent();return;}this["_setMode"+this.getMode()]();this._refreshImageSize();this._oModel.setProperty("/history",[]);this._oModel.setProperty("/historyIndex",0);this._zoomToFit();this._updateOrigThumbnail();this._resetCurrentPanel();};
g1.prototype._onCustomShapeLoaded=function(){var i=this.getImageEditor();if(i.getCustomShapeSrc()&&i.getLoaded()&&i.getMode()===P.CropCustomShape){this._setCustomShapeCropAreaRatio();}this._oModel.setProperty("/crop/customShapeLoaded",!!i.getCustomShapeSrc());};
g1.prototype._onImageError=function(){this._resetValueStates();this._changeOptionsPanelContent();this._oModel.setProperty("/enabled",false);};
g1.prototype._onCropAreaChange=function(i){this._resetValueStates();this._updateCropSize(Math.round(i.getParameter("cropArea").width),Math.round(i.getParameter("cropArea").height));};
g1.prototype._onHistoryChange=function(i){var i1=i.getParameter("history"),j1=i.getParameter("index");this._resetValueStates();this._refreshImageSize();i1.push({noChange:"NoChange"});this._oModel.setProperty("/history",i1);this._oModel.setProperty("/historyIndex",j1);};
g1.prototype._onSizeChange=function(i){this._resetValueStates();this._updateCurrentSize(i.getParameter("width"),i.getParameter("height"));this._selectResizeCustomSizeItem(this.getImageEditor().getKeepResizeAspectRatio());};
g1.prototype._onZoomChange=function(i){var i1=i.getParameter("zoom");this._oModel.setProperty("/zoom",i1);this._refreshCropAreaSize();};
g1.prototype._updateCropSize=function(i,i1){this._oModel.setProperty("/crop/width",i);this._oModel.setProperty("/crop/height",i1);};
g1.prototype._updateCurrentSize=function(i,i1){this._oModel.setProperty("/transform/width",i);this._oModel.setProperty("/transform/height",i1);};
g1.prototype._updateOrigThumbnail=function(){var i=this.$("origThumbnail"),i1=this.getImageEditor(),j1,k1,l1=this._oThumbnailCanvas.getContext("2d");if(i1.getWidth()>=i1.getHeight()){j1=300;k1=Math.round(i1.getHeight()*j1/i1.getWidth());}else{k1=300;j1=Math.round(i1.getWidth()*k1/i1.getHeight());}this._oThumbnailCanvas.width=j1;this._oThumbnailCanvas.height=k1;l1.clearRect(0,0,j1,k1);l1.drawImage(i1._oCanvas,0,0,j1,k1);i.attr({"href":this._oThumbnailCanvas.toDataURL()});if(i[0]){i[0].setAttribute("viewBox","0 0 "+j1+" "+k1);}};
g1.prototype._getHeaderToolbar=function(){if(!this._oHeaderToolbar){this._oHeaderToolbar=new O({enabled:"{/enabled}"}).addStyleClass("sapSuiteUiCommonsImageEditorContainerHeaderToolbar");this._oHeaderToolbar.setModel(this._oModel);this.addDependent(this._oHeaderToolbar);}return this._oHeaderToolbar;};
g1.prototype._updateToolbarsContent=function(){var i1=this._getHeaderToolbar(),j1=this._getMobileHeaderToolbar(),k1=this._getMobileFooterToolbar(),l1=this.getEnabledButtons(),i;i1.removeAllContent();j1.removeAllContent();k1.removeAllContent();this._getHistoryItems().forEach(function(m1){i1.addContent(m1);});this._getMobileHistoryItems().forEach(function(m1){k1.addContent(m1);});this._getZoomItems().forEach(function(m1){i1.addContent(m1);});i1.addContent(this._getToolbarSeparator());for(i=0;i<l1.length;i++){switch(l1[i]){case U.Filter:{i1.addContent(this._getFilterButton());k1.addContent(this._getMobileFilterButton());break;}case U.Crop:{i1.addContent(this._getCropButton());k1.addContent(this._getMobileCropButton());break;}case U.Transform:{i1.addContent(this._getTransformButton());k1.addContent(this._getMobileTransformButton());break;}case U.History:{break;}default:break;}}i1.addContent(this._getToolbarSpacer());k1.addContent(this._getMobileFooterToolbarSpacer());k1.addContent(this._getMobileApplyButton());if(this.getCustomToolbarControls().length>0){j1.addContent(this._getMobileHeaderToolbarSpacer());}this.getCustomToolbarControls().forEach(function(m1){var n1=new y(),o1=new y();this.addDependent(n1);n1.setAssociation("control",m1);i1.addContent(n1);this.addDependent(o1);o1.setAssociation("control",m1);j1.addContent(o1);},this);};
g1.prototype._getToolbarSpacer=function(){if(!this._oSpacer){this._oSpacer=new f({id:this.getId()+"-spacer"});this.addDependent(this._oSpacer);}return this._oSpacer;};
g1.prototype._getMobileHeaderToolbarSpacer=function(){if(!this._oMobileHeaderSpacer){this._oMobileHeaderSpacer=new f({id:this.getId()+"-mobileSpacer"});this.addDependent(this._oMobileHeaderSpacer);}return this._oMobileHeaderSpacer;};
g1.prototype._getMobileFooterToolbarSpacer=function(){if(!this._oMobileFooterSpacer){this._oMobileFooterSpacer=new f({id:this.getId()+"-mobileFooterSpacer"});this.addDependent(this._oMobileFooterSpacer);}return this._oMobileFooterSpacer;};
g1.prototype._getMobileHeaderToolbar=function(){if(!this._oMobileHeaderToolbar){this._oMobileHeaderToolbar=new O({enabled:"{/enabled}",visible:false}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileToolbar");this.addDependent(this._oMobileHeaderToolbar);this._oObserver.observe(this._oMobileHeaderToolbar,{aggregations:["content"]});}return this._oMobileHeaderToolbar;};
g1.prototype._getMobileZoomToolbar=function(){if(!this._oMobileZoomToolbar){this._oMobileZoomToolbar=new O({enabled:"{/enabled}",content:[this._getMobileZoomInButton(),this._getMobileZoomLabel(),this._getMobileZoomOutButton(),this._getMobileZoomToFitButton(),this._getMobileScaleSwitch(),this._getMobileScaleLabel()]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileToolbar");this._oMobileZoomToolbar.setModel(this._oModel);this.addDependent(this._oMobileZoomToolbar);}return this._oMobileZoomToolbar;};
g1.prototype._getMobileFooterToolbar=function(){if(!this._oMobileFooterToolbar){this._oMobileFooterToolbar=new O({enabled:"{/enabled}"}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileToolbar");this._oMobileFooterToolbar.setModel(this._oModel);this.addDependent(this._oMobileFooterToolbar);if(this._oMobileFooterToolbar._applyContextClassFor){this._oMobileFooterToolbar._applyContextClassFor("footer");}else{z.warning("ImageEditorContainer: _applyContextClassFor method doesn't exist, footer look is not applied on mobile footer toolbar");}}return this._oMobileFooterToolbar;};
g1.prototype._getHistoryPopover=function(){var i=this;if(!this._oHistoryPopover){this._oHistoryPopover=new R({title:{path:"/history",formatter:function(i1){return G.getText("IMGEDITOR_HISTORY_TITLE",String(i1.length-1));}},endButton:new B({text:G.getText("IMGEDITOR_HISTORY_CLOSE"),press:function(){i._oHistoryPopover.close();}}),afterOpen:function(){var i1=i._oModel.getProperty("/historyIndex"),j1=i._oHistoryList.getItems()[i1];i._oHistoryList.setSelectedItem(j1);j1.focus();}});this._oHistoryList=new p({mode:W.SingleSelectMaster,selectionChange:function(i1){var j1=i1.getParameter("listItem"),k1=j1.getParent().indexOfItem(j1);i._jumpToHistory(k1);},items:{path:"/history",factory:this._historyItemFactory.bind(this)}});this._oHistoryPopover.setModel(this._oModel);this._oHistoryPopover.addContent(this._oHistoryList);this.addDependent(this._oHistoryPopover);}return this._oHistoryPopover;};
g1.prototype._historyItemFactory=function(i,i1){var j1=this._oModel.getProperty("/history").indexOf(i1.getProperty()),k1=i1.getProperty(),l1,m1,n1,o1;switch(k1.noChange||k1.getMetadata().getName()){case"sap.suite.ui.commons.imageeditor.RotateHistoryItem":{m1=G.getText("IMGEDITOR_ROTATE");n1=k1.getDegrees();o1=f1.TRANSFORM;break;}case"sap.suite.ui.commons.imageeditor.ResizeHistoryItem":{m1=G.getText("IMGEDITOR_RESIZE");n1=G.getText("IMGEDITOR_HISTORY_TEXT",[k1.getOldWidth()+" x "+k1.getOldHeight(),k1.getWidth()+" x "+k1.getHeight()]);o1=f1.TRANSFORM;break;}case"sap.suite.ui.commons.imageeditor.FlipHistoryItem":{m1=G.getText("IMGEDITOR_FLIP");if(k1.getVertical()&&k1.getHorizontal()){n1=G.getText("IMGEDITOR_FLIP_BOTH");o1=f1.FLIPHORIZONTAL;}else{n1=k1.getVertical()?G.getText("IMGEDITOR_FLIP_VERTICAL"):G.getText("IMGEDITOR_FLIP_HORIZONTAL");o1=k1.getVertical()?f1.FLIPVERTICAL:f1.FLIPHORIZONTAL;}break;}case"sap.suite.ui.commons.imageeditor.FilterHistoryItem":{m1=k1.getType();m1=m1[0].toUpperCase()+m1.slice(1);n1=k1.getValue();o1=f1.FILTER;break;}case"sap.suite.ui.commons.imageeditor.CropRectangleHistoryItem":case"sap.suite.ui.commons.imageeditor.CropEllipseHistoryItem":case"sap.suite.ui.commons.imageeditor.CropCustomShapeHistoryItem":{m1=G.getText("IMGEDITOR_CROP");n1=G.getText("IMGEDITOR_HISTORY_TEXT",[k1.getOldWidth()+" x "+k1.getOldHeight(),k1.getWidth()+" x "+k1.getHeight()]);o1=f1.CROP;break;}case"NoChange":{m1=G.getText("IMGEDITOR_HISTORY_ORIGINAL");n1=G.getText("IMGEDITOR_HISTORY_ORIGINAL_TEXT");o1=f1.RESET;break;}default:{break;}}l1=new r({title:m1,description:n1,icon:o1,selected:{path:"/historyIndex",formatter:function(p1){return j1===p1;}}});return l1;};
g1.prototype._getHistoryItems=function(){if(!this._aHistoryItems){this._aHistoryItems=[this._getUndoButton(),this._getHistoryArrowButton()];}return this._aHistoryItems;};
g1.prototype._getMobileHistoryItems=function(){if(!this._aMobileHistoryItems){this._aMobileHistoryItems=[this._getMobileUndoButton(),this._getMobileHistoryArrowButton()];}return this._aMobileHistoryItems;};
g1.prototype._getUndoButton=function(){if(!this._oHistoryButton){this._oHistoryButton=this._createUndoButton(this.getId()+"-undoButton");this.addDependent(this._oHistoryButton);}return this._oHistoryButton;};
g1.prototype._getMobileUndoButton=function(){if(!this._oMobileHistoryButton){this._oMobileHistoryButton=this._createUndoButton(this.getId()+"-mobileUndoButton");this.addDependent(this._oMobileHistoryButton);}return this._oMobileHistoryButton;};
g1.prototype._createUndoButton=function(i){var i1=this;return new b({id:i,type:X.Transparent,icon:f1.UNDO,enabled:{parts:["/history","/historyIndex"],formatter:function(j1,k1){return j1.length>1&&k1<j1.length-1;}},press:function(){i1._undo();},tooltip:G.getText("IMGEDITOR_PANEL_UNDO")});};
g1.prototype._getHistoryArrowButton=function(){var i=this;if(!this._oHistoryArrowButton){this._oHistoryArrowButton=this._createHistoryArrowButton(this.getId()+"-historyButton",function(){i._resetValueStates();i._getHistoryPopover().openBy(i._oHistoryArrowButton);});this.addDependent(this._oHistoryArrowButton);}return this._oHistoryArrowButton;};
g1.prototype._getMobileHistoryArrowButton=function(){var i=this;if(!this._oMobileHistoryArrowButton){this._oMobileHistoryArrowButton=this._createHistoryArrowButton(this.getId()+"-mobileHistoryButton",function(){i._resetValueStates();i._getHistoryPopover().openBy(i._oMobileHistoryArrowButton);});this.addDependent(this._oMobileHistoryArrowButton);}return this._oMobileHistoryArrowButton;};
g1.prototype._createHistoryArrowButton=function(i,i1){return new b({id:i,type:X.Transparent,icon:f1.DROPDOWN,enabled:{path:"/history",formatter:function(j1){return j1.length>1;}},press:i1,tooltip:G.getText("IMGEDITOR_PANEL_HISTORY")});};
g1.prototype._getZoomItems=function(){if(!this._aZoomItems){this._aZoomItems=[this._getZoomInButton(),this._getZoomLabel(),this._getZoomOutButton(),this._getZoomToFitButton()];}return this._aZoomItems;};
g1.prototype._getZoomInButton=function(){if(!this._oZoomInButton){this._oZoomInButton=this._createZoomInButton(this.getId()+"-zoominButton");this.addDependent(this._oZoomInButton);}return this._oZoomInButton;};
g1.prototype._getMobileZoomInButton=function(){if(!this._oMobileZoomInButton){this._oMobileZoomInButton=this._createZoomInButton(this.getId()+"-mobileZoominButton");this.addDependent(this._oMobileZoomInButton);}return this._oMobileZoomInButton;};
g1.prototype._createZoomInButton=function(i){var i1=this;return new b({id:i,type:X.Transparent,icon:f1.ZOOMIN,press:function(){var j1=i1.getImageEditor();j1.zoomIn();i1._oModel.setProperty("/zoom",j1.getZoomLevel());i1._refreshCropAreaSize();},tooltip:G.getText("IMGEDITOR_PANEL_ZOOMIN")});};
g1.prototype._getZoomLabel=function(){if(!this._oZoomLabel){this._oZoomLabel=this._createZoomLabel(this.getId()+"-zoomLabel");this.addDependent(this._oZoomLabel);}return this._oZoomLabel;};
g1.prototype._getMobileZoomLabel=function(){if(!this._oMobileZoomLabel){this._oMobileZoomLabel=this._createZoomLabel(this.getId()+"-mobileZoomLabel");this.addDependent(this._oMobileZoomLabel);}return this._oMobileZoomLabel;};
g1.prototype._createZoomLabel=function(i){return new L({id:i,text:{path:"/zoom",formatter:function(i1){return i1+"%";}}});};
g1.prototype._getZoomOutButton=function(){if(!this._oZoomOutButton){this._oZoomOutButton=this._createZoomOutButton(this.getId()+"-zoomoutButton");this.addDependent(this._oZoomOutButton);}return this._oZoomOutButton;};
g1.prototype._getMobileZoomOutButton=function(){if(!this._oMobileZoomOutButton){this._oMobileZoomOutButton=this._createZoomOutButton(this.getId()+"-mobileZoomoutButton");this.addDependent(this._oMobileZoomOutButton);}return this._oMobileZoomOutButton;};
g1.prototype._createZoomOutButton=function(i){var i1=this;return new b({id:i,type:X.Transparent,icon:f1.ZOOMOUT,press:function(){var j1=i1.getImageEditor();j1.zoomOut();i1._oModel.setProperty("/zoom",j1.getZoomLevel());i1._refreshCropAreaSize();},tooltip:G.getText("IMGEDITOR_PANEL_ZOOMOUT")});};
g1.prototype._getZoomToFitButton=function(){if(!this._oZoomToFit){this._oZoomToFit=this._createZoomToFitButton(this.getId()+"-zoomToFitButton");this.addDependent(this._oZoomToFit);}return this._oZoomToFit;};
g1.prototype._getMobileZoomToFitButton=function(){if(!this._oMobileZoomToFit){this._oMobileZoomToFit=this._createZoomToFitButton(this.getId()+"-mobileZoomToFitButton");this.addDependent(this._oMobileZoomToFit);}return this._oMobileZoomToFit;};
g1.prototype._createZoomToFitButton=function(i){var i1=this;return new b({id:i,type:X.Transparent,icon:f1.ZOOMFIT,press:i1._zoomToFit.bind(i1),tooltip:G.getText("IMGEDITOR_PANEL_ZOOMTOFIT")});};
g1.prototype._getScaleSwitch=function(){if(!this._oScaleSwitch){this._oScaleSwitch=this._createScaleSwitch(this.getId()+"-scaleSwitch");this.addDependent(this._oScaleSwitch);}return this._oScaleSwitch;};
g1.prototype._getMobileScaleSwitch=function(){if(!this._oMobileScaleSwitch){this._oMobileScaleSwitch=this._createScaleSwitch(this.getId()+"-mobileScaleSwitch");this.addDependent(this._oMobileScaleSwitch);}return this._oMobileScaleSwitch;};
g1.prototype._createScaleSwitch=function(i){var i1=this;return new x({id:i,type:c1.AcceptReject,state:"{/crop/scaleCropArea}",visible:{path:"/mode",formatter:function(j1){return j1==="Crop";}},change:function(j1){i1._setScaleCropArea(j1.getParameter("state"));}}).addStyleClass("sapUiTinyMarginEnd");};
g1.prototype._getScaleLabel=function(){if(!this._oScaleLabel){this._oScaleLabel=this._createScaleLabel(this.getId()+"-scaleLabel");this.addDependent(this._oScaleLabel);}return this._oScaleLabel;};
g1.prototype._getMobileScaleLabel=function(){if(!this._oMobileScaleLabel){this._oMobileScaleLabel=this._createScaleLabel(this.getId()+"-mobileScaleLabel");this.addDependent(this._oMobileScaleLabel);}return this._oMobileScaleLabel;};
g1.prototype._createScaleLabel=function(i){return new L({text:G.getText("IMGEDITOR_CROP_SCALE"),labelFor:i,visible:{path:"/mode",formatter:function(i1){return i1==="Crop";}}});};
g1.prototype._getToolbarSeparator=function(){if(!this._oSeparator){this._oSeparator=new e({id:this.getId()+"-separator"});this.addDependent(this._oSeparator);}return this._oSeparator;};
g1.prototype._getTransformButton=function(){if(!this._oTransformButton){this._oTransformButton=this._createTransformButton(this.getId()+"-transformButton");this.addDependent(this._oTransformButton);}return this._oTransformButton;};
g1.prototype._getMobileTransformButton=function(){if(!this._oMobileTransformButton){this._oMobileTransformButton=this._createTransformButton(this.getId()+"-mobileTransformButton");this.addDependent(this._oMobileTransformButton);}return this._oMobileTransformButton;};
g1.prototype._createTransformButton=function(i){return new c({id:i,icon:f1.TRANSFORM,type:X.Transparent,pressed:{path:"/mode",formatter:function(i1){return i1===Q.Transform;}},enabled:{path:"/mode",formatter:function(i1){return i1!==Q.Transform;}},press:this._onButtonPress.bind(this,this._setModeTransform.bind(this)),tooltip:G.getText("IMGEDITOR_PANEL_TRANSFORM")});};
g1.prototype._getCropButton=function(){if(!this._oCropButton){this._oCropButton=this._createCropButton(this.getId()+"-cropButton");this.addDependent(this._oCropButton);}return this._oCropButton;};
g1.prototype._getMobileCropButton=function(){if(!this._oMobileCropButton){this._oMobileCropButton=this._createCropButton(this.getId()+"-mobileCropButton");this.addDependent(this._oMobileCropButton);}return this._oMobileCropButton;};
g1.prototype._createCropButton=function(i){return new c({id:i,icon:f1.CROP,type:X.Transparent,pressed:{path:"/mode",formatter:function(i1){return i1===Q.Crop;}},enabled:{path:"/mode",formatter:function(i1){return i1!==Q.Crop;}},press:this._onButtonPress.bind(this,this._setModeCrop.bind(this)),tooltip:G.getText("IMGEDITOR_PANEL_CROP")});};
g1.prototype._getFilterButton=function(){if(!this._oFilterButton){this._oFilterButton=this._createFilterButton(this.getId()+"-filterButton");this.addDependent(this._oFilterButton);}return this._oFilterButton;};
g1.prototype._getMobileFilterButton=function(){if(!this._oMobileFilterButton){this._oMobileFilterButton=this._createFilterButton(this.getId()+"-mobileFilterButton");this.addDependent(this._oMobileFilterButton);}return this._oMobileFilterButton;};
g1.prototype._createFilterButton=function(i){return new c({id:i,icon:f1.FILTER,type:X.Transparent,pressed:{path:"/mode",formatter:function(i1){return i1===Q.Filter;}},enabled:{path:"/mode",formatter:function(i1){return i1!==Q.Filter;}},press:this._onButtonPress.bind(this,this._setModeFilter.bind(this)),tooltip:G.getText("IMGEDITOR_PANEL_FILTER")});};
g1.prototype._getMobileApplyButton=function(){if(!this._oMobileApplyButton){this._oMobileApplyButton=new B({id:this.getId()+"-mobileApplyButton",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this)});}return this._oMobileApplyButton;};
g1.prototype._changeOptionsPanelContent=function(i){var i1=this._getOptionsPanel();i1.removeAllItems();if(!this.getImageEditor()||!this.getImageEditor().getLoaded()||!i){return;}i().forEach(function(j1){i1.addItem(j1);});};
g1.prototype._onButtonPress=function(i){this.getImageEditor()._cancelPreview();i();};
g1.prototype._setModeTransform=function(i){this._changeOptionsPanelContent(this._getTransformPanelContent.bind(this));if(this.getImageEditor()){this.getImageEditor().setMode(P.Resize);}if(this.getMode()!==Q.Transform){this.setProperty("mode",Q.Transform,true);}this._setTransformTypeByKey(i||"Resize");this._oModel.setProperty("/mode",Q.Transform);};
g1.prototype._setModeCrop=function(i){this._changeOptionsPanelContent(this._getCropPanelContent.bind(this));if(this.getImageEditor()){this._setCropTypeByKey(i||"Rectangle");}if(this.getMode()!==Q.Crop){this.setProperty("mode",Q.Crop,true);}this._oModel.setProperty("/mode",Q.Crop);this._setScaleCropArea(this._oModel.getProperty("/crop/scaleCropArea"));};
g1.prototype._setModeFilter=function(){this._changeOptionsPanelContent(this._getFilterPanelContent.bind(this));if(this.getImageEditor()){this.getImageEditor().setMode(P.Default);}if(this.getMode()!==Q.Filter){this.setProperty("mode",Q.Filter,true);}this._resetFilterValues();this._selectFilterItem(0);this._oModel.setProperty("/mode",Q.Filter);};
g1.prototype._constraintValue=function(i,i1,j1){var k1=j1.getBinding("value"),l1=j1.getBinding("valueState"),m1=j1.getBinding("valueStateText"),n1;if(isNaN(i)||i<i1.min||i>i1.max){n1=G.getText("IMGEDITOR_BAD_NUMBER",[i1.min,i1.max]);i=this._oModel.getProperty(k1.getPath());}if(n1){this._oModel.setProperty(l1.getPath(),V.Warning);this._oModel.setProperty(m1.getPath(),n1);}this._oModel.setProperty(k1.getPath(),i);j1.setValue(i);return i;};
g1.prototype._onNumberInputChange=function(i,i1){var j1=i1.getParameter("value"),k1=i1.getParameter("newValue"),l1;this._resetValueStates();if(typeof j1==="number"){l1=j1;}else if(typeof k1==="number"){l1=k1;}else{l1=parseInt(i1.getParameter("value")||i1.getParameter("newValue"),10);}l1=this._constraintValue(l1,i,i1.getSource());this[i.callback](l1);};
g1.prototype._setRatio=function(i,i1){if(!this.getImageEditor()||!this.getImageEditor().getLoaded()){return;}this.getImageEditor().setCropAreaByRatio(i,i1);this._refreshCropAreaSize();};
g1.prototype._setCropAreaBySize=function(i,i1){this.getImageEditor().setCropAreaBySize(i,i1);this._refreshCropAreaSize();};
g1.prototype._setRatioByKey=function(i){if(i==="Rectangle"){this._setRatio(this._oModel.getProperty("/crop/ratiosRectangle/1/width"),this._oModel.getProperty("/crop/ratiosRectangle/1/height"));}else if(i==="Ellipse"){this._setRatio(1,1);}else if(i==="CustomShape"&&this.getImageEditor().getCustomShapeLoaded()){this._setCustomShapeCropAreaRatio();}};
g1.prototype._setCustomShapeCropAreaRatio=function(){this.getImageEditor().setCustomShapeCropAreaRatio();this._refreshCropAreaSize();};
g1.prototype._setTransformTypeByKey=function(i){var i1=i==="Resize"?P.Resize:P.Default;if(i==="Resize"){this._refreshImageSize();this._selectResizeCustomSizeItem();}else if(i==="Rotate"){this._oModel.setProperty("/transform/rotate",0);}else if(i==="Flip"){this._resetFlips();}this._oModel.setProperty("/transform/selectedTypeKey",i);this._resetValueStates();if(this.getImageEditor()){this.getImageEditor()._cancelPreview();this.getImageEditor().setMode(i1);}};
g1.prototype._setCropTypeByKey=function(i,i1){var j1=this._oModel.getProperty("/crop/types").filter(function(k1){return k1.key===i;})[0];this._setRatioByKey(i);this._oModel.setProperty("/crop/selectedTypeKey",i);this._oModel.setProperty("/crop/selectedType",j1);if(this["_select"+i+"CropCustomSizeItem"]){this["_select"+i+"CropCustomSizeItem"](i1);}this.getImageEditor().setMode("Crop"+i);this._resetValueStates();};
g1.prototype._resetCurrentPanel=function(){this.getImageEditor().cancelPreview();switch(this.getMode()){case Q.Transform:{this._setTransformTypeByKey(this._oModel.getProperty("/transform/selectedTypeKey"));break;}case Q.Crop:{this._setCropTypeByKey(this._oModel.getProperty("/crop/selectedTypeKey"));break;}case Q.Filter:{this._selectFilterItem(this._getSelectedFilterIndex());break;}default:break;}this._resetValueStates();};
g1.prototype._undo=function(){this.getImageEditor().undo();this._resetCurrentPanel();};
g1.prototype._redo=function(){this.getImageEditor().redo();this._resetCurrentPanel();};
g1.prototype._jumpToHistory=function(i){this.getImageEditor().jumpToHistory(i);this._resetCurrentPanel();};
g1.prototype._setZoom=function(i){this._oModel.setProperty("/zoom",i);this.getImageEditor().zoom(i);this._refreshCropAreaSize();};
g1.prototype._setWidth=function(i){this.getImageEditor().setWidth(i,true);this._oModel.setProperty("/transform/height",this.getImageEditor().getPreviewHeight());this._selectResizeCustomSizeItem(this.getImageEditor().getKeepResizeAspectRatio());};
g1.prototype._setHeight=function(i){this.getImageEditor().setHeight(i,true);this._oModel.setProperty("/transform/width",this.getImageEditor().getPreviewWidth());this._selectResizeCustomSizeItem(this.getImageEditor().getKeepResizeAspectRatio());};
g1.prototype._setSize=function(i,i1,j1){if(j1){i=this.getImageEditor().getWidth()*i;i1=this.getImageEditor().getHeight()*i1;}this._updateCurrentSize(i,i1);if(this.getImageEditor().getPreviewWidth()===i&&this.getImageEditor().getPreviewHeight()===i1){return;}this.getImageEditor().setSize(i,i1,true);};
g1.prototype._rotate=function(i){i=i>I.LIMITS.ROTATION_MAX?I.LIMITS.ROTATION_MAX:i;i=i<I.LIMITS.ROTATION_MIN?I.LIMITS.ROTATION_MIN:i;this._oModel.setProperty("/transform/rotate",i);this.getImageEditor().rotate(i,true);};
g1.prototype._flip=function(i,i1){this.getImageEditor().flip(i,i1,true);};
g1.prototype._setKeepResizeAspectRatio=function(i){this._oModel.setProperty("/transform/keepAspectRatio",i);if(this.getImageEditor()){this.getImageEditor().setKeepResizeAspectRatio(i);}};
g1.prototype._getKeepCropAspectRatio=function(){return this._oModel.getProperty("/crop/keepAspectRatio");};
g1.prototype._setKeepCropAspectRatio=function(i){this._oModel.setProperty("/crop/keepAspectRatio",i);if(this.getImageEditor()){this.getImageEditor().setKeepCropAspectRatio(i);}};
g1.prototype._setScaleCropArea=function(i){this._oModel.setProperty("/crop/scaleCropArea",i);if(this.getImageEditor()){this.getImageEditor().setScaleCropArea(i);}};
g1.prototype._applyCurrentFilter=function(i){var i1=this._oModel.getProperty("/filter/selectedFilter");if(typeof i!=="undefined"){this._oModel.setProperty("/filter/selectedFilter/value",i);}this.getImageEditor()[i1.type](i1.value,true);};
g1.prototype._resetFilterValues=function(){var i=this._oModel.getProperty("/filter/filters");i.forEach(function(i1,j1){this._oModel.setProperty("/filter/filters/"+j1+"/value",i1.defaultValue);},this);};
g1.prototype._resetValueStates=function(){var i=["/transform/widthValueState","/transform/heightValueState","/transform/rotateValueState","/crop/widthValueState","/crop/heightValueState","/filter/filterValueState"];i.forEach(function(i1){this._oModel.setProperty(i1,V.None);},this);};
g1.prototype._resetFlips=function(){this._oModel.setProperty("/transform/flipVertical",false);this._oModel.setProperty("/transform/flipHorizontal",false);};
g1.prototype._applyPreview=function(){this.getImageEditor().applyPreview();this._resetValueStates();switch(this.getMode()){case Q.Transform:{switch(this._oModel.getProperty("/transform/selectedTypeKey")){case"Resize":{this._refreshImageSize();break;}case"Rotate":{this._oModel.setProperty("/transform/rotate",0);this._refreshImageSize();break;}case"Flip":{this._resetFlips();break;}default:break;}break;}case Q.Crop:{var i=this._oModel.getProperty("/crop/selectedType/apply");if(i){this.getImageEditor()[i]();}this._refreshImageSize();this._setRatioByKey(this._oModel.getProperty("/crop/selectedTypeKey"));this._deselectCropItem();this.getImageEditor().setMode(P.Default);break;}case Q.Filter:{this._resetFilterValues();break;}default:break;}};
g1.prototype._createGridList=function(i,i1,j1){var k1=this;var l1=new p({width:"auto",mode:"SingleSelectMaster",itemPress:function(m1){k1._resetValueStates();j1.call(k1,m1);},items:{path:i,factory:i1.bind(this)}}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridList");l1.setModel(this._oModel);if(!l1._oItemNavigation){l1._startItemNavigation();}if(l1._oItemNavigation){l1._oItemNavigation.setColumns(2);}return l1;};
g1.prototype._selectResizeCustomSizeItem=function(i){var i1=this._getResizeGridList(),j1=i1.getItems()[0];i1.setSelectedItem(j1);this._setKeepResizeAspectRatio(!!i);};
g1.prototype._deselectCropItem=function(){this._getRectangleCropGridList().removeSelections();this._getEllipseCropGridList().removeSelections();this._disableCrop();};
g1.prototype._disableCrop=function(){this._oModel.setProperty("/crop/enabled",false);};
g1.prototype._enableCrop=function(){this._oModel.setProperty("/crop/enabled",true);};
g1.prototype._selectRectangleCropCustomSizeItem=function(i){var i1=this._getRectangleCropGridList(),j1=i1.getItems()[0];i1.setSelectedItem(j1);this._setKeepCropAspectRatio(!!i);this._enableCrop();};
g1.prototype._selectEllipseCropCustomSizeItem=function(i){var i1=this._getEllipseCropGridList(),j1=i1.getItems()[0];i1.setSelectedItem(j1);this._setKeepCropAspectRatio(!!i);this._enableCrop();};
g1.prototype._selectCustomShapeCropCustomSizeItem=function(i){var i1=this._getCustomShapeCropGridList(),j1=i1.getItems()[0];i1.setSelectedItem(j1);this._setKeepCropAspectRatio(!!i);this._enableCrop();};
g1.prototype._selectFilterItem=function(i){var i1=this._getFilterGridList(),j1=i1.getItems()[i];this._oModel.setProperty("/filter/selectedFilter",j1.getBindingContext().getProperty());this._oModel.setProperty("/filter/selectedFilter/value",this._oModel.getProperty("/filter/selectedFilter/defaultValue"));i1.setSelectedItem(j1);};
g1.prototype._getSelectedFilterIndex=function(){var i=this._oModel.getProperty("/filter/selectedFilter"),i1=i?this._oModel.getProperty("/filter/filters").indexOf(i):0;return i1;};
g1.prototype._getResizeGridList=function(){if(!this._oGridListResize){this._oGridListResize=this._createGridList("/transform/resizes",this._gridRectShapeItemFactory,this._onResizeGridListSelectionChange);}return this._oGridListResize;};
g1.prototype._onResizeGridListSelectionChange=function(i){var i1=i.getParameter("listItem"),j1=i1.getBindingContext();if(j1.getProperty("width")){this._setSize(j1.getProperty("width"),j1.getProperty("height"),j1.getProperty("relative"));}this._setKeepResizeAspectRatio(!j1.getProperty("unlockRatio"));};
g1.prototype._getRotateGridList=function(){if(!this._oGridListRotate){this._oGridListRotate=this._createGridList("/transform/rotates",this._gridRectShapeItemFactory,this._onRotateGridListSelectionChange);}return this._oGridListRotate;};
g1.prototype._onRotateGridListSelectionChange=function(i){var i1=i.getParameter("listItem"),j1=i1.getBindingContext();this._getRotateGridList().removeSelections();this._rotate(this._oModel.getProperty("/transform/rotate")+j1.getProperty("rotate"));};
g1.prototype._getFlipGridList=function(){if(!this._oGridListFlip){this._oGridListFlip=this._createGridList("/transform/flips",this._gridRectShapeItemFactory,this._onFlipGridListSelectionChange);}return this._oGridListFlip;};
g1.prototype._onFlipGridListSelectionChange=function(i){var i1=i.getParameter("listItem"),j1=i1.getBindingContext(),k1=this._oModel.getProperty("/transform/flipVertical"),l1=this._oModel.getProperty("/transform/flipHorizontal");this._getFlipGridList().removeSelections();k1=k1!==j1.getProperty("flipVertical");l1=l1!==j1.getProperty("flipHorizontal");this._oModel.setProperty("/transform/flipVertical",k1);this._oModel.setProperty("/transform/flipHorizontal",l1);this._flip(k1,l1);};
g1.prototype._getRectangleCropGridList=function(){if(!this._oGridListRectCrop){this._oGridListRectCrop=this._createGridList("/crop/ratiosRectangle",this._gridRectShapeItemFactory,this._onRectCropGridListSelectionChange);}return this._oGridListRectCrop;};
g1.prototype._onRectCropGridListSelectionChange=function(i){var i1=i.getParameter("listItem");this._onGridListSelectionChange(i1,P.CropRectangle);};
g1.prototype._getEllipseCropGridList=function(){if(!this._oGridListEllipseCrop){this._oGridListEllipseCrop=this._createGridList("/crop/ratiosCircle",this._gridCircleShapeItemFactory,this._onEllipseCropGridListSelectionChange);}return this._oGridListEllipseCrop;};
g1.prototype._onEllipseCropGridListSelectionChange=function(i){var i1=i.getParameter("listItem");this._onGridListSelectionChange(i1,P.CropEllipse);};
g1.prototype._getCustomShapeCropGridList=function(){if(!this._oGridListCustomShapeCrop){this._oGridListCustomShapeCrop=this._createGridList("/crop/ratiosCustomShape",this._gridRectShapeItemFactory,this._onCustomShapeCropGridListSelectionChange);this._oGridListCustomShapeCrop.setModel(this._oModel);}return this._oGridListCustomShapeCrop;};
g1.prototype._onCustomShapeCropGridListSelectionChange=function(i){var i1=i.getParameter("listItem");this._onGridListSelectionChange(i1,P.CropCustomShape);};
g1.prototype._onGridListSelectionChange=function(i,i1){var j1=i.getBindingContext(),k1=this.getImageEditor();k1.setMode(i1);if(j1.getProperty("callback")){this[j1.getProperty("callback")]();}if(j1.getProperty("width")&&j1.getProperty("relative")){this._setRatio(j1.getProperty("width"),j1.getProperty("height"));}else if(j1.getProperty("width")&&!j1.getProperty("relative")){this._setCropAreaBySize(j1.getProperty("width"),j1.getProperty("height"));}this._enableCrop();this._setKeepCropAspectRatio(!j1.getProperty("unlockRatio"));};
g1.prototype._getFilterGridList=function(){if(!this._oGridListFilter){this._oGridListFilter=this._createGridList("/filter/filters",this._gridFilterItemFactory,this._onFilterGridListSelectionChange);}return this._oGridListFilter;};
g1.prototype._onFilterGridListSelectionChange=function(i){var i1=i.getParameter("listItem"),j1=i1.getBindingContext();this._resetFilterValues();this._oModel.setProperty("/filter/selectedFilter",j1.getProperty());this.getImageEditor().cancelPreview();this.getImageEditor()[j1.getProperty("type")](j1.getProperty("value"),true);};
g1.prototype._gridRectShapeItemFactory=function(i,i1){var j1;if(i1.getProperty("icon")){j1=new F({renderType:Z.Bare,alignItems:_.Center,justifyContent:$.Center,items:[new w({src:"{icon}"})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItemIcon");}else{j1=this._createGridItemRectShape(i1.getProperty("width"),i1.getProperty("height"));}return this._createGridListItem(j1);};
g1.prototype._gridCircleShapeItemFactory=function(i,i1){var j1;if(i1.getProperty("icon")){j1=new F({renderType:Z.Bare,alignItems:_.Center,justifyContent:$.Center,items:[new w({src:"{icon}"})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItemIcon");}else{j1=this._createGridItemCircleShape(i1.getProperty("width"),i1.getProperty("height"));}return this._createGridListItem(j1);};
g1.prototype._refreshGridListsItems=function(){var i=this,i1=[{path:"/transform/resizes",fnGetItems:this.getCustomResizeItems.bind(this)},{path:"/crop/ratiosRectangle",fnGetItems:this.getCustomRectangleCropItems.bind(this)},{path:"/crop/ratiosCircle",fnGetItems:this.getCustomEllipseCropItems.bind(this)}];this.getCustomResizeItems().forEach(function(j1){if(j1.getRelative()&&!j1.getIcon()){j1.setIcon(f1.RELATIVE);}});i1.forEach(function(j1){var k1=i._oModel.getProperty(j1.path),l1=k1.slice(0,h1.NUM_KEPT_ITEMS);j1.fnGetItems().forEach(function(m1){if(m1.getWidth()>0&&m1.getHeight()>0){l1.push({width:m1.getWidth(),height:m1.getHeight(),text:m1.getLabel(),icon:m1.getIcon(),relative:m1.getRelative()});}});i._oModel.setProperty(j1.path,l1);});};
g1.prototype._createGridListItem=function(i){return new s({type:N.Active,content:[i,new L({text:"{text}",wrapping:false,textAlign:d1.Center,layoutData:[new t({growFactor:0,shrinkFactor:0,baseSize:"auto"})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItemLabel")]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerGridItem");};
g1.prototype._createGridItemRectShape=function(i,i1){var j1,k1;if(i<100){i*=10;i1*=10;}else if(i>100){i/=10;i1/=10;}j1=document.createElementNS("http://www.w3.org/2000/svg","svg");j1.setAttribute("class","sapSuiteUiCommonsImageEditorContainerGridItemHeaderContent");j1.setAttribute("viewBox","-1 -1 "+(i+2)+" "+(i1+2));k1=document.createElement("rect");k1.setAttribute("x","0");k1.setAttribute("y","0");k1.setAttribute("width",i);k1.setAttribute("height",i1);j1.appendChild(k1);return new H({content:new XMLSerializer().serializeToString(j1)});};
g1.prototype._createGridItemCircleShape=function(i,i1){var j1,k1;i*=100;i1*=100;j1=document.createElementNS("http://www.w3.org/2000/svg","svg");j1.setAttribute("class","sapSuiteUiCommonsImageEditorContainerGridItemHeaderContent");j1.setAttribute("viewBox","-"+(i+2)+" -"+(i1+2)+" "+(i*2+4)+" "+(i1*2+4));k1=document.createElement("ellipse");k1.setAttribute("cx","0");k1.setAttribute("cy","0");k1.setAttribute("rx",i);k1.setAttribute("ry",i1);j1.appendChild(k1);return new H({content:new XMLSerializer().serializeToString(j1)});};
g1.prototype._gridFilterItemFactory=function(i,i1){var j1,k1,l1;k1=document.createElementNS("http://www.w3.org/2000/svg","svg");k1.setAttribute("class","sapSuiteUiCommonsImageEditorContainerGridItemHeaderContent sapSuiteUiCommonsImageEditorContainerGridItemHeaderFilterContent");l1=document.createElementNS("http://www.w3.org/2000/svg","use");l1.setAttribute("href","#"+this.getId()+"-origThumbnail");l1.setAttribute("filter","url(#"+this.getId()+"-"+i1.getProperty("type")+")");k1.appendChild(l1);j1=new H({content:new XMLSerializer().serializeToString(k1)});return this._createGridListItem(j1);};
g1.prototype._getTransformPanelContent=function(){var i=this;if(!this._oTransformToolbarContent){this._oTransformToolbarContent=[new S({min:I.LIMITS.ROTATION_MIN,max:I.LIMITS.ROTATION_MAX,showAdvancedTooltip:true,visible:{path:"/transform/selectedTypeKey",formatter:function(i1){return i1==="Rotate";}},value:{path:"/transform/rotate",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,e1.ROTATION),progress:true,ariaLabelledBy:[this.getId()+"-transformAngle"]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileSlider"),new u({tabDensityMode:a1.Compact,backgroundDesign:b1.Transparent,headerBackgroundDesign:b1.Transparent,expandable:false,select:function(i1){var j1=i1.getParameter("key");i._setTransformTypeByKey(j1);},selectedKey:"{/transform/selectedTypeKey}",items:[new v({key:"Resize",text:G.getText("IMGEDITOR_RESIZE"),content:[this._getResizeGridList(),new F({renderType:Z.Bare,direction:Y.Column,items:[new F({renderType:Z.Bare,justifyContent:$.SpaceBetween,items:[new F({renderType:Z.Bare,direction:Y.Column,items:[new L({text:G.getText("IMGEDITOR_WIDTH"),labelFor:this.getId()+"-transformWidth"}),new g({id:this.getId()+"-transformWidth",type:K.Number,textAlign:d1.Right,change:this._onNumberInputChange.bind(this,e1.WIDTH),value:{path:"/transform/width",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/transform/widthValueState}",valueStateText:"{/transform/widthValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:G.getText("IMGEDITOR_PX")})]}),new F({renderType:Z.Bare,direction:Y.Column,justifyContent:$.End,items:[new T({tooltip:G.getText("IMGEDITOR_LOCK_RATIO"),icon:f1.LOCK,type:X.Transparent,pressed:{path:"/transform/keepAspectRatio"},press:function(i1){i._resetValueStates();i.getImageEditor().setKeepResizeAspectRatio(i1.getParameter("pressed"));i._selectResizeCustomSizeItem(i1.getParameter("pressed"));}})]}),new F({renderType:Z.Bare,direction:Y.Column,items:[new L({text:G.getText("IMGEDITOR_HEIGHT"),labelFor:this.getId()+"-transformHeight"}),new g({id:this.getId()+"-transformHeight",type:K.Number,textAlign:d1.Right,change:this._onNumberInputChange.bind(this,e1.HEIGHT),value:{path:"/transform/height",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/transform/heightValueState}",valueStateText:"{/transform/heightValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:G.getText("IMGEDITOR_PX")})]})]}),new B({width:"50%",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")]}),new v({key:"Rotate",text:G.getText("IMGEDITOR_ROTATE"),content:[this._getRotateGridList(),new F({renderType:Z.Bare,direction:Y.Column,items:[new L({id:this.getId()+"-transformAngle",text:G.getText("IMGEDITOR_TRANSFORM_ANGLE")}),new S({min:I.LIMITS.ROTATION_MIN,max:I.LIMITS.ROTATION_MAX,value:{path:"/transform/rotate",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,e1.ROTATION),progress:true,ariaLabelledBy:[this.getId()+"-transformAngle"]}),new g({type:K.Number,textAlign:d1.Right,width:"50%",fieldWidth:"50%",description:G.getText("IMGEDITOR_TRANSFORM_DEG"),change:this._onNumberInputChange.bind(this,e1.ROTATION),value:{path:"/transform/rotate",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/transform/rotateValueState}",valueStateText:"{/transform/rotateValueStateText}",ariaLabelledBy:[this.getId()+"-transformAngle"]}),new B({width:"50%",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")]}),new v({key:"Flip",text:G.getText("IMGEDITOR_FLIP"),content:[this._getFlipGridList(),new F({renderType:Z.Bare,direction:Y.Column,items:[new B({width:"50%",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")]})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerTabBar")];this._oTransformToolbarContent.forEach(function(i1){this.addDependent(i1);},this);}return this._oTransformToolbarContent;};
g1.prototype._onCropSizeInputChange=function(i,i1){var j1=this._oModel.getProperty("/crop/width"),k1=this._oModel.getProperty("/crop/height"),l1=this._getKeepCropAspectRatio(),m1,n1,o1,p1,q1,r1=parseInt(i1.getParameter("value"),10);r1=isNaN(r1)?0:r1;if(i==="width"){o1=j1;m1=r1;n1=l1?m1*k1/j1:k1;q1=this.getImageEditor()._getMaxCropAreaWidth(true);p1=this.getImageEditor()._getMinCropAreaWidth(true);}else{o1=k1;n1=r1;m1=l1?n1*j1/k1:j1;q1=this.getImageEditor()._getMaxCropAreaHeight(true);p1=this.getImageEditor()._getMinCropAreaHeight(true);}this._resetValueStates();if(r1>q1||r1<p1){i1.getSource().setValue(o1);this._oModel.setProperty("/crop/"+i+"ValueState",V.Warning);this._oModel.setProperty("/crop/"+i+"ValueStateText",G.getText("IMGEDITOR_BAD_NUMBER",[p1,q1]));}else{this._setCropAreaBySize(m1,n1);}};
g1.prototype._getCropPanelContent=function(){var i=this;if(!this._oCropToolbarContent){this._oCropToolbarContent=[new u({tabDensityMode:a1.Compact,backgroundDesign:b1.Transparent,headerBackgroundDesign:b1.Transparent,expandable:false,select:function(i1){var j1=i1.getParameter("key");i._setCropTypeByKey(j1);},selectedKey:"{/crop/selectedTypeKey}",items:[new v({tooltip:G.getText("IMGEDITOR_CROP_RECTANGLE"),key:"Rectangle",text:"\ue17b",content:[this._getRectangleCropGridList()]}),new v({tooltip:G.getText("IMGEDITOR_CROP_ELLIPSE"),key:"Ellipse",text:"\ue255",content:[this._getEllipseCropGridList()]}),new v({tooltip:G.getText("IMGEDITOR_CROP_CUSTOM"),key:"CustomShape",text:"\ue057",content:[this._getCustomShapeCropGridList(),this._getCustomShapeCropContent()]})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerTabBar").addStyleClass("sapSuiteUiCommonsImageEditorContainerFilterIcons"),new F({renderType:Z.Bare,direction:Y.Column,items:[new F({renderType:Z.Bare,justifyContent:$.SpaceBetween,items:[new F({renderType:Z.Bare,direction:Y.Column,items:[new L({text:G.getText("IMGEDITOR_WIDTH"),labelFor:this.getId()+"-cropWidth"}),new g({id:this.getId()+"-cropWidth",type:K.Number,textAlign:d1.Right,value:{path:"/crop/width",mode:"OneWay",type:"sap.ui.model.type.Integer"},valueState:"{/crop/widthValueState}",valueStateText:"{/crop/widthValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:G.getText("IMGEDITOR_PX"),change:this._onCropSizeInputChange.bind(this,"width"),enabled:{parts:["/crop/selectedTypeKey","/crop/customShapeLoaded","/crop/enabled"],formatter:function(i1,j1,k1){return!(i1==="CustomShape"&&!j1)&&k1;}}})]}),new F({renderType:Z.Bare,direction:Y.Column,justifyContent:$.End,items:[new T({tooltip:G.getText("IMGEDITOR_LOCK_RATIO"),icon:f1.LOCK,type:X.Transparent,pressed:{path:"/crop/keepAspectRatio"},press:function(i1){var j1=i.getImageEditor().getMode(),k1,l1;i._resetValueStates();if(i._oModel.getProperty("/crop/selectedTypeKey")==="Rectangle"){k1=P.CropRectangle;l1=i._selectRectangleCropCustomSizeItem.bind(i);}else if(i._oModel.getProperty("/crop/selectedTypeKey")==="Ellipse"){k1=P.CropEllipse;l1=i._selectEllipseCropCustomSizeItem.bind(i);}else{k1=P.CropCustomShape;l1=i._selectCustomShapeCropCustomSizeItem.bind(i);}if(j1!==k1){i.getImageEditor().setMode(k1);}if(l1){l1(i1.getParameter("pressed"));}}})]}),new F({renderType:Z.Bare,direction:Y.Column,items:[new L({text:G.getText("IMGEDITOR_HEIGHT"),labelFor:this.getId()+"-cropHeight"}),new g({id:this.getId()+"-cropHeight",type:K.Number,textAlign:d1.Right,value:{path:"/crop/height",mode:"OneWay",type:"sap.ui.model.type.Integer"},valueState:"{/crop/heightValueState}",valueStateText:"{/crop/heightValueStateText}",width:"5.9375rem",fieldWidth:"4.375rem",description:G.getText("IMGEDITOR_PX"),change:this._onCropSizeInputChange.bind(this,"height"),enabled:{parts:["/crop/selectedTypeKey","/crop/customShapeLoaded","/crop/enabled"],formatter:function(i1,j1,k1){return!(i1==="CustomShape"&&!j1)&&k1;}}})]})]}),new F({renderType:Z.Bare,alignItems:_.Center,items:[this._getScaleSwitch(),this._getScaleLabel()]}).addStyleClass("sapUiSmallMarginTopBottom"),new B({width:"50%",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this),enabled:{parts:["/crop/selectedTypeKey","/crop/customShapeLoaded","/crop/enabled"],formatter:function(i1,j1,k1){return!(i1==="CustomShape"&&!j1)&&k1;}}})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")];this._oCropToolbarContent.forEach(function(i1){this.addDependent(i1);},this);}return this._oCropToolbarContent;};
g1.prototype._getCustomShapeCropContent=function(){var i=this;if(!this.oCustomShapeContent){this.oCustomShapeContent=new F({renderType:Z.Bare,direction:Y.Column,items:[new L({text:G.getText("IMGEDITOR_CROP_CUSTOM_FILE"),labelFor:this.getId()+"-customFile"}),new A({id:this.getId()+"-customFile",mimeType:"image/*",change:function(i1){var j1=i1.getParameter("files")[0];if(!j1){return;}i._resetValueStates();i._enableCrop();i.getImageEditor().setMode(P.CropCustomShape);i.getImageEditor().setCustomShapeSrc(j1);}})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea").addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelAreaMobile");this.addDependent(this.oCustomShapeContent);}return this.oCustomShapeContent;};
g1.prototype._getFilterPanelContent=function(){var i=this;if(!this._oFilterToolbarContent){this._oFilterToolbarContent=[new S({min:"{/filter/selectedFilter/min}",max:"{/filter/selectedFilter/max}",showAdvancedTooltip:true,value:{path:"/filter/selectedFilter/value",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,e1.FILTER),progress:true,ariaLabelledBy:[this.getId()+"-filterValue"]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerMobileSlider"),this._getFilterGridList(),new F({renderType:Z.Bare,direction:Y.Column,items:[new S({min:"{/filter/selectedFilter/min}",max:"{/filter/selectedFilter/max}",value:{path:"/filter/selectedFilter/value",mode:"OneWay"},liveChange:this._onNumberInputChange.bind(this,e1.FILTER),progress:true,ariaLabelledBy:[this.getId()+"-filterValue"]}),new L({id:this.getId()+"-filterValue",text:G.getText("IMGEDITOR_FILTER_VALUE")}),new g({type:K.Number,textAlign:d1.Right,width:"5.9375rem",fieldWidth:"4.375rem",description:"{/filter/selectedFilter/unit}",change:function(i1){i._onNumberInputChange(q.extend(e1.FILTER,i._oModel.getProperty("/filter/selectedFilter")),i1);},value:{path:"/filter/selectedFilter/value",type:"sap.ui.model.type.Integer",mode:"OneWay"},valueState:"{/filter/filterValueState}",valueStateText:"{/filter/filterValueStateText}",ariaLabelledBy:[this.getId()+"-filterValue"]}),new B({width:"50%",text:G.getText("IMGEDITOR_APPLY"),type:X.Emphasized,press:this._applyPreview.bind(this)})]}).addStyleClass("sapSuiteUiCommonsImageEditorContainerPanelArea")];this._oFilterToolbarContent.forEach(function(i1){this.addDependent(i1);},this);}return this._oFilterToolbarContent;};
g1.prototype._getOptionsPanel=function(){if(!this._oOptionsPanel){this._oOptionsPanel=new F({renderType:Z.Bare,direction:Y.Column});this._oOptionsPanel.addStyleClass("sapSuiteUiCommonsImageEditorContainerPanel");this._oOptionsPanel.setModel(this._oModel);this.addDependent(this._oOptionsPanel);}return this._oOptionsPanel;};
g1.prototype.onkeydown=function(i){var i1=this;function j1(){return i1._oModel.getProperty("/historyIndex")<i1._oModel.getProperty("/history").length-1;}if(i.ctrlKey&&i.key!=="Control"&&i.shiftKey&&i.key!=="Shift"){switch(i.key){case"z":case"Z":if(j1()){this.getImageEditor().undo();if(j1()){this._getUndoButton().focus();}else{this._getHistoryArrowButton().focus();}}i.preventDefault();break;case"y":case"Y":if(this._oModel.getProperty("/historyIndex")>0){this.getImageEditor().redo();this._getUndoButton().focus();}i.preventDefault();break;case"h":case"H":if(this._oModel.getProperty("/history").length>1){this._getHistoryArrowButton().focus();this._getHistoryPopover().openBy(this._oHistoryArrowButton);}i.preventDefault();break;default:break;}}else if(i.ctrlKey&&i.key!=="Control"&&!i.shiftKey){switch(i.key){case"u":case"U":this._focusOnToolbar();i.preventDefault();break;case"g":case"G":this._focusOnPanel();i.preventDefault();break;case"i":case"I":this._focusOnImageEditor();i.preventDefault();break;case"e":case"E":this._setModeTransform("Resize");this._focusOnItem(this._getResizeGridList().getItems()[0]);i.preventDefault();break;case"r":case"R":this._setModeTransform("Rotate");this._focusOnItem(this._getRotateGridList().getItems()[0]);i.preventDefault();break;case"f":case"F":this._setModeTransform("Flip");this._focusOnItem(this._getFlipGridList().getItems()[0]);i.preventDefault();break;case"j":case"J":this._setModeCrop("Rectangle");this._focusOnItem(this._getRectangleCropGridList().getItems()[0]);i.preventDefault();break;case"s":case"S":this._setModeFilter();this._focusOnItem(this._getFilterGridList().getItems()[0]);i.preventDefault();break;case"Enter":this._applyPreview();break;default:break;}}else if(i.altKey&&i.key!=="Alt"){switch(i.key){case"Enter":this._switchFocusPanelImage();i.preventDefault();break;default:break;}}};
g1.prototype._focusFirstTabbable=function(i){var i1=i.find(":tabbable").get(0);if(i1){i1.focus();}};
g1.prototype._focusOnToolbar=function(){this._focusFirstTabbable(this._getHeaderToolbar().$());};
g1.prototype._focusOnPanel=function(){this._focusFirstTabbable(this._getOptionsPanel().$());};
g1.prototype._focusOnImageEditor=function(){this._focusFirstTabbable(this.getImageEditor().$());};
g1.prototype._focusOnItem=function(i){if(i.getDomRef()){if(!this._getHistoryPopover().isOpen()){i.focus();}}else{var i1={onAfterRendering:function(){i.removeEventDelegate(i1);i.focus();if(i.getParent()&&i.getParent().isA("sap.m.List")){i.getParent()._startItemNavigation();}}};i.addEventDelegate(i1);}};
g1.prototype._switchFocusPanelImage=function(){var i=document.activeElement;if(this._getOptionsPanel().getDomRef().contains(i)){this._focusOnImageEditor();}else{this._focusOnPanel();}};
return g1;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ImageEditorContainerRenderer',["sap/ui/Device"],function(D){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var I={};
I.render=function(R,c){R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorContainer");R.writeControlData(c);R.writeAttribute("tabindex","0");R.writeAttribute("aria-label",r.getText("IMGEDITOR_ACCESSIBILITY_LABEL"));R.writeClasses();R.write(">");this.renderSvgFilters(R,c);this.renderHeaderToolbar(R,c);this.renderMobileHeaderToolbar(R,c);R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorContainerContent");R.writeClasses();R.write(">");this.renderOptionsPanel(R,c);this.renderImageEditor(R,c);R.write("</div>");this.renderMobileZoomToolbar(R,c);this.renderMobileFooterToolbar(R,c);R.write("</div>");};
I.renderSvgFilters=function(R,c){R.write("<svg width='0' height='0' style='position: absolute;'>");R.write("<defs>");this.renderOriginalThumbnail(R,c);this.renderSepiaFilter(R,c);this.renderGrayscaleFilter(R,c);this.renderSaturateFilter(R,c);this.renderInvertFilter(R,c);this.renderBrightnessFilter(R,c);this.renderContrastFilter(R,c);this.renderHueRotateFilter(R,c);R.write("</defs>");R.write("</svg>");};
I.renderOriginalThumbnail=function(R,c){var i=c.getImageEditor();if(!i||!i._oCanvas){return;}R.write("<image xmlns:xlink='http://www.w3.org/1999/xlink'");R.writeAttribute("id",c.getId()+"-origThumbnail");R.writeAttribute("preserveAspectRatio","xMidYMid slice");R.writeAttribute("viewBox","0 0 "+c._oThumbnailCanvas.width+" "+c._oThumbnailCanvas.height);R.writeAttribute("href",i._oCanvas.toDataURL());R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.write("/>");};
I.renderSepiaFilter=function(R,c){R.write("<filter id='"+c.getId()+"-sepia'>");R.write("<feColorMatrix type='matrix' values='0.393 0.769 0.189 0 0  0.349 0.686 0.168 0 0  0.272 0.534 0.131 0 0  0 0 0 1 0'/>");R.write("</filter>");};
I.renderGrayscaleFilter=function(R,c){R.write("<filter id='"+c.getId()+"-grayscale'>");R.write("<feColorMatrix type='matrix' values='0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0  0.2126 0.7152 0.0722 0 0 0 0 0 1 0'/>");R.write("</filter>");};
I.renderSaturateFilter=function(R,c){R.write(" <filter id='"+c.getId()+"-saturate'>");R.write("<feColorMatrix type='saturate' values='3'/>");R.write("</filter>");};
I.renderInvertFilter=function(R,c){R.write("<filter id='"+c.getId()+"-invert'>");R.write("<feComponentTransfer><feFuncR type='table' tableValues='1 0'/><feFuncG type='table' tableValues='1 0'/><feFuncB type='table' tableValues='1 0'/></feComponentTransfer>");R.write("</filter>");};
I.renderBrightnessFilter=function(R,c){R.write("<filter id='"+c.getId()+"-brightness'>");R.write("<feComponentTransfer><feFuncR type='linear' slope='3'/><feFuncG type='linear' slope='3'/><feFuncB type='linear' slope='3'/></feComponentTransfer>");R.write("</filter>");};
I.renderContrastFilter=function(R,c){R.write("<filter id='"+c.getId()+"-contrast'>");R.write("<feComponentTransfer>");R.write("<feFuncR type='linear' slope='3' intercept='-0.3'/>");R.write("<feFuncG type='linear' slope='3' intercept='-0.3'/>");R.write("<feFuncB type='linear' slope='3' intercept='-0.3'/>");R.write("</feComponentTransfer>");R.write("</filter>");};
I.renderHueRotateFilter=function(R,c){R.write("<filter id='"+c.getId()+"-hueRotate'>");R.write("<feColorMatrix type='hueRotate' values='90' />");R.write("</filter>");};
I.renderHeaderToolbar=function(R,c){if(!D.system.phone&&!c._isSmallSize()){var h=c._getHeaderToolbar();R.renderControl(h);}};
I.renderMobileHeaderToolbar=function(R,c){if(D.system.phone||c._isSmallSize()){var h=c._getMobileHeaderToolbar();R.renderControl(h);}};
I.renderMobileZoomToolbar=function(R,c){var h=c._getMobileZoomToolbar();R.renderControl(h);};
I.renderMobileFooterToolbar=function(R,c){var h=c._getMobileFooterToolbar();R.renderControl(h);};
I.renderOptionsPanel=function(R,c){var o=c._getOptionsPanel();R.renderControl(o);c._refreshGridListsItems();};
I.renderImageEditor=function(R,c){var i=c.getImageEditor();R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorContainerWrapper");R.writeClasses();R.write(">");if(i){R.renderControl(i);}R.write("</div>");};
return I;},true);
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ImageEditorRenderer',["sap/ui/Device"],function(D){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var I={};var H={nw:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},ne:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},sw:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},se:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Horizontal","Vertical"],types:["Rectangle","CustomShape"]},n:{vertical:"sapSuiteUiCommonsImageEditorTop",horizontal:"sapSuiteUiCommonsImageEditorCenter",handlers:["Horizontal"],types:["Rectangle","CustomShape","Ellipse"]},s:{vertical:"sapSuiteUiCommonsImageEditorBottom",horizontal:"sapSuiteUiCommonsImageEditorCenter",handlers:["Horizontal"],types:["Rectangle","CustomShape","Ellipse"]},w:{vertical:"sapSuiteUiCommonsImageEditorMiddle",horizontal:"sapSuiteUiCommonsImageEditorLeft",handlers:["Vertical"],types:["Rectangle","CustomShape","Ellipse"]},e:{vertical:"sapSuiteUiCommonsImageEditorMiddle",horizontal:"sapSuiteUiCommonsImageEditorRight",handlers:["Vertical"],types:["Rectangle","CustomShape","Ellipse"]}};
I.render=function(R,c){R.write("<div");R.addClass("sapSuiteUiCommonsImageEditor");R.addClass("sapSuiteUiCommonsImageEditorEmpty");R.addClass("sapSuiteUiCommonsImageEditorMode"+c.getMode());if(c.getCustomShapeLoaded()){R.addClass("sapSuiteUiCommonsImageEditorModeCropCustomShapeLoaded");}R.writeClasses();R.writeControlData(c);R.write(">");this.renderNoData(R,c);R.write("<div");R.writeAttribute("id",c.getId()+"-canvasInnerContainer");R.writeAttribute("tabindex","0");R.writeAttribute("role","img");R.addClass("sapSuiteUiCommonsImageEditorCanvasInnerContainer");R.writeClasses();R.write(">");this.renderTransformHandlers(R);this.renderSvgOverlay(R,c);this.renderCropArea(R,c);R.write("</div>");R.write("</div>");};
I.renderNoData=function(R,c){R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorNoData");R.writeClasses();R.writeAttribute("tabindex","0");R.writeAttribute("aria-label",r.getText("IMGEDITOR_NO_IMAGE"));R.write(">");R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorNoDataText");R.writeClasses();R.write(">");R.write(r.getText("IMGEDITOR_NO_IMAGE"));R.write("</div>");R.write("</div>");};
I.renderSvgOverlay=function(R,c){R.write("<svg class='sapSuiteUiCommonsImageEditorCropOverlayContainer'>");R.write("<defs>");R.write("<rect id='"+c.getId()+"-overlayMaskRect'/>");R.write("<ellipse id='"+c.getId()+"-overlayMaskEllipse'/>");R.write("<image xmlns:xlink='http://www.w3.org/1999/xlink' id='"+c.getId()+"-overlayMaskCustomBlack' preserveAspectRatio='none' x='0' y='0' width='100%' height='100%'");if(c._sBlackCustomShapeUrl){R.writeAttribute("xlink:href",c._sBlackCustomShapeUrl);}R.write("/>");R.write("<image xmlns:xlink='http://www.w3.org/1999/xlink' id='"+c.getId()+"-overlayMaskCustomWhite' preserveAspectRatio='none' x='0' y='0' width='100%' height='100%'");if(c._sWhiteCustomShapeUrl){R.writeAttribute("xlink:href",c._sWhiteCustomShapeUrl);}R.write("/>");R.write("<mask");R.writeAttribute("id",c.getId()+"-darkOverlayMask");R.write(">");R.write("<rect");R.writeAttribute("fill","white");R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.write("/>");R.write("<use fill='black' href='#"+c.getId()+"-overlayMaskRect"+"' class='sapSuiteUiCommonsImageEditorCropItemRectangle'/>");R.write("<use fill='black' href='#"+c.getId()+"-overlayMaskEllipse"+"' class='sapSuiteUiCommonsImageEditorCropItemEllipse'/>");R.write("<use href='#"+c.getId()+"-overlayMaskCustomBlack"+"' class='sapSuiteUiCommonsImageEditorCropItemCustomShape'/>");R.write("</mask>");R.write("<mask");R.writeAttribute("id",c.getId()+"-lightOverlayClip");R.write(">");R.write("<use fill='white' href='#"+c.getId()+"-overlayMaskRect"+"' class='sapSuiteUiCommonsImageEditorCropItemRectangle'/>");R.write("<use fill='white' href='#"+c.getId()+"-overlayMaskEllipse"+"' class='sapSuiteUiCommonsImageEditorCropItemEllipse'/>");R.write("<use href='#"+c.getId()+"-overlayMaskCustomWhite"+"' class='sapSuiteUiCommonsImageEditorCropItemCustomShape'/>");R.write("</mask>");R.write("</defs>");R.write("<rect");R.writeAttribute("mask","url(#"+c.getId()+"-darkOverlayMask)");R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.addClass("sapSuiteUiCommonsImageEditorCropOverlayBlack");R.writeClasses();R.write("/>");R.write("<rect");R.writeAttribute("mask","url(#"+c.getId()+"-lightOverlayClip)");R.writeAttribute("fill","white");R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.addClass("sapSuiteUiCommonsImageEditorCropOverlayWhite");R.writeClasses();R.write("/>");R.write("</svg>");};
I.renderCropArea=function(R,c){R.write("<div class='sapSuiteUiCommonsImageEditorCropInnerRectangle'>");R.write("<svg class='sapSuiteUiCommonsImageEditorCropSvg'>");R.write("<defs>");R.write("<mask id='"+c.getId()+"-thirdsMask"+"' maskContentUnits='objectBoundingBox'>");R.write("<rect class='sapSuiteUiCommonsImageEditorCropItemRectangle' fill='white' width='1' height='1' />");R.write("<ellipse class='sapSuiteUiCommonsImageEditorCropItemEllipse' fill='white' cx='0.5' cy='0.5' rx='0.5' ry='0.5' />");R.write("</mask>");this.renderShadowFilter(R,c.getId()+"-bottomShadow",0,2);this.renderShadowFilter(R,c.getId()+"-topShadow",0,-2);this.renderShadowFilter(R,c.getId()+"-rightShadow",2,0);this.renderShadowFilter(R,c.getId()+"-leftShadow",-2,0);R.write("</defs>");R.write("<ellipse class='sapSuiteUiCommonsImageEditorCropItemEllipse' fill='transparent' stroke-width='1' stroke='white' cx='50%' cy='50%' rx='50%' ry='50%' />");this.renderRectBorders(R,c);this.renderThirdLines(R,c);R.write("</svg>");this.renderCropAreaDragHandler(R,c);this.renderCropAreaResizeHandlers(R);R.write("</div>");};
I.renderZones=function(R,c){R.write("<div class='sapSuiteUiCommonsImageEditorZones'>");c.getZones().forEach(function(z){this.renderZone(R,c,z);},this);R.write("</div>");};
I.renderZone=function(R,c,z){R.write("<div");R.writeElementData(z);R.addClass("sapSuiteUiCommonsImageEditorZone");if(z.getEditable()){R.addClass("sapSuiteUiCommonsImageEditorZoneEditable");}if(z.getHighlighted()){R.addClass("sapSuiteUiCommonsImageEditorZoneHighlighted");}R.writeStyles();R.writeClasses();R.write(">");R.write("<div class='sapSuiteUiCommonsImageEditorZoneInner'>");if(!z.getEditable()&&!z.getHighlighted()){R.write("<div class='sapSuiteUiCommonsImageEditorZoneInnerColoring'></div>");}if(z.getHighlighted()){R.write("<div class='sapSuiteUiCommonsImageEditorZoneLabel'>");R.write("<span>");R.writeEscaped(z.getLabel());R.write("</span>");R.write("</div>");}if(z.getEditable()){this.renderBWBorder(R);}R.write("</div>");if(z.getEditable()){this.renderZoneResizeHandlers(R);}R.write("</div>");};
I.renderBWBorder=function(R){R.write("<svg class='sapSuiteUiCommonsImageEditorZoneEditBorder' x='0' y='0' width='100%' height='100%'>");this.renderStrokeRect(R,"black",5,5,5,0.5);this.renderStrokeRect(R,"white",5,5,0,0.5);R.write("</svg>");};
I.renderStrokeRect=function(R,c,d,i,o,f){R.write("<rect x='0' y='0' width='100%' height='100%' fill='none'");R.writeAttribute("stroke",c);R.writeAttribute("stroke-dasharray",d+","+i);R.write(">");R.write("<animate attributeName='stroke-dashoffset' repeatCount='indefinite'");R.writeAttribute("from",o);R.writeAttribute("to",o+d+i);R.writeAttribute("dur",f);R.write("></animate>");R.write("</rect>");};
I.renderShadowFilter=function(R,i,d,a){R.write("<filter");R.writeAttribute("id",i);R.writeAttribute("x","0");R.writeAttribute("y","0");R.writeAttribute("width","100%");R.writeAttribute("height","100%");R.writeAttribute("filterUnits","userSpaceOnUse");R.write(">");R.write("<feGaussianBlur");R.writeAttribute("in","SourceAlpha");R.writeAttribute("stdDeviation","2");R.writeAttribute("result","blur");R.write("/>");R.write("<feOffset");R.writeAttribute("in","blur");R.writeAttribute("result","offOut");R.writeAttribute("x",d);R.writeAttribute("y",a);R.write("/>");R.write("<feBlend");R.writeAttribute("in","SourceGraphic");R.writeAttribute("in2","offOut");R.writeAttribute("mode","normal");R.write("/>");R.write("</filter>");};
I.renderRectBorders=function(R,c){R.write("<g class='sapSuiteUiCommonsImageEditorCropItemRectangle sapSuiteUiCommonsImageEditorCropItemCustomShape'>");this.renderCropLine(R,c,"bottomShadow",0,0,100,0);this.renderCropLine(R,c,"leftShadow",100,0,100,100);this.renderCropLine(R,c,"topShadow",100,100,0,100);this.renderCropLine(R,c,"rightShadow",0,100,0,0);R.write("</g>");};
I.renderThirdLines=function(R,c){R.write("<g mask='url(#"+c.getId()+"-thirdsMask)' class='sapSuiteUiCommonsImageEditorCropThirds'>");this.renderCropLine(R,c,"rightShadow",100/3,0,100/3,100);this.renderCropLine(R,c,"rightShadow",100*2/3,0,100*2/3,100);this.renderCropLine(R,c,"bottomShadow",0,100/3,100,100/3);this.renderCropLine(R,c,"bottomShadow",0,100*2/3,100,100*2/3);R.write("</g>");};
I.renderCropLine=function(R,c,f,x,y,X,Y){R.write("<line class='sapSuiteUiCommonsImageEditorCropLine'");if(!D.browser.msie&&!D.browser.edge){R.writeAttribute("filter","url(#"+c.getId()+"-"+f+")");}R.writeAttribute("x1",x+"%");R.writeAttribute("y1",y+"%");R.writeAttribute("x2",X+"%");R.writeAttribute("y2",Y+"%");R.write("/>");};
I.renderTransformHandlers=function(R){R.write("<div class='sapSuiteUiCommonsImageEditorTransformHandlers'>");Object.keys(H).forEach(function(k){this.renderTransformHandler(R,k);},this);R.write("</div>");};
I.renderTransformHandler=function(R,d){var h=H[d],c;R.write("<div");c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorHandlerContainer");c.forEach(function(C){R.addClass(C);});R.writeClasses();R.write(">");h.handlers.forEach(function(s){this.renderDiv(R,["sapSuiteUiCommonsImageEditorHandler","sapSuiteUiCommonsImageEditorHandler"+s]);},this);R.write("</div>");};
I.renderCropAreaDragHandler=function(R,c){var i=c._getCropAreaDragIcon();R.write("<div");R.addClass("sapSuiteUiCommonsImageEditorDragHandlerContainer");R.writeClasses();R.write(">");R.renderControl(i);R.write("</div>");};
I.renderCropAreaResizeHandlers=function(R){Object.keys(H).forEach(function(k){this.renderCropAreaResizeHandler(R,k);},this);};
I.renderCropAreaResizeHandler=function(R,d){var h=H[d],c;R.write("<div");c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorHandlerContainer");h.types.forEach(function(t){c.push("sapSuiteUiCommonsImageEditorCropItem"+t);});c.forEach(function(C){R.addClass(C);});R.writeClasses();R.write(">");h.handlers.forEach(function(s){this.renderDiv(R,["sapSuiteUiCommonsImageEditorHandler","sapSuiteUiCommonsImageEditorHandler"+s]);},this);R.write("</div>");};
I.renderDiv=function(R,c){R.write("<div");c.forEach(function(C){R.addClass(C);});R.writeClasses();R.write(">");R.write("</div>");};
I.renderZoneResizeHandlers=function(R){Object.keys(H).forEach(function(k){this.renderZoneResizeHandler(R,k);},this);};
I.renderZoneResizeHandler=function(R,d){var c=this.getCommonHandlerClasses(d);c.push("sapSuiteUiCommonsImageEditorZoneResizeHandler");this.renderDiv(R,c);};
I.getCommonHandlerClasses=function(d){var h=H[d];return["ui-resizable-handle","ui-resizable-"+d,h.vertical,h.horizontal];};
return I;},true);
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ImageEditorResponsiveContainer',["sap/suite/ui/commons/imageeditor/ImageEditorContainer","./ImageEditorContainerRenderer","sap/ui/Device","sap/m/Button","sap/m/Dialog","sap/m/Bar","sap/m/Title","sap/suite/ui/commons/ControlProxy"],function(I,a,D,B,b,c,T,C){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var d=I.extend("sap.suite.ui.commons.imageeditor.ImageEditorResponsiveContainer",{renderer:function(R,o){if(!D.system.phone||o._bInDialog){a.render.apply(this,arguments);}else{R.renderControl(o._getOpenButton());}}});
d.prototype._onImageLoaded=function(){I.prototype._onImageLoaded.apply(this,arguments);this._refreshTitle();};
d.prototype._getOpenButton=function(){var t=this;if(!this._oOpenButton){this._oOpenButton=new B({text:r.getText("IMGEDITOR_RESPONSIVE_OPEN"),press:function(){t._refreshTitle();t._getDialog().open();}});this.addDependent(this._oOpenButton);}return this._oOpenButton;};
d.prototype._getTitle=function(){if(!this._oTitle){this._oTitle=new T();this.addDependent(this._oTitle);}return this._oTitle;};
d.prototype._refreshTitle=function(){var i=this.getImageEditor(),t=r.getText("IMGEDITOR_DIALOG_TITLE");if(i&&i.getFileName()){t+=" - "+i.getFileName();}this._getTitle().setText(t);};
d.prototype._getDialog=function(){var t=this;if(!this._oDialog){var p=new C("test");p.setAssociation("control",this);this._oDialog=new b({stretch:true,verticalScrolling:false,beforeOpen:function(){t._bInDialog=true;},afterOpen:function(){t._zoomToFit();},beforeClose:function(){t._bInDialog=false;},customHeader:new c({contentMiddle:[t._getTitle()],contentRight:[new B({icon:"sap-icon://decline",press:function(){t._oDialog.close();}})]}),content:[p]});this.addDependent(this._oDialog);}return this._oDialog;};
return d;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/ResizeHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var R=H.extend("sap.suite.ui.commons.imageeditor.ResizeHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.width==="number","Width must be a number.");a(typeof p.height==="number","Height value must be a number.");a(typeof p.oldWidth==="number","Old width value must be a number.");a(typeof p.oldHeight==="number","Old height value must be a number.");this._iWidth=p.width;this._iHeight=p.height;this._iOldWidth=p.oldWidth;this._iOldHeight=p.oldHeight;}});
R.prototype.getWidth=function(){return this._iWidth;};
R.prototype.getHeight=function(){return this._iHeight;};
R.prototype.getOldWidth=function(){return this._iOldWidth;};
R.prototype.getOldHeight=function(){return this._iOldHeight;};
R.prototype.compare=function(h){var m=["getWidth","getHeight"];return this._compare(h,m);};
return R;});
sap.ui.predefine('sap/suite/ui/commons/imageeditor/RotateHistoryItem',["./HistoryItem","sap/base/assert"],function(H,a){"use strict";
var R=H.extend("sap.suite.ui.commons.imageeditor.RotateHistoryItem",{constructor:function(p){H.apply(this,arguments);p=p||{};a(typeof p.degrees==="number","Degrees must be a number.");this._iDegrees=p.degrees;}});
R.prototype.getDegrees=function(){return this._iDegrees;};
R.prototype.compare=function(){return false;};
return R;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/Rectangle',["sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/SimpleShape","sap/suite/ui/commons/statusindicator/SimpleShapeRenderer"],function(H,S,a){"use strict";
var R=S.extend("sap.suite.ui.commons.statusindicator.Rectangle",{
metadata:{properties:{x:{type:"int",defaultValue:0},y:{type:"int",defaultValue:0},rx:{type:"int",defaultValue:0},ry:{type:"int",defaultValue:0},width:{type:"int",defaultValue:0},height:{type:"int",defaultValue:0}}},
renderer:a
});
R.prototype._getSimpleShapeElement=function(r){var o=new H("rect");o.setId(this._buildIdString(r));o.setAttribute("x",this.getX());o.setAttribute("y",this.getY());o.setAttribute("width",this.getWidth());o.setAttribute("height",this.getHeight());o.setAttribute("rx",this.getRx());o.setAttribute("ry",this.getRy());o.setAttribute("stroke-width",this.getStrokeWidth());o.setAttribute("stroke",this._getCssStrokeColor());return o;};
return R;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/util/AnimationPropertiesResolver',["sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/statusindicator/ShapeGroup","sap/suite/ui/commons/statusindicator/CustomShape","sap/base/Log"],function(S,a,C,L){"use strict";var A=function(s){this._oStatusIndicator=s;this.aOnDiscreteThresholdChange=[];this.aOnPropertyThresholdChange=[];};
A.prototype.addDiscreteThresholdChange=function(c){this.aOnDiscreteThresholdChange.push(c);};
A.prototype.addPropertyThresholdChange=function(c){this.aOnPropertyThresholdChange.push(c);};
A.prototype.getValue=function(s,i){var p=s.getParent();if(!p instanceof a){L.fatal("Shape should be always direct child of ShapeGroup.");return i;}if(!this._oStatusIndicator._discreteThresholdsEnabled()){return i;}return this._getGroupValue(p,this._getCappedValue(p,i));};
A.prototype._getCappedValue=function(g,s){var n=this._getStatusIndicatorValue(g,s);var d=this._oStatusIndicator._getDiscreteThresholdForValue(n);return d?d.getValue():0;};
A.prototype.propagateValueChange=function(s,n){if(!this._oStatusIndicator._discreteThresholdsEnabled()){return;}var g=s.getParent();var o=this._getCappedValue(g,s.getDisplayedValue());var N=this._getCappedValue(g,n);if(o!==N){this.aOnDiscreteThresholdChange.forEach(function(O){O(N);});}};
A.prototype.getColor=function(s,i){var p=s.getParent();if(p instanceof C){i=p.getDisplayedValue();p=p.getParent();}var b=this._getStatusIndicatorValue(p,i);var n=s._getCssFillColor();if(this._oStatusIndicator._propertyThresholdsEnabled()){var P=this._oStatusIndicator._getPropertyThresholdForValue(b);if(P){n=P._getCssFillColor();}}return n;};
A.prototype.propagateColorChange=function(s,i){if(!this._oStatusIndicator._propertyThresholdsEnabled()){return;}var p=s.getParent();var n=this._getPropertyThreshold(p,i);var o=this._getPropertyThreshold(p,s.getDisplayedValue());if(n!==o){this.aOnPropertyThresholdChange.forEach(function(O){O(n._getCssFillColor());});}};
A.prototype._getPropertyThreshold=function(g,s){var i=this._getStatusIndicatorValue(g,s);return this._oStatusIndicator._getPropertyThresholdForValue(i);};
A.prototype._getStatusIndicatorValue=function(c,s){var t=this;var g=this._oStatusIndicator.getGroups();var i=0;g.some(function(G){var f=G.getWeight()/t._getTotalWeight();if(G!==c){var F=100*f;i+=F;return false;}var b=s*f;i+=b;return true;});return Number(i.toPrecision(3));};
A.prototype._getGroupValue=function(c,s){var g=this._oStatusIndicator.getGroups();var t=this._getTotalWeight();var r=0;g.some(function(G){var f=G.getWeight()/t;var n;if(s===0){n=0;}else if(s>=100*f){n=100;}else{n=s/f;}s-=n*f;if(c!==G){return false;}r=n;return true;});return r;};
A.prototype._getTotalWeight=function(){return this._oStatusIndicator.getGroups().reduce(function(i,g){return i+g.getWeight();},0);};
return A;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/util/ProgressHandler',[],function(){"use strict";var P=function(p){var t=this;this._fnResolveCallback=null;this._oPromise=null;this._bInProgress=false;this._fnProgress=p;this._oInnerProgressHandler={finish:function(){t.finish();},stop:function(r){t.stop(r);},isCanceled:function(){return t.isCanceled();}};};
P.prototype.start=function(){var t=this;if(this._oPromise){return this._oPromise;}this._oPromise=new Promise(function(r,a){t._fnResolveCallback=r;t._bInProgress=true;t._fnProgress(t._oInnerProgressHandler);});return this._oPromise;};
P.prototype.finish=function(){this._bInProgress=false;if(this._fnResolveCallback){this._fnResolveCallback();this._fnResolveCallback=null;}};
P.prototype.stop=function(r){this._bInProgress=false;if(this._fnResolveCallback){this._fnResolveCallback(r);this._fnResolveCallback=null;}};
P.prototype.cancel=function(){this._bCancelled=true;};
P.prototype.isCanceled=function(){return this._bCancelled;};
P.prototype.isInProgress=function(){return this._bInProgress;};
return P;},true);
sap.ui.predefine('sap/suite/ui/commons/statusindicator/util/ThemingUtil',["sap/ui/core/theming/Parameters","sap/m/ValueCSSColor","sap/ui/core/CSSColor","sap/m/ValueColor"],function(P,V,C,a){"use strict";var T=function(){throw new Error();};
T.resolveColor=function(c){if(C.isValid(c)){return c;}switch(c){case a.Good:return P.get("sapPositiveColor");case a.Error:return P.get("sapNegativeColor");case a.Critical:return P.get("sapCriticalColor");case a.Neutral:return P.get("sapNeutralColor");default:return P.get(c);}};
return T;},true);
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccount',["sap/suite/ui/commons/library","sap/ui/Device","sap/ui/core/Control","sap/ui/core/delegate/ItemNavigation","./TAccountGroup","sap/ui/core/IconPool","sap/ui/core/Icon","sap/ui/core/InvisibleText","sap/base/security/encodeXML","./TAccountUtils","sap/suite/ui/commons/Utils","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-draggable","sap/ui/thirdparty/jqueryui/jquery-ui-droppable","sap/ui/thirdparty/jqueryui/jquery-ui-selectable"],function(l,D,C,I,T,a,b,c,e,d,U){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var f=Object.freeze({UP:"UP",DOWN:"DOWN",PREVIOUS:"PREVIOUS",NEXT:"NEXT"});var s=D.os.macintosh?"metaKey":"ctrlKey";
var g=C.extend("sap.suite.ui.commons.taccount.TAccount",{
metadata:{library:"sap.suite.ui.commons",properties:{measureOfUnit:{type:"string",group:"Misc",defaultValue:""},collapsed:{type:"boolean",group:"Misc",defaultValue:false},title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},orderBy:{type:"string",group:"Misc",defaultValue:""},opening:{type:"boolean",group:"Misc",defaultValue:false},openingDebit:{type:"float",group:"Misc",defaultValue:0},openingCredit:{type:"float",group:"Misc",defaultValue:0}},aggregations:{debit:{type:"sap.suite.ui.commons.taccount.TAccountItem",multiple:true,singularName:"debit"},credit:{type:"sap.suite.ui.commons.taccount.TAccountItem",multiple:true,singularName:"credit"}}},
renderer:function(R,A){var w=function(j,k){j.forEach(function(m,i){m._bIsDebit=k;m._index=i+1;m._indexSize=j.length;R.renderControl(m);});};var W=function(j){var k=A.getOrderBy();j.forEach(function(m){var p=m.getProperties();m._sOrderBy="";for(var i=0;i<p.length;i++){if(p[i].getKey().toLowerCase()===k.toLowerCase()){m._sOrderBy=p[i].getValue();break;}}});j.sort(function(i,m){return new Date(i._sOrderBy)>=new Date(m._sOrderBy)?1:-1;});A._setItemsAttrs(j);j.forEach(function(i){R.renderControl(i.addStyleClass(i._bIsDebit?"sapSuiteUiCommonsAccountItemLeft":"sapSuiteUiCommonsAccountItemRight"));});};var h=function(i){var j=i?A.getDebit():A.getCredit(),k=i?A.getOpeningDebit():A.getOpeningCredit();j.forEach(function(m){k+=m.getValue();});return d.formatCurrency(k,A.getMeasureOfUnit());};var u=A.getMeasureOfUnit(),o=d.formatCurrency(A.getOpeningDebit(),u),O=d.formatCurrency(A.getOpeningCredit(),u),H=(A.getDebit().length>0||A.getCredit().length>0);R.write("<div");if(A.getCollapsed()){R.addClass("sapSuiteUiCommonsAccountCollapsed");}R.addClass("sapSuiteUiCommonsAccount");if(!H){R.addClass("sapSuiteUiCommonsAccountEmpty");}R.writeClasses(A);R.writeControlData(A);R.writeAttribute("role","region");R.writeAttribute("aria-labelledby",A.getId()+"-title"+" "+A.getId()+"-sum");R.writeAttribute("aria-describedby",A.getId());R.writeAttributeEscaped("aria-label",A._getAriaLabelText());R.writeAttribute("tabindex","0");R.write(">");R.write("<div class=\"sapSuiteUiCommonsTAccountDropZoneTop\"></div>");R.write("<div class=\"sapSuiteUiCommonsTAccountDropZoneBottom\"></div>");R.write("<div class=\"sapSuiteUiCommonsTAccountInfoIconWrapper sapSuiteUiCommonsTAccountBaseInfoIconWrapper\" aria-labelledby=\""+A.getId()+"-mark-text\" title=\""+r.getText("TACCOUNT_SELECTED")+"\">");R.renderControl(A._getAriaMarkText());R.write("<div class=\"sapSuiteUiCommonsInfoIcon\">");R.write("!");R.write("</div>");R.write("</div>");R.write("<div class=\"sapSuiteUiCommonsAccountHeader\">");R.write("<div class=\"sapSuiteUiCommonsAccountHeaderFirst\">");R.write("<div");R.addClass("sapSuiteUiCommonsAccountHeaderExpandWrapper");R.writeClasses();R.write(">");R.renderControl(A._getDownArrow());R.write("</div>");var t=e(A.getTitle()).replace(/&#xa;|\n/g,"<br>");if(A.getSubtitle()){var S=e(A.getSubtitle()).replace(/&#xa;|\n/g,"<br>");R.write("<div class=\"sapSuiteUiCommonsAccountHeaderTitleWrapper\">");R.write("<div id=\""+A.getId()+"-title"+"\" class=\"sapSuiteUiCommonsAccountHeaderTitleWithSubtitle\">"+t+"</div>");R.write("<div class=\"sapSuiteUiCommonsAccountHeaderSubtitle\">"+S+"</div>");R.write("</div>");}else{R.write("<span id=\""+A.getId()+"-title"+"\" class=\"sapSuiteUiCommonsAccountHeaderTitle\">"+t+"</span>");}R.write("</div>");R.write("<div class=\"sapSuiteUiCommonsAccountHeaderSecond\">");R.write("<span id=\""+A.getId()+"-sum"+"\" class=\"sapSuiteUiCommonsAccountHeaderSUM\">"+A._getSumText()+"</span>");R.write("</div>");R.write("</div>");R.write("<div id=\""+A.getId()+"-content"+"\" class=\"sapSuiteUiCommonsAccountTWrapper\"");if(A.getCollapsed()){R.write("style=\"display:none\"");}R.write(">");if(H||A.getOpening()){R.write("<div");R.addClass("sapSuiteUiCommonsAccountTHeader");if(A.getOpening()){R.addClass("sapSuiteUiCommonsAccountTHeaderOpening");}R.writeClasses();R.write(">");R.write("<span id=\""+A.getId()+"-debit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderTitle\">"+r.getText("TACCOUNT_DEBIT")+"</span>");R.write("<span id=\""+A.getId()+"-credit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderTitle\">"+r.getText("TACCOUNT_CREDIT")+"</span>");R.write("</div>");if(H){if(A.getOpening()){R.write("<div class=\"sapSuiteUiCommonsAccountOpeningHeader\">");R.write("<span id=\""+A.getId()+"-opening-debit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderOpeningDebitTitle\">"+o+" "+u+"</span>");R.write("<span id=\""+A.getId()+"-opening-credit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderOpeningCreditTitle\">"+O+" "+u+"</span>");R.write("</div>");}R.write("<div class=\"sapSuiteUiCommonsAccountTBody\"");R.writeAttribute("role","listbox");R.write(">");if(A._isOrdered()){R.write("<div class=\"sapSuiteUiCommonsAccountDebitCredit\"");R.writeAttribute("role","listbox");R.writeAttribute("aria-labelledby",A.getId()+"-debit-text "+A.getId()+"-credit-text");R.write(">");R.write("<div class=\"sapSuiteUiCommonsAccountMiddleBorder\"></div>");W(A.getDebit().concat(A.getCredit()));}else{R.write("<div class=\"sapSuiteUiCommonsAccountDebit\"");R.writeAttribute("role","listbox");R.writeAttribute("aria-labelledby",A.getId()+"-debit-text");R.write(">");w(A.getDebit(),true);}R.write("</div>");if(!A._isOrdered()){R.write("<div class=\"sapSuiteUiCommonsAccountCredit\"");R.writeAttribute("role","listbox");R.writeAttribute("aria-labelledby",A.getId()+"-credit-text");R.write(">");w(A.getCredit(),false);R.write("</div>");}R.write("</div>");}}else{R.write("<div class=\"sapSuiteUiCommonsAccountNoData\">");R.write(r.getText("TACCOUNT_NO_DATA"));R.write("</div>");}if(A.getOpening()){R.write("<div class=\"sapSuiteUiCommonsAccountClosingHeaderLine\"></div>");R.write("<div class=\"sapSuiteUiCommonsAccountClosingHeader\">");R.write("<span id=\""+A.getId()+"-closing-debit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderOpeningDebitTitle\">"+h(true)+" "+u+"</span>");R.write("<span id=\""+A.getId()+"-closing-credit-text"+"\" class=\"sapSuiteUiCommonsAccountTHeaderOpeningCreditTitle\">"+h(false)+" "+u+"</span>");R.write("</div>");}R.write("</div>");R.write("</div>");}
});
g.prototype.onBeforeRendering=function(){this._bRendered=false;this._iOldSum=this._iSum;this._iSum=null;};
g.prototype.onAfterRendering=function(){var p=this.getParent();this._bRendered=true;this._setupDraggable();this._setupKeyboard();if(p&&this._hasGroupParent(p)){if(!p._bRendered){p.addEventDelegate({onAfterRendering:this._setupTooltips.bind(this)});}if(p._bRendered&&this._iOldSum!=null){var i=this._iSum-this._iOldSum;p._valueChanged(i);}}else{this._setupTooltips();}this.$().find(".sapSuiteUiCommonsAccountGroupCollapseIcon").attr("aria-pressed",!this.getCollapsed());};
g.prototype.onsapdownmodifiers=function(E){if(E[s]){this._handleArrowMoveEvent(E,f.DOWN);}};
g.prototype.onsapupmodifiers=function(E){if(E[s]){this._handleArrowMoveEvent(E,f.UP);}};
g.prototype.onsappreviousmodifiers=function(E){if(E[s]){this._handleArrowMoveEvent(E,f.PREVIOUS);}};
g.prototype.onsapnextmodifiers=function(E){if(E[s]){this._handleArrowMoveEvent(E,f.NEXT);}};
g.prototype.reset=function(){this._oSum=null;};
g.prototype._isOrdered=function(){return!!this.getOrderBy();};
g.prototype._setupKeyboard=function(){if(!this._oItemNavigation){this._oItemNavigation=new I();this.addDelegate(this._oItemNavigation);}this._oItemNavigation.setRootDomRef(this.$().find(".sapSuiteUiCommonsAccountTBody")[0]);this._oItemNavigation.setItemDomRefs(this.$().find(".sapSuiteUiCommonsAccountItem"));this._oItemNavigation.setCycling(true);};
g.prototype._isInGroup=function(){return this.getParent()instanceof T;};
g.prototype._setupDraggable=function(){if(this._isInGroup()){var $=this.$(),p=this.getParent();$.draggable({revert:"invalid",delay:100,helper:function(){return $.clone().width($.width()).css("z-index",500);},opacity:0.6,scope:p.getId()+"-content",handle:".sapSuiteUiCommonsAccountHeader",start:function(){$.addClass("sapSuiteUiCommonsAccountItemDragging");p.$().find(".sapSuiteUiCommonsAccountGroupDroppingArea").addClass("sapSuiteUiCommonsAccountGroupDroppingAreaHighlight");p.$().find(".sapSuiteUiCommonsAccountHeader").css("cursor","grabbing");},stop:function(){$.removeClass("sapSuiteUiCommonsAccountItemDragging");p.$().find(".sapSuiteUiCommonsAccountGroupDroppingArea").removeClass("sapSuiteUiCommonsAccountGroupDroppingAreaHighlight");p.$().find(".sapSuiteUiCommonsAccountHeader").css("cursor","grab");}});U._setupMobileDraggable($);}};
g.prototype._setItemsAttrs=function(h){h.forEach(function(o,i){o._index=i+1;o._indexSize=h.length;});this.getDebit().forEach(function(i){i._bIsDebit=true;});};
g.prototype._getExpandAltText=function(h){return(h?r.getText("TACCOUNT_COLLAPSE"):r.getText("TACCOUNT_EXPAND"))+" "+r.getText("TACCOUNT_TITLE");};
g.prototype._getDownArrow=function(){var h=this.getCollapsed();if(!this._oArrowDown){this._oArrowDown=new b({alt:this._getExpandAltText(!h),tooltip:this._getExpandAltText(!h),decorative:false,src:!h?"sap-icon://navigation-right-arrow":"sap-icon://navigation-down-arrow",press:function(){this.setCollapsed(!this.getCollapsed());}.bind(this)}).addStyleClass("sapSuiteUiCommonsAccountGroupCollapseIcon");}this._oArrowDown.$().attr("aria-pressed",!this.getCollapsed());return this._oArrowDown;};
g.prototype._getAriaMarkText=function(){if(!this._oMarkText){this._oMarkText=new c({id:this.getId()+"-mark-text",text:r.getText("TACCOUNT_SELECTED")});this.addDependent(this._oMarkText);}return this._oMarkText;};
g.prototype._getSum=function(){if(this._iSum==null){var S=0;this.getCredit().forEach(function(i){S+=i.getValue();});this.getDebit().forEach(function(i){S-=i.getValue();});if(this.getOpening()){S+=this.getOpeningCredit();S-=this.getOpeningDebit();}this._iSum=S;}return this._iSum;};
g.prototype._getAriaLabelText=function(){return"T account "+this.getTitle()+" "+this._getSumText();};
g.prototype._getSumText=function(){var h=this.getMeasureOfUnit(),v=d.formatCurrency(Math.abs(this._getSum()),h);return(this._getSum()>0?r.getText("TACCOUNT_CREDIT"):r.getText("TACCOUNT_DEBIT"))+": "+v+" "+e(h);};
g.prototype._valueChanged=function(i){if(this._bRendered){this._iSum=this._getSum()+i;this.$("sum").text(this._getSumText());var p=this.getParent();if(this._hasGroupParent(p)){p._valueChanged(i);}}};
g.prototype._hasGroupParent=function(p){return(p||this.getParent())instanceof T;};
g.prototype._handleArrowMoveEvent=function(E,o){this._moveTAccount(o);E.preventDefault();E.stopImmediatePropagation();};
g.prototype._moveTAccount=function(o){var $,h,i,m,j=o===f.UP,S=true,k=this.$();var M=function(A){if(i.length===0){S=false;return;}k.detach();$.detach();i[A](k);i[A]($);};if(j||o===f.DOWN){m=j?["next","prev","insertBefore","append"]:["prev","next","insertAfter","prepend"];$=k[m[0]](".sapSuiteUiCommonsAccountGroupDroppingArea");h=k[m[1]]()[m[1]](".sapSuiteUiCommonsAccount");if(h.length!==0){k.detach()[m[2]](h);$.detach()[m[2]](h);}else{i=k.parent()[m[1]](".sapSuiteUiCommonsAccountGroupColumn");M(m[3]);}}else{$=k.prev(".sapSuiteUiCommonsAccountGroupDroppingArea");i=k.parent()[o===f.NEXT?"next":"prev"](".sapSuiteUiCommonsAccountGroupColumn");M("append");}if(S){k.focus();}};
g.prototype._setControlKeyName=function(k){s=k;};
g.prototype._setupTooltips=function(){var h=function(i){var E=this.$().find(i);if(E[0]&&E[0].clientHeight<E[0].scrollHeight){E.attr("title",E.html());}}.bind(this);if(this.getSubtitle()){h(".sapSuiteUiCommonsAccountHeaderTitleWithSubtitle");h(".sapSuiteUiCommonsAccountHeaderSubtitle");}else{h(".sapSuiteUiCommonsAccountHeaderTitle");}};
g.prototype.updateBindingContext=function(){this.reset();return C.prototype.updateBindingContext.apply(this,arguments);};
g.prototype.setMeasureOfUnit=function(v){this.setProperty("measureOfUnit",v,true);if(this._bRendered){this.$("sum").text(this._getSumText());var p=this.getParent();if(this._hasGroupParent(p)){p._measureChanged(v);}}this.invalidate();return this;};
g.prototype.invalidate=function(){this._bRendered=false;C.prototype.invalidate.apply(this,arguments);};
g.prototype.setCollapsed=function(v){this.setProperty("collapsed",v,true);var t=this._getExpandAltText(!v);this._getDownArrow().setTooltip(t);this._getDownArrow().$().attr("aria-label",t);this._getDownArrow().setSrc(!v?"sap-icon://navigation-down-arrow":"sap-icon://navigation-right-arrow");this.$()[v?"addClass":"removeClass"]("sapSuiteUiCommonsAccountCollapsed");this.$().find(".sapSuiteUiCommonsAccountGroupCollapseIcon").attr("aria-pressed",!v);if(this.getDomRef()){this.$("content")[v?"hide":"show"]("medium");}return this;};
return g;});
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountGroup',["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters","./TAccountPanel","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/Button","sap/base/security/encodeXML","sap/ui/core/Configuration","sap/ui/core/delegate/ItemNavigation","./TAccountUtils","sap/ui/core/ResizeHandler",],function(q,l,C,P,T,I,a,B,e,b,c,d,R){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var f=C.extend("sap.suite.ui.commons.taccount.TAccountGroup",{
metadata:{library:"sap.suite.ui.commons",properties:{title:{type:"string",group:"Misc",defaultValue:null},collapsed:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{accounts:{type:"sap.suite.ui.commons.taccount.TAccount",multiple:true,singularName:"account"}},events:{}},
renderer:function(o,g){if(!g._bThemeApplied){return;}o.write("<div");o.addClass("sapSuiteUiCommonsAccountGroup");if(g.getCollapsed()){o.addClass("sapSuiteUiCommonsAccountGroupCollapsed");}o.writeClasses(g);o.writeControlData(g);o.writeAttributeEscaped("aria-label",g._getSumText());o.write(">");o.write("<div class=\"sapSuiteUiCommonsGroupHeader\">");o.write("<div class=\"sapSuiteUiCommonsGroupHeaderExpandWrapper\">");o.renderControl(g._getExpandCollapse());o.write("</div>");o.write("<div class=\"sapSuiteUiCommonsGroupHeaderFirst\">");o.write("<span class=\"sapSuiteUiCommonsGroupHeaderTitle\">"+e(g.getTitle())+"</span>");o.write("<span id=\""+g.getId()+"-sum\" class=\"sapSuiteUiCommonsGrouptHeaderSUM\">"+g._getSumText()+"</span>");o.write("<div id=\"\" class=\"sapSuiteUiCommonsGroupInfoIconWrapper sapSuiteUiCommonsTAccountBaseInfoIconWrapper\" title=\""+r.getText("TACCOUNT_SELECTED")+"\">");o.write("<span class=\"sapSuiteUiCommonsInfoIcon\">");o.write("!");o.write("</span>");o.write("</div>");o.write("</div>");o.write("<div class=\"sapSuiteUiCommonsGroupHeaderSecond\">");o.renderControl(g._getExpandAllAccounts());o.renderControl(g._getCollapseAllAccounts());o.write("</div>");o.write("</div>");o.write("<div id=\""+g.getId()+"-content\" class=\"sapSuiteUiCommonsAccountGroupContent\">");g.getAccounts().forEach(function(i){o.renderControl(i);});o.write("</div>");o.write("</div>");}
});
f.prototype.init=function(){sap.ui.getCore().attachThemeChanged(function(){this._bThemeApplied=true;this.invalidate();},this);this._bThemeApplied=sap.ui.getCore().isThemeApplied();if(!this._sResizeHandlerId){this._sResizeHandlerId=R.register(this,this._adjustUI.bind(this));}};
f.prototype.exit=function(){if(this._oIconExpand){this._oIconExpand.destroy();}if(this._oIconCollapse){this._oIconCollapse.destroy();}if(this._sResizeHandlerId){R.deregister(this._sResizeHandlerId);this._sResizeHandlerId="";}};
f.prototype.onBeforeRendering=function(){this._bRendered=false;this._oSum=null;this._iColumnCount=-1;};
f.prototype.onAfterRendering=function(){this._adjustUI();this._bRendered=true;var p=this.getParent();if(p&&this._hasPanelParent(p)&&p._bRendered){p._recalculate();}if(this.getCollapsed()){this.$("content").hide();}};
f.prototype.reset=function(){this._oSum=null;};
f.prototype.updateBindingContext=function(){this.reset();return C.prototype.updateBindingContext.apply(this,arguments);};
f.prototype._hasPanelParent=function(p){return(p||this.getParent())instanceof T;};
f.prototype._getExpandCollapse=function(){var g=this.getCollapsed(),t=this._getExpandAltText(!g);if(!this._oArrowDown){this._oArrowDown=new a({src:g?"sap-icon://navigation-right-arrow":"sap-icon://navigation-down-arrow",alt:t,tooltip:t,press:function(){this._expandCollapse();}.bind(this)});}return this._oArrowDown;};
f.prototype._getExpandAltText=function(g){return(g?r.getText("TACCOUNT_COLLAPSE"):r.getText("TACCOUNT_EXPAND"))+" "+r.getText("TACCOUNT_GROUP_TITLE");};
f.prototype._expandCollapse=function(){var g=this.getCollapsed(),t=this._getExpandAltText(g);this._getExpandCollapse().$().attr("aria-label",t);this._getExpandCollapse().setTooltip(t);this._getExpandCollapse().setSrc(g?"sap-icon://navigation-down-arrow":"sap-icon://navigation-right-arrow");this.setProperty("collapsed",!g,true);this._bIsExpanding=true;this.$("content")[g?"show":"hide"]("medium",function(){this._bIsExpanding=false;}.bind(this));this.$()[!g?"addClass":"removeClass"]("sapSuiteUiCommonsAccountGroupCollapsed");};
f.prototype._expandCollapseAllAccounts=function(E){this.getAccounts().forEach(function(A){A.setCollapsed(!!E);});};
f.prototype._getExpandAllAccounts=function(){if(!this._oIconExpand){this._oIconExpand=new B({icon:"sap-icon://expand-all",type:"Transparent",tooltip:r.getText("TACCOUNT_EXPAND"),press:this._expandCollapseAllAccounts.bind(this,false)}).addStyleClass("sapSuiteUiCommonsGroupHeaderIcon");}return this._oIconExpand;};
f.prototype._getCollapseAllAccounts=function(){if(!this._oIconCollapse){this._oIconCollapse=new B({icon:"sap-icon://collapse-all",type:"Transparent",tooltip:r.getText("TACCOUNT_COLLAPSE"),press:this._expandCollapseAllAccounts.bind(this,true)}).addStyleClass("sapSuiteUiCommonsGroupHeaderIcon");}return this._oIconCollapse;};
f.prototype._getSum=function(F){var A=this.getAccounts(),s=0,m="",g=true;if(!this._oSum||F){for(var i=0;i<A.length;i++){var o=A[i];if(m&&m!==o.getMeasureOfUnit()){g=false;break;}m=o.getMeasureOfUnit();s+=o._getSum();}this._oSum={sum:s,measure:m,correct:g};}return this._oSum;};
f.prototype._getSumText=function(){var s=this._getSum();if(s&&s.correct){var v=d.formatCurrency(Math.abs(s.sum),s.measure);return(s.sum>0?r.getText("TACCOUNT_CREDIT"):r.getText("TACCOUNT_DEBIT"))+": "+v+" "+e(s.measure);}return"-";};
f.prototype._getAriaText=function(){return"T Account Group "+e(this.getTitle())+" "+this._getSumText();};
f.prototype._adjustUI=function(){var g=320,S=16,h=g+S;var $=this.$("content"),w=$.width(),j=Math.max(Math.ceil(w/(h))-1,1);if(j===this._iColumnCount){return;}if(this._bIsExpanding||(this._bRendered&&this.getCollapsed())){return;}var m=q("<div id=\""+this.getId()+"-content\" class=\"sapSuiteUiCommonsAccountGroupContent\"/>"),H=Array.apply(null,Array(j)).map(Number.prototype.valueOf,0);var n=this.$().find(".sapSuiteUiCommonsAccount"),o=0;this._iColumnCount=j;this._iDivs=[];var D="<div class=\"sapSuiteUiCommonsAccountGroupDroppingArea\"><div class=\"sapSuiteUiCommonsAccountGroupDroppingAreaInner\">"+"</div><div class=\"sapSuiteUiCommonsAccountGroupDroppingAreaInnerBall\"></div><div class=\"sapSuiteUiCommonsAccountGroupDroppingAreaInnerText\">"+r.getText("TACCOUNT_DROP_HERE")+"</div></div>";for(var i=0;i<j;i++){var s="<div class=\"sapSuiteUiCommonsAccountGroupColumn\">"+D+"</div>",p=q(s);m.append(p);this._iDivs.push(p);}for(var i=0;i<n.length;i++){var t=q(n[i]),u=t.height(),v=this._iDivs[o];var M=Number.MAX_VALUE,x=0;for(var k=0;k<j;k++){var y=H[k];if(y<M){M=y;x=k;}}var v=this._iDivs[x];t.detach().appendTo(v);q(D).appendTo(v);H[x]+=u;}$.detach();this.$().append(m);this._setupDroppable();};
f.prototype._setupDroppable=function(){var g=function(o){var $=q(o);return $.hasClass("sapSuiteUiCommonsTAccountDropZoneTop")?$.parent().prev():$.parent().next();};var D=function($,u){var j=u.draggable,k=j.next();if(k[0]!==$[0]){k.detach().insertAfter($);j.detach().insertAfter($);}else{j.detach().insertBefore($);}$.removeClass("sapSuiteUiCommonsAccountGroupDroppingAreaActiveSide");j.css("left",0);j.css("top",0);};var i=this.$().find(".sapSuiteUiCommonsAccountGroupDroppingArea");i.droppable({scope:this.getId()+"-content",tolerance:"pointer",activeClass:"sapSuiteUiCommonsAccountGroupDroppingAreaActive",hoverClass:"sapSuiteUiCommonsAccountGroupDroppingAreaActive",drop:function(E,u){var $=q(this);D($,u);}});var h=this.$().find(".sapSuiteUiCommonsTAccountDropZoneBottom, .sapSuiteUiCommonsTAccountDropZoneTop");h.droppable({scope:this.getId()+"-content",tolerance:"pointer",drop:function(j,u){var $=q(this);$=$.hasClass("sapSuiteUiCommonsTAccountDropZoneTop")?$.parent().prev():$.parent().next();D($,u);},over:function(j,u){g(this).addClass("sapSuiteUiCommonsAccountGroupDroppingAreaActiveSide");},out:function(j,u){g(this).removeClass("sapSuiteUiCommonsAccountGroupDroppingAreaActiveSide");}});};
f.prototype._valueChanged=function(D){if(this._oSum){this._oSum.sum+=D;this.$("sum").text(this._getSumText());var p=this.getParent();if(this._hasPanelParent(p)){p._valueChanged(D);}}};
f.prototype._measureChanged=function(m){if(this._oSum){if(this._oSum.measure===m&&!this._oSum.correct){this._recalculate();return;}if(this._oSum.measure!==m&&this._oSum.correct){var p=this.getParent();this._oSum.correct=false;if(this._hasPanelParent(p)){p._setInvalid();}}this.$("sum").text(this._getSumText());}};
f.prototype._recalculate=function(){this._oSum=this._getSum(true);this.$("sum").text(this._getSumText());var p=this.getParent();if(this._hasPanelParent(p)){p._recalculate();}};
f.prototype._hasPanelParent=function(p){return(p||this.getParent())instanceof T;};
f.prototype.invalidate=function(){this._bRendered=false;C.prototype.invalidate.apply(this,arguments);};
return f;});
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountItem',["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters","sap/suite/ui/commons/taccount/TAccountPanel","sap/suite/ui/commons/taccount/TAccountGroup","sap/ui/core/format/NumberFormat","sap/ui/core/Core","sap/ui/core/library","./TAccountUtils"],function(q,l,C,P,T,a,N,b,c,d){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
var e=C.extend("sap.suite.ui.commons.taccount.TAccountItem",{
metadata:{library:"sap.suite.ui.commons",properties:{value:{type:"float",group:"Misc",defaultValue:0},color:{type:"sap.m.ValueCSSColor",group:"Misc",defaultValue:null},group:{type:"string",group:"Misc",defaultValue:""},ariaLabel:{type:"string",group:"Misc",defaultValue:""}},aggregations:{properties:{type:"sap.suite.ui.commons.taccount.TAccountItemProperty",multiple:true,singularName:"property"}},events:{press:{}}},
renderer:function(R,i){var s=i.getColor(),u=i.getParent()&&i.getParent().getMeasureOfUnit(),v=d.formatCurrency(i.getValue(),u),t=v+" "+u;R.write("<div tabindex=\"0\"");R.addClass("sapSuiteUiCommonsAccountItem");R.writeClasses(i);R.writeControlData(i);if(i.getGroup()){R.writeAttributeEscaped("group",i.getGroup());}R.writeAttribute("aria-selected","false");R.writeAttribute("aria-setsize",i._indexSize);R.writeAttribute("aria-posinset",i._index);R.writeAttribute("role","option");R.writeAttributeEscaped("aria-label",i._getAriaLabel(t));R.write(">");R.write("<div class=\"sapSuiteUiCommonsAccountColorBar\"");if(s&&c.CSSColor.isValid(s)){R.write("style=\"background-color:"+s+"\"");}else if(c.CSSColor.isValid(P.get(s))){R.write("style=\"background-color:"+P.get(s)+"\"");}R.write(">");R.write("</div>");R.write("<div id=\""+i.getId()+"-content\" class=\"sapSuiteUiCommonsAccountContent\">");R.write("<div class=\"sapSuiteUiCommonsAccountItemTitleWrapper\">");R.write("<span class=\"sapSuiteUiCommonsAccountItemTitle\">");R.writeEscaped(t);R.write("</span>");R.write("</div>");R.write("<div class=\"sapSuiteUiCommonsAccountItemProperties\">");i.getProperties().forEach(function(p){R.renderControl(p);});R.write("</div>");R.write("</div>");R.write("</div>");}
});
e.prototype.onBeforeRendering=function(){this._prepareProperties();};
e.prototype.onAfterRendering=function(){this.$().on("click",this._click.bind(this));};
e.prototype._refreshAriaLabel=function(v){this.$().attr("aria-label",this._getAriaLabel());};
e.prototype._getAriaLabel=function(t){var A=this.getAriaLabel();if(A){return A;}if(!t){var u=this.getParent()&&this.getParent().getMeasureOfUnit(),v=d.formatCurrency(this.getValue(),u),t=v+" "+u;}var s=(this._bIsDebit?r.getText("TACCOUNT_DEBIT"):r.getText("TACCOUNT_CREDIT"))+" "+r.getText("TACCOUNT_ITEM");s+=" "+t+" ";this.getProperties().forEach(function(i){if(i.getVisible()){s+=i.getLabel()+":"+i.getValue()+" ";}});return s;};
e.prototype._click=function(){var E=this.fireEvent("press",{},true);if(E){this._highlightItems();}};
e.prototype._highlightItems=function(){var $=this.$(),g=this.getGroup(),s=!$.is(".sapSuiteUiCommonsAccountItemSelected, .sapSuiteUiCommonsAccountItemSelectedByGroup"),f=q(".sapSuiteUiCommonsAccountItemSelected");this._setAriaHighlighted(f,false);this._setAriaHighlighted($,s);f.removeClass("sapSuiteUiCommonsAccountItemSelected");s?$.addClass("sapSuiteUiCommonsAccountItemSelected"):$.removeClass("sapSuiteUiCommonsAccountItemSelected");var p=this._findHighlightParent();if(p){var h=q(".sapSuiteUiCommonsAccountItemSelectedByGroup");h.removeClass("sapSuiteUiCommonsAccountItemSelectedByGroup");this._setAriaHighlighted(h,false);if(g&&s){var G=q(".sapSuiteUiCommonsAccountItem[group="+g+"]");G.addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");var t=this;G.each(function(i,j){var E=sap.ui.getCore().byId(j.id);if(E){t._setAriaHighlighted(E.$(),true);var o=E.getParent();if(o){o.$().addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");var k=o.getParent();if(k instanceof a){k.$().addClass("sapSuiteUiCommonsAccountItemSelectedByGroup");}}}});}}};
e.prototype.onsapenter=function(){this._highlightItems();};
e.prototype.onsapspace=function(){this._highlightItems();};
e.prototype._setAriaHighlighted=function($,s){$.attr("aria-selected",s);$.attr("aria-label",s?r.getText("COLORED_ITEM_FROM")+" "+this.getGroup():this._getAriaLabel());};
e.prototype._findHighlightParent=function(){var p=this.getParent();p=p&&p.getParent();if(p instanceof a){var o=p.getParent();return o instanceof T||p;}return null;};
e.prototype._prepareProperties=function(){this._mProperties={};this.getProperties().forEach(function(p){var k=p.getKey();if(k){this._mProperties[k]=p;}}.bind(this));};
e.prototype.setValue=function(v){var o=this.getValue(),D=(this._bIsDebit?-1:1)*(v-o);this.setProperty("value",v);this.getParent()&&this.getParent()._valueChanged(D);};
return e;});
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountItemProperty',["sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters"],function(l,C,P){"use strict";
var T=C.extend("sap.suite.ui.commons.taccount.TAccountItemProperty",{
metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Misc",defaultValue:null},value:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},displayLabel:{type:"boolean",group:"Misc",defaultValue:true},visible:{type:"boolean",group:"Misc",defaultValue:true}}},
renderer:function(r,p){var v=p.getValue(),L=p.getLabel(),d=p.getVisible()?"":"style=\"display:none\"",k="key="+p.getKey();r.write("<div class=\"sapSuiteUiCommonsAccountPropertyWrapper\""+k+" "+d);r.writeControlData(p);r.write(">");if(L&&p.getDisplayLabel()){r.write("<div class=\"sapSuiteUiCommonsAccountItemLabel\">"+L+":</div>");}r.write("<div class=\"sapSuiteUiCommonsAccountItemProperty\">"+v+"</div>");r.write("</div>");}
});
T.prototype._getLabel=function(){return this.getValue()||this.getKey();};
return T;});
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountPanel',["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","sap/ui/core/Control","sap/ui/core/theming/Parameters","sap/m/Panel","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/Button","sap/m/FlexBox","sap/m/Label","sap/ui/model/Filter","sap/m/SearchField","sap/m/List","sap/m/StandardListItem","sap/m/CheckBox","sap/m/Title","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Text","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/ui/model/FilterOperator","sap/base/security/encodeXML","sap/ui/core/format/NumberFormat","sap/ui/core/Core","sap/ui/core/Configuration","sap/m/ButtonType","./TAccountUtils","./TAccountPanelRenderer"],function(q,l,C,P,a,J,D,B,F,L,b,S,c,d,e,T,f,g,h,j,k,m,n,N,o,p,r,s,t){"use strict";var R=o.getLibraryResourceBundle("sap.suite.ui.commons");var u=l.taccount.TAccountPanelState;
var v=a.extend("sap.suite.ui.commons.taccount.TAccountPanel",{metadata:{library:"sap.suite.ui.commons",properties:{title:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.suite.ui.commons.taccount.TAccountPanelState",group:"Misc",defaultValue:"Default"},showOverlay:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{properties:{type:"sap.suite.ui.commons.taccount.TAccountItemProperty",multiple:true,singularName:"property"},table:{type:"sap.ui.core.Control",multiple:false}},events:{stateChanged:{parameters:{state:"sap.suite.ui.commons.taccount.TAccountPanelState"}},settingsApplied:{parameters:{properties:"object"}}}}});
v.prototype.init=function(){this._bDisplayLabels=true;};
v.prototype.onBeforeRendering=function(){this._oSum=null;this._bRendered=false;this._prepareProperties();this._createToolbar();};
v.prototype.onAfterRendering=function(){var $=this.$();this._switchContent(this.getState()===u.Table);this._bRendered=true;$.attr("aria-label",this._getAriaLabelText());$.addClass("sapSuiteUiCommonsAccountPanel");this._setTotalBalanceTitle();};
v.prototype.getSum=function(){var w=0,M="",x=true,y=this.getContent();if(!this._oSum){for(var i=0;i<y.length;i++){var G=y[i];if(G instanceof sap.suite.ui.commons.taccount.TAccountGroup){var z=G._getSum();if((M&&M!==z.measure)||!z.correct){x=false;break;}M=z.measure;w+=z.sum;}}this._oSum={measure:M,sum:w||0,correct:x};}return this._oSum;};
v.prototype.switchContent=function(i){var w=i?u.Table:u.Default;this._switchContent(i);this.setProperty("state",w,true);};
v.prototype.getSettingsDialog=function(){return this._getPopover();};
v.prototype.getToolbar=function(){return this._getToolbar();};
v.prototype.openSettings=function(){this._oSelectAllCheckBox&&this._oSelectAllCheckBox.setText(this._getSelectAllText());this._getPopover().open();};
v.prototype.reset=function(){this._oSum=null;if(this._oPopover){this._oPopover.destroy();this._oPopover=null;}};
v.prototype.setState=function(V){var i=V===u.Table;this._switchContent(i);this.setProperty("state",V,true);return this;};
v.prototype.updateBindingContext=function(){this.reset();return C.prototype.updateBindingContext.apply(this,arguments);};
v.prototype._switchContent=function(i){var w=i?u.Table:u.Default;this.$("table")[i?"show":"hide"]();this.$("datacontent")[i?"hide":"show"]();if(this._oDisplaySwitcher){this._oDisplaySwitcher.setSelectedKey(w);}};
v.prototype._prepareProperties=function(){this._mProperties={};this.getProperties().forEach(function(i){var K=i.getKey();if(K){this._mProperties[K]=i;}}.bind(this));};
v.prototype._setPropertiesVisibility=function(w){var $=this.$();Object.keys(w).forEach(function(K){var x=w[K],I=$.find(".sapSuiteUiCommonsAccountPropertyWrapper[key="+K+"]");I.each(function(i,y){var V=x.getVisible(),z=o.byId(y.id);if(z){z.setProperty("visible",V,true);z.getParent()._refreshAriaLabel();}q(y)[V?"show":"hide"]();});});$.find(".sapSuiteUiCommonsAccountItemLabel")[this._bDisplayLabels?"show":"hide"]();};
v.prototype._getPopover=function(){if(!this._oPopover){this._createPopover();}return this._oPopover;};
v.prototype._getSelectAllText=function(i){var w=this.getProperties();if(!i&&i!==0){i=w.reduce(function(x,y){return x+(y.getVisible()?1:0);},0);}this._iSelectedCount=i;return R.getText("TACCOUNT_SELECTALL")+" ("+i+"/"+w.length+")";};
v.prototype._createPopover=function(){var i=this,w=false;if(!this._oPopover){this._oPopover=new D({contentWidth:"450px",title:R.getText("TACCOUNT_DISPLAYOPTIONS"),afterOpen:function(){if(!w){var M=i._oPopover.$().height();i._oPopover.setProperty("contentHeight",M+"px",true);w=true;}}});}this._oPopover.setEndButton(new B({text:R.getText("TACCOUNT_CANCEL"),press:function(M){i._oPopover.close();}}));this._oPopover.setBeginButton(new B({text:R.getText("TACCOUNT_OK"),type:r.Emphasized,press:function(M){var O=E.getSelectedContexts(true),Q=E.getModel();var V={},U={};O.forEach(function(X){var Y=Q.getProperty(X.sPath);if(Y){var Z=i._mProperties[Y.key];V[Y.key]=1;if(Z&&!Z.getVisible()){Z.setProperty("visible",true,true);U[Y.key]=Z;}}});Object.keys(i._mProperties).forEach(function(X){var Y=i._mProperties[X];if(Y.getVisible()&&!V[X]){Y.setProperty("visible",false,true);U[X]=Y;}});i._bDisplayLabels=x.getSelected();if(i.fireEvent("settingsApplied",{properties:U},true)){i._setPropertiesVisibility(U);}i._oPopover.close();}}));this._oPopover.removeAllContent();var W=new F({width:"100%",renderType:"Bare",direction:"Column"});this._oPopover.addContent(W);var x=new e({selected:this._bDisplayLabels}).addStyleClass("sapUiTinyMarginBegin");var y=new F({renderType:"Bare",alignItems:"Center",items:[x,new L({text:"Show labels"}).addStyleClass("sapUiTinyMarginBegin")]}).addStyleClass("sapUiTinyMarginBottom sapUiTinyMarginTop");W.addItem(y);var z=function(M){var O=[],Q=M.getSource().getValue();if(Q&&Q.length>0){O.push(new b("title",m.Contains,Q));}var U=E.getBinding("items");U.filter(O,"Application");};var A=new S({width:"100%",liveChange:z}).addStyleClass("sapSuiteUiCommonsAccountsPopupSearch");W.addItem(A);var E=new c({width:"100%",mode:"MultiSelect",includeItemInSelection:true,selectionChange:function(M){var O=M.getParameter("listItem").getSelected();i._oSelectAllCheckBox.setText(i._getSelectAllText(i._iSelectedCount+(O?1:-1)));i._oSelectAllCheckBox.setSelected(G.length===i._iSelectedCount);}}).addStyleClass("sapSuiteUiCommonsAccountsPopupList");E.bindAggregation("items",{path:"/items",template:new d({title:"{title}",selected:"{selected}"})});var G=this.getProperties(),H=this._getSelectAllText();this._oSelectAllCheckBox=new e({selected:G.length===i._iSelectedCount,text:H,select:function(M){var O=M.getSource().getSelected();i._oSelectAllCheckBox.setText(i._getSelectAllText(O?G.length:0));E.getItems().forEach(function(Q){Q.setSelected(O);});}}).addStyleClass("sapUiTinyMarginBegin sapUiTinyMarginEnd sapSuiteUiCommonsAccountsPopupSelectAll");var I=new F({renderType:"Bare",alignItems:"Center"}).addStyleClass("sapSuiteUiCommonsAccountsPopupSelectAllWrapper");I.addItem(this._oSelectAllCheckBox);W.addItem(I);W.addItem(E);var K=[];G.forEach(function(M){K.push({title:M._getLabel(),key:M.getKey(),selected:M.getVisible()});});E.setModel(new J({items:K}));return this._oPopover;};
v.prototype._getToolbar=function(){if(!this._oToolbar){this._createToolbar();}return this._oToolbar;};
v.prototype._createToolbar=function(){var i=this;if(this._oToolbar){return;}this._oToolbar=new f();this._oToolbar.addContent(new T(this.getId()+"-toolbartitle",{text:this.getTitle()}));this._oToolbar.addContent(new g(this.getId()+"-toolbarspacer"));this._oToolbar.addContent(new h(this.getId()+"-toolbarbalancelabel",{wrapping:false,text:R.getText("TACCOUNT_TOTALBALANCE")+":"}).addStyleClass("sapSuiteUiCommonsAccountPanelLabel"));this._oToolbar.addContent(new h(this.getId()+"-toolbarsumtitle",{wrapping:false}).addStyleClass("sapSuiteUiCommonsAccountPanelSum"));this._oDisplaySwitcher=new j(this.getId()+"-toolbarswitcher",{selectionChange:function(E){var I=o.byId(i._oDisplaySwitcher.getSelectedItem());if(I){i.switchContent(I.getKey()===u.Table);i.fireStateChanged({state:I.getKey()});}},items:[new k({key:u.Default,tooltip:R.getText("TACCOUNT_DEFAULT"),icon:"sap-icon://screen-split-two"}),new k({key:u.Table,tooltip:R.getText("TACCOUNT_TABLE"),icon:"sap-icon://table-chart"})]});this._oToolbar.addContent(this._oDisplaySwitcher);this._oToolbar.addContent(new B(this.getId()+"-toolbarsettings",{icon:"sap-icon://action-settings",press:this.openSettings.bind(this)}));this.setHeaderToolbar(this._oToolbar);};
v.prototype._getSumText=function(){var i=this.getSum();if(!i.correct){return" - ";}return s.formatCurrency(Math.abs(i.sum),i.measure)+" "+n(i.measure);};
v.prototype._setTotalBalanceTitle=function(){var i=this.getSum(),w="";if(!i.correct||i.sum===0){w=R.getText("TACCOUNT_TOTALBALANCE");}else{w=i.sum>0?R.getText("TACCOUNT_TOTALCREDIT"):R.getText("TACCOUNT_TOTALDEBIT");}this.$("toolbarbalancelabel").text(w+":");this.$("toolbarsumtitle").text(this._getSumText());};
v.prototype._getAriaLabelText=function(){return"T account panel "+this.getTitle()+" "+this._getSumText();};
v.prototype._recalculate=function(){this._oSum=null;this._oSum=this.getSum();this._setTotalBalanceTitle();};
v.prototype._valueChanged=function(i,M){var w=this.getSum();if(w.correct){this._oSum.sum+=i;}this._setTotalBalanceTitle();};
v.prototype.setShowOverlay=function(V){this.setProperty("showOverlay",V,true);this.$("overlay")[V?"addClass":"removeClass"]("sapSuiteUiCommonsAccountPanelOverlayVisible");};
v.prototype._setInvalid=function(){if(this._oSum){this._oSum.correct=false;this._setTotalBalanceTitle();}};
v.prototype.invalidate=function(){this._bRendered=false;C.prototype.invalidate.apply(this,arguments);};
return v;});
/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine('sap/suite/ui/commons/AriaProperties',["./library","sap/ui/core/Element"],function(l,E){"use strict";
var A=E.extend("sap.suite.ui.commons.AriaProperties",{metadata:{library:"sap.suite.ui.commons",properties:{label:{type:"string",defaultValue:null},labelledBy:{type:"string",defaultValue:null},describedBy:{type:"string",defaultValue:null},role:{type:"string",defaultValue:null},hasPopup:{type:"string",defaultValue:null}}}});
A.writeAriaProperties=function(r,d,a){var L=(a&&a.getLabel())||d.label;if(L){r.writeAttributeEscaped("aria-label",L);}var s=(a&&a.getLabelledBy())||d.labelledBy;if(s){r.writeAttributeEscaped("aria-labelledby",s);}var D=(a&&a.getDescribedBy())||d.describedBy;if(D){r.writeAttributeEscaped("aria-describedby",D);}var R=(a&&a.getRole())||d.role;if(R){r.writeAttributeEscaped("role",R);}var h=(a&&a.getHasPopup())||d.hasPopup;if(h){r.writeAttributeEscaped("aria-haspopup",h);}};
return A;});
sap.ui.predefine('sap/suite/ui/commons/ChartContainer',["sap/ui/thirdparty/jquery",'./library','sap/m/library','sap/viz/library','sap/ui/base/ManagedObject','sap/m/Button','sap/m/ButtonType','sap/m/OverflowToolbar','sap/m/OverflowToolbarButton','sap/m/SegmentedButton','sap/m/Title','sap/m/ToolbarSpacer','sap/ui/Device','sap/ui/core/Control','sap/ui/core/CustomData','sap/ui/core/Popup','sap/ui/core/ResizeHandler','sap/ui/core/delegate/ScrollEnablement','sap/m/ToggleButton',"sap/base/util/uid","sap/base/Log","./ChartContainerRenderer"],function(q,l,M,V,a,B,b,O,c,S,T,d,D,C,e,P,R,f,g,u,L,h){"use strict";
var j=C.extend("sap.suite.ui.commons.ChartContainer",{metadata:{library:"sap.suite.ui.commons",properties:{showPersonalization:{type:"boolean",group:"Misc",defaultValue:false},showFullScreen:{type:"boolean",group:"Misc",defaultValue:false},fullScreen:{type:"boolean",group:"Misc",defaultValue:false},showLegend:{type:"boolean",group:"Misc",defaultValue:true},title:{type:"string",group:"Misc",defaultValue:''},selectorGroupLabel:{type:"string",group:"Misc",defaultValue:null,deprecated:true},autoAdjustHeight:{type:"boolean",group:"Misc",defaultValue:false},showZoom:{type:"boolean",group:"Misc",defaultValue:true},showLegendButton:{type:"boolean",group:"Misc",defaultValue:true},showSelectionDetails:{type:"boolean",group:"Behavior",defaultValue:false},wrapLabels:{type:"boolean",group:"Misc",defaultValue:false},enableScroll:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"}},defaultAggregation:"content",aggregations:{dimensionSelectors:{type:"sap.ui.core.Control",multiple:true,singularName:"dimensionSelector"},content:{type:"sap.suite.ui.commons.ChartContainerContent",multiple:true,singularName:"content"},toolbar:{type:"sap.m.OverflowToolbar",multiple:false},customIcons:{type:"sap.ui.core.Icon",multiple:true,singularName:"customIcon"}},events:{personalizationPress:{},contentChange:{parameters:{selectedItemId:{type:"string"}}},customZoomInPress:{},customZoomOutPress:{}}}});
j.prototype.init=function(){this._aUsedContentIcons=[];this._aCustomIcons=[];this._oToolBar=null;this._aDimensionSelectors=[];this._bChartContentHasChanged=false;this._bControlNotRendered=true;this._bSegmentedButtonSaveSelectState=false;this._mOriginalVizFrameHeights={};this._oActiveChartButton=null;this._oSelectedContent=null;this._sResizeListenerId=null;this._bHasApplicationToolbar=false;this._iPlaceholderPosition=0;this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oFullScreenButton=new g({icon:"sap-icon://full-screen",type:b.Transparent,tooltip:this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"),press:this._onFullScreenButtonPress.bind(this)});this._oPopup=new P({modal:true,shadow:false,autoClose:false});this._oShowLegendButton=new g({icon:"sap-icon://legend",type:b.Transparent,tooltip:this._oResBundle.getText("CHARTCONTAINER_LEGEND"),press:this._onShowLegendButtonPress.bind(this),pressed:this.getShowLegend()});this._oPersonalizationButton=new c({icon:"sap-icon://action-settings",type:b.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_PERSONALIZE"),tooltip:this._oResBundle.getText("CHARTCONTAINER_PERSONALIZE"),press:this._onPersonalizationButtonPress.bind(this)});this._oZoomInButton=new c({icon:"sap-icon://zoom-in",type:b.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_ZOOMIN"),tooltip:this._oResBundle.getText("CHARTCONTAINER_ZOOMIN"),press:this._zoom.bind(this,true)});this._oZoomOutButton=new c({icon:"sap-icon://zoom-out",type:b.Transparent,text:this._oResBundle.getText("CHARTCONTAINER_ZOOMOUT"),tooltip:this._oResBundle.getText("CHARTCONTAINER_ZOOMOUT"),press:this._zoom.bind(this,false)});this._oChartSegmentedButton=new S({select:this._onChartSegmentButtonSelect.bind(this),width:"auto"});this._oChartTitle=new T();};
j.prototype.onAfterRendering=function(){this._sResizeListenerId=R.register(this,this._performHeightChanges.bind(this));if(!D.system.desktop){D.resize.attachHandler(this._performHeightChanges,this);}if(this.getAutoAdjustHeight()||this.getFullScreen()){setTimeout(function(){var m=this._performHeightChanges.bind(this);if(typeof m==="string"||m instanceof String){m=this[m];}m.apply(this,[]);}.bind(this),500);}var s=this.getSelectedContent(),v=false,i;if(s){i=s.getContent();v=i&&i.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame";}if(this.getEnableScroll()){this._oScrollEnablement=new f(this,this.getId()+"-wrapper",{horizontal:!v,vertical:!v});}this._bControlNotRendered=false;};
j.prototype.onBeforeRendering=function(){if(this._sResizeListenerId){R.deregister(this._sResizeListenerId);this._sResizeListenerId=null;}if(!D.system.desktop){D.resize.detachHandler(this._performHeightChanges,this);}if(this._bChartContentHasChanged||this._bControlNotRendered){this._chartChange();}var k=this._aCustomIcons;this._aCustomIcons=[];var m=this.getAggregation("customIcons");if(m&&m.length>0){for(var i=0;i<m.length;i++){this._addButtonToCustomIcons(m[i]);}}if(this._bControlNotRendered){if(!this.getToolbar()){this.setAggregation("toolbar",new O({design:"Transparent"}));}}this._adjustDisplay();this._destroyButtons(k);var s=this.getSelectedContent();if(s){var o=s.getContent();if(o&&o.attachRenderComplete){o.detachRenderComplete(this._checkZoomIcons,this);o.attachRenderComplete(this._checkZoomIcons,this);}}};
j.prototype.exit=function(){if(this._oFullScreenButton){this._oFullScreenButton.destroy();this._oFullScreenButton=undefined;}if(this._oPopup){this._oPopup.destroy();this._oPopup=undefined;}if(this._oShowLegendButton){this._oShowLegendButton.destroy();this._oShowLegendButton=undefined;}if(this._oPersonalizationButton){this._oPersonalizationButton.destroy();this._oPersonalizationButton=undefined;}if(this._oActiveChartButton){this._oActiveChartButton.destroy();this._oActiveChartButton=undefined;}if(this._oChartSegmentedButton){this._oChartSegmentedButton.destroy();this._oChartSegmentedButton=undefined;}if(this._oSelectedContent){this._oSelectedContent.destroy();this._oSelectedContent=undefined;}if(this._oToolBar){this._oToolBar.destroy();this._oToolBar=undefined;}if(this._oToolbarSpacer){this._oToolbarSpacer.destroy();this._oToolbarSpacer=undefined;}if(this._aDimensionSelectors){for(var i=0;i<this._aDimensionSelectors.length;i++){if(this._aDimensionSelectors[i]){this._aDimensionSelectors[i].destroy();}}this._aDimensionSelectors=undefined;}if(this._oScrollEnablement){this._oScrollEnablement.destroy();this._oScrollEnablement=undefined;}if(this._sResizeListenerId){R.deregister(this._sResizeListenerId);this._sResizeListenerId=null;}if(!D.system.desktop){D.resize.detachHandler(this._performHeightChanges,this);}if(this._oZoomInButton){this._oZoomInButton.destroy();this._oZoomInButton=undefined;}if(this._oZoomOutButton){this._oZoomOutButton.destroy();this._oZoomOutButton=undefined;}};
j.prototype._onButtonIconPress=function(E){var s=E.getSource().getCustomData()[0].getValue();this._switchChart(s);};
j.prototype._onFullScreenButtonPress=function(E){if(E.getParameter("pressed")===true){this._oFullScreenButton.setTooltip(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN_CLOSE"));this._oFullScreenButton.setIcon("sap-icon://exit-full-screen");}else{this._oFullScreenButton.setTooltip(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"));this._oFullScreenButton.setIcon("sap-icon://full-screen");}this._bSegmentedButtonSaveSelectState=true;this._toggleFullScreen();this._oFullScreenButton.focus();};
j.prototype._onShowLegendButtonPress=function(E){this._bSegmentedButtonSaveSelectState=true;this._onLegendButtonPress();};
j.prototype._onChartSegmentButtonSelect=function(E){var s=E.getParameter("button").getCustomData()[0].getValue();this._bSegmentedButtonSaveSelectState=true;this._switchChart(s);};
j.prototype._onOverflowToolbarButtonPress=function(E,i){i.icon.firePress({controlReference:E.getSource()});};
j.prototype._onLegendButtonPress=function(){var s=this.getSelectedContent();if(s){var i=s.getContent();if(q.isFunction(i.getLegendVisible)){var k=i.getLegendVisible();i.setLegendVisible(!k);this.setShowLegend(!k);}else{this.setShowLegend(!this.getShowLegend());}}else{this.setShowLegend(!this.getShowLegend());}};
j.prototype._checkZoomIcons=function(E){if(E.getSource()._getZoomInfo){var z=E.getSource()._getZoomInfo();if(z){this._manageZoomIcons(z.currentZoomLevel);}}};
j.prototype._onPersonalizationButtonPress=function(){this.firePersonalizationPress();};
j.prototype._setSelectedContent=function(s){var i;if(this.getSelectedContent()===s){return this;}if(s===null){this._oShowLegendButton.setVisible(false);return this;}var o=s.getContent();this._toggleShowLegendButtons(o);i=o&&o.getMetadata&&o.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame";var k=i||q.isFunction(o.setLegendVisible);if(this.getShowLegendButton()){this._oShowLegendButton.setVisible(k);}var m=this.getShowZoom()&&D.system.desktop&&i;this._oZoomInButton.setVisible(m);this._oZoomOutButton.setVisible(m);this._oSelectedContent=s;return this;};
j.prototype._getSelectionDetails=function(){var o=this.getSelectedContent();return o&&o._getSelectionDetails();};
j.prototype._toggleShowLegendButtons=function(k){var s=k.getId();var r=null;for(var i=0;!r&&i<this._aUsedContentIcons.length;i++){if(this._aUsedContentIcons[i].getCustomData()[0].getValue()===s&&k.getVisible()===true){r=this._aUsedContentIcons[i];this._oChartSegmentedButton.setSelectedButton(r);break;}}};
j.prototype._setDefaultOnSegmentedButton=function(){if(!this._bSegmentedButtonSaveSelectState){this._oChartSegmentedButton.setSelectedButton(null);}this._bSegmentedButtonSaveSelectState=false;};
j.prototype._toggleFullScreen=function(){var F=this.getProperty("fullScreen");if(F){var k=this.getAggregation("content");this._closeFullScreen();this.setProperty("fullScreen",false,true);this._oFullScreenButton.setIcon("sap-icon://full-screen");this._oFullScreenButton.setTooltip(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN"));this._oFullScreenButton.setPressed(false);var o;var H;for(var i=0;i<k.length;i++){o=k[i].getContent();o.setWidth("100%");H=this._mOriginalVizFrameHeights[o.getId()];if(H){o.setHeight(H);}}this.invalidate();}else{this._openFullScreen();this.setProperty("fullScreen",true,true);this._oFullScreenButton.setIcon("sap-icon://exit-full-screen");this._oFullScreenButton.setTooltip(this._oResBundle.getText("CHARTCONTAINER_FULLSCREEN_CLOSE"));this._oFullScreenButton.setPressed(true);}};
j.prototype._openFullScreen=function(){var i=P.Dock;this.$content=this.$();if(this.$content){this.$tempNode=q("<div></div>");this.$content.before(this.$tempNode);this._$overlay=q("<div id='"+u()+"'></div>");this._$overlay.addClass("sapSuiteUiCommonsChartContainerOverlay");this._$overlay.addClass("sapSuiteUiCommonsChartContainerChartArea");this._$overlay.append(this.$content);this._oPopup.setContent(this._$overlay);}else{q.sap.log.warn("Overlay: content does not exist or contains more than one child");}this._oPopup.open(200,i.BeginTop,i.BeginTop,q("body"));if(!D.system.desktop){setTimeout(function(){var m=this._performHeightChanges.bind(this);if(typeof m==="string"||m instanceof String){m=this[m];}m.apply(this,[]);}.bind(this),500);}};
j.prototype._closeFullScreen=function(){if(this._oScrollEnablement){this._oScrollEnablement.destroy();this._oScrollEnablement=null;}this.$tempNode.replaceWith(this.$content);this._oToolBar.setDesign(M.ToolbarDesign.Auto);this._oPopup.close();this._$overlay.remove();};
j.prototype._performHeightChanges=function(){var t,v;if(this.getAutoAdjustHeight()||this.getFullScreen()){var $=this.$(),s,i,I;t=$.find(".sapSuiteUiCommonsChartContainerToolBarArea :first");v=$.find(".sapSuiteUiCommonsChartContainerChartArea :first");s=this.getSelectedContent();if(t[0]&&v[0]&&s){var k=$.height();var m=t.height();var n=Math.round(parseFloat(t.css("borderBottomWidth")));var N=k-m-n;var E=v.height();i=s.getContent();if(i){I=i.getMetadata().getName();if(I==="sap.viz.ui5.controls.VizFrame"||I==="sap.chart.Chart"){if(N>0&&N!==E){this._rememberOriginalHeight(i);i.setHeight(N+"px");}}else if(i.$().innerWidth()!==this.$("chartArea").innerWidth()){this.rerender();}}}}};
j.prototype._rememberOriginalHeight=function(i){var H;if(q.isFunction(i.getHeight)){H=i.getHeight();}else{H=0;}this._mOriginalVizFrameHeights[i.getId()]=H;};
j.prototype._switchChart=function(i){var o=this._findChartById(i);this._setSelectedContent(o);this.fireContentChange({selectedItemId:i});this.rerender();};
j.prototype._chartChange=function(){var k=this.getContent();this._destroyButtons(this._aUsedContentIcons);this._aUsedContentIcons=[];if(this.getContent().length===0){this._oChartSegmentedButton.removeAllButtons();this._setDefaultOnSegmentedButton();this.switchChart(null);}if(k){var s=this.getShowLegend();var I;var o;for(var i=0;i<k.length;i++){if(!k[i].getVisible()){continue;}I=k[i].getContent();if(q.isFunction(I.setVizProperties)){I.setVizProperties({legend:{visible:s},sizeLegend:{visible:s}});}if(q.isFunction(I.setWidth)){I.setWidth("100%");}if(q.isFunction(I.setHeight)&&this._mOriginalVizFrameHeights[I.getId()]){I.setHeight(this._mOriginalVizFrameHeights[I.getId()]);}o=new B({icon:k[i].getIcon(),type:b.Transparent,tooltip:k[i].getTitle(),customData:[new e({key:'chartId',value:I.getId()})],press:this._onButtonIconPress.bind(this)});this._aUsedContentIcons.push(o);if(i===0){this._setSelectedContent(k[i]);this._oActiveChartButton=o;}}}this._bChartContentHasChanged=false;};
j.prototype._findChartById=function(k){var o=this.getAggregation("content");if(o){for(var i=0;i<o.length;i++){if(o[i].getContent().getId()===k){return o[i];}}}return null;};
j.prototype._getToolbarPlaceHolderPosition=function(t){var o;for(var i=0;i<t.getContent().length;i++){o=t.getContent()[i];if(o.getMetadata&&o.getMetadata().getName()==="sap.suite.ui.commons.ChartContainerToolbarPlaceholder"){return i;}}return-1;};
j.prototype._addContentToolbar=function(i,p){if(!this._bHasApplicationToolbar){if(!p){this._oToolBar.addContent(i);}else{this._oToolBar.insertContent(i,p);}}else{if(i instanceof d){this._iPlaceholderPosition=this._getToolbarPlaceHolderPosition(this._oToolBar);return;}if(p){this._iPlaceholderPosition=this._iPlaceholderPosition+p;}this._oToolBar.insertAggregation("content",i,this._iPlaceholderPosition,true);this._iPlaceholderPosition=this._iPlaceholderPosition+1;}};
j.prototype._rearrangeToolbar=function(){var t=this._aToolbarContent.length;for(var i=0;i<t;i++){this._oToolBar.insertContent(this._aToolbarContent[i],i);}};
j.prototype._adjustIconsDisplay=function(){if(this.getShowSelectionDetails()){this._addContentToolbar(this._getSelectionDetails());}if(this.getShowLegendButton()){this._addContentToolbar(this._oShowLegendButton);}if(this.getShowZoom()&&D.system.desktop){this._addContentToolbar(this._oZoomInButton);this._addContentToolbar(this._oZoomOutButton);}if(this.getShowPersonalization()){this._addContentToolbar(this._oPersonalizationButton);}if(this.getShowFullScreen()){this._addContentToolbar(this._oFullScreenButton);}var i=0;for(i;i<this._aCustomIcons.length;i++){this._addContentToolbar(this._aCustomIcons[i]);}if(!this._bControlNotRendered){this._oChartSegmentedButton.removeAllButtons();}var I=this._aUsedContentIcons.length;if(I>1){for(i=0;i<I;i++){this._oChartSegmentedButton.addButton(this._aUsedContentIcons[i]);}this._addContentToolbar(this._oChartSegmentedButton);}};
j.prototype._adjustSelectorDisplay=function(){if(this._aDimensionSelectors.length===0){this._oChartTitle.setVisible(true);this._addContentToolbar(this._oChartTitle);return;}for(var i=0;i<this._aDimensionSelectors.length;i++){if(q.isFunction(this._aDimensionSelectors[i].setAutoAdjustWidth)){this._aDimensionSelectors[i].setAutoAdjustWidth(true);}this._addContentToolbar(this._aDimensionSelectors[i]);}};
j.prototype._adjustDisplay=function(){this._oToolBar=this.getToolbar();if(this._oToolbarSpacer){this._oToolBar.removeContent(this._oToolbarSpacer);this._oToolbarSpacer.destroy();}this._oToolBar.removeAllContent();this._oToolBar.setProperty("height","3rem",true);if(this._bHasApplicationToolbar){this._rearrangeToolbar();this._iPlaceholderPosition=0;}this._adjustSelectorDisplay();this._oToolbarSpacer=new d();this._addContentToolbar(this._oToolbarSpacer);this._adjustIconsDisplay();};
j.prototype._addButtonToCustomIcons=function(i){var I=i;var s=I.getTooltip();var o=new c({icon:I.getSrc(),text:s,tooltip:s,type:b.Transparent,visible:I.getVisible(),press:[{icon:I},this._onOverflowToolbarButtonPress.bind(this)]});this._aCustomIcons.push(o);};
j.prototype._zoom=function(z){var o=this.getSelectedContent().getContent();if(o.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame"){if(z){o.zoom({"direction":"in"});}else{o.zoom({"direction":"out"});}}if(z){this.fireCustomZoomInPress();}else{this.fireCustomZoomOutPress();}this._manageZoomIcons(o._getZoomInfo().currentZoomLevel);};
j.prototype._manageZoomIcons=function(z){if(z===undefined){return;}else if(z===null){this._oZoomOutButton.setEnabled(false);this._oZoomInButton.setEnabled(false);}else if(z===0){this._oZoomOutButton.setEnabled(false);this._oZoomInButton.setEnabled(true);}else if(z===1){this._oZoomInButton.setEnabled(false);this._oZoomOutButton.setEnabled(true);}else{if(this._oZoomOutButton.getEnabled()==false){this._oZoomOutButton.setEnabled(true);}if(this._oZoomInButton.getEnabled()==false){this._oZoomInButton.setEnabled(true);}}};
j.prototype._destroyButtons=function(k){for(var i=0;i<k.length;i++){k[i].destroy();}};
j.prototype._setShowLegendForAllCharts=function(s){var k=this.getContent();var I;for(var i=0;i<k.length;i++){I=k[i].getContent();if(q.isFunction(I.setLegendVisible)){I.setLegendVisible(s);}else{L.info("ChartContainer: chart with id "+I.getId()+" is missing the setVizProperties property");}}};
j.prototype.setFullScreen=function(i){if(this._bControlNotRendered){return this;}if(this.getFullScreen()===i){return this;}if(this.getProperty("fullScreen")!==i){this._toggleFullScreen();}return this;};
j.prototype.setTitle=function(t){if(this.getTitle()===t){return this;}this._oChartTitle.setText(t);this.setProperty("title",t,true);return this;};
j.prototype.setShowLegendButton=function(s){if(this.getShowLegendButton()===s){return this;}this.setProperty("showLegendButton",s,true);if(!this.getShowLegendButton()){this.setShowLegend(false);}return this;};
j.prototype.setSelectorGroupLabel=function(s){if(this.getSelectorGroupLabel()===s){return this;}this.setProperty("selectorGroupLabel",s,true);return this;};
j.prototype.setShowLegend=function(s){if(this.getShowLegend()===s){return this;}this.setProperty("showLegend",s,true);this._setShowLegendForAllCharts(s);return this;};
j.prototype.setWrapLabels=function(i){var s;if(this.getWrapLabels()!==i){this.setProperty("wrapLabels",i);s=this._getSelectionDetails();if(s){s.setWrapLabels(i);}}return this;};
j.prototype.setToolbar=function(t){if(!t||this._getToolbarPlaceHolderPosition(t)===-1){L.info("A placeholder of type 'sap.suite.ui.commons.ChartContainerToolbarPlaceholder' needs to be provided. Otherwise, the toolbar will be ignored");return this;}if(this.getToolbar()!==t){this.setAggregation("toolbar",t);}if(this.getToolbar()){this._aToolbarContent=this.getToolbar().getContent();this._bHasApplicationToolbar=true;}else{this._aToolbarContent=null;this._bHasApplicationToolbar=false;}this.invalidate();return this;};
j.prototype.getDimensionSelectors=function(){return this._aDimensionSelectors;};
j.prototype.indexOfDimensionSelector=function(k){for(var i=0;i<this._aDimensionSelectors.length;i++){if(this._aDimensionSelectors[i]===k){return i;}}return-1;};
j.prototype.addDimensionSelector=function(i){this._aDimensionSelectors.push(i);return this;};
j.prototype.insertDimensionSelector=function(k,m){if(!k){return this;}var i;if(m<0){i=0;}else if(m>this._aDimensionSelectors.length){i=this._aDimensionSelectors.length;}else{i=m;}if(i!==m){L.warning("ManagedObject.insertAggregation: index '"+m+"' out of range [0,"+this._aDimensionSelectors.length+"], forced to "+i);}this._aDimensionSelectors.splice(i,0,k);return this;};
j.prototype.destroyDimensionSelectors=function(){if(this._oToolBar){for(var i=0;i<this._aDimensionSelectors.length;i++){if(this._aDimensionSelectors[i]){this._oToolBar.removeContent(this._aDimensionSelectors[i]);this._aDimensionSelectors[i].destroy();}}}this._aDimensionSelectors=[];return this;};
j.prototype.removeDimensionSelector=function(i){if(!i){return null;}if(this._oToolBar){this._oToolBar.removeContent(i);}var k=this.indexOfDimensionSelector(i);if(k===-1){return null;}else{return this._aDimensionSelectors.splice(k,1)[0];}};
j.prototype.removeAllDimensionSelectors=function(){var k=this._aDimensionSelectors.slice();if(this._oToolBar){for(var i=0;i<this._aDimensionSelectors.length;i++){if(this._aDimensionSelectors[i]){this._oToolBar.removeContent(this._aDimensionSelectors[i]);}}}this._aDimensionSelectors=[];return k;};
j.prototype.addContent=function(i){this.addAggregation("content",i);this._bChartContentHasChanged=true;return this;};
j.prototype.insertContent=function(i,k){this.insertAggregation("content",i,k);this._bChartContentHasChanged=true;return this;};
j.prototype.updateContent=function(){this.updateAggregation("content");this._bChartContentHasChanged=true;};
j.prototype.addAggregation=function(i,o,s){if(i==="dimensionSelectors"){return this.addDimensionSelector(o);}else{return a.prototype.addAggregation.apply(this,arguments);}};
j.prototype.getAggregation=function(i,k){if(i==="dimensionSelectors"){return this.getDimensionSelectors();}else{return a.prototype.getAggregation.apply(this,arguments);}};
j.prototype.indexOfAggregation=function(i,o){if(i==="dimensionSelectors"){return this.indexOfDimensionSelector(o);}else{return a.prototype.indexOfAggregation.apply(this,arguments);}};
j.prototype.insertAggregation=function(i,o,k,s){if(i==="dimensionSelectors"){return this.insertDimensionSelector(o,k);}else{return a.prototype.insertAggregation.apply(this,arguments);}};
j.prototype.destroyAggregation=function(i,s){if(i==="dimensionSelectors"){return this.destroyDimensionSelectors();}else{return a.prototype.destroyAggregation.apply(this,arguments);}};
j.prototype.removeAggregation=function(i,o,s){if(i==="dimensionSelectors"){return this.removeDimensionSelector(o);}else{return a.prototype.removeAggregation.apply(this,arguments);}};
j.prototype.removeAllAggregation=function(i,s){if(i==="dimensionSelectors"){return this.removeAllDimensionSelectors();}else{return a.prototype.removeAllAggregation.apply(this,arguments);}};
j.prototype.getSelectedContent=function(){return this._oSelectedContent;};
j.prototype.getScrollDelegate=function(){return this._oScrollEnablement;};
j.prototype.switchChart=function(i){this._setSelectedContent(i);this.rerender();};
j.prototype.updateChartContainer=function(){this._bChartContentHasChanged=true;this.rerender();return this;};
j.prototype.setWidth=function(v){this.setProperty("width",v,true);this.$().css("width",this.getWidth());return this;};
return j;});
sap.ui.predefine('sap/suite/ui/commons/ChartContainerContent',["sap/ui/thirdparty/jquery",'sap/ui/core/Control','sap/ui/base/Event','sap/m/SelectionDetails','sap/m/SelectionDetailsItem','sap/m/SelectionDetailsItemLine','sap/suite/ui/commons/ChartContainer','./ChartContainerContentRenderer'],function(q,C,E,S,a,b,c,d){"use strict";
var e=C.extend("sap.suite.ui.commons.ChartContainerContent",{metadata:{library:"sap.suite.ui.commons",properties:{icon:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false}}}});
e.prototype.init=function(){this._oSelectionDetails=new S();this._oSelectionDetails.registerSelectionDetailsItemFactory(e._selectionDetailsItemFactory);};
e.prototype.onBeforeRendering=function(){var p=this.getParent(),o;this._oSelectionDetails.detachSelectionHandler("_selectionDetails");o=this.getContent();if(o&&o.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame"){this._oSelectionDetails.attachSelectionHandler("_selectionDetails",o);}if(p instanceof c){this._oSelectionDetails.setWrapLabels(p.getWrapLabels());}};
e.prototype.exit=function(){if(this._oSelectionDetails){this._oSelectionDetails.destroy();this._oSelectionDetails=null;}};
e.prototype.getSelectionDetails=function(){e._addEventMapping(this._oSelectionDetails);return this._oSelectionDetails.getFacade();};
e.prototype._getSelectionDetails=function(){var o=this.getContent();if(o&&o.getMetadata().getName()==="sap.viz.ui5.controls.VizFrame"){return this._oSelectionDetails;}};
e._selectionDetailsItemFactory=function(f,g,h,j,s){s=s||"";var l=[],L,I=typeof s==="string";for(var i=0;i<f.length;i++){L=new b({label:f[i].label,value:f[i].value,unit:f[i].unit});if(!I){L.setLineMarker(s[f[i].id]);}else if(i===0){L.setLineMarker(s);}l.push(L);}return new a({lines:l});};
e._aProxyEvent=["beforeOpen","beforeClose","navigate","actionPress"];
e._addEventMapping=function(s){var A=s.attachEvent;s.attachEvent=function(f,g,h,l){if(e._aProxyEvent.indexOf(f)===-1){A.apply(this,arguments);return;}else if(q.type(g)==="function"){l=h;h=g;g=null;}A.apply(s,[f,g,p,l||s.getFacade()]);function p(i){var o=new E(f,i.oSource,i.mParameters);o.getSource=s.getFacade;if(f==="actionPress"){i.getParameters().items=j(i);}else if(f==="navigate"){i.getParameters().item=i.getParameter("item").getFacade();}h.call(l||s.getFacade(),o,g);}function j(k){var I=k.getParameter("items"),m=[];for(var i=0;i<I.length;i++){m.push(I[i].getFacade());}return m;}};};
return e;});
sap.ui.predefine('sap/suite/ui/commons/ChartContainerContentRenderer',function(){"use strict";var C={};
C.render=function(r,c){r.renderControl(c.getContent());};
return C;},true);
sap.ui.predefine('sap/suite/ui/commons/ChartContainerRenderer',function(){"use strict";var C={};
C.render=function(r,c){var s=c.getSelectedContent();r.write("<div");r.writeControlData(c);r.addClass("sapSuiteUiCommonsChartContainer");r.style("width",c.getWidth());r.writeClasses();r.write(">");r.write("<div");r.writeAttributeEscaped("id",c.getId()+"-wrapper");r.addClass("sapSuiteUiCommonsChartContainerWrapper");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapSuiteUiCommonsChartContainerToolBarArea");r.writeClasses();r.write(">");r.renderControl(c.getToolbar());r.write("</div>");r.write("<div");r.writeAttributeEscaped("id",c.getId()+"-chartArea");r.addClass("sapSuiteUiCommonsChartContainerChartArea");r.writeClasses();r.write(">");if(s!==null){r.renderControl(s);}else if(c.getContent().length>0){s=c.getContent()[0];r.renderControl(s);}r.write("</div>");r.write("</div>");r.write("</div>");};
return C;},true);
sap.ui.predefine('sap/suite/ui/commons/ChartContainerToolbarPlaceholder',['sap/ui/core/Control','./ChartContainerToolbarPlaceholderRenderer'],function(C,a){"use strict";
var b=C.extend("sap.suite.ui.commons.ChartContainerToolbarPlaceholder",{metadata:{library:"sap.suite.ui.commons"}});
return b;});
sap.ui.predefine('sap/suite/ui/commons/ChartContainerToolbarPlaceholderRenderer',function(){"use strict";var C={};
C.render=function(r,c){};
return C;},true);
sap.ui.predefine('sap/suite/ui/commons/ProcessFlow',["sap/ui/thirdparty/jquery","./library","sap/m/library","sap/ui/core/Control","sap/suite/ui/commons/ProcessFlowConnection","sap/suite/ui/commons/ProcessFlowLaneHeader","sap/ui/Device","sap/ui/core/ResizeHandler","sap/base/Log","sap/ui/events/KeyCodes","./ProcessFlowRenderer"],function(q,l,M,C,P,a,D,R,L,K,b){"use strict";
var c=C.extend("sap.suite.ui.commons.ProcessFlow",{metadata:{library:"sap.suite.ui.commons",properties:{foldedCorners:{type:"boolean",group:"Misc",defaultValue:false},scrollable:{type:"boolean",group:"Misc",defaultValue:true},wheelZoomable:{type:"boolean",group:"Behavior",defaultValue:true},showLabels:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"lanes",aggregations:{_connections:{type:"sap.suite.ui.commons.ProcessFlowConnection",multiple:true,singularName:"_connection",visibility:"hidden"},nodes:{type:"sap.suite.ui.commons.ProcessFlowNode",multiple:true,singularName:"node"},lanes:{type:"sap.suite.ui.commons.ProcessFlowLaneHeader",multiple:true,singularName:"lane"},ariaProperties:{type:"sap.suite.ui.commons.AriaProperties",multiple:false,group:"Misc"}},events:{nodeTitlePress:{deprecated:true,parameters:{oEvent:{type:"object"}}},nodePress:{parameters:{oEvent:{type:"object"}}},labelPress:{parameters:{oEvent:{type:"object"}}},headerPress:{parameters:{oEvent:{type:"object"}}},onError:{parameters:{oEvent:{type:"object"}}}},dnd:{draggable:false,droppable:true}}});
c.prototype._resBundle=null;c._cellEdgeConstants={"LU":"tl","LD":"lb","DU":"tb","LR":"rl","DR":"rt","UR":"rb"};c._constants={scrollContainer:"scrollContainer",counterLeft:"counterLeft",counterRight:"counterRight",arrowScrollRight:"arrowScrollRight",arrowScrollRightMinus:"-arrowScrollRight",arrowScrollLeft:"arrowScrollLeft",arrowScrollLeftMinus:"-arrowScrollLeft",top:"top",px:"px",parents:"parents",left:"left",right:"right"};c._mouseEvents={mouseMove:"mousemove",mouseDown:"mousedown",mouseUp:"mouseup",mouseLeave:"mouseleave",mouseEnter:"mouseenter",touchStart:"touchstart",sapTouchStart:"saptouchstart",touchEnd:"touchend",sapTouchCancel:"saptouchcancel"};c._enumMoveDirection={"LEFT":"left","RIGHT":"right","UP":"up","DOWN":"down"};c.prototype._zoomLevel=l.ProcessFlowZoomLevel.Two;c.prototype._wheelTimeout=null;c.prototype._isFocusChanged=false;c.prototype._wheelTimestamp=null;c.prototype._wheelCalled=false;c.prototype._internalCalcMatrix=false;c.prototype._internalConnectionMap=null;c.prototype._internalLanes=false;c.prototype._jumpOverElements=5;c.prototype._lastNavigationFocusElement=null;c.prototype._bHighlightedMode=false;c.prototype._isLayoutOptimized=false;c.prototype._defaultCursorClass="sapSuiteUiDefaultCursorPF";if(D.browser.msie||D.browser.edge){c.prototype._grabCursorClass="sapSuiteUiGrabCursorIEPF";c.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorIEPF";}else{c.prototype._grabCursorClass="sapSuiteUiGrabCursorPF";c.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorPF";}c.prototype._mousePreventEvents="contextmenu dblclick";c.prototype._mouseEvents="contextmenu mousemove mouseleave mousedown mouseup mouseenter";c.prototype._mouseWheelEvent=D.browser.mozilla?"DOMMouseScroll MozMousePixelScroll":"mousewheel wheel";c.prototype._headerHasFocus=false;c.prototype._isInitialZoomLevelNeeded=true;c.prototype._bDoScroll=!D.system.desktop||D.os.windows&&D.os.version>=8;c.prototype._scrollStep=192;c.prototype._bPreviousScrollForward=false;c.prototype._bPreviousScrollBack=false;c.prototype._iInitialArrowTop=undefined;c.prototype._iInitialCounterTop=undefined;c.prototype._bRtl=false;c.prototype._arrowScrollable=null;c.prototype._iTouchStartScrollTop=undefined;c.prototype._iTouchStartScrollLeft=undefined;c.prototype._bSetFocusOnce=true;
c.prototype.init=function(){this._bRtl=sap.ui.getCore().getConfiguration().getRTL();if(!this._resBundle){this._resBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");}this._internalLanes=[];if(this._getScrollContainer()){this._getScrollContainer().bind("keydown",q.proxy(this.onkeydown,this));}};
c.prototype.exit=function(){var n=this.getNodes(),i;if(n){for(i=0;i<n.length;i++){if(n[i]){n[i].destroy();}}n=null;}if(this._internalLanes){for(i=0;i<this._internalLanes.length;i++){this._internalLanes[i].destroy();}this._internalLanes=null;}var I=this.getAggregation("_connections");if(I){for(i=0;i<I.length;i++){I[i].destroy();}I=null;}if(this._oArrowLeft){this._oArrowLeft.destroy();}if(this._oArrowRight){this._oArrowRight.destroy();}if(this._resizeRegId){R.deregister(this._resizeRegId);}if(this._internalCalcMatrix){delete this._internalCalcMatrix;this._internalCalcMatrix=null;}if(this._getScrollContainer()){this._getScrollContainer().unbind(this._mousePreventEvents,this._handlePrevent);this._getScrollContainer().unbind(this._mouseEvents,q.proxy(this._registerMouseEvents,this));this._getScrollContainer().unbind(this._mouseWheelEvent,q.proxy(this._registerMouseWheel,this));this._getScrollContainer().unbind("keydown",q.proxy(this.onkeydown,this));this._getScrollContainer().unbind("scroll",q.proxy(this._onScroll,this));}};
c.prototype.onBeforeRendering=function(){if(this._getScrollContainer()){this._getScrollContainer().unbind(this._mousePreventEvents,this._handlePrevent);this._getScrollContainer().unbind(this._mouseEvents,q.proxy(this._registerMouseEvents,this));this._getScrollContainer().unbind(this._mouseWheelEvent,q.proxy(this._registerMouseWheel,this));this._getScrollContainer().unbind("keydown",q.proxy(this.onkeydown,this));this._getScrollContainer().unbind("scroll",q.proxy(this._onScroll,this));}};
c.prototype.onAfterRendering=function(){var s=false,$=this.$("scroll-content"),h,w,S,i;this._checkOverflow(this._getScrollContainer().get(0),this.$());this.iCursorPositionX=0;this.iCursorPositionY=0;if($&&$.length){this._getScrollContainer().find(".sapSuiteUiCommonsProcessFlowNode .sapUiIcon").css("cursor","inherit");if(this.getScrollable()){h=parseInt(this._getScrollContainer().css("height").slice(0,-2),10);w=parseInt(this._getScrollContainer().css("width").slice(0,-2),10);i=$[0].scrollHeight;S=$[0].scrollWidth;if(i<=h&&S<=w){this._clearHandlers(this._getScrollContainer());this._switchCursors(this._getScrollContainer(),this._grabCursorClass,this._defaultCursorClass);}else{this._switchCursors(this._getScrollContainer(),this._defaultCursorClass,this._grabCursorClass);s=true;}}else{this._clearHandlers(this._getScrollContainer());this._switchCursors(this._getScrollContainer(),this._grabCursorClass,this._defaultCursorClass);$.css("position","static");}if(s){if(!this._iInitialArrowTop||!this._iInitialCounterTop){this._iInitialArrowTop=parseInt(this.$(c._constants.arrowScrollRight).css(c._constants.top),10);this._iInitialCounterTop=parseInt(this.$(c._constants.counterRight).css(c._constants.top),10);}if(D.os.windows&&D.system.combi&&D.browser.chrome){this._getScrollContainer().bind(this._mouseEvents,q.proxy(this._registerMouseEvents,this));this._getScrollContainer().css("overflow","auto");}else if(D.os.windows&&(D.browser.msie&&(D.browser.version>9)||D.browser.edge)){this._getScrollContainer().bind(this._mouseEvents,q.proxy(this._registerMouseEvents,this));this._getScrollContainer().css("overflow","auto");this._getScrollContainer().css("-ms-overflow-style","none");}else if(!D.support.touch&&!q.sap.simulateMobileOnDesktop){this._getScrollContainer().bind(this._mouseEvents,q.proxy(this._registerMouseEvents,this));}else{this._clearHandlers(this._getScrollContainer());this._getScrollContainer().css("overflow","auto");}}else if(this._bDoScroll){this._getScrollContainer().css("overflow","auto");}else{this._getScrollContainer().css("overflow","hidden");}if(this.getWheelZoomable()&&D.system.desktop&&!this._isHeaderMode()){this._getScrollContainer().bind(this._mouseWheelEvent,q.proxy(this._registerMouseWheel,this));}if(this._bDoScroll){this._getScrollContainer().bind("scroll",q.proxy(this._onScroll,this));}this._resizeRegId=R.register(this,q.proxy(c.prototype._onResize,this));if(this._isInitialZoomLevelNeeded){this._initZoomLevel();}if(this._headerHasFocus){var d=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();if(d[0]){var n=sap.ui.getCore().byId(d[0].id);this._changeNavigationFocus(null,n);this._headerHasFocus=false;}}}};
c.prototype.ontouchend=function(e){if(e.target&&e.target.id.indexOf("arrowScroll")!==-1){this._onArrowClick(e);}else{if(!D.support.touch&&!q.sap.simulateMobileOnDesktop){this.onAfterRendering();}else{this._adjustAndShowArrow();}if(e===null||e.oSource===undefined){return;}e.preventDefault();if(this._isHeaderMode()){this._internalLanes=[];this.fireHeaderPress(this);}}};
c.prototype._handlePrevent=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault();}if(e&&!e.isPropagationStopped()){e.stopPropagation();}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation();}};
c.prototype._onResize=function(){var A=new Date().getTime();if(!this._iLastResizeEventTime||((A-this._iLastResizeEventTime)<50)){if(!this._iLastResizeHandlingTime||(A-this._iLastResizeHandlingTime>500)){this.onAfterRendering();this._iLastResizeHandlingTime=new Date().getTime();}}else{this._iLastResizeHandlingTime=null;}this._iLastResizeEventTime=new Date().getTime();};
c.prototype._registerMouseEvents=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault();}switch(e.type){case c._mouseEvents.mouseMove:if(this._getScrollContainer().hasClass(this._grabbingCursorClass)){if(sap.ui.getCore().getConfiguration().getRTL()){this._getScrollContainer().scrollLeftRTL(this.iCursorPositionX-e.pageX);}else{this._getScrollContainer().scrollLeft(this.iCursorPositionX-e.pageX);}this._getScrollContainer().scrollTop(this.iCursorPositionY-e.pageY);this._adjustAndShowArrow();}break;case c._mouseEvents.mouseDown:this._switchCursors(this._getScrollContainer(),this._defaultCursorClass,this._grabbingCursorClass);if(sap.ui.getCore().getConfiguration().getRTL()){this.iCursorPositionX=this._getScrollContainer().scrollLeftRTL()+e.pageX;}else{this.iCursorPositionX=this._getScrollContainer().scrollLeft()+e.pageX;}this.iCursorPositionY=this._getScrollContainer().scrollTop()+e.pageY;if(D.system.combi){this._iTouchStartScrollLeft=this._getScrollContainer().scrollLeft();if(this.getScrollable()){this._iTouchStartScrollTop=this._getScrollContainer().scrollTop();}}break;case c._mouseEvents.mouseUp:this._switchCursors(this._getScrollContainer(),this._grabbingCursorClass,this._grabCursorClass);break;case c._mouseEvents.mouseLeave:this._getScrollContainer().removeClass(this._grabbingCursorClass);this._getScrollContainer().removeClass(this._grabCursorClass);this._getScrollContainer().addClass(this._defaultCursorClass);break;case c._mouseEvents.mouseEnter:this._getScrollContainer().removeClass(this._defaultCursorClass);if(e.buttons===null){if(e.which===1){this._getScrollContainer().addClass(this._grabbingCursorClass);}else{this._getScrollContainer().addClass(this._grabCursorClass);}}else if(e.buttons===0){this._getScrollContainer().addClass(this._grabCursorClass);}else if(e.buttons===1){this._getScrollContainer().addClass(this._grabbingCursorClass);}break;default:}if(e.target&&e.target.parentElement&&e.target.parentElement.parentElement&&e.target.parentElement.parentElement.getMetadata&&e.target.parentElement.parentElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){if(e&&!e.isPropagationStopped()){e.stopPropagation();}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation();}}};
c.prototype.onfocusin=function(e){var t;if(e&&e.target&&e.target.id){t=sap.ui.getCore().byId(e.target.id);}if(this._isHeaderMode()){this._setFocusOnHeader(true);}else if(this._bSetFocusOnce&&!(t&&e.target.id.indexOf("arrowScroll"))){this._bSetFocusOnce=false;if(t&&t.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){this._changeNavigationFocus(null,t);}else if(!this._lastNavigationFocusElement){var $=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var n=sap.ui.getCore().byId($[0].id);this._changeNavigationFocus(null,n);}else if(this._lastNavigationFocusElement){this._changeNavigationFocus(null,this._lastNavigationFocusElement);}}};
c.prototype.onfocusout=function(){this._bSetFocusOnce=true;if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement._getNavigationFocus()){this._lastNavigationFocusElement._setNavigationFocus(false);if(this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._lastNavigationFocusElement.rerender();}}};
c.prototype.onsapplus=function(){this._isFocusChanged=true;this.zoomIn();};
c.prototype.onsapminus=function(){this._isFocusChanged=true;this.zoomOut();};
c.prototype.onsaptabnext=function(e){var f=true;var $=e.target;var A=sap.ui.getCore().byId($.id);if(!A&&$&&$.childElementCount>0){$=$.childNodes[0];A=sap.ui.getCore().byId($.id);}if(!A||(A.getMetadata().getName()!=="sap.suite.ui.commons.ProcessFlowNode"&&A.getMetadata().getName()!=="sap.suite.ui.commons.ProcessFlowConnectionLabel")){if(!this._isHeaderMode()&&!this._lastNavigationFocusElement){var d=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var n=sap.ui.getCore().byId(d[0].id);this._changeNavigationFocus(null,n);f=false;}else if(this._lastNavigationFocusElement){this._changeNavigationFocus(null,this._lastNavigationFocusElement);f=false;}}if(this._isHeaderMode()&&f){if(!this._headerHasFocus){this._setFocusOnHeader(true);}else{this._setFocusOnHeader(false);}}else if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._lastNavigationFocusElement.rerender();}var N;if(f){N=this.$().nextAll().find(":focusable").first();if(N.length===0){s.apply(this);}N.focus();L.debug("saptabnext: Keyboard focus has been changed to element:  id='"+N.id+"' outerHTML='"+N.outerHTML+"'");N=null;}e.preventDefault();function s(){var g=this.$().parent();do{N=g.next(":focusable");if(N.length===0){N=g.nextAll().find(":focusable").first();}g=g.parent();}while((g.length!==0)&&(N.length===0));if(N.length===0){N=q(":focusable")[0];}}};
c.prototype.onsaptabprevious=function(e){var p=null;var $=e.target;if((!this._lastNavigationFocusElement||!this._lastNavigationFocusElement._getNavigationFocus())&&e.target&&e.target.childElementCount>0){$=e.target.childNodes[0];}var A=sap.ui.getCore().byId($.id);if(A&&(A.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"||A.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode")){if(!this._isHeaderMode()&&!this._lastNavigationFocusElement){var d=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var n=sap.ui.getCore().byId(d[0].id);this._changeNavigationFocus(null,n);}else if(this._lastNavigationFocusElement){this._changeNavigationFocus(null,this._lastNavigationFocusElement);e.preventDefault();return;}}if(this._isHeaderMode()){if(!this._headerHasFocus){this._setFocusOnHeader(true);}else{this._setFocusOnHeader(false);p=this.$().prevAll().find(":focusable").first();}}else{p=this.$().prev(":focusable");if(p.length===0){p=this.$().prevAll().find(":focusable").first();}if(this._lastNavigationFocusElement){this._lastNavigationFocusElement._setNavigationFocus(false);}if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._lastNavigationFocusElement.rerender();}}if(p){if(p.length===0){s.apply(this);}else if(p.first().length!==0){p=q(p.first());}p.focus();L.debug("saptabnext: Keyboard focus has been set on element:  id='"+p.id+"' outerHTML='"+p.outerHTML+"'");p=null;}e.preventDefault();function s(){var f=this.$();do{p=f.prev(":focusable");if(p.length===0){p=f.prevAll().find(":focusable").last();}f=f.parent();}while((f.length!==0)&&(p.length===0));}};
c.prototype._handleKeySelect=function(e){if(this._isHeaderMode()){this._internalLanes=[];this.fireHeaderPress(this);var $=this.$("scroll-content").children().children().children(1).children("td[tabindex='0']").first().children();var n=sap.ui.getCore().byId($[0].id);this._changeNavigationFocus(null,n);}else if(this._lastNavigationFocusElement&&this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._lastNavigationFocusElement._getNavigationFocus()){var f=this._lastNavigationFocusElement;f._handleEvents(e);}};
c.prototype.onkeyup=function(e){var k=e.keyCode?e.keyCode:e.which;switch(k){case K.ENTER:case K.SPACE:var f=this._lastNavigationFocusElement;if(f){this.fireNodePress(this._lastNavigationFocusElement);f._handleEvents(e);}break;default:break;}};
c.prototype.onkeydown=function(e){var k=(e.keyCode?e.keyCode:e.which);L.debug("ProcessFlow::keyboard input has been catched and action going to start: keycode="+k);var E=false;var d=e.ctrlKey;var f=e.altKey;var p=this._lastNavigationFocusElement;switch(k){case K.ARROW_RIGHT:E=this._moveToNextElement(c._enumMoveDirection.RIGHT);break;case K.ARROW_LEFT:E=this._moveToNextElement(c._enumMoveDirection.LEFT);break;case K.ARROW_DOWN:E=this._moveToNextElement(c._enumMoveDirection.DOWN);break;case K.ARROW_UP:E=this._moveToNextElement(c._enumMoveDirection.UP);break;case K.PAGE_UP:E=this._moveOnePage(c._enumMoveDirection.UP,f);break;case K.PAGE_DOWN:E=this._moveOnePage(c._enumMoveDirection.DOWN,f);break;case K.HOME:E=this._moveHomeEnd(c._enumMoveDirection.LEFT,d);break;case K.END:E=this._moveHomeEnd(c._enumMoveDirection.RIGHT,d);break;case K.NUMPAD_0:case K.DIGIT_0:this._initZoomLevel();break;case K.ENTER:case K.SPACE:this._handleKeySelect(e);e.preventDefault();return;default:return;}e.preventDefault();if(E){this._changeNavigationFocus(p,this._lastNavigationFocusElement);}};
c.prototype._onArrowClick=function(e){var t=e.target.id;if(t){var i=this.getId();e.preventDefault();if(t===i+c._constants.arrowScrollLeftMinus&&D.system.desktop){this._scroll(-this._scrollStep,500);}else if(t===i+c._constants.arrowScrollRightMinus&&D.system.desktop){this._scroll(this._scrollStep,500);}}};
c.prototype._onScroll=function(){var s=this._getScrollContainer().scrollLeft();var d=Math.abs(s-this._iTouchStartScrollLeft);if(d>(this._scrollStep/4)&&!this._isFocusChanged){this._adjustAndShowArrow();this._iTouchStartScrollLeft=s;}else if(this.getScrollable()){var S=this._getScrollContainer().scrollTop();var i=Math.abs(S-this._iTouchStartScrollTop);if(i>10){this._moveArrowAndCounterVertical();this._iTouchStartScrollTop=S;}}};
c.prototype.ontouchstart=function(){this._iTouchStartScrollLeft=this._getScrollContainer().scrollLeft();if(this.getScrollable()){this._iTouchStartScrollTop=this._getScrollContainer().scrollTop();}};
c.prototype.ontouchmove=function(e){e.setMarked();};
c.prototype._handleLabelClick=function(e){if(e){var o=e.getSource();if(o&&o.getMetadata().getName()==="sap.ui.core.Icon"){o=o.getParent();}if(o&&o.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){var r=this._getConnectionMapEntries(o);var d=this._createLabelPressEventArgs(o,r);this.fireLabelPress(d);}}};
c.prototype._onFocusChanged=function(){var f=this._lastNavigationFocusElement,$=f?f.$():null,s,S,i,d,e,g,h,E,j,p,k,m,n,o,r,t,u=500;if(f&&this.getScrollable()){L.debug("The actually focused element is "+f.getId());if(f.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){E=$.parent().parent().parent().outerWidth();j=$.parent().parent().parent().outerHeight();p=$.parent().parent().parent().position();}else{E=$.outerWidth();j=$.outerHeight();p=$.position();}L.debug("Element outer width x height ["+E+" x "+j+"]");L.debug("Position of element in the content is ["+p.left+", "+p.top+"]");e=this.$("scroll-content");s=this._getScrollContainer().innerWidth();S=this._getScrollContainer().innerHeight();L.debug("Scroll container inner width x height ["+s+" x "+S+"]");i=this._getScrollContainer().scrollLeft();d=this._getScrollContainer().scrollTop();L.debug("Current scroll offset is ["+i+", "+d+"]");g=e.innerWidth();h=e.innerHeight();L.debug("Scroll content inner width x height ["+g+" x "+h+"]");k=-i+p.left;n=k+E;m=-d+p.top;o=m+j;if((n>s)||(k<0)||(o>S)||(m<0)){r=Math.round((s-E)/2);r=Math.max(s-g+p.left,r);r=Math.min(p.left,r);t=Math.round((S-j)/2);t=Math.max(S-h+p.top,t);t=Math.min(p.top,t);L.debug("Element lies outside the scroll container, scrolling from ["+k+","+m+"] to ["+r+","+t+"]");this._isFocusChanged=true;this._getScrollContainer().animate({scrollTop:p.top-t,scrollLeft:p.left-r},u,"swing",q.proxy(this._adjustAndShowArrow,this));}else{L.debug("Element lies inside the scroll container, no scrolling happens.");this._setFocusToNode(f);}}else{this._setFocusToNode(f);this._adjustAndShowArrow();}};
c.prototype._setScrollWidth=function(){switch(this.getZoomLevel()){case(l.ProcessFlowZoomLevel.One):this._scrollStep=240;break;case(l.ProcessFlowZoomLevel.Two):this._scrollStep=192;break;case(l.ProcessFlowZoomLevel.Three):this._scrollStep=168;break;case(l.ProcessFlowZoomLevel.Four):this._scrollStep=128;break;default:this._scrollStep=192;}};
c.prototype._getLastNavigationFocusElement=function(){return this._lastNavigationFocusElement;};
c.prototype._getNode=function(n,d){for(var i=0;i<d.length;i++){if(d[i].getNodeId()===n.toString()){return d[i];}}};
c.prototype._getLane=function(d){for(var i=0;i<this._internalLanes.length;i++){if(this._internalLanes[i].getLaneId()===d){return this._internalLanes[i];}}};
c._getChildIdByElement=function(d){if(typeof d==="object"){return d.nodeId;}else{return d;}};
c.prototype._isHeaderMode=function(){var n=this.getNodes();return!n||(n.length===0);};
c.prototype._getScrollContainer=function(){return this.$(c._constants.scrollContainer);};
c.prototype._handleException=function(e){var t=this._resBundle.getText("PF_ERROR_INPUT_DATA");this.fireOnError({text:t});L.error("Error loading data for the process flow with id : "+this.getId());if(e instanceof Array){for(var i=0;i<e.length;i++){L.error("Detailed description ("+i+") :"+e[i]);}}else{L.error("Detailed description  :"+e);}};
c.prototype._getAriaText=function(){return this._resBundle.getText("PF_ARIA_PROCESS_FLOW");};
c.prototype._updateLanesFromNodes=function(){c.NodeElement._createNodeElementsFromProcessFlowNodes(this.getNodes(),this.getLanes());var i=this._arrangeNodesByParentChildRelation(this.getNodes());this._internalLanes=c.NodeElement._updateLanesFromNodes(this.getLanes(),i).lanes;};
c.prototype._getOrCreateLaneMap=function(){if(!this._internalLanes||this._internalLanes.length<=0){this._updateLanesFromNodes();}return c.NodeElement._createMapFromLanes(this._internalLanes,q.proxy(this.ontouchend,this),this._isHeaderMode()).positionMap;};
c.prototype._arrangeNodesByParentChildRelation=function(d){var I=d?d.length:0;var e=[];var i,j;if(I>0){this._setParentForNodes(d);for(i=0;i<I;i++){e=d[i].getChildren();if(e){var f=e.length;for(j=0;j<f;j++){e[j]=c._getChildIdByElement(e[j]).toString();}}for(j=0;j<i;j++){if(e&&Array.prototype.indexOf.call(e,d[j].getNodeId())>-1&&d[j].getLaneId()===d[i].getLaneId()){d.splice(j,0,d[i]);d.splice(i+1,1);d=this._arrangeNodesByParentChildRelation(d);break;}}}}return d;};
c.prototype._getOrCreateProcessFlow=function(){if(!this._internalLanes||this._internalLanes.length<=0){this._updateLanesFromNodes();}this.applyNodeDisplayState();var I=this.getNodes();var r=c.NodeElement._createNodeElementsFromProcessFlowNodes(I,this._internalLanes);var e=r.elementById;var E=r.elementsByLane;var m=this._calculateMatrix(e);m=this._addFirstAndLastColumn(m);c.NodeElement._calculateLaneStatePieChart(E,this._internalLanes,I,this);for(var i=0;i<m.length;i++){for(var j=0;j<m[i].length;j++){if(m[i][j]instanceof c.NodeElement){m[i][j]=e[m[i][j].nodeId].oNode;}}}this._internalCalcMatrix=m;return m;};
c.prototype._addFirstAndLastColumn=function(d){if(!d||d.length<=0){return[];}var o=d.length;for(var i=0;i<o;i++){d[i].unshift(null);d[i].push(null);}return d;};
c.prototype._calculateMatrix=function(n){var I,e,d,r,m;if(!n||(n.length===0)){return[];}I=new c.InternalMatrixCalculation(this);I.checkInputNodeConsistency(n);e=I._retrieveInfoFromInputArray(n);I._resetPositions();d=e.highestLanePosition+1;r=Math.max(Object.keys(n).length,2);m=I._createMatrix(r,d);for(var i=0;i<e.rootElements.length;i++){I.iPositionY=e.rootElements[i].lane;m=I.processCurrentElement(e.rootElements[i],n,m);}if(this._isLayoutOptimized){I._optimizeMatrix(m,n);}m=I._doubleColumnsInMatrix(m);m=I._calculatePathInMatrix(m);m=I._removeEmptyLines(m);return m;};
c.NodeElement=function(i,d,n,e){this.nodeId=i;this.lane=d;this.state=n.getState();this.displayState=n._getDisplayState();this.isProcessed=false;if(Array.isArray(e)){this.aParent=e;}else{this.oParent=e;}this.oNode=n;};
c.NodeElement._initNodeElement=function(i,d,n,e){return new c.NodeElement(i,d,n,e);};
c.NodeElement.prototype={toString:function(){return this.nodeId;},containsChildren:function(e){if(!e){return false;}if(!(e instanceof c.NodeElement)){return false;}if(this.oNode.getChildren()&&e.oNode.getChildren()&&this.oNode.getChildren().length&&e.oNode.getChildren().length){for(var i=0;i<this.oNode.getChildren().length;i++){if(e.oNode.getChildren().indexOf(this.oNode.getChildren()[i])>=0){return true;}}}return false;}};
c.NodeElement._calculateLaneStatePieChart=function(d,e,f,p){if(!d||!e||!f){return;}var i;for(i=0;i<f.length;i++){p._bHighlightedMode=f[i].getHighlighted();if(p._bHighlightedMode){break;}}var g,n,N,h,k;for(i=0;i<e.length;i++){var o=e[i];var m=d[o.getLaneId()];if(!m){continue;}g=0;n=0;N=0;h=0;k=0;for(var j=0;j<m.length;j++){if(!p._bHighlightedMode||(m[j].oNode._getDisplayState()===l.ProcessFlowDisplayState.Highlighted||m[j].oNode._getDisplayState()===l.ProcessFlowDisplayState.HighlightedFocused||m[j].oNode._getDisplayState()===l.ProcessFlowDisplayState.SelectedHighlighted||m[j].oNode._getDisplayState()===l.ProcessFlowDisplayState.SelectedHighlightedFocused)){switch(m[j].oNode.getState()){case l.ProcessFlowNodeState.Positive:g++;break;case l.ProcessFlowNodeState.Negative:case l.ProcessFlowNodeState.PlannedNegative:n++;break;case l.ProcessFlowNodeState.Planned:h++;break;case l.ProcessFlowNodeState.Critical:k++;break;case l.ProcessFlowNodeState.Neutral:default:N++;}}}var s=[{state:l.ProcessFlowNodeState.Positive,value:g},{state:l.ProcessFlowNodeState.Negative,value:n},{state:l.ProcessFlowNodeState.Neutral,value:N},{state:l.ProcessFlowNodeState.Planned,value:h},{state:l.ProcessFlowNodeState.Critical,value:k}];o.setState(s);}};
c.NodeElement._updateLanesFromNodes=function(p,d){var r=c.NodeElement._createMapFromLanes(p,null,false);var e=r.positionMap;var f=r.idMap;var n={};var t=p.slice();var g;var T={};var h=0;var i;for(i=0;i<d.length;i++){n[d[i].getNodeId()]=d[i];}for(i=0;i<d.length;i++){var o=d[i];var k=o.getChildren()||[];var m=1;var N=null;var s=null;for(var j=0;j<k.length;j++){var u=c._getChildIdByElement(k[j]);var w=n[u];if(w){if(o.getLaneId()===w.getLaneId()){N=w.getLaneId()+m;s=f[N];if(!s){var x=f[o.getLaneId()];s=c.NodeElement._createNewProcessFlowElement(x,N,x.getPosition()+m);f[s.getLaneId()]=s;t.splice(s.getPosition(),0,s);}w._setMergedLaneId(s.getLaneId());}c.NodeElement._changeLaneOfChildren(o.getLaneId(),w,n);}}if(s){T={};g=false;for(var y in e){if(s.getLaneId()===e[y].getLaneId()){g=true;break;}if(parseInt(y,10)>=s.getPosition()){var z=e[y];T[z.getPosition()+m]=z;}}if(!g){for(var A in T){h=parseInt(A,10);T[h]._setMergedPosition(h);}T[s.getPosition()]=s;for(var v=0;v<s.getPosition();v++){T[v]=e[v];}e=T;}}}return{lanes:t,nodes:d};};
c.NodeElement._changeLaneOfChildren=function(d,e,n){var f=e.getChildren();if(f){for(var i=0;i<f.length;i++){var s=c._getChildIdByElement(f[i]);var o=n[s];if(o&&o.getLaneId()===d){o._setMergedLaneId(e.getLaneId());c.NodeElement._changeLaneOfChildren(d,o,n);}}}};
c.NodeElement._createNewProcessFlowElement=function(o,n,d){return new a({laneId:n,iconSrc:o.getIconSrc(),text:o.getText(),state:o.getState(),position:d,zoomLevel:o.getZoomLevel()});};
c.NodeElement._createMapFromLanes=function(p,t,d){var o,e={},f={},g=p?p.length:0,i=0;if(!g){return{};}else{while(i<g){o=p[i];if(o&&o.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowLaneHeader"){e[o.getPosition()]=o;f[o.getLaneId()]=o;if(t){o.attachPress(t);}o._setHeaderMode(d);}i++;}return{positionMap:e,idMap:f};}};
c.NodeElement._createNodeElementsFromProcessFlowNodes=function(p,d){var e={},f={},g={},n,N=p?p.length:0,s,o,h=d?d.length:0,k,m=[],r,t,u,v,i,j,I={};if(N===0){return{elementById:{},elementsByLane:{}};}if(h===0){throw["No lane definition although there is a node definition."];}i=0;while(i<h){o=d[i];k=o.getLaneId();r=o.getPosition();if(e[k]){throw["The lane with id: "+k+" is defined at least twice. (Lane error)"];}e[k]=r;if(m&&Array.prototype.indexOf.call(m,r)>-1){throw["The position "+r+" is defined at least twice. (Lane error)."];}else{m.push(r);}f[k]=[];i++;}i=0;while(i<N){n=p[i];if(n&&n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){s=n.getNodeId();k=n.getLaneId();t=n.getChildren()||[];v=t.length;j=0;while(j<v){u=c._getChildIdByElement(t[j]);g[u]=g[u]||[];g[u].push(s);j++;}}i++;}i=0;while(i<N){n=p[i];if(n&&n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){s=n.getNodeId();if(!s){throw["There is a node which has no node id defined. (Title="+n.getTitle()+") and array position: "+i];}k=n.getLaneId();r=e[k];if(q.type(r)!=="number"){throw["For the node "+s+" position (lane) is not defined."];}if(!I[s]){I[s]=c.NodeElement._initNodeElement(s,r,n,g[s]);f[k].push(I[s]);}else{throw["The node id "+s+" is used second time."];}}i++;}return{elementById:I,elementsByLane:f};};
c.InternalMatrixCalculation=function(){this.iPositionX=0;this.iPositionY=0;this.nodePositions={};this.mapChildToNode={};};
c.InternalMatrixCalculation.prototype._optimizeMatrix=function(m,e){var d;do{d=false;for(var f=0;f<m[0].length;f++){for(var g=0;g<m.length-1;g++){if(!m[g][f]){var n=false;for(var i=g+1;i<m.length;i++){if(m[i][f]){n=true;break;}}if(!n){break;}if(this._optimizeLane(m,g,f,e)){d=true;}}}}}while(d);};
c.InternalMatrixCalculation.prototype._optimizeLane=function(m,r,d,e){for(var i=r+1;i<m.length;i++){if(m[i][d]){var n=m[i][d];if(this._verifyOptimizeLane(m,r,i,d,e)){m[r][d]=n;this.nodePositions[n.nodeId].x=r;m[i][d]=null;return true;}else{return false;}}}return false;};
c.InternalMatrixCalculation.prototype._verifyOptimizeLane=function(m,r,d,e,n){var N=m[d][e].oNode;var i,j,f,s;if(N&&N.getChildren()){f=m[d][e].oNode.getChildren();for(i=0;i<f.length;i++){s=c._getChildIdByElement(f[i]);var g=n[s].lane;for(j=e+1;j<g;j++){if(m[r][j]){return false;}}}}var o=m[d][e].nodeId;var O=this.nodePositions[o];var p=m[d][e].aParent;if(p){for(i=0;i<p.length;i++){s=c._getChildIdByElement(p[i]);if(e-1!==n[s].lane){return false;}var h=this.nodePositions[s];if(h.x>=O.x){return false;}}}for(i=0;i<e;i++){for(j=0;j<m.length;j++){if(m[j][i]&&m[j][i].oNode){s=m[j][i].nodeId;var t=this.nodePositions[s];f=m[j][i].oNode.getChildren();if(f){for(var k=0;k<f.length;k++){var u=c._getChildIdByElement(f[k]);var v=this.nodePositions[u];if(n[u].lane>e&&!((t.x<r&&v.x<r)||((t.x>r&&v.x>r)))){return false;}}}}}}if(N._hasChildren()){for(i=0;i<r;i++){if(m[i][e]){f=m[i][e].oNode.getChildren();if(f){for(j=0;j<f.length;j++){s=c._getChildIdByElement(f[j]);var E=n[s];var w=this.nodePositions[s];if(E.lane>e&&w.x>=r&&!N._hasChildrenWithNodeId(s)){return false;}}}}}}return true;};
c.InternalMatrixCalculation.prototype._resetPositions=function(){this.iPositionX=0;this.iPositionY=0;delete this.nodePositions;delete this.mapChildToNode;this.nodePositions={};this.mapChildToNode={};};
c.InternalMatrixCalculation.prototype._createMatrix=function(d){d=parseInt(d,10);var e=new Array(d||0);var i=d;if(arguments.length>1){var f=Array.prototype.slice.call(arguments,1);while(i--){e[d-1-i]=this._createMatrix.apply(this,f);}}return e;};
c.InternalMatrixCalculation.prototype._retrieveInfoFromInputArray=function(e){var i=0,r=[],E;Object.keys(e).forEach(function(s){E=e[s];if(!E.oParent&&!E.aParent){r.push(E);}if(i<E.lane){i=E.lane;}});return{"highestLanePosition":i,"rootElements":r};};
c.InternalMatrixCalculation.prototype._doubleColumnsInMatrix=function(d){var m=0,i;for(i=0;i<d.length;i++){m=m>d[i].length?m:d[i].length;}var t=new Array(d.length||0);for(i=0;i<t.length;i++){t[i]=new Array(m*2-1);for(var j=0;j<m;j++){if(d[i][j]){t[i][2*j]=d[i][j];}}}return t;};
c.InternalMatrixCalculation.prototype._removeEmptyLines=function(o){var d=0,i,j;for(i=0;i<o.length;i++){for(j=0;j<o[i].length;j++){if(o[i][j]){d++;break;}}}var r=this._createMatrix(d,o[0].length);for(i=0;i<d;i++){for(j=0;j<o[i].length;j++){r[i][j]=null;if(o[i][j]){r[i][j]=o[i][j];}}}return r;};
c.InternalMatrixCalculation.prototype._sortBasedOnChildren=function(n,e){var E={},d,s=null,f,i,g,S=[],h,j,p;if(n){n.forEach(function(o){var m=c._getChildIdByElement(o);d=E[e[m].lane];if(!d){E[e[m].lane]=d=[];}d.push(e[m]);});}else{return[];}var k=function(m,o){i=(m.oNode.getChildren()||[]).length;g=(o.oNode.getChildren()||[]).length;return g-i;};f=[];for(s in E){f.push(s);E[s].sort(k);}f=f.sort(function(m,o){return o-m;});var A=function(o){if(p.containsChildren(o)){j.push(o);}};f.forEach(function(m){h=E[m];if(h.length>1){j=[];p=h.shift();while(p){if(j.indexOf(p)<0){j.push(p);}h.forEach(A);p=h.shift();}S=S.concat(j);}else{S=S.concat(h);}});return S;};
c.InternalMatrixCalculation.prototype._calculatePathInMatrix=function(o){var d=null;for(var k in this.nodePositions){if(this.nodePositions.hasOwnProperty(k)){d=this.nodePositions[k];var e=d.c.oNode.getChildren();for(var i=0;e&&i<e.length;i++){var s=c._getChildIdByElement(e[i]);var p=this.nodePositions[s];o=this._calculateSingleNodeConnection(d,p,d.x,d.y,p.x,p.y,o);}}}return o;};
c.InternalMatrixCalculation.prototype._calculateSingleNodeConnection=function(n,d,p,e,f,g,o){var h=g-e;var v=f-p;if(h<0){throw["Problem with negative horizontal movement","Parent node is "+n.c.toString(),"Children node is "+d.c.toString(),"Coordinates : '"+p+"','"+e+"','"+f+"','"+g+"'"];}else if(v<=-1){var N=this._checkIfHorizontalLinePossible(o,f,e+2,g);var i=g-1;if(N){i=e+1;}var j=p;if(N){j=f;}o[p][i]=this._createConnectionElement(o[p][i],c._cellEdgeConstants.LU,n,d,false);o=this._writeVerticalLine(o,p,f,i,n,d);o[f][i]=this._createConnectionElement(o[f][i],c._cellEdgeConstants.UR,n,d,(i===g-1));var s=e+2;var E=g;if(!N){s=e+1;E=i+1;}o=this._writeHorizontalLine(o,j,s,E,n,d);}else if(v===0){o=this._writeHorizontalLine(o,p,e+1,g,n,d);}else if(v===1){o[p][e+1]=this._createConnectionElement(o[p][e+1],c._cellEdgeConstants.LD,n,d,false);o[f][e+1]=this._createConnectionElement(o[f][e+1],c._cellEdgeConstants.DR,n,d,(e+1)===(g-1));o=this._writeHorizontalLine(o,f,e+2,g,n,d);}else{o[p][e+1]=this._createConnectionElement(o[p][e+1],c._cellEdgeConstants.LD,n,d,false);o=this._writeVerticalLine(o,f,p,e+1,n,d);o[f][e+1]=this._createConnectionElement(o[f][e+1],c._cellEdgeConstants.DR,n,d,(e+1)===(g-1));o=this._writeHorizontalLine(o,f,e+2,g,n,d);}return o;};
c.InternalMatrixCalculation.prototype._writeVerticalLine=function(o,f,d,e,n,g){for(var j=f-1;j>d;j--){o[j][e]=this._createConnectionElement(o[j][e],c._cellEdgeConstants.DU,n,g,false);}return o;};
c.InternalMatrixCalculation.prototype._checkIfHorizontalLinePossible=function(o,r,f,d){var e=true;for(var i=f;i<d;i++){if(o[r][i]instanceof c.NodeElement){e=false;break;}}return e;};
c.InternalMatrixCalculation.prototype._writeHorizontalLine=function(o,r,f,d,n,e){var p=(r===e.x);if(!p){d--;}for(var i=f;i<d;i++){o[r][i]=this._createConnectionElement(o[r][i],c._cellEdgeConstants.LR,n,e,(i===(d-1))&&p);}return o;};
c.InternalMatrixCalculation.prototype._createConnectionElement=function(o,f,s,t,h){var n=o;if(!n){n=new P();}if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){var d=this._calculateConnectionDisplayStateBySourceAndTargetNode(s.c.oNode,t.c.oNode);var e={flowLine:f,targetNodeState:t.c.state,displayState:d,hasArrow:h};n.addConnectionData(e);}return n;};
c.InternalMatrixCalculation.prototype._calculateConnectionDisplayStateBySourceAndTargetNode=function(s,t){var S=s.getHighlighted();var d=s.getSelected();var e=s._getDimmed();var T=t.getHighlighted();var f=t.getSelected();var g=t._getDimmed();var o=l.ProcessFlowDisplayState.Regular;if(d&&f){o=l.ProcessFlowDisplayState.Selected;}else if(S&&T){o=l.ProcessFlowDisplayState.Highlighted;}else if((e||g)||S&&f||d&&T){o=l.ProcessFlowDisplayState.Dimmed;}return o;};
c.prototype.addNode=function(n){return this.addAggregation("nodes",n,false);};
c.prototype._switchCursors=function($,d,e){if($.hasClass(d)){$.removeClass(d);}if(!$.hasClass(e)){$.addClass(e);}};
c.prototype._clearHandlers=function($){$.bind(this._mousePreventEvents,q.proxy(this._handlePrevent,this));};
c.prototype._initZoomLevel=function(){if(this.$()){var w=this.$().width();if(w){if(w<M.ScreenSizes.tablet){this.setZoomLevel(l.ProcessFlowZoomLevel.Four);}else if(w<M.ScreenSizes.desktop){this.setZoomLevel(l.ProcessFlowZoomLevel.Three);}else{this.setZoomLevel(l.ProcessFlowZoomLevel.Two);}}}};
c.prototype._registerMouseWheel=function(e){var d=e.originalEvent.wheelDelta||-e.originalEvent.detail;if(d===0){d=-e.originalEvent.deltaY;}if(e&&!e.isDefaultPrevented()){e.preventDefault();e.originalEvent.returnValue=false;}var w=300;var f=function(){var i=new Date()-this._wheelTimestamp;if(i<w){this._wheelTimeout=setTimeout(function(){var m=f.bind(this);if(typeof m==="string"||m instanceof String){m=this[m];}m.apply(this,[]);}.bind(this),w-i);}else{this._wheelTimeout=null;this._wheelCalled=false;}};if(!this._wheelCalled){this._wheelCalled=true;if(d<0){this._isFocusChanged=true;this.zoomOut();}else{this._isFocusChanged=true;this.zoomIn();}}if(!this._wheelTimeout){this._wheelTimestamp=new Date();this._wheelTimeout=setTimeout(function(){var m=f.bind(this);if(typeof m==="string"||m instanceof String){m=this[m];}m.apply(this,[]);}.bind(this),w);}if(e&&!e.isPropagationStopped()){e.stopPropagation();}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation();}};
c.prototype._setFocusToNode=function(n){if(n){if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){q(document.getElementById(n.sId)).parent().focus();n._setNavigationFocus(true);n.rerender();}else if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){n.$().focus();n._setNavigationFocus(true);}}else if(this._lastNavigationFocusElement){if(this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){q(document.getElementById(this._lastNavigationFocusElement.sId)).parent().focus();this._lastNavigationFocusElement._setNavigationFocus(true);this._lastNavigationFocusElement.rerender();}else if(this._lastNavigationFocusElement.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){this._lastNavigationFocusElement.$().focus();this._lastNavigationFocusElement._setNavigationFocus(true);}}};
c.prototype._changeNavigationFocus=function(n,d){if(n&&d&&(n.getId()!==d.getId())){L.debug("Rerendering PREVIOUS node with id '"+n.getId()+"' navigation focus : "+n._getNavigationFocus());n._setNavigationFocus(false);if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){n.rerender();}}if(d){L.debug("Rerendering CURRENT node with id '"+d.getId()+"' navigation focus : "+d._getNavigationFocus());d._setNavigationFocus(true);if(d.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){d.rerender();}this._lastNavigationFocusElement=d;this._onFocusChanged();}};
c.prototype._moveOnePage=function(d,e){d=d||c._enumMoveDirection.UP;e=e||false;var p=0,f=0;var g=0,h=0;var n=0;var N=false,i,j,o;for(i=0;i<this._internalCalcMatrix.length;i++){for(j=0;j<this._internalCalcMatrix[i].length;j++){if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._internalCalcMatrix[i][j]._getNavigationFocus()){p=i;f=j;break;}else if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][j]._getVisibleLabel();if(o&&o._getNavigationFocus()){p=i;f=j;break;}}}}if(e){if(d===c._enumMoveDirection.UP){for(j=f-1;j>=0&&n<this._jumpOverElements;j--){if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[p][j].getHighlighted())){n++;g=p;h=j;N=true;}else if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[p][j]._getVisibleLabel();if(this._labelCanGetFocus(o)){n++;g=p;h=j;N=true;}}}}else if(d===c._enumMoveDirection.DOWN){for(j=f+1;j<this._internalCalcMatrix[p].length&&n<this._jumpOverElements;j++){if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[p][j].getHighlighted())){n++;g=p;h=j;N=true;}else if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[p][j]._getVisibleLabel();if(this._labelCanGetFocus(o)){n++;g=p;h=j;N=true;}}}}}else if(d===c._enumMoveDirection.UP){for(i=p-1;i>=0&&n<this._jumpOverElements;i--){if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][f].getHighlighted())){n++;g=i;h=f;N=true;}else if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][f]._getVisibleLabel();if(this._labelCanGetFocus(o)){n++;g=i;h=f;N=true;}}}}else if(d===c._enumMoveDirection.DOWN){for(i=p+1;i<this._internalCalcMatrix.length&&n<this._jumpOverElements;i++){if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][f].getHighlighted())){n++;g=i;h=f;N=true;}else if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][f]._getVisibleLabel();if(this._labelCanGetFocus(o)){n++;g=i;h=f;N=true;}}}}if(N){if(this._internalCalcMatrix[p][f]&&this._internalCalcMatrix[p][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){this._internalCalcMatrix[p][f]._getVisibleLabel()._setNavigationFocus(false);}else{this._internalCalcMatrix[p][f]._setNavigationFocus(false);}if(this._internalCalcMatrix[g][h]&&this._internalCalcMatrix[g][h].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[g][h]._getVisibleLabel();o._setNavigationFocus(true);this._lastNavigationFocusElement=o;}else{this._internalCalcMatrix[g][h]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[g][h];}}return N;};
c.prototype._moveHomeEnd=function(d,e){d=d||c._enumMoveDirection.RIGHT;e=e||false;var p=0,f=0;var g=0,h=0;var n=false,i,j,o;for(i=0;i<this._internalCalcMatrix.length;i++){for(j=0;j<this._internalCalcMatrix[i].length;j++){if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._internalCalcMatrix[i][j]._getNavigationFocus()){p=i;f=j;break;}else if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][j]._getVisibleLabel();if(o&&o._getNavigationFocus()){p=i;f=j;break;}}}}if(e){if(d===c._enumMoveDirection.LEFT){for(i=0;i<p;i++){if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][f].getHighlighted())){g=i;h=f;n=true;break;}else if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][f]._getVisibleLabel();if(this._labelCanGetFocus(o)){g=i;h=f;n=true;break;}}}}else if(d===c._enumMoveDirection.RIGHT){for(i=this._internalCalcMatrix.length-1;i>p;i--){if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[i][f].getHighlighted())){g=i;h=f;n=true;break;}else if(this._internalCalcMatrix[i][f]&&this._internalCalcMatrix[i][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][f]._getVisibleLabel();if(this._labelCanGetFocus(o)){g=i;h=f;n=true;break;}}}}}else if(d===c._enumMoveDirection.LEFT){for(j=0;j<f;j++){if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[p][j].getHighlighted())){g=p;h=j;n=true;break;}else if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[p][j]._getVisibleLabel();if(this._labelCanGetFocus(o)){g=p;h=j;n=true;break;}}}}else if(d===c._enumMoveDirection.RIGHT){for(j=this._internalCalcMatrix[p].length-1;j>f;j--){if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&(!this._bHighlightedMode||this._internalCalcMatrix[p][j].getHighlighted())){g=p;h=j;n=true;break;}else if(this._internalCalcMatrix[p][j]&&this._internalCalcMatrix[p][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[p][j]._getVisibleLabel();if(this._labelCanGetFocus(o)){g=p;h=j;n=true;break;}}}}if(n){if(this._internalCalcMatrix[p][f]&&this._internalCalcMatrix[p][f].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){this._internalCalcMatrix[p][f]._getVisibleLabel()._setNavigationFocus(false);}else{this._internalCalcMatrix[p][f]._setNavigationFocus(false);}if(this._internalCalcMatrix[g][h]&&this._internalCalcMatrix[g][h].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[g][h]._getVisibleLabel();o._setNavigationFocus(true);this._lastNavigationFocusElement=o;}else{this._internalCalcMatrix[g][h]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[g][h];}}return n;};
c.prototype._moveToNextElement=function(d,s){d=d||c._enumMoveDirection.RIGHT;if(sap.ui.getCore().getConfiguration().getRTL()){if(d===c._enumMoveDirection.RIGHT){d=c._enumMoveDirection.LEFT;}else if(d===c._enumMoveDirection.LEFT){d=c._enumMoveDirection.RIGHT;}}s=s||1;var f=false;var n=false;var p=0,e=1,i,j,o;if(!this._internalCalcMatrix){return false;}var g=0,h=0;for(i=0;i<this._internalCalcMatrix.length;i++){for(j=0;j<this._internalCalcMatrix[i].length;j++){if(this._internalCalcMatrix[i][j]){if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&this._internalCalcMatrix[i][j]._getNavigationFocus()){p=g=i;e=h=j;f=true;break;}else if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][j]._getVisibleLabel();if(o&&o._getNavigationFocus()&&o.getEnabled()){p=g=i;e=h=j;f=true;break;}}}}if(f){break;}}if(d===c._enumMoveDirection.RIGHT){for(i=g;i<this._internalCalcMatrix.length;i++){for(j=h+1;j<this._internalCalcMatrix[i].length;j++){if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][j].getHighlighted())){this._internalCalcMatrix[i][j]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][j];n=true;break;}}else if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][j]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}}h=0;if(n){break;}}}if(d===c._enumMoveDirection.LEFT){for(i=g;i>=0;i--){for(j=h-1;j>=0;j--){if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][j].getHighlighted())){this._lastNavigationFocusElement=this._internalCalcMatrix[i][j]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][j];n=true;break;}}else if(this._internalCalcMatrix[i][j]&&this._internalCalcMatrix[i][j].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][j]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}}if(i>0){h=this._internalCalcMatrix[i-1].length;}if(n){break;}}}var k,m,r;if(d===c._enumMoveDirection.UP){for(i=g-1;i>=0;i--){k=0;while(!n){m=h-k;r=h+k;if(m>=0&&this._internalCalcMatrix[i][m]&&this._internalCalcMatrix[i][m].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][m].getHighlighted())){this._internalCalcMatrix[i][m]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][m];n=true;break;}}else if(m>=0&&this._internalCalcMatrix[i][m]&&this._internalCalcMatrix[i][m].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][m]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}if(r<this._internalCalcMatrix[i].length&&this._internalCalcMatrix[i][r]&&this._internalCalcMatrix[i][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][r].getHighlighted())){this._internalCalcMatrix[i][r]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][r];n=true;break;}}else if(r>=0&&this._internalCalcMatrix[i][r]&&this._internalCalcMatrix[i][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][r]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}if(m<0&&r>this._internalCalcMatrix[i].length){break;}k++;}}}if(d===c._enumMoveDirection.DOWN){for(i=g+1;i<this._internalCalcMatrix.length;i++){k=0;while(!n){m=h-k;r=h+k;if(m>=0&&this._internalCalcMatrix[i][m]&&this._internalCalcMatrix[i][m].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][m].getHighlighted())){this._lastNavigationFocusElement=this._internalCalcMatrix[i][m]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][m];n=true;break;}}else if(m>=0&&this._internalCalcMatrix[i][m]&&this._internalCalcMatrix[i][m].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][m]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}if(r<this._internalCalcMatrix[i].length&&this._internalCalcMatrix[i][r]&&this._internalCalcMatrix[i][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){if(f&&(!this._bHighlightedMode||this._internalCalcMatrix[i][r].getHighlighted())){this._lastNavigationFocusElement=this._internalCalcMatrix[i][r]._setNavigationFocus(true);this._lastNavigationFocusElement=this._internalCalcMatrix[i][r];n=true;break;}}else if(r>=0&&this._internalCalcMatrix[i][r]&&this._internalCalcMatrix[i][r].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnection"){o=this._internalCalcMatrix[i][r]._getVisibleLabel();if(f&&this._labelCanGetFocus(o)){o._setNavigationFocus(true);this._lastNavigationFocusElement=o;n=true;break;}}if(m<0&&r>this._internalCalcMatrix[i].length){break;}k++;}}}if(n){if(this._internalCalcMatrix[p][e]&&this._internalCalcMatrix[p][e].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){this._internalCalcMatrix[p][e]._setNavigationFocus(false);}else{this._internalCalcMatrix[p][e]._getVisibleLabel()._setNavigationFocus(false);}}return n;};
c.prototype._getScrollContainerOnZoomChanged=function(s,$){s.scrollLeft=Math.round($.context.scrollWidth/s.scrollWidth*s.scrollLeft);s.scrollTop=Math.round($.context.scrollHeight/s.scrollHeight*s.scrollTop);s.scrollWidth=$.context.scrollWidth;s.scrollHeight=$.context.scrollHeight;return s;};
c.prototype._mergeLaneIdNodeStates=function(d){var p=0;var n=0;var N=0;var i=0;var e=0;for(var s=0;s<5;s++){for(var f=0;f<d.length;f++){switch(d[f][s].state){case l.ProcessFlowNodeState.Positive:p=p+d[f][s].value;break;case l.ProcessFlowNodeState.Negative:n=n+d[f][s].value;break;case l.ProcessFlowNodeState.Neutral:N=N+d[f][s].value;break;case l.ProcessFlowNodeState.Planned:i=i+d[f][s].value;break;case l.ProcessFlowNodeState.PlannedNegative:n=n+d[f][s].value;break;case l.ProcessFlowNodeState.Critical:e=e+d[f][s].value;break;default:break;}}}return[{state:l.ProcessFlowNodeState.Positive,value:p},{state:l.ProcessFlowNodeState.Negative,value:n},{state:l.ProcessFlowNodeState.Neutral,value:N},{state:l.ProcessFlowNodeState.Planned,value:i},{state:l.ProcessFlowNodeState.Critical,value:e}];};
c.prototype._setFocusOnHeader=function(n){var t=this.$("thead");if(n){t.focus();t.addClass("sapSuiteUiCommonsPFHeaderFocused");this._headerHasFocus=true;}else{t.removeClass("sapSuiteUiCommonsPFHeaderFocused");this._headerHasFocus=false;}};
c.prototype._scroll=function(d,e){var o=this._getScrollContainer().get(0);var s=o.scrollLeft;if(!D.browser.msie&&!D.browser.edge&&this._bRtl){d=-d;}var S=s+d;q(o).stop(true,true).animate({scrollLeft:S},e,q.proxy(this._adjustAndShowArrow,this));};
c.prototype._adjustAndShowArrow=function(){this._checkOverflow(this._getScrollContainer().get(0),this.$());if(this.getScrollable()){this._moveArrowAndCounterVertical();}if(this._isFocusChanged){this._setFocusToNode(this._lastNavigationFocusElement);this._isFocusChanged=false;}};
c.prototype._getScrollingArrow=function(d){var s;if(D.system.desktop){s="sap-icon://navigation-"+d+"-arrow";}else{s="sap-icon://slim-arrow-"+d;}var p={src:s};var e="sapPFHArrowScrollLeft";var r="sapPFHArrowScrollRight";var f=["sapPFHArrowScroll",e];var g=["sapPFHArrowScroll",r];if(d===c._constants.left){if(!this._oArrowLeft){this._oArrowLeft=M.ImageHelper.getImageControl(this.getId()+c._constants.arrowScrollLeftMinus,null,this,p,f);}return this._oArrowLeft;}if(d===c._constants.right){if(!this._oArrowRight){this._oArrowRight=M.ImageHelper.getImageControl(this.getId()+c._constants.arrowScrollRightMinus,null,this,p,g);}return this._oArrowRight;}};
c.prototype._checkScrolling=function(s,$){var S=false;if(s){if(s.scrollWidth>s.clientWidth){S=true;}}if(this._arrowScrollable!==S){$.toggleClass("sapPFHScrollable",S);$.toggleClass("sapPFHNotScrollable",!S);this._arrowScrollable=S;}return S;};
c.prototype._updateLeftCounter=function(){var s;if(!this._bRtl){s=this._getScrollContainer().scrollLeft();}else{s=this._getScrollContainer().scrollRightRTL();}var i=Math.round(s/this._scrollStep);this.$(c._constants.counterLeft).text(i.toString());return i;};
c.prototype._updateRightCounter=function(s,d){var S;var i;if(!this._bRtl){S=this._getScrollContainer().scrollLeft();i=Math.round((d-S-s)/this._scrollStep);}else{S=this._getScrollContainer().scrollLeftRTL();i=Math.round(S/this._scrollStep);}this.$(c._constants.counterRight).text(i.toString());return i;};
c.prototype._moveArrowAndCounterVertical=function(){var s=this._getScrollContainer().scrollTop();if(s>0){var A=this._iInitialArrowTop-s;var i=this._iInitialCounterTop-s;var d=this._iInitialCounterTop-this._iInitialArrowTop;if(A>0){this.$(c._constants.arrowScrollRight).css(c._constants.top,A+c._constants.px);this.$(c._constants.arrowScrollLeft).css(c._constants.top,A+c._constants.px);}else{this.$(c._constants.arrowScrollRight).css(c._constants.top,"0px");this.$(c._constants.arrowScrollLeft).css(c._constants.top,"0px");}if(i>d){this.$(c._constants.counterRight).css(c._constants.top,i+c._constants.px);this.$(c._constants.counterLeft).css(c._constants.top,i+c._constants.px);}else{this.$(c._constants.counterRight).css(c._constants.top,d+c._constants.px);this.$(c._constants.counterLeft).css(c._constants.top,d+c._constants.px);}}else{this.$(c._constants.arrowScrollRight).css(c._constants.top,this._iInitialArrowTop+c._constants.px);this.$(c._constants.arrowScrollLeft).css(c._constants.top,this._iInitialArrowTop+c._constants.px);this.$(c._constants.counterRight).css(c._constants.top,this._iInitialCounterTop+c._constants.px);this.$(c._constants.counterLeft).css(c._constants.top,this._iInitialCounterTop+c._constants.px);}};
c.prototype._checkOverflow=function(s,$){if(this._checkScrolling(s,$)&&s){this._setScrollWidth();var S=false;var d=false;var o=20;var i=this._getScrollContainer().scrollLeft();var e=s.scrollWidth;var f=s.clientWidth;if(Math.abs(e-f)===1){e=f;}if(!this._bRtl){if(i>o){S=true;}if((e>f)&&(i+f+o<e)){d=true;}}else{var g=q(s);if(g.scrollLeftRTL()>o){d=true;}if(g.scrollRightRTL()>o){S=true;}}this._updateLeftCounter();this._updateRightCounter(f,e);if(d!==this._bPreviousScrollForward||(S!==this._bPreviousScrollBack)){this._bPreviousScrollForward=d;this._bPreviousScrollBack=S;$.toggleClass("sapPFHScrollBack",S);$.toggleClass("sapPFHNoScrollBack",!S);$.toggleClass("sapPFHScrollForward",d);$.toggleClass("sapPFHNoScrollForward",!d);}}else{this._bPreviousScrollForward=false;this._bPreviousScrollBack=false;}};
c.prototype._setParentForNodes=function(d){var I=d?d.length:0;var e;var i,j;for(var o in d){d[o].removeAllAssociation(c._constants.parents,true);}for(i=0;i<I;i++){e=d[i].getChildren();if(e){for(j=0;j<e.length;j++){var f=this._getNode(c._getChildIdByElement(e[j]),d);if(f){f.addAssociation(c._constants.parents,d[i],true);}}}}};
c.prototype._getConnectionsMap=function(){var d=[];var n=this.getNodes();for(var i=0;i<n.length;i++){var p=this._getPositionOfNodeInMatrix(this._internalCalcMatrix,n[i]);var e=n[i].getChildren();if(e){for(var j=0;j<e.length;j++){var o={};o.sourceNode=n[i];var f=c._getChildIdByElement(e[j]);var g=this._getNode(f,n);if(g){if(typeof e[j]==="object"){o.label=e[j].connectionLabel;}o.targetNode=g;var h=this._getPositionOfNodeInMatrix(this._internalCalcMatrix,o.targetNode);o.connectionParts=this._calculateConnectionParts(p,h);d.push(o);}}}}this._internalConnectionMap=d;return d;};
c.prototype._getPositionOfNodeInMatrix=function(m,n){var p={};for(var i=0;i<m.length;i++){var d=m[i];for(var j=0;j<d.length;j++){var e=d[j];if(e&&e.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&e.getNodeId()===n.getNodeId()){p.y=i;p.x=j;return p;}}}return p;};
c.prototype._calculateConnectionParts=function(p,d){var e=[];var s=p.y;var S=p.x;S++;e.push({x:S,y:s});if(d.y>=p.y){while(s<d.y){s++;e.push({x:S,y:s});}}else{while(s>d.y){s--;e.push({x:S,y:s});}}while(S<d.x-1){S++;e.push({x:S,y:s});}return e;};
c.prototype._getConnectionMapEntries=function(d){var f=[];var o=null;var e=null;if(this._internalConnectionMap){for(var i=0;i<this._internalConnectionMap.length;i++){e=this._internalConnectionMap[i];if(e.label&&e.label.getId()===d.getId()){o=e;break;}}e=null;for(var j=0;j<this._internalConnectionMap.length;j++){e=this._internalConnectionMap[j];if(e.targetNode&&e.targetNode.getNodeId()===o.targetNode.getNodeId()){f.push(e);}}}return f;};
c.prototype._createLabelPressEventArgs=function(d,e){var E={};var f=[];if(e){for(var i=0;i<e.length;i++){var o={sourceNode:e[i].sourceNode,targetNode:e[i].targetNode,label:e[i].label};f.push(o);}}E.selectedLabel=d;E.connections=f;return E;};
c.prototype.applyNodeDisplayState=function(){var I=this.getNodes(),n=I?I.length:0,i=0;if(n!==0){while(i<n){I[i]._setRegularState();i++;}i=0;while((i<n)&&!I[i].getHighlighted()&&!I[i].getSelected()){i++;}if(i<n){i=0;while(i<n){if(!I[i].getHighlighted()&&!I[i].getSelected()){I[i]._setDimmedState();}i++;}}}};
c.InternalMatrixCalculation.prototype.checkInputNodeConsistency=function(e){var E=[],j,s,i,d,o,f=0;Object.keys(e).forEach(function(g){o=e[g];d=o.oNode.getChildren();i=d?d.length:0;if(o.oNode.getFocused()){f++;}j=0;while(j<i){s=c._getChildIdByElement(d[j]);if(!e[s]){E.push("Node identificator "+s+" used in children definition is not presented as the node itself. Element : "+o.nodeId);}j++;}});if(E.length>0){throw E;}return f>1;};
c.InternalMatrixCalculation.prototype.processCurrentElement=function(d,e,m){var E,f,n=true,g=true;if(d.isProcessed){return m;}this.nodePositions[d.nodeId]={"c":d,"x":this.iPositionX,"y":this.iPositionY*2};m[this.iPositionX][this.iPositionY++]=d;E=d.oNode.getChildren();d.isProcessed=true;f=this._sortBasedOnChildren(E,e);if(f){f.forEach(function(o){if(!o.isProcessed){g=false;while(this.iPositionY<o.lane){m[this.iPositionX][this.iPositionY++]=null;}m=this.processCurrentElement(o,e,m);}else if(n&&g){this.iPositionX++;n=false;}}.bind(this));}if(!E||g){if(n){this.iPositionX++;}this.iPositionY=0;}return m;};
c.prototype.getZoomLevel=function(){return this._zoomLevel;};
c.prototype.setZoomLevel=function(z){if(!this._getScrollContainer()){return;}var $=this._getScrollContainer();var s=null;var S;if($.context){s={scrollWidth:$.context.scrollWidth,scrollHeight:$.context.scrollHeight,scrollLeft:$.context.scrollLeft,scrollTop:$.context.scrollTop};S=s;if(this._zoomLevel===z){this._isInitialZoomLevelNeeded=false;return;}}if(!(z in l.ProcessFlowZoomLevel)){this._handleException("\""+z+"\" is not a valid entry of the enumeration for property zoom level of ProcessFlow");return;}this._zoomLevel=z;if(this._isInitialZoomLevelNeeded){this._isInitialZoomLevelNeeded=false;this.invalidate();}else{this.rerender();}if(s){if(D.support.touch||q.sap.simulateMobileOnDesktop){var h=parseInt(this._getScrollContainer().css("height").slice(0,-2),10);var w=parseInt(this._getScrollContainer().css("width").slice(0,-2),10);var i=this._getScrollContainer()[0].scrollHeight;var d=this._getScrollContainer()[0].scrollWidth;if(this.getScrollable()&&(i>h||d>w)){this._switchCursors(this._getScrollContainer(),this._defaultCursorClass,this._grabCursorClass);this._getScrollContainer().css("overflow","auto");}}$=this._getScrollContainer();S=this._getScrollContainerOnZoomChanged(s,$);$.scrollLeft(S.scrollLeft);$.scrollTop(S.scrollTop);this._adjustAndShowArrow();if(this._isFocusChanged){this._setFocusToNode();this._isFocusChanged=false;}}};
c.prototype.zoomOut=function(){var s=this.getZoomLevel();var n=s;switch(s){case(l.ProcessFlowZoomLevel.One):n=l.ProcessFlowZoomLevel.Two;break;case(l.ProcessFlowZoomLevel.Two):n=l.ProcessFlowZoomLevel.Three;break;case(l.ProcessFlowZoomLevel.Three):n=l.ProcessFlowZoomLevel.Four;break;default:break;}this.setZoomLevel(n);return this.getZoomLevel();};
c.prototype.zoomIn=function(){var s=this.getZoomLevel();var n=s;switch(s){case(l.ProcessFlowZoomLevel.Four):n=l.ProcessFlowZoomLevel.Three;break;case(l.ProcessFlowZoomLevel.Three):n=l.ProcessFlowZoomLevel.Two;break;case(l.ProcessFlowZoomLevel.Two):n=l.ProcessFlowZoomLevel.One;break;default:break;}this.setZoomLevel(n);return this.getZoomLevel();};
c.prototype.updateModel=function(){this._lastNavigationFocusElement=null;var n=this.getNodes();n.forEach(function(e){e._mergedLaneId=false;});var d=this.getLanes();d.forEach(function(e){e._mergedLanePosition=false;});this._internalLanes=[];if(this._isHeaderMode()){var o=this.getBindingInfo("lanes");this.getModel(o.model).refresh();}else{var N=this.getBindingInfo("nodes");this.getModel(N.model).refresh();}this.rerender();};
c.prototype.optimizeLayout=function(i){if(i===undefined){i=true;}if(this._isLayoutOptimized!==i){this._isLayoutOptimized=i;this.updateModel();}return this;};
c.prototype.getFocusedNode=function(){return this._lastNavigationFocusElement&&this._lastNavigationFocusElement.sId;};
c.prototype.updateNodesOnly=function(){var n=this.getBindingInfo("nodes");this.getModel(n.model).refresh();this.rerender();};
c.prototype.setSelectedPath=function(s,t){var n=this.getNodes(),i;if(n){if(s&&t){var d=0;for(i=0;i<n.length;i++){if(n[i].getNodeId()===s||n[i].getNodeId()===t){n[i].setSelected(true);d++;}else{n[i].setSelected(false);}}if(d===2){this.rerender();}}else if(!s&&!t){for(i=0;i<n.length;i++){n[i].setSelected(false);}this.rerender();}}};
c.prototype.setShowLabels=function(v){var o=this.getShowLabels();if(o&&!v){this.setProperty("showLabels",v,true);if(!this.getShowLabels()){this.setSelectedPath(null,null);}}else{this.setProperty("showLabels",v);}return this;};
c.prototype.setFocusToLabel=function(d){this._changeNavigationFocus(this._lastNavigationFocusElement,d);};
c.prototype._labelCanGetFocus=function(d){return d&&d.getEnabled()&&(!this._bHighlightedMode||d._bHighlighted);};
c.prototype.getNode=function(n){var N=this.getNodes();for(var i=0;i<N.length;i++){if(N[i].getProperty("nodeId")===n){return N[i];}}};
c.prototype.getLane=function(s){var d=this.getLanes();for(var i=0;i<d.length;i++){if(d[i].getProperty("laneId")===s){return d[i];}}};
return c;});
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowConnection',['./library','sap/ui/core/Control','./ProcessFlowConnectionRenderer'],function(l,C,P){"use strict";
var a=C.extend("sap.suite.ui.commons.ProcessFlowConnection",{metadata:{library:"sap.suite.ui.commons",properties:{drawData:{type:"object[]",group:"Misc",defaultValue:null},zoomLevel:{type:"sap.suite.ui.commons.ProcessFlowZoomLevel",group:"Misc",defaultValue:"Two"},type:{type:"sap.suite.ui.commons.ProcessFlowConnectionType",group:"Appearance",defaultValue:"Normal",deprecated:true},state:{type:"sap.suite.ui.commons.ProcessFlowConnectionState",group:"Appearance",defaultValue:"Regular",deprecated:true}},defaultAggregation:"_labels",aggregations:{_labels:{type:"sap.suite.ui.commons.ProcessFlowConnectionLabel",multiple:true,singularName:"_label",visibility:"hidden"}}}});
a.prototype._oResBundle=null;a.prototype._showLabels=false;a.prototype._oStateOrderMapping=null;
a.prototype.init=function(){if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");}this._oStateOrderMapping={};this._oStateOrderMapping[l.ProcessFlowConnectionLabelState.Neutral]=1;this._oStateOrderMapping[l.ProcessFlowConnectionLabelState.Positive]=2;this._oStateOrderMapping[l.ProcessFlowConnectionLabelState.Critical]=3;this._oStateOrderMapping[l.ProcessFlowConnectionLabelState.Negative]=4;};
a.prototype._getAriaText=function(t){var A="";var s=" "+this._oResBundle.getText('PF_CONNECTION_ENDS');if(this._isHorizontalLine(t)){A=this._oResBundle.getText('PF_CONNECTION_HORIZONTAL_LINE');if(t.arrow){A+=s;}}else if(this._isVerticalLine(t)){A=this._oResBundle.getText('PF_CONNECTION_VERTICAL_LINE');if(t.arrow){A+=s;}}else{A=this._oResBundle.getText('PF_CONNECTION_BRANCH');if(t.arrow){A+=s;}}return A;};
a.prototype._getVisibleLabel=function(){var v=null;if(this.getAggregation("_labels")){var L=this.getAggregation("_labels");for(var i=0;i<L.length;i++){var c=L[i];if(c&&c.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowConnectionLabel"){if(v){if(this._oStateOrderMapping[v.getState()]<this._oStateOrderMapping[c.getState()]){v=c;}else if(this._oStateOrderMapping[v.getState()]===this._oStateOrderMapping[c.getState()]){if(v.getPriority()<c.getPriority()){v=c;}}}else{v=c;}}}}return v;};
a.prototype._getShowLabels=function(){return a.prototype._showLabels;};
a.prototype._setShowLabels=function(s){a.prototype._showLabels=s;};
a.prototype._traverseConnectionData=function(){var c=this.getDrawData();if(!c){return{};}var t=this._createConnection(c);if(this.getAggregation("_labels")){t.labels=this.getAggregation("_labels");}return t;};
a.prototype._isVerticalLine=function(c){return c.hasOwnProperty("left")&&!c.left.draw&&c.hasOwnProperty("right")&&!c.right.draw&&c.hasOwnProperty("top")&&c.top.draw&&c.hasOwnProperty("bottom")&&c.bottom.draw;};
a.prototype._isHorizontalLine=function(c){return c.hasOwnProperty("left")&&c.left.draw&&c.hasOwnProperty("right")&&c.right.draw&&c.hasOwnProperty("top")&&!c.top.draw&&c.hasOwnProperty("bottom")&&!c.bottom.draw;};
a.prototype._createConnection=function(c){var L={draw:false,type:"",state:""};var o={right:L,top:L,left:L,bottom:L,arrow:false};for(var i=0;i<c.length;i++){o.right=this._createLine(c[i],"r",o.right);o.top=this._createLine(c[i],"t",o.top);o.left=this._createLine(c[i],"l",o.left);o.bottom=this._createLine(c[i],"b",o.bottom);if(c[i].flowLine.indexOf("r")>=0){if(c[i].hasArrow){o.arrow=true;}}}return o;};
a.prototype._createLine=function(c,d,b){var L={draw:b.draw,type:b.type,state:b.state};if(c.flowLine.indexOf(d)>=0){L.draw=true;if(c.targetNodeState===l.ProcessFlowNodeState.Neutral||c.targetNodeState===l.ProcessFlowNodeState.Positive||c.targetNodeState===l.ProcessFlowNodeState.Negative||c.targetNodeState===l.ProcessFlowNodeState.Critical){L.type=l.ProcessFlowConnectionType.Normal;}else if(c.targetNodeState===l.ProcessFlowNodeState.Planned||c.targetNodeState===l.ProcessFlowNodeState.PlannedNegative){if(L.type!==l.ProcessFlowConnectionType.Normal){L.type=l.ProcessFlowConnectionType.Planned;}}if(c.displayState===l.ProcessFlowDisplayState.Selected||c.displayState===l.ProcessFlowDisplayState.SelectedHighlighted||c.displayState===l.ProcessFlowDisplayState.SelectedHighlightedFocused||c.displayState===l.ProcessFlowDisplayState.SelectedFocused){L.state=l.ProcessFlowConnectionState.Selected;}else if(c.displayState===l.ProcessFlowDisplayState.Highlighted||c.displayState===l.ProcessFlowDisplayState.HighlightedFocused){if(L.state!==l.ProcessFlowConnectionState.Selected){L.state=l.ProcessFlowConnectionState.Highlighted;}}else if(c.displayState===l.ProcessFlowDisplayState.Regular||c.displayState===l.ProcessFlowDisplayState.RegularFocused){if(L.state!==l.ProcessFlowConnectionState.Highlighted&&L.state!==l.ProcessFlowConnectionState.Selected){L.state=l.ProcessFlowConnectionState.Regular;}}else if(c.displayState===l.ProcessFlowDisplayState.Dimmed||c.displayState===l.ProcessFlowDisplayState.DimmedFocused){if(L.state!==l.ProcessFlowConnectionState.Highlighted&&L.state!==l.ProcessFlowConnectionState.Regular&&L.state!==l.ProcessFlowConnectionState.Selected){L.state=l.ProcessFlowConnectionState.Dimmed;}}}return L;};
a.prototype.addConnectionData=function(s){var t=this.getDrawData();if(!t){t=[];}t.push(s);this.setDrawData(t);return t;};
a.prototype.destroyAggregation=function(A,s){this.removeAllAggregation("_labels",true);};
return a;});
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowConnectionLabel',['sap/m/Button','./library','sap/ui/core/InvisibleText','./ProcessFlowConnectionLabelRenderer'],function(B,l,I,P){"use strict";
var a=B.extend("sap.suite.ui.commons.ProcessFlowConnectionLabel",{metadata:{library:"sap.suite.ui.commons",properties:{priority:{type:"int",group:"Misc",defaultValue:0},state:{type:"sap.suite.ui.commons.ProcessFlowConnectionLabelState",group:"Appearance",defaultValue:"Neutral"}}}});
a.prototype._bNavigationFocus=false;a.prototype._bSelected=false;a.prototype._bHighlighted=false;a.prototype.ACTIVE_CSS_CLASS="sapSuiteUiCommonsProcessFlowLabelActive";a.prototype.HOVER_CSS_CLASS="sapSuiteUiCommonsProcessFlowLabelHover";a.prototype.MOUSE_EVENTS="mouseenter mousedown mouseup mouseleave";a.prototype._oResBundle=null;a.prototype._bDimmed=false;
a.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.addStyleClass("sapSuiteUiCommonsProcessFlowConnectionLabel");if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");}};
a.prototype.exit=function(){this.$().unbind(this.MOUSE_EVENTS,this._handleEvents);};
a.prototype.onBeforeRendering=function(){this.$().unbind(this.MOUSE_EVENTS,this._handleEvents);this._configureStateClasses();this._setLabelWidth();this._setAriaDetails();};
a.prototype.onAfterRendering=function(){if(!this.getText()){if(this.$().children().hasClass("sapMBtnIconFirst")){this.$().children().removeClass("sapMBtnIconFirst");}}this.$().bind(this.MOUSE_EVENTS,this._handleEvents.bind(this));};
a.prototype._handleEvents=function(e){var p=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!p){return;}switch(e.type){case p._mouseEvents.mouseEnter:this.$().find("*").addClass(this.HOVER_CSS_CLASS);break;case p._mouseEvents.mouseDown:this.$().find("*").removeClass(this.HOVER_CSS_CLASS);this.$().find("*").addClass(this.ACTIVE_CSS_CLASS);break;case p._mouseEvents.mouseUp:this.$().find("*").removeClass(this.ACTIVE_CSS_CLASS);this.$().find("*").addClass(this.HOVER_CSS_CLASS);break;case p._mouseEvents.mouseLeave:this.$().find("*").removeClass(this.ACTIVE_CSS_CLASS);this.$().find("*").removeClass(this.HOVER_CSS_CLASS);break;default:}};
a.prototype._getNavigationFocus=function(){return this._bNavigationFocus;};
a.prototype._setNavigationFocus=function(n){this._bNavigationFocus=n;};
a.prototype._setSelected=function(s){this._bSelected=s;};
a.prototype._getSelected=function(){return this._bSelected;};
a.prototype._setHighlighted=function(h){this._bHighlighted=h;};
a.prototype._getHighlighted=function(){return this._bHighlighted;};
a.prototype._setDimmed=function(d){this._bDimmed=d;};
a.prototype._getDimmed=function(){return this._bDimmed;};
a.prototype.setWidth=function(){return this;};
a.prototype.setIconFirst=function(){return this;};
a.prototype._setLabelWidth=function(){if(this.getIcon()){if(this.getText()){this.setProperty("width","4.5rem",false);}else{this.setProperty("width","2rem",false);}}else if(this.getText()&&this.getText().length>2){this.setProperty("width","4.5rem",false);}else{this.setProperty("width","2rem",false);}};
a.prototype._configureStateClasses=function(){switch(this.getState()){case l.ProcessFlowConnectionLabelState.Positive:this.addStyleClass("sapSuiteUiCommonsLabelStatePositive");break;case l.ProcessFlowConnectionLabelState.Critical:this.addStyleClass("sapSuiteUiCommonsLabelStateCritical");break;case l.ProcessFlowConnectionLabelState.Negative:this.addStyleClass("sapSuiteUiCommonsLabelStateNegative");break;default:this.addStyleClass("sapSuiteUiCommonsLabelStateNeutral");}if(this._getDimmed()&&this.getEnabled()){this.addStyleClass("sapSuiteUiCommonsLabelDimmed");}else{this.removeStyleClass("sapSuiteUiCommonsLabelDimmed");}if(this._getSelected()){this.addStyleClass("sapSuiteUiCommonsLabelSelected");}else{this.removeStyleClass("sapSuiteUiCommonsLabelSelected");}if(this._getHighlighted()){this.addStyleClass("sapSuiteUiCommonsLabelHighlighted");}else{this.removeStyleClass("sapSuiteUiCommonsLabelHighlighted");}};
a.prototype._setAriaDetails=function(){var i=new I();i.setText(this._oResBundle.getText('PF_CONNECTIONLABEL'));i.toStatic();var o=new I();o.setText(this.getText());o.toStatic();if(this.getAriaLabelledBy().length===0){this.addAriaLabelledBy(i);this.addAriaLabelledBy(o);}};
return a;});
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowConnectionLabelRenderer',['sap/m/ButtonRenderer','sap/ui/core/Renderer'],function(B,R){"use strict";var P=R.extend(B);return P;},true);
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowConnectionRenderer',['./library'],function(l){"use strict";var P={};
P.render=function(r,c){var C=c._traverseConnectionData();var z=c.getZoomLevel();r.write("<div");r.writeAttribute("id",c.getId());r.writeAttribute("role","presentation");r.writeAttributeEscaped("aria-label",c._getAriaText(C));r.write(">");if(c._isHorizontalLine(C)){this._writeHorizontalLine(r,C,z,c);}else if(c._isVerticalLine(C)){this._writeVerticalLine(r,C,z,c._getShowLabels());}else{this._writeSpecialLine(r,C,z,c);}r.write("</div>");};
P._writeVerticalLine=function(r,c,z,s){r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(s){r.addClass("sapSuiteUiCommonsPFWithLabel");}switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1Width");r.addClass("sapSuiteUiCommonsBoxWideZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3Width");r.addClass("sapSuiteUiCommonsBoxWideZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4Width");r.addClass("sapSuiteUiCommonsBoxWideZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2Width");r.addClass("sapSuiteUiCommonsBoxWideZoom2Height");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");r.addClass("sapSuiteUiCommonsBoxMiddleBorderWidth");switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxWideZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxWideZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxWideZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxWideZoom2Height");}r.addClass("sapSuiteUiCommonsBorderLeft");if(c.top.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderLeftTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderLeftTypeNormal");}if(c.top.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderLeftStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.top.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderLeftStateDimmed");}else if(c.top.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderLeftStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderLeftStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}r.writeClasses();r.write(">");r.write("</div>");P._resetFloat(r);};
P._writeHorizontalLine=function(r,c,z,C){r.write("<div");r.addClass("sapSuiteUiCommonsBoxWideWidth");switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxTopZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxTopZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxTopZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxTopZoom2Height");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");if(c.arrow){r.addClass("sapSuiteUiCommonsParentPosition");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxWideArrowZoom1Width");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxWideArrowZoom3Width");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxWideArrowZoom4Width");break;default:r.addClass("sapSuiteUiCommonsBoxWideArrowZoom2Width");}}else{r.addClass("sapSuiteUiCommonsBoxWideWidth");}r.addClass("sapSuiteUiCommonsBoxMiddleBorderHeight");r.addClass("sapSuiteUiCommonsBorderBottom");if(c.right.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderBottomTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderBottomTypeNormal");}if(c.right.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderBottomStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.right.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderBottomStateDimmed");}else if(c.right.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderBottomStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderBottomStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}r.writeClasses();r.write(">");if(c.labels&&C._showLabels){P._renderLabel(r,C,c);}if(c.arrow){r.write("<div");r.addClass("sapSuiteUiCommonsArrowRight");if(c.right.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderLeftStateHighlighted");}else if(c.right.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderLeftStateDimmed");}else if(c.right.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderLeftStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderLeftStateRegular");}r.writeClasses();r.write(">");r.write("</div>");}r.write("</div>");};
P._writeSpecialLine=function(r,c,z,C){P._writeFirstRowOfSpecialLine(r,c,z,C);P._writeSecondRowOfSpecialLine(r,c,z,C);P._writeThirdRowOfSpecialLine(r,c,z,C);P._resetFloat(r);};
P._writeFirstRowOfSpecialLine=function(r,c,z,C){r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1Width");r.addClass("sapSuiteUiCommonsBoxTopZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3Width");r.addClass("sapSuiteUiCommonsBoxTopZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4Width");r.addClass("sapSuiteUiCommonsBoxTopZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2Width");r.addClass("sapSuiteUiCommonsBoxTopZoom2Height");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}r.addClass("sapSuiteUiCommonsFloatLeft");switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxTopZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxTopZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxTopZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxTopZoom2Height");}if(c.hasOwnProperty("top")&&c.top.draw){r.addClass("sapSuiteUiCommonsBoxMiddleBorderWidth");r.addClass("sapSuiteUiCommonsBorderLeft");if(c.top.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderLeftTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderLeftTypeNormal");}if(c.top.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderLeftStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.top.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderLeftStateDimmed");}else if(c.top.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderLeftStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderLeftStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}}else{r.addClass("sapSuiteUiCommonsBoxMiddleWidth");}r.writeClasses();r.write(">");r.write("</div>");};
P._writeSecondRowOfSpecialLine=function(r,c,z,C){P._resetFloat(r);r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1Width");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3Width");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4Width");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2Width");}if(c.hasOwnProperty("left")&&c.left.draw){r.addClass("sapSuiteUiCommonsBoxMiddleBorderHeight");r.addClass("sapSuiteUiCommonsBorderBottom");if(c.left.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderBottomTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderBottomTypeNormal");}if(c.left.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderBottomStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.left.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderBottomStateDimmed");}else if(c.left.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderBottomStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderBottomStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}}else{r.addClass("sapSuiteUiCommonsBoxMiddleHeight");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}r.addClass("sapSuiteUiCommonsBoxMiddleWidth");r.addClass("sapSuiteUiCommonsBoxMiddleBorderHeight");if((c.hasOwnProperty("left")&&c.left.draw)||(c.hasOwnProperty("right")&&c.right.draw)||(c.hasOwnProperty("top")&&c.top.draw)||(c.hasOwnProperty("bottom")&&c.bottom.draw)){r.addClass("sapSuiteUiCommonsBorderBottom");r.addClass("sapSuiteUiCommonsBorderBottomTypeNormal");if(c.right.state===l.ProcessFlowConnectionState.Highlighted||c.top.state===l.ProcessFlowConnectionState.Highlighted||c.left.state===l.ProcessFlowConnectionState.Highlighted||c.bottom.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderBottomStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.right.state===l.ProcessFlowConnectionState.Selected||c.top.state===l.ProcessFlowConnectionState.Selected||c.left.state===l.ProcessFlowConnectionState.Selected||c.bottom.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderBottomStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else if(c.right.state===l.ProcessFlowConnectionState.Dimmed||c.top.state===l.ProcessFlowConnectionState.Dimmed||c.left.state===l.ProcessFlowConnectionState.Dimmed||c.bottom.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderBottomStateDimmed");}else{r.addClass("sapSuiteUiCommonsBorderBottomStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}if(c.arrow){r.addClass("sapSuiteUiCommonsParentPosition");switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxArrowZoom1Width");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxArrowZoom3Width");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxArrowZoom4Width");break;default:r.addClass("sapSuiteUiCommonsBoxArrowZoom2Width");}}else if(C._getShowLabels()){switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1WidthWithLabel");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3WidthWithLabel");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4WidthWithLabel");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2WidthWithLabel");}}else{switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1Width");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3Width");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4Width");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2Width");}}if(c.hasOwnProperty("right")&&c.right.draw){r.addClass("sapSuiteUiCommonsBoxMiddleBorderHeight");r.addClass("sapSuiteUiCommonsBorderBottom");if(c.right.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderBottomTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderBottomTypeNormal");}if(c.right.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderBottomStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.right.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderBottomStateDimmed");}else if(c.right.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderBottomStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderBottomStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}}else{r.addClass("sapSuiteUiCommonsBoxMiddleHeight");}r.writeClasses();r.write(">");if(c.labels&&C._showLabels){P._renderLabel(r,C,c);}if(c.arrow){r.write("<div");r.addClass("sapSuiteUiCommonsArrowRight");if(c.hasOwnProperty("right")){if(c.right.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderLeftStateHighlighted");}else if(c.right.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderLeftStateDimmed");}else if(c.right.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderLeftStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderLeftStateRegular");}}r.writeClasses();r.write(">");r.write("</div>");}r.write("</div>");};
P._writeThirdRowOfSpecialLine=function(r,c,z,C){P._resetFloat(r);r.write("<div");r.addClass("sapSuiteUiCommonsFloatLeft");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxZoom1Width");r.addClass("sapSuiteUiCommonsBoxBottomZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxZoom3Width");r.addClass("sapSuiteUiCommonsBoxBottomZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxZoom4Width");r.addClass("sapSuiteUiCommonsBoxBottomZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxZoom2Width");r.addClass("sapSuiteUiCommonsBoxBottomZoom2Height");}r.writeClasses();r.write(">");r.write("</div>");r.write("<div");if(C._getShowLabels()){r.addClass("sapSuiteUiCommonsPFWithLabel");}r.addClass("sapSuiteUiCommonsFloatLeft");switch(z){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsBoxBottomZoom1Height");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsBoxBottomZoom3Height");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsBoxBottomZoom4Height");break;default:r.addClass("sapSuiteUiCommonsBoxBottomZoom2Height");}if(c.hasOwnProperty("bottom")&&c.bottom.draw){r.addClass("sapSuiteUiCommonsBoxMiddleBorderWidth");r.addClass("sapSuiteUiCommonsBorderLeft");if(c.bottom.type===l.ProcessFlowConnectionType.Planned){r.addClass("sapSuiteUiCommonsBorderLeftTypePlanned");}else{r.addClass("sapSuiteUiCommonsBorderLeftTypeNormal");}if(c.bottom.state===l.ProcessFlowConnectionState.Highlighted){r.addClass("sapSuiteUiCommonsBorderLeftStateHighlighted");r.addClass("sapSuiteUiCommonsStateHighlighted");}else if(c.bottom.state===l.ProcessFlowConnectionState.Dimmed){r.addClass("sapSuiteUiCommonsBorderLeftStateDimmed");}else if(c.bottom.state===l.ProcessFlowConnectionState.Selected){r.addClass("sapSuiteUiCommonsBorderLeftStateSelected");r.addClass("sapSuiteUiCommonsStateSelected");}else{r.addClass("sapSuiteUiCommonsBorderLeftStateRegular");r.addClass("sapSuiteUiCommonsStateRegular");}}else{r.addClass("sapSuiteUiCommonsBoxMiddleWidth");}r.writeClasses();r.write(">");r.write("</div>");};
P._resetFloat=function(r){r.write("<div");r.addClass("sapSuiteUiCommonsFloatClear");r.writeClasses();r.write(">");r.write("</div>");};
P._renderLabel=function(r,c){var L=c._getVisibleLabel();if(c.getAggregation("_labels")){var a=c.getAggregation("_labels");for(var i=0;i<a.length;i++){if(a[i]._getSelected()){L._setDimmed(false);if(a[i].getId()!==L.getId()){L._setSelected(true);a[i]._setSelected(false);}}}}if(L){r.renderControl(L);}};
return P;},true);
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowLaneHeader',["sap/ui/thirdparty/jquery",'sap/m/Image','./library','sap/ui/core/Control','sap/ui/core/IconPool','sap/ui/Device','sap/ui/core/Icon',"./ProcessFlowLaneHeaderRenderer"],function(q,I,l,C,a,D,b,P){"use strict";
var c=C.extend("sap.suite.ui.commons.ProcessFlowLaneHeader",{metadata:{library:"sap.suite.ui.commons",properties:{text:{type:"string",group:"Misc",defaultValue:null},iconSrc:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},position:{type:"int",group:"Misc",defaultValue:null},laneId:{type:"string",group:"Misc",defaultValue:null},state:{type:"object",group:"Misc",defaultValue:null},zoomLevel:{type:"sap.suite.ui.commons.ProcessFlowZoomLevel",group:"Misc",defaultValue:null}},events:{press:{parameters:{oEvent:{type:"object"}}}}}});
c.prototype._oResBundle=null;c.prototype._mergedLanePosition=null;c.symbolType={startSymbol:"startSymbol",endSymbol:"endSymbol",processSymbol:"processSymbol",standardType:"standardType"};c._constants={halfGapSize:0.0241,minPercentage:0.025,ringThickness:5,ringInnerRadius:24,positionX:32,positionY:32,outerCircleRadius:32,outerCircleStrokeColor:"OuterCircleStrikeColor",outerCircleStrokeWidth:1,sectorPositiveColor:"suiteUiCommonsProcessFlowHeaderPositiveColor",sectorNegativeColor:"suiteUiCommonsProcessFlowHeaderNegativeColor",sectorNeutralColor:"suiteUiCommonsProcessFlowHeaderNeutralColor",sectorCriticalColor:"suiteUiCommonsProcessFlowHeaderCriticalColor",sectorPlannedColor:"suiteUiCommonsProcessFlowHeaderPlannedColor",ellipsis:'...',ellipsisLength:3};
c.prototype.init=function(){this._virtualTableSpan=1;if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");}};
c.prototype.exit=function(){this._destroyImage();this.$().unbind("click",this.ontouchend);};
c.prototype.onBeforeRendering=function(){this.$("lh-icon").off('click',q.proxy(this.ontouchend,this));this.$().unbind("click",this.ontouchend);};
c.prototype.onAfterRendering=function(){var t=this.$();var $=this.$("lh-icon");var s='click';if(D.support.touch){s='touchend';}if($.length>0){$.on(s,q.proxy(this.ontouchend,this));$.css("cursor","inherit");}this.$().bind("click",q.proxy(this.ontouchend,this));if(this._isHeaderMode()){t.addClass("suiteUiProcessFlowLaneHeaderPointer");}else{t.removeClass("suiteUiProcessFlowLaneHeaderPointer");}if(D.browser.msie||D.browser.mozilla){this.$("lh-text").css("word-break","break-all");}if(!this._ellipsisDisabled&&!c._hasNativeLineClamp){this._clampText();}};
c.prototype.ontouchend=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault();}if(this){this.firePress(this);}if(e&&!e.isPropagationStopped()){e.stopPropagation();}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation();}};
c.prototype._setMergedPosition=function(p){this._mergedLanePosition=p;};
c.prototype._getSymbolType=function(){return this._oSymbolType?this._oSymbolType:c.symbolType.standardType;};
c.prototype._setSymbolType=function(s,d){d._oSymbolType=s;};
c.prototype._getImage=function(i,s){this._destroyImage();if(this._oImageControl){this._oImageControl.setSrc(s);}else{this._oImageControl=a.createControlByURI(s,I);this._oImageControl.sId=i;this._oImageControl.setParent(this,null,true);}if(this._oImageControl instanceof b){this._oImageControl.setUseIconTooltip(false);}return this._oImageControl;};
c.prototype._setHeaderMode=function(i){this._bHeaderMode=i;};
c._setVirtualTableSpan=function(e){this._virtualTableSpan=e;};
c._getVirtualTableSpan=function(){return this._virtualTableSpan;};
c.prototype._isHeaderMode=function(){return this._bHeaderMode;};
c.prototype._clampValues=function(d,m,e){var i=d.length-1,f=false,v;while(i>=0){v=d[i];if(v<m){d[i]=e;f=true;}i--;}return f;};
c.prototype._rescaleToUnit=function(r,m){var R,i,v,V,d,e;if(!m){m=0;}i=r.length-1;R=0;v=V=0;while(i>=0){d=r[i];if(d>0){if(d<=m){V++;}else{R+=r[i];}v++;}i--;}R-=(v-V)*m;e=(1-v*m)/R;i=r.length-1;while(i>=0){d=r[i];if(d>0){if(d<=m){r[i]=m;}else{r[i]=(d-m)*e+m;}}i--;}};
c.prototype._countGaps=function(d){var i=d.length-1,g=0;while(i>=0){if(d[i]>0){g++;}i--;}if(g===1){g=0;}return g;};
c.prototype._rescaleByFactor=function(r,f){var i=r.length-1;while(i>=0){r[i]*=f;i--;}};
c.prototype._colorMap=[c._constants.sectorPositiveColor,c._constants.sectorNegativeColor,c._constants.sectorNeutralColor,c._constants.sectorPlannedColor,c._constants.sectorCriticalColor];
c.prototype._calculateSectorRangeDefinitions=function(d,f){var e=[],g=-Math.PI/2,h,j=d.length,i=0;while(i<j){if(d[i]>0){h=g+2*Math.PI*d[i];e.push({start:g,end:h,color:this._colorMap[i]});g=h+f;}i++;}return e;};
c.prototype._renderDonutPercentages=function(r){var s=this.getState(),g=0,S,p=[0,0,0,0],f,d,h=c._constants.halfGapSize,R=c._constants.ringInnerRadius,i=c._constants.ringThickness,e=c._constants.ringInnerRadius+i,o=c._constants.outerCircleStrokeColor,O=c._constants.outerCircleStrokeWidth,j=c._constants.outerCircleRadius,k=c._constants.positionX,m=c._constants.positionY,M=c._constants.minPercentage;if(s&&Object.prototype.toString.call(s)==='[object Array]'&&(s.length>0)){s.forEach(function(n){switch(n.state){case l.ProcessFlowNodeState.Positive:p[0]=n.value;break;case l.ProcessFlowNodeState.Negative:p[1]=n.value;break;case l.ProcessFlowNodeState.Neutral:p[2]=n.value;break;case l.ProcessFlowNodeState.Planned:p[3]=n.value;break;case l.ProcessFlowNodeState.Critical:p[4]=n.value;break;default:p[3]=n.value;}});this._clampValues(p,0,0);this._rescaleToUnit(p);this._rescaleToUnit(p,M);g=this._countGaps(p);f=(1-g*h/Math.PI);this._rescaleByFactor(p,f);this._renderCircle(r,o,O,k,m,j);if(g>0){S=this._calculateSectorRangeDefinitions(p,2*h);this._renderDonutSectors(r,S,k,m,R,e);}else{d=this._selectColor(p);this._renderCircle(r,d,i,k,m,R+i/2,true);}}else{this._renderCircle(r,o,O,k,m,j);}};
c.prototype._renderCircle=function(r,s,d,p,e,f,i){r.write("<circle");var g=i?this.getId()+"-donut-circle-inner":this.getId()+"-donut-circle";r.writeAttribute("id",this.getId()+g);if(s!==c._constants.outerCircleStrokeColor){r.writeAttributeEscaped("class","suiteUiCommonsProcessFlowHeaderIconFill "+s);}else{r.writeAttribute("class","suiteUiCommonsProcessFlowHeaderIconFill");}r.writeAttributeEscaped("stroke-width",d);r.writeAttributeEscaped("cx",p);r.writeAttributeEscaped("cy",e);r.writeAttributeEscaped("r",f);r.write("></circle>");};
c.prototype._renderDonutSectors=function(r,s,p,d,e,f){var i=0,g=s.length,S,h;while(i<g){S=s[i];h=this._getDonutSectorPath(p,d,S.start,S.end,e,f);r.write("<path");r.writeAttribute("id",this.getId()+"-donut-segment-"+i);r.writeAttributeEscaped("d",h);r.writeAttributeEscaped("class",S.color);r.writeAttribute("opacity","1");r.write("></path>");i++;}};
c.prototype._selectColor=function(p){var s;if(p[0]){s=c._constants.sectorPositiveColor;}else if(p[1]){s=c._constants.sectorNegativeColor;}else if(p[2]){s=c._constants.sectorNeutralColor;}else if(p[3]){s=c._constants.sectorPlannedColor;}else if(p[4]){s=c._constants.sectorCriticalColor;}else{s=c._constants.sectorNeutralColor;}return s;};
c.prototype._getDonutSectorPath=function(p,d,s,e,r,f){var o=0,g,h,i,j,S,k,E,m,n;if((e-s)%(Math.PI*2)>Math.PI){o=1;}k=Math.cos(s);E=Math.cos(e);m=Math.sin(s);n=Math.sin(e);g=(p+r*k).toFixed(3)+','+(d+r*m).toFixed(3);h=(p+f*k).toFixed(3)+','+(d+f*m).toFixed(3);i=(p+f*E).toFixed(3)+','+(d+f*n).toFixed(3);j=(p+r*E).toFixed(3)+','+(d+r*n).toFixed(3);S="M"+g+"L"+h+"A"+f+','+f+" 0 "+o+" 1 "+i+"L"+j+"A"+r+','+r+" 0 "+o+" 0 "+g+"z";return S;};
c.prototype._destroyImage=function(){if(this._oImageControl){this._oImageControl.destroy();}this._oImageControl=null;};
c.prototype._clampText=function(){var $=this.$("lh-text").length?this.$("lh-text"):null,t=this.getText(),L="",e=c._constants.ellipsis,E=c._constants.ellipsisLength,s=E+1,m,i=t.length,M,v;if($){M=parseInt($.css("height").slice(0,-2),10);if($[0].scrollHeight>M){v=$.css("visibility");$.css("visibility","hidden");L=t;do{m=(s+i)>>1;$.textContent=t.slice(0,m-E)+e;if($.scrollHeight>M){i=m;}else{s=m;L=$.textContent;}}while(i-s>1);$.css("visibility",v);}if($.scrollHeight>M){$.textContent=L;}}};
c._hasNativeLineClamp=(function(){return document.documentElement.style.webkitLineClamp!==undefined;}());
c.prototype._getAriaTextForStatusValue=function(s){switch(s){case l.ProcessFlowNodeState.Positive:return this._oResBundle.getText('PF_ARIA_STATUS_POSITIVE');case l.ProcessFlowNodeState.Negative:return this._oResBundle.getText('PF_ARIA_STATUS_NEGATIVE');case l.ProcessFlowNodeState.Critical:return this._oResBundle.getText('PF_ARIA_STATUS_CRITICAL');case l.ProcessFlowNodeState.Planned:return this._oResBundle.getText('PF_ARIA_STATUS_PLANNED');case l.ProcessFlowNodeState.PlannedNegative:return this._oResBundle.getText('PF_ARIA_STATUS_PLNNEGATIVE');case l.ProcessFlowNodeState.Neutral:default:return this._oResBundle.getText('PF_ARIA_STATUS_NEUTRAL');}};
c.prototype._getAriaText=function(){var A="";var s=this.getState();if(s){var d=[];for(var i in s){d.push(s[i].value);}this._clampValues(d,0,0);this._rescaleToUnit(d);A=this._oResBundle.getText('PF_ARIA_STATUS');for(var j in s){if(s[j].value!==0){var S=this._getAriaTextForStatusValue(s[j].state);var v=" "+Math.round(d[j]*100)+"% "+S+",";A=A.concat(v);}}A=A.slice(0,-1);}return A;};
c.prototype._getSymbolAriaText=function(){var A="";switch(this._getSymbolType()){case c.symbolType.startSymbol:A=this._oResBundle.getText('PF_ARIA_SYMBOL_LANE_START');break;case c.symbolType.endSymbol:A=this._oResBundle.getText('PF_ARIA_SYMBOL_LANE_END');break;case c.symbolType.processSymbol:A=this._oResBundle.getText('PF_ARIA_SYMBOL_LANE_PROCESS');break;default:}return A;};
c.createNewStartSymbol=function(i){var s=new c({laneId:"processFlowLaneStart"});s._setSymbolType(c.symbolType.startSymbol,s);s._setHeaderMode(i);return s;};
c.createNewEndSymbol=function(i){var e=new c({laneId:"processFlowLaneEnd"});e._setSymbolType(c.symbolType.endSymbol,e);e._setHeaderMode(i);return e;};
c.createNewProcessSymbol=function(i){var p=new c({laneId:"processFlowLaneProcess",iconSrc:"sap-icon://process"});p._setSymbolType(c.symbolType.processSymbol,p);p._setHeaderMode(i);return p;};
c.enableEllipsisSupportForText=function(i){this._ellipsisDisabled=!i;};
c.prototype.getPosition=function(){if(this._mergedLanePosition){return this._mergedLanePosition;}else{return this.getProperty("position");}};
return c;});
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowLaneHeaderRenderer',["sap/base/security/encodeXML"],function(e){"use strict";var P;var a={};
a.render=function(r,c){P=P||sap.ui.require("sap/suite/ui/commons/ProcessFlowLaneHeader");switch(c._getSymbolType()){case P.symbolType.startSymbol:this._writeSymbolNodeType(r,c,"-start",["suiteUiProcessFlowLaneHeaderStartEndSymbol","suiteUiProcessFlowLaneHeaderStartSymbol"],["suiteUiProcessFlowLaneHeaderStartEndSymbolContainer","suiteUiProcessFlowLaneHeaderNoSelection"],false,c._isHeaderMode());break;case P.symbolType.endSymbol:this._writeSymbolNodeType(r,c,"-end",["suiteUiProcessFlowLaneHeaderStartEndSymbol","suiteUiProcessFlowLaneHeaderEndSymbol"],["suiteUiProcessFlowLaneHeaderStartEndSymbolContainer","suiteUiProcessFlowLaneHeaderNoSelection"],false,c._isHeaderMode());break;case P.symbolType.processSymbol:this._writeSymbolNodeType(r,c,"-process",["suiteUiProcessFlowLaneHeaderProcessSymbol"],["suiteUiProcessFlowLaneHeaderProcessSymbolContainer","suiteUiProcessFlowLaneHeaderNoSelection"],true,c._isHeaderMode());break;default:this._writeDefaultNodeType(r,c);}};
a._writeSymbolNodeType=function(r,c,s,b,d,i){r.write("<div");r.writeControlData(c);d.forEach(function(f){r.addClass(e(f));});r.writeClasses();r.writeAttribute("role","separator");r.writeAttributeEscaped("aria-label",c._getSymbolAriaText());r.write(">");r.write("<div");r.writeAttributeEscaped("id",c.getId()+s);b.forEach(function(f){r.addClass(e(f));});r.writeClasses();r.write(">");if(i){var I=c.getIconSrc();if(I){var o=c._getImage(c.getId()+"-lh-icon",I);r.renderControl(o);}}r.write("</div>");r.write("</div>");};
a._writeDefaultNodeType=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("suiteUiProcessFlowLaneHeaderContainer");r.addClass("suiteUiProcessFlowLaneHeaderNoSelection");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-standard");r.writeAttribute("role","image");var s=c.getText()+", "+c._getAriaText();r.writeAttributeEscaped("aria-label",s);r.writeAttributeEscaped("title",s);r.addClass("suiteUiProcessFlowLaneHeaderBodyContainer");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-horizontal-line");r.addClass("suiteUiProcessFlowLaneHeaderHorizontalLine");r.writeClasses();r.write("></div>");r.write("<svg");r.writeAttribute("id",c.getId()+"-donut-chart");r.addClass("suiteUiProcessFlowLaneHeaderDonutSvg");r.writeClasses();r.write(">");c._renderDonutPercentages(r);r.write("</svg>");r.write("<div");r.writeAttribute("id",c.getId()+"-lh-icon-container");r.addClass("suiteUiProcessFlowLaneHeaderIconContainer");r.writeClasses();r.write(">");var i=c.getIconSrc();if(i){var I=c._getImage(c.getId()+"-lh-icon",i);I.addStyleClass("suiteUiProcessFlowLaneHeaderProcessSymbolIcon");r.renderControl(I);}r.write("</div>");r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-lh-text-container");r.addClass("suiteUiProcessFlowLaneHeaderTextContainer");r.writeClasses();r.write(">");r.write("<span");r.writeAttribute("id",c.getId()+"-lh-text");r.addClass("suiteUiProcessFlowLaneHeaderText");r.writeClasses();r.writeAttribute("aria-hidden",true);r.write(">");r.writeEscaped(c.getText());r.write("</span>");r.write("</div>");r.write("</div>");};
return a;},true);
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowNode',["sap/ui/thirdparty/jquery",'sap/m/Text','./library','sap/ui/core/Control','sap/ui/core/IconPool','sap/ui/Device','sap/ui/core/Icon',"sap/base/Log","./ProcessFlowNodeRenderer"],function(q,T,l,C,I,D,a,L,P){"use strict";
var b=C.extend("sap.suite.ui.commons.ProcessFlowNode",{metadata:{library:"sap.suite.ui.commons",properties:{title:{type:"string",group:"Misc",defaultValue:null},isTitleClickable:{type:"boolean",group:"Behavior",defaultValue:false,deprecated:true},laneId:{type:"string",group:"Misc",defaultValue:null},nodeId:{type:"string",group:"Misc",defaultValue:null},state:{type:"sap.suite.ui.commons.ProcessFlowNodeState",group:"Appearance",defaultValue:"Neutral"},type:{type:"sap.suite.ui.commons.ProcessFlowNodeType",group:"Appearance",defaultValue:"Single"},children:{type:"any[]",group:"Misc",defaultValue:null},titleAbbreviation:{type:"string",group:"Data",defaultValue:null},stateText:{type:"string",group:"Data",defaultValue:null},texts:{type:"string[]",group:"Misc",defaultValue:null},highlighted:{type:"boolean",group:"Appearance",defaultValue:false},focused:{type:"boolean",group:"Appearance",defaultValue:false},tag:{type:"object",group:"Misc",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{zoomLevelOneContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelTwoContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelThreeContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},zoomLevelFourContent:{type:"sap.ui.core.Control",multiple:false,group:"Misc"},ariaProperties:{type:"sap.suite.ui.commons.AriaProperties",multiple:false,group:"Misc"}},associations:{parents:{type:"sap.suite.ui.commons.ProcessFlowNode",multiple:true,singularName:"parent"}},events:{titlePress:{deprecated:true,parameters:{oEvent:{type:"object"}}},press:{parameters:{oEvent:{type:"object"}}}}}});
b.prototype._zoomLevel=l.ProcessFlowZoomLevel.Two;b.prototype._tag=null;b.prototype._displayState=l.ProcessFlowDisplayState.Regular;b.prototype._oResBundle=null;b.prototype._mergedLaneId=null;b.prototype._foldedCorner=false;b.prototype._foldedCornerControl=null;b.prototype._parent=null;b.prototype._headerControl=null;b.prototype._stateTextControl=null;b.prototype._iconControl=null;b.prototype._text1Control=null;b.prototype._text2Control=null;b.prototype._navigationFocus=false;b.prototype._sMouseEvents=" mousedown mouseup mouseenter mouseleave ";b.prototype._sMouseTouchEvents=D.support.touch?'saptouchstart saptouchcancel touchstart touchend':'';if(D.browser.msie){b.prototype._grabCursorClass="sapSuiteUiGrabCursorIEPF";b.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorIEPF";}else{b.prototype._grabCursorClass="sapSuiteUiGrabCursorPF";b.prototype._grabbingCursorClass="sapSuiteUiGrabbingCursorPF";}b.prototype._nodeHoverClass="sapSuiteUiCommonsProcessFlowNodeHover";b.prototype._nodeActiveClass="sapSuiteUiCommonsProcessFlowNodeActive";b.prototype._nodePlannedClass="sapSuiteUiCommonsProcessFlowNodeStatePlanned";b.prototype._nodePlannedClassIdentifier="."+b.prototype._nodePlannedClass;b.prototype._nodeFCHoverClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeHover";b.prototype._nodeFCActiveClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeActive";b.prototype._nodeFCIconHoverClass="sapSuiteUiCommonsProcessFlowFoldedCornerNodeIconHover";b.prototype._nodeAggregatedClass="sapSuiteUiCommonsProcessFlowNodeAggregated";b.prototype._nodeAggregatedHoveredClass="sapSuiteUiCommonsProcessFlowNodeAggregatedHovered";b.prototype._nodeAggregatedDimmedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmed";b.prototype._nodeAggregatedFocusedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedFocused";b.prototype._nodeAggregatedPressedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedPressed";b.prototype._nodeAggregatedDimmedPressedClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedPressed";b.prototype._nodeAggregatedDimmedHoveredClass="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedHovered";b.prototype._nodeAggregatedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedZoomLevel4";b.prototype._nodeAggregatedHoveredClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedHoveredZoomLevel4";b.prototype._nodeAggregatedPressedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedPressedZoomLevel4";b.prototype._nodeAggregatedDimmedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedZoomLevel4";b.prototype._nodeAggregatedFocusedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedFocusedZoomLevel4";b.prototype._nodeAggregatedDimmedPressedClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedPressedZoomLevel4";b.prototype._nodeAggregatedDimmedHoveredClassZoomLevel4="sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedHoveredZoomLevel4";
b.prototype.init=function(){I.addIcon("context-menu","businessSuite","PFBusinessSuiteInAppSymbols","e02b",true);if(!this._oResBundle){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");}};
b.prototype.exit=function(){if(this._foldedCornerControl){this._foldedCornerControl.destroy();this._foldedCornerControl=null;}if(this._headerControl){this._headerControl.destroy();this._headerControl=null;}if(this._stateTextControl){this._stateTextControl.destroy();this._stateTextControl=null;}if(this._iconControl){this._iconControl.destroy();this._iconControl=null;}if(this._text1Control){this._text1Control.destroy();this._text1Control=null;}if(this._text2Control){this._text2Control.destroy();this._text2Control=null;}this.$().unbind(this._sMouseEvents,this._handleEvents);if(D.support.touch){this.$().unbind(this._sMouseTouchEvents,this._handleEvents);}};
b.prototype.onBeforeRendering=function(){this.$().unbind(this._sMouseEvents,this._handleEvents);if(D.support.touch){this.$().unbind(this._sMouseTouchEvents,this._handleEvents);}};
b.prototype.onAfterRendering=function(){this._sMouseEvents=this._sMouseEvents.concat(' ',this._sMouseTouchEvents);this.$().bind(this._sMouseEvents,q.proxy(this._handleEvents,this));};
b.prototype._handleClick=function(e){if(this._parent&&this._parent._bHighlightedMode&&this._getDisplayState()===l.ProcessFlowDisplayState.Dimmed||this._getDisplayState()===l.ProcessFlowDisplayState.DimmedFocused){L.info("Event ignored, node in dimmed state.");}else if(this._parent){if(e.target.id.indexOf("title")>=0&&this.getIsTitleClickable()){this._parent.fireNodeTitlePress(this);}else{this._parent.fireNodePress(this);}this.getParent()._changeNavigationFocus(this.getParent()._getLastNavigationFocusElement(),this);}if(e&&!e.isPropagationStopped()){e.stopPropagation();}if(e&&!e.isImmediatePropagationStopped()){e.stopImmediatePropagation();}};
b.prototype.onclick=function(e){if(e&&!e.isDefaultPrevented()){e.preventDefault();}this._handleClick(e);};
b.prototype._handleEvents=function(e){var t=this.$().find('*');var $=this.$().attr('id');var i=this._getFoldedCorner();var s=this.getParent();if(e&&!e.isDefaultPrevented()){e.preventDefault();}if(this._parent&&this._parent._bHighlightedMode&&this._getDimmed()){return;}if(this.getType()===l.ProcessFlowNodeType.Aggregated){this._adjustClassesForAggregation(e);}var p=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!p){return;}function c(d){return d.replace(/([:.\[\],=@])/g,"\\$1");}switch(e.type){case p._mouseEvents.mouseDown:case"keydown":this.$().removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);t.removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);if(i){q(document.getElementById($)).removeClass(this._nodeFCHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeFCIconHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeFCIconHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);}break;case p._mouseEvents.mouseUp:if(s.$().hasClass(this._grabbingCursorClass)){s.$().removeClass(this._grabbingCursorClass);}this.$().removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);t.removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);if(i){q(document.getElementById($)).removeClass(this._nodeHoverClass+' '+this._nodeFCActiveClass).addClass(this._nodeFCHoverClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeHoverClass+' '+this._nodeFCActiveClass).addClass(this._nodeFCIconHoverClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeHoverClass+' '+this._nodeFCActiveClass).addClass(this._nodeFCIconHoverClass);}break;case p._mouseEvents.mouseEnter:if(!s.$().hasClass(this._grabbingCursorClass)){this.$().addClass(this._nodeHoverClass);t.addClass(this._nodeHoverClass);this.$().find(this._nodePlannedClassIdentifier).find("*").addClass(this._nodePlannedClass);if(i){q(document.getElementById($)).removeClass(this._nodeHoverClass).addClass(this._nodeFCHoverClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);}}break;case p._mouseEvents.mouseLeave:case"keyup":this.$().removeClass(this._nodeActiveClass+' '+this._nodeHoverClass);t.removeClass(this._nodeActiveClass+' '+this._nodeHoverClass);if(i){q(document.getElementById($)).removeClass(this._nodeFCActiveClass+' '+this._nodeFCHoverClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeFCActiveClass+' '+this._nodeFCIconHoverClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeFCActiveClass+' '+this._nodeFCIconHoverClass);}if(!s.$().hasClass(this._grabbingCursorClass)){s.$().addClass(this._grabCursorClass);}break;case p._mouseEvents.touchStart:if(D.support.touch){this.$().addClass(this._nodeActiveClass);t.addClass(this._nodeActiveClass);if(i){q(document.getElementById($)).removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeActiveClass).addClass(this._nodeFCActiveClass);}}break;case p._mouseEvents.sapTouchStart:this.$().removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);t.removeClass(this._nodeHoverClass).addClass(this._nodeActiveClass);if(i){q(document.getElementById($)).removeClass(this._nodeFCHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeFCIconHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeFCIconHoverClass+' '+this._nodeActiveClass).addClass(this._nodeFCActiveClass);}break;case p._mouseEvents.touchEnd:if(D.support.touch){this.$().removeClass(this._nodeActiveClass+' '+this._nodeHoverClass);t.removeClass(this._nodeActiveClass+' '+this._nodeHoverClass);if(i){q(document.getElementById($)).removeClass(this._nodeFCActiveClass+' '+this._nodeFCHoverClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeFCActiveClass+' '+this._nodeFCIconHoverClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeFCActiveClass+' '+this._nodeFCIconHoverClass);}}this._handleClick(e);break;case p._mouseEvents.sapTouchCancel:this.$().removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);t.removeClass(this._nodeActiveClass).addClass(this._nodeHoverClass);if(i){q(document.getElementById($)).removeClass(this._nodeFCActiveClass+' '+this._nodeHoverClass).addClass(this._nodeFCHoverClass);q('div[id^='+c($)+'][id$=-corner-container]').removeClass(this._nodeFCActiveClass+' '+this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);q('span[id^='+c($)+'][id$=-corner-icon]').removeClass(this._nodeFCActiveClass+' '+this._nodeHoverClass).addClass(this._nodeFCIconHoverClass);}break;default:break;}};
b.prototype._setMergedLaneId=function(c){this._mergedLaneId=c;};
b.prototype._setParentFlow=function(c){this._parent=c;};
b.prototype._getFoldedCornerControl=function(){if(this._foldedCornerControl){this._foldedCornerControl.destroy();}this._foldedCornerControl=new a({id:this.getId()+"-corner-icon",src:I.getIconURI("context-menu","businessSuite"),visible:true});if(this._parent&&!this._parent._bHighlightedMode||!this._getDimmed()){this._foldedCornerControl.addStyleClass("sapUiIconPointer");}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1ZoomLevel4");break;default:break;}this._foldedCornerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode1");return this._foldedCornerControl;};
b.prototype._getHeaderControl=function(){if(this._headerControl){this._headerControl.destroy();}var i=0;var w="";var v=true;var t=this.getTitle();switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:i=3;break;case l.ProcessFlowZoomLevel.Two:i=3;break;case l.ProcessFlowZoomLevel.Three:i=2;t=this.getTitleAbbreviation();break;case l.ProcessFlowZoomLevel.Four:t="";i=0;w="0px";v=false;break;default:break;}this._headerControl=new T({id:this.getId()+"-nodeid-anchor-title",text:t,visible:v,wrapping:true,width:w,maxLines:i});if(this.getIsTitleClickable()){this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleClickable");}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel4");break;default:break;}this._headerControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Title");return this._headerControl;};
b.prototype._getIconControl=function(){if(this._iconControl){this._iconControl.destroy();}var s=null;var v=true;switch(this.getState()){case l.ProcessFlowNodeState.Positive:s="sap-icon://message-success";break;case l.ProcessFlowNodeState.Negative:case l.ProcessFlowNodeState.PlannedNegative:s="sap-icon://message-error";break;case l.ProcessFlowNodeState.Planned:s=null;break;case l.ProcessFlowNodeState.Neutral:s="sap-icon://process";break;case l.ProcessFlowNodeState.Critical:s="sap-icon://message-warning";break;default:break;}this._iconControl=new a({id:this.getId()+"-icon",src:s,visible:v});if(this._parent&&!this._parent._bHighlightedMode||!this._getDimmed()){this._iconControl.addStyleClass("sapUiIconPointer");}var r=sap.ui.getCore().getConfiguration().getRTL();if(r){this._iconControl.addStyleClass("sapUiIconSuppressMirrorInRTL");}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:case l.ProcessFlowZoomLevel.Two:var i="sapSuiteUiCommonsProcessFlowNode3StateIconLeft";if(r){i="sapSuiteUiCommonsProcessFlowNode3StateIconRight";}this._iconControl.addStyleClass(i);break;case l.ProcessFlowZoomLevel.Three:case l.ProcessFlowZoomLevel.Four:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconCenter");break;default:break;}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel4");break;default:break;}this._iconControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateIcon");return this._iconControl;};
b.prototype._getStateTextControl=function(){if(this._stateTextControl){this._stateTextControl.destroy();}var i=2;var w="";var v=true;var s=this.getState();var t=(s===l.ProcessFlowNodeState.Planned)?"":this.getStateText();if(s===l.ProcessFlowNodeState.PlannedNegative&&t.length===0){t="Planned Negative";}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:case l.ProcessFlowZoomLevel.Two:case l.ProcessFlowZoomLevel.Three:i=2;break;case l.ProcessFlowZoomLevel.Four:t="";i=0;w="0px";v=false;break;default:break;}this._stateTextControl=new T({id:this.getId()+"-stateText",text:t,visible:v,wrapping:true,width:w,maxLines:i});switch(s){case l.ProcessFlowNodeState.Positive:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePositive");break;case l.ProcessFlowNodeState.Negative:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case l.ProcessFlowNodeState.Planned:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePlanned");break;case l.ProcessFlowNodeState.Neutral:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateNeutral");break;case l.ProcessFlowNodeState.PlannedNegative:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StatePlanned");break;case l.ProcessFlowNodeState.Critical:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateCritical");break;default:break;}switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel4");break;default:break;}this._stateTextControl.addStyleClass("sapSuiteUiCommonsProcessFlowNode3StateText");return this._stateTextControl;};
b.prototype._getZoomLevel=function(){return this._zoomLevel;};
b.prototype._setZoomLevel=function(z){this._zoomLevel=z;};
b.prototype._setNavigationFocus=function(n){this._navigationFocus=n;};
b.prototype._getNavigationFocus=function(){return this._navigationFocus;};
b.prototype._setFoldedCorner=function(f){this._foldedCorner=f;};
b.prototype._getFoldedCorner=function(){return this._foldedCorner;};
b.prototype._setTag=function(n){this._tag=n;};
b.prototype._getTag=function(){return this._tag;};
b.prototype._setDimmedState=function(){var i=this.getFocused();var c=this.getHighlighted();var d=this.getSelected();if(c||d){throw new Error("Cannot set highlighed or selected node to dimmed state"+this.getNodeId());}this._displayState=l.ProcessFlowDisplayState.Dimmed;if(i){this._displayState=l.ProcessFlowDisplayState.DimmedFocused;}};
b.prototype._setRegularState=function(){this._displayState=l.ProcessFlowDisplayState.Regular;};
b.prototype._getLane=function(){var p=this.getParent();var o=null;if(p){o=p._getLane(this.getLaneId());}return o;};
b.prototype._getDimmed=function(){return this._displayState===l.ProcessFlowDisplayState.Dimmed||this._displayState===l.ProcessFlowDisplayState.DimmedFocused;};
b.prototype._getAriaText=function(){var p=this.getParents().length;var c=this._getCurrentZoomLevelContent();var d=0;if(this._hasChildren()){d=this.getChildren().length;}var s="";var o=this._getLane();if(o){s=o.getText();if(!s){s=this._oResBundle.getText('PF_VALUE_UNDEFINED');}}var e="";var f=this.getTexts();if(f){for(var i in f){if(f[i]){var v=f[i].concat(", ");e=e.concat(v);}}e=e.slice(0,-1);}var t=this.getTitle();if(!t&&!c){t=this._oResBundle.getText('PF_VALUE_UNDEFINED');}var S=this.getState();if(!S){S=this._oResBundle.getText('PF_VALUE_UNDEFINED');}var g=this.getStateText();if(this.getState()===l.ProcessFlowNodeState.Planned){g="";}var A="";if(this.getType()===l.ProcessFlowNodeType.Aggregated){A=this._oResBundle.getText("PF_ARIA_TYPE");}return this._oResBundle.getText('PF_ARIA_NODE',[t,S,g,s,e,p,d,A]);};
b.prototype._getDisplayState=function(){var i=this.getFocused();var c=this.getHighlighted();var d=this.getSelected();if(this._displayState===l.ProcessFlowDisplayState.Dimmed||this._displayState===l.ProcessFlowDisplayState.DimmedFocused){return this._displayState;}if(d){if(c){if(i){this._displayState=l.ProcessFlowDisplayState.SelectedHighlightedFocused;}else{this._displayState=l.ProcessFlowDisplayState.SelectedHighlighted;}}else if(i){this._displayState=l.ProcessFlowDisplayState.SelectedFocused;}else{this._displayState=l.ProcessFlowDisplayState.Selected;}}else if(i&&c){this._displayState=l.ProcessFlowDisplayState.HighlightedFocused;}else if(i){this._displayState=l.ProcessFlowDisplayState.RegularFocused;}else if(c){this._displayState=l.ProcessFlowDisplayState.Highlighted;}else if(this._displayState===l.ProcessFlowDisplayState.HighlightedFocused||this._displayState===l.ProcessFlowDisplayState.RegularFocused||this._displayState===l.ProcessFlowDisplayState.Highlighted||this._displayState===l.ProcessFlowDisplayState.Selected){this._setRegularState();}return this._displayState;};
b.prototype._createTextControlInternal=function(t,c,o){if(o){o.destroy();}var i=2;var w="";var v=true;var s=c;switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:case l.ProcessFlowZoomLevel.Two:i=2;break;case l.ProcessFlowZoomLevel.Three:i=0;w="0px";v=false;break;case l.ProcessFlowZoomLevel.Four:s="";i=0;w="0px";v=false;break;default:break;}if(this.getState){o=new T({id:this.getId()+t,text:s,visible:v,wrapping:true,width:w,maxLines:i});}return o;};
b.prototype._createText1Control=function(){var t=this.getTexts();if(t&&t.length>0){t=t[0];}this._text1Control=this._createTextControlInternal("-text1-control",t,this._text1Control);switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel1");this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel2");this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:break;}this._text1Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Text");return this._text1Control;};
b.prototype._createText2Control=function(){var t=this.getTexts();if(t&&t.length>1){t=t[1];}else{t="";}this._text2Control=this._createTextControlInternal("-text2-control",t,this._text2Control);switch(this._getZoomLevel()){case l.ProcessFlowZoomLevel.One:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:break;}this._text2Control.addStyleClass("sapSuiteUiCommonsProcessFlowNode3Text");return this._text2Control;};
b.prototype._adjustClassesForAggregation=function(e){var f=[l.ProcessFlowDisplayState.RegularFocused,l.ProcessFlowDisplayState.HighlightedFocused,l.ProcessFlowDisplayState.DimmedFocused];var d=[l.ProcessFlowDisplayState.DimmedFocused,l.ProcessFlowDisplayState.Dimmed];var p=sap.ui.require("sap/suite/ui/commons/ProcessFlow");if(!p){return;}switch(e.type){case p._mouseEvents.mouseDown:case p._mouseEvents.touchStart:case p._mouseEvents.sapTouchStart:c(this);break;case p._mouseEvents.mouseUp:r(this);break;case p._mouseEvents.sapTouchCancel:case p._mouseEvents.touchEnd:r(this);h(this);break;case p._mouseEvents.mouseEnter:g(this);break;case p._mouseEvents.mouseLeave:r(this);h(this);break;default:break;}function c(t){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){if(d&&(Array.prototype.indexOf.call(d,t._getDisplayState()))>=0){t.$().removeClass(t._nodeAggregatedDimmedHoveredClassZoomLevel4).addClass(t._nodeAggregatedDimmedPressedClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedClassZoomLevel4).removeClass(t._nodeAggregatedHoveredClassZoomLevel4).addClass(t._nodeAggregatedPressedClassZoomLevel4);}}else if(d&&(Array.prototype.indexOf.call(d,t._getDisplayState()))>=0){t.$().removeClass(t._nodeAggregatedDimmedHoveredClass).addClass(t._nodeAggregatedDimmedPressedClass);}else{t.$().removeClass(t._nodeAggregatedClass).removeClass(t._nodeAggregatedHoveredClass).addClass(t._nodeAggregatedPressedClass);}}function r(t){if(f&&(Array.prototype.indexOf.call(f,t._getDisplayState()))>=0&&(t.$().hasClass(t._nodeAggregatedPressedClass)||t.$().hasClass(t._nodeAggregatedPressedClassZoomLevel4))){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedPressedClassZoomLevel4).addClass(t._nodeAggregatedFocusedClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedPressedClass).addClass(t._nodeAggregatedFocusedClass);}}else if(t.$().hasClass(t._nodeAggregatedDimmedPressedClass)||t.$().hasClass(t._nodeAggregatedDimmedPressedClassZoomLevel4)){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedDimmedPressedClassZoomLevel4).addClass(t._nodeAggregatedDimmedHoveredClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedDimmedPressedClass).addClass(t._nodeAggregatedDimmedHoveredClass);}}else if(t.$().hasClass(t._nodeAggregatedPressedClass)||t.$().hasClass(t._nodeAggregatedPressedClassZoomLevel4)){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedPressedClassZoomLevel4).addClass(t._nodeAggregatedClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedPressedClass).addClass(t._nodeAggregatedClass);}}}function g(t){if(d&&(Array.prototype.indexOf.call(d,t._getDisplayState()))>=0){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedDimmedClassZoomLevel4).addClass(t._nodeAggregatedDimmedHoveredClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedDimmedClass).addClass(t._nodeAggregatedDimmedHoveredClass);}}else if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().addClass(t._nodeAggregatedHoveredClassZoomLevel4);}else{t.$().addClass(t._nodeAggregatedHoveredClass);}}function h(t){if(d&&(Array.prototype.indexOf.call(d,t._getDisplayState()))>=0){if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedDimmedHoveredClassZoomLevel4).addClass(t._nodeAggregatedDimmedClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedDimmedHoveredClass).addClass(t._nodeAggregatedDimmedClass);}}else if(t._getZoomLevel()===l.ProcessFlowZoomLevel.Four){t.$().removeClass(t._nodeAggregatedHoveredClassZoomLevel4);}else{t.$().removeClass(t._nodeAggregatedHoveredClass);}}};
b.prototype._hasChildren=function(){var c=this.getChildren();return c&&c.length>0;};
b.prototype._hasChildrenWithNodeId=function(c){var d=this.getChildren();if(d&&d.length>0){for(var i=0;i<d.length;i++){if((typeof d[i]==='object'&&d[i].nodeId===c)||d[i]===c){return true;}}}return false;};
b.prototype.getLaneId=function(){if(this._mergedLaneId){return this._mergedLaneId;}else{return this.getProperty("laneId");}};
b.prototype._getCurrentZoomLevelContent=function(){var p=this.getParent();if(!p||p.getMetadata().getName()!=="sap.suite.ui.commons.ProcessFlow"){return null;}return this["getZoomLevel"+p.getZoomLevel()+"Content"]();};
return b;});
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowNodeRenderer',['./library','sap/ui/Device',"sap/base/security/encodeXML"],function(l,D,e){"use strict";var P={};P._constants={top:"top",right:"right",bottom:"bottom",left:"left",corner:"corner"};P._nodeLevels={iLevel0:0,iLevel1:1,iLevel2:2,iLevel3:3};
P.render=function(r,c){var f=null;var C=c._getCurrentZoomLevelContent();if(c._getFoldedCorner()){f=c._getFoldedCornerControl();}var h=c._getHeaderControl();var i=c._getIconControl();var s=c._getStateTextControl();var t=c._createText1Control();var T=c._createText2Control();r.write("<div");r.writeControlData(c);if(C){r.addClass("sapSuiteUiCommonsProcessFlowNodeCustom");}P._assignNodeClasses(r,c,0);r.write(">");switch(c._getDisplayState()){case l.ProcessFlowDisplayState.Highlighted:case l.ProcessFlowDisplayState.HighlightedFocused:case l.ProcessFlowDisplayState.SelectedHighlighted:case l.ProcessFlowDisplayState.SelectedHighlightedFocused:r.write("<div");P._assignShadowClasses(r,c,"top");r.write("></div>");r.write("<div");P._assignShadowClasses(r,c,"right");r.write("></div>");r.write("<div");P._assignShadowClasses(r,c,"bottom");r.write("></div>");r.write("<div");P._assignShadowClasses(r,c,"left");r.write("></div>");if(c._getFoldedCorner()){r.write("<div");P._assignShadowClasses(r,c,"corner");r.write("></div>");}break;default:}r.write("<div");P._assignNodeClasses(r,c,1);r.write(">");if(c._getFoldedCorner()){r.renderControl(f);}r.write("</div>");r.write("<div");P._assignNodeClasses(r,c,2);r.write(">");r.write("</div>");r.write("<div");P._assignNodeClasses(r,c,3);r.write(">");if(C){r.write("<div");r.addClass("sapSuiteUiCommonsProcessFlowNode3ContentPadding");r.writeClasses();r.write(">");r.renderControl(C);r.write("</div>");}else{r.write("<div");P._assignNodeTitleClasses(r,c);r.write(">");r.renderControl(h);r.write("</div>");r.write("<div");P._assignNodeStateClasses(r,c);r.write(">");r.write("<div");P._assignNodeIconClasses(r,c);r.write(">");r.renderControl(i);r.write("</div>");r.write("<div");P._assignNodeStateTextClasses(r,c);r.write(">");r.renderControl(s);r.write("</div>");r.write("</div>");r.write("<div");P._assignNodeText1Classes(r,c);r.write(">");r.renderControl(t);r.write("</div>");r.write("<div");P._assignNodeText2Classes(r,c);r.write(">");r.renderControl(T);r.write("</div>");r.write("</div>");}r.write("</div>");};
P._assignNodeClasses=function(r,c,n){switch(n){case P._nodeLevels.iLevel0:break;case P._nodeLevels.iLevel1:r.writeAttribute("id",c.getId()+"-corner-container");break;case P._nodeLevels.iLevel2:r.writeAttribute("id",c.getId()+"-top-container");break;case P._nodeLevels.iLevel3:r.writeAttribute("id",c.getId()+"-content-container");break;default:}if(n>P._nodeLevels.iLevel0){switch(c.getState()){case l.ProcessFlowNodeState.Planned:if((n===P._nodeLevels.iLevel1)&&(c._getFoldedCorner())){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerPlanned");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlanned");r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlannedDashedBorder");}break;case l.ProcessFlowNodeState.PlannedNegative:if((n===P._nodeLevels.iLevel1)&&(c._getFoldedCorner())){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerPlanned");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlanned");r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlannedDashedBorder");}break;default:}if(c._getNavigationFocus()){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateNavigation");}switch(c._getDisplayState()){case l.ProcessFlowDisplayState.RegularFocused:case l.ProcessFlowDisplayState.HighlightedFocused:case l.ProcessFlowDisplayState.DimmedFocused:case l.ProcessFlowDisplayState.SelectedHighlightedFocused:case l.ProcessFlowDisplayState.SelectedFocused:if((n===P._nodeLevels.iLevel1)&&(c._getFoldedCorner())){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateFocused");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeDisplayStateFocused");}break;default:}switch(c._getDisplayState()){case l.ProcessFlowDisplayState.Regular:case l.ProcessFlowDisplayState.RegularFocused:case l.ProcessFlowDisplayState.Selected:if((n===P._nodeLevels.iLevel1)&&(c._getFoldedCorner())){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateRegular");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeDisplayStateRegular");}break;case l.ProcessFlowDisplayState.Highlighted:case l.ProcessFlowDisplayState.HighlightedFocused:case l.ProcessFlowDisplayState.SelectedHighlighted:case l.ProcessFlowDisplayState.SelectedHighlightedFocused:if(n===P._nodeLevels.iLevel1&&c._getFoldedCorner()){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateHighlighted");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeDisplayStateHighlighted");}break;case l.ProcessFlowDisplayState.Dimmed:case l.ProcessFlowDisplayState.DimmedFocused:if(n===P._nodeLevels.iLevel1&&c._getFoldedCorner()){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateDimmed");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeDisplayStateDimmed");}break;default:}}if(n===P._nodeLevels.iLevel0){if(c._getNavigationFocus()){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerDisplayStateNavigation");}if(c._getDisplayState()===l.ProcessFlowDisplayState.Highlighted){r.addClass("sapSuiteUiCommonsProcessFlowNodeDisplayStateHighlighted");}if(c.getType()===l.ProcessFlowNodeType.Aggregated){P._assignAggregatedNodeClasses(r,c);}}switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n+"ZoomLevel1"));break;case l.ProcessFlowZoomLevel.Two:r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n+"ZoomLevel2"));break;case l.ProcessFlowZoomLevel.Three:r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n+"ZoomLevel3"));break;case l.ProcessFlowZoomLevel.Four:r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n+"ZoomLevel4"));break;default:}if(n===P._nodeLevels.iLevel1){if(c._getFoldedCorner()){r.addClass("sapSuiteUiCommonsProcessFlowNode1FoldedBorderStyle");}else{r.addClass("sapSuiteUiCommonsProcessFlowNode1BorderStyle");r.addClass("sapSuiteUiCommonsProcessFlowNodeBorderStandard");}}else if(n>P._nodeLevels.iLevel1){r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n+"BorderStyle"));r.addClass("sapSuiteUiCommonsProcessFlowNodeBorderStandard");}if(((n===P._nodeLevels.iLevel1)&&(c._getFoldedCorner()))){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerNode1");}else{r.addClass(e("sapSuiteUiCommonsProcessFlowNode"+n));}if(((n===P._nodeLevels.iLevel0)&&(c._getFoldedCorner()))){r.addClass("sapSuiteUiCommonsProcessFlowFoldedCornerIndication");}r.writeClasses();};
P._assignAggregatedNodeClasses=function(r,c){switch(c._getDisplayState()){case l.ProcessFlowDisplayState.Highlighted:case l.ProcessFlowDisplayState.Regular:case l.ProcessFlowDisplayState.Selected:if(c._getZoomLevel()===l.ProcessFlowZoomLevel.Four){r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregatedZoomLevel4");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregated");}break;case l.ProcessFlowDisplayState.Dimmed:if(c._getZoomLevel()===l.ProcessFlowZoomLevel.Four){r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregatedDimmedZoomLevel4");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregatedDimmed");}break;default:if(c._getZoomLevel()===l.ProcessFlowZoomLevel.Four){r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregatedFocusedZoomLevel4");}else{r.addClass("sapSuiteUiCommonsProcessFlowNodeAggregatedFocused");}break;}};
P._assignShadowClasses=function(r,c,b){r.addClass("sapSuiteUiCommonsShadowedDivCommon");switch(b){case P._constants.top:if(c._getFoldedCorner()){r.addClass("sapSuiteUiCommonsShadowedDivFoldedCornerBorderTop");}else{r.addClass("sapSuiteUiCommonsShadowedDivBorderTop");}break;case P._constants.right:r.addClass("sapSuiteUiCommonsShadowedDivBorderRight");break;case P._constants.bottom:r.addClass("sapSuiteUiCommonsShadowedDivBorderBottom");break;case P._constants.left:if(c._getFoldedCorner()){r.addClass("sapSuiteUiCommonsShadowedDivFoldedCornerBorderLeft");}else{r.addClass("sapSuiteUiCommonsShadowedDivBorderLeft");}break;case P._constants.corner:if(D.browser.safari){r.addClass("sapSuiteUiCommonsShadowedDivFoldedCornerSafari");}else{r.addClass("sapSuiteUiCommonsShadowedDivFoldedCorner");}break;default:}r.writeClasses();};
P._assignNodeTitleClasses=function(r,c){r.writeAttribute("id",c.getId()+"-title");switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3TitleZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3Title");r.writeClasses();};
P._assignNodeStateClasses=function(r,c){r.writeAttribute("id",c.getId()+"-state");switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3State");r.writeClasses();};
P._assignNodeIconClasses=function(r,c){r.writeAttribute("id",c.getId()+"-icon-container");switch(c.getState()){case l.ProcessFlowNodeState.Positive:r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePositive");break;case l.ProcessFlowNodeState.Negative:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case l.ProcessFlowNodeState.Planned:r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlanned");break;case l.ProcessFlowNodeState.Neutral:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNeutral");break;case l.ProcessFlowNodeState.PlannedNegative:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case l.ProcessFlowNodeState.Critical:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateCritical");break;default:}switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateIconZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3StateIcon");r.writeClasses();};
P._assignNodeStateTextClasses=function(r,c){r.writeAttribute("id",c.getId()+"-state-text");switch(c.getState()){case l.ProcessFlowNodeState.Positive:r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePositive");break;case l.ProcessFlowNodeState.Negative:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case l.ProcessFlowNodeState.Planned:r.addClass("sapSuiteUiCommonsProcessFlowNodeStatePlanned");break;case l.ProcessFlowNodeState.Neutral:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNeutral");break;case l.ProcessFlowNodeState.PlannedNegative:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateNegative");break;case l.ProcessFlowNodeState.Critical:r.addClass("sapSuiteUiCommonsProcessFlowNodeStateCritical");break;default:}switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3StateTextZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3StateText");r.writeClasses();};
P._assignNodeText1Classes=function(r,c){r.writeAttribute("id",c.getId()+"-text1");switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel1");r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextWithGapZoomLevel2");r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3Text");r.writeClasses();};
P._assignNodeText2Classes=function(r,c){r.writeAttribute("id",c.getId()+"-text2");switch(c._getZoomLevel()){case l.ProcessFlowZoomLevel.One:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel1");break;case l.ProcessFlowZoomLevel.Two:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel2");break;case l.ProcessFlowZoomLevel.Three:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel3");break;case l.ProcessFlowZoomLevel.Four:r.addClass("sapSuiteUiCommonsProcessFlowNode3TextZoomLevel4");break;default:}r.addClass("sapSuiteUiCommonsProcessFlowNode3Text");r.writeClasses();};
return P;},true);
sap.ui.predefine('sap/suite/ui/commons/ProcessFlowRenderer',["sap/ui/thirdparty/jquery",'./ProcessFlowLaneHeader','./ProcessFlowZoomLevel','./AriaProperties','sap/ui/Device',"sap/base/security/encodeXML"],function(q,P,a,A,D,e){"use strict";var b={};
b.render=function(r,c){var s=this._getZoomStyleClass(c),C,l,L,p=b,d,o;o=p._renderBasicStructure(r,c);if(o){return;}try{C=c._getOrCreateProcessFlow();l=c._getOrCreateLaneMap();d=c._getConnectionsMap();}catch(f){c._handleException(f);return;}r.write("<table");r.writeAttribute("id",c.getId()+"-table");r.writeAttributeEscaped("aria-label",c._getAriaText());r.addClass("sapSuiteUiCommonsPF");r.addClass(e(s));r.writeClasses();r.write(">");L=Object.keys(l).length;p._renderTableHeader(r,c,l,L);p._renderTableBody(r,c,L,C,d);r.write("</table>");r.write("</div>");r.write("</div>");this._writeCounter(r,c,"Right");r.renderControl(c._getScrollingArrow("right"));r.write("</div>");};
b._renderNormalNodeHeader=function(r,c,n,d,l){r.write("<th colspan=\"3\">");r.renderControl(n);r.write("</th>");if(d<l-1){r.write("<th colspan=\"2\">");var L=P.createNewProcessSymbol(c._isHeaderMode());L.attachPress(q.proxy(c.ontouchend,c));r.renderControl(L);r.write("</th>");}};
b._renderMergedNodeHeader=function(r,c,n,d,l,f){var N=c._mergeLaneIdNodeStates(l);n.setState(N);d++;var g=d*3+(d-1)*2;r.write("<th colspan=\""+g+"\">");r.renderControl(n);r.write("</th>");if(f){r.write("<th colspan=\"2\">");var L=P.createNewProcessSymbol(c._isHeaderMode());L.attachPress(q.proxy(c.ontouchend,c));r.renderControl(L);r.write("</th>");}};
b._renderNode=function(r,c,n,i){if(i){var N=n.getId()+"-node";var C=n._getCurrentZoomLevelContent();r.writeAttribute("id",N);r.writeAttribute("tabindex",0);var o={};o.label=n._getAriaText();if(C){o.labelledBy=N+" "+C.getId();}A.writeAriaProperties(r,o,n.getAriaProperties());r.write(">");i=false;}n._setParentFlow(c);n._setZoomLevel(c.getZoomLevel());n._setFoldedCorner(c.getFoldedCorners());r.renderControl(n);return i;};
b._renderConnection=function(r,c,d,i){if(i){if(d.getAggregation("_labels")&&d.getAggregation("_labels").length>0){r.writeAttribute("tabindex",0);}r.write(">");i=false;}d.setZoomLevel(c.getZoomLevel());c.addAggregation("_connections",d);r.renderControl(d);return i;};
b._renderTableHeader=function(r,c,l,d){var L,n=null,N=null,o,f;r.write("<thead");r.writeAttribute("id",c.getId()+"-thead");r.write(">");r.write("<tr");r.addClass("sapSuiteUiCommonsPFHeader");r.addClass("sapSuiteUiCommonsPFHeaderHidden");if(c.getShowLabels()){r.addClass("sapSuiteUiPFWithLabel");}r.writeClasses();r.write(">");r.write("<th></th>");L=0;while(L<d-1){r.write("<th></th><th></th><th></th><th></th><th></th>");L++;}r.write("<th></th><th></th><th></th>");r.write("<th></th>");r.write("</tr>");r.write("<tr");r.addClass("sapSuiteUiCommonsPFHeaderRow");r.writeClasses();r.write(">");r.write("<th>");o=P.createNewStartSymbol(c._isHeaderMode());r.renderControl(o);r.write("</th>");L=0;var i=0;var g=[];var s="1";f=false;while(L<(d-1)){n=l[L];N=l[L+1];if(n.getLaneId()+s===N.getLaneId()){i=i+1;g.push(n.getState());}else if(i===0){this._renderNormalNodeHeader(r,c,n,L,d);}else{g.push(n.getState());f=true;this._renderMergedNodeHeader(r,c,n,i,g,f);g=[];i=0;}L++;}if(i===0){if(!N){N=l[0];}this._renderNormalNodeHeader(r,c,N,L,d);}else{g.push(N.getState());f=false;this._renderMergedNodeHeader(r,c,n,i,g,f);i=0;}r.write("<th>");o=P.createNewEndSymbol(c._isHeaderMode());r.renderControl(o);r.write("</th>");r.write("</tr>");r.write("</thead>");};
b._renderTableBody=function(r,c,l,d,f){var i,j,m,M,n;var s=b._checkIfHighlightedOrSelectedNodesExists(f);r.write("<tbody>");m=d.length;if(m>0){r.write("<tr>");r.write("<td");r.writeAttributeEscaped("colspan",(l*5).toString());r.write(">");r.write("</tr>");}i=0;while(i<m){r.write("<tr>");r.write("<td></td>");M=d[i].length;j=0;while(j<M-1){n=d[i][j];var g=true;if((j==0)||(j%2)){r.write("<td");}else{r.write("<td colspan=\"4\"");if(D.browser.chrome){r.addClass("sapSuiteUiCommonsProcessFlowZIndexForConnectors");r.writeClasses();}}if(n){if(n.getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"){g=b._renderNode(r,c,n,g);}else{n._setShowLabels(c.getShowLabels());b._setLabelsInConnection(d,f,n,{row:i,column:j},c,s);g=b._renderConnection(r,c,n,g);}}if(g){r.write(">");}r.write("</td>");j++;}r.write("<td></td>");r.write("<td></td>");r.write("</tr>");i++;}r.write("</tbody>");};
b._renderBasicStructure=function(r,c){r.write("<div");var o={};o.label=c._getAriaText();A.writeAriaProperties(r,o,c.getAriaProperties());r.writeControlData(c);r.addClass("sapSuiteUiPFContainer");if(c._arrowScrollable){r.addClass("sapPFHScrollable");if(c._bPreviousScrollForward){r.addClass("sapPFHScrollForward");}else{r.addClass("sapPFHNoScrollForward");}if(c._bPreviousScrollBack){r.addClass("sapPFHScrollBack");}else{r.addClass("sapPFHNoScrollBack");}}else{r.addClass("sapPFHNotScrollable");}r.writeClasses();r.write(">");this._writeCounter(r,c,"Left");r.renderControl(c._getScrollingArrow("left"));r.write("<div");r.writeAttribute("id",c.getId()+"-scrollContainer");r.addClass("sapSuiteUiScrollContainerPF");r.addClass("sapSuiteUiDefaultCursorPF");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-scroll-content");r.writeAttribute("tabindex",0);r.write(">");if(!c.getLanes()||c.getLanes().length==0){r.write("</div>");r.write("</div>");r.write("</div>");return true;}return false;};
b._getZoomStyleClass=function(c){switch(c.getZoomLevel()){case a.One:return"sapSuiteUiCommonsPFZoomLevel1";case a.Two:return"sapSuiteUiCommonsPFZoomLevel2";case a.Three:return"sapSuiteUiCommonsPFZoomLevel3";case a.Four:return"sapSuiteUiCommonsPFZoomLevel4";default:break;}};
b._setLabelsInConnection=function(c,d,f,p,C,s){for(var i=0;i<d.length;i++){var o=d[i];if(o&&o.label){for(var j=0;j<o.connectionParts.length;j++){var g=o.connectionParts[j];if(g.x===p.column&&g.y===p.row){if(c[p.row][p.column+1]&&c[p.row][p.column+1].getMetadata().getName()==="sap.suite.ui.commons.ProcessFlowNode"&&c[p.row][p.column+1].getNodeId()===o.targetNode.getNodeId()){b._setLineTypeInLabel(o,s);if(C._bHighlightedMode&&!o.label._getHighlighted()){o.label.setEnabled(false);}if(o.label.getEnabled()){if(o.label.hasListeners("press")){o.label.detachEvent("press",C._handleLabelClick,C);}o.label.attachPress(C._handleLabelClick,C);}f.addAggregation("_labels",o.label,true);}}}}}};
b._setLineTypeInLabel=function(c,s){var C=false,t,l=false,d=false;if(c.sourceNode.getSelected()&&c.targetNode.getSelected()){C=true;c.label._setSelected(true);}else{c.label._setSelected(false);}t=c.targetNode;if(t.getHighlighted()){var p=t.getParents(),S;for(var i=0;i<p.length;i++){S=sap.ui.getCore().byId(p[i]);if(S.getHighlighted()){l=true;break;}}}if(l){d=true;c.label._setHighlighted(true);}else{c.label._setHighlighted(false);}if(s&&!C&&!d){c.label._setDimmed(true);}else{c.label._setDimmed(false);}};
b._checkIfHighlightedOrSelectedNodesExists=function(c){var s=false;for(var i=0;i<c.length;i++){var C=c[i];if(C.label){if(C.sourceNode.getSelected()&&C.targetNode.getSelected()||C.sourceNode.getHighlighted()&&C.targetNode.getHighlighted()){s=true;}}}return s;};
b._writeCounter=function(r,c,d){r.write("<span");r.writeAttributeEscaped("id",c.getId()+"-counter"+d);r.addClass("suiteUiPFHCounter");r.addClass(e("suiteUiPFHCounter"+d));r.writeClasses();r.write(">");r.writeEscaped("0");r.write("</span>");};
return b;},true);
sap.ui.predefine('sap/suite/ui/commons/ThreePanelThingViewer',["sap/ui/thirdparty/jquery",'./library','sap/ui/ux3/library','sap/ui/commons/library','./VerticalNavigationBar','sap/ui/ux3/ThingViewer','sap/ui/commons/Button','sap/suite/ui/commons/ThreePanelThingViewerRenderer',"sap/ui/events/ControlEvents","sap/ui/dom/containsOrEquals"],function(q,l,U,C,V,T,B,a,b,c){"use strict";
var d=T.extend("sap.suite.ui.commons.ThreePanelThingViewer",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{logo:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:null},sidebarWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:'244px'}},aggregations:{menuContent:{type:"sap.ui.commons.Link",multiple:true,singularName:"menuContent"}}}});
d.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oNavBar=new V();this.setAggregation("navBar",this._oNavBar);this._oNavBar.attachSelect(function(o){var i=o.getParameters().item;if(this.fireFacetSelected({id:i.getId(),key:i.getKey(),item:i})){this.setSelectedFacet(i);}else{o.preventDefault();}},this);this._iSelectedMenuItem=0;this._oMenuButton=new B({id:this.getId()+"-menu-button",tooltip:this._rb.getText("THREEPANELTHINGVIEWER_BUTTON_MENU_TOOLTIP"),lite:true,press:[this._toggleMenuPopup,this]});this._oMenuButton.addStyleClass("sapSuiteTvTitleMb");this.fAnyEventHandlerProxy=q.proxy(this.onAnyEvent,this);};
d.prototype.exit=function(){this._oMenuButton.destroy();b.unbindAnyEvent(this.fAnyEventHandlerProxy);};
d.prototype.onAfterRendering=function(){this._bMenuOpened=false;this._updateMenuPopup();this._toggleHeaderContent();};
d.prototype.selectDefaultFacet=function(){this._selectDefault();return this;};
d.prototype._toggleMenuPopup=function(){q(document.getElementById(this.getId()+"-menu-popup")).toggle();this._bMenuOpened=!this._bMenuOpened;if(this._bMenuOpened){b.bindAnyEvent(this.fAnyEventHandlerProxy);this.getMenuContent()[0].focus();this._iSelectedMenuItem=0;}else{b.unbindAnyEvent(this.fAnyEventHandlerProxy);}};
d.prototype._updateMenuPopup=function(){var h=q(document.getElementById(this.getId()+"-header")).width();var m=q(document.getElementById(this.getId()+"-menu-popup"));var s=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";var S=this.getMenuContent().length;m.css(s,(h-22)+"px");m.children().each(function(i){var $=q(this);$.attr("tabindex","-1");$.attr("role","menuitem");$.attr("aria-posinset",i+1);$.attr("aria-setsize",S);});};
d.prototype._rerenderFacetContent=function(){var $=q(document.getElementById(this.getId()+"-facetContent"));if($.length>0){var r=sap.ui.getCore().createRenderManager();a.renderFacetContent(r,this);r.flush($[0]);r.destroy();this._resize=false;this._setTriggerValue();this._onresize();}};
d.prototype._rerenderHeader=function(){var $=q(document.getElementById(this.getId()+"-header"));if($.length>0){var r=sap.ui.getCore().createRenderManager();a.renderHeader(r,this);r.flush($[0]);r.destroy();}};
d.prototype._rerenderHeaderContent=function(){var $=q(document.getElementById(this.getId()+"-headerContent"));if($.length>0){var r=sap.ui.getCore().createRenderManager();a.renderHeaderContent(r,this);r.flush($[0]);r.destroy();}};
d.prototype._toggleHeaderContent=function(){var o=q(document.getElementById(this.getId()+"-headerContent"));if(this.getShowHeader()){o.show();}else{o.hide();}};
d.prototype.onAnyEvent=function(e){if(this._bMenuOpened&&(e.type==="mousedown"||e.type==="focusin")){var s=e.target;var D=this.getId()+"-menu-popup"?window.document.getElementById(this.getId()+"-menu-popup"):null;if(!c(D,s)||s.tagName==="BODY"){this._toggleMenuPopup();}}};
d.prototype.onsapescape=function(){if(this._bMenuOpened){this._toggleMenuPopup();this._oMenuButton.focus();}};
d.prototype.onsapnext=function(e){if(this._bMenuOpened){var m=this.getMenuContent();this._iSelectedMenuItem++;if(this._iSelectedMenuItem>=m.length){this._iSelectedMenuItem=0;}m[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation();}};
d.prototype.onsapprevious=function(e){if(this._bMenuOpened){var m=this.getMenuContent();this._iSelectedMenuItem--;if(this._iSelectedMenuItem<0){this._iSelectedMenuItem=m.length-1;}m[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation();}};
d.prototype.setShowHeader=function(s){this.setProperty("showHeader",s,true);this._toggleHeaderContent();return this;};
return d;});
sap.ui.predefine('sap/suite/ui/commons/ThreePanelThingViewerRenderer',['sap/ui/core/Renderer','sap/ui/ux3/ThingViewerRenderer'],function(R,T){"use strict";var a=R.extend(T);
a.renderContent=function(r,c){r.write("<div");r.addClass("sapSuiteTvMinHeight");r.writeClasses();r.write(">");r.write("<header");r.writeAttribute("id",c.getId()+"-header");r.addClass("sapSuiteTvTitle");r.writeClasses();r.addStyle("width",c.getSidebarWidth());r.writeStyles();r.write(">");this.renderHeader(r,c);r.write("</header>");r.write("<nav");r.writeAttribute("id",c.getId()+"-navigation");r.addClass("sapSuiteTvNav");if(!c.getLogo()){r.addClass("sapSuiteTvNavNoLogo");}r.writeClasses();r.addStyle("width",c.getSidebarWidth());r.writeStyles();r.write(">");r.renderControl(c._getNavBar());r.write("</nav>");r.write("<aside");r.writeAttribute("id",c.getId()+"-headerContent");r.addClass("sapSuiteTvHeader");r.writeClasses();r.write(">");this.renderHeaderContent(r,c);r.write("</aside>");r.write("<div");r.writeAttribute("id",c.getId()+"-facetContent");r.addClass("sapSuiteTvFacet");r.writeClasses();r.write(">");this.renderFacetContent(r,c);r.write("</div>");if(c.getLogo()){r.write("<footer");r.writeAttribute("id",c.getId()+"-footer");r.addClass("sapSuiteTvLogo");r.writeClasses();r.addStyle("width",c.getSidebarWidth());r.writeStyles();r.write(">");r.write("<img");r.writeAttribute("id",c.getId()+"-logo");r.writeAttribute("role","presentation");r.writeAttributeEscaped("src",c.getLogo());r.addClass("sapSuiteTvLogoIcon");r.writeClasses();r.write("/>");r.write("</footer>");}r.write("</div>");};
a.renderHeader=function(r,c){var m=c.getMenuContent().length;r.write("<div");r.addClass("sapSuiteTvTitleBar");r.writeClasses();r.write(">");if(c.getIcon()){r.write("<img");r.writeAttribute("id",c.getId()+"-swatch");r.writeAttribute("role","presentation");r.writeAttributeEscaped("src",c.getIcon());r.addClass("sapSuiteTvTitleIcon");r.writeClasses();r.write("/>");}if(m>0){r.renderControl(c._oMenuButton);}r.write("<div");r.writeAttribute("role","heading");r.writeAttribute("aria-level",1);r.writeAttributeEscaped("title",c.getType());r.addClass("sapSuiteTvTitleType");r.addClass("sapSuiteTvTextCrop");r.writeClasses();r.write(">");r.writeEscaped(c.getType());r.write("</div>");r.write("<div");r.writeAttribute("role","heading");r.writeAttribute("aria-level",2);r.writeAttributeEscaped("title",c.getTitle());r.addClass("sapSuiteTvTitleFirst");r.writeClasses();r.write(">");r.writeEscaped(c.getTitle());r.write("</div>");r.write("<div");r.writeAttribute("role","heading");r.writeAttribute("aria-level",3);r.writeAttributeEscaped("title",c.getSubtitle());r.addClass("sapSuiteTvTitleSecond");r.addClass("sapSuiteTvTextCrop");r.writeClasses();r.write(">");r.writeEscaped(c.getSubtitle());r.write("</div>");r.write("</div>");this.renderFlyOutMenu(r,c);};
a.renderFacetContent=function(r,c){var f=c.getFacetContent();for(var i=0;i<f.length;i++){var g=f[i];r.write("<div");r.writeAttribute("role","form");if(g.getColspan()){r.addClass("sapUiUx3TVFacetThingGroupSpan");}else{r.addClass("sapUiUx3TVFacetThingGroup");}r.writeClasses();r.write(">");r.write("<div");r.writeAttributeEscaped("title",g.getTitle());r.addClass("sapUiUx3TVFacetThingGroupContentTitle");r.writeClasses();r.write(">");r.write("<span>");r.writeEscaped(g.getTitle());r.write("</span>");r.write("</div>");r.write("<div");r.addClass("sapUiUx3TVFacetThingGroupContent");r.writeClasses();r.write(">");var G=g.getContent();for(var j=0;j<G.length;j++){r.renderControl(G[j]);}r.write("</div>");r.write("</div>");}};
a.renderFlyOutMenu=function(r,c){r.write("<div");r.writeAttribute("id",c.getId()+"-menu-popup");r.writeAttribute("role","menu");r.addClass("sapSuiteTvPopupMenu");r.writeClasses();r.write(">");var m=c.getMenuContent();for(var i=0;i<m.length;i++){var M=m[i];M.addStyleClass("sapSuiteTvPopupMenuLink");r.renderControl(M);}r.write("</div>");};
return a;},true);
sap.ui.predefine('sap/suite/ui/commons/Timeline',["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/ui/core/format/DateFormat","sap/ui/model/ClientListBinding","sap/ui/model/FilterType","sap/suite/ui/commons/TimelineNavigator","sap/suite/ui/commons/util/DateUtils","sap/suite/ui/commons/util/ManagedObjectRegister","sap/ui/model/json/JSONModel","sap/ui/model/Sorter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/base/ManagedObject","sap/suite/ui/commons/TimelineItem","sap/suite/ui/commons/TimelineRenderManager","sap/ui/core/delegate/ScrollEnablement","sap/ui/base/Object","sap/base/assert","sap/base/Log","./TimelineRenderer"],function(q,l,C,R,D,c,F,T,d,M,J,S,e,f,g,h,j,m,B,n,L,o){"use strict";var p=l.TimelineScrollingFadeout,r=l.TimelineAlignment,s=l.TimelineGroupType,t=l.TimelineFilterType,u=l.TimelineAxisOrientation;
var v=C.extend("sap.suite.ui.commons.Timeline",{metadata:{library:"sap.suite.ui.commons",properties:{alignment:{type:"sap.suite.ui.commons.TimelineAlignment",group:"Misc",defaultValue:"Right"},axisOrientation:{type:"sap.suite.ui.commons.TimelineAxisOrientation",group:"Misc",defaultValue:"Vertical"},data:{type:"object",group:"Misc",defaultValue:null,deprecated:true},enableAllInFilterItem:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},enableBackendFilter:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},enableBusyIndicator:{type:"boolean",group:"Misc",defaultValue:true},enableDoubleSided:{type:"boolean",group:"Misc",defaultValue:false},enableModelFilter:{type:"boolean",group:"Misc",defaultValue:true},enableScroll:{type:"boolean",group:"Misc",defaultValue:true},enableSocial:{type:"boolean",group:"Misc",defaultValue:false},filterTitle:{type:"string",group:"Misc",defaultValue:null},forceGrowing:{type:"boolean",group:"Misc",defaultValue:false},group:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},groupBy:{type:"string",group:"Misc",defaultValue:null},groupByType:{type:"sap.suite.ui.commons.TimelineGroupType",group:"Misc",defaultValue:"None"},growing:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},growingThreshold:{type:"int",group:"Misc",defaultValue:5},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:''},lazyLoading:{type:"boolean",group:"Dimension",defaultValue:false},noDataText:{type:"string",group:"Misc",defaultValue:null},scrollingFadeout:{type:"sap.suite.ui.commons.TimelineScrollingFadeout",group:"Misc",defaultValue:"None"},showFilterBar:{type:"boolean",group:"Misc",defaultValue:true,deprecated:true},showHeaderBar:{type:"boolean",group:"Misc",defaultValue:true},showIcons:{type:"boolean",group:"Misc",defaultValue:true},showItemFilter:{type:"boolean",group:"Misc",defaultValue:true},showSearch:{type:"boolean",group:"Misc",defaultValue:true},showSort:{type:"boolean",group:"Misc",defaultValue:true},showSuggestion:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},showTimeFilter:{type:"boolean",group:"Misc",defaultValue:true},sort:{type:"boolean",group:"Misc",defaultValue:true},dateTimePath:{type:"string",group:"Misc",defaultValue:""},sortOldestFirst:{type:"boolean",group:"Misc",defaultValue:false},textHeight:{type:"string",group:"Misc",defaultValue:''},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'}},defaultAggregation:"content",aggregations:{content:{type:"sap.suite.ui.commons.TimelineItem",multiple:true,singularName:"content"},customFilter:{type:"sap.ui.core.Control",multiple:false},filterList:{type:"sap.suite.ui.commons.TimelineFilterListItem",multiple:true,singularName:"filterList"},suggestionItems:{type:"sap.m.StandardListItem",multiple:true,singularName:"suggestionItem",deprecated:true}},events:{addPost:{deprecated:true,parameters:{value:{type:"string"}}},customMessageClosed:{},filterOpen:{},filterSelectionChange:{parameters:{type:{type:"sap.suite.ui.commons.TimelineFilterType"},searchTerm:{type:"string"},selectedItem:{type:"string"},selectedItems:{type:"object"},timeKeys:{type:"object"},clear:{type:"boolean"}}},grow:{},itemFiltering:{parameters:{item:{type:"sap.suite.ui.commons.TimelineItem"},reasons:{type:"object"},dataKeys:{type:"object"},timeKeys:{type:"object"},searchTerm:{type:"string"}}},select:{parameters:{selectedItem:{type:"sap.suite.ui.commons.TimelineItem"},userAction:{type:"boolean"}}},suggest:{deprecated:true,parameters:{suggestValue:{type:"string"}}},suggestionItemSelected:{deprecated:true,parameters:{selectedItem:{type:"sap.ui.core.Item"}}}},designTime:true}});
function w(a,b){var _;Object.defineProperty(a,b,{get:function(){return typeof _==="function"?_():_;},set:function(i){_=i;}});}
var x=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),y=Object.freeze({ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"}),z=Object.freeze({UP:"UP",DOWN:"DOWN",NONE:"NONE"}),A={Year:D.getDateInstance({pattern:"yyyy"}),Quarter:D.getDateInstance({pattern:"QQQQ yyyy"}),Month:D.getDateInstance({format:"yyyyMMMM"}),Week:D.getDateInstance({pattern:"w"}),Day:D.getDateInstance({style:"long"}),MonthDay:D.getDateInstance({style:"medium"})};
function E(a,b){var i;n(Array.isArray(a),"aArray must be an array.");if(typeof a.findIndex==="function"){return a.findIndex(b);}for(i=0;i<a.length;i++){if(b(a[i],i,a)){return i;}}return-1;}
v.prototype.init=function(){this._objects=new M();this.reset();w(this,"_endDate");w(this,"_startDate");this._initControls();this.setBusyIndicatorDelay(0);};
v.prototype.resetTimeLimits=function(){this._maxDate=null;this._minDate=null;};
v.prototype.setCustomModelFilter=function(a,b){var i=this.getBinding("content");if(i){var k=i.aFilters||[];var G=E(k,function(b){return b._customTimelineId===a;});if(G!==-1){k.splice(G,1);}if(b!==null){b._customTimelineId=a;k.push(b);}i.filter(k,F.Control);}};
v.prototype.setCustomGrouping=function(G){var b=this.getBindingInfo("content");this._fnCustomGroupBy=G;if(b){this._bindGroupingAndSorting(b);this.updateAggregation("content");}};
v.prototype.setCurrentTimeFilter=function(a){this._startDate=a.from;this._endDate=a.to;this._rangeFilterType=a.type;};
v.prototype.setCurrentSearch=function(a){this._objects.getSearchField().setValue(a);};
v.prototype.setCurrentFilter=function(a){var b=this,H=function(V){for(var i=0;i<a.length;i++){if(a[i]===V){return true;}}return false;};if(!a){return;}if(!Array.isArray(a)){a=[a];}if(this._aFilterList.length===0){this._setFilterList();}b._currentFilterKeys=[];this._aFilterList.forEach(function(i){var k=i.key;if(H(k)){b._currentFilterKeys.push({key:k,text:i.text?i.text:i.key});}});};
v.prototype.getGroups=function(){return this._useBinding()?this.getContent().filter(function(i){return i._isGroupHeader;}):this._aGroups;};
v.prototype.exit=function(){this._objects.destroyAll();if(this.oItemNavigation){this.removeDelegate(this.oItemNavigation);this.oItemNavigation.destroy();this.oItemNavigation=null;}if(this._oScroller){this._oScroller.destroy();this._oScroller=null;}if(this.oResizeListener){R.deregister(this.oResizeListener);this.oResizeListener=null;}};
v.prototype.adjustUI=function(){this._performUiChanges(true);};
v.prototype.setModelFilterMessage=function(a,b){if(a===t.Data){this._dataMessage=b;}if(a===t.Time){this._rangeMessage=b;}};
v.prototype.setCustomFilterMessage=function(a){this._customFilterMessage=a;};
v.prototype.setModelFilter=function(a){switch(a.type){case t.Data:this._dataFilter=a.filter;break;case t.Time:this._rangeDataFilter=a.filter;break;case t.Search:this._searchFilter=a.filter;break;default:}if(a.refresh!==false){this.recreateFilter();}};
v.prototype.getAggregation=function(a){switch(a){case"headerBar":return this.getHeaderBar();case"searchField":return this._objects.getSearchField();case"sortIcon":return this._objects.getSortIcon();case"filterIcon":return this._objects.getFilterIcon();default:return C.prototype.getAggregation.apply(this,arguments);}};
v.prototype._formatGroupBy=function(a,b){if(this._fnCustomGroupBy){return this._fnCustomGroupBy(a);}var k=a,i=a;if(a instanceof Date){switch(b){case s.Year:k=a.getFullYear();i=A.Year.format(a);break;case s.Quarter:k=a.getFullYear()+"/"+Math.floor(a.getMonth()/4);i=A.Quarter.format(a);break;case s.Month:k=a.getFullYear()+"/"+a.getMonth();i=A.Month.format(a);break;case s.Week:var G=new Date(a),H=new Date(a),I=a.getFullYear(),K=A.Week.format(a),N=a.getDate()-a.getDay(),O=N+6,P=new Date(G.setDate(N)),Q=new Date(H.setDate(O));k=I+"/"+K;i=A.MonthDay.format(P)+" \u2013 "+A.MonthDay.format(Q);break;case s.Day:k=a.getFullYear()+"/"+a.getMonth()+"/"+a.getDate();i=A.Day.format(a);break;default:}}return{key:k,title:i,date:a};};
v.prototype._fnDateDiff=function(a,b,i){var k,Y,G,H,I=0;b=b||this._minDate;i=i||this._maxDate;switch(a){case s.Year:I=i.getFullYear()-b.getFullYear();break;case s.Month:k=(i.getFullYear()-b.getFullYear())*12;k+=i.getMonth()-b.getMonth();I=k<=0?0:k;break;case s.Quarter:Y=(i.getFullYear()-b.getFullYear())*4;G=Math.floor(b.getMonth()/3);H=Math.floor(i.getMonth()/3);I=Y+(H-G);break;case s.Day:var K=24*60*60*1000;I=Math.round(Math.abs((b.getTime()-i.getTime())/(K)));break;default:}return I;};
v.prototype._fnAddDate=function(V,a){var N,b,i,k=function(H,I,K){this.setHours(H);this.setMinutes(I);this.setSeconds(K);},G=function(H,b,i){if(a===z.UP){k.call(i,23,59,59);return new Date(Math.min.apply(null,[this._maxDate,i]));}if(a===z.DOWN){k.call(b,0,0,0);return new Date(Math.max.apply(null,[this._minDate,b]));}return H;};switch(this._rangeFilterType){case s.Year:N=new Date(new Date(this._minDate).setFullYear(this._minDate.getFullYear()+V));b=new Date(N.getFullYear(),0,1);i=new Date(N.getFullYear(),11,31);break;case s.Month:N=new Date(new Date(this._minDate).setMonth(this._minDate.getMonth()+V));b=new Date(N.getFullYear(),N.getMonth(),1);i=new Date(N.getFullYear(),N.getMonth()+1,0);break;case s.Quarter:N=new Date(new Date(this._minDate).setMonth(this._minDate.getMonth()+(V*3)));var Q=N.getMonth()%3;b=new Date(N.getFullYear(),N.getMonth()-Q,1);i=new Date(N.getFullYear(),N.getMonth()+(2-Q)+1,0);break;case s.Day:N=b=i=new Date(new Date(this._minDate).setDate(this._minDate.getDate()+V));break;default:}return G.call(this,N,b,i);};
v.prototype._calculateRangeTypeFilter=function(){var a=this._fnDateDiff(s.Day);if(a>500){return s.Year;}else if(a>200){return s.Quarter;}else if(a>62){return s.Month;}return s.Day;};
v.prototype._setRangeFilter=function(){var a=this._fnDateDiff(this._rangeFilterType);this._objects.getTimeRangeSlider().setMin(0);this._objects.getTimeRangeSlider().setMax(a);this._objects.getTimeRangeSlider().setRange([0,a]);this._objects.getTimeRangeSlider().invalidate();};
v.prototype._sortClick=function(){var b,P;this._sortOrder=this._sortOrder===y.ASCENDING?y.DESCENDING:y.ASCENDING;this._objects.getSortIcon().setIcon(this._sortOrder===y.ASCENDING?"sap-icon://arrow-bottom":"sap-icon://arrow-top");if(this._useModelFilter()){b=this.getBinding("content");P=this._findDateTimeBindingPath();b.sort(this._getDefaultSorter(P,this._sortOrder===y.ASCENDING));}else{this.invalidate();}};
v.prototype._sort=function(a,b){var i=b||this._sortOrder;a.sort(function(k,G){var H=k.getDateTime(),I=G.getDateTime(),K=(i===y.ASCENDING)?-1:1;return H<I?1*K:-1*K;});return a;};
v.prototype._loadMore=function(){var b,a,i=function(){var k=this._displayShowMore()?this.getGrowingThreshold():this._calculateItemCountToLoad(this.$());this._iItemCount+=k;this._iItemCount=Math.min(this._getMaxItemsCount(),this._iItemCount);}.bind(this);this._lastScrollPosition.more=this._isVertical()?this._$content.get(0).scrollTop:this._$content.get(0).scrollLeft;this._setBusy(true);this.fireGrow();if(this._useBinding()){if(this._isMaxed()){this._setBusy(false);return;}i();b=this.getBindingInfo("content");b.startIndex=0;if(!this._loadAllData()){b.length=this._iItemCount;}a=this.getBinding("content").getContexts(0,b.length);if(a&&a.dataRequested){return;}this.updateAggregation("content");}else{i();this.invalidate();}this.oItemNavigation.refocusOnNextUpdate();};
v.prototype.recreateFilter=function(b){var a=this.getBinding("content"),i=this,k=[],G=[];if(a){if(!b){k=a.aFilters||[];}if(this._dataFilter){G.push(this._dataFilter);}if(this._rangeDataFilter){G.push(this._rangeDataFilter);}if(this._searchFilter){G.push(this._searchFilter);}if(this._filter&&!b){var H=E(k,function(I){return I===i._filter;});if(H!==-1){k.splice(H,1);}}if(G.length>0){this._filter=new e(G,true);k.push(this._filter);}a.filter(k,F.Control);}else{this.invalidate();}};
v.prototype._getRangeMessage=function(){var a=this._rangeMessage;if(!a){var b=this._formatGroupBy(this._startDate,this._rangeFilterType).title,i=this._formatGroupBy(this._endDate,this._rangeFilterType).title;a=x.getText("TIMELINE_RANGE_SELECTION")+" (";a+=b+" - "+i+")";}return a;};
v.prototype._getFilterMessage=function(){var a="",b=null;if(this._dataMessage){a=this._dataMessage;}else if(this._currentFilterKeys.length>0){a=this._currentFilterKeys.map(function(i){return i.text?i.text:i.key;}).join(", ");a=this._getFilterTitle()+" ("+a+")";}if(this._rangeDataFilter||this._rangeMessage||(this._startDate&&this._endDate)){a=a?a+", ":"";a+=this._getRangeMessage();}if(this._customFilterMessage){a=a?a+", "+this._customFilterMessage:this._customFilterMessage;}if(a){b=x.getText("TIMELINE_FILTER_INFO_BY",a);}return b;};
v.prototype.refreshContent=function(){var b=this.getBinding("content"),a=this.getBindingInfo("content"),G=this.getGrowingThreshold();this._setBusy(true);if(b&&a){b.getContexts(0,G);a.length=G;b.attachEventOnce("dataReceived",q.proxy(function(){this.updateAggregation("content");},this));}else{this.updateAggregation("content");}};
v.prototype.updateContent=function(){this._setBusy(false);this.updateAggregation("content");this.invalidate();};
v.prototype.destroyContent=function(){var $=this.$("line"),a=this.$().find(".sapSuiteUiCommonsTimelineItemGetMoreButton");if($.get(0)){$.remove();}if(a.get(0)){a.remove();}this.destroyAggregation("content");return this;};
v.prototype._search=function(a){var b=this,i,k,G,U,H=[];this._searchValue=a;if(this._useModelFilter()){i=this._fireSelectionChange({searchTerm:this._searchValue,type:t.Search});if(i){this._searchFilter=null;if(this._searchValue){k=this._findBindingPaths("text");G=this._findBindingPaths("title");U=this._findBindingPaths("userName");if(k.length>0){H.push(k);}if(G.length>0){H.push(G);}if(U.length>0){H.push(U);}if(H.length>0){this._searchFilter=new e(H.map(function(I){return new e(I.map(function(K){return new e(K,f.Contains,b._searchValue);}),false);}));}}this.recreateFilter();}}else{this.invalidate();}};
v.prototype._filterData=function(b){var a,P;this._dataMessage="";if(this._useModelFilter()){this._dataFilter=null;a=this._fireSelectionChange({selectedItem:this._currentFilterKeys[0]?this._currentFilterKeys[0].key:"",selectedItems:this._currentFilterKeys,type:t.Data});if(a){if(this._currentFilterKeys.length>0){P=this._findBindingPath("filterValue");if(P){this._dataFilter=new e(this._currentFilterKeys.map(function(i){return new e(P,f.EQ,i.key);}),false);}}}this._rangeDataFilter=null;if(b){a=this._fireSelectionChange({type:t.Time,timeKeys:{from:this._startDate,to:this._endDate}});if(a){P=this._findDateTimeBindingPath();if(P){this._rangeDataFilter=new e({path:P,operator:f.BT,value1:this._startDate,value2:this._endDate});}}}this._setBusy(true);this.recreateFilter();}else{this.invalidate();}};
v.prototype._filterRangeData=function(){var b,P;this._rangeMessage="";if(this._useModelFilter()){b=this._fireSelectionChange({from:this._startDate,to:this._endDate,type:t.Time});if(b){P=this._findDateTimeBindingPath();this._rangeDataFilter=null;if(P){this._rangeDataFilter=new e({path:P,operator:f.BT,value1:this._startDate,value2:this._endDate});}this._setBusy(true);this.recreateFilter();}}else{this.invalidate();}};
v.prototype.applySettings=function(a,b){g.prototype.applySettings.apply(this,[a,b]);this._settingsApplied=true;if(this._bindOptions){this.bindAggregation("content",this._bindOptions);this._bindOptions=null;}};
v.prototype._setFilterList=function(){var k=false,G,I,K,H={},N,O;this._aFilterList=[];if(this._useModelFilter()){this._aFilterList=this.getFilterList().map(function(a){return{key:a.getProperty("key"),text:a.getProperty("text")};});if(this._aFilterList.length===0){O=this._findBindingData("filterValue");N=this.getBinding("content");if(O&&N){G=N.getDistinctValues(O.path);if(Array.isArray(G)){this._aFilterList=G.map(function(a){return{key:a,text:O.formatter?O.formatter(a):a};});this._aFilterList=this._aFilterList.filter(function(a){return a.key;});}k=true;}}}else{I=this.getContent();k=true;for(var i=0;i<I.length;i++){K=I[i].getFilterValue();if(!K){continue;}if(!(K in H)){H[K]=1;this._aFilterList.push({key:K,text:K});}}}if(k){this._aFilterList.sort(function(a,b){if(a.text.toLowerCase){return a.text.toLowerCase().localeCompare(b.text.toLowerCase());}else{return a.text>b.text;}});}};
v.prototype._clearFilter=function(){var a=function(){var G,H=this._objects.getTimeRangeSlider();this._startDate=null;this._endDate=null;this._rangeMessage=null;H.setRange([H.getMin(),H.getMax()]);if(this._useModelFilter()){G=this._fireSelectionChange({clear:true,timeKeys:{from:null,to:null},type:t.Range});}return G;}.bind(this),b=function(){var G;this._currentFilterKeys=[];if(this._useModelFilter()){G=this._fireSelectionChange({clear:true,selectedItems:[],selectedItem:"",type:t.Data});}return G;}.bind(this);var i=b(),k=a();this._customFilterMessage="";if(i||k){if(i){this._dataFilter=null;}if(k){this._rangeDataFilter=null;}this.recreateFilter(true);}else{this.invalidate();}this._objects.destroyObject("FilterContent");this._setupFilterDialog();};
v.prototype._getTimeFilterData=function(){var a=this,I,b,k,G,H=function(i,Q){return N(i,a[Q]).then(function(U){if(U){if(!a._objects.getTimeFilterSelect().getEnabled()){a._objects.getTimeFilterSelect().setEnabled(true);}var V=d.parseDate(U);if(V instanceof Date){a[Q]=V;}}}).catch(function(){a._objects.getTimeFilterSelect().setEnabled(false);});},K=function(i){var Q,U,V,W,X,Y="sap_suite_ui_commons_Timeline";Q=this.getBinding("content").getModel();if(!Q){return Promise.reject();}U=this._findDateTimeBindingPath();if(!U){return;}V=new S(U,i);W=this.getBinding("content");if(!W){return Promise.reject();}if(Q.submitBatch){X={$$groupId:Y};}var Z=Q.bindList(W.getPath(),W.getContext(),V,undefined,X);Z.initialize();var $=Z.getContexts(0,1);if(B.isA(Z,"sap.ui.model.json.JSONListBinding")&&$.length===0){return Promise.reject();}else if($.length>0){return Promise.resolve(d.parseDate($[0].getProperty(U)));}else if(B.isA(Z,"sap.ui.model.odata.v4.ODataListBinding")){a._setBusy(true);return new Promise(function(_,a1){Q.submitBatch(Y).then(function(){a._setBusy(false);P(Z,U,_,a1);});});}else if(Z&&Z.attachDataReceived){a._setBusy(true);return new Promise(function(_,a1){Z.attachDataReceived(function(){a._setBusy(false);P(Z,U,_,a1);});});}return Promise.reject();}.bind(this),N=function(i,G){if(G){return Promise.resolve(G);}return K(i==="max");},O=function(){I=this.getContent();if(I.length>0){this._minDate=I[0].getDateTime();this._maxDate=I[0].getDateTime();for(var i=1;i<I.length;i++){G=I[i].getDateTime();if(G<this._minDate){this._minDate=G;}if(G>this._maxDate){this._maxDate=G;}}}},P=function(i,Q,U,V){var W=i.getContexts(0,1);if(W.length>0){U(d.parseDate(W[0].getProperty(Q)));}else{V();}};return new Promise(function(i,Q){if(!a._maxDate||!a._minDate){if(a._useModelFilter()){b=H("min","_minDate",b);k=H("max","_maxDate",k);Promise.all([b,k]).then(function(){i();}).catch(function(){Q();});}else{O.call(a);i();}}else{i();}});};
v.prototype._openFilterDialog=function(){var a=this.getCustomFilter();if(a){if(typeof a.openBy==="function"){a.openBy(this._objects.getFilterIcon());}else if(typeof a.open==="function"){a.open();}else{L.error("CustomFilter is expected to have an openBy or open function. The provided instance doesn't have either.");}this.fireFilterOpen();return;}this._filterState={data:false,range:false};this._objects.getFilterContent().open();this._objects.getTimestampFilterPicker().resizeDialog(this._objects);this.fireFilterOpen();};
v.prototype._createGroupHeader=function(a,b){var i=this.getId()+"-timelinegroupheader-"+this._groupId,k=a.key,G=new h(i,{text:"GroupHeader",dateTime:a.date,userName:k,title:a.title,icon:"sap-icon://arrow-down"});G._isGroupHeader=true;if(b){G.setParent(this,"content");this._aGroups.push(G);}else{this.addAggregation("content",G,false);}this._groupId++;return G;};
v.prototype._getDefaultSorter=function(P,a){var b=this;if(P){return new S(P,!a,function(i){var V=i.getProperty(P),k=d.parseDate(V);return k instanceof Date?b._formatGroupBy(k,b.getGroupByType()):{date:k};});}};
v.prototype._findBindingInfoFromTemplate=function(P,a){if(!a){var b=this.getBindingInfo("content");if(b){a=b.template;}}if(a){var i=a.getBindingInfo(P);if(i&&i.parts&&i.parts[0]){return i;}}return null;};
v.prototype._findBindingPaths=function(P,a){var i=this._findBindingInfoFromTemplate(P,a);if(i&&i.parts){return i.parts.map(function(I){return I.path;});}return[];};
v.prototype._findDateTimeBindingPath=function(b){var a=this.getDateTimePath();if(a){return a;}var i=this._findBindingInfoFromTemplate("dateTime",b);if(i){return i.parts[0].path;}return null;};
v.prototype._findBindingPath=function(P,a){var i=this._findBindingInfoFromTemplate(P,a);if(i){return i.parts[0].path;}return null;};
v.prototype._findBindingData=function(P,a){var i=this._findBindingInfoFromTemplate(P,a);if(i){return{path:i.parts[0].path,formatter:i.formatter};}return null;};
v.prototype._bindGroupingAndSorting=function(b){if(!this._isGrouped()&&this.getSort()){var a=this._findDateTimeBindingPath(b.template);if(a){b.sorter=this._getDefaultSorter(a,this.getSortOldestFirst());}}b.groupHeaderFactory=null;if(this._isGrouped()){b.sorter=this._getDefaultSorter(this.getGroupBy(),this.getSortOldestFirst());b.groupHeaderFactory=q.proxy(this._createGroupHeader,this);}};
v.prototype.updateBindingContext=function(){this.reset();return g.prototype.updateBindingContext.apply(this,arguments);};
v.prototype.bindAggregation=function(N,O){if(N==="content"){if(!this._settingsApplied){this._bindOptions=O;return null;}this._bindGroupingAndSorting(O);if(this._lazyLoading()){this._iItemCount=this._calculateItemCountToLoad(q(window));if(!this._loadAllData(true)){O.length=this._iItemCount;}}else if(this._displayShowMore()&&!this._loadAllData(O.template||O.factory)){this._iItemCount=this.getGrowingThreshold();O.length=this._iItemCount;}this._oOptions=O;}return g.prototype.bindAggregation.apply(this,[N,O]);};
v.prototype._calculateItemCountToLoad=function($){var i=u.Vertical===this.getAxisOrientation(),a=i?$.height():$.width(),b=this.getEnableDoubleSided(),k=b?0.6:1,G=i?1200:2000,I=i?120:280,H=(13*k),K;if(!a){a=G;}K=(a/(I*k))*1.5;return Math.floor(Math.max(K,H));};
v.prototype.onBeforeRendering=function(){var G=this.getGrowingThreshold(),a;this._bRtlMode=sap.ui.getCore().getConfiguration().getRTL();this._objects.getSortIcon().setIcon(this._sortOrder===y.ASCENDING?"sap-icon://arrow-bottom":"sap-icon://arrow-top");this._aGroups=[];this._bRendered=false;a=this.getContent();if(!this._iItemCount&&!this._useBinding()&&this._lazyLoading()){this._iItemCount=this._calculateItemCountToLoad(q(window));}if(!this._iItemCount){if(G!==0){this._iItemCount=G;}}if(!this._iItemCount||!this._useGrowing()){this._iItemCount=a.filter(function(i){return!i._isGroupHeader;}).length;}this._setOutput(a);};
v.prototype.addContentGroup=function(a){};
v.prototype._performScroll=function(a){var b=this,i=this._isVertical()?this._$content.get(0).scrollTop+a:this._$content.get(0).scrollLeft+a;i=Math.max(i,0);if(this._isVertical()){this._$content.get(0).scrollTop=i;}else{this._$content.get(0).scrollLeft=i;}if(this._manualScrolling){setTimeout(b._performScroll.bind(b,a),50);}};
v.prototype._moveScrollBar=function(U){if(this._lastScrollPosition.more||this._lastScrollPosition.backup){if(U){this._lastScrollPosition.more=this._lastScrollPosition.backup;}if(this._isVertical()){this._oScroller.scrollTo(0,this._lastScrollPosition.more);}else{this._oScroller.scrollTo(this._lastScrollPosition.more,0);}if(!U){this._lastScrollPosition.backup=this._lastScrollPosition.more;}this._lastScrollPosition.more=0;}};
v.prototype.onAfterRendering=function(){var $=this.$();if(this._isVertical()){this._$content=this.$("content");this._$scroll=this.$("scroll");}else{this._$content=this.$("contentH");this._$scroll=this.$("scrollH");}this.setBusy(false);if(!this._oScroller){this._oScroller=new m(this,this._$scroll.attr('id'),{});}this._oScroller._$Container=this._$scroll.parent();this._oScroller.setVertical(this._isVertical());this._oScroller.setHorizontal(!this._isVertical());this._startItemNavigation();this._scrollersSet=false;this._scrollMoreEvent=true;this._lastStateDblSided=null;this._showCustomMessage();this._setupScrollEvent();this._performUiChanges();this._moveScrollBar();this._bRendered=true;$.css("opacity",1);};
v.prototype._clientFilter=function(I){var a=[],b,k,G,H,K,N,O,P,U,Q;function V(W){return W.key===b.getProperty("filterValue");}for(var i=0;i<I.length;i++){b=I[i];k=false;G={};if(this._currentFilterKeys.length>0){H=E(this._currentFilterKeys,V);if(H===-1){k=true;G[t.Data]=1;}}if(this._startDate&&this._endDate){K=b.getDateTime();if(K<this._startDate||K>this._endDate){k=true;G[t.Time]=1;}}if(this._searchValue){N=this._searchValue.toLowerCase();O=b.getProperty("text")||"";P=b.getProperty("title")||"";U=b.getProperty("userName")||"";if(!((O.toLowerCase().indexOf(N)!==-1)||(P.toLowerCase().indexOf(N)!==-1)||(U.toLowerCase().indexOf(N)!==-1))){k=true;G[t.Search]=1;}}Q=!this.fireEvent("itemFiltering",{item:b,reasons:G,dataKeys:this._currentFilterKeys,timeKeys:{from:this._startDate,to:this._endDate},searchTerm:this._searchValue},true);if(Q){k=!k;}if(!k){a.push(b);}}return a;};
v.prototype._setOutput=function(I){var a;var b=function(){var V=0,W=[],i=0;if(this._iItemCount!==a.length){for(;i<a.length;i++){if(!a[i]._isGroupHeader){V++;}if(V>this._iItemCount){break;}W.push(a[i]);}a=W;}},G=function(){var V=[],W,X,Y={key:""};for(var i=0;i<a.length;i++){W=a[i];X=this._formatGroupBy(W.getDateTime(),this.getGroupByType());if(X.key!=Y.key){V.push(this._createGroupHeader(X,true));Y=X;}V.push(W);}return V;},H=function(){var V;if(!this._maxDate&&!this._minDate){if(this.getSort()||this._isGrouped()){for(var i=0;i<I.length;i++){V=I[i];if(!V._isGroupHeader){this._sortOrder===y.ASCENDING?this._minDate=V.getDateTime():this._maxDate=V.getDateTime();break;}}}}},K,N,O,P;H.call(this);if((!this._useBinding()||!this._useModelFilter())&&this.getSort()){I=this._sort(I);}a=this._useModelFilter()?I:this._clientFilter(I);a=a.filter(function(U){return!U._isGroupHeader;});this._showMore=this.getForceGrowing();if(!this._showMore&&this._displayShowMore()){this._showMore=a.length>this._iItemCount;if(!this._showMore&&this._useModelFilter()){this._showMore=a.length===this._iItemCount&&this._iItemCount<this._getMaxItemsCount();}}a=a.filter(function(U){return U.getVisible();});b.call(this);this._outputItem=[];if(this._isGrouped()){if(!this._useBinding()){I=G.call(this);}var Q=I.filter(function(V){return V._isGroupHeader;});this._groupCount=Q.length;for(var i=0;i<Q.length;i++){K=Q[i];O=K.getUserName();P=true;K._groupID=O;for(var k=0;k<a.length;k++){var U=a[k];N=this._formatGroupBy(U.getDateTime(),this.getGroupByType());if(N.key==O&&!U._isGroupHeader){if(P){this._outputItem.push(K);P=false;}U._groupID=O;this._outputItem.push(U);}}}}else{this._outputItem=q.extend(true,[],a);}};
v.prototype._getMaxItemsCount=function(){var b=this.getBinding("content"),a,i,k;if(b){k=b.getLength()||0;a=this.getModel();i=a&&a.iSizeLimit;return Math.min(k,i||k);}return this.getContent().length;};
v.prototype._showCustomMessage=function(){var b=!!this._customMessage,$=this._objects.getMessageStrip().$();this._objects.getMessageStrip().setVisible(b);this._objects.getMessageStrip().setText(this._customMessage);if(b){$.show();}else{$.hide();}};
v.prototype._performExpandCollapse=function(G,b){var a=this,$,i=this.$(),k=b?"slideDown":"slideUp",H=250;i.find('li[groupid="'+G+'"][nodeType="GroupHeaderBar"]').each(function(I,K){var N=q(K);if(!b){N.addClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar");}else{N.removeClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar");}});$=i.find('li[groupid="'+G+'"][nodeType!="GroupHeader"][nodeType!="GroupHeaderBar"]');return new Promise(function(I,K){if(a._noAnimation){if(b){$.show();}else{$.hide();}I();}else{if(a._isVertical()){$[k](H);}else{$.animate({width:'toggle'},350);}$.promise().done(function(){I();});}});};
v.prototype._itemRendered=function(){if(this._bRendered){this.adjustUI();}};
v.prototype._startItemNavigation=function(a){var i=this._getItemsForNavigation(),$=this.$("content").get(0)||this.$("contentH").get(0),G=function(b,O){return O.filter(function(I){return I.getFocusDomRef()===b;});};if(!this.oItemNavigation){this.oItemNavigation=new T($,i.items,false,i.rows);this.oItemNavigation.setPageSize(10);this.oItemNavigation.attachEvent("AfterFocus",function(a){var b=this.oItemNavigation.getItemDomRefs()[a.getParameter("index")],k=G(b,this._outputItem);if(k[0]){this.fireSelect({selectedItem:k[0],userAction:a.mParameters.event&&a.mParameters.event.type==="mousedown"});}},this);this.oItemNavigation.attachEvent("Enter",function(a){var b=G(a.getParameter("domRef"),this._outputItem);if(b[0]){this.fireSelect({selectedItem:b[0],userAction:true});}},this);this.addDelegate(this.oItemNavigation);}else{this.oItemNavigation.updateReferences($,i.items,i.rows);}if(i.columns){this.oItemNavigation.setColumns(i.columns,false);}};
v.prototype._getItemsForNavigation=function(){var I={},a,b,k,G,H;if(this._renderDblSided){if(this._isVertical()){I.items=this._outputItem;I.rows=[];G=[];I.items.forEach(function(i){var $=i.$(),K=$.hasClass("sapSuiteUiCommonsTimelineItemWrapperVLeft")||$.hasClass("sapSuiteUiCommonsTimelineItemOdd");if(K&&G.length===1){G.push(null);}else if(!K&&G.length===0){G.push(null);}if(G.length>1){I.rows.push(G);G=[];}G.push(i);});if(G.length>0){I.rows.push(G);}}else{b=[];k=[];this._outputItem.forEach(function(i){if(i._placementLine==="top"){b.push(i);}else{while(k.length+1<b.length){k.push(null);}k.push(i);}});I.items=this._outputItem;I.rows=[b,k];}}else{I.items=this._outputItem;}I.items=I.items.map(function(i){return i.getFocusDomRef();});if(I.rows){H=0;I.rows=I.rows.map(function(i){if(i.length>H){H=i.length;}return i.map(function(K){return K===null?null:K.getFocusDomRef();});});I.rows.forEach(function(i){while(i.length<H){i.push(null);}});}if(this._showMore){a=this._objects.getMoreButton().getFocusDomRef();I.items.push(a);if(I.rows){if(this._isVertical()){if(I.rows.length>0){I.rows.push(I.rows[0].map(function(V,i,K){if(i===K.length-1){return a;}else{return null;}}));}else{I.rows.push([a]);}}else{I.rows.forEach(function(K,i,N){if(i===N.length-1){K.push(a);}else{K.push(null);}});}}}return I;};
v.prototype.setShowItemFilter=function(b){this.setProperty("showItemFilter",b,true);if(this._objects.isObjectInitialized("FilterContent")){this._setupFilterFirstPage(this._objects.getFilterContent());}this._objects.getFilterIcon().setVisible(b||this.getShowTimeFilter());return this;};
v.prototype.setShowTimeFilter=function(b){this.setProperty("showTimeFilter",b,true);if(this._objects.isObjectInitialized("FilterContent")){this._setupFilterFirstPage(this._objects.getFilterContent());}this._objects.getFilterIcon().setVisible(b||this.getShowItemFilter());return this;};
v.prototype._getFilterTitle=function(){var V=this.getFilterTitle();if(!V){V=x.getText("TIMELINE_FILTER_ITEMS");}return V;};
v.prototype.getNoDataText=function(){var a=this.getProperty("noDataText");if(!a){a=x.getText('TIMELINE_NO_DATA');}return a;};
v.prototype.setSortOldestFirst=function(O){this._sortOrder=O?y.ASCENDING:y.DESCENDING;this._objects.getSortIcon().setIcon(this._sortOrder===y.ASCENDING?"sap-icon://arrow-bottom":"sap-icon://arrow-top");this.setProperty("sortOldestFirst",O);return this;};
v.prototype.setGrowingThreshold=function(a){this.setProperty("growingThreshold",a,true);this._iItemCount=a;return this;};
v.prototype.setShowHeaderBar=function(a){this.setProperty("showHeaderBar",a,true);this._objects.getHeaderBar().setVisible(a);return this;};
v.prototype.setSort=function(b){this.setProperty("sort",b);this._objects.getSortIcon().setVisible(b&&this.getShowSort());return this;};
v.prototype.setAxisOrientation=function(a){this.setProperty("axisOrientation",a);if(this._oScroller){this._oScroller.destroy();this._oScroller=null;}return this;};
v.prototype.setEnableDoubleSided=function(a){this.setProperty("enableDoubleSided",a);this._renderDblSided=a;return this;};
v.prototype.getCurrentFilter=function(){return this._currentFilterKeys.map(function(i){return{key:i.key,text:i.text||i.key};});};
v.prototype.reset=function(){this._iItemCount=0;this._aFilterList=[];this._collapsedGroups={};this._renderDblSided=null;this._groupId=0;this._lastScrollPosition={x:0,y:0,more:0};this._sortOrder=this.getSortOldestFirst()?y.ASCENDING:y.DESCENDING;this._scrollersSet=false;this._currentFilterKeys=[];this._bRendered=false;this._noAnimation=true;};
v.prototype.setShowFilterBar=function(a){this.setProperty("showFilterBar",a,true);this.setShowHeaderBar(a);return this;};
v.prototype.setShowSearch=function(a){this.setProperty("showSearch",a,true);this._objects.getSearchField().setVisible(!!a);return this;};
v.prototype.setShowSort=function(b){this.setProperty("showSort",b,true);this._objects.getSortIcon().setVisible(this.getSort()&&b);return this;};
v.prototype.setCustomMessage=function(a){this._customMessage=a;this._showCustomMessage();return this;};
v.prototype.getHeaderBar=function(){return this._objects.getHeaderBar();};
v.prototype.getMessageStrip=function(){return this._objects.getMessageStrip();};
v.prototype.setContent=function(a){this.removeAllContent();var b=0;for(var i=0;i<a.length;i++){var I=a[i];if(I instanceof h){if(this._isGrouped()){var G=this._formatGroupBy(I.getDateTime(),this.getGroupByType());if(G.key!==b.key){this._createGroupHeader(G);b=G;}}this.addContent(I);}}this._iItemCount=0;return this;};
v.prototype.setData=function(a){var I="sapsuiteuicommonsTimelineInternalModel",i=new J(),P,b,k=function(H,K){var N=new h({dateTime:K.getProperty("dateTime"),icon:K.getProperty("icon"),userName:K.getProperty("userName"),title:K.getProperty("title"),text:K.getProperty("text"),filterValue:K.getProperty("filterValue")});if(K.getProperty("content")){N.setEmbeddedControl(K.getProperty("content"));}return N;},G=function(P,H){var K=P;if(H){K=H+">"+P;}return K;};if(typeof a==="undefined"){return this;}P=G("/",I);i.setData(a);this.setModel(i,I);this.setProperty("data",a,true);b={path:P,sorter:this._getDefaultSorter('dateTime',this.getSortOldestFirst()),factory:q.proxy(k,this)};if(this._isGrouped()){b.groupHeaderFactory=q.proxy(this._getGroupHeader,this);}this.bindAggregation("content",b);return this;};
v.prototype.getSuspendSocialFeature=function(){return this._suspenseSocial;};
v.prototype.setSuspendSocialFeature=function(b){this._suspenseSocial=b;if(!this.getEnableSocial()){return;}var I=this.getContent();for(var i=0;i<I.length;i++){I[i]._objects.getReplyLink().setEnabled(!b);}this.invalidate();return this;};
v.prototype.updateFilterList=function(){this.updateAggregation("filterList");this._setFilterList();};
v.prototype.setGroupByType=function(a){var b=this.getBindingInfo("content");this.setProperty("groupByType",a);if(b){this._bindGroupingAndSorting(b);this.updateAggregation("content");}return this;};
v.prototype.getGroup=function(){return this.getGroupByType()!=="None";};
v.prototype.setGroup=function(G){if(G&&this.getGroupByType()===s.None){this.setGroupByType(s.Year);}if(!G){this.setGroupByType(s.None);}return this;};
v.prototype.setGrowing=function(G){if(!G){this.setGrowingThreshold(0);}return this;};
v.prototype.getGrowing=function(G){return this.getGrowingThreshold()!==0;};
v.prototype.setEnableBackendFilter=function(b){this.setProperty("enableModelFilter",b);return this;};
v.prototype.getEnableBackendFilter=function(){return this.getProperty("enableModelFilter");};
v.prototype._isGrouped=function(){return(this.getGroupByType()!==s.None||this._fnCustomGroupBy)&&(this.getGroupBy()!=="");};
v.prototype._lazyLoading=function(){return this.getEnableScroll()&&this.getLazyLoading();};
v.prototype._loadAllData=function(a){return!this._useModelFilter(a);};
v.prototype._isVertical=function(){return u.Vertical===this.getAxisOrientation();};
v.prototype._displayShowMore=function(){return this.getForceGrowing()||(this.getGrowingThreshold()!==0&&!this._lazyLoading());};
v.prototype._useGrowing=function(){return this.getForceGrowing()||this.getGrowingThreshold()!==0||this._lazyLoading();};
v.prototype._isMaxed=function(){return this._iItemCount>=this._getMaxItemsCount();};
v.prototype._useModelFilter=function(a){return this.getEnableModelFilter()&&(a||this._useTemplateBinding()||this._useFactoryBinding());};
v.prototype._scrollingFadeout=function(a){return this.getScrollingFadeout()!==p.None&&this.getEnableScroll();};
v.prototype._setBusy=function(b){if(this.getEnableBusyIndicator()){this.setBusy(b);}};
v.prototype._fireSelectionChange=function(P){return this.fireEvent("filterSelectionChange",P,true);};
v.prototype._isLeftAlignment=function(){return this.getAlignment()===r.Left||this.getAlignment()===r.Top;};
v.prototype._useBinding=function(b){return this.getBindingInfo("content")!=null;};
v.prototype._useTemplateBinding=function(){var a=this.getBindingInfo("content");return a&&a.template!=null;};
v.prototype._useFactoryBinding=function(){var a=this.getBindingInfo("content");return a&&a.factory!=null;};
v.prototype._useAutomaticHeight=function(){return this.getTextHeight().toLowerCase()==="automatic"&&!this._isVertical();};
v.prototype._getItemsCount=function(){return this._outputItem?this._outputItem.length:0;};
j.extendTimeline(v);return v;});
sap.ui.predefine('sap/suite/ui/commons/TimelineFilterListItem',['./library','sap/ui/core/Control'],function(l,C){"use strict";
var T=C.extend("sap.suite.ui.commons.TimelineFilterListItem",{metadata:{library:"sap.suite.ui.commons",properties:{key:{type:"string",group:"Data",defaultValue:null},text:{type:"string",group:"Misc",defaultValue:null}}}});
return T;});
sap.ui.predefine('sap/suite/ui/commons/TimelineItem',["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/m/Text","sap/m/Toolbar","sap/m/ToolbarDesign","sap/m/Link","sap/m/TextArea","sap/m/Popover","sap/m/PlacementType","sap/m/ToolbarSpacer","sap/m/Button","sap/ui/Device","sap/suite/ui/commons/util/ManagedObjectRegister","sap/suite/ui/commons/util/DateUtils","sap/ui/core/Icon","sap/m/library","sap/ui/core/format/DateFormat","sap/ui/base/Object","sap/ui/dom/containsOrEquals","sap/base/security/encodeXML","./TimelineItemRenderer"],function(q,C,T,a,b,L,c,P,d,e,B,D,M,f,I,g,h,j,k,l,m){"use strict";
var n=C.extend("sap.suite.ui.commons.TimelineItem",{metadata:{library:"sap.suite.ui.commons",properties:{dateTime:{type:"any",group:"Misc",defaultValue:null},filterValue:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null},iconTooltip:{type:"string",group:"Misc",defaultValue:null},useIconTooltip:{type:"boolean",group:"Accessibility",defaultValue:true},maxCharacters:{type:"int",group:"Behavior",defaultValue:null},replyCount:{type:"int",group:"Misc",defaultValue:null},status:{type:"string",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},text:{type:"string",group:"Misc",defaultValue:null},userName:{type:"string",group:"Misc",defaultValue:null},userNameClickable:{type:"boolean",group:"Misc",defaultValue:false},userPicture:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null}},defaultAggregation:"embeddedControl",aggregations:{customAction:{type:"sap.ui.core.CustomData",multiple:true,singularName:"customAction"},customReply:{type:"sap.ui.core.Control",multiple:false},embeddedControl:{type:"sap.ui.core.Control",multiple:false},replyList:{type:"sap.m.List",multiple:false},suggestionItems:{type:"sap.m.StandardListItem",multiple:true,singularName:"suggestionItem",deprecated:true}},events:{userNameClicked:{parameters:{uiElement:{type:"sap.ui.core.Control"}}},replyPost:{parameters:{value:{type:"string"}}},replyListOpen:{},customActionClicked:{parameters:{value:{type:"string"},key:{type:"string"},linkObj:{type:"sap.m.Link"}}},suggest:{deprecated:true,parameters:{suggestValue:{type:"string"}}},suggestionItemSelected:{deprecated:true,parameters:{selectedItem:{type:"sap.ui.core.Item"}}}}}});
var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),S={"Warning":"sapSuiteUiCommonsTimelineStatusWarning","Error":"sapSuiteUiCommonsTimelineStatusError","Success":"sapSuiteUiCommonsTimelineStatusSuccess","Information":"sapSuiteUiCommonsTimelineStatusInformation"};
n.prototype.init=function(){this._customReply=false;this._objects=new M();this._nMaxCharactersMobile=500;this._nMaxCharactersDesktop=800;this._sTextShowMore=r.getText("TIMELINE_TEXT_SHOW_MORE");this._registerControls();this._registerPopup();this._orientation="V";};
n.prototype.setCustomMessage=function(i){this._objects.getInfoText().setText(i);this._objects.getInfoBar().setVisible(i&&i.length>0);this.invalidate();};
n.prototype.setDateTime=function(o){if(o&&this.getBinding("dateTime")&&j.isA(this.getModel(),"sap.ui.model.odata.v4.ODataModel")){var i=h.getDateTimeInstance({pattern:"yyyy-MM-dd'T'HH:mm:ss.SSSZ"});var p=i.parse(o);if(p instanceof Date){o=p;}}this.setProperty("dateTime",o);return this;};
n.prototype.applyFocusInfo=function(){this.focus();this.getParent()._moveScrollBar(true);};
n.prototype.getFocusDomRef=function(){return this.$("outline")[0];};
n.prototype._replyPost=function(){var i=this._objects.getReplyInputArea().getValue();this.fireReplyPost({value:i});};
n.prototype._registerPopup=function(){var t=this;this._objects.register("fullText",function(){var o=new T(t.getId()+"-fullText",{text:t.getText()});o.addStyleClass("sapSuiteUiCommonsTimelineItemPopoverText");return o;});this._objects.register("fullTextPopover",function(){var p=new P({placement:d.Bottom,showArrow:false,showHeader:false,contentMinWidth:'300px',contentWidth:'450px',resizable:true,content:[t._objects.getFullText()]});p.addStyleClass("sapSuiteUiCommonsTimelineItemShowMorePopover");return p;});};
n.prototype._openReplyDialog=function(){if(this._customReply){this.getCustomReply().openBy(this._objects.getReplyLink());this.fireReplyListOpen();}else{this.fireReplyListOpen();this._objects.getReplyInputArea().setValue('');this._oldReplyInputArea='';this._list=this.getReplyList();if(this._list!==null){this.setAggregation("replyList",null,true);this._objects.getReplyPop().addContent(this._list);}this._objects.getReplyPop().addContent(this._objects.getReplyInputArea());this._objects.getReplyPop().openBy(this._objects.getReplyLink());}};
n.prototype._callParentFn=function(){var i=Array.prototype.slice.call(arguments),N=i.shift(),p=this.getParent();if(p&&(typeof p[N]==="function")){return p[N].apply(p,i);}};
n.prototype._getCorrectGroupIcon=function(){var i="",o=function(){return this.getParent()&&this.getParent()._renderDblSided;}.bind(this),p=this._isGroupCollapsed();if(this._orientation==="H"){i="sap-icon://navigation-right-arrow";if(!p){i=this._callParentFn("_isLeftAlignment")||o()?"sap-icon://navigation-down-arrow":"sap-icon://navigation-up-arrow";}}else{i="sap-icon://navigation-down-arrow";if(p){i=this._callParentFn("_isLeftAlignment")||o()?"sap-icon://navigation-right-arrow":"sap-icon://navigation-left-arrow";}}return i;};
n.prototype.onclick=function(E){var t=this;if(k(this.$("outline").get(0),E.target)){if(this._isGroupHeader){t._performExpandCollapse(t._groupID);}}};
n.prototype._performExpandCollapse=function(G){var i=false,E=this._isGroupCollapsed(G);var s=function(F,H){var J=F.find(".sapSuiteUiCommonsTimelineItemBarV"),K,N;if(H.get(0)){K=H.attr("groupId");N=!this._isGroupCollapsed(K);if(N){J.addClass("sapSuiteUiCommonsTimelineGroupNextExpanded");}else{J.removeClass("sapSuiteUiCommonsTimelineGroupNextExpanded");}}}.bind(this),o=function(){var F,H,J;if(!i){F=this._objects.getGroupCollapseIcon&&this._objects.getGroupCollapseIcon();H=this.$();J=this._isGroupCollapsed();if(!J){H.removeClass("sapSuiteUiCommonsTimelineGroupCollapsed");H.addClass("sapSuiteUiCommonsTimelineGroupExpanded");}else{H.addClass("sapSuiteUiCommonsTimelineGroupCollapsed");H.removeClass("sapSuiteUiCommonsTimelineGroupExpanded");}F.setSrc(this._getCorrectGroupIcon());i=true;}}.bind(this),p=function(){if(this.getParent()){this.getParent()._collapsedGroups[G]=!E;}}.bind(this),$=this.$(),t=this,u=$.parent(),v,w,x,y,z,A;p();if(this._orientation==="H"){v=this.$("line");}else{v=$.find(".sapSuiteUiCommonsTimelineGroupHeaderBarWrapper");w=u.next().children("li").first();x=u.prev().children(":visible:last");if(x.get(0)){s(x,$);}if(E){y=u.children().last();s(y,w);}else{s($,w);}}if(E){v.hide();}else{v.show();}A=$.find(".sapSuiteUiCommonsTimelineGroupHeaderMainWrapper");A.attr("aria-expanded",!!E);if(this._orientation!=="H"||E){o();}z=this._callParentFn("_performExpandCollapse",G,E,this);if(z){return new Promise(function(F,H){z.then(function(){o();t._callParentFn("_performUiChanges");F();});});}};
n.prototype._getStatusColorClass=function(){var s=this.getStatus();return S[s]||"";};
n.prototype._getLineIcon=function(){var t=this,i;this._objects.register("imageControl",function(){var s="sap-icon://circle-task",o=t.getText()==="GroupHeader";if(!o){s=t.getIcon()?t.getIcon():"sap-icon://activity-items";}i=new I(t.getId()+'-icon',{src:s,tooltip:t.getIconTooltip(),useIconTooltip:t.getUseIconTooltip()});i.addStyleClass("sapSuiteUiCommonsTimelineBarIcon");return i;});return this._objects.getImageControl();};
n.prototype._isGroupCollapsed=function(i){var p=this.getParent();i=i||this._groupID;return p&&p._collapsedGroups&&p._collapsedGroups[i];};
n.prototype._getCollapsedText=function(){var s=this.getText().substring(0,this._nMaxCollapsedLength);var i=s.lastIndexOf(" ");if(i>0){this._sShortText=s.substr(0,i);}else{this._sShortText=s;}return this._sShortText;};
n.prototype._toggleTextExpanded=function(E){var t=this,o=E.getSource(),$=o.$(),i=this.$("realtext"),p=$.height(),s=$.position().top,u=i.parent().position().top,v=$.parent().prev(),w,x,N=this.getParent()&&this.getParent()._noAnimation,O=8,y=function(){return t.getParent()&&t.getParent()._renderDblSided;},z=function(V,H,J){v.css("-webkit-line-clamp",J);if(y()||N){v.css("height",V);t._callParentFn("_performUiChanges");}else{v.animate({height:H},250,t._callParentFn("_performUiChanges"));}};if(this._orientation==="V"){x=this.$("threeDots");w=v.children().first();if(!this._expanded){this._textProperties={height:v.css("height"),clamp:v.css("-webkit-line-clamp"),text:w.html()};v.attr("expanded",true);x.hide();w.html(this._encodeHTMLAndLineBreak(this.getText()));var A=r.getText("TIMELINE_TEXT_SHOW_LESS");o.setText(A);o.rerender();z("",w.height(),"");}else{v.attr("expanded",false);o.setText(this._sTextShowMore);o.rerender();x.show();w.html(this._textProperties.text);z(this._textProperties.height,this._textProperties.height,this._textProperties.clamp);}t._expanded=!t._expanded;}else{var F=u-s-p-O,W=q(window).height()-$.offset().top,G=200;if(W<G){F-=(G-W);}this._objects.getFullText().setText(this.getText());this._objects.getFullTextPopover().setOffsetY(Math.floor(F));this._objects.getFullTextPopover().openBy(this._objects.getExpandButton());}};
n.prototype._getButtonExpandCollapse=function(){var t=this;this._objects.register("expandButton",function(){return new L(t.getId()+"-fullTextBtn",{text:t._sTextShowMore,press:t._toggleTextExpanded.bind(t)});});return this._objects.getExpandButton();};
n.prototype._checkTextIsExpandable=function(){this._nMaxCollapsedLength=this.getMaxCharacters();if(this._nMaxCollapsedLength===0){this._nMaxCollapsedLength=D.system.phone?this._nMaxCharactersMobile:this._nMaxCharactersDesktop;}return this.getText().length>this._nMaxCollapsedLength;};
n.prototype.onBeforeRendering=function(){var t=this;if(!this._list){this._list=this.getReplyList();}if(this.getReplyCount()>0){this._objects.getReplyLink().setText(r.getText("TIMELINE_REPLY")+" ("+this.getReplyCount()+")");}else if(this._list&&this._list.getItems().length>0){this._objects.getReplyLink().setText(r.getText("TIMELINE_REPLY")+" ("+this._list.getItems().length+")");}this._objects.getSocialBar().removeAllContent();if(this._callParentFn("getEnableSocial")){this._objects.getSocialBar().addContent(this._objects.getReplyLink());}this._actionList=this.getCustomAction();function F(E,s){t.fireCustomActionClicked({"value":s.value,"key":s.key,"linkObj":this});}for(var i=0;i<this._actionList.length;i++){var o=this._actionList[i].getKey();var v=this._actionList[i].getValue();var p=new L({text:v,tooltip:o});p.addStyleClass("sapSuiteUiCommonsTimelineItemActionLink");p.attachPress({"value":v,"key":o},F);this._objects.getSocialBar().addContent(p);}};
n.prototype._encodeHTMLAndLineBreak=function(t){return l(t).replace(/&#xa;/g,"<br>");};
n.prototype._getUserPictureControl=function(){var u=this.getUserPicture(),s="2rem",t=this;if(!u){return null;}this._objects.register("userPictureControl",function(){var i=g.ImageHelper.getImageControl(t.getId()+"-userPictureControl",null,t,{height:s,width:s,src:u,tooltip:r.getText("TIMELINE_USER_PICTURE")});i.setDensityAware(false);return i;});this._objects.getUserPictureControl().setSrc(u);return this._objects.getUserPictureControl();};
n.prototype._getUserNameLinkControl=function(){var t=this;if(this.getUserNameClickable()){this._objects.register("userNameLink",function(){var i=new L(t.getId()+"-userNameLink",{text:t.getUserName(),press:function(E){t.fireUserNameClicked({uiElement:this});}});i.addStyleClass("sapUiSelectable");return i;});return this._objects.getUserNameLink();}};
n.prototype.onAfterRendering=function(){this._expanded=false;this._callParentFn("_itemRendered");};
n.prototype._registerControls=function(){var t=this;this._objects.register("infoText",new T(this.getId()+"-infoText",{maxLines:1,width:"100%"}));this._objects.register("infoBar",new a(this.getId()+"-infoBar",{id:this.getId()+"-customMessageInfoBar",content:[this._objects.getInfoText()],design:b.Info,visible:false}));this._objects.register("replyLink",function(){var i=new L(t.getId()+"-replyLink",{text:r.getText("TIMELINE_REPLY"),press:[t._openReplyDialog,t]});i.addStyleClass("sapSuiteUiCommonsTimelineItemActionLink");return i;});this._objects.register("socialBar",function(){var s=new a(t.getId()+"-socialBar",{});s.data("sap-ui-fastnavgroup",null);return s;});this._objects.register("replyInputArea",new c(this.getId()+"-replyInputArea",{height:"4rem",width:"100%"}));this._objects.register("replyPop",function(){return new P(t.getId()+"-replyPop",{initialFocus:t._objects.getReplyInputArea(),title:r.getText("TIMELINE_REPLIES"),placement:d.Vertical,footer:new a({content:[new e(),new B(t.getId()+"-replyButton",{text:r.getText("TIMELINE_REPLY"),press:function(){t._replyPost();t._objects.getReplyPop().close();}})]}),contentHeight:"15rem",contentWidth:"20rem"});});};
n.prototype.exit=function(){this._objects.destroyAll();};
n.prototype.getDateTimeWithoutStringParse=function(){var o=this.getProperty("dateTime");return f.parseDate(o,false)||"";};
n.prototype.setCustomReply=function(R){if(R){this._customReply=true;this.setAggregation("customReply",R,true);}else{this._customReply=false;}return this;};
n.prototype.setReplyList=function(i){if(i===null){return this;}this.setAggregation("replyList",i,true);var t=this;this.getReplyList().attachUpdateFinished(function(E){var F=t._objects.getReplyInputArea().getDomRef("inner");if(F){q(F.id).focus();}});return this;};
n.prototype.getDateTime=function(){var o=this.getProperty("dateTime");o=f.parseDate(o);if(typeof(o)==="string"&&this instanceof sap.suite.ui.commons.TimelineItem&&this.getBindingPath("dateTime")&&this.getBindingContext()){var p=this.getBindingPath("dateTime");var i=this.getBindingContext().getProperty(p);if(i instanceof Date){return i;}else{return o;}}else{return o;}};
return n;});
sap.ui.predefine('sap/suite/ui/commons/TimelineItemRenderer',["./library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/format/DateFormat","sap/ui/core/Icon","sap/base/security/encodeXML","sap/base/security/encodeCSS"],function(l,H,D,I,e,a){"use strict";var T=l.TimelineAlignment;var b={};var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons"),M=24*60*60*1000;
b.render=function(R,t){this._getTimelineItemElement(t).getRenderer().render(R);};
b._getTimelineItemElement=function(t){if(t._orientation==="V"){return this._getVerticalTimelineItemElement(t);}else{return this._getHorizontalTimelineItemElement(t);}};
b._getFormatedDateTime=function(t,A){A=A||{};var R=A.resBundle||r,d=A.dateFormat||D.getDateInstance({style:"short"}),o=A.timeFormat||D.getTimeInstance({style:"short"}),c=t.getDateTimeWithoutStringParse(),f,g,i,C;if(!(c instanceof Date)||(isNaN(c.getTime()))){return c;}f=Date.UTC(c.getFullYear(),c.getMonth(),c.getDate());g=new Date();g=Date.UTC(g.getFullYear(),g.getMonth(),g.getDate());i=Math.floor((g-f)/M);switch(i){case 0:C=R.getText("TIMELINE_TODAY");break;case 1:C=R.getText("TIMELINE_YESTERDAY");break;default:C=d.format(c);}return C+" "+R.getText("TIMELINE_AT")+" "+o.format(c);};
b._getHorizontalTimelineItemElement=function(t){var i=(t._placementLine==="top"),s=i?"sapSuiteUiCommonsTimelineItemHTop":"sapSuiteUiCommonsTimelineItemHBottom",c=t.getText()==="GroupHeader",g=t._groupID,A,o;if(c){return this._getGroupHeaderElement(t);}var d=new H("li"),f=new H("div"),h=new H("div"),j=new H("div"),k=new H("div"),m=new H("div"),n=new H("div"),p=this._getTimelineItemShell(t);if(g){d.setAttribute("groupid",t._groupID,true);}if(t._isFirstGroupEvenItem){d.setAttribute("firstgroupevenitem",t._isFirstGroupEvenItem);}d.addControlData(t);d.addClass("sapSuiteUiCommonsTimelineItemLiWrapperV");d.addClass(e(s));f.addClass("sapSuiteUiCommonsTimelineItemWrapperH sapSuiteUiCommonsTimelineItemBaseLength");d.addChild(f);h.addClass("sapSuiteUiCommonsTimelineItemBubbleSpacer");f.addChild(h);j.addClass("sapSuiteUiCommonsTimelineItemBubble");h.addChild(j);k.addClass("sapSuiteUiCommonsTimelineItemOutline");k.setId(t.getId()+"-outline");k.setAttribute("tabindex","0");this._addAccessibilityTags(k,t);m.addClass("sapSuiteUiCommonsTimelineItemBox");k.addChild(m);n.addClass("sapSuiteUiCommonsTimelineItemArrow");if(i){j.addChild(k);j.addChild(n);}else{j.addChild(n);j.addChild(k);}if(!t._callParentFn("_isGrouped")&&t._callParentFn("getEnableDoubleSided")&&t._index===1){o=t.getParent();A="margin-left";if(o&&o._bRtlMode){A="margin-right";}d.addStyle(a(A),"100px");}m.addChild(p);if(t._isGroupCollapsed()){d.addStyle("display","none");}return d;};
b._getGroupHeaderElement=function(t){var c=new H("li"),d=new H("div"),f=new H("div"),g=new H("div"),h=new H("div"),i=new H("div"),j=new H("span"),k=new H("div"),m=new H("div"),n=new H("div"),o=t._orientation==="V"?f:g,p=new H("div"),q=new H("div"),s=new H("div");var u=t._isGroupCollapsed(),S=t._callParentFn("getShowIcons"),v;if(t._groupID){c.setAttribute("groupid",t._groupID,true);}if(t._isLastGroup){c.addClass("sapSuiteUiCommonsTimelineLastItem");}c.addControlData(t);c.addClass("sapSuiteUiCommonsTimelineGroupHeader");c.setAttribute("role","presentation");c.addChild(d);d.addChild(f);d.addClass("sapSuiteUiCommonsTimelineGroupHeaderDirectChild");f.addClass("sapSuiteUiCommonsTimelineGroupHeaderMainWrapper");f.setId(t.getId()+"-outline");f.setAttribute("tabindex","0");this._addAccessibilityTags(f,t,true);f.setAttribute("data-sap-ui-fastnavgroup",true);f.addChild(g);c.addChild(n);c.setAttribute("nodeType","GroupHeader");h.addClass("sapSuiteUiCommonsTimelineGroupHeaderSpanWrapper");if(t._orientation==="V"){c.addClass(t._position===T.Left?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight");}g.addClass("sapSuiteUiCommonsTimelineGroupHeaderWrapper");g.addClass("sapSuiteUiCommonsTimelineGroupHeaderPointer");o.addChild(i);g.addChild(m);g.addChild(h);c.addClass(u?"sapSuiteUiCommonsTimelineGroupCollapsed":"sapSuiteUiCommonsTimelineGroupExpanded");m.addClass("sapSuiteUiCommonsTimelineGroupHeaderIconWrapper");v=t._getCorrectGroupIcon();t._objects.register("groupCollapseIcon",function(){var w=new I(t.getId()+"-groupCollapseIcon",{src:v,decorative:true});w.addStyleClass("sapSuiteUiCommonsTimelineGroupHeaderPointer");w.setParent(t);return w;});m.addChild(t._objects.getGroupCollapseIcon());i.addClass("sapSuiteUiCommonsTimelineItemArrow");n.addClass("sapSuiteUiCommonsTimelineGroupHeaderLineWrapper");k.addClass("sapSuiteUiCommonsTimelineGroupHeaderLine");n.addChild(k);h.addChild(j);j.addClass("sapSuiteUiCommonsTimelineGroupHeaderSpan");j.addChildEscaped(" "+t.getTitle());if(t._orientation==="V"){c.addChild(p);q.addChild(t._getLineIcon());p.addChild(q);q.addClass("sapSuiteUiCommonsTimelineItemBarIconWrapperV");p.addClass("sapSuiteUiCommonsTimelineGroupHeaderBarWrapper");if(!t._isGroupCollapsed()){p.addStyle("display","none");}s.addClass("sapSuiteUiCommonsTimelineItemBarV");if(!S){s.addClass("sapSuiteUiCommonsTimelineItemBarNoIcon");}p.addChild(s);if(t._additionalBarClass){s.addClass(e(t._additionalBarClass));}}return c;};
b._getVerticalTimelineItemElement=function(t){var c=new H("li"),d=new H("div"),f=new H("div"),g=new H("div"),h=new H("div"),i=new H("div"),j=new H("div"),k=new H("div"),m=new H("div"),n=new H("div"),o=new H("div"),p;var s=t._callParentFn("getShowIcons"),G=t._groupID,q=t.getText()==="GroupHeader",S=t._getStatusColorClass();if(q){return this._getGroupHeaderElement(t);}if(G){c.setAttribute("groupID",G,true);}c.addControlData(t);c.addClass("sapSuiteUiCommonsTimelineItem");c.setAttribute("role","presentation");if(t._isLast){c.addClass("sapSuiteUiCommonsTimelineLastItem");}d.addClass(q?"sapSuiteUiCommonsTimelineItemWrapperGrp":"sapSuiteUiCommonsTimelineItemWrapperV");c.addChild(d);d.addClass(t._position===T.Left?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight");d.addChild(h);d.addChild(f);f.addClass("sapSuiteUiCommonsTimelineItemBarWrapperV");g.addClass("sapSuiteUiCommonsTimelineItemBarIconWrapperV");if(S){g.addClass(e(S));}else{g.addClass("sapSuiteUiCommonsTimelineNoStatus");}if(s){f.addChild(g);g.addChild(t._getLineIcon('',G));}else{o.addChild(n);o.addClass("sapSuiteUiCommonsTimelineItemNoIconWrapper");n.addClass("sapSuiteUiCommonsTimelineItemNoIcon");f.addChild(o);if(S){n.addClass(e(S));}i.addClass("sapSuiteUiCommonsTimelineItemBarNoIcon");}i.addClass("sapSuiteUiCommonsTimelineItemBarV");f.addChild(i);if(t._additionalBarClass){i.addClass(e(t._additionalBarClass));}h.addClass("sapSuiteUiCommonsTimelineItemBubble");m.addClass("sapSuiteUiCommonsTimelineItemArrow");h.addChild(m);h.addChild(k);k.addClass("sapSuiteUiCommonsTimelineItemOutline");k.setId(t.getId()+"-outline");k.setAttribute("tabindex","0");this._addAccessibilityTags(k,t);j.addClass("sapSuiteUiCommonsTimelineItemBox");k.addChild(j);p=this._getTimelineItemShell(t);j.addChild(p);if(t._isGroupCollapsed()){c.addStyle("display","none");}return c;};
b._getTimelineItemShell=function(t){var c=new H("div"),d=new H("div"),f=new H("div"),g=new H("span"),u,U,h=new H("span"),i=new H("div"),j=new H("div"),k=new H("div"),m=new H("span"),n=new H("div"),o=new H("span"),p=new H("div"),q;var E=t.getEmbeddedControl();c.setId(t.getId()+"-shell");c.addClass("sapSuiteUiCommonsTimelineItemShell");c.addChild(t._objects.getInfoBar());c.addChild(d);d.addClass("sapSuiteUiCommonsTimelineItemHeaderWrapper");u=t._getUserPictureControl();if(u){u.addStyleClass("sapSuiteUiCommonsTimelineItemUserPicture");d.addChild(u);}f.setId(t.getId()+"-header");f.addClass("sapSuiteUiCommonsTimelineItemHeader");f.addClass("sapSuiteUiCommonsTimelineItemTextLineClamp");g.setId(t.getId()+"-username");g.addClass("sapSuiteUiCommonsTimelineItemShellUser");f.addChild(g);U=t._getUserNameLinkControl();if(U){g.addChild(U);}else{g.addChildEscaped(t.getUserName());g.addClass("sapUiSelectable");}d.addChild(f);h.addClass("sapSuiteUiCommonsTimelineItemShellHdr");h.addClass("sapUiSelectable");h.addChildEscaped(" "+t.getTitle());f.addChild(h);i.addClass("sapSuiteUiCommonsTimelineItemShellDateTime");i.addClass("sapUiSelectable");i.addChildEscaped(this._getFormatedDateTime(t));f.addChild(i);j.addClass("sapSuiteUiCommonsTimelineItemShellBody");c.addChild(j);if(E!==null){j.addChild(E);}else if(t.getText()){k.addChild(m);k.addClass("sapSuiteUiCommonsTimelineItemTextWrapper");m.setId(t.getId()+"-realtext");m.addClass("sapUiSelectable");j.addChild(k);q=t._checkTextIsExpandable();if(q){o.setId(t.getId()+"-threeDots");o.addClass("sapMFeedListItemTextString");o.addChildEscaped(" ");k.addChild(o);m.addChildEscaped(t._getCollapsedText(),true);o.addChildEscaped("... ");k.setAttribute("expandable",true);}else{m.addChildEscaped(t.getText(),true);n.addStyle("display","none");}j.addChild(n);n.addClass("sapSuiteUiCommonsTimelineItemShowMore");n.addChild(t._getButtonExpandCollapse());}if(t.getParent()&&t.getParent()._aFilterList&&(t._callParentFn("getEnableSocial")||t.getCustomAction().length>0)){p.addClass("sapSuiteUiCommonsTimelineItemShellBottom");p.addChild(t._objects.getSocialBar());c.addChild(p);}return c;};
b._addAccessibilityTags=function(c,t,i){var g;c.setAttribute("role","option");if(typeof t._index==="number"){c.setAttribute("aria-posinset",t._index+1);c.setAttribute("aria-setsize",t._callParentFn("_getItemsCount"));}c.setAttribute("aria-live","polite");if(i){c.setAttribute("aria-expanded",!t._isGroupCollapsed());g=r.getText("TIMELINE_ACCESSIBILITY_GROUP_HEADER")+": "+t.getTitle();c.setAttribute("aria-label",g,true);}};
return b;},true);
sap.ui.predefine('sap/suite/ui/commons/TimelineNavigator',["sap/ui/thirdparty/jquery","sap/ui/core/delegate/ItemNavigation","sap/base/assert","sap/ui/dom/containsOrEquals","sap/ui/events/KeyCodes"],function(q,I,a,c,K){"use strict";
function s(S,p){var d=S.length-p.length;return d>=0&&S.lastIndexOf(p)===d;}
var T=I.extend("sap.suite.ui.commons.TimelineNavigator",{constructor:function(d,i,n,r){I.apply(this,arguments);this.setCycling(false);this._aRows=r;this.iActiveTabIndex=0;this.iTabIndex=0;this.bRefocusOnNextUpdate=false;this.oLastFocused=null;}});
T.prototype.updateReferences=function(d,i,r){this.oDomRef=d;this.setItemDomRefs(i);this._aRows=r;if(this.bRefocusOnNextUpdate){this._refocusItem();this.bRefocusOnNextUpdate=false;}this.setBeforeAfterTabIndex();};
T.prototype.refocusOnNextUpdate=function(){this.bRefocusOnNextUpdate=true;};
T.prototype._refocusItem=function(){var i=this.iFocusedIndex;if(i<0){return;}while(!q(this.aItemDomRefs[i]).is(":visible")){i++;if(i>=this.aItemDomRefs.length){i=0;}if(i===this.iFocusedIndex){break;}}setTimeout(function(){if(this.aItemDomRefs){this.focusItem(i);}}.bind(this),0);};
T.prototype.setItemDomRefs=function(b){a(Array.isArray(b),"aItemDomRefs must be an array of DOM elements");this.aItemDomRefs=b;if(this.iFocusedIndex>b.length-1){this.iFocusedIndex=b.length-1;}for(var i=0;i<this.aItemDomRefs.length;i++){if(this.aItemDomRefs[i]){var $=q(this.aItemDomRefs[i]);if(i==this.iFocusedIndex&&!$.data("sap.INRoot")){$.attr("tabIndex",this.iActiveTabIndex);}else if($.attr("tabindex")=="0"){$.attr("tabIndex",this.iTabIndex);}$.data("sap.INItem",true);$.data("sap.InNavArea",true);if($.data("sap.INRoot")&&i!=this.iFocusedIndex){$.data("sap.INRoot").setNestedItemsTabindex();}}}return this;};
T.prototype.setItemsTabindex=function(){for(var i=0;i<this.aItemDomRefs.length;i++){if(this.aItemDomRefs[i]){var $=q(this.aItemDomRefs[i]);if($.is(":sapFocusable")){if(i==this.iFocusedIndex&&!$.data("sap.INRoot")){$.attr("tabIndex",this.iActiveTabIndex);}else{$.attr("tabIndex",this.iTabIndex);}}}}return this;};
T.prototype.setBeforeAfterTabIndex=function(){if(this.oDomRef){var e=this.oDomRef.id+"-after";q(window.document.getElementById(e)).attr("tabindex",-1);e=this.oDomRef.id+"-before";q(window.document.getElementById(e)).attr("tabindex",-1);q(this.oDomRef).attr("tabindex",-1);}};
T.prototype.setFocusedIndex=function(i){var $;if(this.aItemDomRefs.length<0){this.iFocusedIndex=-1;return this;}if(i<0){i=0;}if(i>this.aItemDomRefs.length-1){i=this.aItemDomRefs.length-1;}if(this.iFocusedIndex!==-1&&this.aItemDomRefs.length>this.iFocusedIndex){q(this.aItemDomRefs[this.iFocusedIndex]).attr("tabIndex",this.iTabIndex);$=q(this.aItemDomRefs[this.iFocusedIndex]);if($.data("sap.INRoot")&&i!=this.iFocusedIndex){q($.data("sap.INRoot").aItemDomRefs[$.data("sap.INRoot").iFocusedIndex]).attr("tabIndex",this.iTabIndex);}}this.iFocusedIndex=i;var f=this.aItemDomRefs[this.iFocusedIndex];$=q(this.aItemDomRefs[this.iFocusedIndex]);if(!$.data("sap.INRoot")){q(f).attr("tabIndex",this.iActiveTabIndex);}return this;};
T.prototype._callParent=function(f,A){if(typeof I.prototype[f]==="function"){I.prototype[f].apply(this,A);}};
T.prototype._onF7=function(e){if(!c(this.oDomRef,e.target)){return;}var f=this.getFocusedIndex();if(f>=0){this.focusItem(f,e);e.preventDefault();e.stopPropagation();}};
T.prototype.onsapspace=function(e){this.onsapenter(e);};
T.prototype.onsapenter=function(e){var i,$;if(this._skipNavigation(e,false,true)){return;}$=q(this.getFocusedDomRef());i=$.attr("id");if(s(i,"-outline")){if($.hasClass("sapSuiteUiCommonsTimelineGroupHeaderMainWrapper")){i=i.substr(0,i.length-"outline".length)+"groupCollapseIcon";$.find("#"+i).mousedown().mouseup().click();}else{$.find("div[role='toolbar']").children().first().mousedown().mouseup().click();this.fireEvent("Enter",{domRef:$.get(0)});}e.preventDefault();e.stopPropagation();}};
T.prototype.onsaphome=function(e){if(this.aItemDomRefs.length===0){return;}if(this._skipNavigation(e,false,false)){return;}this._callParent("onsaphome",arguments);};
T.prototype.onkeydown=function(e){this._callParent("onkeydown",arguments);if(e.keyCode===K.F7){this._onF7(e);}};
T.prototype.onmousedown=function(e){var S=e.target;var b=function(d,o){var f=false;var C=q(d);while(!C.is(":sapFocusable")&&C.get(0)!=o){C=C.parent();}if(C.get(0)!=o){f=true;}return f;};if(c(this.oDomRef,S)){for(var i=0;i<this.aItemDomRefs.length;i++){var o=this.aItemDomRefs[i];if(c(o,S)){if(o===S||!b(S,o)){this.focusItem(i,e);}return;}}this._bMouseDownHappened=true;setTimeout(function(){this._bMouseDownHappened=false;}.bind(this),20);}};
T.prototype.onsapnext=function(e){var i,f=true,C,n,o;if(!this._aRows){this._callParent("onsapnext",arguments);return;}if(this._skipNavigation(e,true,false)){return;}e.preventDefault();e.stopPropagation();if(this.getFocusedIndex()<0){return;}C=this._findPosition(this.iFocusedIndex);if(C===null){throw new Error("TimelineNavigation cannot obtain a position of focused item and hance it cannot senect next.");}n=Object.assign({},C);do{if(e.keyCode===K.ARROW_DOWN){n.iY++;if(n.iY>=this._aRows.length){if(n.iX+1>=this._aRows[this._aRows.length-1].length){return;}n.iY=0;n.iX++;}}else{n.iX++;if(n.iX>=this._aRows[n.iY].length){if(n.iY+1>=this._aRows.length){return;}n.iX=0;n.iY++;}}if(n.iX===C.iX&&n.iY===C.iY){if(f){f=false;}else{return;}}o=this._aRows[n.iY][n.iX];}while(!o||!q(o).is(":sapFocusable"));i=this._findIndex(n);this.focusItem(i,e);};
T.prototype.onsapprevious=function(e){var i,f=true,C,n,o;if(!this._aRows){this._callParent("onsapprevious",arguments);return;}if(this._skipNavigation(e,true,false)){return;}e.preventDefault();e.stopPropagation();if(this.getFocusedIndex()<0){return;}C=this._findPosition(this.iFocusedIndex);if(C===null){throw new Error("TimelineNavigation cannot obtain a position of focused item and hance it cannot senect next.");}n=Object.assign({},C);do{if(e.keyCode===K.ARROW_UP){n.iY--;if(n.iY<0){if(n.iX<=0){return;}n.iY=this._aRows.length-1;n.iX--;}}else{n.iX--;if(n.iX<0){if(n.iY<=0){return;}n.iX=this._aRows[n.iY].length-1;n.iY--;}}if(n.iX===C.iX&&n.iY===C.iY){if(f){f=false;}else{return;}}o=this._aRows[n.iY][n.iX];}while(!o||!q(o).is(":sapFocusable"));i=this._findIndex(n);this.focusItem(i,e);};
T.prototype._isInDomRefs=function(e){for(var i=0;i<this.aItemDomRefs.length;i++){if(this.aItemDomRefs[i].id===e.id){return true;}}return false;};
T.prototype._isInTimeline=function(e){while(e){if(this._isInDomRefs(e)){return true;}e=e.parentElement;}return false;};
T.prototype._hasTabbableChildren=function(e){if(e){if(e.childElementCount===0){return false;}for(var i=0;i<e.childNodes.length;i++){if(q(e.childNodes[i]).is(":sapFocusable")||this._hasTabbableChildren(e.childNodes[i])){return true;}}}return false;};
T.prototype._isLastChildInTimeline=function(e){return this._isInTimeline(e.target)&&!this._hasTabbableChildren(e.target);};
T.prototype.onsaptabnext=function(e){if(e.target.id&&this._isLastChildInTimeline(e)){var E=this.oDomRef.id+"-after";q(window.document.getElementById(E)).focus();}};
T.prototype.onsaptabprevious=function(e){if(this._isInDomRefs(e.target)){var E=this.oDomRef.id+"-before";q(window.document.getElementById(E)).focus();}};
T.prototype.onfocusin=function(e){if(!e.relatedTarget||!this._isInTimeline(e.relatedTarget)){if(this._isInTimeline(e.target)&&this.oLastFocused&&this.oLastFocused!==e.target){q(this.oLastFocused).focus();}}if(this._isInTimeline(e.target)){this.oLastFocused=e.target;}};
T.prototype._findPosition=function(i){var x,y,o=this.aItemDomRefs[i];for(y=0;y<this._aRows.length;y++){for(x=0;x<this._aRows[y].length;x++){if(o===this._aRows[y][x]){return{iX:x,iY:y};}}}return null;};
T.prototype._findIndex=function(p){var o=this._aRows[p.iY][p.iX],i;for(i=0;i<this.aItemDomRefs.length;i++){if(o===this.aItemDomRefs[i]){return i;}}return null;};
T.prototype._skipNavigation=function(e,C,b){return!c(this.oDomRef,e.target)||(this.getFocusedIndex()<0&&b)||this.aItemDomRefs&&Array.prototype.indexOf.call(this.aItemDomRefs,e.target)===-1||(q(this.oDomRef).data("sap.InNavArea")&&C);};
return T;});
sap.ui.predefine("sap/suite/ui/commons/TimelineRenderManager",["sap/ui/thirdparty/jquery","./library","sap/m/Text","sap/ui/core/Icon","sap/m/ViewSettingsDialog","sap/ui/core/ResizeHandler","sap/ui/core/Item","sap/m/ButtonType","sap/m/ToolbarSpacer","sap/m/SearchField","sap/m/OverflowToolbar","sap/m/Select","sap/m/RangeSlider","sap/m/Label","sap/m/Panel","sap/m/FlexBox","sap/m/OverflowToolbarButton","sap/m/MessageStrip","sap/ui/core/CSSSize","sap/m/ViewSettingsFilterItem","sap/m/ViewSettingsCustomItem","sap/m/OverflowToolbarLayoutData","sap/m/library","sap/m/MessageToast","sap/ui/core/InvisibleText","sap/m/SliderTooltip","sap/suite/ui/commons/TimelineRenderManagerTimestamp","sap/suite/ui/commons/util/StringSliderTooltip","sap/m/ResponsiveScale"],function(q,l,T,I,V,R,a,B,b,S,O,c,d,L,P,F,e,M,C,f,g,h,m,k,n,o,p,r,s){"use strict";var t=m.OverflowToolbarPriority;var u=l.TimelineGroupType;var v=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var w=680;var D=Object.freeze({UP:"UP",DOWN:"DOWN",NONE:"NONE"});
function x($,i,j){$.removeClass(i).addClass(j);}
function _($,A){return parseInt($.css(A).replace("px",""),10);}
var y={extendTimeline:function(z){z.prototype._initControls=function(){this._setupMessageStrip();this._setupFilterDialog();this._setupHeaderToolbar();this._setupAccessibilityItems();};z.prototype._registerResizeListener=function(){var i=this.$().parent().get(0);if(i){this.oResizeListener=R.register(i,q.proxy(this._performResizeChanges,this));}};z.prototype._deregisterResizeListener=function(){if(this.oResizeListener){R.deregister(this.oResizeListener);}};z.prototype._performUiChanges=function(i){this._deregisterResizeListener();if(!this.getDomRef()){return;}if(this._isVertical()){this._performUiChangesV(i);}else{this._performUiChangesH();}this._setupScrollers();this._startItemNavigation();this._registerResizeListener();};z.prototype._performDoubleSidedChangesLi=function($,i){var j=$.children().first(),A=this._isLeftAlignment()?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight";if(this._renderDblSided){if($.hasClass('sapSuiteUiCommonsTimelineItem')){$.removeClass('sapSuiteUiCommonsTimelineItem').addClass(i?"sapSuiteUiCommonsTimelineItemOdd":"sapSuiteUiCommonsTimelineItemEven");if(!i){x(j,"sapSuiteUiCommonsTimelineItemWrapperVLeft","sapSuiteUiCommonsTimelineItemWrapperVRight");}else{x(j,"sapSuiteUiCommonsTimelineItemWrapperVRight","sapSuiteUiCommonsTimelineItemWrapperVLeft");}}}else{$.removeClass("sapSuiteUiCommonsTimelineItemOdd").removeClass("sapSuiteUiCommonsTimelineItemEven").addClass("sapSuiteUiCommonsTimelineItem");j.removeClass("sapSuiteUiCommonsTimelineItemWrapperVLeft").removeClass("sapSuiteUiCommonsTimelineItemWrapperVRight").addClass(A);}};z.prototype._performDoubleSidedChanges=function(){var $=this.$(),A=$.find('.sapSuiteUiCommonsTimelineItemUlWrapper').not(".sapSuiteUiCommonsTimelineShowMoreWrapper"),E=$.find(".sapSuiteUiCommonsTimelineScrollV .sapSuiteUiCommonsTimelineGroupHeader"),G;if(this._renderDblSided){this._$content.addClass("sapSuiteUiCommonsTimelineDblSided");E.addClass("sapSuiteUiCommonsTimelineGroupHeaderDblSided");E.addClass("sapSuiteUiCommonsTimelineItemWrapperVLeft").removeClass("sapSuiteUiCommonsTimelineItemWrapperVRight");}else{this._$content.removeClass("sapSuiteUiCommonsTimelineDblSided");E.removeClass("sapSuiteUiCommonsTimelineGroupHeaderDblSided sapSuiteUiCommonsTimelineItemWrapperVLeft");E.addClass(this._isLeftAlignment()?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight");}for(var j=0;j<A.length;j++){var H=q(A[j]),J=H.find('> li').not(".sapSuiteUiCommonsTimelineGroupHeader");J.eq(1).css("margin-top",this._renderDblSided?"40px":"auto");for(var i=0;i<J.length;i++){G=q(J[i]);this._performDoubleSidedChangesLi(G,(i%2)===0);}}$.find(".sapSuiteUiCommonsTimelineItemBarV").css("height","");$.find(".sapSuiteUiCommonsTimelineItem").css("margin-bottom","");};z.prototype._performUiChangesH=function(){var $=this.$(),i,j;var A=function(E){return($.width()-(E.position().left+E.outerWidth()));};if(this.getEnableDoubleSided()&&this._isGrouped()){j=$.find(".sapSuiteUiCommonsTimelineHorizontalBottomLine ul");$.find("[firstgroupevenitem = true]:visible").each(function(E,G){var H=function(Y){return Y+"-"+(this._bRtlMode?"right":"left");}.bind(this),J=q("#"+G.id+"-line"),K=this._bRtlMode?A(J):J.position().left,N=30,Q=q(G),U=_(j,H("padding")),W,X;if(E===0){W=K-N-U;}else{i=Q.prevAll(".sapSuiteUiCommonsTimelineItemLiWrapperV:visible:first");X=this._bRtlMode?A(i):(i.position().left+_(i,H("margin")));W=(K-N)-(X+i.outerWidth());}Q.css(H("margin"),W+"px");}.bind(this));}if(!this.getEnableScroll()){$.find(".sapSuiteUiCommonsTimelineContentsH").css("overflow-x","hidden");}this._calculateTextHeight();};z.prototype._performUiChangesV=function(i){var $=this.$(),j=$.outerWidth()+50;if(this.getEnableDoubleSided()){this._renderDblSided=j>=w;if(this._renderDblSided!==this._lastStateDblSided||i){this._performDoubleSidedChanges();}this._lastStateDblSided=this._renderDblSided;}this._calculateTextHeight();this._calculateHeightV();};z.prototype._calculateHeightV=function(){var $=this.$(),j=this.$("headerBar").outerHeight()||0,A=this.$("filterMessage").outerHeight()||0,E=this.$("messageStrip").outerHeight()||0,G=E+A+j,H=function(W,Q){var X,Y,Z,a1,b1,c1,d1,e1=W.length,f1=this.getShowIcons()?".sapSuiteUiCommonsTimelineItemBarIconWrapperV:visible":".sapSuiteUiCommonsTimelineItemNoIcon:visible",g1=Q.length>0?Q.find(f1+", .sapSuiteUiCommonsTimelineItemBarIconWrapperV:visible").eq(0):q(),h1=8;for(var i=0;i<e1;i++){X=q(W[i+1]);Y=q(W[i]);Z=i<e1-1?X.find(f1):g1;b1=Y.find(f1);if(Z.length>0&&b1.length>0){c1=Z.offset().top;d1=b1.offset().top+b1.height();a1=Y.find(".sapSuiteUiCommonsTimelineItemBarV");h1=8;a1.height(c1-d1-h1);}}},J=function(W){var X,Y,Z,a1,b1,c1=40,d1=100,e1=function(){var f1=_(Z,"margin-top")+Z.position().top+Z.height()-X.position().top;Y.css("margin-bottom",f1+c1+"px");};for(var i=2;i<W.length;i++){X=q(W[i]);Y=q(W[i-1]);Z=q(W[i-2]);a1=this._bRtlMode?!X.hasClass("sapSuiteUiCommonsTimelineItemOdd"):X.hasClass("sapSuiteUiCommonsTimelineItemOdd");b1=X.position().left;if(!a1&&b1<d1||a1&&b1>d1){e1();}else{var f1=X.position().top-Y.position().top,g1=_(Z,"margin-bottom");if(f1<c1){Z.css("margin-bottom",g1+c1-f1);}}}},K=function(){var X=5,Y=$.position().top,Z=$.parent().height(),a1=_(this._$content,"padding-bottom"),b1=_(this._$content,"padding-top"),c1=Z-Y-G-b1-a1-X;this._$content.height(c1);}.bind(this),U,N,Q,W;if(this.getEnableScroll()){K();}if(this._renderDblSided){U=$.find(".sapSuiteUiCommonsTimelineItemUlWrapper");for(var i=0;i<U.length;i++){N=q(U[i]);Q=q(U[i+1]);W=N.find(" > li:not(.sapSuiteUiCommonsTimelineGroupHeader):visible");W.css("margin-bottom","");J.call(this,W,N);H.call(this,W,Q);}}};z.prototype._performResizeChanges=function(){this._performUiChanges();};z.prototype._calculateTextHeight=function(){var $=this.$(),j=this.getTextHeight(),A,E,G=function(N,Q){$.find(".sapSuiteUiCommonsTimelineItemTextWrapper:visible").each(function(U,W){var X=q(W),Y=X.children().first(),Z=Y.get(0).getClientRects(),a1=0,b1=0,c1,d1=-100000,e1=0,f1=X.attr("expanded");if(!f1){if(Z&&Z.length>0){c1=Z[0].top;e1=0;for(var i=0;i<Z.length-1;i++){if(d1!==Z[i].bottom){d1=Z[i].bottom;e1++;}if(N>0&&(Z[i+1].bottom-c1>N)){b1=e1;a1=Z[i].bottom-c1;break;}if(Q>0&&e1===Q){a1=Z[i].bottom-Z[0].top;b1=Q;break;}}}if(a1>0){X.height(a1);X.css("-webkit-line-clamp",b1.toString());X.next().show();}else if(!X.attr("expandable")){X.next().hide();}}});},H=function(i){G(0,parseInt(i,10));},J=function(i){G(i,0);},K=function(){var i=$.find(".sapSuiteUiCommonsTimelineItemTextWrapper");i.css("height","");i.css("-webkit-line-clamp","");$.css("height","100%");var N=this._$content.height(),Q=_(this._$content,"padding-bottom"),U=this._$content.get(0).scrollHeight,W=U-N-Q,X={height:0},Y,Z=20;$.find(".sapSuiteUiCommonsTimelineItemTextWrapper").each(function(a1,b1){var c1=q(b1).height();if(c1>X.height){X.height=c1;X.item=q(this);}});if(X.item){Y=X.item.parent().find(".sapSuiteUiCommonsTimelineItemShowMore:hidden").height();return X.height-W-Y-Z;}return 1;};if(j){if(this._useAutomaticHeight()){J(K.call(this));}else if(q.isNumeric(j)){H(j);}else{A=/([0-9]*\.?[0-9]+)(px)+/i;E=A.exec(j);if(E&&E.length>1){J(E[1]);}else if(C.isValid(j)){$.find(".sapSuiteUiCommonsTimelineItemTextWrapper").height(j);}}}};z.prototype._fixScrollerPositionH=function(){var $=this.$(),i=$.find(".sapSuiteUiCommonsTimelineHorizontalMiddleLine"),j=$.find(".sapSuiteUiCommonsTimelineHorizontalScroller"),A,E=this._$content.position().top;if(i.get(0)){A=i.position().top;$.find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").css("top",A-5);j.css("top",E+"px");j.height(this._$content.outerHeight()-15);}};z.prototype._setupScrollers=function(){var $=this.$(),i=450,N='rgba(0, 0, 0, 0)',j,A,E,G,H,J,K,Q,U,W,X,Y,Z,a1=function(b1){var c1=N;b1.parents().each(function(d1,e1){var A=q(e1).css("background-color"),f1=q(e1).css("background-image");if(f1!=="none"){c1=N;return;}if(A!==N&&A!=="transparent"){c1=A;}});return c1;};if(this._scrollingFadeout()){j=this._isVertical()?$.height():$.width();if(j<i){$.find(".sapSuiteUiCommonsTimelineVerticalScroller",".sapSuiteUiCommonsTimelineHorizontalScroller").hide();this._scrollersSet=false;return;}if(!this._scrollersSet){A=a1(this.$());if(A&&A!==N){E=A.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);if(E&&E.length>=4){G=parseInt(E[1],10);H=parseInt(E[2],10);J=parseInt(E[3],10);K="rgba("+G+","+H+","+J+", 0)";U="rgba("+G+","+H+","+J+", 0.7)";Q="rgba("+G+","+H+","+J+", 1)";W=$.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller, .sapSuiteUiCommonsTimelineTopScroller ");X=$.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller, .sapSuiteUiCommonsTimelineBottomScroller");Y=this._isVertical()?"top":"left";Z=this._isVertical()?"bottom":"right";W.css("background-image","linear-gradient(to "+Y+", "+K+", "+Q+")");X.css("background-image","linear-gradient(to "+Z+", "+K+", "+Q+")");W.css("background-image","-webkit-linear-gradient("+Z+", "+K+", "+U+" 30%,"+Q+")");X.css("background-image","-webkit-linear-gradient("+Y+", "+K+", "+U+" 30%,"+Q+")");this._scrollersSet=true;if(this.getContent().length>0){if((!this._isVertical()&&this._$content.get(0).scrollWidth>this._$content.outerWidth())||(this._isVertical()&&this._$content.get(0).scrollHeight>this._$content.outerHeight())){X.show();}}}}else{$.find(".sapSuiteUiCommonsTimelineHorizontalScroller").hide();}}if(!this._isVertical()){this._fixScrollerPositionH();}}};z.prototype._setupScrollEvent=function(){var $=this.$(),i=$.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper, .sapSuiteUiCommonsTimelineTopScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper"),j=$.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper, .sapSuiteUiCommonsTimelineBottomScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper"),A=$.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller, .sapSuiteUiCommonsTimelineTopScroller"),E=$.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller, .sapSuiteUiCommonsTimelineBottomScroller"),G=this._$content,H=this;if(H._lazyLoading()||H._scrollingFadeout()){G.on("scroll",function(J){var K=q(J.currentTarget),N=K.get(0).scrollLeft,Q=K.get(0).scrollTop,U=false,W=200,X=5,Y=false,Z,a1,b1,c1,G;if(H._isVertical()){Z=K.outerHeight();a1=K.get(0).scrollHeight;Y=Q+Z>a1-W;U=Q+Z>=a1-X;}else{b1=K.width();c1=K.get(0).scrollWidth;Y=N+b1>c1-W;U=N+b1>=c1-X-185;}if(H._lazyLoading()&&H._scrollMoreEvent){if(Y&&!H._isMaxed()){H._scrollMoreEvent=false;H._loadMore();}}if(H._scrollersSet){if(N>50||Q>50){A.show();}else{A.hide();H._manualScrolling=false;}if(U){E.hide();}else{E.show();}var d1;if(H._isVertical()){d1=K.get(0).scrollTop;G=d1>H._lastScrollPosition.y?j:i;H._lastScrollPosition.y=d1;}else{d1=K.get(0).scrollLeft;G=d1>H._lastScrollPosition.x?j:i;H._lastScrollPosition.x=d1;}G.addClass("sapSuiteUiCommonsTimelineScrolling");clearTimeout(q.data(this,'scrollTimer'));q.data(this,'scrollTimer',setTimeout(function(){i.removeClass("sapSuiteUiCommonsTimelineScrolling");j.removeClass("sapSuiteUiCommonsTimelineScrolling");},350));}});this.$().find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").mousedown(function(J){var K=90,N=(q(this).hasClass("sapSuiteUiCommonsTimelineScrollerIconWrapperLeft")||q(this).hasClass("sapSuiteUiCommonsTimelineScrollerIconWrapperTop"))?-K:K;H._manualScrolling=true;H._performScroll(N);});this.$().find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").mouseup(function(){H._manualScrolling=false;}).mouseout(function(){H._manualScrolling=false;});}if(this.getEnableScroll()&&!H._isVertical()){this._$content.on("wheel",function(J){if(J.originalEvent.deltaX){return;}var K=J.originalEvent.deltaY,N=30;if(K<N&&K>N*-1){K=K>0?N:N*-1;}this.scrollLeft+=K*2;});$.find(".sapSuiteUiCommonsTimelineHorizontalScroller, .sapSuiteUiCommonsTimelineVerticalScroller").on("wheel",function(J){var K=J.originalEvent.deltaY;if(H._isVertical()){H._$content.get(0).scrollTop+=K*2;}else{H._$content.get(0).scrollLeft+=K*2;}});}};z.prototype._setupMessageStrip=function(){var i=this;this._objects.register("messageStrip",function(){return new M(i.getId()+"-messageStrip",{close:function(){i.setCustomMessage("");i.fireCustomMessageClosed();},showCloseButton:true});});this._objects.register("filterMessageText",function(){return new T(i.getId()+"-filterMessageText",{});});this._objects.register("filterMessage",function(){var j=i._objects.getFilterMessageText(),A,E;E=new I(i.getId()+"filterMessageIcon",{src:"sap-icon://decline",press:[i._clearFilter,i]});A=new O(i.getId()+"-filterMessage",{design:"Info",content:[j,new b(),E]});A.addStyleClass("sapSuiteUiCommonsTimelineFilterInfoBar");A.setHeight("auto");return A;});};z.prototype._setMessageBars=function(i){var j=this._getFilterMessage();if(j){i.addChild(this._objects.getFilterMessage());this._objects.getFilterMessageText().setText(j);}};z.prototype._setupRangeFilterPage=function(){var i=this;this._rangeFilterType=null;this._objects.register("timestampFilterPicker",function(){return new p(i.getId(),{dateChanged:function(E){var j=E.getSource(),A=j.getStartDate()||i._minDate,G=j.getEndDate()||i._maxDate;i._filterDialogRangePage.setFilterCount(+(A!==i._minDate||G!==i._maxDate));}},undefined,v);});this._objects.register("timeFilterSelect",function(){var j=new c(i.getId()+"-timeFilterSelect",{change:function(A){i._rangeFilterType=A.getParameter("selectedItem").getProperty("key");i.toggleGroupTypeSelector(i._rangeFilterType);i._setRangeFilter();},items:[new a({text:v.getText("TIMELINE_YEAR"),key:u.Year}),new a({text:v.getText("TIMELINE_QUARTER"),key:u.Quarter}),new a({text:v.getText("TIMELINE_MONTH"),key:u.Month}),new a({text:v.getText("TIMELINE_DAY"),key:u.Day}),new a({text:v.getText("TIMELINE_CUSTOM_RANGE"),key:u.None})]});j.addStyleClass("sapSuiteUiCommonsTimelineRangeSelect");return j;});this._objects.register("timeRangeSlider",function(){var j=function(G){if(typeof G==="string"){G=Number(G);}var H=i._fnAddDate(G);return i._formatGroupBy(H,i._rangeFilterType).title;};var A=new s();A.getLabel=j;var E=new d(i.getId()+"-timeRangeSlider",{enableTickmarks:true,visible:false,showAdvancedTooltip:true,step:1,change:function(G){var H=E.getMin(),J=E.getMax(),K=E.getRange();i._filterDialogRangePage.setFilterCount(+(K[0]!==H||K[1]!==J));},customTooltips:[new r({mapFunction:j}),new r({mapFunction:j,fetchValue2:true})],scale:A});E.addStyleClass("sapSuiteUiCommonsTimelineRangeFilter");return E;});this._objects.register("rangeTypeLbl",function(){return new L(i.getId()+"-rangeTypeLbl",{text:v.getText("TIMELINE_GROUP_BY_PERIOD")+":"});});this._objects.register("rangeTypePanel",function(){var j=new P(i.getId()+"-rangeTypePanel",{content:[i._objects.getRangeTypeLbl(),i._objects.getTimeFilterSelect()]});j.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanel");j.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanelShadowed");return j;});this._objects.register("rangePanel",function(){return new F(i.getId()+"rangePanel",{direction:"Column",items:[i._objects.getRangeTypePanel(),i._objects.getTimeRangeSlider(),i._objects.getTimestampFilterPicker().getTimestampPanelRadio(),i._objects.getTimestampFilterPicker().getTimestampPanelPicker()]});});};z.prototype._setupFilterFirstPage=function(i){if(i){i.removeAllAggregation("filterItems");if(this.getShowItemFilter()){i.addAggregation("filterItems",new f({key:"items",text:this._getFilterTitle()}));}if(this.getShowTimeFilter()){this._filterDialogRangePage=new g({key:"range",text:v.getText("TIMELINE_RANGE_SELECTION"),customControl:[this._objects.getRangePanel()]});i.addAggregation("filterItems",this._filterDialogRangePage);}}};z.prototype._setupFilterDialog=function(){var i=this;this._setupRangeFilterPage();this._objects.register("filterContent",function(){var j,A,E=function(K){if(!i._filterState.data){i._setFilterList();K.removeAllItems();i._aFilterList.forEach(function(N){var Q=q.grep(i._currentFilterKeys,function(U){return N.key===U.key;}).length>0;K.addItem(new f({key:N.key,text:N.text,selected:Q}));});}i._filterState.data=true;},G=function(){k.show(v.getText("TIMELINE_NO_LIMIT_DATA"));},H=function(){if(!i._filterState.range){J.setBusy(true);i._getTimeFilterData().then(function(){J.setBusy(false);if((!i._minDate||!i._maxDate)||(!(i._minDate instanceof Date)||!(i._maxDate instanceof Date))){G();return;}if(!i._rangeFilterType){i._rangeFilterType=i._calculateRangeTypeFilter();}if(!i._startDate&&!i._endDate){i._setRangeFilter();}else{var K=i._objects.getTimeRangeSlider(),N=i._fnDateDiff(i._rangeFilterType),Q=K.getMin(),U=K.getMax();if(U-Q!==N){i._setRangeFilter();}j=i._fnDateDiff(i._rangeFilterType,i._minDate,i._startDate);A=i._fnDateDiff(i._rangeFilterType,i._minDate,i._endDate);K.setRange([j,A]);}i.toggleGroupTypeSelector(i._rangeFilterType);i._objects.getTimeFilterSelect().setSelectedKey(i._rangeFilterType);}).catch(function(){J.setBusy(false);G();});i._filterState.range=true;}},J=new V(i.getId()+"-filterContent",{confirm:function(K){var N=K.getParameter("filterItems"),Q,U,W,X,Y;i._currentFilterKeys=N.map(function(a1){return{key:a1.getProperty("key"),text:a1.getProperty("text")};});i._startDate=null;i._endDate=null;if(i._objects.getTimestampFilterPicker().getVisible()){var Z=i._objects.getTimestampFilterPicker().getStartDate()||i._minDate,$=i._objects.getTimestampFilterPicker().getEndDate()||i._maxDate;if(Z!==i._minDate||$!==i._maxDate){i._startDate=Z;i._endDate=$;Y=true;}}else{Q=i._objects.getTimeRangeSlider();X=Q.getRange();U=Q.getMin();W=Q.getMax();if(X[0]!==U||X[1]!==W){i._startDate=i._fnAddDate(Math.min.apply(null,X),D.DOWN);i._endDate=i._fnAddDate(Math.max.apply(null,X),D.UP);Y=true;}}i._filterData(Y);},resetFilters:function(K){var N=i._objects.getTimeRangeSlider();N.setValue(N.getMin());N.setValue2(N.getMax());i._filterDialogRangePage.setFilterCount(0);i._objects.getTimestampFilterPicker().clearDates();},filterDetailPageOpened:function(K){var N=K.getParameter("parentFilterItem").getProperty("key");if(N==="items"){E(K.getParameter("parentFilterItem"));}if(N==="range"){H();}}});i._setupFilterFirstPage(J);return J;});};z.prototype._setupHeaderToolbar=function(){var i=this,j=function(E){i._objects.register(E.name,function(){var G=new e(i.getId()+"-"+E.name,{type:B.Transparent,icon:E.icon,tooltip:E.tooltip,press:E.fnPress});G.setLayoutData(new h({priority:E.priority}));return G;});};j({name:"filterIcon",icon:"sap-icon://add-filter",tooltip:v.getText("TIMELINE_FILTER_BY"),fnPress:[i._openFilterDialog,i],priority:t.NeverOverflow,visible:i.getShowItemFilter()||i.getShowTimeFilter()});j({name:"sortIcon",icon:"sap-icon://arrow-bottom",tooltip:v.getText("TIMELINE_SORT"),fnPress:[i._sortClick,i],priority:t.High,visible:i.getSort()&&i.getShowSort()});var A=new b();this._objects.register("searchFieldLabel",function(){return new n(i.getId()+"-searchFieldLabel",{text:v.getText("TIMELINE_ACCESSIBILITY_SEARCH")});});this._objects.register("searchField",function(){var E=new S(i.getId()+"-searchField",{width:"14rem",ariaLabelledBy:i._objects.getSearchFieldLabel().getId(),search:function(G){i._search(G.getSource().getValue());},visible:i.getShowSearch()});E.setLayoutData(new h({priority:t.Low}));return E;});this._objects.register("headerBar",function(){var E=[];if(i._isVertical()){E=[A,i._objects.getSearchFieldLabel(),i._objects.getSearchField(),i._objects.getSortIcon(),i._objects.getFilterIcon()];}else{E=[i._objects.getSortIcon(),i._objects.getFilterIcon(),i._objects.getSearchFieldLabel(),i._objects.getSearchField()];}var H=new O(i.getId()+"-headerBar",{content:E,visible:i.getShowHeaderBar()});H.addStyleClass("sapSuiteUiCommonsTimelineHeaderBar");H.setParent(i);return H;});};z.prototype._setupAccessibilityItems=function(){var i=this;this._objects.register("accessibilityTitle",function(){return new n(i.getId()+"-accessibilityTitle",{text:v.getText("TIMELINE_ACCESSIBILITY_TITLE")});});};z.prototype.toggleGroupTypeSelector=function(i){var j=i!==u.None;this._objects.getTimestampFilterPicker().setVisible(!j);this._objects.getTimeRangeSlider().setVisible(j);};}};return y;},true);
sap.ui.predefine("sap/suite/ui/commons/TimelineRenderManagerTimestamp",["sap/ui/base/ManagedObject","sap/m/RadioButtonGroup","sap/m/RadioButton","sap/m/Panel","sap/m/DateTimePicker","sap/m/Label"],function(P,R,a,b,D,L){"use strict";var c={"RANGE":0,"START":1,"END":2};
var T=P.extend("sap.suite.ui.commons.TimelineRenderManagerTimestamp",{
"constructor":function(i,s,S,r){var t;var o;this.getText=r.getText.bind(r);this.getTimestampPanelPicker=function(){if(!t){t=this._createTimestampPanelPicker();}return t;};this.getTimestampPanelRadio=function(){if(!o){o=this._createTimestampPanelRadio();}return o;};P.call(this,i,s,S);this.setVisible(false);},
metadata:{events:{dateChanged:{}}}
});
T.prototype._createTimestampPanelPicker=function(){var i=this.getId()+"-timestamp-panel-picker";var C;var t=this;var p=new b({id:i,content:[new L({text:this.getText("TIMELINE_FROM")+":"}),new L({text:this.getText("TIMELINE_NOW"),visible:false}),new D({width:"auto",change:function(){t.fireDateChanged();}}),new L({text:this.getText("TIMELINE_TO")+":"}),new L({text:this.getText("TIMELINE_NOW"),visible:false}),new D({width:"auto",change:function(){t.fireDateChanged();}})]});p.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanel");C=p.getContent();C[1].addStyleClass("sapSuiteUiCommonsTimelineRangeLabelNow");C[2].addStyleClass("sapSuiteUiCommonsTimelineRangeDatePicker");C[4].addStyleClass("sapSuiteUiCommonsTimelineRangeLabelNow");C[5].addStyleClass("sapSuiteUiCommonsTimelineRangeDatePicker");return p;};
T.prototype._createTimestampPanelRadio=function(){var i=this.getId()+"-timestamp-panel-radio";return new b({"id":i,"content":[new R({columns:3,select:this.handlerSelectRadioButton.bind(this),buttons:[new a({id:i+"-range-of-dates",text:this.getText("TIMELINE_TIMESTAMP_RANGE_OF_DATES")}),new a({id:i+"-starting-date",text:this.getText("TIMELINE_TIMESTAMP_STARTING_DATE")}),new a({id:i+"-ending-date",text:this.getText("TIMELINE_TIMESTAMP_ENDING_DATE")})]})]});};
T.prototype.resizeDialog=function(o){o.getFilterContent()._getDialog().setContentWidth("50em");};
T.prototype.setVisible=function(v){this.getTimestampPanelPicker().setVisible(v);this.getTimestampPanelRadio().setVisible(v);};
T.prototype.setPickerView=function(p,d){d.getContent()[1].setVisible(p===c.END);d.getContent()[2].setVisible(p===c.START||p===c.RANGE);d.getContent()[4].setVisible(p===c.START);d.getContent()[5].setVisible(p===c.END||p===c.RANGE);};
T.prototype.handlerSelectRadioButton=function(e){this.setPickerView(e.getParameter("selectedIndex"),this.getTimestampPanelPicker());};
T.prototype.getVisible=function(){return this.getTimestampPanelPicker().getVisible()&&this.getTimestampPanelRadio().getVisible();};
T.prototype.getStartDate=function(){var s;var p=this.getTimestampPanelPicker().getContent()[2];if(p.getVisible()){s=p.getDateValue();}else{s=function(){return new Date();};}return s;};
T.prototype.clearDates=function(){var p=this.getTimestampPanelPicker().getContent()[2],o=this.getTimestampPanelPicker().getContent()[5];p.setDateValue();o.setDateValue();};
T.prototype.getEndDate=function(){var e;var p=this.getTimestampPanelPicker().getContent()[5];if(p.getVisible()){e=p.getDateValue();}else{e=function(){return new Date();};}return e;};
T.prototype.destroy=function(){this.getTimestampPanelPicker().destroy();this.getTimestampPanelRadio().destroy();P.prototype.destroy.call(this);};
return T;});
sap.ui.predefine('sap/suite/ui/commons/TimelineRenderer',["./library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Icon","sap/m/Button","sap/base/security/encodeXML"],function(l,H,I,B,e){"use strict";var T=l.TimelineAxisOrientation,S=l.TimelineScrollingFadeout;var a={},r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
a.render=function(R,t){var m=this._getHtmlModel(t);m.getRenderer().render(R);};
a._getHtmlModel=function(t){if(t.getAxisOrientation()===T.Horizontal){return this._getHorizontalTimelineElement(t);}else{return this._getVerticalTimelineElement(t);}};
a._getScrollerIcon=function(t,i,d){var b=new H("div"),n="scrollerIcon"+d,g="getScrollerIcon"+d;b.addClass(e("sapSuiteUiCommonsTimelineScrollerIconWrapper sapSuiteUiCommonsTimelineScrollerIconWrapper"+d));t._objects.register(n,function(){return new I({src:"sap-icon://step"});});b.addChild(t._objects[g]());return b;};
a._setWidthAndHeight=function(t,b){var h=t.getHeight(),w=t.getWidth();if(h&&!t._isVertical()){b.addStyle("height",h);}if(w&&(t._isVertical()||t.getEnableScroll())){b.addStyle("width",w);}};
a._getHorizontalTimelineElement=function(t){var b=t.getEnableDoubleSided(),c=t._isLeftAlignment(),C=t._outputItem,g=0,d=true,o,p,f,h,n,j,m=t._isMaxed(),L,q=function(){var N=new H("ul");N.setAttribute("role","listbox");return N;};var s=new H("div"),u=new H("div"),v=new H("div"),w=new H("div"),x=new H("div"),y=q(),z=new H("div"),A=q(),D=new H("div"),E=q(),F=new H("div"),G=new H("div"),J=new H("div"),K=new H("div");s.addControlData(t);s.addClass("sapSuiteUiCommonsTimelineH");if(!t.getEnableScroll()){s.addClass("sapSuiteUiCommonsTimelineNoScroll");}if(t._useAutomaticHeight()){s.addClass("sapSuiteUiCommonsTimelineAutomaticLineHeight");}this._addAccessibilityTags(s,t);this._setWidthAndHeight(t,s);if(b){s.addClass("sapSuiteUiCommonsTimelineDblSidedH");}else{s.addClass(c?"sapSuiteUiCommonsTimelineRight":"sapSuiteUiCommonsTimelineLeft");}if(t._isGrouped()){s.addClass("sapSuiteUiCommonsTimelineGrouped");}s.addChild(t._objects.getHeaderBar());t._setMessageBars(s);J.setId(t.getId()+"-contentH-before");s.addChild(J);u.setId(t.getId()+"-contentH");u.addClass("sapSuiteUiCommonsTimelineContentsH");s.addChild(u);K.setId(t.getId()+"-contentH-after");s.addChild(K);v.setId(t.getId()+"-scrollH");v.addClass("sapSuiteUiCommonsTimelineScrollH");u.addChild(v);x.addClass("sapSuiteUiCommonsTimelineHorizontalTopLine");z.addClass("sapSuiteUiCommonsTimelineHorizontalMiddleLine");z.addChild(A);D.addClass("sapSuiteUiCommonsTimelineHorizontalBottomLine");if(b||c){x.addChild(y);}if(b||!c){D.addChild(E);}y.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");E.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");A.addClass("sapSuiteUiCommonsTimelineHorizontalScrollingLine");if(C.length>0){if(t._scrollingFadeout()){s.addChild(F);s.addChild(G);F.addClass("sapSuiteUiCommonsTimelineHorizontalLeftScroller sapSuiteUiCommonsTimelineHorizontalScroller");G.addClass("sapSuiteUiCommonsTimelineHorizontalRightScroller sapSuiteUiCommonsTimelineHorizontalScroller");if(t.getScrollingFadeout()===S.AreaWithButtons){F.addChild(this._getScrollerIcon(t,"_scollerIconLeft","Left"));G.addChild(this._getScrollerIcon(t,"_scollerIconRight","Right"));}}w.addClass("sapSuiteUiCommonsTimelineHorizontalScrollContainer");v.addChild(w);w.addChild(x);w.addChild(z);w.addChild(D);A.addChild(this._getFirstHorizontalDelimiterLine(C[0]));for(var i=0;i<C.length;i++){L=m;o=C[i];p=c?"top":"bottom";f=(g%2);h=o.getText()==="GroupHeader";n=C[i+1];j=c?y:E;if(b){j=y;if(!h){j=f?E:y;}p=f?"bottom":"top";}if(h){g=0;d=true;p="top";if(L){for(var k=i+1;k<C.length;k++){if(C[k]._isGroupHeader){L=false;break;}}}}else if(f){o._isFirstGroupEvenItem=d;d=false;}o._index=i;o._orientation="H";o._placementLine=p;j.addChild(o);var M=this._getHorizontalDelimiterLine(t,o,g,n,m&&!n,L);if(M){A.addChild(M);}if(!h){g++;}}}else{v.addChild(this._getEmptyTimelineElement(t));}if(t._showMore){A.addChild(this._getShowMoreElement(t));}return s;};
a._getFirstHorizontalDelimiterLine=function(t){var b=new H("li"),c=new H("div"),d=new H("div"),f=new H("div"),i=t._isGroupHeader;f.addClass("sapSuiteUiCommonsTimelineItemBarH");d.addClass("sapSuiteUiCommonsTimelineItemBarWrapper");d.addChild(f);c.addChild(d);c.addClass("sapSuiteUiCommonsTimelineItemBarDivWrapper");b.addChild(c);b.addClass("sapSuiteUiCommonsTimelineItemFirstBar");if(i){b.addClass(t._isGroupCollapsed()?"sapSuiteUiCommonsTimelineGroupCollapsed":"sapSuiteUiCommonsTimelineGroupExpanded");}return b;};
a._getHorizontalDelimiterLine=function(t,o,i,n,L,b){var c=(i%2),d=o.getText()==="GroupHeader",s=d?"sapSuiteUiCommonsTimelineItemGroupHeaderH":"sapSuiteUiCommonsTimelineItemBaseLength",f="sapSuiteUiCommonsTimelineItemBarH",g=n!=null&&n._isGroupHeader,h=n===null,j=o._getStatusColorClass(),k=new H("li"),m=new H("div"),p=new H("div"),q=new H("div"),u=new H("div"),v=new H("div"),w=new H("div");k.setId(o.getId()+"-line");if(d&&!o._isGroupCollapsed()){k.addStyle("display","none");}if(o._groupID){k.setAttribute("groupid",o._groupID,true);}if(d){f="sapSuiteUiCommonsTimelineItemGroupHeaderBar";k.setAttribute("nodeType","GroupHeaderBar");}else if(t.getEnableDoubleSided()){if((!g||c)&&!h){s=c?"sapSuiteUiCommonsTimelineItemHOdd":"sapSuiteUiCommonsTimelineItemHEven";}}if((!d&&L)||(d&&b)){k.addClass("sapSuiteUiCommonsTimelineLastItem");}k.addClass(e(s));q.addClass("sapSuiteUiCommonsTimelineItemBarWrapper");p.addClass("sapSuiteUiCommonsTimelineItemBarH");p.addClass(e(f));m.addStyle("display","flex");m.addStyle("height","100%");if(t.getShowIcons()||d){m.addChild(u);if(!d){if(j){u.addClass(e(j));}else{u.addClass("sapSuiteUiCommonsTimelineNoStatus");}u.addClass("sapSuiteUiCommonsTimelineItemIconWrapper");}else{u.addClass("sapSuiteUiCommonsTimelineItemGroupBarIconWrapper");}u.addChild(o._getLineIcon());}else{w.addChild(v);w.addClass("sapSuiteUiCommonsTimelineItemNoIconWrapper");v.addClass("sapSuiteUiCommonsTimelineItemNoIcon");if(j){v.addClass(e(j));}else{v.addClass("sapSuiteUiCommonsTimelineNoStatus");}m.addClass("sapSuiteUiCommonsTimelineItemWrapper");m.addChild(w);}m.addChild(q);q.addChild(p);if(t._collapsedGroups[o._groupID]){if(d){k.addClass("sapSuiteUiCommonsTimelineItemGroupCollapsedBar");}else{k.addStyle("display","none");}}k.addChild(m);return k;};
a._getVerticalTimelineElement=function(t){var b=new H("div"),c=new H("div"),d=new H("div"),f=new H("div"),g=new H("div"),h=new H("div"),j=new H("div"),m=new H("div"),n=new H("div"),o,p,N,q,s,L,C=function(){var o=new H("ul");o.addClass("sapSuiteUiCommonsTimelineItemUlWrapper");o.setAttribute("role","listbox");return o;};b.addControlData(t);b.addClass("sapSuiteUiCommonsTimeline");this._addAccessibilityTags(b,t);h.addClass("sapSuiteUiCommonsTimelineContentWrapper");if(t._isGrouped()){b.addClass("sapSuiteUiCommonsTimelineGrouped");}if(t._scrollingFadeout()){h.addChild(c);h.addChild(d);c.addClass("sapSuiteUiCommonsTimelineTopScroller sapSuiteUiCommonsTimelineVerticalScroller");d.addClass("sapSuiteUiCommonsTimelineBottomScroller sapSuiteUiCommonsTimelineVerticalScroller");if(t.getScrollingFadeout()===S.AreaWithButtons){c.addChild(this._getScrollerIcon(t,"_scollerIconTop","Top"));d.addChild(this._getScrollerIcon(t,"_scrollerIconBottom","Bottom"));}}this._setWidthAndHeight(t,b);b.addChild(t._objects.getHeaderBar());t._setMessageBars(b);if((t.getMessageStrip()!==null)&&(t.getMessageStrip()!==undefined)&&t.getMessageStrip().getText()!==""){b.addChild(t._objects.getMessageStrip());}m.setId(t.getId()+"-content-before");m.setAttribute("tabindex",0);b.addChild(m);b.addChild(h);h.addChild(f);f.setId(t.getId()+"-content");f.setAttribute("data-sap-ui-fastnavgroup","true");f.addClass("sapSuiteUiCommonsTimelineContents");f.addClass("sapSuiteUiCommonsTimelineScrollV");f.addClass("sapSuiteUiCommonsTimelineScroll");n.setId(t.getId()+"-content-after");n.setAttribute("tabindex",0);b.addChild(n);f.addChild(g);g.setId(t.getId()+"-scroll");g.addClass("sapSuiteUiCommonsTimelineScroll");o=C();var u=t._outputItem,v=t._isMaxed();if(u.length>0){g.addChild(o);for(var i=0;i<u.length;i++){L=v;p=u[i];N=u[i+1];q=p._isGroupHeader;p._orientation="V";p._position=t.getAlignment();p._additionalBarClass="";p._index=i;p._isLast=v&&u.length-1===i;if(q){o.setAttribute("groupId",p._groupID,true);}if(q){for(var k=i+1;k<u.length;k++){s=u[k];if(s._isGroupHeader){if(!s._isGroupCollapsed()&&p._isGroupCollapsed()){p._additionalBarClass="sapSuiteUiCommonsTimelineGroupNextExpanded";}L=false;break;}}}p._isLastGroup=L;if(N&&N._isGroupHeader&&!N._isGroupCollapsed()){p._additionalBarClass="sapSuiteUiCommonsTimelineGroupNextExpanded";}if(q&&(i!=0)){o=C();g.addChild(o);}o.addChild(p);}}else{g.addChild(this._getEmptyTimelineElement(t));}if(t._showMore){j.addClass("sapSuiteUiCommonsTimelineShowMoreWrapper");j.addChild(this._getShowMoreElement(t));g.addChild(j);}return b;};
a._getEmptyTimelineElement=function(t){var b=new H("div"),c=new H("span");b.addClass("sapSuiteUiCommonsTimelineNoTextWrapper");b.addChild(c);c.addChildEscaped(t.getNoDataText());return b;};
a._getShowMoreElement=function(t){var b=t._isVertical()?new H("div"):new H("li"),c="sapSuiteUiCommonsTimelineItemGetMoreButtonV",i="sap-icon://drill-down";if(t.getAxisOrientation()===T.Horizontal){i="sap-icon://process";c="sapSuiteUiCommonsTimelineItemGetMoreButtonH";}t._objects.register("moreButton",function(){var m=new B({icon:i,tooltip:r.getText("TIMELINE_MORE"),press:function(){t._loadMore();}});m.addEventDelegate({onAfterRendering:function(){this.$().attr("tabindex",-1);}},m);return m;});b.addClass("sapSuiteUiCommonsTimelineItemGetMoreButton");b.addClass(e(c));b.addChild(t._objects.getMoreButton());return b;};
a._addAccessibilityTags=function(b,t){var L=[t._objects.getAccessibilityTitle().getId()];if(t._getFilterMessage()){L.push(t._objects.getFilterMessageText().getId());}b.setAttribute("role","presentation");b.addChild(t._objects.getAccessibilityTitle());b.setAttribute("aria-labelledby",L.join(" "),true);b.setAttribute("aria-live","assertive");};
return a;},true);
sap.ui.predefine('sap/suite/ui/commons/Utils',[],function(){"use strict";var U={};
U._setupMobileDraggable=function($){if(sap.ui.getCore().isMobile()){var s=function(e,a){if(e.originalEvent.touches.length>1){return;}e.preventDefault();var b=e.originalEvent.changedTouches[0],c=document.createEvent('MouseEvents');c.initMouseEvent(a,true,true,window,1,b.screenX,b.screenY,b.clientX,b.clientY,false,false,false,false,0,null);e.target.dispatchEvent(c);};var t=false;$.bind({touchstart:function(e){if(t){return;}t=true;s(e,'mouseover');s(e,'mousemove');s(e,'mousedown');},touchmove:function(e){if(!t){return;}s(e,'mousemove');},touchend:function(e){if(!t){return;}s(e,'mouseup');s(e,'mouseout');s(e,'click');t=false;}});}};
return U;},true);
sap.ui.predefine('sap/suite/ui/commons/flexibility/Timeline.flexibility',["./changeHandler/PropertyChangeMapper","sap/base/Log"],function(P,L){"use strict";var I=Object.freeze({"-sortIcon":"showSort","-filterIcon":["showItemFilter","showTimeFilter"],"-searchField":"showSearch","-headerBar":"showHeaderBar"});
function g(i){var k;for(k in I){if(typeof k=="string"&&k.length>0&&i.endsWith(k)){return I[k];}}L.fatal("Unkonw id of an inner component: "+i);return null;}
return{"hideToolbarItem":new P(function(s){var i=s.removedElement.id;return g(i);},false),"unhideToolbarItem":new P(function(s){var i=s.revealedElementId;return g(i);},true),"hideControl":"default","unhideControl":"default","moveControls":"default"};},true);
sap.ui.predefine('sap/suite/ui/commons/flexibility/changeHandler/PropertyChangeMapper',["sap/ui/base/Object","sap/ui/fl/changeHandler/PropertyChange","sap/base/Log"],function(B,P,L){
var a=B.extend("sap.suite.ui.commons.flexibility.changeHandler.PropertyChangeMapper",{constructor:function(p,v){if(typeof p==="function"){this._fnProperty=p;}else if(typeof p==="string"){this._fnProperty=function(){return p;};}else{L.fatal("Incorrect type of property: "+typeof p);}if(typeof v==="function"){this._fnValue=v;}else{this._fnValue=function(){return v;};}}});
a.prototype.applyChange=function(c,C,p){var o=c.getDefinition().content,b=o.property;if(Array.isArray(b)){b.forEach(function(s){o.property=s;P.applyChange(c,C,p);});}else{P.applyChange(c,C,p);}};
a.prototype.completeChangeContent=function(c,s){var p=this._fnProperty(s),m=Object.assign(s,{content:{property:p,newValue:this._fnValue(p)}});P.completeChangeContent(c,m);};
a.revertChange=function(c,C,p){var o=c.getDefinition().content,b=o.property;if(Array.isArray(b)){b.forEach(function(s){o.property=s;P.revertChange(c,C,p);});}else{P.revertChange(c,C,p);}};
return a;});
sap.ui.predefine('sap/suite/ui/commons/library',["sap/ui/core/Core","sap/ui/core/library","sap/m/library"],function(){"use strict";sap.ui.getCore().initLibrary({name:"sap.suite.ui.commons",dependencies:["sap.ui.core","sap.m"],types:["sap.suite.ui.commons.BulletChartMode","sap.suite.ui.commons.CalculationBuilderComparisonOperatorType","sap.suite.ui.commons.CalculationBuilderFunctionType","sap.suite.ui.commons.CalculationBuilderItemType","sap.suite.ui.commons.CalculationBuilderLayoutType","sap.suite.ui.commons.CalculationBuilderLogicalOperatorType","sap.suite.ui.commons.CalculationBuilderOperatorType","sap.suite.ui.commons.CalculationBuilderValidationType","sap.suite.ui.commons.CommonBackground","sap.suite.ui.commons.ComparisonChartView","sap.suite.ui.commons.DeviationIndicator","sap.suite.ui.commons.FacetOverviewHeight","sap.suite.ui.commons.FrameType","sap.suite.ui.commons.HeaderContainerView","sap.suite.ui.commons.ImageEditorContainerMode","sap.suite.ui.commons.ImageEditorMode","sap.suite.ui.commons.ImageFormat","sap.suite.ui.commons.InfoTileSize","sap.suite.ui.commons.InfoTileTextColor","sap.suite.ui.commons.InfoTileValueColor","sap.suite.ui.commons.LoadState","sap.suite.ui.commons.MicroAreaChartView","sap.suite.ui.commons.MicroProcessFlowRenderType","sap.suite.ui.commons.networkgraph.ActionButtonPosition","sap.suite.ui.commons.networkgraph.BackgroundColor","sap.suite.ui.commons.networkgraph.ElementStatus","sap.suite.ui.commons.networkgraph.LayoutAlgorithmType","sap.suite.ui.commons.networkgraph.LayoutRenderType","sap.suite.ui.commons.networkgraph.LineArrowOrientation","sap.suite.ui.commons.networkgraph.LineArrowPosition","sap.suite.ui.commons.networkgraph.LineType","sap.suite.ui.commons.networkgraph.HeaderCheckboxState","sap.suite.ui.commons.networkgraph.NodePlacement","sap.suite.ui.commons.networkgraph.NodeShape","sap.suite.ui.commons.networkgraph.NodeSize","sap.suite.ui.commons.networkgraph.Orientation","sap.suite.ui.commons.networkgraph.RenderType","sap.suite.ui.commons.ProcessFlowConnectionLabelState","sap.suite.ui.commons.ProcessFlowConnectionState","sap.suite.ui.commons.ProcessFlowConnectionType","sap.suite.ui.commons.ProcessFlowDisplayState","sap.suite.ui.commons.ProcessFlowLaneState","sap.suite.ui.commons.ProcessFlowNodeState","sap.suite.ui.commons.ProcessFlowNodeType","sap.suite.ui.commons.ProcessFlowZoomLevel","sap.suite.ui.commons.SelectionState","sap.suite.ui.commons.statusindicator.FillingType","sap.suite.ui.commons.statusindicator.FillingDirectionType","sap.suite.ui.commons.taccount.TAccountPanelState","sap.suite.ui.commons.ThingGroupDesign","sap.suite.ui.commons.TimelineAlignment","sap.suite.ui.commons.TimelineAxisOrientation","sap.suite.ui.commons.TimelineFilterType","sap.suite.ui.commons.TimelineGroupType","sap.suite.ui.commons.TimelineScrollingFadeout","sap.suite.ui.commons.ValueStatus"],interfaces:[],controls:["sap.suite.ui.commons.BulletChart","sap.suite.ui.commons.BusinessCard","sap.suite.ui.commons.CalculationBuilder","sap.suite.ui.commons.CalculationBuilderExpression","sap.suite.ui.commons.CalculationBuilderFunction","sap.suite.ui.commons.CalculationBuilderInput","sap.suite.ui.commons.CalculationBuilderItem","sap.suite.ui.commons.CalculationBuilderValidationResult","sap.suite.ui.commons.CalculationBuilderVariable","sap.suite.ui.commons.ChartContainer","sap.suite.ui.commons.ChartContainerContent","sap.suite.ui.commons.ChartContainerToolbarPlaceholder","sap.suite.ui.commons.ChartTile","sap.suite.ui.commons.ColumnMicroChart","sap.suite.ui.commons.ComparisonChart","sap.suite.ui.commons.DateRangeScroller","sap.suite.ui.commons.DateRangeSlider","sap.suite.ui.commons.DateRangeSliderInternal","sap.suite.ui.commons.DeltaMicroChart","sap.suite.ui.commons.DynamicContainer","sap.suite.ui.commons.FacetOverview","sap.suite.ui.commons.FeedItemHeader","sap.suite.ui.commons.FeedTile","sap.suite.ui.commons.GenericTile","sap.suite.ui.commons.GenericTile2X2","sap.suite.ui.commons.HarveyBallMicroChart","sap.suite.ui.commons.HeaderCell","sap.suite.ui.commons.HeaderContainer","sap.suite.ui.commons.imageeditor.ImageEditor","sap.suite.ui.commons.imageeditor.ImageEditorContainer","sap.suite.ui.commons.InfoTile","sap.suite.ui.commons.JamContent","sap.suite.ui.commons.KpiTile","sap.suite.ui.commons.LaunchTile","sap.suite.ui.commons.LinkActionSheet","sap.suite.ui.commons.MicroAreaChart","sap.suite.ui.commons.MonitoringContent","sap.suite.ui.commons.MonitoringTile","sap.suite.ui.commons.networkgraph.Graph","sap.suite.ui.commons.networkgraph.Node","sap.suite.ui.commons.NewsContent","sap.suite.ui.commons.NoteTaker","sap.suite.ui.commons.NoteTakerCard","sap.suite.ui.commons.NoteTakerFeeder","sap.suite.ui.commons.NumericContent","sap.suite.ui.commons.NumericTile","sap.suite.ui.commons.PictureZoomIn","sap.suite.ui.commons.ProcessFlow","sap.suite.ui.commons.ProcessFlowConnection","sap.suite.ui.commons.ProcessFlowConnectionLabel","sap.suite.ui.commons.ProcessFlowLaneHeader","sap.suite.ui.commons.ProcessFlowNode","sap.suite.ui.commons.RepeaterViewConfiguration","sap.suite.ui.commons.SplitButton","sap.suite.ui.commons.statusindicator.StatusIndicator","sap.suite.ui.commons.statusindicator.ShapeGroup","sap.suite.ui.commons.statusindicator.Shape","sap.suite.ui.commons.statusindicator.Rectangle","sap.suite.ui.commons.statusindicator.Circle","sap.suite.ui.commons.statusindicator.CustomShape","sap.suite.ui.commons.statusindicator.PropertyThreshold","sap.suite.ui.commons.statusindicator.DiscreteThreshold","sap.suite.ui.commons.statusindicator.LibraryShape","sap.suite.ui.commons.taccount.TAccount","sap.suite.ui.commons.TargetFilter","sap.suite.ui.commons.ThingCollection","sap.suite.ui.commons.ThreePanelThingInspector","sap.suite.ui.commons.ThreePanelThingViewer","sap.suite.ui.commons.TileContent","sap.suite.ui.commons.TileContent2X2","sap.suite.ui.commons.Timeline","sap.suite.ui.commons.TimelineFilterListItem","sap.suite.ui.commons.TimelineItem","sap.suite.ui.commons.UnifiedThingGroup","sap.suite.ui.commons.UnifiedThingInspector","sap.suite.ui.commons.VerticalNavigationBar","sap.suite.ui.commons.ViewRepeater"],elements:["sap.suite.ui.commons.BulletChartData","sap.suite.ui.commons.ColumnData","sap.suite.ui.commons.ColumnMicroChartLabel","sap.suite.ui.commons.ComparisonData","sap.suite.ui.commons.CountingNavigationItem","sap.suite.ui.commons.FeedItem","sap.suite.ui.commons.HarveyBallMicroChartItem","sap.suite.ui.commons.HeaderCellItem","sap.suite.ui.commons.imageeditor.CustomSizeItem","sap.suite.ui.commons.MicroAreaChartItem","sap.suite.ui.commons.MicroAreaChartLabel","sap.suite.ui.commons.MicroAreaChartPoint","sap.suite.ui.commons.TargetFilterColumn","sap.suite.ui.commons.TargetFilterMeasureColumn","sap.suite.ui.commons.AriaProperties"],version:"1.74.0",extensions:{flChangeHandlers:{"sap.suite.ui.commons.Timeline":"sap/suite/ui/commons/flexibility/Timeline"}}});sap.suite.ui.commons.BulletChartMode={Actual:"Actual",Delta:"Delta"};sap.suite.ui.commons.CommonBackground={Lightest:"Lightest",ExtraLight:"ExtraLight",Light:"Light",MediumLight:"MediumLight",Medium:"Medium",Dark:"Dark",ExtraDark:"ExtraDark",Darkest:"Darkest"};sap.suite.ui.commons.ComparisonChartView={Normal:"Normal",Wide:"Wide"};sap.suite.ui.commons.CalculationBuilderComparisonOperatorType={"<":"<",">":">","<=":"<=",">=":">=","=":"=","!=":"!="};sap.suite.ui.commons.CalculationBuilderFunctionType={ABS:"ABS",Round:"ROUND",RoundUp:"RoundUp",RoundDown:"RoundDown",Case:"CASE",SQRT:"SQRT",NDIV0:"NDIV0",NODIM:"NODIM",SUMCT:"SUMCT",SUMGT:"SUMGT",SUMRT:"SUMRT"};sap.suite.ui.commons.CalculationBuilderItemType={Operator:"Operator",CustomOperator:"CustomOperator",Variable:"Variable",Constant:"Constant",Function:"Function",CustomFunction:"CustomFunction",Empty:"Empty",Error:"Error"};sap.suite.ui.commons.CalculationBuilderLogicalOperatorType={AND:"AND",OR:"OR",XOR:"XOR",NOT:"NOT"};sap.suite.ui.commons.CalculationBuilderLayoutType={Default:"Default",VisualTextualReadOnly:"VisualTextualReadOnly",VisualOnly:"VisualOnly",TextualOnly:"TextualOnly"};sap.suite.ui.commons.CalculationBuilderOperatorType={"+":"+","-":"-","/":"/","*":"*","(":"(",")":")",",":","};sap.suite.ui.commons.CalculationBuilderValidationMode={FocusOut:"FocusOut",LiveChange:"LiveChange"};sap.suite.ui.commons.DeviationIndicator={Up:"Up",Down:"Down",None:"None"};sap.suite.ui.commons.FacetOverviewHeight={XS:"XS",S:"S",M:"M",L:"L",XL:"XL",XXL:"XXL",Auto:"Auto",None:"None"};sap.suite.ui.commons.FrameType={OneByOne:"OneByOne",TwoByOne:"TwoByOne",TwoThirds:"TwoThirds",Auto:"Auto"};sap.suite.ui.commons.HeaderContainerView={Horizontal:"Horizontal",Vertical:"Vertical"};sap.suite.ui.commons.InfoTileSize={XS:"XS",S:"S",M:"M",L:"L",Auto:"Auto"};sap.suite.ui.commons.InfoTileTextColor={Positive:"Positive",Critical:"Critical",Negative:"Negative"};sap.suite.ui.commons.InfoTileValueColor={Neutral:"Neutral",Good:"Good",Critical:"Critical",Error:"Error"};sap.suite.ui.commons.LoadState={Loading:"Loading",Loaded:"Loaded",Failed:"Failed",Disabled:"Disabled"};sap.suite.ui.commons.MicroAreaChartView={Normal:"Normal",Wide:"Wide"};sap.suite.ui.commons.MicroProcessFlowRenderType={Wrap:"Wrap",NoWrap:"NoWrap",Scrolling:"Scrolling",ScrollingWithResizer:"ScrollingWithResizer"};sap.suite.ui.commons.networkgraph.BackgroundColor={Default:"Default",White:"White"};sap.suite.ui.commons.networkgraph.ActionButtonPosition={Left:"Left",Right:"Right"};sap.suite.ui.commons.networkgraph.NodeShape={Circle:"Circle",Box:"Box",Custom:"Custom"};sap.suite.ui.commons.networkgraph.LineType={Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted"};sap.suite.ui.commons.networkgraph.NodePlacement={BrandesKoepf:"BrandesKoepf",LinearSegments:"LinearSegments",Simple:"Simple"};sap.suite.ui.commons.networkgraph.ElementStatus={Standard:"Standard",Success:"Success",Warning:"Warning",Error:"Error",Information:"Information"};sap.suite.ui.commons.networkgraph.Orientation={LeftRight:"LeftRight",RightLeft:"RightLeft",TopBottom:"TopBottom",BottomTop:"BottomTop"};sap.suite.ui.commons.networkgraph.RenderType={Html:"Html",Svg:"Svg"};sap.suite.ui.commons.networkgraph.LineArrowOrientation={ParentOf:"ParentOf",ChildOf:"ChildOf",None:"None",Both:"Both"};sap.suite.ui.commons.networkgraph.LineArrowPosition={Start:"Start",Middle:"Middle",End:"End"};sap.suite.ui.commons.networkgraph.LayoutRenderType={LayeredWithGroups:"LayeredWithGroups",SwimLanes:"SwimLanes",Forces:"Forces",TwoColumns:"TwoColumns"};sap.suite.ui.commons.networkgraph.HeaderCheckboxState={Hidden:"Hidden",Checked:"Checked",Unchecked:"Unchecked"};sap.suite.ui.commons.ProcessFlowConnectionLabelState={Neutral:"Neutral",Positive:"Positive",Critical:"Critical",Negative:"Negative"};sap.suite.ui.commons.ProcessFlowConnectionState={Highlighted:"Highlighted",Dimmed:"Dimmed",Regular:"Regular",Selected:"Selected"};sap.suite.ui.commons.ProcessFlowConnectionType={Planned:"Planned",Normal:"Normal"};sap.suite.ui.commons.ProcessFlowDisplayState={Regular:"Regular",RegularFocused:"RegularFocused",Highlighted:"Highlighted",HighlightedFocused:"HighlightedFocused",Dimmed:"Dimmed",DimmedFocused:"DimmedFocused",Selected:"Selected",SelectedHighlighted:"SelectedHighlighted",SelectedHighlightedFocused:"SelectedHighlightedFocused",SelectedFocused:"SelectedFocused"};sap.suite.ui.commons.ProcessFlowLaneState={value:"value",state:"state"};sap.suite.ui.commons.ProcessFlowNodeState={Positive:"Positive",Negative:"Negative",Critical:"Critical",Planned:"Planned",Neutral:"Neutral",PlannedNegative:"PlannedNegative"};sap.suite.ui.commons.ProcessFlowNodeType={Single:"Single",Aggregated:"Aggregated"};sap.suite.ui.commons.ProcessFlowZoomLevel={One:"One",Two:"Two",Three:"Three",Four:"Four"};sap.suite.ui.commons.SelectionState={Selected:"Selected",NotSelected:"NotSelected",Semantic:"Semantic"};sap.suite.ui.commons.statusindicator.FillingDirectionType={Up:"Up",Down:"Down",Left:"Left",Right:"Right",Clockwise:"Clockwise",CounterClockwise:"CounterClockwise"};sap.suite.ui.commons.taccount.TAccountPanelState={Default:"Default",Table:"Table"};sap.suite.ui.commons.statusindicator.HorizontalAlignmentType={Left:"Left",Middle:"Middle",Right:"Right"};sap.suite.ui.commons.statusindicator.VerticalAlignmentType={Top:"Top",Middle:"Middle",Bottom:"Bottom"};sap.suite.ui.commons.statusindicator.SizeType={None:"None",Small:"Small",Medium:"Medium",Large:"Large",ExtraLarge:"ExtraLarge"};sap.suite.ui.commons.statusindicator.LabelPositionType={Top:"Top",Right:"Right",Bottom:"Bottom",Left:"Left"};sap.suite.ui.commons.statusindicator.FillingType={Linear:"Linear",Radial:"Radial",Circular:"Circular",None:"None"};sap.suite.ui.commons.ThingGroupDesign={ZeroIndent:"ZeroIndent",TopIndent:"TopIndent"};sap.suite.ui.commons.TimelineAlignment={Right:"Right",Left:"Left",Top:"Top",Bottom:"Bottom"};sap.suite.ui.commons.TimelineAxisOrientation={Vertical:"Vertical",Horizontal:"Horizontal"};sap.suite.ui.commons.TimelineFilterType={Data:"Data",Time:"Time",Search:"Search"};sap.suite.ui.commons.TimelineGroupType={None:"None",Year:"Year",Month:"Month",Quarter:"Quarter",Week:"Week",Day:"Day"};sap.suite.ui.commons.TimelineScrollingFadeout={None:"None",Area:"Area",AreaWithButtons:"AreaWithButtons"};sap.suite.ui.commons.ValueStatus={Good:"Good",Neutral:"Neutral",Critical:"Critical",Bad:"Bad"};sap.suite.ui.commons.ImageEditorMode={Resize:"Resize",CropRectangle:"CropRectangle",CropEllipse:"CropEllipse",CropCustomShape:"CropCustomShape",Default:"Default"};sap.suite.ui.commons.ImageEditorContainerMode={Transform:"Transform",Crop:"Crop",Filter:"Filter"};sap.suite.ui.commons.ImageFormat={Png:"Png",Jpeg:"Jpeg"};sap.suite.ui.commons.ImageEditorContainerButton={Transform:"Transform",Crop:"Crop",Filter:"Filter"};return sap.suite.ui.commons;});
sap.ui.predefine('sap/suite/ui/commons/networkgraph/util/Dijkstra',[],function(){"use strict";
function D(g,s,S){this.oGraph=g;this.oSourceNode=s;this.oSettings=Object.assign({fnLineValue:function(){return 1;},bIgnoreDirections:false,bIgnoreCollapsed:false},S);this._compute();}
D.prototype._compute=function(){var c,l,i,s=[this.oSourceNode],v={},d={},p={},L=this.oSettings.fnLineValue,I=this.oSettings.bIgnoreDirections,b=this.oSettings.bIgnoreCollapsed;function a(n,f){for(var i=0;i<s.length;i++){if(f>d[s[i].getKey()]){s.splice(i,0,n);return;}}s.push(n);}function e(o,r){var t=r?o.getFromNode():o.getToNode(),T=t.getKey(),f=d[c.getKey()]+L(o);if(f<d[T]){d[T]=f;p[T]={line:o,reverse:r};a(t,f);}}this.oGraph.getNodes().forEach(function(n){d[n.getKey()]=Number.MAX_VALUE;});d[this.oSourceNode.getKey()]=0;while(s.length>0){c=s.shift();if(v[c.getKey()]){continue;}if(b&&(c.isHidden()||c.getVisible()===false||c._isIgnored())){continue;}v[c.getKey()]=true;l=c.getChildLines();for(i=0;i<l.length;i++){e(l[i],false);}if(I){l=c.getParentLines();for(i=0;i<l.length;i++){e(l[i],true);}}}this.mDist=d;this.mPath=p;};
D.prototype.getShortestPathTo=function(t){var c=this.mPath[t.getKey()],p=[],T,f;if(c){T=c.reverse?c.line.getFromNode():c.line.getToNode();}while(c&&T!==this.oSourceNode){p.push(c.line);f=c.reverse?c.line.getToNode():c.line.getFromNode();c=this.mPath[f.getKey()];if(c){T=c.reverse?c.line.getFromNode():c.line.getToNode();}}return p;};
return D;},true);
sap.ui.predefine('sap/suite/ui/commons/statusindicator/Circle',["sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/SimpleShape","sap/suite/ui/commons/statusindicator/SimpleShapeRenderer"],function(S,H,a,b){"use strict";
var C=a.extend("sap.suite.ui.commons.statusindicator.Circle",{
metadata:{library:"sap.suite.ui.commons",properties:{cx:{type:"float",defaultValue:0},cy:{type:"float",defaultValue:0},r:{type:"float",defaultValue:0}}},
renderer:b
});
C.prototype._getSimpleShapeElement=function(c){var o=new H("circle");o.setId(this._buildIdString(c));o.setAttribute("cx",this.getCx());o.setAttribute("cy",this.getCy());o.setAttribute("r",this.getR());o.setAttribute("stroke-width",this.getStrokeWidth());o.setAttribute("stroke",this._getCssStrokeColor());return o;};
return C;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/CustomShape',["sap/ui/thirdparty/jquery","../library","sap/suite/ui/commons/statusindicator/ShapeGroup","sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/statusindicator/Path","sap/suite/ui/commons/statusindicator/Circle","sap/suite/ui/commons/statusindicator/Rectangle","sap/suite/ui/commons/util/HtmlElement","sap/base/Log","./CustomShapeRenderer"],function(q,l,S,a,P,C,R,H,L,b){"use strict";var F=l.statusindicator.FillingType;
var c=a.extend("sap.suite.ui.commons.statusindicator.CustomShape",{metadata:{library:"sap.suite.ui.commons",properties:{x:{type:"int",defaultValue:0},y:{type:"int",defaultValue:0},width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},strokeColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"},strokeWidth:{type:"float",defaultValue:0.25},definition:{type:"string",defaultValue:null}},defaultAggregation:"shapes",aggregations:{shapes:{type:"sap.suite.ui.commons.statusindicator.SimpleShape",multiple:true,defaultValue:null},fillingOptions:{type:"sap.suite.ui.commons.statusindicator.FillingOption",multiple:true,defaultValue:null}}}});
c.prototype.init=function(){if(a.prototype.init){a.prototype.init.apply(this,arguments);}this._iDisplayedValue=0;this._initShapeState();};
c.prototype.onBeforeRendering=function(){this._refreshInternalStructure();};
c.prototype.onAfterRendering=function(){this._updateDom(this.getDisplayedValue());};
c.prototype.addFillingOption=function(n){var f=typeof n.getOrder()==="undefined";if(f){L.fatal("The passed FillingOption has to have set its order property.");return this;}var h=this.getFillingOptions().length>0&&this.getFillingOptions().filter(function(o){return o.getOrder()===n.getOrder();}).length>0;if(h){L.fatal("The property 'order' has to be unique within the FillingOptions aggregation, but option"+" with order: "+n.getOrder()+" is already inserted. No FillingOption added.");return this;}return this.addAggregation("fillingOptions",n,true);};
c.prototype._initShapeState=function(){this._aFillableSubShapes=[];this.oDefinition=[];this._sViewBox=null;this.destroyShapes();};
c.prototype._refreshInternalStructure=function(){this._initShapeState();this._aFillableSubShapes.forEach(function(i){if(i.fillingOption){i.fillingOption.destroy();}i.shape.destroy();});if(!this.getDefinition()){if(!this.isA("sap.suite.ui.commons.statusindicator.LibraryShape")){L.fatal("Definition has to be specified.");}return;}var $=q(this.getDefinition());this._sViewBox=$[0].getAttribute("viewBox");q.map($.children(),this._preprocessNode.bind(this));};
c.prototype._preprocessNode=function(n){var $=q(n),t=$.prop("tagName"),d=this;switch(t){case"g":q.map($.children(),function(o){return d._preprocessLeafNode.call(d,q(o));});break;default:this._preprocessLeafNode($);}};
c.prototype._preprocessLeafNode=function($){var t=$.prop("tagName");switch(t){case"path":this._preprocessPathNode($);break;case"circle":this._preprocessCircleNode($);break;case"rect":this._preprocessRectangleNode($);break;case"defs":this._preprocessDefinitionsNode($[0]);break;default:L.fatal("Unsupported node tag name ('"+t+"')");}};
c.prototype._preprocessPathNode=function($){var p=new P({d:$.attr("d")});this._prepareShape(p,$);};
c.prototype._preprocessCircleNode=function($){var o=new C({cx:Number($.attr("cx")),cy:Number($.attr("cy")),r:Number($.attr("r"))});this._prepareShape(o,$);};
c.prototype._preprocessRectangleNode=function($){var r=new R({x:Number($.attr("x")),y:Number($.attr("y")),width:Number($.attr("width")),height:Number($.attr("height"))});this._prepareShape(r,$);};
c.prototype._preprocessDefinitionsNode=function(d){var D=new H("defs");D.addChild(d.innerHTML);return D;};
c.prototype._setInitialValue=function(i){this._iDisplayedValue=i;};
c.prototype.getDisplayedValue=function(){return this._iDisplayedValue;};
c.prototype._prepareShape=function(s,$){s.setFillingAngle(this.getFillingAngle());s.setStrokeWidth(this.getStrokeWidth());s.setStrokeColor(this.getStrokeColor());this.addShape(s);s._injectAnimationPropertiesResolver(this._oAnimationPropertiesResolver);var d=$.attr("style");if(!d){s.setFillingDirection(this.getFillingDirection());s.setFillColor(this.getFillColor());s.setFillingType(this.getFillingType());var e=$.data("shape-id");var f={shape:s,fillingOption:e?this._getFillingOptionById(e):null};this._aFillableSubShapes.push(f);if(f.fillingOption){this._aFillableSubShapes.sort(function(A,B){var o=A.fillingOption;var g=B.fillingOption;if(!o){return-1;}if(!g){return 1;}return o.getOrder()-g.getOrder();});}}else{s.setFillingType(F.None);s._setStyle(d);}};
c.prototype._updateDom=function(d,D){function g(s){var f=s.fillingOption;return f&&f.getWeight()!==0?f.getWeight():1;}L.debug("Updating to "+d,null,this);if(this._aFillableSubShapes.length===0){L.info("Update of DOM skipped. No shape for update found");return;}var t=this._aFillableSubShapes.reduce(function(f,s){return f+g(s);},0);try{var e=this;var v=(D)?d:this._oAnimationPropertiesResolver.getValue(this,d);this._aFillableSubShapes.forEach(function(f){var s=g(f);var G=s/t;var i;if(v===0){i=0;}else if(v>=100*G){i=100;}else{i=v/G;}v-=i*G;if(!D){var r=f.shape.getRenderer();var h=e.getDisplayedFillColor(d);L.debug("Updating color to '"+h+"'",null,f.shape);r._updateDomColor(f.shape,h);}f.shape._updateDom(i,true);});}catch(E){L.fatal("Update of DOM failed. Reason: "+E.message);return;}if(!D){this._oAnimationPropertiesResolver.propagateValueChange(this,d);this._oAnimationPropertiesResolver.propagateColorChange(this,d);}this._iDisplayedValue=d;};
c.prototype._getFillingOptionById=function(i){var r=null;this.getFillingOptions().some(function(f){if(f.getShapeId()===i){r=f;return true;}return false;});return r;};
c.prototype._getInternalViewBox=function(){return this._sViewBox;};
return c;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/CustomShapeRenderer',["../library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Renderer"],function(l,H,R){"use strict";
var C=R.extend("sap.suite.ui.commons.statusindicator.CustomShapeRenderer");
C.render=function(r,c){var m=this._getHtmlModel(c);m.getRenderer().render(r);};
C._getHtmlModel=function(c){var s=new H("svg");s.addControlData(c);s.setAttribute("version","1.1");s.setAttribute("xlmns","http://www.w3.org/2000/svg");var i=c._getInternalViewBox();if(i){s.setAttribute("viewBox",i);}s.setAttribute("preserveAspectRatio",c._buildPreserveAspectRatioAttribute());s.setAttribute("x",c.getX());s.setAttribute("y",c.getY());s.setAttribute("width",c.getWidth());s.setAttribute("height",c.getHeight());c.getShapes().forEach(s.addChild.bind(s));return s;};
C._updateDomColor=function(c,f){c._aFillableSubShapes.forEach(function(s){var S=s.shape;var r=S.getRenderer();r._updateDomColor(S,f);});};
return C;},true);
sap.ui.predefine('sap/suite/ui/commons/statusindicator/DiscreteThreshold',["sap/ui/core/Control"],function(C){"use strict";
var D=C.extend("sap.suite.ui.commons.statusindicator.DiscreteThreshold",{metadata:{library:"sap.suite.ui.commons",properties:{value:{type:"int",defaultValue:0},ariaLabel:{type:"string",defaultValue:null}}}});
return D;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/FillingOption',["sap/ui/core/Control","sap/base/Log"],function(C,L){"use strict";
var F=C.extend("sap.suite.ui.commons.statusindicator.FillingOption",{metadata:{library:"sap.suite.ui.commons",properties:{shapeId:{type:"string",defaultValue:null},weight:{type:"int",defaultValue:1},order:{type:"int"}}}});
F.prototype.setWeight=function(w){if(w<=0){L.fatal("An invalid weight is passed. Weight should be a positive integer. Given: "+w);}this.setProperty("weight",w);};
return F;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/LibraryShape',["./CustomShape","./CustomShapeRenderer","./shapes/ShapeFactory"],function(C,a,S){"use strict";
var L=C.extend("sap.suite.ui.commons.statusindicator.LibraryShape",{
metadata:{properties:{shapeId:{type:"string",group:"Misc",defaultValue:null}},events:{"afterShapeLoaded":{}}},
renderer:a
});
L.prototype.setShapeId=function(s){s=this._getValidShapeId(s);this.setProperty("shapeId",s,true);new S().getShapeById(s).then(function(d){this.setDefinition(d);this.fireAfterShapeLoaded();}.bind(this));return this;};
L.prototype._getValidShapeId=function(s){return s.replace(/[\\\.\/]/g,"");};
return L;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/Path',["sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/SimpleShape","sap/suite/ui/commons/statusindicator/SimpleShapeRenderer"],function(H,S,a){"use strict";
var P=S.extend("sap.suite.ui.commons.statusindicator.Path",{
metadata:{library:"sap.suite.ui.commons",properties:{d:{type:"string",defaultValue:null}}},
renderer:a
});
P.prototype._getSimpleShapeElement=function(p){var o=new H("path");o.setId(this._buildIdString(p));o.setAttribute("d",this.getD(),true);o.setAttribute("stroke-width",this.getStrokeWidth());o.setAttribute("stroke",this._getCssStrokeColor());if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(o.addClass.bind(o));}return o;};
return P;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/PropertyThreshold',["sap/ui/core/Control","sap/suite/ui/commons/statusindicator/util/ThemingUtil"],function(C,T){"use strict";
var P=C.extend("sap.suite.ui.commons.statusindicator.PropertyThreshold",{metadata:{library:"sap.suite.ui.commons",properties:{fillColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"},toValue:{type:"int",defaultValue:0},ariaLabel:{type:"string",defaultValue:null}}}});
P.prototype._getCssFillColor=function(){if(!this._cssFillColor){this._cssFillColor=T.resolveColor(this.getFillColor());}return this._cssFillColor;};
return P;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/Shape',["sap/ui/thirdparty/jquery","../library","sap/ui/core/Control","sap/suite/ui/commons/util/HtmlElement","sap/suite/ui/commons/statusindicator/util/ThemingUtil","sap/base/Log"],function(q,l,C,H,T,L){"use strict";var F=l.statusindicator.FillingType;var a=l.statusindicator.FillingDirectionType;var V=l.statusindicator.VerticalAlignmentType;var b=l.statusindicator.HorizontalAlignmentType;
var S=C.extend("sap.suite.ui.commons.statusindicator.Shape",{
metadata:{"abstract":true,library:"sap.suite.ui.commons",properties:{fullAnimationDuration:{type:"int",defaultValue:0},fillColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"},animationOnStartup:{type:"boolean",defaultValue:false},animationOnChange:{type:"boolean",defaultValue:true},animationOnStartupDelay:{type:"int",defaultValue:0},fillingDirection:{type:"sap.suite.ui.commons.statusindicator.FillingDirectionType",defaultValue:a.Up},fillingType:{type:"sap.suite.ui.commons.statusindicator.FillingType",defaultValue:F.Linear},fillingAngle:{type:"int",defaultValue:undefined},verticalAlignment:{type:"sap.suite.ui.commons.statusindicator.VerticalAlignmentType",defaultValue:V.Middle},horizontalAlignment:{type:"sap.suite.ui.commons.statusindicator.HorizontalAlignmentType",defaultValue:b.Middle}}},
renderer:null
});
S.prototype.GRADIENT_ID="gradient";S.prototype.STOP_ID="stop";
S.prototype.getDisplayedValue=function(){L.fatal("Must be overridden!");};
S.prototype._setInitialValue=function(i){L.fatal("Must be overridden!");};
S.prototype._updateDom=function(d,D){L.fatal("Must be overridden!");};
S.prototype.init=function(){if(C.prototype.init){C.prototype.init.apply(this,arguments);}this._oAnimationPropertiesResolver=null;};
S.prototype.onBeforeRendering=function(){if(C.prototype.onBeforeRendering){C.prototype.onBeforeRendering.apply(this,arguments);}this._clearBoundingBox();};
S.prototype._getCssFillColor=function(){return T.resolveColor(this.getFillColor());};
S.prototype._resolveFillColor=function(){return this._oAnimationPropertiesResolver.getColor(this,this.getDisplayedValue());};
S.prototype._injectAnimationPropertiesResolver=function(A){this._oAnimationPropertiesResolver=A;};
S.prototype.getDisplayedFillColor=function(d){return this._oAnimationPropertiesResolver.getColor(this,d);};
S.prototype.getFullAnimationDuration=function(){return 250;};
S.prototype._buildPreserveAspectRatioAttribute=function(){var r="x";switch(this.getHorizontalAlignment()){case b.Left:r+="Min";break;case b.Middle:r+="Mid";break;case b.Right:r+="Max";break;}r+="Y";switch(this.getVerticalAlignment()){case V.Top:r+="Min";break;case V.Middle:r+="Mid";break;case V.Bottom:r+="Max";break;}r+=" meet";return r;};
S.prototype._getGradientElement=function(d){var g=new H(this.getFillingType()===F.Linear?"linearGradient":"radialGradient");g.setId(this._buildIdString(this.getId(),this.GRADIENT_ID));if(this.getFillingType()===F.Linear){var i=this.computeLinearFillingAngle();g.setAttribute("x1",i===90?1:0);g.setAttribute("y1",i===0?1:0);g.setAttribute("x2",i===270?1:0);g.setAttribute("y2",i===180?1:0);}var o=this._getDisplayedGradientOffset(d);var s=new H(this.STOP_ID);s.setAttribute("offset",o);s.setAttribute("stop-color","white");g.addChild(s);var e=new H(this.STOP_ID);e.setAttribute("offset",o);e.setAttribute("stop-color","transparent");g.addChild(e);return g;};
S.prototype.getPolygonElement=function(d){var p=new H("polygon");p.setId(this._buildIdString(this.getId(),"polygon"));p.setAttribute("fill","white");return p;};
S.prototype.computeLinearFillingAngle=function(){if(this.getFillingAngle()!==undefined){return this._getNormalizedFillingAngle();}switch(this.getFillingDirection()){case a.Up:return 0;case a.Down:return 180;case a.Left:return 90;case a.Right:return 270;default:q.error("Unknown FillingDirection '"+this.getFillingDirection()+"'");return 0;}};
S.prototype._useGradientForAnimation=function(){var n=this._getNormalizedFillingAngle();var f=this.getFillingType();return f===F.Radial||(f===F.Linear&&(n===undefined||[0,90,180,270].indexOf(n)>-1));};
S.prototype._getPolygonPoints=function(v){var r;switch(this.getFillingType()){case F.Linear:r=this._getPolygonPointsForLinearFilling(v);break;case F.Circular:r=this._getPolygonPointsForCircularFilling(v);break;default:L.error("Unknown FillingType '"+this.getFillingType()+"' given.");r=this._getPolygonPointsForLinearFilling(v);}r=r.map(function(p){p.x=Number(p.x.toFixed(3));p.y=Number(p.y.toFixed(3));return p;});return r;};
S.prototype._getPolygonPointsForLinearFilling=function(v){var n=180-this._getNormalizedFillingAngle();var t=Math.tan(n*Math.PI/180);var B=this._getBoundingPoints();var s=B.start;var e=B.end;var d=s.y-(t*s.x);var f=e.y-(t*e.x);var k=d+((f-d)/100)*v;var x=s.x;var y=x*t+k;var g=s.y;var h=(g-k)/t;var r=[s,{x:x,y:y},{x:h,y:g}];return r;};
S.prototype._getPolygonPointsForCircularFilling=function(v){var t=this,A=3.6*v,B=this._getBoundingBox(),p=[];var x,y,P;var s=c(B.x+B.width/2,B.y);var o=c(B.x+B.width/2,B.y+B.height/2);function d(f){var r=Object.assign({},f);if(t.getFillingDirection()===a.CounterClockwise){var X=f.x-o.x;r.x=o.x-X;}return r;}function e(A,i,f){var g=Math.tan((i-A)*Math.PI/180);return g*f/2;}p.push(s);if(0<A&&A<45){x=e(A,0,B.height);P=c(s.x-x,s.y);p.push(d(P));}if(45<=A){p.push(d(c(B.x+B.width,B.y)));}if(45<A&&A<135){y=e(A,90,B.width);P=c(B.x+B.width,B.y+B.height/2-y);p.push(d(P));}if(135<=A){p.push(d(c(B.x+B.width,B.y+B.height)));}if(135<A&&A<225){x=e(A,180,B.height);P=c(B.x+B.width/2+x,B.y+B.height);p.push(d(P));}if(225<=A){p.push(d(c(B.x,B.y+B.height)));}if(225<A&&A<315){y=e(A,270,B.width);P=c(B.x,B.y+B.height/2+y);p.push(d(P));}if(315<=A){p.push(d(c(B.x,B.y)));}if(315<A&&A<=360){x=e(A,360,B.height);P=c(B.x+B.width/2-x,B.y);p.push(d(P));}p.push(o);return p;};
S.prototype._isFillingAngleInFirstQuadrant=function(){var A=this._getNormalizedFillingAngle();return 0<A&&A<90;};
S.prototype._isFillingAngleInSecondQuadrant=function(){var A=this._getNormalizedFillingAngle();return 90<A&&A<180;};
S.prototype._isFillingAngleInThirdQuadrant=function(){var A=this._getNormalizedFillingAngle();return 180<A&&A<270;};
S.prototype._isFillingAngleInForthQuadrant=function(){var A=this._getNormalizedFillingAngle();return 270<A&&A<360;};
S.prototype._getBoundingPoints=function(){var B=this._getBoundingBox();var s=B.x+B.width;var o=B.y+B.height;var e=B.x;var E=B.y;if(this._isFillingAngleInFirstQuadrant()){}else if(this._isFillingAngleInSecondQuadrant()){s=B.x+B.width;o=B.y;e=B.x;E=B.y+B.height;}else if(this._isFillingAngleInThirdQuadrant()){s=B.x;o=B.y;e=B.x+B.width;E=B.y+B.height;}else if(this._isFillingAngleInForthQuadrant()){s=B.x;o=B.y+B.height;e=B.x+B.width;E=B.y;}else{L.error("Invalid call of _getBoundingPoints. FillingAngle '"+this.getFillingAngle()+"' is not in any quadrant");}return{start:c(s,o),end:c(e,E)};};
S.prototype._getBoundingBox=function(){if(!this._oBoundingBox){this._oBoundingBox=this.$()[0].getBBox();}return this._oBoundingBox;};
S.prototype._clearBoundingBox=function(){this._oBoundingBox=null;};
S.prototype._getNormalizedFillingAngle=function(){if(this.getFillingAngle()===undefined){return this.getFillingAngle();}var r=this.getFillingAngle()%360;if(r<0){r+=360;}return r;};
S.prototype.isFillable=function(){return this.getFillingType()!==F.None;};
S.prototype._getDisplayedGradientOffset=function(d){if(this.isFillable()){var r=d/100;return r;}else{return 1;}};
S.prototype._getMaskElement=function(m){var M=new H("mask");M.setId(m);if(this._useGradientForAnimation()){var o=this._getSimpleShapeElement(this._buildIdString(this.getId(),"mask-shape"));o.setAttribute("stroke-width",0);o.setAttribute("stroke","white");o.setAttribute("fill",this._buildSvgUrlString(this.getId(),this.GRADIENT_ID));M.addChild(o);}else{M.addChild(this.getPolygonElement(this._iDisplayedValue));}return M;};
S.prototype._buildSvgUrlString=function(){return"url(#"+this._buildIdString.apply(this,arguments)+")";};
S.prototype._buildIdString=function(){var s=q.makeArray(arguments).join("-");return s;};
function c(x,y){return{x:x,y:y};}
return S;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/ShapeGroup',["sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Configuration","sap/suite/ui/commons/statusindicator/util/ProgressHandler","sap/base/Log"],function(C,a,b,P,L){"use strict";
var S=C.extend("sap.suite.ui.commons.statusindicator.ShapeGroup",{metadata:{library:"sap.suite.ui.commons",properties:{weight:{type:"int",defaultValue:10}},defaultAggregation:"shapes",aggregations:{shapes:{type:"sap.suite.ui.commons.statusindicator.Shape",multiple:true}}}});
S.prototype.init=function(){this._iTargetValue=0;this._oAnimationPropertiesResolver=null;this._iLastDirectValueUpdate=0;};
S.prototype.discreteThresholdsChangeHandler=function(c){var n=this._oAnimationPropertiesResolver._getGroupValue(this,c);if(n!==this._iLastDirectValueUpdate){this.getShapes().forEach(function(s){s._updateDom(n,true);});this._iLastDirectValueUpdate=n;}};
S.prototype.propertyThresholdsChangeHandler=function(n){this.getShapes().forEach(function(s){if(s.getDisplayedValue()!==0){s.getRenderer()._updateDomColor(s,n);}});};
S.prototype._injectAnimationPropertiesResolver=function(A){this._oAnimationPropertiesResolver=A;this._oAnimationPropertiesResolver.addDiscreteThresholdChange(this.discreteThresholdsChangeHandler.bind(this));this._oAnimationPropertiesResolver.addPropertyThresholdChange(this.propertyThresholdsChangeHandler.bind(this));this.getShapes().forEach(function(s){s._injectAnimationPropertiesResolver(A);});};
S.prototype.addShape=function(s){this.addAggregation("shapes",s,true);s._injectAnimationPropertiesResolver(this._oAnimationPropertiesResolver);return this;};
S.prototype._setValue=function(v,n){var t=this;n=n||false;this._iTargetValue=v;if(!this._isAnimationAllowed()||n){this.getShapes().forEach(function(s){s._updateDom(t._iTargetValue);});return Promise.resolve();}this.getShapes().forEach(function(s){if(!s.getAnimationOnChange()){s._updateDom(t._iTargetValue);}});if(this.oCurrentProgressHandler&&this.oCurrentProgressHandler.isInProgress()){this.oCurrentProgressHandler.cancel();}this.oCurrentProgressHandler=new P(function(p){var N=performance.now();t._animationStep(N,p,N);});return this.oCurrentProgressHandler.start();};
S.prototype._animationStep=function(l,p,c){L.debug("AnimationStep at time: "+c.toString(10),null,this);c=Math.max(c,l);if(p.isCanceled()){p.stop({cancelled:true});return;}var A=true;var t=this._iTargetValue;this.getShapes().forEach(function(s){var d=s.getDisplayedValue();if(d===t){return;}var T=l+s.getFullAnimationDuration()*Math.abs(t-d)/100;var v=t;if(c<T){var D=t-d;var i=T-l;var e=(c-l)/i;v=D*e+d;A=false;}s._updateDom(v);});if(A){p.finish();}else{window.requestAnimationFrame(this._animationStep.bind(this,c,p));}};
S.prototype._showsFullProgress=function(){return!this.getShapes().some(function(s){return s.getDisplayedValue()!==100;});};
S.prototype._setInitialValue=function(i){this._iTargetValue=i;this._iLastDirectValueUpdate=i;this.getShapes().forEach(function(s){s._setInitialValue(i);});};
S.prototype._isAnimationAllowed=function(){var A=a.getConfiguration();var s=A.getAnimationMode();return s!==b.AnimationMode.none;};
return S;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/SimpleShape',["../library","sap/ui/core/Control","sap/suite/ui/commons/statusindicator/Shape","sap/suite/ui/commons/statusindicator/util/ThemingUtil","sap/base/Log","./SimpleShapeRenderer"],function(l,C,S,T,L,a){"use strict";
var b=S.extend("sap.suite.ui.commons.statusindicator.SimpleShape",{metadata:{"abstract":true,library:"sap.suite.ui.commons",properties:{strokeWidth:{type:"float",defaultValue:0.25},strokeColor:{type:"sap.m.ValueCSSColor",defaultValue:"Neutral"}}}});
b.prototype._getSimpleShapeElement=function(){L.fatal("Must be overriden!");};
b.prototype.init=function(){if(S.prototype.init){S.prototype.init.apply(this,arguments);}this._iDisplayedValue=0;this._sViewBox=null;};
b.prototype.onBeforeRendering=function(){if(S.prototype.onBeforeRendering){S.prototype.onBeforeRendering.apply(this,arguments);}this.getRenderer()._clearDomReferences(this);};
b.prototype._updateDom=function(d,D){L.debug("Updating to "+d,null,this);var r=this.getRenderer();if(!D){var n=this.getDisplayedFillColor(d);r._updateDomColor(this,n);this._oAnimationPropertiesResolver.propagateColorChange(this,d);}var R=(D)?d:this._oAnimationPropertiesResolver.getValue(this,d);if(this._useGradientForAnimation()){r._updateDomGradient(this,R);}else{r._updateDomPolygon(this,R);}if(!D){this._oAnimationPropertiesResolver.propagateValueChange(this,d);this._iDisplayedValue=d;}};
b.prototype.getDisplayedValue=function(){return this._iDisplayedValue;};
b.prototype._setInitialValue=function(i){this._iDisplayedValue=i;};
b.prototype._setStyle=function(s){this._sStyleAttribute=s;};
b.prototype._setInternalViewBox=function(v){this._sViewBox=v;};
b.prototype._getInternalViewBox=function(){return this._sViewBox;};
b.prototype._getCssStrokeColor=function(){return T.resolveColor(this.getStrokeColor());};
return b;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/SimpleShapeRenderer',["../library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Renderer"],function(l,H,R){"use strict";var F=l.statusindicator.FillingType;
var S=R.extend("sap.suite.ui.commons.statusindicator.SimpleShapeRenderer");
S.render=function(r,c){var m=this._getHtmlModel(c);m.getRenderer().render(r);};
S._getHtmlModel=function(c){var m=c._buildIdString(c.getId(),"mask");var s=new H("svg");s.setAttribute("xlmns","http://www.w3.org/2000/svg");var i=c._getInternalViewBox();if(i){s.setAttribute("viewBox",i);}s.setAttribute("preserveAspectRatio",c._buildPreserveAspectRatioAttribute());s.setAttribute("overflow","visible");s.addControlData(c);var d=new H("defs");if(c.getFillingType()!==F.None){if(c._useGradientForAnimation()){d.addChild(c._getGradientElement(c._iDisplayedValue));}var M=c._getMaskElement(m);d.addChild(M);s.addChild(d);}var a=c._buildIdString(c.getId(),"shape");var o=c._getSimpleShapeElement(a);o.setAttribute("fill",c._resolveFillColor());o.setAttribute("mask",c._buildSvgUrlString(m));if(c._sStyleAttribute){o.setAttribute("style",c._sStyleAttribute);}o.setAttribute("stroke-width",0);s.addChild(o);var b=c._getSimpleShapeElement(c._buildIdString(a,"border"));b.setAttribute("fill","transparent");s.addChild(b);return s;};
S._updateDomColor=function(c,n){c.$("shape").attr("fill",n);};
S._updateDomGradient=function(c,v){if(!c.$stopNodes){c.$stopNodes=c.$(c.GRADIENT_ID).find(c.STOP_ID);}c.$stopNodes.attr("offset",c._getDisplayedGradientOffset(v));};
S._updateDomPolygon=function(c,v){if(!c.$polygon){c.$polygon=c.$("polygon");}var p=c._getPolygonPoints(v).reduce(function(a,i){return a+i.x+","+i.y+" ";},"");c.$polygon.attr("points",p);};
S._clearDomReferences=function(c){c.$polygon=null;c.$stopNodes=null;};
return S;},true);
sap.ui.predefine('sap/suite/ui/commons/statusindicator/StatusIndicator',["../library","sap/m/library","sap/ui/core/Control","sap/ui/core/Core","sap/suite/ui/commons/statusindicator/util/AnimationPropertiesResolver","sap/suite/ui/commons/statusindicator/util/ThemingUtil","sap/m/Text","sap/base/Log","./StatusIndicatorRenderer"],function(l,s,C,c,A,T,d,L,S){"use strict";var f=l.statusindicator.SizeType;var g=l.statusindicator.LabelPositionType;var V=s.ValueColor;
var h=C.extend("sap.suite.ui.commons.statusindicator.StatusIndicator",{metadata:{library:"sap.suite.ui.commons",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension"},height:{type:"sap.ui.core.CSSSize",group:"Dimension"},value:{type:"int",defaultValue:0},viewBox:{type:"string",defaultValue:null},ariaLabel:{type:"string",defaultValue:null},size:{type:"sap.suite.ui.commons.statusindicator.SizeType",defaultValue:f.None},labelPosition:{type:"sap.suite.ui.commons.statusindicator.LabelPositionType",defaultValue:g.Left},showLabel:{type:"boolean",defaultValue:false}},defaultAggregation:"groups",aggregations:{groups:{type:"sap.suite.ui.commons.statusindicator.ShapeGroup",multiple:true},propertyThresholds:{type:"sap.suite.ui.commons.statusindicator.PropertyThreshold",multiple:true},discreteThresholds:{type:"sap.suite.ui.commons.statusindicator.DiscreteThreshold",multiple:true},label:{type:"sap.m.Text",multiple:false}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{press:{}}}});
h.prototype.init=function(){if(C.prototype.init){C.prototype.init.apply(this,arguments);}this._sortedPropertyThresholds=[];this._sortedDiscreteThresholds=[];this._bStarted=false;this._oCurrentAnimationPromise=null;this._oAnimationPropertiesResolver=new A(this);this._oDefaultLabel=null;if(!sap.ui.getCore().isInitialized()){sap.ui.getCore().attachInit(this._handleCoreInitialized.bind(this));}else{this._handleCoreInitialized();}};
h.prototype._handleCoreInitialized=function(){sap.ui.getCore().attachThemeChanged(this._handleThemeApplied,this);};
h.prototype._handleThemeApplied=function(){this.invalidate();};
h.prototype._internalIds=Object.freeze({svgNodeId:"svg"});
h.prototype.getLabel=function(){var o=this.getAggregation("label");if(o!==null){return o;}if(this._oDefaultLabel!==null){return this._oDefaultLabel;}this._oDefaultLabel=new d(this.getId()+"-label");this.addDependent(this._oDefaultLabel);return this._oDefaultLabel;};
h.prototype.addPropertyThreshold=function(t){this.addAggregation("propertyThresholds",t,true);if(this._sortedPropertyThresholds.filter(function(e){return e.getToValue()===t.getToValue();}).length>0){L.fatal("There are two or more property thresholds with the same toValue in thresholds "+"aggregation. The last threshold from them has the highest priority");}this._sortedPropertyThresholds.push(t);this._sortedPropertyThresholds.sort(function(a,b){return a.getToValue()-b.getToValue();});return this;};
h.prototype.addDiscreteThreshold=function(t){this.addAggregation("discreteThresholds",t,true);if(this._sortedDiscreteThresholds.filter(function(e){return e.getValue()===t.getValue();}).length>0){L.fatal("There are two or more discrete thresholds with the same value in thresholds "+"aggregation. The last threshold from them has the highest priority");}this._sortedDiscreteThresholds.push(t);this._sortedDiscreteThresholds.sort(function(a,b){return a.getValue()-b.getValue();});return this;};
h.prototype._discreteThresholdsEnabled=function(){return this._sortedDiscreteThresholds.length>0;};
h.prototype._getDiscreteThresholdForValue=function(v){var r=null;this._sortedDiscreteThresholds.every(function(t){if(v>=t.getValue()){r=t;return true;}return false;});return r;};
h.prototype._propertyThresholdsEnabled=function(){return this._sortedPropertyThresholds.length>0;};
h.prototype._getPropertyThresholdForValue=function(v){var r=null;this._sortedPropertyThresholds.some(function(t){if(v<=t.getToValue()){r=t;return true;}return false;});return r;};
h.prototype._getFullId=function(i){return this.getId()+"-"+i;};
h.prototype.onBeforeRendering=function(){var t=this;this.getGroups().forEach(function(G){G._injectAnimationPropertiesResolver(t._oAnimationPropertiesResolver);});};
h.prototype.onAfterRendering=function(){this._setValueToLabel(this.getValue());this._start();};
h.prototype._start=function(){this._bStarted=true;this._propagateValueToGroups();};
h.prototype._shouldInvertGroupUpdateOrder=function(G){var t;G.some(function(o,I){t=I;return o.newValue!==100;});var i;this.getGroups().some(function(o,I){i=I;return!o._showsFullProgress();});return(t<i);};
h.prototype._propagateValueToGroups=function(){var n=this.getSize()===f.Small;var G=this._computeGroupValueDistribution();var i=this._shouldInvertGroupUpdateOrder(G);if(i){G=G.reverse();}this._updateAccessibilityDOM();this._oCurrentAnimationPromise=G.reduce(function(a,o){return a.then(function(r){if(r&&r.cancelled){L.debug("Group animation cancelled.");return r;}else{return o.group._setValue(o.newValue,n);}});},Promise.resolve());return this._oCurrentAnimationPromise;};
h.prototype._computeGroupValueDistribution=function(){var v=this.getValue();var t=this._getTotalWeight();return this.getGroups().map(function(G){var a=G.getWeight()/t;var n;if(v===0){n=0;}else if(v>=100*a){n=100;}else{n=v/a;}v-=n*a;return{group:G,newValue:Number(n.toFixed(3))};});};
h.prototype.setValue=function(v){v=Math.round(v);if(v>100){v=100;}if(v<0){v=0;}this.setProperty("value",v,true);this._setValueToLabel(v);if(this._bStarted){this._propagateValueToGroups();}return this;};
h.prototype._setValueToLabel=function(v){var o=this.getLabel();var a;o.setText(Math.floor(v)+"%");a=T.resolveColor(V.Neutral);if(this._propertyThresholdsEnabled()){var p=this._getPropertyThresholdForValue(v);if(p){a=p._getCssFillColor();}}var $=o.$();if($){$.css("color",a);}};
h.prototype._getTotalWeight=function(){return this.getGroups().reduce(function(a,G){return a+G.getWeight();},0);};
h.prototype.ontap=h.prototype.firePress;h.prototype.onsapenter=h.prototype.firePress;h.prototype.onsapspace=h.prototype.firePress;
h.prototype._getGroupShapes=function(){return this.getGroups().reduce(function(a,G){return a.concat(G.getShapes());},[]);};
h.prototype._updateAccessibilityDOM=function(){var v=this.getValue();this.$().attr("aria-valuenow",v);this.$().attr("aria-valuetext",this._createValueTextMessage(v));};
h.prototype._createValueTextMessage=function(v){var D=null;var a=null;var p=null;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(this._discreteThresholdsEnabled()){var o=this._getDiscreteThresholdForValue(v);if(o){D=o.getAriaLabel();a=true;}else{D=this._sortedDiscreteThresholds[0].getAriaLabel();a=false;}}if(this._propertyThresholdsEnabled()){var P=this._getPropertyThresholdForValue(v);if(P){p=P.getAriaLabel();}}var b;if(D){if(p){if(a){b=r.getText("STATUS_INDICATOR_VALUE_ABOVE_THRESHOLD_COLOR",[v,D,p]);}else{b=r.getText("STATUS_INDICATOR_VALUE_BELOW_THRESHOLD_COLOR",[v,D,p]);}}else{if(a){b=r.getText("STATUS_INDICATOR_VALUE_ABOVE_THRESHOLD",[v,D]);}else{b=r.getText("STATUS_INDICATOR_VALUE_BELOW_THRESHOLD",[v,D]);}}}else if(p){b=r.getText("STATUS_INDICATOR_VALUE_COLOR",[v,p]);}else{b=r.getText("STATUS_INDICATOR_VALUE",[v]);}return b;};
return h;});
sap.ui.predefine('sap/suite/ui/commons/statusindicator/StatusIndicatorRenderer',["../library","sap/ui/core/library","sap/suite/ui/commons/util/HtmlElement","sap/ui/core/Renderer","sap/base/Log"],function(l,c,H,R,L){"use strict";var s=l.statusindicator.SizeType;var o=l.statusindicator.LabelPositionType;var t=c.TextAlign;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");
function g(b,p){var d;p=typeof p==="string"?p:"";switch(b.getSize()){case s.Small:d="sapSuiteUiCommonsStatusIndicatorSmall";break;case s.Medium:d="sapSuiteUiCommonsStatusIndicatorMedium";break;case s.Large:d="sapSuiteUiCommonsStatusIndicatorLarge";break;case s.ExtraLarge:d="sapSuiteUiCommonsStatusIndicatorExtraLarge";break;case s.None:break;default:L.error("Unknown size. Expecting size defined in sap.suite.ui.commons.statusindicator.SizeType,"+" but '"+b.getSize()+"' given.");d="sapSuiteUiCommonsStatusIndicatorSmall";}return d+p;}
function a(b){var p=b.getLabelPosition();var d=b.getSize();return"sapSuiteUiCommonsStatusIndicator"+d+p+"Label";}
var S=R.extend("sap.suite.ui.commons.StatusIndicatorRenderer");
S.render=function(b,C){var m=this._getHtmlModel(C);m.getRenderer().render(b);};
S._getHtmlModel=function(b){var d=b.getLabelPosition();var i=d===o.Left||d===o.Right,I=d===o.Left||d===o.Top;var e=new H("div");e.addControlData(b);e.addClass("sapSuiteUiCommonsStatusIndicator");e.setAttribute("role","progressbar");e.setAttribute("aria-roledescription",r.getText("STATUS_INDICATOR_ARIA_ROLE_DESCRIPTION"));e.setAttribute("aria-readonly",true);var A=b.getAriaLabel();e.setAttribute("aria-label",A?A:r.getText("STATUS_INDICATOR_ARIA_LABEL"),true);var f=b.getAriaLabelledBy();if(f&&f.length>0){e.setAttribute("aria-labelledby",f.join(" "),true);}var h=b.getAriaDescribedBy();if(h&&h.length>0){e.setAttribute("aria-describedby",h.join(" "),true);}e.setAttribute("tabindex","0");e.setAttribute("aria-valuemin",0);e.setAttribute("aria-valuemax",100);if(i){e.addClass("sapSuiteUiCommonsStatusIndicatorHorizontal");}else{e.addClass("sapSuiteUiCommonsStatusIndicatorVertical");}if(b.getShowLabel()){var j=new H("div");if(I){j.addClass("sapSuiteUiCommonsStatusIndicatorLabelBeforeSvg");}else{j.addClass("sapSuiteUiCommonsStatusIndicatorLabelAfterSvg");}var k=b.getLabel();k.addStyleClass("sapSuiteUiCommonsStatusIndicatorLabel");k.addStyleClass(g(b,"Label"));k.addStyleClass(a(b));k.setTextAlign(i?t.Left:t.Center);j.addChild(k);e.addChild(j);}var m=new H("div");m.setAttribute("focusable",false);m.addClass("sapSuiteUiCommonsStatusIndicatorSvg");m.addClass(g(b,"Svg"));m.addStyle("width",b.getWidth());m.addStyle("height",b.getHeight());m.addChild(this._getSvgElement(b));e.addChild(m);return e;};
S._getSvgElement=function(b){var d=new H("svg");d.setId(b._getFullId(b._internalIds.svgNodeId));d.setAttribute("version","1.1");d.setAttribute("xlmns","http://www.w3.org/2000/svg");d.setAttribute("preserveAspectRatio","xMidYMid meet");d.addStyle("width","100%");d.addStyle("height","100%");d.setAttribute("focusable",false);if(b.getViewBox()){d.setAttribute("viewBox",b.getViewBox(),true);}b._getGroupShapes().forEach(function(e){d.addChild(e);});return d;};
return S;},true);
sap.ui.predefine('sap/suite/ui/commons/statusindicator/shapes/ShapeFactory',["sap/ui/base/Object","sap/ui/thirdparty/jquery"],function(B,q){"use strict";var l={};
var S=B.extend("sap.suite.ui.commons.statusindicator.shapes.ShapeFactory");
S.prototype.getShapeById=function(i){var l=this._getLoadedShapes(),s=l[i]||null;if(!s){return new Promise(function(r,a){q.ajax({url:sap.ui.require.toUrl("sap/suite/ui/commons/statusindicator")+"/shapes/"+i+".svg",dataType:"text"}).done(function(d){l[i]=d;r(d);}).fail(function(e){a(e);});});}return Promise.resolve(s);};
S.prototype._getLoadedShapes=function(){return l;};
S.prototype._removeAllLoadedShapes=function(){l={};};
return S;});
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountPanelRenderer',["sap/ui/core/Renderer","sap/m/PanelRenderer"],function(R,P){"use strict";var T=R.extend(P),b;
T.renderContent=function(r,c){b=c;P.renderContent.apply(this,[r,c]);};
T.renderChildren=function(r,c){var i=b&&b.getId();if(b){var t=b.getTable();if(t){r.write("<div id=\""+i+"-table\" class=\"sapSuiteUiCommonsAccountPanelTable\">");r.renderControl(t);r.write("</div>");}}r.write("<div id=\""+i+"-datacontent\" class=\"sapSuiteUiCommonsAccountPanelContent\">");c.forEach(r.renderControl);r.write("</div>");var o=b&&b.getShowOverlay()?"sapSuiteUiCommonsAccountPanelOverlayVisible":"";r.write("<div id=\""+i+"-overlay\" class=\"sapSuiteUiCommonsAccountPanelOverlay "+o+" \">");r.write("</div>");};
return T;},true);
sap.ui.predefine('sap/suite/ui/commons/taccount/TAccountUtils',["sap/ui/core/format/NumberFormat","sap/ui/core/Core"],function(N,C){"use strict";var T={};T._oCurrencyFormatter=null;
T.formatCurrency=function(v,c){return T._getCurrencyFormatter().format(v,c)||"";};
T._getCurrencyFormatter=function(){if(!T._oCurrencyFormatter){T._oCurrencyFormatter=N.getCurrencyInstance({showMeasure:false},C.getConfiguration().getLocale());}return T._oCurrencyFormatter;};
return T;},true);
sap.ui.predefine('sap/suite/ui/commons/util/DateUtils',["sap/base/Log"],function(L){"use strict";var D=function(){throw new Error();};
D.resetDateToStartOfDay=function(d){if(D.isValidDate(d)){d.setHours(0);d.setMinutes(0);d.setSeconds(0);d.setMilliseconds(0);}};
D.resetDateToEndOfDay=function(d){if(D.isValidDate(d)){d.setHours(23);d.setMinutes(59);d.setSeconds(59);d.setMilliseconds(999);}};
D.resetDateToStartOfMonth=function(d){if(D.isValidDate(d)){d.setDate(1);D.resetDateToStartOfDay(d);}};
D.resetDateToEndOfMonth=function(d){if(D.isValidDate(d)){d.setDate(1);d.setMonth(d.getMonth()+1);d.setDate(0);D.resetDateToEndOfDay(d);}};
D.resetDateToStartOfYear=function(d){if(D.isValidDate(d)){d.setMonth(0);D.resetDateToStartOfMonth(d);}};
D.resetDateToEndOfYear=function(d){if(D.isValidDate(d)){d.setMonth(11);D.resetDateToEndOfMonth(d);}};
D.resetDateToStartOfWeek=function(d,f){if(D.isValidDate(d)){if(f===undefined){f=1;}else if(isNaN(f)||!isFinite(f)){L.error("DateUtils iFirstDayOfWeek value ='"+f+"' is invalid.");return;}d.setDate(d.getDate()-(d.getDay()-f+7)%7);D.resetDateToStartOfDay(d);}};
D.resetDateToEndOfWeek=function(d,s){if(D.isValidDate(d)){var a;if(s&&!(s instanceof Object)){L.error("DateUtils oSettings is not an object.");return;}if(!s){s={};}if(s.iDuration===undefined){a=7;}else{a=s.iDuration;if(isNaN(a)||!isFinite(a)){L.error("DateUtils duration value ='"+a+"' is invalid.");return;}}D.resetDateToStartOfWeek(d,s.iFirstDayOfWeek);d.setDate(d.getDate()+a-1);D.resetDateToEndOfDay(d);}};
D.isValidDate=function(d){if(Object.prototype.toString.call(d)!=="[object Date]"||isNaN(d.getTime())){L.error("DateUtils invalid date="+d);return false;}return true;};
D.dateDaysEqual=function(d,a){if(D.isValidDate(d)&&D.isValidDate(a)){return(d.getFullYear()===a.getFullYear()&&d.getMonth()===a.getMonth()&&d.getDate()===a.getDate());}return false;};
D.dateMonthsEqual=function(d,a){if(D.isValidDate(d)&&D.isValidDate(a)){return(d.getFullYear()===a.getFullYear()&&d.getMonth()===a.getMonth());}return false;};
D.incrementDateByIndex=function(s,i){var r=null;if(D.isValidDate(s)&&isFinite(i)){r=new Date(s);r.setDate(s.getDate()+parseInt(i,10));}return r;};
D.incrementMonthByIndex=function(s,i){var r=null;if(D.isValidDate(s)&&isFinite(i)){r=new Date(s);D.resetDateToStartOfMonth(r);r.setMonth(s.getMonth()+parseInt(i,10));}return r;};
D.numberOfMonthsApart=function(s,e){s=new Date(s);e=new Date(e);D.resetDateToStartOfMonth(s);D.resetDateToStartOfMonth(e);var f=s.getTime()<=e.getTime();var F=0,b=0,n=0;for(F=0,b=0;!(s.getDate()===e.getDate()&&s.getMonth()===e.getMonth()&&s.getFullYear()===e.getFullYear());F++,b--){if(f){s.setMonth(s.getMonth()+1);}else{s.setMonth(s.getMonth()-1);}}if(f){n=F;}else{n=b;}return n;};
D.numberOfDaysApart=function(s,e){s=new Date(s);e=new Date(e);D.resetDateToStartOfDay(s);D.resetDateToStartOfDay(e);var m=24*60*60*1000;var d=Math.round(Math.abs((s.getTime()-e.getTime())/m));if(s.getTime()>e.getTime()){return-d;}else{return d;}};
D.parseDate=function(d,p){if(d instanceof Date||d===null){return d;}p=(p!==false);if(typeof d==="string"){var r=/Date\((-*\d+)\)/.exec(d);if(r===null){if(p){var a=Date.parse(d);if(!isNaN(a)){d=new Date(a);}else if(!isNaN(d)){d=new Date(parseInt(d,10));}}}else{d=new Date(parseInt(r[1],10));}}else{d=new Date(parseInt(d,10));}return d;};
return D;},true);
sap.ui.predefine('sap/suite/ui/commons/util/HtmlElement',["sap/ui/base/Object","sap/ui/core/Control","./HtmlElementRenderer","sap/base/assert","sap/base/security/encodeXML","sap/base/Log"],function(B,C,H,a,e,L){"use strict";
var b=B.extend("sap.suite.ui.commons.util.HtmlElement",{constructor:function(n){B.apply(this,arguments);a(typeof n==="string","Element name must be a string.");this._sName=n;this._mAttributes={};this._aChildren=[];}});
b.prototype.getRenderer=function(){return new H(this);};
b.prototype.setId=function(i,A){a(typeof i==="string","Id must by a string.");this.setAttribute("id",i);if(A){this.setAttribute("data-sap-ui",i);}};
b.prototype.setAttribute=function(k,v,E){a(typeof k==="string","Key must by a string.");a(typeof v==="string"||typeof v==="number"||typeof v==="boolean","Value must be a string, number or boolean");var V=String(v);if(E){V=e(V);}if(k in this._mAttributes){L.warning("Replacing an already existing attribute.","Attribute key = "+k+", old value = "+this._mAttributes[k]+", new value = "+V,this);}this._mAttributes[k]=V;};
b.prototype.addClass=function(c){a(typeof c==="string","Class must be a string.");if(!this._mAttributes.class){this._mAttributes.class=[];}else{a(Array.isArray(this._mAttributes.class),"Cannot add class to customly added classes.");}this._mAttributes.class.push(c);};
b.prototype.addStyle=function(n,v){a(typeof n==="string","Name must be a string.");a(typeof v==="string"||typeof v==="number","Value must be a string or a number.");if(!this._mAttributes.style){this._mAttributes.style=[];}else{a(Array.isArray(this._mAttributes.style),"Cannot add style to customly added styles.");}this._mAttributes.style.push(n+":"+v);};
b.prototype.addControlData=function(c){a(c instanceof C,"Control must be a sapui5 control.");this.setId(c.getId(),true);var t=this;c.getCustomData().forEach(function(d){var o=d._checkWriteToDom(c);if(o){t.setAttribute(o.key,o.value,true);}});if(c.aCustomStyleClasses&&c.aCustomStyleClasses.length>0){c.aCustomStyleClasses.forEach(function(d){t.addClass(e(d));});}};
b.prototype.addChild=function(c){a(typeof c==="string"||c instanceof b||c instanceof C,"Child must be a string, HtmlElement or a Control.");this._aChildren.push(c);};
b.prototype.addChildEscaped=function(t,c){a(typeof t==="string","sText must be a string");t=e(t);if(c){t=t.replace(/&#xa;/g,"<br>");}this._aChildren.push(t);};
return b;});
sap.ui.predefine('sap/suite/ui/commons/util/HtmlElementRenderer',["sap/ui/base/Object","sap/ui/core/Control","sap/base/Log"],function(B,C,L){"use strict";var H;
var a=B.extend("sap.suite.ui.commons.util.HtmlElementRenderer",{constructor:function(h){B.apply(this,arguments);this._oHtmlElement=h;}});
a.prototype.render=function(r){r.write("<");r.writeEscaped(this._oHtmlElement._sName);this._renderAttributes(r);if(this._oHtmlElement._aChildren.length>0){r.write(">");this._renderChildren(r);r.write("</");r.writeEscaped(this._oHtmlElement._sName);r.write(">");}else{r.write("/>");}};
a.prototype._renderAttributes=function(r){var b=this._oHtmlElement._mAttributes;for(var c in b){if(!b.hasOwnProperty(c)){continue;}var v=b[c];if(Array.isArray(v)){var j="";if(c==="class"){j=" ";}else if(c==="style"){j=";";}v=v.join(j);}r.write(" ");r.write(c);r.write("=\"");r.write(v);r.write("\"");}};
a.prototype._renderChildren=function(r){if(typeof H==="undefined"){H=sap.ui.require("sap/suite/ui/commons/util/HtmlElement");}this._oHtmlElement._aChildren.forEach(function(c){if(typeof c==="string"){r.write(c);}else if(H&&c instanceof H){c.getRenderer().render(r);}else if(c instanceof C){r.renderControl(c);}else{L.error(typeof c+" cannot be a child of a HTML element. Skipping rendering for this child.");}});};
return a;});
sap.ui.predefine('sap/suite/ui/commons/util/ManagedObjectRegister',["sap/ui/base/Object","sap/ui/base/ManagedObject","sap/base/assert","sap/base/Log"],function(B,M,a,L){"use strict";
var b=B.extend("sap.suite.ui.commons.util.ManagedObjectRegister",{constructor:function(){B.apply(this,arguments);this._mRegister={};}});
b.prototype.register=function(k,f){a(typeof k==="string","Key must be a string.");k=k[0].toUpperCase()+k.substr(1);var g="get"+k;if(typeof this._mRegister[k]!=="undefined"){this.destroyObject(k);}if(typeof f==="function"){this._mRegister[k]={fFactory:f,oValue:undefined};}else if(f instanceof M){this._mRegister[k]={fFactory:undefined,oValue:f};}else{L.error("oFactoryFunction must be either a factory function or a managed object.");return;}if(g!=="getObject"){this[g]=function(){return this.getObject(k);};}};
b.prototype.getObject=function(k){var r;k=k||"Object";r=this._mRegister[k];if(r){if(typeof r.oValue==="undefined"){r.oValue=r.fFactory(k);a(r.oValue instanceof M,"Factory class must return a managed object.");}return r.oValue;}return null;};
b.prototype.isObjectInitialized=function(k){var r;r=this._mRegister[k];return(r&&typeof r.oValue!=="undefined");};
b.prototype.destroyObject=function(k){var r;a(typeof k==="string","Key must be a string.");r=this._mRegister[k];if(r){if(r.oValue){r.oValue.destroy();}if(k!=="Object"){delete this["get"+k];}delete this._mRegister[k];}};
b.prototype.destroyAll=function(){var k,r;for(k in this._mRegister){r=this._mRegister[k];if(r.oValue){r.oValue.destroy();}if(k!=="Object"){delete this["get"+k];}}this._mRegister={};};
return b;});
sap.ui.predefine('sap/suite/ui/commons/util/RenderUtils',['sap/ui/base/Object',"sap/base/security/encodeXML"],function(B,e){"use strict";var R=function(r){this._rm=r;};R.prototype=Object.create(B.prototype||null);
R.prototype._getRenderManager=function(){if(!this._rm){throw new Error("Render manager not defined");}return this._rm;};
R.prototype.writeOpeningTag=function(t,T){T=T||{};var r=this._getRenderManager();var a;r.write("<");r.writeEscaped(t);if(T.classes){for(var i=0;i<T.classes.length;i++){r.addClass(e(T.classes[i]));}r.writeClasses();}if(T.attributes){for(a in T.attributes){r.writeAttribute(a,T.attributes[a]);}}if(T.escapedAttributes){for(a in T.escapedAttributes){r.writeAttributeEscaped(a,T.escapedAttributes[a]);}}r.write(">");};
R.prototype.writeClosingTag=function(t){var r=this._getRenderManager();r.write("</");r.writeEscaped(t);r.write(">");};
return R;},true);
sap.ui.predefine('sap/suite/ui/commons/util/StringSliderTooltip',["sap/m/SliderTooltipBase"],function(S){"use strict";
var a=S.extend("sap.suite.ui.commons.util.StringSliderTooltip",{
metadata:{library:"sap.suite.ui.commons.util",properties:{mapFunction:{type:"any",group:"Misc"},fetchValue2:{type:"boolean",group:"Misc",defaultValue:false}}},
renderer:function(r,c){var v=c.getStringValue();if(!v){return;}r.write("<div");r.writeControlData(c);r.addClass("sapMSliderTooltip");r.addClass("sapSuiteUiCommonsStringSliderTooltip");r.writeClasses(c);r.write(">");r.writeEscaped(v);r.write("</div>");}
});
a.prototype.getStringValue=function(){var p=this.getParent();if(!p){return null;}var v=this.getFetchValue2()?p.getValue2():p.getValue();var m=this.getMapFunction()||String;return m(v);};
a.prototype.sliderValueChanged=function(v){var m=this.getMapFunction()||String,V=m(v);this.$().text(V);};
return a;});
sap.ui.require.preload({
	"sap/suite/ui/commons/manifest.json":'{"_version":"1.9.0","sap.app":{"id":"sap.suite.ui.commons","type":"library","embeds":[],"applicationVersion":{"version":"1.74.0"},"title":"SAP UI library: sap.suite.ui.commons","description":"SAP UI library: sap.suite.ui.commons","ach":"CA-UI5-SC","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.74","libs":{"sap.ui.core":{"minVersion":"1.74.0"},"sap.m":{"minVersion":"1.74.0"},"sap.suite.ui.microchart":{"minVersion":"1.74.0","lazy":true},"sap.ui.ux3":{"minVersion":"1.74.0","lazy":true},"sap.ui.comp":{"minVersion":"1.74.0","lazy":true},"sap.viz":{"minVersion":"1.74.0","lazy":true},"sap.ui.commons":{"minVersion":"1.74.0","lazy":true}}},"library":{"i18n":"messagebundle.properties","content":{"controls":["sap.suite.ui.commons.BulletChart","sap.suite.ui.commons.BusinessCard","sap.suite.ui.commons.CalculationBuilder","sap.suite.ui.commons.CalculationBuilderExpression","sap.suite.ui.commons.CalculationBuilderFunction","sap.suite.ui.commons.CalculationBuilderInput","sap.suite.ui.commons.CalculationBuilderItem","sap.suite.ui.commons.CalculationBuilderValidationResult","sap.suite.ui.commons.CalculationBuilderVariable","sap.suite.ui.commons.ChartContainer","sap.suite.ui.commons.ChartContainerContent","sap.suite.ui.commons.ChartContainerToolbarPlaceholder","sap.suite.ui.commons.ChartTile","sap.suite.ui.commons.ColumnMicroChart","sap.suite.ui.commons.ComparisonChart","sap.suite.ui.commons.DateRangeScroller","sap.suite.ui.commons.DateRangeSlider","sap.suite.ui.commons.DateRangeSliderInternal","sap.suite.ui.commons.DeltaMicroChart","sap.suite.ui.commons.DynamicContainer","sap.suite.ui.commons.FacetOverview","sap.suite.ui.commons.FeedItemHeader","sap.suite.ui.commons.FeedTile","sap.suite.ui.commons.GenericTile","sap.suite.ui.commons.GenericTile2X2","sap.suite.ui.commons.HarveyBallMicroChart","sap.suite.ui.commons.HeaderCell","sap.suite.ui.commons.HeaderContainer","sap.suite.ui.commons.imageeditor.ImageEditor","sap.suite.ui.commons.imageeditor.ImageEditorContainer","sap.suite.ui.commons.InfoTile","sap.suite.ui.commons.JamContent","sap.suite.ui.commons.KpiTile","sap.suite.ui.commons.LaunchTile","sap.suite.ui.commons.LinkActionSheet","sap.suite.ui.commons.MicroAreaChart","sap.suite.ui.commons.MonitoringContent","sap.suite.ui.commons.MonitoringTile","sap.suite.ui.commons.networkgraph.Graph","sap.suite.ui.commons.networkgraph.Node","sap.suite.ui.commons.NewsContent","sap.suite.ui.commons.NoteTaker","sap.suite.ui.commons.NoteTakerCard","sap.suite.ui.commons.NoteTakerFeeder","sap.suite.ui.commons.NumericContent","sap.suite.ui.commons.NumericTile","sap.suite.ui.commons.PictureZoomIn","sap.suite.ui.commons.ProcessFlow","sap.suite.ui.commons.ProcessFlowConnection","sap.suite.ui.commons.ProcessFlowConnectionLabel","sap.suite.ui.commons.ProcessFlowLaneHeader","sap.suite.ui.commons.ProcessFlowNode","sap.suite.ui.commons.RepeaterViewConfiguration","sap.suite.ui.commons.SplitButton","sap.suite.ui.commons.statusindicator.StatusIndicator","sap.suite.ui.commons.statusindicator.ShapeGroup","sap.suite.ui.commons.statusindicator.Shape","sap.suite.ui.commons.statusindicator.Rectangle","sap.suite.ui.commons.statusindicator.Circle","sap.suite.ui.commons.statusindicator.CustomShape","sap.suite.ui.commons.statusindicator.PropertyThreshold","sap.suite.ui.commons.statusindicator.DiscreteThreshold","sap.suite.ui.commons.statusindicator.LibraryShape","sap.suite.ui.commons.taccount.TAccount","sap.suite.ui.commons.TargetFilter","sap.suite.ui.commons.ThingCollection","sap.suite.ui.commons.ThreePanelThingInspector","sap.suite.ui.commons.ThreePanelThingViewer","sap.suite.ui.commons.TileContent","sap.suite.ui.commons.TileContent2X2","sap.suite.ui.commons.Timeline","sap.suite.ui.commons.TimelineFilterListItem","sap.suite.ui.commons.TimelineItem","sap.suite.ui.commons.UnifiedThingGroup","sap.suite.ui.commons.UnifiedThingInspector","sap.suite.ui.commons.VerticalNavigationBar","sap.suite.ui.commons.ViewRepeater"],"elements":["sap.suite.ui.commons.BulletChartData","sap.suite.ui.commons.ColumnData","sap.suite.ui.commons.ColumnMicroChartLabel","sap.suite.ui.commons.ComparisonData","sap.suite.ui.commons.CountingNavigationItem","sap.suite.ui.commons.FeedItem","sap.suite.ui.commons.HarveyBallMicroChartItem","sap.suite.ui.commons.HeaderCellItem","sap.suite.ui.commons.imageeditor.CustomSizeItem","sap.suite.ui.commons.MicroAreaChartItem","sap.suite.ui.commons.MicroAreaChartLabel","sap.suite.ui.commons.MicroAreaChartPoint","sap.suite.ui.commons.TargetFilterColumn","sap.suite.ui.commons.TargetFilterMeasureColumn","sap.suite.ui.commons.AriaProperties"],"types":["sap.suite.ui.commons.BulletChartMode","sap.suite.ui.commons.CalculationBuilderComparisonOperatorType","sap.suite.ui.commons.CalculationBuilderFunctionType","sap.suite.ui.commons.CalculationBuilderItemType","sap.suite.ui.commons.CalculationBuilderLayoutType","sap.suite.ui.commons.CalculationBuilderLogicalOperatorType","sap.suite.ui.commons.CalculationBuilderOperatorType","sap.suite.ui.commons.CalculationBuilderValidationType","sap.suite.ui.commons.CommonBackground","sap.suite.ui.commons.ComparisonChartView","sap.suite.ui.commons.DeviationIndicator","sap.suite.ui.commons.FacetOverviewHeight","sap.suite.ui.commons.FrameType","sap.suite.ui.commons.HeaderContainerView","sap.suite.ui.commons.ImageEditorContainerMode","sap.suite.ui.commons.ImageEditorMode","sap.suite.ui.commons.ImageFormat","sap.suite.ui.commons.InfoTileSize","sap.suite.ui.commons.InfoTileTextColor","sap.suite.ui.commons.InfoTileValueColor","sap.suite.ui.commons.LoadState","sap.suite.ui.commons.MicroAreaChartView","sap.suite.ui.commons.MicroProcessFlowRenderType","sap.suite.ui.commons.networkgraph.ActionButtonPosition","sap.suite.ui.commons.networkgraph.BackgroundColor","sap.suite.ui.commons.networkgraph.ElementStatus","sap.suite.ui.commons.networkgraph.LayoutAlgorithmType","sap.suite.ui.commons.networkgraph.LayoutRenderType","sap.suite.ui.commons.networkgraph.LineArrowOrientation","sap.suite.ui.commons.networkgraph.LineArrowPosition","sap.suite.ui.commons.networkgraph.LineType","sap.suite.ui.commons.networkgraph.HeaderCheckboxState","sap.suite.ui.commons.networkgraph.NodePlacement","sap.suite.ui.commons.networkgraph.NodeShape","sap.suite.ui.commons.networkgraph.NodeSize","sap.suite.ui.commons.networkgraph.Orientation","sap.suite.ui.commons.networkgraph.RenderType","sap.suite.ui.commons.ProcessFlowConnectionLabelState","sap.suite.ui.commons.ProcessFlowConnectionState","sap.suite.ui.commons.ProcessFlowConnectionType","sap.suite.ui.commons.ProcessFlowDisplayState","sap.suite.ui.commons.ProcessFlowLaneState","sap.suite.ui.commons.ProcessFlowNodeState","sap.suite.ui.commons.ProcessFlowNodeType","sap.suite.ui.commons.ProcessFlowZoomLevel","sap.suite.ui.commons.SelectionState","sap.suite.ui.commons.statusindicator.FillingType","sap.suite.ui.commons.statusindicator.FillingDirectionType","sap.suite.ui.commons.taccount.TAccountPanelState","sap.suite.ui.commons.ThingGroupDesign","sap.suite.ui.commons.TimelineAlignment","sap.suite.ui.commons.TimelineAxisOrientation","sap.suite.ui.commons.TimelineFilterType","sap.suite.ui.commons.TimelineGroupType","sap.suite.ui.commons.TimelineScrollingFadeout","sap.suite.ui.commons.ValueStatus"],"interfaces":[]}}}}'
},"sap/suite/ui/commons/library-preload"
);
//# sourceMappingURL=library-preload.js.map